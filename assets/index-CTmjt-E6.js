(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var ym={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function Ub(){if(j_)return Zl;j_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var D_;function qb(){return D_||(D_=1,ym.exports=Ub()),ym.exports}var c=qb(),vm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function zb(){if(O_)return je;O_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function x(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,B={};function V(P,ie,fe){this.props=P,this.context=ie,this.refs=B,this.updater=fe||C}V.prototype.isReactComponent={},V.prototype.setState=function(P,ie){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ie,"setState")},V.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=V.prototype;function ae(P,ie,fe){this.props=P,this.context=ie,this.refs=B,this.updater=fe||C}var K=ae.prototype=new Y;K.constructor=ae,q(K,V.prototype),K.isPureReactComponent=!0;var H=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function R(P,ie,fe,ee,ce,me){return fe=me.ref,{$$typeof:s,type:P,key:ie,ref:fe!==void 0?fe:null,props:me}}function w(P,ie){return R(P.type,ie,void 0,void 0,void 0,P.props)}function N(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function j(P){var ie={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(fe){return ie[fe]})}var M=/\/+/g;function U(P,ie){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):ie.toString(36)}function D(){}function ue(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(D,D):(P.status="pending",P.then(function(ie){P.status==="pending"&&(P.status="fulfilled",P.value=ie)},function(ie){P.status==="pending"&&(P.status="rejected",P.reason=ie)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function De(P,ie,fe,ee,ce){var me=typeof P;(me==="undefined"||me==="boolean")&&(P=null);var ye=!1;if(P===null)ye=!0;else switch(me){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(P.$$typeof){case s:case e:ye=!0;break;case _:return ye=P._init,De(ye(P._payload),ie,fe,ee,ce)}}if(ye)return ce=ce(P),ye=ee===""?"."+U(P,0):ee,H(ce)?(fe="",ye!=null&&(fe=ye.replace(M,"$&/")+"/"),De(ce,ie,fe,"",function(ns){return ns})):ce!=null&&(N(ce)&&(ce=w(ce,fe+(ce.key==null||P&&P.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+ye)),ie.push(ce)),1;ye=0;var ht=ee===""?".":ee+":";if(H(P))for(var Ke=0;Ke<P.length;Ke++)ee=P[Ke],me=ht+U(ee,Ke),ye+=De(ee,ie,fe,me,ce);else if(Ke=x(P),typeof Ke=="function")for(P=Ke.call(P),Ke=0;!(ee=P.next()).done;)ee=ee.value,me=ht+U(ee,Ke++),ye+=De(ee,ie,fe,me,ce);else if(me==="object"){if(typeof P.then=="function")return De(ue(P),ie,fe,ee,ce);throw ie=String(P),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ye}function te(P,ie,fe){if(P==null)return P;var ee=[],ce=0;return De(P,ee,"","",function(me){return ie.call(fe,me,ce++)}),ee}function he(P){if(P._status===-1){var ie=P._result;ie=ie(),ie.then(function(fe){(P._status===0||P._status===-1)&&(P._status=1,P._result=fe)},function(fe){(P._status===0||P._status===-1)&&(P._status=2,P._result=fe)}),P._status===-1&&(P._status=0,P._result=ie)}if(P._status===1)return P._result.default;throw P._result}var X=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ee(){}return je.Children={map:te,forEach:function(P,ie,fe){te(P,function(){ie.apply(this,arguments)},fe)},count:function(P){var ie=0;return te(P,function(){ie++}),ie},toArray:function(P){return te(P,function(ie){return ie})||[]},only:function(P){if(!N(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},je.Component=V,je.Fragment=n,je.Profiler=o,je.PureComponent=ae,je.StrictMode=i,je.Suspense=y,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,je.__COMPILER_RUNTIME={__proto__:null,c:function(P){return k.H.useMemoCache(P)}},je.cache=function(P){return function(){return P.apply(null,arguments)}},je.cloneElement=function(P,ie,fe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ee=q({},P.props),ce=P.key,me=void 0;if(ie!=null)for(ye in ie.ref!==void 0&&(me=void 0),ie.key!==void 0&&(ce=""+ie.key),ie)!F.call(ie,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ie.ref===void 0||(ee[ye]=ie[ye]);var ye=arguments.length-2;if(ye===1)ee.children=fe;else if(1<ye){for(var ht=Array(ye),Ke=0;Ke<ye;Ke++)ht[Ke]=arguments[Ke+2];ee.children=ht}return R(P.type,ce,void 0,void 0,me,ee)},je.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},je.createElement=function(P,ie,fe){var ee,ce={},me=null;if(ie!=null)for(ee in ie.key!==void 0&&(me=""+ie.key),ie)F.call(ie,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ce[ee]=ie[ee]);var ye=arguments.length-2;if(ye===1)ce.children=fe;else if(1<ye){for(var ht=Array(ye),Ke=0;Ke<ye;Ke++)ht[Ke]=arguments[Ke+2];ce.children=ht}if(P&&P.defaultProps)for(ee in ye=P.defaultProps,ye)ce[ee]===void 0&&(ce[ee]=ye[ee]);return R(P,me,void 0,void 0,null,ce)},je.createRef=function(){return{current:null}},je.forwardRef=function(P){return{$$typeof:g,render:P}},je.isValidElement=N,je.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:he}},je.memo=function(P,ie){return{$$typeof:p,type:P,compare:ie===void 0?null:ie}},je.startTransition=function(P){var ie=k.T,fe={};k.T=fe;try{var ee=P(),ce=k.S;ce!==null&&ce(fe,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Ee,X)}catch(me){X(me)}finally{k.T=ie}},je.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},je.use=function(P){return k.H.use(P)},je.useActionState=function(P,ie,fe){return k.H.useActionState(P,ie,fe)},je.useCallback=function(P,ie){return k.H.useCallback(P,ie)},je.useContext=function(P){return k.H.useContext(P)},je.useDebugValue=function(){},je.useDeferredValue=function(P,ie){return k.H.useDeferredValue(P,ie)},je.useEffect=function(P,ie,fe){var ee=k.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(P,ie)},je.useId=function(){return k.H.useId()},je.useImperativeHandle=function(P,ie,fe){return k.H.useImperativeHandle(P,ie,fe)},je.useInsertionEffect=function(P,ie){return k.H.useInsertionEffect(P,ie)},je.useLayoutEffect=function(P,ie){return k.H.useLayoutEffect(P,ie)},je.useMemo=function(P,ie){return k.H.useMemo(P,ie)},je.useOptimistic=function(P,ie){return k.H.useOptimistic(P,ie)},je.useReducer=function(P,ie,fe){return k.H.useReducer(P,ie,fe)},je.useRef=function(P){return k.H.useRef(P)},je.useState=function(P){return k.H.useState(P)},je.useSyncExternalStore=function(P,ie,fe){return k.H.useSyncExternalStore(P,ie,fe)},je.useTransition=function(){return k.H.useTransition()},je.version="19.1.1",je}var M_;function fp(){return M_||(M_=1,vm.exports=zb()),vm.exports}var I=fp(),_m={exports:{}},Jl={},Em={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Bb(){return P_||(P_=1,(function(s){function e(te,he){var X=te.length;te.push(he);e:for(;0<X;){var Ee=X-1>>>1,P=te[Ee];if(0<o(P,he))te[Ee]=he,te[X]=P,X=Ee;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var he=te[0],X=te.pop();if(X!==he){te[0]=X;e:for(var Ee=0,P=te.length,ie=P>>>1;Ee<ie;){var fe=2*(Ee+1)-1,ee=te[fe],ce=fe+1,me=te[ce];if(0>o(ee,X))ce<P&&0>o(me,ee)?(te[Ee]=me,te[ce]=X,Ee=ce):(te[Ee]=ee,te[fe]=X,Ee=fe);else if(ce<P&&0>o(me,X))te[Ee]=me,te[ce]=X,Ee=ce;else break e}}return he}function o(te,he){var X=te.sortIndex-he.sortIndex;return X!==0?X:te.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var y=[],p=[],_=1,T=null,x=3,C=!1,q=!1,B=!1,V=!1,Y=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function H(te){for(var he=n(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=te)i(p),he.sortIndex=he.expirationTime,e(y,he);else break;he=n(p)}}function k(te){if(B=!1,H(te),!q)if(n(y)!==null)q=!0,F||(F=!0,U());else{var he=n(p);he!==null&&De(k,he.startTime-te)}}var F=!1,R=-1,w=5,N=-1;function j(){return V?!0:!(s.unstable_now()-N<w)}function M(){if(V=!1,F){var te=s.unstable_now();N=te;var he=!0;try{e:{q=!1,B&&(B=!1,ae(R),R=-1),C=!0;var X=x;try{t:{for(H(te),T=n(y);T!==null&&!(T.expirationTime>te&&j());){var Ee=T.callback;if(typeof Ee=="function"){T.callback=null,x=T.priorityLevel;var P=Ee(T.expirationTime<=te);if(te=s.unstable_now(),typeof P=="function"){T.callback=P,H(te),he=!0;break t}T===n(y)&&i(y),H(te)}else i(y);T=n(y)}if(T!==null)he=!0;else{var ie=n(p);ie!==null&&De(k,ie.startTime-te),he=!1}}break e}finally{T=null,x=X,C=!1}he=void 0}}finally{he?U():F=!1}}}var U;if(typeof K=="function")U=function(){K(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ue=D.port2;D.port1.onmessage=M,U=function(){ue.postMessage(null)}}else U=function(){Y(M,0)};function De(te,he){R=Y(function(){te(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(te){switch(x){case 1:case 2:case 3:var he=3;break;default:he=x}var X=x;x=he;try{return te()}finally{x=X}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var X=x;x=te;try{return he()}finally{x=X}},s.unstable_scheduleCallback=function(te,he,X){var Ee=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ee+X:Ee):X=Ee,te){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=X+P,te={id:_++,callback:he,priorityLevel:te,startTime:X,expirationTime:P,sortIndex:-1},X>Ee?(te.sortIndex=X,e(p,te),n(y)===null&&te===n(p)&&(B?(ae(R),R=-1):B=!0,De(k,X-Ee))):(te.sortIndex=P,e(y,te),q||C||(q=!0,F||(F=!0,U()))),te},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(te){var he=x;return function(){var X=x;x=he;try{return te.apply(this,arguments)}finally{x=X}}}})(Sm)),Sm}var k_;function Fb(){return k_||(k_=1,Em.exports=Bb()),Em.exports}var Tm={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function Hb(){if(V_)return ln;V_=1;var s=fp();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:y,containerInfo:p,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ln.createPortal=function(y,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,_)},ln.flushSync=function(y){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,y)return y()}finally{d.T=p,i.p=_,i.d.f()}},ln.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(y,p))},ln.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},ln.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var _=p.as,T=g(_,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:C}):_==="script"&&i.d.X(y,{crossOrigin:T,integrity:x,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ln.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=g(p.as,p.crossOrigin);i.d.M(y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(y)},ln.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=g(_,p.crossOrigin);i.d.L(y,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ln.preloadModule=function(y,p){if(typeof y=="string")if(p){var _=g(p.as,p.crossOrigin);i.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(y)},ln.requestFormReset=function(y){i.d.r(y)},ln.unstable_batchedUpdates=function(y,p){return y(p)},ln.useFormState=function(y,p,_){return d.H.useFormState(y,p,_)},ln.useFormStatus=function(){return d.H.useHostTransitionStatus()},ln.version="19.1.1",ln}var L_;function Gb(){if(L_)return Tm.exports;L_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Tm.exports=Hb(),Tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function $b(){if(U_)return Jl;U_=1;var s=Fb(),e=fp(),n=Gb();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===l)return g(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var S=!1,b=f.child;b;){if(b===a){S=!0,a=f,l=m;break}if(b===l){S=!0,l=f,a=m;break}b=b.sibling}if(!S){for(b=m.child;b;){if(b===a){S=!0,a=m,l=f;break}if(b===l){S=!0,l=m,a=f;break}b=b.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),K=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case V:return"Profiler";case B:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case K:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case H:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:ue(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return ue(t(r))}catch{}}return null}var De=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Ee=[],P=-1;function ie(t){return{current:t}}function fe(t){0>P||(t.current=Ee[P],Ee[P]=null,P--)}function ee(t,r){P++,Ee[P]=t.current,t.current=r}var ce=ie(null),me=ie(null),ye=ie(null),ht=ie(null);function Ke(t,r){switch(ee(ye,r),ee(me,t),ee(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?i_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=i_(r),t=a_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(ce),ee(ce,t)}function ns(){fe(ce),fe(me),fe(ye)}function $o(t){t.memoizedState!==null&&ee(ht,t);var r=ce.current,a=a_(r,t.type);r!==a&&(ee(me,t),ee(ce,a))}function xa(t){me.current===t&&(fe(ce),fe(me)),ht.current===t&&(fe(ht),Kl._currentValue=X)}var Aa=Object.prototype.hasOwnProperty,Ni=s.unstable_scheduleCallback,Na=s.unstable_cancelCallback,yd=s.unstable_shouldYield,Ko=s.unstable_requestPaint,Sn=s.unstable_now,Lc=s.unstable_getCurrentPriorityLevel,kt=s.unstable_ImmediatePriority,Ft=s.unstable_UserBlockingPriority,zs=s.unstable_NormalPriority,vd=s.unstable_LowPriority,Qo=s.unstable_IdlePriority,_d=s.log,Ri=s.unstable_setDisableYieldValue,br=null,rn=null;function Un(t){if(typeof _d=="function"&&Ri(t),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(br,t)}catch{}}var gn=Math.clz32?Math.clz32:qc,Ed=Math.log,Uc=Math.LN2;function qc(t){return t>>>=0,t===0?32:31-(Ed(t)/Uc|0)|0}var _s=256,wr=4194304;function ss(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qn(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~m,l!==0?f=ss(l):(S&=b,S!==0?f=ss(S):a||(a=b&~t,a!==0&&(f=ss(a))))):(b=l&~m,b!==0?f=ss(b):S!==0?f=ss(S):a||(a=l&~t,a!==0&&(f=ss(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function xr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ra(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var t=_s;return _s<<=1,(_s&4194048)===0&&(_s=256),t}function Ar(){var t=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),t}function Ca(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Tt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zc(t,r,a,l,f,m){var S=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,O=t.expirationTimes,Q=t.hiddenUpdates;for(a=S&~a;0<a;){var ne=31-gn(a),oe=1<<ne;b[ne]=0,O[ne]=-1;var W=Q[ne];if(W!==null)for(Q[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}a&=~oe}l!==0&&Nr(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(S&~r))}function Nr(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-gn(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Rr(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-gn(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function Xo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Wo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bs(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:x_(t.type))}function Sd(t,r){var a=he.p;try{return he.p=t,r()}finally{he.p=a}}var Es=Math.random().toString(36).slice(2),bt="__reactFiber$"+Es,Xt="__reactProps$"+Es,Fs="__reactContainer$"+Es,Ci="__reactEvents$"+Es,Ii="__reactListeners$"+Es,Td="__reactHandles$"+Es,rs="__reactResources$"+Es,Cr="__reactMarker$"+Es;function Ia(t){delete t[bt],delete t[Xt],delete t[Ci],delete t[Ii],delete t[Td]}function Ss(t){var r=t[bt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Fs]||a[bt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=u_(t);t!==null;){if(a=t[bt])return a;t=u_(t)}return r}t=a,a=t.parentNode}return null}function Ts(t){if(t=t[bt]||t[Fs]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ir(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function jr(t){var r=t[rs];return r||(r=t[rs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function wt(t){t[Cr]=!0}var Bc=new Set,ji={};function bs(t,r){ws(t,r),ws(t+"Capture",r)}function ws(t,r){for(ji[t]=r,t=0;t<r.length;t++)Bc.add(r[t])}var Di=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xs={},ja={};function bd(t){return Aa.call(ja,t)?!0:Aa.call(xs,t)?!1:Di.test(t)?ja[t]=!0:(xs[t]=!0,!1)}function Oi(t,r,a){if(bd(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Mi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function zn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Pi,Da;function Hs(t){if(Pi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Pi=r&&r[1]||"",Da=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pi+t+Da}var Oa=!1;function Ma(t,r){if(!t||Oa)return"";Oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var W=Z}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(Z){W=Z}t.call(oe.prototype)}}else{try{throw Error()}catch(Z){W=Z}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),S=m[0],b=m[1];if(S&&b){var O=S.split(`
`),Q=b.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===Q.length)for(l=O.length-1,f=Q.length-1;1<=l&&0<=f&&O[l]!==Q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==Q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==Q[f]){var ne=`
`+O[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=f);break}}}finally{Oa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Hs(a):""}function wd(t){switch(t.tag){case 26:case 27:case 5:return Hs(t.type);case 16:return Hs("Lazy");case 13:return Hs("Suspense");case 19:return Hs("SuspenseList");case 0:case 15:return Ma(t.type,!1);case 11:return Ma(t.type.render,!1);case 1:return Ma(t.type,!0);case 31:return Hs("Activity");default:return""}}function is(t){try{var r="";do r+=wd(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ki(t){var r=Dr(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(S){l=""+S,m.call(this,S)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Or(t){t._valueTracker||(t._valueTracker=ki(t))}function Ze(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Dr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Gs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vi=/[\n"\\]/g;function Ht(t){return t.replace(Vi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zo(t,r,a,l,f,m,S,b){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),r!=null?S==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mt(r)):t.value!==""+mt(r)&&(t.value=""+mt(r)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),r!=null?el(t,S,mt(r)):a!=null?el(t,S,mt(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+mt(b):t.removeAttribute("name")}function Jo(t,r,a,l,f,m,S,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+mt(a):"",r=r!=null?""+mt(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S)}function el(t,r,a){r==="number"&&Gs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Mr(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Fc(t,r,a){if(r!=null&&(r=""+mt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mt(a):""}function Hc(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(De(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Bn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var $s=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||$s.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function nl(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&tl(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&tl(t,m,r[m])}function Pa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$c=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(t){return $c.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var sl=null;function rl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pr=null,yn=null;function Kc(t){var r=Ts(t);if(r&&(t=r.stateNode)){var a=t[Xt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Zo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ht(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[Xt]||null;if(!f)throw Error(i(90));Zo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ze(l)}break e;case"textarea":Fc(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Mr(t,!!a.multiple,r,!1)}}}var Li=!1;function Ui(t,r,a){if(Li)return t(r,a);Li=!0;try{var l=t(r);return l}finally{if(Li=!1,(Pr!==null||yn!==null)&&(ku(),Pr&&(r=Pr,t=yn,yn=Pr=null,Kc(r),t)))for(r=0;r<t.length;r++)Kc(t[r])}}function kr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Xt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=!1;if(vn)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Ks=!1}var Fn=null,rt=null,ka=null;function Qc(){if(ka)return ka;var t,r=rt,a=r.length,l,f="value"in Fn?Fn.value:Fn.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var S=a-t;for(l=1;l<=S&&r[a-l]===f[m-l];l++);return ka=f.slice(t,1<l?1-l:void 0)}function qi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function zi(){return!0}function il(){return!1}function Vt(t){function r(a,l,f,m,S){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zi:il,this.isPropagationStopped=il,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),r}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=Vt(an),Fi=_({},an,{view:0,detail:0}),Hi=Vt(Fi),Va,Gi,As,$i=_({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==As&&(As&&t.type==="mousemove"?(Va=t.screenX-As.screenX,Gi=t.screenY-As.screenY):Gi=Va=0,As=t),Va)},movementY:function(t){return"movementY"in t?t.movementY:Gi}}),Ki=Vt($i),xd=_({},$i,{dataTransfer:0}),Yc=Vt(xd),Qi=_({},Fi,{relatedTarget:0}),La=Vt(Qi),Xc=_({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),al=Vt(Xc),ol=_({},an,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wc=Vt(ol),Ua=_({},an,{data:0}),ll=Vt(Ua),Zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Jc[t])?!!r[t]:!1}function qa(){return eu}var tu=_({},Fi,{key:function(t){if(t.key){var r=Zc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qs[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(t){return t.type==="keypress"?qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),za=Vt(tu),_n=_({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Vt(_n),nu=_({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),Lr=Vt(nu),h=_({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=Vt(h),E=_({},$i,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Vt(E),$=_({},an,{newState:0,oldState:0}),J=Vt($),de=[9,13,27,32],Ce=vn&&"CompositionEvent"in window,lt=null;vn&&"documentMode"in document&&(lt=document.documentMode);var Ye=vn&&"TextEvent"in window&&!lt,xt=vn&&(!Ce||lt&&8<lt&&11>=lt),Rn=" ",Ns=!1;function os(t,r){switch(t){case"keyup":return de.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ls(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function ul(t,r){switch(t){case"compositionend":return ls(r);case"keypress":return r.which!==32?null:(Ns=!0,Rn);case"textInput":return t=r.data,t===Rn&&Ns?null:t;default:return null}}function dT(t,r){if(cs)return t==="compositionend"||!Ce&&os(t,r)?(t=Qc(),ka=rt=Fn=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xt&&r.locale!=="ko"?null:r.data;default:return null}}var fT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!fT[t.type]:r==="textarea"}function Eg(t,r,a,l){Pr?yn?yn.push(l):yn=[l]:Pr=l,r=Bu(r,"onChange"),0<r.length&&(a=new Bi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var hl=null,dl=null;function mT(t){e_(t,0)}function su(t){var r=Ir(t);if(Ze(r))return t}function Sg(t,r){if(t==="change")return r}var Tg=!1;if(vn){var Ad;if(vn){var Nd="oninput"in document;if(!Nd){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Nd=typeof bg.oninput=="function"}Ad=Nd}else Ad=!1;Tg=Ad&&(!document.documentMode||9<document.documentMode)}function wg(){hl&&(hl.detachEvent("onpropertychange",xg),dl=hl=null)}function xg(t){if(t.propertyName==="value"&&su(dl)){var r=[];Eg(r,dl,t,rl(t)),Ui(mT,r)}}function pT(t,r,a){t==="focusin"?(wg(),hl=r,dl=a,hl.attachEvent("onpropertychange",xg)):t==="focusout"&&wg()}function gT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(dl)}function yT(t,r){if(t==="click")return su(r)}function vT(t,r){if(t==="input"||t==="change")return su(r)}function _T(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Cn=typeof Object.is=="function"?Object.is:_T;function fl(t,r){if(Cn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Aa.call(r,f)||!Cn(t[f],r[f]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ng(t,r){var a=Ag(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ag(a)}}function Rg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Rg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Cg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Gs(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Gs(t.document)}return r}function Rd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var ET=vn&&"documentMode"in document&&11>=document.documentMode,Ba=null,Cd=null,ml=null,Id=!1;function Ig(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Id||Ba==null||Ba!==Gs(l)||(l=Ba,"selectionStart"in l&&Rd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ml&&fl(ml,l)||(ml=l,l=Bu(Cd,"onSelect"),0<l.length&&(r=new Bi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ba)))}function Yi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Fa={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},jd={},jg={};vn&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Xi(t){if(jd[t])return jd[t];if(!Fa[t])return t;var r=Fa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in jg)return jd[t]=r[a];return t}var Dg=Xi("animationend"),Og=Xi("animationiteration"),Mg=Xi("animationstart"),ST=Xi("transitionrun"),TT=Xi("transitionstart"),bT=Xi("transitioncancel"),Pg=Xi("transitionend"),kg=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function us(t,r){kg.set(t,r),bs(r,[t])}var Vg=new WeakMap;function Hn(t,r){if(typeof t=="object"&&t!==null){var a=Vg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:is(r)},Vg.set(t,r),r)}return{value:t,source:r,stack:is(r)}}var Gn=[],Ha=0,Od=0;function ru(){for(var t=Ha,r=Od=Ha=0;r<t;){var a=Gn[r];Gn[r++]=null;var l=Gn[r];Gn[r++]=null;var f=Gn[r];Gn[r++]=null;var m=Gn[r];if(Gn[r++]=null,l!==null&&f!==null){var S=l.pending;S===null?f.next=f:(f.next=S.next,S.next=f),l.pending=f}m!==0&&Lg(a,f,m)}}function iu(t,r,a,l){Gn[Ha++]=t,Gn[Ha++]=r,Gn[Ha++]=a,Gn[Ha++]=l,Od|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Md(t,r,a,l){return iu(t,r,a,l),au(t)}function Ga(t,r){return iu(t,null,null,r),au(t)}function Lg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-gn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function au(t){if(50<Ul)throw Ul=0,zf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var $a={};function wT(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,r,a,l){return new wT(t,r,a,l)}function Pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ys(t,r){var a=t.alternate;return a===null?(a=In(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ug(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ou(t,r,a,l,f,m){var S=0;if(l=t,typeof t=="function")Pd(t)&&(S=1);else if(typeof t=="string")S=Ab(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=In(31,a,r,f),t.elementType=N,t.lanes=m,t;case q:return Wi(a.children,f,m,r);case B:S=8,f|=24;break;case V:return t=In(12,a,r,f|2),t.elementType=V,t.lanes=m,t;case k:return t=In(13,a,r,f),t.elementType=k,t.lanes=m,t;case F:return t=In(19,a,r,f),t.elementType=F,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case K:S=10;break e;case ae:S=9;break e;case H:S=11;break e;case R:S=14;break e;case w:S=16,l=null;break e}S=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=In(S,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Wi(t,r,a,l){return t=In(7,t,l,r),t.lanes=a,t}function kd(t,r,a){return t=In(6,t,null,r),t.lanes=a,t}function Vd(t,r,a){return r=In(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ka=[],Qa=0,lu=null,cu=0,$n=[],Kn=0,Zi=null,Xs=1,Ws="";function Ji(t,r){Ka[Qa++]=cu,Ka[Qa++]=lu,lu=t,cu=r}function qg(t,r,a){$n[Kn++]=Xs,$n[Kn++]=Ws,$n[Kn++]=Zi,Zi=t;var l=Xs;t=Ws;var f=32-gn(l)-1;l&=~(1<<f),a+=1;var m=32-gn(r)+f;if(30<m){var S=f-f%5;m=(l&(1<<S)-1).toString(32),l>>=S,f-=S,Xs=1<<32-gn(r)+f|a<<f|l,Ws=m+t}else Xs=1<<m|a<<f|l,Ws=t}function Ld(t){t.return!==null&&(Ji(t,1),qg(t,1,0))}function Ud(t){for(;t===lu;)lu=Ka[--Qa],Ka[Qa]=null,cu=Ka[--Qa],Ka[Qa]=null;for(;t===Zi;)Zi=$n[--Kn],$n[Kn]=null,Ws=$n[--Kn],$n[Kn]=null,Xs=$n[--Kn],$n[Kn]=null}var En=null,vt=null,Ge=!1,ea=null,Rs=!1,qd=Error(i(519));function ta(t){var r=Error(i(418,""));throw yl(Hn(r,t)),qd}function zg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[bt]=t,r[Xt]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<zl.length;a++)Le(zl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Jo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Or(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Hc(r,l.value,l.defaultValue,l.children),Or(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||r_(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=Fu),r=!0):r=!1,r||ta(t)}function Bg(t){for(En=t.return;En;)switch(En.tag){case 5:case 13:Rs=!1;return;case 27:case 3:Rs=!0;return;default:En=En.return}}function pl(t){if(t!==En)return!1;if(!Ge)return Bg(t),Ge=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sm(t.type,t.memoizedProps)),a=!a),a&&vt&&ta(t),Bg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){vt=ds(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}vt=null}}else r===27?(r=vt,ei(t.type)?(t=om,om=null,vt=t):vt=r):vt=En?ds(t.stateNode.nextSibling):null;return!0}function gl(){vt=En=null,Ge=!1}function Fg(){var t=ea;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),ea=null),t}function yl(t){ea===null?ea=[t]:ea.push(t)}var zd=ie(null),na=null,Zs=null;function Ur(t,r,a){ee(zd,r._currentValue),r._currentValue=a}function Js(t){t._currentValue=zd.current,fe(zd)}function Bd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Fd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var O=0;O<r.length;O++)if(b.context===r[O]){m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),Bd(m.return,a,t),l||(S=null);break e}m=b.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),Bd(S,a,t),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===t){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function vl(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var b=f.type;Cn(f.pendingProps.value,S.value)||(t!==null?t.push(b):t=[b])}}else if(f===ht.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Kl):t=[Kl])}f=f.return}t!==null&&Fd(r,t,a,l),r.flags|=262144}function uu(t){for(t=t.firstContext;t!==null;){if(!Cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sa(t){na=t,Zs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function on(t){return Hg(na,t)}function hu(t,r){return na===null&&sa(t),Hg(t,r)}function Hg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Zs===null){if(t===null)throw Error(i(308));Zs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Zs=Zs.next=r;return a}var xT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},AT=s.unstable_scheduleCallback,NT=s.unstable_NormalPriority,Lt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hd(){return{controller:new xT,data:new Map,refCount:0}}function _l(t){t.refCount--,t.refCount===0&&AT(NT,function(){t.controller.abort()})}var El=null,Gd=0,Ya=0,Xa=null;function RT(t,r){if(El===null){var a=El=[];Gd=0,Ya=Qf(),Xa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Gd++,r.then(Gg,Gg),r}function Gg(){if(--Gd===0&&El!==null){Xa!==null&&(Xa.status="fulfilled");var t=El;El=null,Ya=0,Xa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function CT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var $g=te.S;te.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&RT(t,r),$g!==null&&$g(t,r)};var ra=ie(null);function $d(){var t=ra.current;return t!==null?t:it.pooledCache}function du(t,r){r===null?ee(ra,ra.current):ee(ra,r.pool)}function Kg(){var t=$d();return t===null?null:{parent:Lt._currentValue,pool:t}}var Sl=Error(i(460)),Qg=Error(i(474)),fu=Error(i(542)),Kd={then:function(){}};function Yg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function mu(){}function Xg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(mu,mu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t;default:if(typeof r.status=="string")r.then(mu,mu);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t}throw Tl=r,Sl}}var Tl=null;function Wg(){if(Tl===null)throw Error(i(459));var t=Tl;return Tl=null,t}function Zg(t){if(t===Sl||t===fu)throw Error(i(483))}var qr=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function zr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Br(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=au(t),Lg(t,null,a),r}return iu(t,l,r,a),au(t)}function bl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Rr(t,a)}}function Xd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Wd=!1;function wl(){if(Wd){var t=Xa;if(t!==null)throw t}}function xl(t,r,a,l){Wd=!1;var f=t.updateQueue;qr=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var O=b,Q=O.next;O.next=null,S===null?m=Q:S.next=Q,S=O;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==S&&(b===null?ne.firstBaseUpdate=Q:b.next=Q,ne.lastBaseUpdate=O))}if(m!==null){var oe=f.baseState;S=0,ne=Q=O=null,b=m;do{var W=b.lane&-536870913,Z=W!==b.lane;if(Z?(Be&W)===W:(l&W)===W){W!==0&&W===Ya&&(Wd=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ne=t,be=b;W=r;var tt=a;switch(be.tag){case 1:if(Ne=be.payload,typeof Ne=="function"){oe=Ne.call(tt,oe,W);break e}oe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=be.payload,W=typeof Ne=="function"?Ne.call(tt,oe,W):Ne,W==null)break e;oe=_({},oe,W);break e;case 2:qr=!0}}W=b.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(Q=ne=Z,O=oe):ne=ne.next=Z,S|=W;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;Z=b,b=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(O=oe),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),Xr|=S,t.lanes=S,t.memoizedState=oe}}function Jg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function ey(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Jg(a[t],r)}var Wa=ie(null),pu=ie(0);function ty(t,r){t=ar,ee(pu,t),ee(Wa,r),ar=t|r.baseLanes}function Zd(){ee(pu,ar),ee(Wa,Wa.current)}function Jd(){ar=pu.current,fe(Wa),fe(pu)}var Fr=0,Oe=null,Je=null,It=null,gu=!1,Za=!1,ia=!1,yu=0,Al=0,Ja=null,IT=0;function At(){throw Error(i(321))}function ef(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Cn(t[a],r[a]))return!1;return!0}function tf(t,r,a,l,f,m){return Fr=m,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=t===null||t.memoizedState===null?Ly:Uy,ia=!1,m=a(l,f),ia=!1,Za&&(m=sy(r,a,l,f)),ny(t),m}function ny(t){te.H=bu;var r=Je!==null&&Je.next!==null;if(Fr=0,It=Je=Oe=null,gu=!1,Al=0,Ja=null,r)throw Error(i(300));t===null||Gt||(t=t.dependencies,t!==null&&uu(t)&&(Gt=!0))}function sy(t,r,a,l){Oe=t;var f=0;do{if(Za&&(Ja=null),Al=0,Za=!1,25<=f)throw Error(i(301));if(f+=1,It=Je=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=VT,m=r(a,l)}while(Za);return m}function jT(){var t=te.H,r=t.useState()[0];return r=typeof r.then=="function"?Nl(r):r,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Oe.flags|=1024),r}function nf(){var t=yu!==0;return yu=0,t}function sf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function rf(t){if(gu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}gu=!1}Fr=0,It=Je=Oe=null,Za=!1,Al=yu=0,Ja=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Oe.memoizedState=It=t:It=It.next=t,It}function jt(){if(Je===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var r=It===null?Oe.memoizedState:It.next;if(r!==null)It=r,Je=t;else{if(t===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},It===null?Oe.memoizedState=It=t:It=It.next=t}return It}function af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(t){var r=Al;return Al+=1,Ja===null&&(Ja=[]),t=Xg(Ja,t,r),r=Oe,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?Ly:Uy),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nl(t);if(t.$$typeof===K)return on(t)}throw Error(i(438,String(t)))}function of(t){var r=null,a=Oe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=af(),Oe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=j;return r.index++,a}function er(t,r){return typeof r=="function"?r(t):r}function _u(t){var r=jt();return lf(r,Je,t)}function lf(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var b=S=null,O=null,Q=r,ne=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Be&oe)===oe:(Fr&oe)===oe){var W=Q.revertLane;if(W===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===Ya&&(ne=!0);else if((Fr&W)===W){Q=Q.next,W===Ya&&(ne=!0);continue}else oe={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(b=O=oe,S=m):O=O.next=oe,Oe.lanes|=W,Xr|=W;oe=Q.action,ia&&a(m,oe),m=Q.hasEagerState?Q.eagerState:a(m,oe)}else W={lane:oe,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(b=O=W,S=m):O=O.next=W,Oe.lanes|=oe,Xr|=oe;Q=Q.next}while(Q!==null&&Q!==r);if(O===null?S=m:O.next=b,!Cn(m,t.memoizedState)&&(Gt=!0,ne&&(a=Xa,a!==null)))throw a;t.memoizedState=m,t.baseState=S,t.baseQueue=O,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cf(t){var r=jt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var S=f=f.next;do m=t(m,S.action),S=S.next;while(S!==f);Cn(m,r.memoizedState)||(Gt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function ry(t,r,a){var l=Oe,f=jt(),m=Ge;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var S=!Cn((Je||f).memoizedState,a);S&&(f.memoizedState=a,Gt=!0),f=f.queue;var b=oy.bind(null,l,f,t);if(Rl(2048,8,b,[t]),f.getSnapshot!==r||S||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,eo(9,Eu(),ay.bind(null,l,f,a,r),null),it===null)throw Error(i(349));m||(Fr&124)!==0||iy(l,r,a)}return a}function iy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Oe.updateQueue,r===null?(r=af(),Oe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ay(t,r,a,l){r.value=a,r.getSnapshot=l,ly(r)&&cy(t)}function oy(t,r,a){return a(function(){ly(r)&&cy(t)})}function ly(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Cn(t,a)}catch{return!0}}function cy(t){var r=Ga(t,2);r!==null&&Pn(r,t,2)}function uf(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),ia){Un(!0);try{a()}finally{Un(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:t},r}function uy(t,r,a,l){return t.baseState=a,lf(t,Je,typeof l=="function"?l:er)}function DT(t,r,a,l,f){if(Tu(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};te.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,hy(r,m)):(m.next=a.next,r.pending=a.next=m)}}function hy(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=te.T,S={};te.T=S;try{var b=a(f,l),O=te.S;O!==null&&O(S,b),dy(t,r,b)}catch(Q){hf(t,r,Q)}finally{te.T=m}}else try{m=a(f,l),dy(t,r,m)}catch(Q){hf(t,r,Q)}}function dy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){fy(t,r,l)},function(l){return hf(t,r,l)}):fy(t,r,a)}function fy(t,r,a){r.status="fulfilled",r.value=a,my(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,hy(t,a)))}function hf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,my(r),r=r.next;while(r!==l)}t.action=null}function my(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function py(t,r){return r}function gy(t,r){if(Ge){var a=it.formState;if(a!==null){e:{var l=Oe;if(Ge){if(vt){t:{for(var f=vt,m=Rs;f.nodeType!==8;){if(!m){f=null;break t}if(f=ds(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){vt=ds(f.nextSibling),l=f.data==="F!";break e}}ta(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:r},a.queue=l,a=Py.bind(null,Oe,l),l.dispatch=a,l=uf(!1),m=gf.bind(null,Oe,!1,l.queue),l=Tn(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=DT.bind(null,Oe,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function yy(t){var r=jt();return vy(r,Je,t)}function vy(t,r,a){if(r=lf(t,r,py)[0],t=_u(er)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Nl(r)}catch(S){throw S===Sl?fu:S}else l=r;r=jt();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(Oe.flags|=2048,eo(9,Eu(),OT.bind(null,f,a),null)),[l,m,t]}function OT(t,r){t.action=r}function _y(t){var r=jt(),a=Je;if(a!==null)return vy(r,a,t);jt(),r=r.memoizedState,a=jt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function eo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Oe.updateQueue,r===null&&(r=af(),Oe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Eu(){return{destroy:void 0,resource:void 0}}function Ey(){return jt().memoizedState}function Su(t,r,a,l){var f=Tn();l=l===void 0?null:l,Oe.flags|=t,f.memoizedState=eo(1|r,Eu(),a,l)}function Rl(t,r,a,l){var f=jt();l=l===void 0?null:l;var m=f.memoizedState.inst;Je!==null&&l!==null&&ef(l,Je.memoizedState.deps)?f.memoizedState=eo(r,m,a,l):(Oe.flags|=t,f.memoizedState=eo(1|r,m,a,l))}function Sy(t,r){Su(8390656,8,t,r)}function Ty(t,r){Rl(2048,8,t,r)}function by(t,r){return Rl(4,2,t,r)}function wy(t,r){return Rl(4,4,t,r)}function xy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ay(t,r,a){a=a!=null?a.concat([t]):null,Rl(4,4,xy.bind(null,r,t),a)}function df(){}function Ny(t,r){var a=jt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&ef(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ry(t,r){var a=jt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&ef(r,l[1]))return l[0];if(l=t(),ia){Un(!0);try{t()}finally{Un(!1)}}return a.memoizedState=[l,r],l}function ff(t,r,a){return a===void 0||(Fr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=jv(),Oe.lanes|=t,Xr|=t,a)}function Cy(t,r,a,l){return Cn(a,r)?a:Wa.current!==null?(t=ff(t,a,l),Cn(t,r)||(Gt=!0),t):(Fr&42)===0?(Gt=!0,t.memoizedState=a):(t=jv(),Oe.lanes|=t,Xr|=t,r)}function Iy(t,r,a,l,f){var m=he.p;he.p=m!==0&&8>m?m:8;var S=te.T,b={};te.T=b,gf(t,!1,r,a);try{var O=f(),Q=te.S;if(Q!==null&&Q(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=CT(O,l);Cl(t,r,ne,Mn(t))}else Cl(t,r,l,Mn(t))}catch(oe){Cl(t,r,{then:function(){},status:"rejected",reason:oe},Mn())}finally{he.p=m,te.T=S}}function MT(){}function mf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var f=jy(t).queue;Iy(t,f,r,X,a===null?MT:function(){return Dy(t),a(l)})}function jy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:X},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Dy(t){var r=jy(t).next.queue;Cl(t,r,{},Mn())}function pf(){return on(Kl)}function Oy(){return jt().memoizedState}function My(){return jt().memoizedState}function PT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();t=zr(a);var l=Br(r,t,a);l!==null&&(Pn(l,r,a),bl(l,r,a)),r={cache:Hd()},t.payload=r;return}r=r.return}}function kT(t,r,a){var l=Mn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Tu(t)?ky(r,a):(a=Md(t,r,a,l),a!==null&&(Pn(a,t,l),Vy(a,r,l)))}function Py(t,r,a){var l=Mn();Cl(t,r,a,l)}function Cl(t,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tu(t))ky(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var S=r.lastRenderedState,b=m(S,a);if(f.hasEagerState=!0,f.eagerState=b,Cn(b,S))return iu(t,r,f,0),it===null&&ru(),!1}catch{}finally{}if(a=Md(t,r,f,l),a!==null)return Pn(a,t,l),Vy(a,r,l),!0}return!1}function gf(t,r,a,l){if(l={lane:2,revertLane:Qf(),action:l,hasEagerState:!1,eagerState:null,next:null},Tu(t)){if(r)throw Error(i(479))}else r=Md(t,a,l,2),r!==null&&Pn(r,t,2)}function Tu(t){var r=t.alternate;return t===Oe||r!==null&&r===Oe}function ky(t,r){Za=gu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Vy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Rr(t,a)}}var bu={readContext:on,use:vu,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Ly={readContext:on,use:vu,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:on,useEffect:Sy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Su(4194308,4,xy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Su(4194308,4,t,r)},useInsertionEffect:function(t,r){Su(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(ia){Un(!0);try{t()}finally{Un(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var f=a(r);if(ia){Un(!0);try{a(r)}finally{Un(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=kT.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=uf(t);var r=t.queue,a=Py.bind(null,Oe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:df,useDeferredValue:function(t,r){var a=Tn();return ff(a,t,r)},useTransition:function(){var t=uf(!1);return t=Iy.bind(null,Oe,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Oe,f=Tn();if(Ge){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),it===null)throw Error(i(349));(Be&124)!==0||iy(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,Sy(oy.bind(null,l,m,t),[t]),l.flags|=2048,eo(9,Eu(),ay.bind(null,l,m,a,r),null),a},useId:function(){var t=Tn(),r=it.identifierPrefix;if(Ge){var a=Ws,l=Xs;a=(l&~(1<<32-gn(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=yu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=IT++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:pf,useFormState:gy,useActionState:gy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=gf.bind(null,Oe,!0,a),a.dispatch=r,[t,r]},useMemoCache:of,useCacheRefresh:function(){return Tn().memoizedState=PT.bind(null,Oe)}},Uy={readContext:on,use:vu,useCallback:Ny,useContext:on,useEffect:Ty,useImperativeHandle:Ay,useInsertionEffect:by,useLayoutEffect:wy,useMemo:Ry,useReducer:_u,useRef:Ey,useState:function(){return _u(er)},useDebugValue:df,useDeferredValue:function(t,r){var a=jt();return Cy(a,Je.memoizedState,t,r)},useTransition:function(){var t=_u(er)[0],r=jt().memoizedState;return[typeof t=="boolean"?t:Nl(t),r]},useSyncExternalStore:ry,useId:Oy,useHostTransitionStatus:pf,useFormState:yy,useActionState:yy,useOptimistic:function(t,r){var a=jt();return uy(a,Je,t,r)},useMemoCache:of,useCacheRefresh:My},VT={readContext:on,use:vu,useCallback:Ny,useContext:on,useEffect:Ty,useImperativeHandle:Ay,useInsertionEffect:by,useLayoutEffect:wy,useMemo:Ry,useReducer:cf,useRef:Ey,useState:function(){return cf(er)},useDebugValue:df,useDeferredValue:function(t,r){var a=jt();return Je===null?ff(a,t,r):Cy(a,Je.memoizedState,t,r)},useTransition:function(){var t=cf(er)[0],r=jt().memoizedState;return[typeof t=="boolean"?t:Nl(t),r]},useSyncExternalStore:ry,useId:Oy,useHostTransitionStatus:pf,useFormState:_y,useActionState:_y,useOptimistic:function(t,r){var a=jt();return Je!==null?uy(a,Je,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:of,useCacheRefresh:My},to=null,Il=0;function wu(t){var r=Il;return Il+=1,to===null&&(to=[]),Xg(to,t,r)}function jl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function xu(t,r){throw r.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function qy(t){var r=t._init;return r(t._payload)}function zy(t){function r(z,L){if(t){var G=z.deletions;G===null?(z.deletions=[L],z.flags|=16):G.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Ys(z,L),z.index=0,z.sibling=null,z}function m(z,L,G){return z.index=G,t?(G=z.alternate,G!==null?(G=G.index,G<L?(z.flags|=67108866,L):G):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function S(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,L,G,se){return L===null||L.tag!==6?(L=kd(G,z.mode,se),L.return=z,L):(L=f(L,G),L.return=z,L)}function O(z,L,G,se){var _e=G.type;return _e===q?ne(z,L,G.props.children,se,G.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&qy(_e)===L.type)?(L=f(L,G.props),jl(L,G),L.return=z,L):(L=ou(G.type,G.key,G.props,null,z.mode,se),jl(L,G),L.return=z,L)}function Q(z,L,G,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=Vd(G,z.mode,se),L.return=z,L):(L=f(L,G.children||[]),L.return=z,L)}function ne(z,L,G,se,_e){return L===null||L.tag!==7?(L=Wi(G,z.mode,se,_e),L.return=z,L):(L=f(L,G),L.return=z,L)}function oe(z,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=kd(""+L,z.mode,G),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return G=ou(L.type,L.key,L.props,null,z.mode,G),jl(G,L),G.return=z,G;case C:return L=Vd(L,z.mode,G),L.return=z,L;case w:var se=L._init;return L=se(L._payload),oe(z,L,G)}if(De(L)||U(L))return L=Wi(L,z.mode,G,null),L.return=z,L;if(typeof L.then=="function")return oe(z,wu(L),G);if(L.$$typeof===K)return oe(z,hu(z,L),G);xu(z,L)}return null}function W(z,L,G,se){var _e=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:b(z,L,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return G.key===_e?O(z,L,G,se):null;case C:return G.key===_e?Q(z,L,G,se):null;case w:return _e=G._init,G=_e(G._payload),W(z,L,G,se)}if(De(G)||U(G))return _e!==null?null:ne(z,L,G,se,null);if(typeof G.then=="function")return W(z,L,wu(G),se);if(G.$$typeof===K)return W(z,L,hu(z,G),se);xu(z,G)}return null}function Z(z,L,G,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get(G)||null,b(L,z,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return z=z.get(se.key===null?G:se.key)||null,O(L,z,se,_e);case C:return z=z.get(se.key===null?G:se.key)||null,Q(L,z,se,_e);case w:var Pe=se._init;return se=Pe(se._payload),Z(z,L,G,se,_e)}if(De(se)||U(se))return z=z.get(G)||null,ne(L,z,se,_e,null);if(typeof se.then=="function")return Z(z,L,G,wu(se),_e);if(se.$$typeof===K)return Z(z,L,G,hu(L,se),_e);xu(L,se)}return null}function Ne(z,L,G,se){for(var _e=null,Pe=null,Se=L,we=L=0,Kt=null;Se!==null&&we<G.length;we++){Se.index>we?(Kt=Se,Se=null):Kt=Se.sibling;var He=W(z,Se,G[we],se);if(He===null){Se===null&&(Se=Kt);break}t&&Se&&He.alternate===null&&r(z,Se),L=m(He,L,we),Pe===null?_e=He:Pe.sibling=He,Pe=He,Se=Kt}if(we===G.length)return a(z,Se),Ge&&Ji(z,we),_e;if(Se===null){for(;we<G.length;we++)Se=oe(z,G[we],se),Se!==null&&(L=m(Se,L,we),Pe===null?_e=Se:Pe.sibling=Se,Pe=Se);return Ge&&Ji(z,we),_e}for(Se=l(Se);we<G.length;we++)Kt=Z(Se,z,we,G[we],se),Kt!==null&&(t&&Kt.alternate!==null&&Se.delete(Kt.key===null?we:Kt.key),L=m(Kt,L,we),Pe===null?_e=Kt:Pe.sibling=Kt,Pe=Kt);return t&&Se.forEach(function(ii){return r(z,ii)}),Ge&&Ji(z,we),_e}function be(z,L,G,se){if(G==null)throw Error(i(151));for(var _e=null,Pe=null,Se=L,we=L=0,Kt=null,He=G.next();Se!==null&&!He.done;we++,He=G.next()){Se.index>we?(Kt=Se,Se=null):Kt=Se.sibling;var ii=W(z,Se,He.value,se);if(ii===null){Se===null&&(Se=Kt);break}t&&Se&&ii.alternate===null&&r(z,Se),L=m(ii,L,we),Pe===null?_e=ii:Pe.sibling=ii,Pe=ii,Se=Kt}if(He.done)return a(z,Se),Ge&&Ji(z,we),_e;if(Se===null){for(;!He.done;we++,He=G.next())He=oe(z,He.value,se),He!==null&&(L=m(He,L,we),Pe===null?_e=He:Pe.sibling=He,Pe=He);return Ge&&Ji(z,we),_e}for(Se=l(Se);!He.done;we++,He=G.next())He=Z(Se,z,we,He.value,se),He!==null&&(t&&He.alternate!==null&&Se.delete(He.key===null?we:He.key),L=m(He,L,we),Pe===null?_e=He:Pe.sibling=He,Pe=He);return t&&Se.forEach(function(Lb){return r(z,Lb)}),Ge&&Ji(z,we),_e}function tt(z,L,G,se){if(typeof G=="object"&&G!==null&&G.type===q&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case x:e:{for(var _e=G.key;L!==null;){if(L.key===_e){if(_e=G.type,_e===q){if(L.tag===7){a(z,L.sibling),se=f(L,G.props.children),se.return=z,z=se;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&qy(_e)===L.type){a(z,L.sibling),se=f(L,G.props),jl(se,G),se.return=z,z=se;break e}a(z,L);break}else r(z,L);L=L.sibling}G.type===q?(se=Wi(G.props.children,z.mode,se,G.key),se.return=z,z=se):(se=ou(G.type,G.key,G.props,null,z.mode,se),jl(se,G),se.return=z,z=se)}return S(z);case C:e:{for(_e=G.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a(z,L.sibling),se=f(L,G.children||[]),se.return=z,z=se;break e}else{a(z,L);break}else r(z,L);L=L.sibling}se=Vd(G,z.mode,se),se.return=z,z=se}return S(z);case w:return _e=G._init,G=_e(G._payload),tt(z,L,G,se)}if(De(G))return Ne(z,L,G,se);if(U(G)){if(_e=U(G),typeof _e!="function")throw Error(i(150));return G=_e.call(G),be(z,L,G,se)}if(typeof G.then=="function")return tt(z,L,wu(G),se);if(G.$$typeof===K)return tt(z,L,hu(z,G),se);xu(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a(z,L.sibling),se=f(L,G),se.return=z,z=se):(a(z,L),se=kd(G,z.mode,se),se.return=z,z=se),S(z)):a(z,L)}return function(z,L,G,se){try{Il=0;var _e=tt(z,L,G,se);return to=null,_e}catch(Se){if(Se===Sl||Se===fu)throw Se;var Pe=In(29,Se,null,z.mode);return Pe.lanes=se,Pe.return=z,Pe}finally{}}}var no=zy(!0),By=zy(!1),Qn=ie(null),Cs=null;function Hr(t){var r=t.alternate;ee(Ut,Ut.current&1),ee(Qn,t),Cs===null&&(r===null||Wa.current!==null||r.memoizedState!==null)&&(Cs=t)}function Fy(t){if(t.tag===22){if(ee(Ut,Ut.current),ee(Qn,t),Cs===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Cs=t)}}else Gr()}function Gr(){ee(Ut,Ut.current),ee(Qn,Qn.current)}function tr(t){fe(Qn),Cs===t&&(Cs=null),fe(Ut)}var Ut=ie(0);function Au(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||am(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function yf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var vf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Mn(),f=zr(l);f.payload=r,a!=null&&(f.callback=a),r=Br(t,f,l),r!==null&&(Pn(r,t,l),bl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Mn(),f=zr(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Br(t,f,l),r!==null&&(Pn(r,t,l),bl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Mn(),l=zr(a);l.tag=2,r!=null&&(l.callback=r),r=Br(t,l,a),r!==null&&(Pn(r,t,a),bl(r,t,a))}};function Hy(t,r,a,l,f,m,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,S):r.prototype&&r.prototype.isPureReactComponent?!fl(a,l)||!fl(f,m):!0}function Gy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&vf.enqueueReplaceState(r,r.state,null)}function aa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var Nu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function $y(t){Nu(t)}function Ky(t){console.error(t)}function Qy(t){Nu(t)}function Ru(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Yy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _f(t,r,a){return a=zr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ru(t,r)},a}function Xy(t){return t=zr(t),t.tag=3,t}function Wy(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Yy(r,a,l)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Yy(r,a,l),typeof f!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function LT(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&vl(r,a,f,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Cs===null?Ff():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Kd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Gf(t,l,f)),!1;case 22:return a.flags|=65536,l===Kd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Gf(t,l,f)),!1}throw Error(i(435,a.tag))}return Gf(t,l,f),Ff(),!1}if(Ge)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==qd&&(t=Error(i(422),{cause:l}),yl(Hn(t,a)))):(l!==qd&&(r=Error(i(423),{cause:l}),yl(Hn(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Hn(l,a),f=_f(t.stateNode,l,f),Xd(t,f),_t!==4&&(_t=2)),!1;var m=Error(i(520),{cause:l});if(m=Hn(m,a),Ll===null?Ll=[m]:Ll.push(m),_t!==4&&(_t=2),r===null)return!0;l=Hn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=_f(a.stateNode,l,t),Xd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Wr===null||!Wr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Xy(f),Wy(f,t,a,l),Xd(a,f),!1}a=a.return}while(a!==null);return!1}var Zy=Error(i(461)),Gt=!1;function Wt(t,r,a,l){r.child=t===null?By(r,null,a,l):no(r,t.child,a,l)}function Jy(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var S={};for(var b in l)b!=="ref"&&(S[b]=l[b])}else S=l;return sa(r),l=tf(t,r,a,S,m,f),b=nf(),t!==null&&!Gt?(sf(t,r,f),nr(t,r,f)):(Ge&&b&&Ld(r),r.flags|=1,Wt(t,r,l,f),r.child)}function ev(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Pd(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,tv(t,r,m,l,f)):(t=ou(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Nf(t,f)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(S,l)&&t.ref===r.ref)return nr(t,r,f)}return r.flags|=1,t=Ys(m,l),t.ref=r.ref,t.return=r,r.child=t}function tv(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(fl(m,l)&&t.ref===r.ref)if(Gt=!1,r.pendingProps=l=m,Nf(t,f))(t.flags&131072)!==0&&(Gt=!0);else return r.lanes=t.lanes,nr(t,r,f)}return Ef(t,r,a,l,f)}function nv(t,r,a){var l=r.pendingProps,f=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(f=r.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return sv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&du(r,m!==null?m.cachePool:null),m!==null?ty(r,m):Zd(),Fy(r);else return r.lanes=r.childLanes=536870912,sv(t,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(du(r,m.cachePool),ty(r,m),Gr(),r.memoizedState=null):(t!==null&&du(r,null),Zd(),Gr());return Wt(t,r,f,a),r.child}function sv(t,r,a,l){var f=$d();return f=f===null?null:{parent:Lt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&du(r,null),Zd(),Fy(r),t!==null&&vl(t,r,l,!0),null}function Cu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ef(t,r,a,l,f){return sa(r),a=tf(t,r,a,l,void 0,f),l=nf(),t!==null&&!Gt?(sf(t,r,f),nr(t,r,f)):(Ge&&l&&Ld(r),r.flags|=1,Wt(t,r,a,f),r.child)}function rv(t,r,a,l,f,m){return sa(r),r.updateQueue=null,a=sy(r,l,a,f),ny(t),l=nf(),t!==null&&!Gt?(sf(t,r,m),nr(t,r,m)):(Ge&&l&&Ld(r),r.flags|=1,Wt(t,r,a,m),r.child)}function iv(t,r,a,l,f){if(sa(r),r.stateNode===null){var m=$a,S=a.contextType;typeof S=="object"&&S!==null&&(m=on(S)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=vf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Qd(r),S=a.contextType,m.context=typeof S=="object"&&S!==null?on(S):$a,m.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(yf(r,a,S,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&vf.enqueueReplaceState(m,m.state,null),xl(r,l,m,f),wl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var b=r.memoizedProps,O=aa(a,b);m.props=O;var Q=m.context,ne=a.contextType;S=$a,typeof ne=="object"&&ne!==null&&(S=on(ne));var oe=a.getDerivedStateFromProps;ne=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||Q!==S)&&Gy(r,m,l,S),qr=!1;var W=r.memoizedState;m.state=W,xl(r,l,m,f),wl(),Q=r.memoizedState,b||W!==Q||qr?(typeof oe=="function"&&(yf(r,a,oe,l),Q=r.memoizedState),(O=qr||Hy(r,a,O,l,W,Q,S))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Q),m.props=l,m.state=Q,m.context=S,l=O):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Yd(t,r),S=r.memoizedProps,ne=aa(a,S),m.props=ne,oe=r.pendingProps,W=m.context,Q=a.contextType,O=$a,typeof Q=="object"&&Q!==null&&(O=on(Q)),b=a.getDerivedStateFromProps,(Q=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==oe||W!==O)&&Gy(r,m,l,O),qr=!1,W=r.memoizedState,m.state=W,xl(r,l,m,f),wl();var Z=r.memoizedState;S!==oe||W!==Z||qr||t!==null&&t.dependencies!==null&&uu(t.dependencies)?(typeof b=="function"&&(yf(r,a,b,l),Z=r.memoizedState),(ne=qr||Hy(r,a,ne,l,W,Z,O)||t!==null&&t.dependencies!==null&&uu(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,O)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),m.props=l,m.state=Z,m.context=O,l=ne):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Cu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=no(r,t.child,null,f),r.child=no(r,null,a,f)):Wt(t,r,a,f),r.memoizedState=m.state,t=r.child):t=nr(t,r,f),t}function av(t,r,a,l){return gl(),r.flags|=256,Wt(t,r,a,l),r.child}var Sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tf(t){return{baseLanes:t,cachePool:Kg()}}function bf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Yn),t}function ov(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,S;if((S=m)||(S=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),S&&(f=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ge){if(f?Hr(r):Gr(),Ge){var b=vt,O;if(O=b){e:{for(O=b,b=Rs;O.nodeType!==8;){if(!b){b=null;break e}if(O=ds(O.nextSibling),O===null){b=null;break e}}b=O}b!==null?(r.memoizedState={dehydrated:b,treeContext:Zi!==null?{id:Xs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},O=In(18,null,null,0),O.stateNode=b,O.return=r,r.child=O,En=r,vt=null,O=!0):O=!1}O||ta(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return am(b)?r.lanes=32:r.lanes=536870912,null;tr(r)}return b=l.children,l=l.fallback,f?(Gr(),f=r.mode,b=Iu({mode:"hidden",children:b},f),l=Wi(l,f,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,f=r.child,f.memoizedState=Tf(a),f.childLanes=bf(t,S,a),r.memoizedState=Sf,l):(Hr(r),wf(r,b))}if(O=t.memoizedState,O!==null&&(b=O.dehydrated,b!==null)){if(m)r.flags&256?(Hr(r),r.flags&=-257,r=xf(t,r,a)):r.memoizedState!==null?(Gr(),r.child=t.child,r.flags|=128,r=null):(Gr(),f=l.fallback,b=r.mode,l=Iu({mode:"visible",children:l.children},b),f=Wi(f,b,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,no(r,t.child,null,a),l=r.child,l.memoizedState=Tf(a),l.childLanes=bf(t,S,a),r.memoizedState=Sf,r=f);else if(Hr(r),am(b)){if(S=b.nextSibling&&b.nextSibling.dataset,S)var Q=S.dgst;S=Q,l=Error(i(419)),l.stack="",l.digest=S,yl({value:l,source:null,stack:null}),r=xf(t,r,a)}else if(Gt||vl(t,r,a,!1),S=(a&t.childLanes)!==0,Gt||S){if(S=it,S!==null&&(l=a&-a,l=(l&42)!==0?1:Xo(l),l=(l&(S.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,Ga(t,l),Pn(S,t,l),Zy;b.data==="$?"||Ff(),r=xf(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,vt=ds(b.nextSibling),En=r,Ge=!0,ea=null,Rs=!1,t!==null&&($n[Kn++]=Xs,$n[Kn++]=Ws,$n[Kn++]=Zi,Xs=t.id,Ws=t.overflow,Zi=r),r=wf(r,l.children),r.flags|=4096);return r}return f?(Gr(),f=l.fallback,b=r.mode,O=t.child,Q=O.sibling,l=Ys(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,Q!==null?f=Ys(Q,f):(f=Wi(f,b,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,b=t.child.memoizedState,b===null?b=Tf(a):(O=b.cachePool,O!==null?(Q=Lt._currentValue,O=O.parent!==Q?{parent:Q,pool:Q}:O):O=Kg(),b={baseLanes:b.baseLanes|a,cachePool:O}),f.memoizedState=b,f.childLanes=bf(t,S,a),r.memoizedState=Sf,l):(Hr(r),a=t.child,t=a.sibling,a=Ys(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(S=r.deletions,S===null?(r.deletions=[t],r.flags|=16):S.push(t)),r.child=a,r.memoizedState=null,a)}function wf(t,r){return r=Iu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Iu(t,r){return t=In(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function xf(t,r,a){return no(r,t.child,null,a),t=wf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function lv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Bd(t.return,r,a)}function Af(t,r,a,l,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function cv(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;if(Wt(t,r,l.children,a),l=Ut.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lv(t,a,r);else if(t.tag===19)lv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Ut,l),f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Au(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Af(r,!1,f,a,m);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Au(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Af(r,!0,a,null,m);break;case"together":Af(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function nr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Xr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(vl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ys(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ys(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Nf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&uu(t)))}function UT(t,r,a){switch(r.tag){case 3:Ke(r,r.stateNode.containerInfo),Ur(r,Lt,t.memoizedState.cache),gl();break;case 27:case 5:$o(r);break;case 4:Ke(r,r.stateNode.containerInfo);break;case 10:Ur(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Hr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ov(t,r,a):(Hr(r),t=nr(t,r,a),t!==null?t.sibling:null);Hr(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(vl(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return cv(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(Ut,Ut.current),l)break;return null;case 22:case 23:return r.lanes=0,nv(t,r,a);case 24:Ur(r,Lt,t.memoizedState.cache)}return nr(t,r,a)}function uv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Gt=!0;else{if(!Nf(t,a)&&(r.flags&128)===0)return Gt=!1,UT(t,r,a);Gt=(t.flags&131072)!==0}else Gt=!1,Ge&&(r.flags&1048576)!==0&&qg(r,cu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Pd(l)?(t=aa(l,t),r.tag=1,r=iv(null,r,l,t,a)):(r.tag=0,r=Ef(null,r,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===H){r.tag=11,r=Jy(null,r,l,t,a);break e}else if(f===R){r.tag=14,r=ev(null,r,l,t,a);break e}}throw r=ue(l)||l,Error(i(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=aa(l,r.pendingProps),iv(t,r,l,f,a);case 3:e:{if(Ke(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Yd(t,r),xl(r,l,null,a);var S=r.memoizedState;if(l=S.cache,Ur(r,Lt,l),l!==m.cache&&Fd(r,[Lt],a,!0),wl(),l=S.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=av(t,r,l,a);break e}else if(l!==f){f=Hn(Error(i(424)),r),yl(f),r=av(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=ds(t.firstChild),En=r,Ge=!0,ea=null,Rs=!0,a=By(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gl(),l===f){r=nr(t,r,a);break e}Wt(t,r,l,a)}r=r.child}return r;case 26:return Cu(t,r),t===null?(a=m_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ge||(a=r.type,t=r.pendingProps,l=Hu(ye.current).createElement(a),l[bt]=r,l[Xt]=t,Jt(l,a,t),wt(l),r.stateNode=l):r.memoizedState=m_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return $o(r),t===null&&Ge&&(l=r.stateNode=h_(r.type,r.pendingProps,ye.current),En=r,Rs=!0,f=vt,ei(r.type)?(om=f,vt=ds(l.firstChild)):vt=f),Wt(t,r,r.pendingProps.children,a),Cu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ge&&((f=l=vt)&&(l=fb(l,r.type,r.pendingProps,Rs),l!==null?(r.stateNode=l,En=r,vt=ds(l.firstChild),Rs=!1,f=!0):f=!1),f||ta(r)),$o(r),f=r.type,m=r.pendingProps,S=t!==null?t.memoizedProps:null,l=m.children,sm(f,m)?l=null:S!==null&&sm(f,S)&&(r.flags|=32),r.memoizedState!==null&&(f=tf(t,r,jT,null,null,a),Kl._currentValue=f),Cu(t,r),Wt(t,r,l,a),r.child;case 6:return t===null&&Ge&&((t=a=vt)&&(a=mb(a,r.pendingProps,Rs),a!==null?(r.stateNode=a,En=r,vt=null,t=!0):t=!1),t||ta(r)),null;case 13:return ov(t,r,a);case 4:return Ke(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=no(r,null,l,a):Wt(t,r,l,a),r.child;case 11:return Jy(t,r,r.type,r.pendingProps,a);case 7:return Wt(t,r,r.pendingProps,a),r.child;case 8:return Wt(t,r,r.pendingProps.children,a),r.child;case 12:return Wt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ur(r,r.type,l.value),Wt(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,sa(r),f=on(f),l=l(f),r.flags|=1,Wt(t,r,l,a),r.child;case 14:return ev(t,r,r.type,r.pendingProps,a);case 15:return tv(t,r,r.type,r.pendingProps,a);case 19:return cv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Iu(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ys(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return nv(t,r,a);case 24:return sa(r),l=on(Lt),t===null?(f=$d(),f===null&&(f=it,m=Hd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},Qd(r),Ur(r,Lt,f)):((t.lanes&a)!==0&&(Yd(t,r),xl(r,null,null,a),wl()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ur(r,Lt,l)):(l=m.cache,Ur(r,Lt,l),l!==f.cache&&Fd(r,[Lt],a,!0))),Wt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function sr(t){t.flags|=4}function hv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!__(r)){if(r=Qn.current,r!==null&&((Be&4194048)===Be?Cs!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==Cs))throw Tl=Kd,Qg;t.flags|=8192}}function ju(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ar():536870912,t.lanes|=r,ao|=r)}function Dl(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function qT(t,r,a){var l=r.pendingProps;switch(Ud(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Js(Lt),ns(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(pl(r)?sr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fg())),pt(r),null;case 26:return a=r.memoizedState,t===null?(sr(r),a!==null?(pt(r),hv(r,a)):(pt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(sr(r),pt(r),hv(r,a)):(pt(r),r.flags&=-16777217):(t.memoizedProps!==l&&sr(r),pt(r),r.flags&=-16777217),null;case 27:xa(r),a=ye.current;var f=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&sr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}t=ce.current,pl(r)?zg(r):(t=h_(f,l,a),r.stateNode=t,sr(r))}return pt(r),null;case 5:if(xa(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&sr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}if(t=ce.current,pl(r))zg(r);else{switch(f=Hu(ye.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[bt]=r,t[Xt]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=t;e:switch(Jt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&sr(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&sr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=ye.current,pl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=En,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[bt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||r_(t.nodeValue,a)),t||ta(r)}else t=Hu(t).createTextNode(l),t[bt]=r,r.stateNode=t}return pt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=pl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[bt]=r}else gl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),f=!1}else f=Fg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(tr(r),r):(tr(r),null)}if(tr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),ju(r,r.updateQueue),pt(r),null;case 4:return ns(),t===null&&Zf(r.stateNode.containerInfo),pt(r),null;case 10:return Js(r.type),pt(r),null;case 19:if(fe(Ut),f=r.memoizedState,f===null)return pt(r),null;if(l=(r.flags&128)!==0,m=f.rendering,m===null)if(l)Dl(f,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Au(t),m!==null){for(r.flags|=128,Dl(f,!1),t=m.updateQueue,r.updateQueue=t,ju(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ug(a,t),a=a.sibling;return ee(Ut,Ut.current&1|2),r.child}t=t.sibling}f.tail!==null&&Sn()>Mu&&(r.flags|=128,l=!0,Dl(f,!1),r.lanes=4194304)}else{if(!l)if(t=Au(m),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,ju(r,t),Dl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ge)return pt(r),null}else 2*Sn()-f.renderingStartTime>Mu&&a!==536870912&&(r.flags|=128,l=!0,Dl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(t=f.last,t!==null?t.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Sn(),r.sibling=null,t=Ut.current,ee(Ut,l?t&1|2:t&1),r):(pt(r),null);case 22:case 23:return tr(r),Jd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&ju(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&fe(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Js(Lt),pt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function zT(t,r){switch(Ud(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Js(Lt),ns(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return xa(r),null;case 13:if(tr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));gl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return fe(Ut),null;case 4:return ns(),null;case 10:return Js(r.type),null;case 22:case 23:return tr(r),Jd(),t!==null&&fe(ra),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Js(Lt),null;case 25:return null;default:return null}}function dv(t,r){switch(Ud(r),r.tag){case 3:Js(Lt),ns();break;case 26:case 27:case 5:xa(r);break;case 4:ns();break;case 13:tr(r);break;case 19:fe(Ut);break;case 10:Js(r.type);break;case 22:case 23:tr(r),Jd(),t!==null&&fe(ra);break;case 24:Js(Lt)}}function Ol(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,S=a.inst;l=m(),S.destroy=l}a=a.next}while(a!==f)}}catch(b){st(r,r.return,b)}}function $r(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var S=l.inst,b=S.destroy;if(b!==void 0){S.destroy=void 0,f=r;var O=a,Q=b;try{Q()}catch(ne){st(f,O,ne)}}}l=l.next}while(l!==m)}}catch(ne){st(r,r.return,ne)}}function fv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ey(r,a)}catch(l){st(t,t.return,l)}}}function mv(t,r,a){a.props=aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,r,l)}}function Ml(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){st(t,r,f)}}function Is(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){st(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(t,r,f)}else a.current=null}function pv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){st(t,t.return,f)}}function Rf(t,r,a){try{var l=t.stateNode;lb(l,t.type,a,r),l[Xt]=r}catch(f){st(t,t.return,f)}}function gv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ei(t.type)||t.tag===4}function Cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ei(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function If(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Fu));else if(l!==4&&(l===27&&ei(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(If(t,r,a),t=t.sibling;t!==null;)If(t,r,a),t=t.sibling}function Du(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ei(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Du(t,r,a),t=t.sibling;t!==null;)Du(t,r,a),t=t.sibling}function yv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Jt(r,l,a),r[bt]=t,r[Xt]=a}catch(m){st(t,t.return,m)}}var rr=!1,Nt=!1,jf=!1,vv=typeof WeakSet=="function"?WeakSet:Set,$t=null;function BT(t,r){if(t=t.containerInfo,tm=Xu,t=Cg(t),Rd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,b=-1,O=-1,Q=0,ne=0,oe=t,W=null;t:for(;;){for(var Z;oe!==a||f!==0&&oe.nodeType!==3||(b=S+f),oe!==m||l!==0&&oe.nodeType!==3||(O=S+l),oe.nodeType===3&&(S+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)W=oe,oe=Z;for(;;){if(oe===t)break t;if(W===a&&++Q===f&&(b=S),W===m&&++ne===l&&(O=S),(Z=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=Z}a=b===-1||O===-1?null:{start:b,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(nm={focusedElem:t,selectionRange:a},Xu=!1,$t=r;$t!==null;)if(r=$t,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,$t=t;else for(;$t!==null;){switch(r=$t,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ne=aa(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){st(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)im(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,$t=t;break}$t=r.return}}function _v(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Kr(t,a),l&4&&Ol(5,a);break;case 1:if(Kr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(S){st(a,a.return,S)}else{var f=aa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(S){st(a,a.return,S)}}l&64&&fv(a),l&512&&Ml(a,a.return);break;case 3:if(Kr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ey(t,r)}catch(S){st(a,a.return,S)}}break;case 27:r===null&&l&4&&yv(a);case 26:case 5:Kr(t,a),r===null&&l&4&&pv(a),l&512&&Ml(a,a.return);break;case 12:Kr(t,a);break;case 13:Kr(t,a),l&4&&Tv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=WT.bind(null,a),pb(t,a))));break;case 22:if(l=a.memoizedState!==null||rr,!l){r=r!==null&&r.memoizedState!==null||Nt,f=rr;var m=Nt;rr=l,(Nt=r)&&!m?Qr(t,a,(a.subtreeFlags&8772)!==0):Kr(t,a),rr=f,Nt=m}break;case 30:break;default:Kr(t,a)}}function Ev(t){var r=t.alternate;r!==null&&(t.alternate=null,Ev(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ia(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,bn=!1;function ir(t,r,a){for(a=a.child;a!==null;)Sv(t,r,a),a=a.sibling}function Sv(t,r,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(br,a)}catch{}switch(a.tag){case 26:Nt||Is(a,r),ir(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||Is(a,r);var l=dt,f=bn;ei(a.type)&&(dt=a.stateNode,bn=!1),ir(t,r,a),Fl(a.stateNode),dt=l,bn=f;break;case 5:Nt||Is(a,r);case 6:if(l=dt,f=bn,dt=null,ir(t,r,a),dt=l,bn=f,dt!==null)if(bn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(m){st(a,r,m)}else try{dt.removeChild(a.stateNode)}catch(m){st(a,r,m)}break;case 18:dt!==null&&(bn?(t=dt,c_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Wl(t)):c_(dt,a.stateNode));break;case 4:l=dt,f=bn,dt=a.stateNode.containerInfo,bn=!0,ir(t,r,a),dt=l,bn=f;break;case 0:case 11:case 14:case 15:Nt||$r(2,a,r),Nt||$r(4,a,r),ir(t,r,a);break;case 1:Nt||(Is(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&mv(a,r,l)),ir(t,r,a);break;case 21:ir(t,r,a);break;case 22:Nt=(l=Nt)||a.memoizedState!==null,ir(t,r,a),Nt=l;break;default:ir(t,r,a)}}function Tv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wl(t)}catch(a){st(r,r.return,a)}}function FT(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new vv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new vv),r;default:throw Error(i(435,t.tag))}}function Df(t,r){var a=FT(t);r.forEach(function(l){var f=ZT.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function jn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,S=r,b=S;e:for(;b!==null;){switch(b.tag){case 27:if(ei(b.type)){dt=b.stateNode,bn=!1;break e}break;case 5:dt=b.stateNode,bn=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,bn=!0;break e}b=b.return}if(dt===null)throw Error(i(160));Sv(m,S,f),dt=null,bn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)bv(r,t),r=r.sibling}var hs=null;function bv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(r,t),Dn(t),l&4&&($r(3,t,t.return),Ol(3,t),$r(5,t,t.return));break;case 1:jn(r,t),Dn(t),l&512&&(Nt||a===null||Is(a,a.return)),l&64&&rr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=hs;if(jn(r,t),Dn(t),l&512&&(Nt||a===null||Is(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Cr]||m[bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Jt(m,l,a),m[bt]=t,wt(m),l=m;break e;case"link":var S=y_("link","href",f).get(l+(a.href||""));if(S){for(var b=0;b<S.length;b++)if(m=S[b],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(b,1);break t}}m=f.createElement(l),Jt(m,l,a),f.head.appendChild(m);break;case"meta":if(S=y_("meta","content",f).get(l+(a.content||""))){for(b=0;b<S.length;b++)if(m=S[b],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(b,1);break t}}m=f.createElement(l),Jt(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[bt]=t,wt(m),l=m}t.stateNode=l}else v_(f,t.type,t.stateNode);else t.stateNode=g_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?v_(f,t.type,t.stateNode):g_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Rf(t,t.memoizedProps,a.memoizedProps)}break;case 27:jn(r,t),Dn(t),l&512&&(Nt||a===null||Is(a,a.return)),a!==null&&l&4&&Rf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(jn(r,t),Dn(t),l&512&&(Nt||a===null||Is(a,a.return)),t.flags&32){f=t.stateNode;try{Bn(f,"")}catch(Z){st(t,t.return,Z)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Rf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(jf=!0);break;case 6:if(jn(r,t),Dn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Z){st(t,t.return,Z)}}break;case 3:if(Ku=null,f=hs,hs=Gu(r.containerInfo),jn(r,t),hs=f,Dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(r.containerInfo)}catch(Z){st(t,t.return,Z)}jf&&(jf=!1,wv(t));break;case 4:l=hs,hs=Gu(t.stateNode.containerInfo),jn(r,t),Dn(t),hs=l;break;case 12:jn(r,t),Dn(t);break;case 13:jn(r,t),Dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lf=Sn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Df(t,l)));break;case 22:f=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,Q=rr,ne=Nt;if(rr=Q||f,Nt=ne||O,jn(r,t),Nt=ne,rr=Q,Dn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||O||rr||Nt||oa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(m=O.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{b=O.stateNode;var oe=O.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;b.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){st(O,O.return,Z)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(Z){st(O,O.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Df(t,a))));break;case 19:jn(r,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Df(t,l)));break;case 30:break;case 21:break;default:jn(r,t),Dn(t)}}function Dn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(gv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=Cf(t);Du(t,m,f);break;case 5:var S=a.stateNode;a.flags&32&&(Bn(S,""),a.flags&=-33);var b=Cf(t);Du(t,b,S);break;case 3:case 4:var O=a.stateNode.containerInfo,Q=Cf(t);If(t,Q,O);break;default:throw Error(i(161))}}catch(ne){st(t,t.return,ne)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function wv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;wv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Kr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(t,r.alternate,r),r=r.sibling}function oa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:$r(4,r,r.return),oa(r);break;case 1:Is(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&mv(r,r.return,a),oa(r);break;case 27:Fl(r.stateNode);case 26:case 5:Is(r,r.return),oa(r);break;case 22:r.memoizedState===null&&oa(r);break;case 30:oa(r);break;default:oa(r)}t=t.sibling}}function Qr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,S=m.flags;switch(m.tag){case 0:case 11:case 15:Qr(f,m,a),Ol(4,m);break;case 1:if(Qr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){st(l,l.return,Q)}if(l=m,f=l.updateQueue,f!==null){var b=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Jg(O[f],b)}catch(Q){st(l,l.return,Q)}}a&&S&64&&fv(m),Ml(m,m.return);break;case 27:yv(m);case 26:case 5:Qr(f,m,a),a&&l===null&&S&4&&pv(m),Ml(m,m.return);break;case 12:Qr(f,m,a);break;case 13:Qr(f,m,a),a&&S&4&&Tv(f,m);break;case 22:m.memoizedState===null&&Qr(f,m,a),Ml(m,m.return);break;case 30:break;default:Qr(f,m,a)}r=r.sibling}}function Of(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&_l(a))}function Mf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&_l(t))}function js(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xv(t,r,a,l),r=r.sibling}function xv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:js(t,r,a,l),f&2048&&Ol(9,r);break;case 1:js(t,r,a,l);break;case 3:js(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&_l(t)));break;case 12:if(f&2048){js(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,S=m.id,b=m.onPostCommit;typeof b=="function"&&b(S,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){st(r,r.return,O)}}else js(t,r,a,l);break;case 13:js(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,S=r.alternate,r.memoizedState!==null?m._visibility&2?js(t,r,a,l):Pl(t,r):m._visibility&2?js(t,r,a,l):(m._visibility|=2,so(t,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&Of(S,r);break;case 24:js(t,r,a,l),f&2048&&Mf(r.alternate,r);break;default:js(t,r,a,l)}}function so(t,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,S=r,b=a,O=l,Q=S.flags;switch(S.tag){case 0:case 11:case 15:so(m,S,b,O,f),Ol(8,S);break;case 23:break;case 22:var ne=S.stateNode;S.memoizedState!==null?ne._visibility&2?so(m,S,b,O,f):Pl(m,S):(ne._visibility|=2,so(m,S,b,O,f)),f&&Q&2048&&Of(S.alternate,S);break;case 24:so(m,S,b,O,f),f&&Q&2048&&Mf(S.alternate,S);break;default:so(m,S,b,O,f)}r=r.sibling}}function Pl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Pl(a,l),f&2048&&Of(l.alternate,l);break;case 24:Pl(a,l),f&2048&&Mf(l.alternate,l);break;default:Pl(a,l)}r=r.sibling}}var kl=8192;function ro(t){if(t.subtreeFlags&kl)for(t=t.child;t!==null;)Av(t),t=t.sibling}function Av(t){switch(t.tag){case 26:ro(t),t.flags&kl&&t.memoizedState!==null&&Rb(hs,t.memoizedState,t.memoizedProps);break;case 5:ro(t);break;case 3:case 4:var r=hs;hs=Gu(t.stateNode.containerInfo),ro(t),hs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,ro(t),kl=r):ro(t));break;default:ro(t)}}function Nv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Vl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];$t=l,Cv(l,t)}Nv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rv(t),t=t.sibling}function Rv(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&$r(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Ou(t)):Vl(t);break;default:Vl(t)}}function Ou(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];$t=l,Cv(l,t)}Nv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:$r(8,r,r.return),Ou(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ou(r));break;default:Ou(r)}t=t.sibling}}function Cv(t,r){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:$r(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:_l(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$t=l;else e:for(a=t;$t!==null;){l=$t;var f=l.sibling,m=l.return;if(Ev(l),l===a){$t=null;break e}if(f!==null){f.return=m,$t=f;break e}$t=m}}}var HT={getCacheForType:function(t){var r=on(Lt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},GT=typeof WeakMap=="function"?WeakMap:Map,Xe=0,it=null,Ve=null,Be=0,We=0,On=null,Yr=!1,io=!1,Pf=!1,ar=0,_t=0,Xr=0,la=0,kf=0,Yn=0,ao=0,Ll=null,wn=null,Vf=!1,Lf=0,Mu=1/0,Pu=null,Wr=null,Zt=0,Zr=null,oo=null,lo=0,Uf=0,qf=null,Iv=null,Ul=0,zf=null;function Mn(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(te.T!==null){var t=Ya;return t!==0?t:Qf()}return Bs()}function jv(){Yn===0&&(Yn=(Be&536870912)===0||Ge?Yo():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Yn}function Pn(t,r,a){(t===it&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(co(t,0),Jr(t,Be,Yn,!1)),Tt(t,a),((Xe&2)===0||t!==it)&&(t===it&&((Xe&2)===0&&(la|=a),_t===4&&Jr(t,Be,Yn,!1)),Ds(t))}function Dv(t,r,a){if((Xe&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||xr(t,r),f=l?QT(t,r):Hf(t,r,!0),m=l;do{if(f===0){io&&!l&&Jr(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!$T(a)){f=Hf(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var b=t;f=Ll;var O=b.current.memoizedState.isDehydrated;if(O&&(co(b,S).flags|=256),S=Hf(b,S,!1),S!==2){if(Pf&&!O){b.errorRecoveryDisabledLanes|=m,la|=m,f=4;break e}m=wn,wn=f,m!==null&&(wn===null?wn=m:wn.push.apply(wn,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){co(t,0),Jr(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Jr(l,r,Yn,!Yr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Lf+300-Sn(),10<f)){if(Jr(l,r,Yn,!Yr),qn(l,0,!0)!==0)break e;l.timeoutHandle=o_(Ov.bind(null,l,a,wn,Pu,Vf,r,Yn,la,ao,Yr,m,2,-0,0),f);break e}Ov(l,a,wn,Pu,Vf,r,Yn,la,ao,Yr,m,0,-0,0)}}break}while(!0);Ds(t)}function Ov(t,r,a,l,f,m,S,b,O,Q,ne,oe,W,Z){if(t.timeoutHandle=-1,oe=r.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&($l={stylesheets:null,count:0,unsuspend:Nb},Av(r),oe=Cb(),oe!==null)){t.cancelPendingCommit=oe(qv.bind(null,t,r,m,a,l,f,S,b,O,ne,1,W,Z)),Jr(t,m,S,!Q);return}qv(t,r,m,a,l,f,S,b,O)}function $T(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Cn(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Jr(t,r,a,l){r&=~kf,r&=~la,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-gn(f),S=1<<m;l[m]=-1,f&=~S}a!==0&&Nr(t,a,r)}function ku(){return(Xe&6)===0?(ql(0),!1):!0}function Bf(){if(Ve!==null){if(We===0)var t=Ve.return;else t=Ve,Zs=na=null,rf(t),to=null,Il=0,t=Ve;for(;t!==null;)dv(t.alternate,t),t=t.return;Ve=null}}function co(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,ub(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Bf(),it=t,Ve=a=Ys(t.current,null),Be=r,We=0,On=null,Yr=!1,io=xr(t,r),Pf=!1,ao=Yn=kf=la=Xr=_t=0,wn=Ll=null,Vf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-gn(l),m=1<<f;r|=t[f],l&=~m}return ar=r,ru(),a}function Mv(t,r){Oe=null,te.H=bu,r===Sl||r===fu?(r=Wg(),We=3):r===Qg?(r=Wg(),We=4):We=r===Zy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,On=r,Ve===null&&(_t=1,Ru(t,Hn(r,t.current)))}function Pv(){var t=te.H;return te.H=bu,t===null?bu:t}function kv(){var t=te.A;return te.A=HT,t}function Ff(){_t=4,Yr||(Be&4194048)!==Be&&Qn.current!==null||(io=!0),(Xr&134217727)===0&&(la&134217727)===0||it===null||Jr(it,Be,Yn,!1)}function Hf(t,r,a){var l=Xe;Xe|=2;var f=Pv(),m=kv();(it!==t||Be!==r)&&(Pu=null,co(t,r)),r=!1;var S=_t;e:do try{if(We!==0&&Ve!==null){var b=Ve,O=On;switch(We){case 8:Bf(),S=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var Q=We;if(We=0,On=null,uo(t,b,O,Q),a&&io){S=0;break e}break;default:Q=We,We=0,On=null,uo(t,b,O,Q)}}KT(),S=_t;break}catch(ne){Mv(t,ne)}while(!0);return r&&t.shellSuspendCounter++,Zs=na=null,Xe=l,te.H=f,te.A=m,Ve===null&&(it=null,Be=0,ru()),S}function KT(){for(;Ve!==null;)Vv(Ve)}function QT(t,r){var a=Xe;Xe|=2;var l=Pv(),f=kv();it!==t||Be!==r?(Pu=null,Mu=Sn()+500,co(t,r)):io=xr(t,r);e:do try{if(We!==0&&Ve!==null){r=Ve;var m=On;t:switch(We){case 1:We=0,On=null,uo(t,r,m,1);break;case 2:case 9:if(Yg(m)){We=0,On=null,Lv(r);break}r=function(){We!==2&&We!==9||it!==t||(We=7),Ds(t)},m.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Yg(m)?(We=0,On=null,Lv(r)):(We=0,On=null,uo(t,r,m,7));break;case 5:var S=null;switch(Ve.tag){case 26:S=Ve.memoizedState;case 5:case 27:var b=Ve;if(!S||__(S)){We=0,On=null;var O=b.sibling;if(O!==null)Ve=O;else{var Q=b.return;Q!==null?(Ve=Q,Vu(Q)):Ve=null}break t}}We=0,On=null,uo(t,r,m,5);break;case 6:We=0,On=null,uo(t,r,m,6);break;case 8:Bf(),_t=6;break e;default:throw Error(i(462))}}YT();break}catch(ne){Mv(t,ne)}while(!0);return Zs=na=null,te.H=l,te.A=f,Xe=a,Ve!==null?0:(it=null,Be=0,ru(),_t)}function YT(){for(;Ve!==null&&!yd();)Vv(Ve)}function Vv(t){var r=uv(t.alternate,t,ar);t.memoizedProps=t.pendingProps,r===null?Vu(t):Ve=r}function Lv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=rv(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=rv(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:rf(r);default:dv(a,r),r=Ve=Ug(r,ar),r=uv(a,r,ar)}t.memoizedProps=t.pendingProps,r===null?Vu(t):Ve=r}function uo(t,r,a,l){Zs=na=null,rf(r),to=null,Il=0;var f=r.return;try{if(LT(t,f,r,a,Be)){_t=1,Ru(t,Hn(a,t.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;_t=1,Ru(t,Hn(a,t.current)),Ve=null;return}r.flags&32768?(Ge||l===1?t=!0:io||(Be&536870912)!==0?t=!1:(Yr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uv(r,t)):Vu(r)}function Vu(t){var r=t;do{if((r.flags&32768)!==0){Uv(r,Yr);return}t=r.return;var a=qT(r.alternate,r,ar);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);_t===0&&(_t=5)}function Uv(t,r){do{var a=zT(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);_t=6,Ve=null}function qv(t,r,a,l,f,m,S,b,O){t.cancelPendingCommit=null;do Lu();while(Zt!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Od,zc(t,a,m,S,b,O),t===it&&(Ve=it=null,Be=0),oo=r,Zr=t,lo=a,Uf=m,qf=f,Iv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,JT(zs,function(){return Gv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,f=he.p,he.p=2,S=Xe,Xe|=4;try{BT(t,r,a)}finally{Xe=S,he.p=f,te.T=l}}Zt=1,zv(),Bv(),Fv()}}function zv(){if(Zt===1){Zt=0;var t=Zr,r=oo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=he.p;he.p=2;var f=Xe;Xe|=4;try{bv(r,t);var m=nm,S=Cg(t.containerInfo),b=m.focusedElem,O=m.selectionRange;if(S!==b&&b&&b.ownerDocument&&Rg(b.ownerDocument.documentElement,b)){if(O!==null&&Rd(b)){var Q=O.start,ne=O.end;if(ne===void 0&&(ne=Q),"selectionStart"in b)b.selectionStart=Q,b.selectionEnd=Math.min(ne,b.value.length);else{var oe=b.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ne=b.textContent.length,be=Math.min(O.start,Ne),tt=O.end===void 0?be:Math.min(O.end,Ne);!Z.extend&&be>tt&&(S=tt,tt=be,be=S);var z=Ng(b,be),L=Ng(b,tt);if(z&&L&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var G=oe.createRange();G.setStart(z.node,z.offset),Z.removeAllRanges(),be>tt?(Z.addRange(G),Z.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),Z.addRange(G))}}}}for(oe=[],Z=b;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<oe.length;b++){var se=oe[b];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Xu=!!tm,nm=tm=null}finally{Xe=f,he.p=l,te.T=a}}t.current=r,Zt=2}}function Bv(){if(Zt===2){Zt=0;var t=Zr,r=oo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=he.p;he.p=2;var f=Xe;Xe|=4;try{_v(t,r.alternate,r)}finally{Xe=f,he.p=l,te.T=a}}Zt=3}}function Fv(){if(Zt===4||Zt===3){Zt=0,Ko();var t=Zr,r=oo,a=lo,l=Iv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,oo=Zr=null,Hv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Wr=null),Wo(a),r=r.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(br,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=te.T,f=he.p,he.p=2,te.T=null;try{for(var m=t.onRecoverableError,S=0;S<l.length;S++){var b=l[S];m(b.value,{componentStack:b.stack})}}finally{te.T=r,he.p=f}}(lo&3)!==0&&Lu(),Ds(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===zf?Ul++:(Ul=0,zf=t):Ul=0,ql(0)}}function Hv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,_l(r)))}function Lu(t){return zv(),Bv(),Fv(),Gv()}function Gv(){if(Zt!==5)return!1;var t=Zr,r=Uf;Uf=0;var a=Wo(lo),l=te.T,f=he.p;try{he.p=32>a?32:a,te.T=null,a=qf,qf=null;var m=Zr,S=lo;if(Zt=0,oo=Zr=null,lo=0,(Xe&6)!==0)throw Error(i(331));var b=Xe;if(Xe|=4,Rv(m.current),xv(m,m.current,S,a),Xe=b,ql(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(br,m)}catch{}return!0}finally{he.p=f,te.T=l,Hv(t,r)}}function $v(t,r,a){r=Hn(a,r),r=_f(t.stateNode,r,2),t=Br(t,r,2),t!==null&&(Tt(t,2),Ds(t))}function st(t,r,a){if(t.tag===3)$v(t,t,a);else for(;r!==null;){if(r.tag===3){$v(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wr===null||!Wr.has(l))){t=Hn(a,t),a=Xy(2),l=Br(r,a,2),l!==null&&(Wy(a,l,r,t),Tt(l,2),Ds(l));break}}r=r.return}}function Gf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new GT;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Pf=!0,f.add(a),t=XT.bind(null,t,r,a),r.then(t,t))}function XT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Be&a)===a&&(_t===4||_t===3&&(Be&62914560)===Be&&300>Sn()-Lf?(Xe&2)===0&&co(t,0):kf|=a,ao===Be&&(ao=0)),Ds(t)}function Kv(t,r){r===0&&(r=Ar()),t=Ga(t,r),t!==null&&(Tt(t,r),Ds(t))}function WT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Kv(t,a)}function ZT(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Kv(t,a)}function JT(t,r){return Ni(t,r)}var Uu=null,ho=null,$f=!1,qu=!1,Kf=!1,ca=0;function Ds(t){t!==ho&&t.next===null&&(ho===null?Uu=ho=t:ho=ho.next=t),qu=!0,$f||($f=!0,tb())}function ql(t,r){if(!Kf&&qu){Kf=!0;do for(var a=!1,l=Uu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var S=l.suspendedLanes,b=l.pingedLanes;m=(1<<31-gn(42|t)+1)-1,m&=f&~(S&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Wv(l,m))}else m=Be,m=qn(l,l===it?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||xr(l,m)||(a=!0,Wv(l,m));l=l.next}while(a);Kf=!1}}function eb(){Qv()}function Qv(){qu=$f=!1;var t=0;ca!==0&&(cb()&&(t=ca),ca=0);for(var r=Sn(),a=null,l=Uu;l!==null;){var f=l.next,m=Yv(l,r);m===0?(l.next=null,a===null?Uu=f:a.next=f,f===null&&(ho=a)):(a=l,(t!==0||(m&3)!==0)&&(qu=!0)),l=f}ql(t)}function Yv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var S=31-gn(m),b=1<<S,O=f[S];O===-1?((b&a)===0||(b&l)!==0)&&(f[S]=Ra(b,r)):O<=r&&(t.expiredLanes|=b),m&=~b}if(r=it,a=Be,a=qn(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Na(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||xr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Na(l),Wo(a)){case 2:case 8:a=Ft;break;case 32:a=zs;break;case 268435456:a=Qo;break;default:a=zs}return l=Xv.bind(null,t),a=Ni(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Na(l),t.callbackPriority=2,t.callbackNode=null,2}function Xv(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Lu()&&t.callbackNode!==a)return null;var l=Be;return l=qn(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Dv(t,l,r),Yv(t,Sn()),t.callbackNode!=null&&t.callbackNode===a?Xv.bind(null,t):null)}function Wv(t,r){if(Lu())return null;Dv(t,r,!0)}function tb(){hb(function(){(Xe&6)!==0?Ni(kt,eb):Qv()})}function Qf(){return ca===0&&(ca=Yo()),ca}function Zv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:as(""+t)}function Jv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function nb(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=Zv((f[Xt]||null).action),S=l.submitter;S&&(r=(r=S[Xt]||null)?Zv(r.formAction):S.getAttribute("formAction"),r!==null&&(m=r,S=null));var b=new Bi("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ca!==0){var O=S?Jv(f,S):new FormData(f);mf(a,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(b.preventDefault(),O=S?Jv(f,S):new FormData(f),mf(a,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var Yf=0;Yf<Dd.length;Yf++){var Xf=Dd[Yf],sb=Xf.toLowerCase(),rb=Xf[0].toUpperCase()+Xf.slice(1);us(sb,"on"+rb)}us(Dg,"onAnimationEnd"),us(Og,"onAnimationIteration"),us(Mg,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(ST,"onTransitionRun"),us(TT,"onTransitionStart"),us(bT,"onTransitionCancel"),us(Pg,"onTransitionEnd"),ws("onMouseEnter",["mouseout","mouseover"]),ws("onMouseLeave",["mouseout","mouseover"]),ws("onPointerEnter",["pointerout","pointerover"]),ws("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ib=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function e_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var S=l.length-1;0<=S;S--){var b=l[S],O=b.instance,Q=b.currentTarget;if(b=b.listener,O!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=Q;try{m(f)}catch(ne){Nu(ne)}f.currentTarget=null,m=O}else for(S=0;S<l.length;S++){if(b=l[S],O=b.instance,Q=b.currentTarget,b=b.listener,O!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=Q;try{m(f)}catch(ne){Nu(ne)}f.currentTarget=null,m=O}}}}function Le(t,r){var a=r[Ci];a===void 0&&(a=r[Ci]=new Set);var l=t+"__bubble";a.has(l)||(t_(r,t,2,!1),a.add(l))}function Wf(t,r,a){var l=0;r&&(l|=4),t_(a,t,l,r)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Zf(t){if(!t[zu]){t[zu]=!0,Bc.forEach(function(a){a!=="selectionchange"&&(ib.has(a)||Wf(a,!1,t),Wf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[zu]||(r[zu]=!0,Wf("selectionchange",!1,r))}}function t_(t,r,a,l){switch(x_(r)){case 2:var f=Db;break;case 8:f=Ob;break;default:f=dm}a=f.bind(null,r,a,t),f=void 0,!Ks||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Jf(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var b=l.stateNode.containerInfo;if(b===f)break;if(S===4)for(S=l.return;S!==null;){var O=S.tag;if((O===3||O===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;b!==null;){if(S=Ss(b),S===null)return;if(O=S.tag,O===5||O===6||O===26||O===27){l=m=S;continue e}b=b.parentNode}}l=l.return}Ui(function(){var Q=m,ne=rl(a),oe=[];e:{var W=kg.get(t);if(W!==void 0){var Z=Bi,Ne=t;switch(t){case"keypress":if(qi(a)===0)break e;case"keydown":case"keyup":Z=za;break;case"focusin":Ne="focus",Z=La;break;case"focusout":Ne="blur",Z=La;break;case"beforeblur":case"afterblur":Z=La;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Lr;break;case Dg:case Og:case Mg:Z=al;break;case Pg:Z=v;break;case"scroll":case"scrollend":Z=Hi;break;case"wheel":Z=A;break;case"copy":case"cut":case"paste":Z=Wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=cl;break;case"toggle":case"beforetoggle":Z=J}var be=(r&4)!==0,tt=!be&&(t==="scroll"||t==="scrollend"),z=be?W!==null?W+"Capture":null:W;be=[];for(var L=Q,G;L!==null;){var se=L;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||z===null||(se=kr(L,z),se!=null&&be.push(Bl(L,se,G))),tt)break;L=L.return}0<be.length&&(W=new Z(W,Ne,null,a,ne),oe.push({event:W,listeners:be}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&a!==sl&&(Ne=a.relatedTarget||a.fromElement)&&(Ss(Ne)||Ne[Fs]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ne=a.relatedTarget||a.toElement,Z=Q,Ne=Ne?Ss(Ne):null,Ne!==null&&(tt=u(Ne),be=Ne.tag,Ne!==tt||be!==5&&be!==27&&be!==6)&&(Ne=null)):(Z=null,Ne=Q),Z!==Ne)){if(be=Ki,se="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(be=cl,se="onPointerLeave",z="onPointerEnter",L="pointer"),tt=Z==null?W:Ir(Z),G=Ne==null?W:Ir(Ne),W=new be(se,L+"leave",Z,a,ne),W.target=tt,W.relatedTarget=G,se=null,Ss(ne)===Q&&(be=new be(z,L+"enter",Ne,a,ne),be.target=G,be.relatedTarget=tt,se=be),tt=se,Z&&Ne)t:{for(be=Z,z=Ne,L=0,G=be;G;G=fo(G))L++;for(G=0,se=z;se;se=fo(se))G++;for(;0<L-G;)be=fo(be),L--;for(;0<G-L;)z=fo(z),G--;for(;L--;){if(be===z||z!==null&&be===z.alternate)break t;be=fo(be),z=fo(z)}be=null}else be=null;Z!==null&&n_(oe,W,Z,be,!1),Ne!==null&&tt!==null&&n_(oe,tt,Ne,be,!0)}}e:{if(W=Q?Ir(Q):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var _e=Sg;else if(_g(W))if(Tg)_e=vT;else{_e=gT;var Pe=pT}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Q&&Pa(Q.elementType)&&(_e=Sg):_e=yT;if(_e&&(_e=_e(t,Q))){Eg(oe,_e,a,ne);break e}Pe&&Pe(t,W,Q),t==="focusout"&&Q&&W.type==="number"&&Q.memoizedProps.value!=null&&el(W,"number",W.value)}switch(Pe=Q?Ir(Q):window,t){case"focusin":(_g(Pe)||Pe.contentEditable==="true")&&(Ba=Pe,Cd=Q,ml=null);break;case"focusout":ml=Cd=Ba=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Ig(oe,a,ne);break;case"selectionchange":if(ET)break;case"keydown":case"keyup":Ig(oe,a,ne)}var Se;if(Ce)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else cs?os(t,a)&&(we="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(xt&&a.locale!=="ko"&&(cs||we!=="onCompositionStart"?we==="onCompositionEnd"&&cs&&(Se=Qc()):(Fn=ne,rt="value"in Fn?Fn.value:Fn.textContent,cs=!0)),Pe=Bu(Q,we),0<Pe.length&&(we=new ll(we,t,null,a,ne),oe.push({event:we,listeners:Pe}),Se?we.data=Se:(Se=ls(a),Se!==null&&(we.data=Se)))),(Se=Ye?ul(t,a):dT(t,a))&&(we=Bu(Q,"onBeforeInput"),0<we.length&&(Pe=new ll("onBeforeInput","beforeinput",null,a,ne),oe.push({event:Pe,listeners:we}),Pe.data=Se)),nb(oe,t,Q,a,ne)}e_(oe,r)})}function Bl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Bu(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=kr(t,a),f!=null&&l.unshift(Bl(t,f,m)),f=kr(t,r),f!=null&&l.push(Bl(t,f,m))),t.tag===3)return l;t=t.return}return[]}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n_(t,r,a,l,f){for(var m=r._reactName,S=[];a!==null&&a!==l;){var b=a,O=b.alternate,Q=b.stateNode;if(b=b.tag,O!==null&&O===l)break;b!==5&&b!==26&&b!==27||Q===null||(O=Q,f?(Q=kr(a,m),Q!=null&&S.unshift(Bl(a,Q,O))):f||(Q=kr(a,m),Q!=null&&S.push(Bl(a,Q,O)))),a=a.return}S.length!==0&&t.push({event:r,listeners:S})}var ab=/\r\n?/g,ob=/\u0000|\uFFFD/g;function s_(t){return(typeof t=="string"?t:""+t).replace(ab,`
`).replace(ob,"")}function r_(t,r){return r=s_(r),s_(t)===r}function Fu(){}function et(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Bn(t,""+l);break;case"className":Mi(t,"class",l);break;case"tabIndex":Mi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(t,a,l);break;case"style":nl(t,l,m);break;case"data":if(r!=="object"){Mi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=as(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&et(t,r,"name",f.name,f,null),et(t,r,"formEncType",f.formEncType,f,null),et(t,r,"formMethod",f.formMethod,f,null),et(t,r,"formTarget",f.formTarget,f,null)):(et(t,r,"encType",f.encType,f,null),et(t,r,"method",f.method,f,null),et(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=as(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Fu);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=as(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),Oi(t,"popover",l);break;case"xlinkActuate":zn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Oi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gc.get(a)||a,Oi(t,a,l))}}function em(t,r,a,l,f,m){switch(a){case"style":nl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&Bn(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ji.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[Xt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Oi(t,a,l)}}}function Jt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,m,S,a,null)}}f&&et(t,r,"srcSet",a.srcSet,a,null),l&&et(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var b=m=S=f=null,O=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":f=ne;break;case"type":S=ne;break;case"checked":O=ne;break;case"defaultChecked":Q=ne;break;case"value":m=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:et(t,r,l,ne,a,null)}}Jo(t,m,b,O,Q,S,f,!1),Or(t);return;case"select":Le("invalid",t),l=S=m=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":S=b;break;case"multiple":l=b;default:et(t,r,f,b,a,null)}r=m,a=S,t.multiple=!!l,r!=null?Mr(t,!!l,r,!1):a!=null&&Mr(t,!!l,a,!0);return;case"textarea":Le("invalid",t),m=f=l=null;for(S in a)if(a.hasOwnProperty(S)&&(b=a[S],b!=null))switch(S){case"value":l=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:et(t,r,S,b,a,null)}Hc(t,l,f,m),Or(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,r,O,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<zl.length;l++)Le(zl[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,Q,l,a,null)}return;default:if(Pa(r)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&em(t,r,ne,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&et(t,r,b,l,a,null))}function lb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,b=null,O=null,Q=null,ne=null;for(Z in a){var oe=a[Z];if(a.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=oe;default:l.hasOwnProperty(Z)||et(t,r,Z,null,l,oe)}}for(var W in l){var Z=l[W];if(oe=a[W],l.hasOwnProperty(W)&&(Z!=null||oe!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":Q=Z;break;case"defaultChecked":ne=Z;break;case"value":S=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==oe&&et(t,r,W,Z,l,oe)}}Zo(t,S,b,O,Q,ne,m,f);return;case"select":Z=S=b=W=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Z=O;default:l.hasOwnProperty(m)||et(t,r,m,null,l,O)}for(f in l)if(m=l[f],O=a[f],l.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":W=m;break;case"defaultValue":b=m;break;case"multiple":S=m;default:m!==O&&et(t,r,f,m,l,O)}r=b,a=S,l=Z,W!=null?Mr(t,!!a,W,!1):!!l!=!!a&&(r!=null?Mr(t,!!a,r,!0):Mr(t,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:et(t,r,b,null,l,f)}for(S in l)if(f=l[S],m=a[S],l.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&et(t,r,S,f,l,m)}Fc(t,W,Z);return;case"option":for(var Ne in a)if(W=a[Ne],a.hasOwnProperty(Ne)&&W!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:et(t,r,Ne,null,l,W)}for(O in l)if(W=l[O],Z=a[O],l.hasOwnProperty(O)&&W!==Z&&(W!=null||Z!=null))switch(O){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:et(t,r,O,W,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)W=a[be],a.hasOwnProperty(be)&&W!=null&&!l.hasOwnProperty(be)&&et(t,r,be,null,l,W);for(Q in l)if(W=l[Q],Z=a[Q],l.hasOwnProperty(Q)&&W!==Z&&(W!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:et(t,r,Q,W,l,Z)}return;default:if(Pa(r)){for(var tt in a)W=a[tt],a.hasOwnProperty(tt)&&W!==void 0&&!l.hasOwnProperty(tt)&&em(t,r,tt,void 0,l,W);for(ne in l)W=l[ne],Z=a[ne],!l.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||em(t,r,ne,W,l,Z);return}}for(var z in a)W=a[z],a.hasOwnProperty(z)&&W!=null&&!l.hasOwnProperty(z)&&et(t,r,z,null,l,W);for(oe in l)W=l[oe],Z=a[oe],!l.hasOwnProperty(oe)||W===Z||W==null&&Z==null||et(t,r,oe,W,l,Z)}var tm=null,nm=null;function Hu(t){return t.nodeType===9?t:t.ownerDocument}function i_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function sm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function cb(){var t=window.event;return t&&t.type==="popstate"?t===rm?!1:(rm=t,!0):(rm=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,ub=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,hb=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(t){return l_.resolve(null).then(t).catch(db)}:o_;function db(t){setTimeout(function(){throw t})}function ei(t){return t==="head"}function c_(t,r){var a=r,l=0,f=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var S=t.ownerDocument;if(a&1&&Fl(S.documentElement),a&2&&Fl(S.body),a&4)for(a=S.head,Fl(a),S=a.firstChild;S;){var b=S.nextSibling,O=S.nodeName;S[Cr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=b}}if(f===0){t.removeChild(m),Wl(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);Wl(r)}function im(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":im(a),Ia(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function fb(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Cr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ds(t.nextSibling),t===null)break}return null}function mb(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ds(t.nextSibling),t===null))return null;return t}function am(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function pb(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ds(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var om=null;function u_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function h_(t,r,a){switch(r=Hu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Fl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ia(t)}var Xn=new Map,d_=new Set;function Gu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var or=he.d;he.d={f:gb,r:yb,D:vb,C:_b,L:Eb,m:Sb,X:bb,S:Tb,M:wb};function gb(){var t=or.f(),r=ku();return t||r}function yb(t){var r=Ts(t);r!==null&&r.tag===5&&r.type==="form"?Dy(r):or.r(t)}var mo=typeof document>"u"?null:document;function f_(t,r,a){var l=mo;if(l&&typeof r=="string"&&r){var f=Ht(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),d_.has(f)||(d_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Jt(r,"link",t),wt(r),l.head.appendChild(r)))}}function vb(t){or.D(t),f_("dns-prefetch",t,null)}function _b(t,r){or.C(t,r),f_("preconnect",t,r)}function Eb(t,r,a){or.L(t,r,a);var l=mo;if(l&&t&&r){var f='link[rel="preload"][as="'+Ht(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ht(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ht(a.imageSizes)+'"]')):f+='[href="'+Ht(t)+'"]';var m=f;switch(r){case"style":m=po(t);break;case"script":m=go(t)}Xn.has(m)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Xn.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Hl(m))||r==="script"&&l.querySelector(Gl(m))||(r=l.createElement("link"),Jt(r,"link",t),wt(r),l.head.appendChild(r)))}}function Sb(t,r){or.m(t,r);var a=mo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Ht(l)+'"][href="'+Ht(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=go(t)}if(!Xn.has(m)&&(t=_({rel:"modulepreload",href:t},r),Xn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(m)))return}l=a.createElement("link"),Jt(l,"link",t),wt(l),a.head.appendChild(l)}}}function Tb(t,r,a){or.S(t,r,a);var l=mo;if(l&&t){var f=jr(l).hoistableStyles,m=po(t);r=r||"default";var S=f.get(m);if(!S){var b={loading:0,preload:null};if(S=l.querySelector(Hl(m)))b.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Xn.get(m))&&lm(t,a);var O=S=l.createElement("link");wt(O),Jt(O,"link",t),O._p=new Promise(function(Q,ne){O.onload=Q,O.onerror=ne}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,$u(S,r,l)}S={type:"stylesheet",instance:S,count:1,state:b},f.set(m,S)}}}function bb(t,r){or.X(t,r);var a=mo;if(a&&t){var l=jr(a).hoistableScripts,f=go(t),m=l.get(f);m||(m=a.querySelector(Gl(f)),m||(t=_({src:t,async:!0},r),(r=Xn.get(f))&&cm(t,r),m=a.createElement("script"),wt(m),Jt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function wb(t,r){or.M(t,r);var a=mo;if(a&&t){var l=jr(a).hoistableScripts,f=go(t),m=l.get(f);m||(m=a.querySelector(Gl(f)),m||(t=_({src:t,async:!0,type:"module"},r),(r=Xn.get(f))&&cm(t,r),m=a.createElement("script"),wt(m),Jt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function m_(t,r,a,l){var f=(f=ye.current)?Gu(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=po(a.href),a=jr(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=po(a.href);var m=jr(f).hoistableStyles,S=m.get(t);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,S),(m=f.querySelector(Hl(t)))&&!m._p&&(S.instance=m,S.state.loading=5),Xn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(t,a),m||xb(f,t,a,S.state))),r&&l===null)throw Error(i(528,""));return S}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(a),a=jr(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function po(t){return'href="'+Ht(t)+'"'}function Hl(t){return'link[rel="stylesheet"]['+t+"]"}function p_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function xb(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Jt(r,"link",a),wt(r),t.head.appendChild(r))}function go(t){return'[src="'+Ht(t)+'"]'}function Gl(t){return"script[async]"+t}function g_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ht(a.href)+'"]');if(l)return r.instance=l,wt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),wt(l),Jt(l,"style",f),$u(l,a.precedence,t),r.instance=l;case"stylesheet":f=po(a.href);var m=t.querySelector(Hl(f));if(m)return r.state.loading|=4,r.instance=m,wt(m),m;l=p_(a),(f=Xn.get(f))&&lm(l,f),m=(t.ownerDocument||t).createElement("link"),wt(m);var S=m;return S._p=new Promise(function(b,O){S.onload=b,S.onerror=O}),Jt(m,"link",l),r.state.loading|=4,$u(m,a.precedence,t),r.instance=m;case"script":return m=go(a.src),(f=t.querySelector(Gl(m)))?(r.instance=f,wt(f),f):(l=a,(f=Xn.get(m))&&(l=_({},a),cm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),wt(f),Jt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,$u(l,a.precedence,t));return r.instance}function $u(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,S=0;S<l.length;S++){var b=l[S];if(b.dataset.precedence===r)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function cm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ku=null;function y_(t,r,a){if(Ku===null){var l=new Map,f=Ku=new Map;f.set(a,l)}else f=Ku,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Cr]||m[bt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(r)||"";S=t+S;var b=l.get(S);b?b.push(m):l.set(S,[m])}}return l}function v_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Ab(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function __(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var $l=null;function Nb(){}function Rb(t,r,a){if($l===null)throw Error(i(475));var l=$l;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=po(a.href),m=t.querySelector(Hl(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Qu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=m,wt(m);return}m=t.ownerDocument||t,a=p_(a),(f=Xn.get(f))&&lm(a,f),m=m.createElement("link"),wt(m);var S=m;S._p=new Promise(function(b,O){S.onload=b,S.onerror=O}),Jt(m,"link",a),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Qu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function Cb(){if($l===null)throw Error(i(475));var t=$l;return t.stylesheets&&t.count===0&&um(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&um(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)um(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yu=null;function um(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yu=new Map,r.forEach(Ib,t),Yu=null,Qu.call(t))}function Ib(t,r){if(!(r.state.loading&4)){var a=Yu.get(t);if(a)var l=a.get(null);else{a=new Map,Yu.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),l=S)}l&&a.set(null,l)}f=r.instance,S=f.getAttribute("data-precedence"),m=a.get(S)||l,m===l&&a.set(null,f),a.set(S,f),this.count++,l=Qu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Kl={$$typeof:K,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function jb(t,r,a,l,f,m,S,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ca(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.hiddenUpdates=Ca(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function E_(t,r,a,l,f,m,S,b,O,Q,ne,oe){return t=new jb(t,r,a,S,b,O,Q,oe),r=1,m===!0&&(r|=24),m=In(3,null,null,r),t.current=m,m.stateNode=t,r=Hd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Qd(m),t}function S_(t){return t?(t=$a,t):$a}function T_(t,r,a,l,f,m){f=S_(f),l.context===null?l.context=f:l.pendingContext=f,l=zr(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Br(t,l,r),a!==null&&(Pn(a,t,r),bl(a,t,r))}function b_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function hm(t,r){b_(t,r),(t=t.alternate)&&b_(t,r)}function w_(t){if(t.tag===13){var r=Ga(t,67108864);r!==null&&Pn(r,t,67108864),hm(t,67108864)}}var Xu=!0;function Db(t,r,a,l){var f=te.T;te.T=null;var m=he.p;try{he.p=2,dm(t,r,a,l)}finally{he.p=m,te.T=f}}function Ob(t,r,a,l){var f=te.T;te.T=null;var m=he.p;try{he.p=8,dm(t,r,a,l)}finally{he.p=m,te.T=f}}function dm(t,r,a,l){if(Xu){var f=fm(l);if(f===null)Jf(t,r,l,Wu,a),A_(t,l);else if(Pb(f,t,r,a,l))l.stopPropagation();else if(A_(t,l),r&4&&-1<Mb.indexOf(t)){for(;f!==null;){var m=Ts(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=ss(m.pendingLanes);if(S!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var O=1<<31-gn(S);b.entanglements[1]|=O,S&=~O}Ds(m),(Xe&6)===0&&(Mu=Sn()+500,ql(0))}}break;case 13:b=Ga(m,2),b!==null&&Pn(b,m,2),ku(),hm(m,2)}if(m=fm(l),m===null&&Jf(t,r,l,Wu,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Jf(t,r,l,null,a)}}function fm(t){return t=rl(t),mm(t)}var Wu=null;function mm(t){if(Wu=null,t=Ss(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Wu=t,null}function x_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lc()){case kt:return 2;case Ft:return 8;case zs:case vd:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var pm=!1,ti=null,ni=null,si=null,Ql=new Map,Yl=new Map,ri=[],Mb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A_(t,r){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(r.pointerId)}}function Xl(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Ts(r),r!==null&&w_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function Pb(t,r,a,l,f){switch(r){case"focusin":return ti=Xl(ti,t,r,a,l,f),!0;case"dragenter":return ni=Xl(ni,t,r,a,l,f),!0;case"mouseover":return si=Xl(si,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Ql.set(m,Xl(Ql.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Yl.set(m,Xl(Yl.get(m)||null,t,r,a,l,f)),!0}return!1}function N_(t){var r=Ss(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Sd(t.priority,function(){if(a.tag===13){var l=Mn();l=Xo(l);var f=Ga(a,l);f!==null&&Pn(f,a,l),hm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=fm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);sl=l,a.target.dispatchEvent(l),sl=null}else return r=Ts(a),r!==null&&w_(r),t.blockedOn=a,!1;r.shift()}return!0}function R_(t,r,a){Zu(t)&&a.delete(r)}function kb(){pm=!1,ti!==null&&Zu(ti)&&(ti=null),ni!==null&&Zu(ni)&&(ni=null),si!==null&&Zu(si)&&(si=null),Ql.forEach(R_),Yl.forEach(R_)}function Ju(t,r){t.blockedOn===r&&(t.blockedOn=null,pm||(pm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kb)))}var eh=null;function C_(t){eh!==t&&(eh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){eh===t&&(eh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(mm(l||a)===null)continue;break}var m=Ts(a);m!==null&&(t.splice(r,3),r-=3,mf(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Wl(t){function r(O){return Ju(O,t)}ti!==null&&Ju(ti,t),ni!==null&&Ju(ni,t),si!==null&&Ju(si,t),Ql.forEach(r),Yl.forEach(r);for(var a=0;a<ri.length;a++){var l=ri[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ri.length&&(a=ri[0],a.blockedOn===null);)N_(a),a.blockedOn===null&&ri.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],S=f[Xt]||null;if(typeof m=="function")S||C_(a);else if(S){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[Xt]||null)b=S.formAction;else if(mm(f)!==null)continue}else b=S.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),C_(a)}}}function gm(t){this._internalRoot=t}th.prototype.render=gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Mn();T_(a,l,t,r,null,null)},th.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;T_(t.current,2,null,t,null,null),ku(),r[Fs]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var r=Bs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ri.length&&r!==0&&r<ri[a].priority;a++);ri.splice(a,0,t),a===0&&N_(t)}};var I_=e.version;if(I_!=="19.1.1")throw Error(i(527,I_,"19.1.1"));he.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var Vb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{br=nh.inject(Vb),rn=nh}catch{}}return Jl.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",f=$y,m=Ky,S=Qy,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=E_(t,1,!1,null,null,a,l,f,m,S,b,null),t[Fs]=r.current,Zf(t),new gm(r)},Jl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=$y,S=Ky,b=Qy,O=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),r=E_(t,1,!0,r,a??null,l,f,m,S,b,O,Q),r.context=S_(null),a=r.current,l=Mn(),l=Xo(l),f=zr(l),f.callback=null,Br(a,f,l),a=l,r.current.lanes=a,Tt(r,a),Ds(r),t[Fs]=r.current,Zf(t),new th(r)},Jl.version="19.1.1",Jl}var q_;function Kb(){if(q_)return _m.exports;q_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_m.exports=$b(),_m.exports}var Qb=Kb();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var z_="popstate";function Yb(s={}){function e(o,u){let{pathname:d="/",search:g="",hash:y=""}=Sa(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Vm("",{pathname:d,search:g,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let y=o.location.href,p=y.indexOf("#");g=p===-1?y:y.slice(0,p)}return g+"#"+(typeof u=="string"?u:mc(u))}function i(o,u){es(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return Wb(e,n,i,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function es(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xb(){return Math.random().toString(36).substring(2,10)}function B_(s,e){return{usr:s.state,key:s.key,idx:e}}function Vm(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Sa(e):e,state:n,key:e&&e.key||i||Xb()}}function mc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Sa(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function Wb(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,g="POP",y=null,p=_();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function _(){return(d.state||{idx:null}).idx}function T(){g="POP";let V=_(),Y=V==null?null:V-p;p=V,y&&y({action:g,location:B.location,delta:Y})}function x(V,Y){g="PUSH";let ae=Vm(B.location,V,Y);n&&n(ae,V),p=_()+1;let K=B_(ae,p),H=B.createHref(ae);try{d.pushState(K,"",H)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(H)}u&&y&&y({action:g,location:B.location,delta:1})}function C(V,Y){g="REPLACE";let ae=Vm(B.location,V,Y);n&&n(ae,V),p=_();let K=B_(ae,p),H=B.createHref(ae);d.replaceState(K,"",H),u&&y&&y({action:g,location:B.location,delta:0})}function q(V){return Zb(V)}let B={get action(){return g},get location(){return s(o,d)},listen(V){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(z_,T),y=V,()=>{o.removeEventListener(z_,T),y=null}},createHref(V){return e(o,V)},createURL:q,encodeLocation(V){let Y=q(V);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:x,replace:C,go(V){return d.go(V)}};return B}function Zb(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:mc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function w0(s,e,n="/"){return Jb(s,e,n,!1)}function Jb(s,e,n,i){let o=typeof e=="string"?Sa(e):e,u=mr(o.pathname||"/",n);if(u==null)return null;let d=x0(s);ew(d);let g=null;for(let y=0;g==null&&y<d.length;++y){let p=hw(u);g=cw(d[y],p,i)}return g}function x0(s,e=[],n=[],i="",o=!1){let u=(d,g,y=o,p)=>{let _={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&y)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=hr([i,_.relativePath]),x=n.concat(_);d.children&&d.children.length>0&&(ft(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),x0(d.children,e,x,T,y)),!(d.path==null&&!d.index)&&e.push({path:T,score:ow(T,d.index),routesMeta:x})};return s.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))u(d,g);else for(let y of A0(d.path))u(d,g,!0,y)}),e}function A0(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=A0(i.join("/")),g=[];return g.push(...d.map(y=>y===""?u:[u,y].join("/"))),o&&g.push(...d),g.map(y=>s.startsWith("/")&&y===""?"/":y)}function ew(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:lw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var tw=/^:[\w-]+$/,nw=3,sw=2,rw=1,iw=10,aw=-2,F_=s=>s==="*";function ow(s,e){let n=s.split("/"),i=n.length;return n.some(F_)&&(i+=aw),e&&(i+=sw),n.filter(o=>!F_(o)).reduce((o,u)=>o+(tw.test(u)?nw:u===""?rw:iw),i)}function lw(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function cw(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",d=[];for(let g=0;g<i.length;++g){let y=i[g],p=g===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",T=Th({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},_),x=y.route;if(!T&&p&&n&&!i[i.length-1].route.index&&(T=Th({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:hr([u,T.pathname]),pathnameBase:pw(hr([u,T.pathnameBase])),route:x}),T.pathnameBase!=="/"&&(u=hr([u,T.pathnameBase]))}return d}function Th(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=uw(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:T},x)=>{if(_==="*"){let q=g[x]||"";d=u.slice(0,u.length-q.length).replace(/(.)\/+$/,"$1")}const C=g[x];return T&&!C?p[_]=void 0:p[_]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:s}}function uw(s,e=!1,n=!0){es(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,y)=>(i.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function hw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return es(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function mr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function dw(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?Sa(s):s;return{pathname:n?n.startsWith("/")?n:fw(n,e):e,search:gw(i),hash:yw(o)}}function fw(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mw(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mp(s){let e=mw(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function pp(s,e,n,i=!1){let o;typeof s=="string"?o=Sa(s):(o={...s},ft(!o.pathname||!o.pathname.includes("?"),bm("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),bm("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),bm("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,g;if(d==null)g=n;else{let T=e.length-1;if(!i&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),T-=1;o.pathname=x.join("/")}g=T>=0?e[T]:"/"}let y=dw(o,g),p=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(p||_)&&(y.pathname+="/"),y}var hr=s=>s.join("/").replace(/\/\/+/g,"/"),pw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),gw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,yw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function vw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var N0=["POST","PUT","PATCH","DELETE"];new Set(N0);var _w=["GET",...N0];new Set(_w);var ko=I.createContext(null);ko.displayName="DataRouter";var Fh=I.createContext(null);Fh.displayName="DataRouterState";I.createContext(!1);var R0=I.createContext({isTransitioning:!1});R0.displayName="ViewTransition";var Ew=I.createContext(new Map);Ew.displayName="Fetchers";var Sw=I.createContext(null);Sw.displayName="Await";var ys=I.createContext(null);ys.displayName="Navigation";var wc=I.createContext(null);wc.displayName="Location";var vs=I.createContext({outlet:null,matches:[],isDataRoute:!1});vs.displayName="Route";var gp=I.createContext(null);gp.displayName="RouteError";function Tw(s,{relative:e}={}){ft(Vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(ys),{hash:o,pathname:u,search:d}=xc(s,{relative:e}),g=u;return n!=="/"&&(g=u==="/"?n:hr([n,u])),i.createHref({pathname:g,search:d,hash:o})}function Vo(){return I.useContext(wc)!=null}function ts(){return ft(Vo(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(wc).location}var C0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function I0(s){I.useContext(ys).static||I.useLayoutEffect(s)}function St(){let{isDataRoute:s}=I.useContext(vs);return s?Pw():bw()}function bw(){ft(Vo(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(ko),{basename:e,navigator:n}=I.useContext(ys),{matches:i}=I.useContext(vs),{pathname:o}=ts(),u=JSON.stringify(mp(i)),d=I.useRef(!1);return I0(()=>{d.current=!0}),I.useCallback((y,p={})=>{if(es(d.current,C0),!d.current)return;if(typeof y=="number"){n.go(y);return}let _=pp(y,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:hr([e,_.pathname])),(p.replace?n.replace:n.push)(_,p.state,p)},[e,n,u,o,s])}I.createContext(null);function yp(){let{matches:s}=I.useContext(vs),e=s[s.length-1];return e?e.params:{}}function xc(s,{relative:e}={}){let{matches:n}=I.useContext(vs),{pathname:i}=ts(),o=JSON.stringify(mp(n));return I.useMemo(()=>pp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function ww(s,e){return j0(s,e)}function j0(s,e,n,i){ft(Vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(ys),{matches:u}=I.useContext(vs),d=u[u.length-1],g=d?d.params:{},y=d?d.pathname:"/",p=d?d.pathnameBase:"/",_=d&&d.route;{let Y=_&&_.path||"";D0(y,!_||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=ts(),x;if(e){let Y=typeof e=="string"?Sa(e):e;ft(p==="/"||Y.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),x=Y}else x=T;let C=x.pathname||"/",q=C;if(p!=="/"){let Y=p.replace(/^\//,"").split("/");q="/"+C.replace(/^\//,"").split("/").slice(Y.length).join("/")}let B=w0(s,{pathname:q});es(_||B!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),es(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=Cw(B&&B.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:hr([p,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?p:hr([p,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,n,i);return e&&V?I.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},V):V}function xw(){let s=Mw(),e=vw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:u},"ErrorBoundary")," or"," ",I.createElement("code",{style:u},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,d)}var Aw=I.createElement(xw,null),Nw=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?I.createElement(vs.Provider,{value:this.props.routeContext},I.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Rw({routeContext:s,match:e,children:n}){let i=I.useContext(ko);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(vs.Provider,{value:s},n)}function Cw(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,u=n?.errors;if(u!=null){let y=o.findIndex(p=>p.route.id&&u?.[p.route.id]!==void 0);ft(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let d=!1,g=-1;if(n)for(let y=0;y<o.length;y++){let p=o[y];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(g=y),p.route.id){let{loaderData:_,errors:T}=n,x=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||x){d=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}return o.reduceRight((y,p,_)=>{let T,x=!1,C=null,q=null;n&&(T=u&&p.route.id?u[p.route.id]:void 0,C=p.route.errorElement||Aw,d&&(g<0&&_===0?(D0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,q=null):g===_&&(x=!0,q=p.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,_+1)),V=()=>{let Y;return T?Y=C:x?Y=q:p.route.Component?Y=I.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=y,I.createElement(Rw,{match:p,routeContext:{outlet:y,matches:B,isDataRoute:n!=null},children:Y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?I.createElement(Nw,{location:n.location,revalidation:n.revalidation,component:C,error:T,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}function vp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Iw(s){let e=I.useContext(ko);return ft(e,vp(s)),e}function jw(s){let e=I.useContext(Fh);return ft(e,vp(s)),e}function Dw(s){let e=I.useContext(vs);return ft(e,vp(s)),e}function _p(s){let e=Dw(s),n=e.matches[e.matches.length-1];return ft(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Ow(){return _p("useRouteId")}function Mw(){let s=I.useContext(gp),e=jw("useRouteError"),n=_p("useRouteError");return s!==void 0?s:e.errors?.[n]}function Pw(){let{router:s}=Iw("useNavigate"),e=_p("useNavigate"),n=I.useRef(!1);return I0(()=>{n.current=!0}),I.useCallback(async(o,u={})=>{es(n.current,C0),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var H_={};function D0(s,e,n){!e&&!H_[s]&&(H_[s]=!0,es(!1,n))}I.memo(kw);function kw({routes:s,future:e,state:n}){return j0(s,void 0,n,e)}function O0({to:s,replace:e,state:n,relative:i}){ft(Vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(ys);es(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=I.useContext(vs),{pathname:d}=ts(),g=St(),y=pp(s,mp(u),d,i==="path"),p=JSON.stringify(y);return I.useEffect(()=>{g(JSON.parse(p),{replace:e,state:n,relative:i})},[g,p,i,e,n]),null}function Rt(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vw({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){ft(!Vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=I.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=Sa(n));let{pathname:y="/",search:p="",hash:_="",state:T=null,key:x="default"}=n,C=I.useMemo(()=>{let q=mr(y,d);return q==null?null:{location:{pathname:q,search:p,hash:_,state:T,key:x},navigationType:i}},[d,y,p,_,T,x,i]);return es(C!=null,`<Router basename="${d}"> is not able to match the URL "${y}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:I.createElement(ys.Provider,{value:g},I.createElement(wc.Provider,{children:e,value:C}))}function Lw({children:s,location:e}){return ww(Lm(s),e)}function Lm(s,e=[]){let n=[];return I.Children.forEach(s,(i,o)=>{if(!I.isValidElement(i))return;let u=[...e,o];if(i.type===I.Fragment){n.push.apply(n,Lm(i.props.children,u));return}ft(i.type===Rt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Lm(i.props.children,u)),n.push(d)}),n}var uh="get",hh="application/x-www-form-urlencoded";function Hh(s){return s!=null&&typeof s.tagName=="string"}function Uw(s){return Hh(s)&&s.tagName.toLowerCase()==="button"}function qw(s){return Hh(s)&&s.tagName.toLowerCase()==="form"}function zw(s){return Hh(s)&&s.tagName.toLowerCase()==="input"}function Bw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Fw(s,e){return s.button===0&&(!e||e==="_self")&&!Bw(s)}var sh=null;function Hw(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var Gw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wm(s){return s!=null&&!Gw.has(s)?(es(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):s}function $w(s,e){let n,i,o,u,d;if(qw(s)){let g=s.getAttribute("action");i=g?mr(g,e):null,n=s.getAttribute("method")||uh,o=wm(s.getAttribute("enctype"))||hh,u=new FormData(s)}else if(Uw(s)||zw(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=s.getAttribute("formaction")||g.getAttribute("action");if(i=y?mr(y,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||uh,o=wm(s.getAttribute("formenctype"))||wm(g.getAttribute("enctype"))||hh,u=new FormData(g,s),!Hw()){let{name:p,type:_,value:T}=s;if(_==="image"){let x=p?`${p}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else p&&u.append(p,T)}}else{if(Hh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uh,i=null,o=hh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ep(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Kw(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Qw(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Yw(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Xw(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Qw(u,n);return d.links?d.links():[]}return[]}));return ex(i.flat(1).filter(Yw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function G_(s,e,n,i,o,u){let d=(y,p)=>n[p]?y.route.id!==n[p].route.id:!0,g=(y,p)=>n[p].pathname!==y.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==y.params["*"];return u==="assets"?e.filter((y,p)=>d(y,p)||g(y,p)):u==="data"?e.filter((y,p)=>{let _=i.routes[y.route.id];if(!_||!_.hasLoader)return!1;if(d(y,p)||g(y,p))return!0;if(y.route.shouldRevalidate){let T=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Ww(s,e,{includeHydrateFallback:n}={}){return Zw(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Zw(s){return[...new Set(s)]}function Jw(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function ex(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(Jw(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function M0(){let s=I.useContext(ko);return Ep(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function tx(){let s=I.useContext(Fh);return Ep(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Sp=I.createContext(void 0);Sp.displayName="FrameworkContext";function P0(){let s=I.useContext(Sp);return Ep(s,"You must render this element inside a <HydratedRouter> element"),s}function nx(s,e){let n=I.useContext(Sp),[i,o]=I.useState(!1),[u,d]=I.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,x=I.useRef(null);I.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=Y=>{Y.forEach(ae=>{d(ae.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return x.current&&V.observe(x.current),()=>{V.disconnect()}}},[s]),I.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let C=()=>{o(!0)},q=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,x,{}]:[u,x,{onFocus:ec(g,C),onBlur:ec(y,q),onMouseEnter:ec(p,C),onMouseLeave:ec(_,q),onTouchStart:ec(T,C)}]:[!1,x,{}]}function ec(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function sx({page:s,...e}){let{router:n}=M0(),i=I.useMemo(()=>w0(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?I.createElement(ix,{page:s,matches:i,...e}):null}function rx(s){let{manifest:e,routeModules:n}=P0(),[i,o]=I.useState([]);return I.useEffect(()=>{let u=!1;return Xw(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),i}function ix({page:s,matches:e,...n}){let i=ts(),{manifest:o,routeModules:u}=P0(),{basename:d}=M0(),{loaderData:g,matches:y}=tx(),p=I.useMemo(()=>G_(s,e,y,o,i,"data"),[s,e,y,o,i]),_=I.useMemo(()=>G_(s,e,y,o,i,"assets"),[s,e,y,o,i]),T=I.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let q=new Set,B=!1;if(e.forEach(Y=>{let ae=o.routes[Y.route.id];!ae||!ae.hasLoader||(!p.some(K=>K.route.id===Y.route.id)&&Y.route.id in g&&u[Y.route.id]?.shouldRevalidate||ae.hasClientLoader?B=!0:q.add(Y.route.id))}),q.size===0)return[];let V=Kw(s,d,"data");return B&&q.size>0&&V.searchParams.set("_routes",e.filter(Y=>q.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[V.pathname+V.search]},[d,g,i,o,p,e,s,u]),x=I.useMemo(()=>Ww(_,o),[_,o]),C=rx(_);return I.createElement(I.Fragment,null,T.map(q=>I.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...n})),x.map(q=>I.createElement("link",{key:q,rel:"modulepreload",href:q,...n})),C.map(({key:q,link:B})=>I.createElement("link",{key:q,nonce:n.nonce,...B})))}function ax(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var k0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k0&&(window.__reactRouterVersion="7.8.1")}catch{}function ox({basename:s,children:e,window:n}){let i=I.useRef();i.current==null&&(i.current=Yb({window:n,v5Compat:!0}));let o=i.current,[u,d]=I.useState({action:o.action,location:o.location}),g=I.useCallback(y=>{I.startTransition(()=>d(y))},[d]);return I.useLayoutEffect(()=>o.listen(g),[o,g]),I.createElement(Vw,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var V0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gh=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:g,target:y,to:p,preventScrollReset:_,viewTransition:T,...x},C){let{basename:q}=I.useContext(ys),B=typeof p=="string"&&V0.test(p),V,Y=!1;if(typeof p=="string"&&B&&(V=p,k0))try{let N=new URL(window.location.href),j=p.startsWith("//")?new URL(N.protocol+p):new URL(p),M=mr(j.pathname,q);j.origin===N.origin&&M!=null?p=M+j.search+j.hash:Y=!0}catch{es(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=Tw(p,{relative:o}),[K,H,k]=nx(i,x),F=hx(p,{replace:d,state:g,target:y,preventScrollReset:_,relative:o,viewTransition:T});function R(N){e&&e(N),N.defaultPrevented||F(N)}let w=I.createElement("a",{...x,...k,href:V||ae,onClick:Y||u?e:R,ref:ax(C,H),target:y,"data-discover":!B&&n==="render"?"true":void 0});return K&&!B?I.createElement(I.Fragment,null,w,I.createElement(sx,{page:ae})):w});Gh.displayName="Link";var lx=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:g,children:y,...p},_){let T=xc(d,{relative:p.relative}),x=ts(),C=I.useContext(Fh),{navigator:q,basename:B}=I.useContext(ys),V=C!=null&&gx(T)&&g===!0,Y=q.encodeLocation?q.encodeLocation(T).pathname:T.pathname,ae=x.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),K=K?K.toLowerCase():null,Y=Y.toLowerCase()),K&&B&&(K=mr(K,B)||K);const H=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let k=ae===Y||!o&&ae.startsWith(Y)&&ae.charAt(H)==="/",F=K!=null&&(K===Y||!o&&K.startsWith(Y)&&K.charAt(Y.length)==="/"),R={isActive:k,isPending:F,isTransitioning:V},w=k?e:void 0,N;typeof i=="function"?N=i(R):N=[i,k?"active":null,F?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(R):u;return I.createElement(Gh,{...p,"aria-current":w,className:N,ref:_,style:j,to:d,viewTransition:g},typeof y=="function"?y(R):y)});lx.displayName="NavLink";var cx=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=uh,action:g,onSubmit:y,relative:p,preventScrollReset:_,viewTransition:T,...x},C)=>{let q=mx(),B=px(g,{relative:p}),V=d.toLowerCase()==="get"?"get":"post",Y=typeof g=="string"&&V0.test(g),ae=K=>{if(y&&y(K),K.defaultPrevented)return;K.preventDefault();let H=K.nativeEvent.submitter,k=H?.getAttribute("formmethod")||d;q(H||K.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:o,state:u,relative:p,preventScrollReset:_,viewTransition:T})};return I.createElement("form",{ref:C,method:V,action:B,onSubmit:i?y:ae,...x,"data-discover":!Y&&s==="render"?"true":void 0})});cx.displayName="Form";function ux(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function L0(s){let e=I.useContext(ko);return ft(e,ux(s)),e}function hx(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let g=St(),y=ts(),p=xc(s,{relative:u});return I.useCallback(_=>{if(Fw(_,e)){_.preventDefault();let T=n!==void 0?n:mc(y)===mc(p);g(s,{replace:T,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[y,g,p,n,i,e,s,o,u,d])}var dx=0,fx=()=>`__${String(++dx)}__`;function mx(){let{router:s}=L0("useSubmit"),{basename:e}=I.useContext(ys),n=Ow();return I.useCallback(async(i,o={})=>{let{action:u,method:d,encType:g,formData:y,body:p}=$w(i,e);if(o.navigate===!1){let _=o.fetcherKey||fx();await s.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function px(s,{relative:e}={}){let{basename:n}=I.useContext(ys),i=I.useContext(vs);ft(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...xc(s||".",{relative:e})},d=ts();if(s==null){u.search=d.search;let g=new URLSearchParams(u.search),y=g.getAll("index");if(y.some(_=>_==="")){g.delete("index"),y.filter(T=>T).forEach(T=>g.append("index",T));let _=g.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:hr([n,u.pathname])),mc(u)}function gx(s,{relative:e}={}){let n=I.useContext(R0);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=L0("useViewTransitionState"),o=xc(s,{relative:e});if(!n.isTransitioning)return!1;let u=mr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=mr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Th(o.pathname,d)!=null||Th(o.pathname,u)!=null}const yx=()=>{};var $_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},vx=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],g=s[n++],y=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,g=d?s[o+1]:0,y=o+2<s.length,p=y?s[o+2]:0,_=u>>2,T=(u&3)<<4|g>>4;let x=(g&15)<<2|p>>6,C=p&63;y||(C=64,d||(x=64)),i.push(n[_],n[T],n[x],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(U0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):vx(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||T==null)throw new _x;const x=u<<2|g>>4;if(i.push(x),p!==64){const C=g<<4&240|p>>2;if(i.push(C),T!==64){const q=p<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class _x extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ex=function(s){const e=U0(s);return q0.encodeByteArray(e,!0)},bh=function(s){return Ex(s).replace(/\./g,"")},z0=function(s){try{return q0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=()=>Sx().__FIREBASE_DEFAULTS__,bx=()=>{if(typeof process>"u"||typeof $_>"u")return;const s=$_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},wx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&z0(s[1]);return e&&JSON.parse(e)},$h=()=>{try{return yx()||Tx()||bx()||wx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},B0=s=>$h()?.emulatorHosts?.[s],xx=s=>{const e=B0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},F0=()=>$h()?.config,H0=s=>$h()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[bh(JSON.stringify(n)),bh(JSON.stringify(d)),""].join(".")}const lc={};function Rx(){const s={prod:[],emulator:[]};for(const e of Object.keys(lc))lc[e]?s.emulator.push(e):s.prod.push(e);return s}function Cx(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let K_=!1;function $0(s,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||lc[s]===e||lc[s]||K_)return;lc[s]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",u=Rx().prod.length>0;function d(){const x=document.getElementById(i);x&&x.remove()}function g(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{K_=!0,d()},x}function _(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=Cx(i),C=n("text"),q=document.getElementById(C)||document.createElement("span"),B=n("learnmore"),V=document.getElementById(B)||document.createElement("a"),Y=n("preprendIcon"),ae=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const K=x.element;g(K),_(V,B);const H=p();y(ae,Y),K.append(ae,q,V,H),document.body.appendChild(K)}u?(q.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ix(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function jx(){const s=$h()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ox(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Mx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Px(){const s=pn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function kx(){return!jx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vx(){try{return typeof indexedDB=="object"}catch{return!1}}function Lx(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Ux,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ac.prototype.create)}}class Ac{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?qx(u,i):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Sr(o,g,i)}}function qx(s,e){return s.replace(zx,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const zx=/\{\$([^}]+)}/g;function Bx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function pa(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(Q_(u)&&Q_(d)){if(!pa(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Q_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function nc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Fx(s,e){const n=new Hx(s,e);return n.subscribe.bind(n)}class Hx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Gx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=xm),o.error===void 0&&(o.error=xm),o.complete===void 0&&(o.complete=xm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gx(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return s&&s._delegate?s._delegate:s}class ga{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ax;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qx(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);i===g&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Kx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kx(s){return s===ua?void 0:s}function Qx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $x(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const Xx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Wx=Ue.INFO,Zx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Jx=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Zx[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=Wx,this._logHandler=Jx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const eA=(s,e)=>e.some(n=>s instanceof n);let Y_,X_;function tA(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nA(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,Um=new WeakMap,Q0=new WeakMap,Am=new WeakMap,bp=new WeakMap;function sA(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(di(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&K0.set(n,s)}).catch(()=>{}),bp.set(e,s),e}function rA(s){if(Um.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Um.set(s,e)}let qm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Um.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Q0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return di(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function iA(s){qm=s(qm)}function aA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(Nm(this),e,...n);return Q0.set(i,e.sort?e.sort():[e]),di(i)}:nA().includes(s)?function(...e){return s.apply(Nm(this),e),di(K0.get(this))}:function(...e){return di(s.apply(Nm(this),e))}}function oA(s){return typeof s=="function"?aA(s):(s instanceof IDBTransaction&&rA(s),eA(s,tA())?new Proxy(s,qm):s)}function di(s){if(s instanceof IDBRequest)return sA(s);if(Am.has(s))return Am.get(s);const e=oA(s);return e!==s&&(Am.set(s,e),bp.set(e,s)),e}const Nm=s=>bp.get(s);function lA(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),g=di(d);return i&&d.addEventListener("upgradeneeded",y=>{i(di(d.result),y.oldVersion,y.newVersion,di(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const cA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],Rm=new Map;function W_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=uA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||cA.includes(n)))return;const u=async function(d,...g){const y=this.transaction(d,o?"readwrite":"readonly");let p=y.store;return i&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&y.done]))[0]};return Rm.set(e,u),u}iA(s=>({...s,get:(e,n,i)=>W_(e,n)||s.get(e,n,i),has:(e,n)=>!!W_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function dA(s){return s.getComponent()?.type==="VERSION"}const zm="@firebase/app",Z_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Tp("@firebase/app"),fA="@firebase/app-compat",mA="@firebase/analytics-compat",pA="@firebase/analytics",gA="@firebase/app-check-compat",yA="@firebase/app-check",vA="@firebase/auth",_A="@firebase/auth-compat",EA="@firebase/database",SA="@firebase/data-connect",TA="@firebase/database-compat",bA="@firebase/functions",wA="@firebase/functions-compat",xA="@firebase/installations",AA="@firebase/installations-compat",NA="@firebase/messaging",RA="@firebase/messaging-compat",CA="@firebase/performance",IA="@firebase/performance-compat",jA="@firebase/remote-config",DA="@firebase/remote-config-compat",OA="@firebase/storage",MA="@firebase/storage-compat",PA="@firebase/firestore",kA="@firebase/ai",VA="@firebase/firestore-compat",LA="firebase",UA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",qA={[zm]:"fire-core",[fA]:"fire-core-compat",[pA]:"fire-analytics",[mA]:"fire-analytics-compat",[yA]:"fire-app-check",[gA]:"fire-app-check-compat",[vA]:"fire-auth",[_A]:"fire-auth-compat",[EA]:"fire-rtdb",[SA]:"fire-data-connect",[TA]:"fire-rtdb-compat",[bA]:"fire-fn",[wA]:"fire-fn-compat",[xA]:"fire-iid",[AA]:"fire-iid-compat",[NA]:"fire-fcm",[RA]:"fire-fcm-compat",[CA]:"fire-perf",[IA]:"fire-perf-compat",[jA]:"fire-rc",[DA]:"fire-rc-compat",[OA]:"fire-gcs",[MA]:"fire-gcs-compat",[PA]:"fire-fst",[VA]:"fire-fst-compat",[kA]:"fire-vertex","fire-js":"fire-js",[LA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,zA=new Map,Fm=new Map;function J_(s,e){try{s.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function No(s){const e=s.name;if(Fm.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,s);for(const n of wh.values())J_(n,s);for(const n of zA.values())J_(n,s);return!0}function wp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Wn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new Ac("app","Firebase",BA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=UA;function Y0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Bm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw fi.create("bad-app-name",{appName:String(o)});if(n||(n=F0()),!n)throw fi.create("no-options");const u=wh.get(o);if(u){if(pa(n,u.options)&&pa(i,u.config))return u;throw fi.create("duplicate-app",{appName:o})}const d=new Yx(o);for(const y of Fm.values())d.addComponent(y);const g=new FA(n,i,d);return wh.set(o,g),g}function X0(s=Bm){const e=wh.get(s);if(!e&&s===Bm&&F0())return Y0();if(!e)throw fi.create("no-app",{appName:s});return e}function mi(s,e,n){let i=qA[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(d.join(" "));return}No(new ga(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebase-heartbeat-database",GA=1,pc="firebase-heartbeat-store";let Cm=null;function W0(){return Cm||(Cm=lA(HA,GA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(pc)}catch(n){console.warn(n)}}}}).catch(s=>{throw fi.create("idb-open",{originalErrorMessage:s.message})})),Cm}async function $A(s){try{const n=(await W0()).transaction(pc),i=await n.objectStore(pc).get(Z0(s));return await n.done,i}catch(e){if(e instanceof Sr)pr.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e?.message});pr.warn(n.message)}}}async function eE(s,e){try{const i=(await W0()).transaction(pc,"readwrite");await i.objectStore(pc).put(e,Z0(s)),await i.done}catch(n){if(n instanceof Sr)pr.warn(n.message);else{const i=fi.create("idb-set",{originalErrorMessage:n?.message});pr.warn(i.message)}}}function Z0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1024,QA=30;class YA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>QA){const o=ZA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tE(),{heartbeatsToSend:n,unsentEntries:i}=XA(this._heartbeatsCache.heartbeats),o=bh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return pr.warn(e),""}}}function tE(){return new Date().toISOString().substring(0,10)}function XA(s,e=KA){const n=[];let i=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),nE(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),nE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class WA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vx()?Lx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $A(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(s){return bh(JSON.stringify({version:2,heartbeats:s})).length}function ZA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(s){No(new ga("platform-logger",e=>new hA(e),"PRIVATE")),No(new ga("heartbeat",e=>new YA(e),"PRIVATE")),mi(zm,Z_,s),mi(zm,Z_,"esm2020"),mi("fire-js","")}JA("");function J0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eN=J0,eS=new Ac("auth","Firebase",J0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Tp("@firebase/auth");function tN(s,...e){xh.logLevel<=Ue.WARN&&xh.warn(`Auth (${Uo}): ${s}`,...e)}function dh(s,...e){xh.logLevel<=Ue.ERROR&&xh.error(`Auth (${Uo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(s,...e){throw xp(s,...e)}function Ms(s,...e){return xp(s,...e)}function tS(s,e,n){const i={...eN(),[e]:n};return new Ac("auth","Firebase",i).create(e,{appName:s.name})}function dr(s){return tS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xp(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return eS.create(s,...e)}function xe(s,e,...n){if(!s)throw xp(e,...n)}function lr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw dh(e),new Error(e)}function gr(s,e){s||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){return typeof self<"u"&&self.location?.href||""}function nN(){return sE()==="http:"||sE()==="https:"}function sE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nN()||Ox()||"connection"in navigator)?navigator.onLine:!0}function rN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=Ix()||Mx()}get(){return sN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s,e){gr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oN=new Rc(3e4,6e4);function bi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Tr(s,e,n,i,o={}){return sS(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const g=Nc({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:y,...u};return Dx()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(p.credentials="include"),nS.fetch()(await rS(s,s.config.apiHost,n,g),p)})}async function sS(s,e,n){s._canInitEmulator=!1;const i={...iN,...e};try{const o=new cN(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw rh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[y,p]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw rh(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw rh(s,"user-disabled",d);const _=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw tS(s,_,p);ps(s,_)}}catch(o){if(o instanceof Sr)throw o;ps(s,"network-request-failed",{message:String(o)})}}async function Cc(s,e,n,i,o={}){const u=await Tr(s,e,n,i,o);return"mfaPendingCredential"in u&&ps(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function rS(s,e,n,i){const o=`${e}${n}?${i}`,u=s,d=u.config.emulator?Ap(s.config,o):`${s.config.apiScheme}://${o}`;return aN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function lN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ms(this.auth,"network-request-failed")),oN.get())})}}function rh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ms(s,e,i);return o.customData._tokenResponse=n,o}function rE(s){return s!==void 0&&s.enterprise!==void 0}class uN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hN(s,e){return Tr(s,"GET","/v2/recaptchaConfig",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(s,e){return Tr(s,"POST","/v1/accounts:delete",e)}async function Ah(s,e){return Tr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fN(s,e=!1){const n=Pt(s),i=await n.getIdToken(e),o=Np(i);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:cc(Im(o.auth_time)),issuedAtTime:cc(Im(o.iat)),expirationTime:cc(Im(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Im(s){return Number(s)*1e3}function Np(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=z0(n);return o?JSON.parse(o):(dh("Failed to decode base64 JWT payload"),null)}catch(o){return dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function iE(s){const e=Np(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&mN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function mN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(s){const e=s.auth,n=await s.getIdToken(),i=await Ro(s,Ah(e,{idToken:n}));xe(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?iS(o.providerUserInfo):[],d=yN(s.providerData,u),g=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!d?.length,p=g?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,_)}async function gN(s){const e=Pt(s);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yN(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function iS(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(s,e){const n=await sS(s,{},async()=>{const i=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await rS(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:i};return s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(y.credentials="include"),nS.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _N(s,e){return Tr(s,"POST","/v2/accounts:revokeToken",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=iE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await vN(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new bo;return i&&(xe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new pN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ro(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fN(this,e)}reload(){return gN(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(dr(this.auth));const e=await this.getIdToken();return await Ro(this,dN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:C,providerData:q,stsTokenManager:B}=n;xe(T&&B,e,"internal-error");const V=bo.fromJSON(this.name,B);xe(typeof T=="string",e,"internal-error"),ai(i,e.name),ai(o,e.name),xe(typeof x=="boolean",e,"internal-error"),xe(typeof C=="boolean",e,"internal-error"),ai(u,e.name),ai(d,e.name),ai(g,e.name),ai(y,e.name),ai(p,e.name),ai(_,e.name);const Y=new fs({uid:T,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:C,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:V,createdAt:p,lastLoginAt:_});return q&&Array.isArray(q)&&(Y.providerData=q.map(ae=>({...ae}))),y&&(Y._redirectEventId=y),Y}static async _fromIdTokenResponse(e,n,i=!1){const o=new bo;o.updateFromServerResponse(n);const u=new fs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Nh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?iS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,g=new bo;g.updateFromIdToken(i);const y=new fs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function cr(s){gr(s instanceof Function,"Expected a class definition");let e=aE.get(s);return e?(gr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,aE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}aS.type="NONE";const oE=aS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s,e,n){return`firebase:${s}:${e}:${n}`}class wo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=fh(this.userKey,o.apiKey,u),this.fullPersistenceKey=fh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ah(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new wo(cr(oE),e,i);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||cr(oE);const d=fh(i,e.config.apiKey,e.name);let g=null;for(const p of n)try{const _=await p._get(d);if(_){let T;if(typeof _=="string"){const x=await Ah(e,{idToken:_}).catch(()=>{});if(!x)break;T=await fs._fromGetAccountInfoResponse(e,x,_)}else T=fs._fromJSON(e,_);p!==u&&(g=T),u=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new wo(u,e,i):(u=y[0],g&&await u._set(d,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new wo(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dS(e))return"Blackberry";if(fS(e))return"Webos";if(lS(e))return"Safari";if((e.includes("chrome/")||cS(e))&&!e.includes("edge/"))return"Chrome";if(hS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function oS(s=pn()){return/firefox\//i.test(s)}function lS(s=pn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cS(s=pn()){return/crios\//i.test(s)}function uS(s=pn()){return/iemobile/i.test(s)}function hS(s=pn()){return/android/i.test(s)}function dS(s=pn()){return/blackberry/i.test(s)}function fS(s=pn()){return/webos/i.test(s)}function Rp(s=pn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EN(s=pn()){return Rp(s)&&!!window.navigator?.standalone}function SN(){return Px()&&document.documentMode===10}function mS(s=pn()){return Rp(s)||hS(s)||fS(s)||dS(s)||/windows phone/i.test(s)||uS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(s,e=[]){let n;switch(s){case"Browser":n=lE(pn());break;case"Worker":n=`${lE(pn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,g)=>{try{const y=e(u);d(y)}catch(y){g(y)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(s,e={}){return Tr(s,"GET","/v2/passwordPolicy",bi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=6;class xN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new TN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ah(this,{idToken:e}),i=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(dr(this));const n=e?Pt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bN(this),n=new xN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ac("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await _N(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ta(s){return Pt(s)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fx(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(s){Kh=s}function gS(s){return Kh.loadJS(s)}function RN(){return Kh.recaptchaEnterpriseScript}function CN(){return Kh.gapiScript}function IN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class jN{constructor(){this.enterprise=new DN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ON="recaptcha-enterprise",yS="NO_RECAPTCHA";class MN{constructor(e){this.type=ON,this.auth=Ta(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{hN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new uN(y);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,d(p.siteKey)}}).catch(y=>{g(y)})})}function o(u,d,g){const y=window.grecaptcha;rE(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(p=>{d(p)}).catch(()=>{d(yS)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jN().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(g=>{if(!n&&rE(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=RN();y.length!==0&&(y+=g),gS(y).then(()=>{o(g,u,d)}).catch(p=>{d(p)})}}).catch(g=>{d(g)})})}}async function uE(s,e,n,i=!1,o=!1){const u=new MN(s);let d;if(o)d=yS;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function $m(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await uE(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await uE(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(s,e){const n=wp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(pa(u,e??{}))return o;ps(o,"already-initialized")}return n.initialize({options:e})}function kN(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(cr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function VN(s,e,n){const i=Ta(s);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=vS(e),{host:d,port:g}=LN(e),y=g===null?"":`:${g}`,p={url:`${u}//${d}${y}/`},_=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(pa(p,i.config.emulator)&&pa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Lo(d)?(G0(`${u}//${d}${y}`),$0("Auth",!0)):UN()}function vS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function LN(s){const e=vS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:hE(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:hE(d)}}}function hE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function UN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function qN(s,e){return Tr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(s,e){return Cc(s,"POST","/v1/accounts:signInWithPassword",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(s,e){return Cc(s,"POST","/v1/accounts:signInWithEmailLink",bi(s,e))}async function FN(s,e){return Cc(s,"POST","/v1/accounts:signInWithEmailLink",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Cp{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new gc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new gc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,n,"signInWithPassword",zN);case"emailLink":return BN(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,i,"signUpPassword",qN);case"emailLink":return FN(e,{idToken:n,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(s,e){return Cc(s,"POST","/v1/accounts:signInWithIdp",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="http://localhost";class ya extends Cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const d=new ya(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,xo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:HN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $N(s){const e=tc(nc(s)).link,n=e?tc(nc(e)).deep_link_id:null,i=tc(nc(s)).deep_link_id;return(i?tc(nc(i)).link:null)||i||n||e||s}class Ip{constructor(e){const n=tc(nc(e)),i=n.apiKey??null,o=n.oobCode??null,u=GN(n.mode??null);xe(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$N(e);try{return new Ip(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,n){return gc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ip.parseLink(n);return xe(i,"argument-error"),gc._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends _S{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Ic{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ya._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return li.credential(n,i)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Ic{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Ic{constructor(){super("twitter.com")}static credential(e,n){return ya._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ui.credential(n,i)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(s,e){return Cc(s,"POST","/v1/accounts:signUp",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await fs._fromIdTokenResponse(e,i,o),d=dE(i);return new va({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=dE(i);return new va({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function dE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Sr{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Rh(e,n,i,o)}}function ES(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(s,u,e,i):u})}async function QN(s,e,n=!1){const i=await Ro(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return va._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(s,e,n=!1){const{auth:i}=s;if(Wn(i.app))return Promise.reject(dr(i));const o="reauthenticate";try{const u=await Ro(s,ES(i,o,e,s),n);xe(u.idToken,i,"internal-error");const d=Np(u.idToken);xe(d,i,"internal-error");const{sub:g}=d;return xe(s.uid===g,i,"user-mismatch"),va._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ps(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(s,e,n=!1){if(Wn(s.app))return Promise.reject(dr(s));const i="signIn",o=await ES(s,i,e),u=await va._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function XN(s,e){return SS(Ta(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(s){const e=Ta(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WN(s,e,n){if(Wn(s.app))return Promise.reject(dr(s));const i=Ta(s),d=await $m(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KN).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&TS(s),y}),g=await va._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(g.user),g}function ZN(s,e,n){return Wn(s.app)?Promise.reject(dr(s)):XN(Pt(s),qo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&TS(s),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(s,e){return Tr(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Pt(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await Ro(i,JN(i.auth,u));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const g=i.providerData.find(({providerId:y})=>y==="password");g&&(g.displayName=i.displayName,g.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function tR(s,e,n,i){return Pt(s).onIdTokenChanged(e,n,i)}function nR(s,e,n){return Pt(s).beforeAuthStateChanged(e,n)}function sR(s,e,n,i){return Pt(s).onAuthStateChanged(e,n,i)}function rR(s){return Pt(s).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=1e3,aR=10;class wS extends bS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);SN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aR):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},iR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wS.type="LOCAL";const oR=wS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends bS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xS.type="SESSION";const AS=xS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(d).map(async p=>p(n.origin,u)),y=await lR(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,y)=>{const p=jp("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(x.data.response);break;default:clearTimeout(_),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function uR(s){Ps().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function hR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dR(){return navigator?.serviceWorker?.controller||null}function fR(){return NS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebaseLocalStorageDb",mR=1,Ih="firebaseLocalStorage",CS="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(s,e){return s.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function pR(){const s=indexedDB.deleteDatabase(RS);return new jc(s).toPromise()}function Km(){const s=indexedDB.open(RS,mR);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Ih,{keyPath:CS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Ih)?e(i):(i.close(),await pR(),e(await Km()))})})}async function fE(s,e,n){const i=Yh(s,!0).put({[CS]:e,value:n});return new jc(i).toPromise()}async function gR(s,e){const n=Yh(s,!1).get(e),i=await new jc(n).toPromise();return i===void 0?null:i.value}function mE(s,e){const n=Yh(s,!0).delete(e);return new jc(n).toPromise()}const yR=800,vR=3;class IS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>vR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(fR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hR(),!this.activeServiceWorker)return;this.sender=new cR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Km();return await fE(e,Ch,"1"),await mE(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>fE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>gR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Yh(o,!1).getAll();return new jc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IS.type="LOCAL";const _R=IS;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(s,e){return e?cr(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function SR(s){return SS(s.auth,new Dp(s),s.bypassAuthState)}function TR(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),YN(n,new Dp(s),s.bypassAuthState)}async function bR(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),QN(n,new Dp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SR;case"linkViaPopup":case"linkViaRedirect":return bR;case"reauthViaPopup":case"reauthViaRedirect":return TR;default:ps(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new Rc(2e3,1e4);class To extends jS{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wR.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="pendingRedirect",mh=new Map;class AR extends jS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const i=await NR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NR(s,e){const n=IR(e),i=CR(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function RR(s,e){mh.set(s._key(),e)}function CR(s){return cr(s._redirectPersistence)}function IR(s){return fh(xR,s.config.apiKey,s.name)}async function jR(s,e,n=!1){if(Wn(s.app))return Promise.reject(dr(s));const i=Ta(s),o=ER(i,e),d=await new AR(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=600*1e3;class OR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!DS(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ms(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DR&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(e))}saveEventToCache(e){this.cachedEventUids.add(pE(e)),this.lastProcessedEventTime=Date.now()}}function pE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function DS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function MR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(s,e={}){return Tr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VR=/^https?/;async function LR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await PR(s);for(const n of e)try{if(UR(n))return}catch{}ps(s,"unauthorized-domain")}function UR(s){const e=Hm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!VR.test(n))return!1;if(kR.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new Rc(3e4,6e4);function gE(){const s=Ps().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function zR(s){return new Promise((e,n)=>{function i(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),n(Ms(s,"network-request-failed"))},timeout:qR.get()})}if(Ps().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ps().gapi?.load)i();else{const o=IN("iframefcb");return Ps()[o]=()=>{gapi.load?i():n(Ms(s,"network-request-failed"))},gS(`${CN()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw ph=null,e})}let ph=null;function BR(s){return ph=ph||zR(s),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new Rc(5e3,15e3),HR="__/auth/iframe",GR="emulator/auth/iframe",$R={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QR(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Ap(e,GR):`https://${s.config.authDomain}/${HR}`,i={apiKey:e.apiKey,appName:s.name,v:Uo},o=KR.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Nc(i).slice(1)}`}async function YR(s){const e=await BR(s),n=Ps().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:QR(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$R,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ms(s,"network-request-failed"),g=Ps().setTimeout(()=>{u(d)},FR.get());function y(){Ps().clearTimeout(g),o(i)}i.ping(y).then(y,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WR=500,ZR=600,JR="_blank",e2="http://localhost";class yE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t2(s,e,n,i=WR,o=ZR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const y={...XR,width:i.toString(),height:o.toString(),top:u,left:d},p=pn().toLowerCase();n&&(g=cS(p)?JR:n),oS(p)&&(e=e||e2,y.scrollbars="yes");const _=Object.entries(y).reduce((x,[C,q])=>`${x}${C}=${q},`,"");if(EN(p)&&g!=="_self")return n2(e||"",g),new yE(null);const T=window.open(e||"",g,_);xe(T,s,"popup-blocked");try{T.focus()}catch{}return new yE(T)}function n2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="__/auth/handler",r2="emulator/auth/handler",i2=encodeURIComponent("fac");async function vE(s,e,n,i,o,u){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Uo,eventId:o};if(e instanceof _S){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",Bx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))d[_]=T}if(e instanceof Ic){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const y=await s._getAppCheckToken(),p=y?`#${i2}=${encodeURIComponent(y)}`:"";return`${a2(s)}?${Nc(g).slice(1)}${p}`}function a2({config:s}){return s.emulator?Ap(s,r2):`https://${s.authDomain}/${s2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class o2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=jR,this._overrideRedirectResult=RR}async _openPopup(e,n,i,o){gr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await vE(e,n,i,Hm(),o);return t2(e,u,jp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await vE(e,n,i,Hm(),o);return uR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(gr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await YR(e),i=new OR(e);return n.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},o=>{const u=o?.[0]?.[jm];u!==void 0&&n(!!u),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mS()||lS()||Rp()}}const l2=o2;var _E="@firebase/auth",EE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h2(s){No(new ga("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=i.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pS(s)},p=new AN(i,o,u,y);return kN(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),No(new ga("auth-internal",e=>{const n=Ta(e.getProvider("auth").getImmediate());return(i=>new c2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(_E,EE,u2(s)),mi(_E,EE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=300,f2=H0("authIdTokenMaxAge")||d2;let SE=null;const m2=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>f2)return;const o=n?.token;SE!==o&&(SE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function p2(s=X0()){const e=wp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=PN(s,{popupRedirectResolver:l2,persistence:[_R,oR,AS]}),i=H0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=m2(u.toString());nR(n,d,()=>d(n.currentUser)),tR(n,g=>d(g))}}const o=B0("auth");return o&&VN(n,`http://${o}`),n}function g2(){return document.getElementsByTagName("head")?.[0]??document}NN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Ms("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",g2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h2("Browser");var y2="firebase",v2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(y2,v2,"app");var TE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pi,OS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function N(){}N.prototype=w.prototype,R.F=w.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(j,M,U){for(var D=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)D[ue-2]=arguments[ue];return w.prototype[M].apply(j,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,N){N||(N=0);const j=Array(16);if(typeof w=="string")for(var M=0;M<16;++M)j[M]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(M=0;M<16;++M)j[M]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=R.g[0],N=R.g[1],M=R.g[2];let U=R.g[3],D;D=w+(U^N&(M^U))+j[0]+3614090360&4294967295,w=N+(D<<7&4294967295|D>>>25),D=U+(M^w&(N^M))+j[1]+3905402710&4294967295,U=w+(D<<12&4294967295|D>>>20),D=M+(N^U&(w^N))+j[2]+606105819&4294967295,M=U+(D<<17&4294967295|D>>>15),D=N+(w^M&(U^w))+j[3]+3250441966&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(U^N&(M^U))+j[4]+4118548399&4294967295,w=N+(D<<7&4294967295|D>>>25),D=U+(M^w&(N^M))+j[5]+1200080426&4294967295,U=w+(D<<12&4294967295|D>>>20),D=M+(N^U&(w^N))+j[6]+2821735955&4294967295,M=U+(D<<17&4294967295|D>>>15),D=N+(w^M&(U^w))+j[7]+4249261313&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(U^N&(M^U))+j[8]+1770035416&4294967295,w=N+(D<<7&4294967295|D>>>25),D=U+(M^w&(N^M))+j[9]+2336552879&4294967295,U=w+(D<<12&4294967295|D>>>20),D=M+(N^U&(w^N))+j[10]+4294925233&4294967295,M=U+(D<<17&4294967295|D>>>15),D=N+(w^M&(U^w))+j[11]+2304563134&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(U^N&(M^U))+j[12]+1804603682&4294967295,w=N+(D<<7&4294967295|D>>>25),D=U+(M^w&(N^M))+j[13]+4254626195&4294967295,U=w+(D<<12&4294967295|D>>>20),D=M+(N^U&(w^N))+j[14]+2792965006&4294967295,M=U+(D<<17&4294967295|D>>>15),D=N+(w^M&(U^w))+j[15]+1236535329&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(M^U&(N^M))+j[1]+4129170786&4294967295,w=N+(D<<5&4294967295|D>>>27),D=U+(N^M&(w^N))+j[6]+3225465664&4294967295,U=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(U^w))+j[11]+643717713&4294967295,M=U+(D<<14&4294967295|D>>>18),D=N+(U^w&(M^U))+j[0]+3921069994&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(M^U&(N^M))+j[5]+3593408605&4294967295,w=N+(D<<5&4294967295|D>>>27),D=U+(N^M&(w^N))+j[10]+38016083&4294967295,U=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(U^w))+j[15]+3634488961&4294967295,M=U+(D<<14&4294967295|D>>>18),D=N+(U^w&(M^U))+j[4]+3889429448&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(M^U&(N^M))+j[9]+568446438&4294967295,w=N+(D<<5&4294967295|D>>>27),D=U+(N^M&(w^N))+j[14]+3275163606&4294967295,U=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(U^w))+j[3]+4107603335&4294967295,M=U+(D<<14&4294967295|D>>>18),D=N+(U^w&(M^U))+j[8]+1163531501&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(M^U&(N^M))+j[13]+2850285829&4294967295,w=N+(D<<5&4294967295|D>>>27),D=U+(N^M&(w^N))+j[2]+4243563512&4294967295,U=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(U^w))+j[7]+1735328473&4294967295,M=U+(D<<14&4294967295|D>>>18),D=N+(U^w&(M^U))+j[12]+2368359562&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(N^M^U)+j[5]+4294588738&4294967295,w=N+(D<<4&4294967295|D>>>28),D=U+(w^N^M)+j[8]+2272392833&4294967295,U=w+(D<<11&4294967295|D>>>21),D=M+(U^w^N)+j[11]+1839030562&4294967295,M=U+(D<<16&4294967295|D>>>16),D=N+(M^U^w)+j[14]+4259657740&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(N^M^U)+j[1]+2763975236&4294967295,w=N+(D<<4&4294967295|D>>>28),D=U+(w^N^M)+j[4]+1272893353&4294967295,U=w+(D<<11&4294967295|D>>>21),D=M+(U^w^N)+j[7]+4139469664&4294967295,M=U+(D<<16&4294967295|D>>>16),D=N+(M^U^w)+j[10]+3200236656&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(N^M^U)+j[13]+681279174&4294967295,w=N+(D<<4&4294967295|D>>>28),D=U+(w^N^M)+j[0]+3936430074&4294967295,U=w+(D<<11&4294967295|D>>>21),D=M+(U^w^N)+j[3]+3572445317&4294967295,M=U+(D<<16&4294967295|D>>>16),D=N+(M^U^w)+j[6]+76029189&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(N^M^U)+j[9]+3654602809&4294967295,w=N+(D<<4&4294967295|D>>>28),D=U+(w^N^M)+j[12]+3873151461&4294967295,U=w+(D<<11&4294967295|D>>>21),D=M+(U^w^N)+j[15]+530742520&4294967295,M=U+(D<<16&4294967295|D>>>16),D=N+(M^U^w)+j[2]+3299628645&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(M^(N|~U))+j[0]+4096336452&4294967295,w=N+(D<<6&4294967295|D>>>26),D=U+(N^(w|~M))+j[7]+1126891415&4294967295,U=w+(D<<10&4294967295|D>>>22),D=M+(w^(U|~N))+j[14]+2878612391&4294967295,M=U+(D<<15&4294967295|D>>>17),D=N+(U^(M|~w))+j[5]+4237533241&4294967295,N=M+(D<<21&4294967295|D>>>11),D=w+(M^(N|~U))+j[12]+1700485571&4294967295,w=N+(D<<6&4294967295|D>>>26),D=U+(N^(w|~M))+j[3]+2399980690&4294967295,U=w+(D<<10&4294967295|D>>>22),D=M+(w^(U|~N))+j[10]+4293915773&4294967295,M=U+(D<<15&4294967295|D>>>17),D=N+(U^(M|~w))+j[1]+2240044497&4294967295,N=M+(D<<21&4294967295|D>>>11),D=w+(M^(N|~U))+j[8]+1873313359&4294967295,w=N+(D<<6&4294967295|D>>>26),D=U+(N^(w|~M))+j[15]+4264355552&4294967295,U=w+(D<<10&4294967295|D>>>22),D=M+(w^(U|~N))+j[6]+2734768916&4294967295,M=U+(D<<15&4294967295|D>>>17),D=N+(U^(M|~w))+j[13]+1309151649&4294967295,N=M+(D<<21&4294967295|D>>>11),D=w+(M^(N|~U))+j[4]+4149444226&4294967295,w=N+(D<<6&4294967295|D>>>26),D=U+(N^(w|~M))+j[11]+3174756917&4294967295,U=w+(D<<10&4294967295|D>>>22),D=M+(w^(U|~N))+j[2]+718787259&4294967295,M=U+(D<<15&4294967295|D>>>17),D=N+(U^(M|~w))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+U&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const N=w-this.blockSize,j=this.C;let M=this.h,U=0;for(;U<w;){if(M==0)for(;U<=N;)o(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<w;)if(j[M++]=R.charCodeAt(U++),M==this.blockSize){o(this,j),M=0;break}}else for(;U<w;)if(j[M++]=R[U++],M==this.blockSize){o(this,j),M=0;break}}this.h=M,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,N=0;N<4;++N)for(let j=0;j<32;j+=8)R[w++]=this.g[N]>>>j&255;return R};function u(R,w){var N=g;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=w(R)}function d(R,w){this.h=w;const N=[];let j=!0;for(let M=R.length-1;M>=0;M--){const U=R[M]|0;j&&U==w||(N[M]=U,j=!1)}this.g=N}var g={};function y(R){return-128<=R&&R<128?u(R,function(w){return new d([w|0],w<0?-1:0)}):new d([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return V(p(-R));const w=[];let N=1;for(let j=0;R>=N;j++)w[j]=R/N|0,N*=4294967296;return new d(w,0)}function _(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return V(_(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(w,8));let j=T;for(let U=0;U<R.length;U+=8){var M=Math.min(8,R.length-U);const D=parseInt(R.substring(U,U+M),w);M<8?(M=p(Math.pow(w,M)),j=j.j(M).add(p(D))):(j=j.j(N),j=j.add(p(D)))}return j}var T=y(0),x=y(1),C=y(16777216);s=d.prototype,s.m=function(){if(B(this))return-V(this).m();let R=0,w=1;for(let N=0;N<this.g.length;N++){const j=this.i(N);R+=(j>=0?j:4294967296+j)*w,w*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(B(this))return"-"+V(this).toString(R);const w=p(Math.pow(R,6));var N=this;let j="";for(;;){const M=H(N,w).g;N=Y(N,M.j(w));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=M,q(N))return U+j;for(;U.length<6;)U="0"+U;j=U+j}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function B(R){return R.h==-1}s.l=function(R){return R=Y(this,R),B(R)?-1:q(R)?0:1};function V(R){const w=R.g.length,N=[];for(let j=0;j<w;j++)N[j]=~R.g[j];return new d(N,~R.h).add(x)}s.abs=function(){return B(this)?V(this):this},s.add=function(R){const w=Math.max(this.g.length,R.g.length),N=[];let j=0;for(let M=0;M<=w;M++){let U=j+(this.i(M)&65535)+(R.i(M)&65535),D=(U>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);j=D>>>16,U&=65535,D&=65535,N[M]=D<<16|U}return new d(N,N[N.length-1]&-2147483648?-1:0)};function Y(R,w){return R.add(V(w))}s.j=function(R){if(q(this)||q(R))return T;if(B(this))return B(R)?V(this).j(V(R)):V(V(this).j(R));if(B(R))return V(this.j(V(R)));if(this.l(C)<0&&R.l(C)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,N=[];for(var j=0;j<2*w;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(let M=0;M<R.g.length;M++){const U=this.i(j)>>>16,D=this.i(j)&65535,ue=R.i(M)>>>16,De=R.i(M)&65535;N[2*j+2*M]+=D*De,ae(N,2*j+2*M),N[2*j+2*M+1]+=U*De,ae(N,2*j+2*M+1),N[2*j+2*M+1]+=D*ue,ae(N,2*j+2*M+1),N[2*j+2*M+2]+=U*ue,ae(N,2*j+2*M+2)}for(R=0;R<w;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=w;R<2*w;R++)N[R]=0;return new d(N,0)};function ae(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function K(R,w){this.g=R,this.h=w}function H(R,w){if(q(w))throw Error("division by zero");if(q(R))return new K(T,T);if(B(R))return w=H(V(R),w),new K(V(w.g),V(w.h));if(B(w))return w=H(R,V(w)),new K(V(w.g),w.h);if(R.g.length>30){if(B(R)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var N=x,j=w;j.l(R)<=0;)N=k(N),j=k(j);var M=F(N,1),U=F(j,1);for(j=F(j,2),N=F(N,2);!q(j);){var D=U.add(j);D.l(R)<=0&&(M=M.add(N),U=D),j=F(j,1),N=F(N,1)}return w=Y(R,M.j(w)),new K(M,w)}for(M=T;R.l(w)>=0;){for(N=Math.max(1,Math.floor(R.m()/w.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),U=p(N),D=U.j(w);B(D)||D.l(R)>0;)N-=j,U=p(N),D=U.j(w);q(U)&&(U=x),M=M.add(U),R=Y(R,D)}return new K(M,R)}s.B=function(R){return H(this,R).h},s.and=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)&R.i(j);return new d(N,this.h&R.h)},s.or=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)|R.i(j);return new d(N,this.h|R.h)},s.xor=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)^R.i(j);return new d(N,this.h^R.h)};function k(R){const w=R.g.length+1,N=[];for(let j=0;j<w;j++)N[j]=R.i(j)<<1|R.i(j-1)>>>31;return new d(N,R.h)}function F(R,w){const N=w>>5;w%=32;const j=R.g.length-N,M=[];for(let U=0;U<j;U++)M[U]=w>0?R.i(U+N)>>>w|R.i(U+N+1)<<32-w:R.i(U+N);return new d(M,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,OS=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,pi=d}).apply(typeof TE<"u"?TE:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MS,sc,PS,gh,Qm,kS,VS,LS;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in E))break e;E=E[$]}h=h[h.length-1],A=E[h],v=v(A),v!=A&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&E.push([A,v[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,E){return h.call.apply(h.bind,arguments)}function p(h,v,E){return p=y,p.apply(null,arguments)}function _(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,$,J){for(var de=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)de[Ce-2]=arguments[Ce];return v.prototype[$].apply(A,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const v=h.length;if(v>0){const E=Array(v);for(let A=0;A<v;A++)E[A]=h[A];return E}return[]}function q(h,v){for(let A=1;A<arguments.length;A++){const $=arguments[A];var E=typeof $;if(E=E!="object"?E:$?Array.isArray($)?"array":E:"null",E=="array"||E=="object"&&typeof $.length=="number"){E=h.length||0;const J=$.length||0;h.length=E+J;for(let de=0;de<J;de++)h[E+de]=$[de]}else h.push($)}}class B{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(h){d.setTimeout(()=>{throw h},0)}function Y(){var h=R;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ae{constructor(){this.h=this.g=null}add(v,E){const A=K.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var K=new B(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let k,F=!1,R=new ae,w=()=>{const h=Promise.resolve(void 0);k=()=>{h.then(N)}};function N(){for(var h;h=Y();){try{h.h.call(h.g)}catch(E){V(E)}var v=K;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}F=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ue(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(ue,M),ue.prototype.init=function(h,v){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),te=0;function he(h,v,E,A,$){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=$,this.key=++te,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,v,E){for(const A in h)v.call(E,h[A],A,h)}function P(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function ie(h){const v={};for(const E in h)v[E]=h[E];return v}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(h,v){let E,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(E in A)h[E]=A[E];for(let J=0;J<fe.length;J++)E=fe[J],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,E,A,$){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const de=ye(h,v,A,$);return de>-1?(v=h[de],E||(v.fa=!1)):(v=new he(v,this.src,J,!!A,$),v.fa=E,h.push(v)),v};function me(h,v){const E=v.type;if(E in h.g){var A=h.g[E],$=Array.prototype.indexOf.call(A,v,void 0),J;(J=$>=0)&&Array.prototype.splice.call(A,$,1),J&&(X(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ye(h,v,E,A){for(let $=0;$<h.length;++$){const J=h[$];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==A)return $}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),Ke={};function ns(h,v,E,A,$){if(Array.isArray(v)){for(let J=0;J<v.length;J++)ns(h,v[J],E,A,$);return null}return E=Lc(E),h&&h[De]?h.J(v,E,g(A)?!!A.capture:!1,$):$o(h,v,E,!1,A,$)}function $o(h,v,E,A,$,J){if(!v)throw Error("Invalid event type");const de=g($)?!!$.capture:!!$;let Ce=Ko(h);if(Ce||(h[ht]=Ce=new ce(h)),E=Ce.add(v,E,A,de,J),E.proxy)return E;if(A=xa(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)U||($=de),$===void 0&&($=!1),h.addEventListener(v.toString(),A,$);else if(h.attachEvent)h.attachEvent(Na(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function xa(){function h(E){return v.call(h.src,h.listener,E)}const v=yd;return h}function Aa(h,v,E,A,$){if(Array.isArray(v))for(var J=0;J<v.length;J++)Aa(h,v[J],E,A,$);else A=g(A)?!!A.capture:!!A,E=Lc(E),h&&h[De]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],E=ye(v,E,A,$),E>-1&&(X(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=Ko(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ye(v,E,A,$)),(E=h>-1?v[h]:null)&&Ni(E))}function Ni(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[De])me(v.i,h);else{var E=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(E,A,h.capture):v.detachEvent?v.detachEvent(Na(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=Ko(v))?(me(E,h),E.h==0&&(E.src=null,v[ht]=null)):X(h)}}}function Na(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function yd(h,v){if(h.da)h=!0;else{v=new ue(v,this);const E=h.listener,A=h.ha||h.src;h.fa&&Ni(h),h=E.call(A,v)}return h}function Ko(h){return h=h[ht],h instanceof ce?h:null}var Sn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lc(h){return typeof h=="function"?h:(h[Sn]||(h[Sn]=function(v){return h.handleEvent(v)}),h[Sn])}function kt(){j.call(this),this.i=new ce(this),this.M=this,this.G=null}T(kt,j),kt.prototype[De]=!0,kt.prototype.removeEventListener=function(h,v,E,A){Aa(this,h,v,E,A)};function Ft(h,v){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var $=v;v=new M(A,h),ee(v,$)}$=!0;let J,de;if(E)for(de=E.length-1;de>=0;de--)J=v.g=E[de],$=zs(J,A,!0,v)&&$;if(J=v.g=h,$=zs(J,A,!0,v)&&$,$=zs(J,A,!1,v)&&$,E)for(de=0;de<E.length;de++)J=v.g=E[de],$=zs(J,A,!1,v)&&$}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let A=0;A<E.length;A++)X(E[A]);delete h.g[v],h.h--}}this.G=null},kt.prototype.J=function(h,v,E,A){return this.i.add(String(h),v,!1,E,A)},kt.prototype.K=function(h,v,E,A){return this.i.add(String(h),v,!0,E,A)};function zs(h,v,E,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let $=!0;for(let J=0;J<v.length;++J){const de=v[J];if(de&&!de.da&&de.capture==E){const Ce=de.listener,lt=de.ha||de.src;de.fa&&me(h.i,de),$=Ce.call(lt,A)!==!1&&$}}return $&&!A.defaultPrevented}function vd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Qo(h){h.g=vd(()=>{h.g=null,h.i&&(h.i=!1,Qo(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class _d extends j{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(h){j.call(this),this.h=h,this.g={}}T(Ri,j);var br=[];function rn(h){Ee(h.g,function(v,E){this.g.hasOwnProperty(E)&&Ni(v)},h),h.g={}}Ri.prototype.N=function(){Ri.Z.N.call(this),rn(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=d.JSON.stringify,gn=d.JSON.parse,Ed=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Uc(){}function qc(){}var _s={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wr(){M.call(this,"d")}T(wr,M);function ss(){M.call(this,"c")}T(ss,M);var qn={},xr=null;function Ra(){return xr=xr||new kt}qn.Ia="serverreachability";function Yo(h){M.call(this,qn.Ia,h)}T(Yo,M);function Ar(h){const v=Ra();Ft(v,new Yo(v))}qn.STAT_EVENT="statevent";function Ca(h,v){M.call(this,qn.STAT_EVENT,h),this.stat=v}T(Ca,M);function Tt(h){const v=Ra();Ft(v,new Ca(v,h))}qn.Ja="timingevent";function zc(h,v){M.call(this,qn.Ja,h),this.size=v}T(zc,M);function Nr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Rr(){this.g=!0}Rr.prototype.ua=function(){this.g=!1};function Xo(h,v,E,A,$,J){h.info(function(){if(h.g)if(J){var de="",Ce=J.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var lt=Ce[Ye].split("=");if(lt.length>1){const xt=lt[0];lt=lt[1];const Rn=xt.split("_");de=Rn.length>=2&&Rn[1]=="type"?de+(xt+"="+lt+"&"):de+(xt+"=redacted&")}}}else de=null;else de=J;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+v+`
`+E+`
`+de})}function Wo(h,v,E,A,$,J,de){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+v+`
`+E+`
`+J+" "+de})}function Bs(h,v,E,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Es(h,E)+(A?" "+A:"")})}function Sd(h,v){h.info(function(){return"TIMEOUT: "+v})}Rr.prototype.info=function(){};function Es(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var $=A[0];if($!="noop"&&$!="stop"&&$!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return Un(J)}catch{return v}}var bt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fs;function Ci(){}T(Ci,Uc),Ci.prototype.g=function(){return new XMLHttpRequest},Fs=new Ci;function Ii(h){return encodeURIComponent(String(h))}function Td(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function rs(h,v,E,A){this.j=h,this.i=v,this.l=E,this.S=A||1,this.V=new Ri(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cr}function Cr(){this.i=null,this.g="",this.h=!1}var Ia={},Ss={};function Ts(h,v,E){h.M=1,h.A=Gs(mt(v)),h.u=E,h.R=!0,Ir(h,null)}function Ir(h,v){h.F=Date.now(),ji(h),h.B=mt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Gc(E.i,"t",A),h.C=0,E=h.j.L,h.h=new Cr,h.g=qa(h.j,E?v:null,!h.u),h.P>0&&(h.O=new _d(p(h.Y,h,h.g),h.P)),v=h.V,E=h.g,A=h.ba;var $="readystatechange";Array.isArray($)||($&&(br[0]=$.toString()),$=br);for(let J=0;J<$.length;J++){const de=ns(E,$[J],A||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=h.J?ie(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Ar(),Xo(h.i,h.v,h.B,h.l,h.S,h.u)}rs.prototype.ba=function(h){h=h.target;const v=this.O;v&&an(h)==3?v.j():this.Y(h)},rs.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=an(this.g),lt=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Bi(this.g)))){this.K||Ce!=4||lt==7||(lt==8||Ye<=0?Ar(3):Ar(2)),ws(this);var v=this.g.ca();this.X=v;var E=jr(this);if(this.o=v==200,Wo(this.i,this.v,this.B,this.l,this.S,Ce,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var J=A;break t}}J=null}if(h=J)Bs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ja(this,h);else{this.o=!1,this.m=3,Tt(12),xs(this),Di(this);break e}}if(this.R){h=!0;let xt;for(;!this.K&&this.C<E.length;)if(xt=Bc(this,E),xt==Ss){Ce==4&&(this.m=4,Tt(14),h=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Ia){this.m=4,Tt(15),Bs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Bs(this.i,this.l,xt,null),ja(this,xt);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)Bs(this.i,this.l,E,"[Invalid Chunked Response]"),xs(this),Di(this);else if(E.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ol(de),de.P=!0,Tt(11))}}else Bs(this.i,this.l,E,null),ja(this,E);Ce==4&&xs(this),this.o&&!this.K&&(Ce==4?ll(this.j,this):(this.o=!1,ji(this)))}else Fi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),xs(this),Di(this)}}}catch{}finally{}};function jr(h){if(!wt(h))return h.g.la();const v=Bi(h.g);if(v==="")return"";let E="";const A=v.length,$=an(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xs(h),Di(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,E+=h.h.i.decode(v[J],{stream:!($&&J==A-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function wt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bc(h,v){var E=h.C,A=v.indexOf(`
`,E);return A==-1?Ss:(E=Number(v.substring(E,A)),isNaN(E)?Ia:(A+=1,A+E>v.length?Ss:(v=v.slice(A,A+E),h.C=A+E,v)))}rs.prototype.cancel=function(){this.K=!0,xs(this)};function ji(h){h.T=Date.now()+h.H,bs(h,h.H)}function bs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Nr(p(h.aa,h),v)}function ws(h){h.D&&(d.clearTimeout(h.D),h.D=null)}rs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sd(this.i,this.B),this.M!=2&&(Ar(),Tt(17)),xs(this),this.m=2,Di(this)):bs(this,this.T-h)};function Di(h){h.j.I==0||h.K||ll(h.j,h)}function xs(h){ws(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,rn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function ja(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||Pi(E.h,h))){if(!h.L&&Pi(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Ua(E),As(E);else break e;al(E),Tt(18)}}else E.xa=$[1],0<E.xa-E.K&&$[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Nr(p(E.Va,E),6e3));zn(E.h)<=1&&E.ta&&(E.ta=void 0)}else Qs(E,11)}else if((h.L||E.g==h)&&Ua(E),!D(v))for($=E.Ba.g.parse(v),v=0;v<$.length;v++){let Ye=$[v];const xt=Ye[0];if(!(xt<=E.K))if(E.K=xt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Rn=Ye[3];Rn!=null&&(E.ka=Rn,E.j.info("VER="+E.ka));const Ns=Ye[4];Ns!=null&&(E.za=Ns,E.j.info("SVER="+E.za));const os=Ye[5];os!=null&&typeof os=="number"&&os>0&&(A=1.5*os,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ls=h.g;if(ls){const cs=ls.g?ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var J=A.h;J.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Da(J,J.h),J.h=null))}if(A.G){const ul=ls.g?ls.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(A.wa=ul,Ze(A.J,A.G,ul))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var de=h;if(A.na=eu(A,A.L?A.ba:null,A.W),de.L){Hs(A.h,de);var Ce=de,lt=A.O;lt&&(Ce.H=lt),Ce.D&&(ws(Ce),ji(Ce)),A.g=de}else Xc(A);E.i.length>0&&Ki(E)}else Ye[0]!="stop"&&Ye[0]!="close"||Qs(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Qs(E,7):Gi(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}Ar(4)}catch{}}var bd=class{constructor(h,v){this.g=h,this.map=v}};function Oi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zn(h){return h.h?1:h.g?h.g.size:0}function Pi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Da(h,v){h.g?h.g.add(v):h.h=v}function Hs(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Oi.prototype.cancel=function(){if(this.i=Oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Oa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return C(h.i)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wd(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let $,J=null;A>=0?($=h[E].substring(0,A),J=h[E].substring(A+1)):$=h[E],v($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function is(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof is?(this.l=h.l,Dr(this,h.j),this.o=h.o,this.g=h.g,ki(this,h.u),this.h=h.h,Or(this,$c(h.i)),this.m=h.m):h&&(v=String(h).match(Ma))?(this.l=!1,Dr(this,v[1]||"",!0),this.o=Vi(v[2]||""),this.g=Vi(v[3]||"",!0),ki(this,v[4]),this.h=Vi(v[5]||"",!0),Or(this,v[6]||"",!0),this.m=Vi(v[7]||"")):(this.l=!1,this.i=new Bn(null,this.l))}is.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ht(v,Jo,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ht(v,Jo,!0),"@"),h.push(Ii(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ht(E,E.charAt(0)=="/"?Mr:el,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ht(E,Hc)),h.join("")},is.prototype.resolve=function(h){const v=mt(this);let E=!!h.j;E?Dr(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var A=h.h;if(E)ki(v,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var $=v.h.lastIndexOf("/");$!=-1&&(A=v.h.slice(0,$+1)+A)}if($=A,$==".."||$==".")A="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){A=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let de=0;de<$.length;){const Ce=$[de++];Ce=="."?A&&de==$.length&&J.push(""):Ce==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&de==$.length&&J.push("")):(J.push(Ce),A=!0)}A=J.join("/")}else A=$}return E?v.h=A:E=h.i.toString()!=="",E?Or(v,$c(h.i)):E=!!h.m,E&&(v.m=h.m),v};function mt(h){return new is(h)}function Dr(h,v,E){h.j=E?Vi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ki(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Or(h,v,E){v instanceof Bn?(h.i=v,sl(h.i,h.l)):(E||(v=Ht(v,Fc)),h.i=new Bn(v,h.l))}function Ze(h,v,E){h.i.set(v,E)}function Gs(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Vi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ht(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Zo),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zo(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,Mr=/[#\?]/g,Fc=/[#\?@]/g,Hc=/#/g;function Bn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function $s(h){h.g||(h.g=new Map,h.h=0,h.i&&wd(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=Bn.prototype,s.add=function(h,v){$s(this),this.i=null,h=as(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function tl(h,v){$s(h),v=as(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function nl(h,v){return $s(h),v=as(h,v),h.g.has(v)}s.forEach=function(h,v){$s(this),this.g.forEach(function(E,A){E.forEach(function($){h.call(v,$,A,this)},this)},this)};function Pa(h,v){$s(h);let E=[];if(typeof v=="string")nl(h,v)&&(E=E.concat(h.g.get(as(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}s.set=function(h,v){return $s(this),this.i=null,h=as(this,h),nl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Pa(this,h),h.length>0?String(h[0]):v):v};function Gc(h,v,E){tl(h,v),E.length>0&&(h.i=null,h.g.set(as(h,v),C(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var E=v[A];const $=Ii(E);E=Pa(this,E);for(let J=0;J<E.length;J++){let de=$;E[J]!==""&&(de+="="+Ii(E[J])),h.push(de)}}return this.i=h.join("&")};function $c(h){const v=new Bn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function as(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function sl(h,v){v&&!h.j&&($s(h),h.i=null,h.g.forEach(function(E,A){const $=A.toLowerCase();A!=$&&(tl(this,A),Gc(this,$,E))},h)),h.j=v}function rl(h,v){const E=new Rr;if(d.Image){const A=new Image;A.onload=_(yn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=_(yn,E,"TestLoadImage: error",!1,v,A),A.onabort=_(yn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=_(yn,E,"TestLoadImage: timeout",!1,v,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function Pr(h,v){const E=new Rr,A=new AbortController,$=setTimeout(()=>{A.abort(),yn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout($),J.ok?yn(E,"TestPingServer: ok",!0,v):yn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),yn(E,"TestPingServer: error",!1,v)})}function yn(h,v,E,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(E)}catch{}}function Kc(){this.g=new Ed}function Li(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Li,Uc),Li.prototype.g=function(){return new Ui(this.i,this.h)};function Ui(h,v){kt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ui,kt),s=Ui.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ks(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function kr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?vn(this):Ks(this),this.readyState==3&&kr(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,vn(this))},s.Na=function(h){this.g&&(this.response=h,vn(this))},s.ga=function(){this.g&&vn(this)};function vn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ks(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Ks(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vr(h){let v="";return Ee(h,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function Fn(h,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Vr(E),typeof h=="string"?E!=null&&Ii(E):Ze(h,v,E))}function rt(h){kt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,kt);var ka=/^https?$/i,Qc=["POST","PUT"];s=rt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fs.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){qi(this,J);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)E.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())E.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qc,v,void 0)>=0)||A||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of E)this.g.setRequestHeader(J,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){qi(this,J)}};function qi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,zi(h),Vt(h)}function zi(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ft(this,"complete"),Ft(this,"abort"),Vt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?il(this):this.Xa())},s.Xa=function(){il(this)};function il(h){if(h.h&&typeof u<"u"){if(h.v&&an(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ft(h,"readystatechange"),an(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=J===0){let de=String(h.D).match(Ma)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),A=!ka.test(de?de.toLowerCase():"")}E=A}if(E)Ft(h,"complete"),Ft(h,"success");else{h.o=6;try{var $=an(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",zi(h)}}finally{Vt(h)}}}}function Vt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||Ft(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function an(h){return h.g?h.g.readyState:0}s.ca=function(){try{return an(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),gn(v)}};function Bi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(h){const v={};h=(h.g&&an(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(D(h[A]))continue;var E=Td(h[A]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[$]||[];v[$]=J,J.push(E)}P(v,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Va(h){this.za=0,this.i=[],this.j=new Rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hi("baseRetryDelayMs",5e3,h),this.Za=Hi("retryDelaySeedMs",1e4,h),this.Ta=Hi("forwardChannelMaxRetries",2,h),this.va=Hi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Oi(h&&h.concurrentRequestLimit),this.Ba=new Kc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Va.prototype,s.ka=8,s.I=1,s.connect=function(h,v,E,A){Tt(0),this.W=h,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=eu(this,null,this.W),Ki(this)};function Gi(h){if($i(h),h.I==3){var v=h.V++,E=mt(h.J);if(Ze(E,"SID",h.M),Ze(E,"RID",v),Ze(E,"TYPE","terminate"),Qi(h,E),v=new rs(h,h.j,v),v.M=2,v.A=Gs(mt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=qa(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ji(v)}Jc(h)}function As(h){h.g&&(ol(h),h.g.cancel(),h.g=null)}function $i(h){As(h),h.v&&(d.clearTimeout(h.v),h.v=null),Ua(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ki(h){if(!Mi(h.h)&&!h.m){h.m=!0;var v=h.Ea;k||w(),F||(k(),F=!0),R.add(v,h),h.D=0}}function xd(h,v){return zn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Nr(p(h.Ea,h,v),Zc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new rs(this,this.j,h);let J=this.o;if(this.U&&(J?(J=ie(J),ee(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=La(this,$,v),E=mt(this.J),Ze(E,"RID",h),Ze(E,"CVER",22),this.G&&Ze(E,"X-HTTP-Session-Id",this.G),Qi(this,E),J&&(this.R?v="headers="+Ii(Vr(J))+"&"+v:this.u&&Fn(E,this.u,J)),Da(this.h,$),this.Ra&&Ze(E,"TYPE","init"),this.S?(Ze(E,"$req",v),Ze(E,"SID","null"),$.U=!0,Ts($,E,null)):Ts($,E,v),this.I=2}}else this.I==3&&(h?Yc(this,h):this.i.length==0||Mi(this.h)||Yc(this))};function Yc(h,v){var E;v?E=v.l:E=h.V++;const A=mt(h.J);Ze(A,"SID",h.M),Ze(A,"RID",E),Ze(A,"AID",h.K),Qi(h,A),h.u&&h.o&&Fn(A,h.u,h.o),E=new rs(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=La(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Da(h.h,E),Ts(E,A,v)}function Qi(h,v){h.H&&Ee(h.H,function(E,A){Ze(v,A,E)}),h.l&&Ee({},function(E,A){Ze(v,A,E)})}function La(h,v,E){E=Math.min(h.i.length,E);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var $=h.i;let Ce=-1;for(;;){const lt=["count="+E];Ce==-1?E>0?(Ce=$[0].g,lt.push("ofs="+Ce)):Ce=0:lt.push("ofs="+Ce);let Ye=!0;for(let xt=0;xt<E;xt++){var J=$[xt].g;const Rn=$[xt].map;if(J-=Ce,J<0)Ce=Math.max(0,$[xt].g-100),Ye=!1;else try{J="req"+J+"_"||"";try{var de=Rn instanceof Map?Rn:Object.entries(Rn);for(const[Ns,os]of de){let ls=os;g(os)&&(ls=Un(os)),lt.push(J+Ns+"="+encodeURIComponent(ls))}}catch(Ns){throw lt.push(J+"type="+encodeURIComponent("_badmap")),Ns}}catch{A&&A(Rn)}}if(Ye){de=lt.join("&");break e}}de=void 0}return h=h.i.splice(0,E),v.G=h,de}function Xc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;k||w(),F||(k(),F=!0),R.add(v,h),h.A=0}}function al(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Nr(p(h.Da,h),Zc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Nr(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),As(this),Wc(this))};function ol(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Wc(h){h.g=new rs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=mt(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),Qi(h,v),h.u&&h.o&&Fn(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Gs(mt(v)),E.u=null,E.R=!0,Ir(E,h)}s.Va=function(){this.C!=null&&(this.C=null,As(this),al(this),Tt(19))};function Ua(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ll(h,v){var E=null;if(h.g==v){Ua(h),ol(h),h.g=null;var A=2}else if(Pi(h.h,v))E=v.G,Hs(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var $=h.D;A=Ra(),Ft(A,new zc(A,E)),Ki(h)}else Xc(h);else if($=v.m,$==3||$==0&&v.X>0||!(A==1&&xd(h,v)||A==2&&al(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),$){case 1:Qs(h,5);break;case 4:Qs(h,10);break;case 3:Qs(h,6);break;default:Qs(h,2)}}}function Zc(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function Qs(h,v){if(h.j.info("Error code "+v),v==2){var E=p(h.bb,h),A=h.Ua;const $=!A;A=new is(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Dr(A,"https"),Gs(A),$?rl(A.toString(),E):Pr(A.toString(),E)}else Tt(2);h.I=0,h.l&&h.l.pa(v),Jc(h),$i(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Jc(h){if(h.I=0,h.ja=[],h.l){const v=Oa(h.h);(v.length!=0||h.i.length!=0)&&(q(h.ja,v),q(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function eu(h,v,E){var A=E instanceof is?mt(E):new is(E);if(A.g!="")v&&(A.g=v+"."+A.g),ki(A,A.u);else{var $=d.location;A=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;const J=new is(null);A&&Dr(J,A),v&&(J.g=v),$&&ki(J,$),E&&(J.h=E),A=J}return E=h.G,v=h.wa,E&&v&&Ze(A,E,v),Ze(A,"VER",h.ka),Qi(h,A),A}function qa(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new rt(new Li({ab:E})):new rt(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}s=tu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function za(){}za.prototype.g=function(h,v){return new _n(h,v)};function _n(h,v){kt.call(this),this.g=new Va(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Lr(this)}T(_n,kt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Gi(this.g)},_n.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Un(h),h=E);v.i.push(new bd(v.Ya++,h)),v.I==3&&Ki(v)},_n.prototype.N=function(){this.g.l=null,delete this.j,Gi(this.g),delete this.g,_n.Z.N.call(this)};function cl(h){wr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(cl,wr);function nu(){ss.call(this),this.status=1}T(nu,ss);function Lr(h){this.g=h}T(Lr,tu),Lr.prototype.ra=function(){Ft(this.g,"a")},Lr.prototype.qa=function(h){Ft(this.g,new cl(h))},Lr.prototype.pa=function(h){Ft(this.g,new nu)},Lr.prototype.oa=function(){Ft(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,LS=function(){return new za},VS=function(){return Ra()},kS=qn,Qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,gh=bt,Xt.COMPLETE="complete",PS=Xt,qc.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",kt.prototype.listen=kt.prototype.J,sc=qc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,MS=rt}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore",wE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Tp("@firebase/firestore");function yo(){return _a.logLevel}function ge(s,...e){if(_a.logLevel<=Ue.DEBUG){const n=e.map(Op);_a.debug(`Firestore (${zo}): ${s}`,...n)}}function yr(s,...e){if(_a.logLevel<=Ue.ERROR){const n=e.map(Op);_a.error(`Firestore (${zo}): ${s}`,...n)}}function Co(s,...e){if(_a.logLevel<=Ue.WARN){const n=e.map(Op);_a.warn(`Firestore (${zo}): ${s}`,...n)}}function Op(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,US(s,i,n)}function US(s,e,n){let i=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw yr(i),new Error(i)}function Qe(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||US(e,o,i)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class E2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class S2{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,n(y)):Promise.resolve();let u=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new qS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class T2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b2{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new T2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const i=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=x2(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function qe(s,e){return s<e?-1:s>e?1:0}function Ym(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return Dm(o)===Dm(u)?qe(o,u):Dm(o)?1:-1}return qe(s.length,e.length)}const A2=55296,N2=57343;function Dm(s){const e=s.charCodeAt(0);return e>=A2&&e<=N2}function Io(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="__name__";class Os{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ae(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Os.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=Os.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return qe(e.length,n.length)}static compareSegments(e,n){const i=Os.isNumericId(e),o=Os.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Os.extractNumericId(e).compare(Os.extractNumericId(n)):Ym(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pi.fromString(e.substring(4,e.length-2))}}class ot extends Os{construct(e,n,i){return new ot(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Os{construct(e,n,i){return new nn(e,n,i)}static isValidIdentifier(e){return R2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AE}static keyField(){return new nn([AE])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(i+=g,o++):(u(),o++)}if(u(),d)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ot.fromString(e))}static fromName(e){return new Te(ot.fromString(e).popFirst(5))}static empty(){return new Te(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(s,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function C2(s,e,n,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function NE(s){if(!Te.isDocumentKey(s))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function RE(s){if(Te.isDocumentKey(s))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function BS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Xh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae(12329,{type:typeof s})}function Nn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(s);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Dc(s,e){if(!BS(s))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=-62135596800,IE=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*IE);return new ct(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<CE)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IE}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dc(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Mt("string",ct._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;function I2(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(n+1,0):new ct(n,i));return new yi(o,Te.empty(),e)}function j2(s){return new yi(s.readTime,s.key,yc)}class yi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new yi(Re.min(),Te.empty(),yc)}static max(){return new yi(Re.max(),Te.empty(),yc)}}function D2(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(s.documentKey,e.documentKey),n!==0?n:qe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==O2)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&n()}),(y=>i(y)))})),d=!0,u===o&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((o=>o?le.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,o)=>{const u=e.length,d=new Array(u);let g=0;for(let y=0;y<u;y++){const p=y;n(e[p]).next((_=>{d[p]=_,++g,g===u&&i(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new le(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function P2(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Zh(s){return s==null}function jh(s){return s===0&&1/s==-1/0}function k2(s){return typeof s=="number"&&Number.isInteger(s)&&!jh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="";function V2(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=jE(e)),e=L2(s.get(n),e);return jE(e)}function L2(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case FS:n+="";break;default:n+=u}}return n}function jE(s){return s+FS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function wi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function HS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new tn(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new OE(this.data.getIterator())}getIteratorFrom(e){return new OE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class OE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new kn([])}unionWith(e){let n=new zt(nn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new GS("Invalid base64 string: "+u):u}})(e);return new sn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const U2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(s){if(Qe(!!s,39018),typeof s=="string"){let e=0;const n=U2.exec(s);if(Qe(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(s.seconds),nanos:Ct(s.nanos)}}function Ct(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function _i(s){return typeof s=="string"?sn.fromBase64String(s):sn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="server_timestamp",KS="__type__",QS="__previous_value__",YS="__local_write_time__";function kp(s){return(s?.mapValue?.fields||{})[KS]?.stringValue===$S}function Jh(s){const e=s.mapValue.fields[QS];return kp(e)?Jh(e):e}function vc(s){const e=vi(s.mapValue.fields[YS].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,i,o,u,d,g,y,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=_}}const Dh="(default)";class _c{constructor(e,n){this.projectId=e,this.database=n||Dh}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof _c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="__type__",z2="__max__",oh={mapValue:{}},WS="__vector__",Oh="value";function Ei(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?kp(s)?4:F2(s)?9007199254740991:B2(s)?10:11:Ae(28295,{value:s})}function qs(s,e){if(s===e)return!0;const n=Ei(s);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return vc(s).isEqual(vc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=vi(o.timestampValue),g=vi(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return _i(o.bytesValue).isEqual(_i(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Ct(o.geoPointValue.latitude)===Ct(u.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Ct(o.integerValue)===Ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ct(o.doubleValue),g=Ct(u.doubleValue);return d===g?jh(d)===jh(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Io(s.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(DE(d)!==DE(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!qs(d[y],g[y])))return!1;return!0})(s,e);default:return Ae(52216,{left:s})}}function Ec(s,e){return(s.values||[]).find((n=>qs(n,e)))!==void 0}function jo(s,e){if(s===e)return 0;const n=Ei(s),i=Ei(e);if(n!==i)return qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=Ct(u.integerValue||u.doubleValue),y=Ct(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,e);case 3:return ME(s.timestampValue,e.timestampValue);case 4:return ME(vc(s),vc(e));case 5:return Ym(s.stringValue,e.stringValue);case 6:return(function(u,d){const g=_i(u),y=_i(d);return g.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),y=d.split("/");for(let p=0;p<g.length&&p<y.length;p++){const _=qe(g[p],y[p]);if(_!==0)return _}return qe(g.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=qe(Ct(u.latitude),Ct(d.latitude));return g!==0?g:qe(Ct(u.longitude),Ct(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return PE(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const g=u.fields||{},y=d.fields||{},p=g[Oh]?.arrayValue,_=y[Oh]?.arrayValue,T=qe(p?.values?.length||0,_?.values?.length||0);return T!==0?T:PE(p,_)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===oh.mapValue&&d===oh.mapValue)return 0;if(u===oh.mapValue)return 1;if(d===oh.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),p=d.fields||{},_=Object.keys(p);y.sort(),_.sort();for(let T=0;T<y.length&&T<_.length;++T){const x=Ym(y[T],_[T]);if(x!==0)return x;const C=jo(g[y[T]],p[_[T]]);if(C!==0)return C}return qe(y.length,_.length)})(s.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function ME(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return qe(s,e);const n=vi(s),i=vi(e),o=qe(n.seconds,i.seconds);return o!==0?o:qe(n.nanos,i.nanos)}function PE(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=jo(n[o],i[o]);if(u)return u}return qe(n.length,i.length)}function Do(s){return Xm(s)}function Xm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=vi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return _i(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Te.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=Xm(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Xm(n.fields[d])}`;return o+"}"})(s.mapValue):Ae(61005,{value:s})}function yh(s){switch(Ei(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(s);return e?16+yh(e):16;case 5:return 2*s.stringValue.length;case 6:return _i(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+yh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return wi(i.fields,((u,d)=>{o+=u.length+yh(d)})),o})(s.mapValue);default:throw Ae(13486,{value:s})}}function kE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Wm(s){return!!s&&"integerValue"in s}function Vp(s){return!!s&&"arrayValue"in s}function VE(s){return!!s&&"nullValue"in s}function LE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vh(s){return!!s&&"mapValue"in s}function B2(s){return(s?.mapValue?.fields||{})[XS]?.stringValue===WS}function uc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return wi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=uc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uc(s.arrayValue.values[n]);return e}return{...s}}function F2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===z2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(n)}setAll(e){let n=nn.emptyPath(),i={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,i,o),i={},o=[],n=g.popLast()}d?i[g.lastSegment()]=uc(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){wi(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new An(uc(this.value))}}function ZS(s){const e=[];return wi(s.fields,((n,i)=>{const o=new nn([n]);if(vh(i)){const u=ZS(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,i,o,u,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new hn(e,0,Re.min(),Re.min(),Re.min(),An.empty(),0)}static newFoundDocument(e,n,i,o){return new hn(e,1,n,Re.min(),i,o,0)}static newNoDocument(e,n){return new hn(e,2,n,Re.min(),Re.min(),An.empty(),0)}static newUnknownDocument(e,n){return new hn(e,3,n,Re.min(),Re.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function UE(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=Te.comparator(Te.fromName(d.referenceValue),n.key):i=jo(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function qE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!qs(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function H2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{}class Ot extends JS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new $2(e,n,i):n==="array-contains"?new Y2(e,i):n==="in"?new X2(e,i):n==="not-in"?new W2(e,i):n==="array-contains-any"?new Z2(e,i):new Ot(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new K2(e,i):new Q2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jo(n,this.value)):n!==null&&Ei(this.value)===Ei(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends JS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new gs(e,n)}matches(e){return e1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function e1(s){return s.op==="and"}function t1(s){return G2(s)&&e1(s)}function G2(s){for(const e of s.filters)if(e instanceof gs)return!1;return!0}function Zm(s){if(s instanceof Ot)return s.field.canonicalString()+s.op.toString()+Do(s.value);if(t1(s))return s.filters.map((e=>Zm(e))).join(",");{const e=s.filters.map((n=>Zm(n))).join(",");return`${s.op}(${e})`}}function n1(s,e){return s instanceof Ot?(function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&qs(i.value,o.value)})(s,e):s instanceof gs?(function(i,o){return o instanceof gs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,g)=>u&&n1(d,o.filters[g])),!0):!1})(s,e):void Ae(19439)}function s1(s){return s instanceof Ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`})(s):s instanceof gs?(function(n){return n.op.toString()+" {"+n.getFilters().map(s1).join(" ,")+"}"})(s):"Filter"}class $2 extends Ot{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class K2 extends Ot{constructor(e,n){super(e,"in",n),this.keys=r1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Q2 extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=r1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function r1(s,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class Y2 extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&Ec(n.arrayValue,this.value)}}class X2 extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ec(this.value.arrayValue,n)}}class W2 extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ec(this.value.arrayValue,n)}}class Z2 extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ec(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n=null,i=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function zE(s,e=null,n=[],i=[],o=null,u=null,d=null){return new J2(s,e,n,i,o,u,d)}function Lp(s){const e=Ie(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Zm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Do(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Do(i))).join(",")),e.Te=n}return e.Te}function Up(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!H2(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!n1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!qE(s.startAt,e.startAt)&&qE(s.endAt,e.endAt)}function Jm(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n=null,i=[],o=[],u=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eC(s,e,n,i,o,u,d,g){return new Ho(s,e,n,i,o,u,d,g)}function ed(s){return new Ho(s)}function BE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function i1(s){return s.collectionGroup!==null}function hc(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new zt(nn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Sc(u,i))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new Sc(nn.keyField(),i))}return e.Ie}function ks(s){const e=Ie(s);return e.Ee||(e.Ee=tC(e,hc(s))),e.Ee}function tC(s,e){if(s.limitType==="F")return zE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sc(o.field,u)}));const n=s.endAt?new Mh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Mh(s.startAt.position,s.startAt.inclusive):null;return zE(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ep(s,e){const n=s.filters.concat([e]);return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function tp(s,e,n){return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function td(s,e){return Up(ks(s),ks(e))&&s.limitType===e.limitType}function a1(s){return`${Lp(ks(s))}|lt:${s.limitType}`}function vo(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>s1(o))).join(", ")}]`),Zh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Do(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Do(o))).join(",")),`Target(${i})`})(ks(s))}; limitType=${s.limitType})`}function nd(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Te.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of hc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,g,y){const p=UE(d,g,y);return d.inclusive?p<=0:p<0})(i.startAt,hc(i),o)||i.endAt&&!(function(d,g,y){const p=UE(d,g,y);return d.inclusive?p>=0:p>0})(i.endAt,hc(i),o))})(s,e)}function nC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function o1(s){return(e,n)=>{let i=!1;for(const o of hc(s)){const u=sC(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function sC(s,e,n){const i=s.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,d,g){const y=d.data.field(u),p=g.data.field(u);return y!==null&&p!==null?jo(y,p):Ae(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return HS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new yt(Te.comparator);function vr(){return rC}const l1=new yt(Te.comparator);function rc(...s){let e=l1;for(const n of s)e=e.insert(n.key,n);return e}function c1(s){let e=l1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ha(){return dc()}function u1(){return dc()}function dc(){return new ba((s=>s.toString()),((s,e)=>s.isEqual(e)))}const iC=new yt(Te.comparator),aC=new zt(Te.comparator);function ze(...s){let e=aC;for(const n of s)e=e.add(n);return e}const oC=new zt(qe);function lC(){return oC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function h1(s){return{integerValue:""+s}}function cC(s,e){return k2(e)?h1(e):qp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function uC(s,e,n){return s instanceof Ph?(function(o,u){const d={fields:{[KS]:{stringValue:$S},[YS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kp(u)&&(u=Jh(u)),u&&(d.fields[QS]=u),{mapValue:d}})(n,e):s instanceof Tc?f1(s,e):s instanceof bc?m1(s,e):(function(o,u){const d=d1(o,u),g=FE(d)+FE(o.Ae);return Wm(d)&&Wm(o.Ae)?h1(g):qp(o.serializer,g)})(s,e)}function hC(s,e,n){return s instanceof Tc?f1(s,e):s instanceof bc?m1(s,e):n}function d1(s,e){return s instanceof kh?(function(i){return Wm(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Ph extends sd{}class Tc extends sd{constructor(e){super(),this.elements=e}}function f1(s,e){const n=p1(e);for(const i of s.elements)n.some((o=>qs(o,i)))||n.push(i);return{arrayValue:{values:n}}}class bc extends sd{constructor(e){super(),this.elements=e}}function m1(s,e){let n=p1(e);for(const i of s.elements)n=n.filter((o=>!qs(o,i)));return{arrayValue:{values:n}}}class kh extends sd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function FE(s){return Ct(s.integerValue||s.doubleValue)}function p1(s){return Vp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function dC(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof Tc&&o instanceof Tc||i instanceof bc&&o instanceof bc?Io(i.elements,o.elements,qs):i instanceof kh&&o instanceof kh?qs(i.Ae,o.Ae):i instanceof Ph&&o instanceof Ph})(s.transform,e.transform)}class fC{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class rd{}function g1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new zp(s.key,Jn.none()):new Oc(s.key,s.data,Jn.none());{const n=s.data,i=An.empty();let o=new zt(nn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new xi(s.key,i,new kn(o.toArray()),Jn.none())}}function mC(s,e,n){s instanceof Oc?(function(o,u,d){const g=o.value.clone(),y=GE(o.fieldTransforms,u,d.transformResults);g.setAll(y),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):s instanceof xi?(function(o,u,d){if(!_h(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=GE(o.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(y1(o)),y.setAll(g),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function fc(s,e,n,i){return s instanceof Oc?(function(u,d,g,y){if(!_h(u.precondition,d))return g;const p=u.value.clone(),_=$E(u.fieldTransforms,y,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(s,e,n,i):s instanceof xi?(function(u,d,g,y){if(!_h(u.precondition,d))return g;const p=$E(u.fieldTransforms,y,d),_=d.data;return _.setAll(y1(u)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,i):(function(u,d,g){return _h(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,n)}function pC(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=d1(i.transform,o||null);u!=null&&(n===null&&(n=An.empty()),n.set(i.field,u))}return n||null}function HE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Io(i,o,((u,d)=>dC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Oc extends rd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xi extends rd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function y1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function GE(s,e,n){const i=new Map;Qe(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,g=e.data.field(u.field);i.set(u.field,hC(d,g,n[o]))}return i}function $E(s,e,n){const i=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);i.set(o.field,uC(u,d,e))}return i}class zp extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gC extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&mC(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=fc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=fc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=u1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=n.has(o.key)?null:g;const y=g1(d,g);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((n,i)=>HE(n,i)))&&Io(this.baseMutations,e.baseMutations,((n,i)=>HE(n,i)))}}class Bp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return iC})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new Bp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Fe;function EC(s){switch(s){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:s})}}function v1(s){if(s===void 0)return yr("GRPC error has no .code"),re.UNKNOWN;switch(s){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:s})}}(Fe=Dt||(Dt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new pi([4294967295,4294967295],0);function KE(s){const e=SC().encode(s),n=new OS;return n.update(e),new Uint8Array(n.digest())}function QE(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new pi([n,i],0),new pi([o,u],0)]}class Fp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ic(`Invalid padding: ${n}`);if(i<0)throw new ic(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ic(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=pi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(pi.fromNumber(i)));return o.compare(TC)===1&&(o=new pi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=KE(e),[i,o]=QE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Fp(u,o,n);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=KE(e),[i,o]=QE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new id(Re.min(),o,new yt(qe),vr(),ze())}}class Mc{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Mc(i,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class _1{constructor(e,n){this.targetId=e,this.Ce=n}}class E1{constructor(e,n,i=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class YE{constructor(){this.ve=0,this.Fe=XE(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),i=ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ae(38017,{changeType:u})}})),new Mc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=XE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bC{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=lh(),this.He=lh(),this.Ye=new yt(qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Jm(u))if(i===0){const d=new Te(u.path);this.et(n,d,hn.newNoDocument(d,Re.min()))}else Qe(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const g=this.ut(e),y=g?this.ct(g,e,d):1;if(y!==0){this.it(n);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,g;try{d=_i(i).toUint8Array()}catch(y){if(y instanceof GS)return Co("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Fp(d,o,u)}catch(y){return Co(y instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&Jm(g.target)){const y=new Te(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,hn.newNoDocument(y,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let i=ze();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new id(e,n,this.Ye,this.je,i);return this.je=vr(),this.Je=lh(),this.He=lh(),this.Ye=new yt(qe),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new YE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zt(qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zt(qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function lh(){return new yt(Te.comparator)}function XE(){return new yt(Te.comparator)}const wC={asc:"ASCENDING",desc:"DESCENDING"},xC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AC={and:"AND",or:"OR"};class NC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(s,e){return s.useProto3Json||Zh(e)?e:{value:e}}function Vh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function RC(s,e){return Vh(s,e.toTimestamp())}function Vs(s){return Qe(!!s,49232),Re.fromTimestamp((function(n){const i=vi(n);return new ct(i.seconds,i.nanos)})(s))}function Hp(s,e){return sp(s,e).canonicalString()}function sp(s,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function T1(s){const e=ot.fromString(s);return Qe(N1(e),10190,{key:e.toString()}),e}function rp(s,e){return Hp(s.databaseId,e.path)}function Om(s,e){const n=T1(e);if(n.get(1)!==s.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Te(w1(n))}function b1(s,e){return Hp(s.databaseId,e)}function CC(s){const e=T1(s);return e.length===4?ot.emptyPath():w1(e)}function ip(s){return new ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function w1(s){return Qe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function WE(s,e,n){return{name:rp(s,e),fields:n.value.mapValue.fields}}function IC(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(p){const _=p.code===void 0?re.UNKNOWN:v1(p.code);return new pe(_,p.message||"")})(d);n=new E1(i,o,u,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Om(s,i.document.name),u=Vs(i.document.updateTime),d=i.document.createTime?Vs(i.document.createTime):Re.min(),g=new An({mapValue:{fields:i.document.fields}}),y=hn.newFoundDocument(o,u,d,g),p=i.targetIds||[],_=i.removedTargetIds||[];n=new Eh(p,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Om(s,i.document),u=i.readTime?Vs(i.readTime):Re.min(),d=hn.newNoDocument(o,u),g=i.removedTargetIds||[];n=new Eh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Om(s,i.document),u=i.removedTargetIds||[];n=new Eh([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new _C(o,u),g=i.targetId;n=new _1(g,d)}}return n}function jC(s,e){let n;if(e instanceof Oc)n={update:WE(s,e.key,e.value)};else if(e instanceof zp)n={delete:rp(s,e.key)};else if(e instanceof xi)n={update:WE(s,e.key,e.data),updateMask:qC(e.fieldMask)};else{if(!(e instanceof gC))return Ae(16599,{Vt:e.type});n={verify:rp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const g=d.transform;if(g instanceof Ph)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Tc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof bc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof kh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ae(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:RC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(s,e.precondition)),n}function DC(s,e){return s&&s.length>0?(Qe(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?Vs(o.updateTime):Vs(u);return d.isEqual(Re.min())&&(d=Vs(u)),new fC(d,o.transformResults||[])})(n,e)))):[]}function OC(s,e){return{documents:[b1(s,e.path)]}}function MC(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=b1(s,o);const u=(function(p){if(p.length!==0)return A1(gs.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(p){if(p.length!==0)return p.map((_=>(function(x){return{field:_o(x.field),direction:VC(x.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=np(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function PC(s){let e=CC(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const x=x1(T);return x instanceof gs&&t1(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((x=>(function(q){return new Sc(Eo(q.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(x)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let x;return x=typeof T=="object"?T.value:T,Zh(x)?null:x})(n.limit));let y=null;n.startAt&&(y=(function(T){const x=!!T.before,C=T.values||[];return new Mh(C,x)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const x=!T.before,C=T.values||[];return new Mh(C,x)})(n.endAt)),eC(e,o,d,u,g,"F",y,p)}function kC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Eo(n.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(n.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Eo(n.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Eo(n.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Ot.create(Eo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return gs.create(n.compositeFilter.filters.map((i=>x1(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(s):Ae(30097,{filter:s})}function VC(s){return wC[s]}function LC(s){return xC[s]}function UC(s){return AC[s]}function _o(s){return{fieldPath:s.canonicalString()}}function Eo(s){return nn.fromServerFormat(s.fieldPath)}function A1(s){return s instanceof Ot?(function(n){if(n.op==="=="){if(LE(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(VE(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LE(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(VE(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:LC(n.op),value:n.value}}})(s):s instanceof gs?(function(n){const i=n.getFilters().map((o=>A1(o)));return i.length===1?i[0]:{compositeFilter:{op:UC(n.op),filters:i}}})(s):Ae(54877,{filter:s})}function qC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function N1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,i,o,u=Re.min(),d=Re.min(),g=sn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.yt=e}}function BC(s){const e=PC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.Cn=new HC}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(yi.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class HC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new zt(ot.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new zt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R1=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(R1,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oo(0)}static cr(){return new Oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="LruGarbageCollector",GC=1048576;function e0([s,e],[n,i]){const o=qe(s,n);return o===0?qe(e,i):o}class $C{constructor(e){this.Ir=e,this.buffer=new zt(e0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();e0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(JE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fo(n)?ge(JE,"Ignoring IndexedDB error during garbage collection: ",n):await Bo(n)}await this.Vr(3e5)}))}}class QC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Wh.ce);const i=new $C(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ZE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,u,d,g,y,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,g=Date.now(),this.removeTargets(e,i,n)))).next((T=>(u=T,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(p=Date.now(),yo()<=Ue.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${T} documents in `+(p-y)+`ms
Total Duration: ${p-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function YC(s,e){return new QC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.changes=new ba((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&fc(i.mutation,o,kn.empty(),ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ze()){const o=ha();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let d=rc();return u.forEach(((g,y)=>{d=d.insert(g,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ha();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ze())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,i,o){let u=vr();const d=dc(),g=(function(){return dc()})();return n.forEach(((y,p)=>{const _=i.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof xi)?u=u.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),fc(_.mutation,p,_.mutation.getFieldMask(),ct.now())):d.set(p.key,kn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((p,_)=>d.set(p,_))),n.forEach(((p,_)=>g.set(p,new WC(_,d.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const i=dc();let o=new yt(((d,g)=>d-g)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((y=>{const p=n.get(y);if(p===null)return;let _=i.get(y)||kn.empty();_=g.applyToLocalView(p,_),i.set(y,_);const T=(o.get(g.batchId)||ze()).add(y);o=o.insert(g.batchId,T)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),p=y.key,_=y.value,T=u1();_.forEach((x=>{if(!u.has(x)){const C=g1(n.get(x),i.get(x));C!==null&&T.set(x,C),u=u.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,T))}return le.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):le.resolve(ha());let g=yc,y=u;return d.next((p=>le.forEach(p,((_,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{y=y.insert(_,x)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,y,p,ze()))).next((_=>({batchId:g,changes:c1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((i=>{let o=rc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=rc();return this.indexManager.getCollectionParents(e,u).next((g=>le.forEach(g,(y=>{const p=(function(T,x){return new Ho(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next((_=>{_.forEach(((T,x)=>{d=d.insert(T,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((d=>{u.forEach(((y,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,hn.newInvalidDocument(_)))}));let g=rc();return d.forEach(((y,p)=>{const _=u.get(y);_!==void 0&&fc(_.mutation,p,kn.empty(),ct.now()),nd(n,p)&&(g=g.insert(y,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Vs(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:BC(o.bundledQuery),readTime:Vs(o.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.overlays=new yt(Te.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ha();return le.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.St(e,n,u)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const o=ha(),u=n.length+1,d=new Te(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,p=y.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>i&&o.set(y.getKey(),y)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new yt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=u.get(p.largestBatchId);_===null&&(_=ha(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const g=ha(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,_)=>g.set(p,_))),!(g.size()>=o)););return le.resolve(g)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new vC(n,i));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.Qr=new zt(Qt.$r),this.Ur=new zt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Qt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Te(new ot([])),i=new Qt(n,e),o=new Qt(n,e+1),u=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new ot([])),i=new Qt(n,e),o=new Qt(n,e+1);let u=ze();return this.Ur.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Qt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||qe(e.Yr,n.Yr)}static Kr(e,n){return qe(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Qt.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new yC(u,n,i,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Qt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Pp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new zt(qe);return n.forEach((o=>{const u=new Qt(o,0),d=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{i=i.add(g.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;Te.isDocumentKey(u)||(u=u.child(""));const d=new Qt(new Te(u),0);let g=new zt(qe);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(g=g.add(y.Yr)),!0)}),d),le.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,(o=>{const u=new Qt(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Qt(n,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.ri=e,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(n))}getEntries(e,n){let i=vr();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():hn.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=vr();const d=n.path,g=new Te(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:p,value:{document:_}}=y.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||D2(j2(_),i)<=0||(o.has(_.key)||nd(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Ae(9500)}ii(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new rI(this)}getSize(e){return le.resolve(this.size)}}class rI extends XC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.persistence=e,this.si=new ba((n=>Lp(n)),Up),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=Oo.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wh(0),this.li=!1,this.li=!0,this.hi=new tI,this.referenceDelegate=e(this),this.Pi=new iI(this),this.indexManager=new FC,this.remoteDocumentCache=(function(o){return new sI(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new zC(n),this.Ii=new JC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new nI(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const o=new aI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class aI extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new $p(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lh{constructor(e,n){this.persistence=e,this.pi=new ba((i=>V2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=YC(this,n)}static mi(e,n){return new Lh(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?le.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(i++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yh(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=ze(),o=ze();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Kp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kx()?8:P2(pn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new oI;return this.Ss(e,n,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>u.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(yo()<=Ue.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(yo()<=Ue.DEBUG&&ge("QueryEngine","Query:",vo(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(yo()<=Ue.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ks(n))):le.resolve())}ys(e,n){if(BE(n))return le.resolve(null);let i=ks(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=tp(n,null,"F"),i=ks(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=ze(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((y=>{const p=this.Ds(n,g);return this.Cs(n,p,d,y.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,p,n,y)}))))})))))}ws(e,n,i,o){return BE(n)||o.isEqual(Re.min())?le.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,i,o)?le.resolve(null):(yo()<=Ue.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(n)),this.vs(e,d,n,I2(o,yc)).next((g=>g)))}))}Ds(e,n){let i=new zt(o1(e));return n.forEach(((o,u)=>{nd(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return yo()<=Ue.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",vo(n)),this.ps.getDocumentsMatchingQuery(e,n,yi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",cI=3e8;class uI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yt(qe),this.xs=new ba((u=>Lp(u)),Up),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function hI(s,e,n,i){return new uI(s,e,n,i)}async function I1(s,e){const n=Ie(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],g=[];let y=ze();for(const p of o){d.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}for(const p of u){g.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}return n.localDocuments.getDocuments(i,y).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:g})))}))}))}function dI(s,e){const n=Ie(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,p,_){const T=p.batch,x=T.keys();let C=le.resolve();return x.forEach((q=>{C=C.next((()=>_.getEntry(y,q))).next((B=>{const V=p.docVersions.get(q);Qe(V!==null,48541),B.version.compareTo(V)<0&&(T.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),_.addEntry(B)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(y,T)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let y=ze();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(y=y.add(g.batch.mutations[p].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function j1(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function fI(s,e){const n=Ie(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((_,T)=>{const x=o.get(T);if(!x)return;g.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,T))));let C=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(sn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(T,C),(function(B,V,Y){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=cI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(x,C,_)&&g.push(n.Pi.updateTargetData(u,C))}));let y=vr(),p=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(mI(u,d,e.documentUpdates).next((_=>{y=_.ks,p=_.qs}))),!i.isEqual(Re.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));g.push(_)}return le.waitFor(g).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,p))).next((()=>y))})).then((u=>(n.Ms=o,u)))}function mI(s,e,n){let i=ze(),o=ze();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=vr();return n.forEach(((g,y)=>{const p=u.get(g);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):ge(Qp,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function pI(s,e){const n=Ie(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Pp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function gI(s,e){const n=Ie(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((u=>u?(o=u,le.resolve(o)):n.Pi.allocateTargetId(i).next((d=>(o=new hi(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function ap(s,e,n){const i=Ie(s),o=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Fo(d))throw d;ge(Qp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function t0(s,e,n){const i=Ie(s);let o=Re.min(),u=ze();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,p,_){const T=Ie(y),x=T.xs.get(_);return x!==void 0?le.resolve(T.Ms.get(x)):T.Pi.getTargetData(p,_)})(i,d,ks(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,g.targetId).next((y=>{u=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?u:ze()))).next((g=>(yI(i,nC(e),g),{documents:g,Qs:u})))))}function yI(s,e,n){let i=s.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class n0{constructor(){this.activeTargetIds=lC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vI{constructor(){this.Mo=new n0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="ConnectivityMonitor";class r0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(s0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(s0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function op(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Dh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,u){const d=op(),g=this.zo(e,n.toUriEncodedString());ge(Mm,`Sending RPC '${e}' ${d}:`,g,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:p}=new URL(g),_=Lo(p);return this.Jo(e,g,y,i,_).then((T=>(ge(Mm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw Co(Mm,`RPC '${e}' ${d} failed with error: `,T,"url: ",g,"request:",i),T}))}Ho(e,n,i,o,u,d){return this.Go(e,n,i,o,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const i=EI[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class bI extends SI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const d=op();return new Promise(((g,y)=>{const p=new MS;p.setWithCredentials(!0),p.listenOnce(PS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case gh.NO_ERROR:const T=p.getResponseJson();ge(cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),g(T);break;case gh.TIMEOUT:ge(cn,`RPC '${e}' ${d} timed out`),y(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const x=p.getStatus();if(ge(cn,`RPC '${e}' ${d} failed with status:`,x,"response text:",p.getResponseText()),x>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const q=C?.error;if(q&&q.status&&q.message){const B=(function(Y){const ae=Y.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ae)>=0?ae:re.UNKNOWN})(q.status);y(new pe(B,q.message))}else y(new pe(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(cn,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ge(cn,`RPC '${e}' ${d} sending request:`,o),p.send(n,"POST",_,i,15)}))}T_(e,n,i){const o=op(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=LS(),g=VS(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,i),y.encodeInitMessageHeaders=!0;const _=u.join("");ge(cn,`Creating RPC '${e}' stream ${o}: ${_}`,y);const T=d.createWebChannel(_,y);this.I_(T);let x=!1,C=!1;const q=new TI({Yo:V=>{C?ge(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(x||(ge(cn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),ge(cn,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Zo:()=>T.close()}),B=(V,Y,ae)=>{V.listen(Y,(K=>{try{ae(K)}catch(H){setTimeout((()=>{throw H}),0)}}))};return B(T,sc.EventType.OPEN,(()=>{C||(ge(cn,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),B(T,sc.EventType.CLOSE,(()=>{C||(C=!0,ge(cn,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(T))})),B(T,sc.EventType.ERROR,(V=>{C||(C=!0,Co(cn,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),q.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),B(T,sc.EventType.MESSAGE,(V=>{if(!C){const Y=V.data[0];Qe(!!Y,16349);const ae=Y,K=ae?.error||ae[0]?.error;if(K){ge(cn,`RPC '${e}' stream ${o} received error:`,K);const H=K.status;let k=(function(w){const N=Dt[w];if(N!==void 0)return v1(N)})(H),F=K.message;k===void 0&&(k=re.INTERNAL,F="Unknown error status: "+H+" with message "+K.message),C=!0,q.a_(new pe(k,F)),T.close()}else ge(cn,`RPC '${e}' stream ${o} received:`,Y),q.u_(Y)}})),B(g,kS.STAT_EVENT,(V=>{V.stat===Qm.PROXY?ge(cn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Qm.NOPROXY&&ge(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(s){return new NC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="PersistentStream";class O1{constructor(e,n,i,o,u,d,g,y){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(i0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(i0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wI extends O1{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IC(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Vs(d.readTime):Re.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=ip(this.serializer),n.addTarget=(function(u,d){let g;const y=d.target;if(g=Jm(y)?{documents:OC(u,y)}:{query:MC(u,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=S1(u,d.resumeToken);const p=np(u,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(Re.min())>0){g.readTime=Vh(u,d.snapshotVersion.toTimestamp());const p=np(u,d.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const i=kC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.q_(n)}}class xI extends O1{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DC(e.writeResults,e.commitTime),i=Vs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ip(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>jC(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{}class NI extends AI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,sp(n,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(re.UNKNOWN,u.toString())}))}Ho(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,sp(n,i),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class CI{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{wa(this)&&(ge(Ea,"Restarting streams for network reachability change."),await(async function(y){const p=Ie(y);p.Ea.add(4),await Pc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await od(p)})(this))}))})),this.Ra=new RI(i,o)}}async function od(s){if(wa(s))for(const e of s.da)await e(!0)}async function Pc(s){for(const e of s.da)await e(!1)}function M1(s,e){const n=Ie(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Zp(n)?Wp(n):Go(n).O_()&&Xp(n,e))}function Yp(s,e){const n=Ie(s),i=Go(n);n.Ia.delete(e),i.O_()&&P1(n,e),n.Ia.size===0&&(i.O_()?i.L_():wa(n)&&n.Ra.set("Unknown"))}function Xp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(s).Y_(e)}function P1(s,e){s.Va.Ue(e),Go(s).Z_(e)}function Wp(s){s.Va=new bC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Ra.ua()}function Zp(s){return wa(s)&&!Go(s).x_()&&s.Ia.size>0}function wa(s){return Ie(s).Ea.size===0}function k1(s){s.Va=void 0}async function II(s){s.Ra.set("Online")}async function jI(s){s.Ia.forEach(((e,n)=>{Xp(s,e)}))}async function DI(s,e){k1(s),Zp(s)?(s.Ra.ha(e),Wp(s)):s.Ra.set("Unknown")}async function OI(s,e,n){if(s.Ra.set("Online"),e instanceof E1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(i){ge(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uh(s,i)}else if(e instanceof Eh?s.Va.Ze(e):e instanceof _1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const i=await j1(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(y.resumeToken,d))}})),g.targetMismatches.forEach(((y,p)=>{const _=u.Ia.get(y);if(!_)return;u.Ia.set(y,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),P1(u,y);const T=new hi(_.target,y,p,_.sequenceNumber);Xp(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){ge(Ea,"Failed to raise snapshot:",i),await Uh(s,i)}}async function Uh(s,e,n){if(!Fo(e))throw e;s.Ea.add(1),await Pc(s),s.Ra.set("Offline"),n||(n=()=>j1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(Ea,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await od(s)}))}function V1(s,e){return e().catch((n=>Uh(s,n,e)))}async function ld(s){const e=Ie(s),n=Si(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pp;for(;MI(e);)try{const o=await pI(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,PI(e,o)}catch(o){await Uh(e,o)}L1(e)&&U1(e)}function MI(s){return wa(s)&&s.Ta.length<10}function PI(s,e){s.Ta.push(e);const n=Si(s);n.O_()&&n.X_&&n.ea(e.mutations)}function L1(s){return wa(s)&&!Si(s).x_()&&s.Ta.length>0}function U1(s){Si(s).start()}async function kI(s){Si(s).ra()}async function VI(s){const e=Si(s);for(const n of s.Ta)e.ea(n.mutations)}async function LI(s,e,n){const i=s.Ta.shift(),o=Bp.from(i,e,n);await V1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ld(s)}async function UI(s,e){e&&Si(s).X_&&await(async function(i,o){if((function(d){return EC(d)&&d!==re.ABORTED})(o.code)){const u=i.Ta.shift();Si(i).B_(),await V1(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ld(i)}})(s,e),L1(s)&&U1(s)}async function a0(s,e){const n=Ie(s);n.asyncQueue.verifyOperationInProgress(),ge(Ea,"RemoteStore received new credentials");const i=wa(n);n.Ea.add(3),await Pc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await od(n)}async function qI(s,e){const n=Ie(s);e?(n.Ea.delete(2),await od(n)):e||(n.Ea.add(2),await Pc(n),n.Ra.set("Unknown"))}function Go(s){return s.ma||(s.ma=(function(n,i,o){const u=Ie(n);return u.sa(),new wI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:II.bind(null,s),t_:jI.bind(null,s),r_:DI.bind(null,s),H_:OI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Zp(s)?Wp(s):s.Ra.set("Unknown")):(await s.ma.stop(),k1(s))}))),s.ma}function Si(s){return s.fa||(s.fa=(function(n,i,o){const u=Ie(n);return u.sa(),new xI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:kI.bind(null,s),r_:UI.bind(null,s),ta:VI.bind(null,s),na:LI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ld(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(Ea,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,g=new Jp(e,n,d,o,u);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(s,e){if(yr("AsyncQueue",`${e}: ${s}`),Fo(s))return new pe(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=rc(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ao;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.ga=new yt(Te.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Mo{constructor(e,n,i,o,u,d,g,y,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Mo(e,n,Ao.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BI{constructor(){this.queries=l0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ie(n),u=o.queries;o.queries=l0(),u.forEach(((d,g)=>{for(const y of g.Sa)y.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function l0(){return new ba((s=>a1(s)),td)}async function tg(s,e){const n=Ie(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new zI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=eg(d,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&sg(n)}async function ng(s,e){const n=Ie(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function FI(s,e){const n=Ie(s);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(i=!0);d.wa=o}}i&&sg(n)}function HI(s,e,n){const i=Ie(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function sg(s){s.Ca.forEach((e=>{e.next()}))}var lp,c0;(c0=lp||(lp={})).Ma="default",c0.Cache="cache";class rg{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.key=e}}class z1{constructor(e){this.key=e}}class GI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=o1(e),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new o0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const x=o.get(_),C=nd(this.query,T)?T:null,q=!!x&&this.mutatedKeys.has(x.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;x&&C?x.data.isEqual(C.data)?q!==B&&(i.track({type:3,doc:C}),V=!0):this.su(x,C)||(i.track({type:2,doc:C}),V=!0,(y&&this.eu(C,y)>0||p&&this.eu(C,p)<0)&&(g=!0)):!x&&C?(i.track({type:0,doc:C}),V=!0):x&&!C&&(i.track({type:1,doc:x}),V=!0,(y||p)&&(g=!0)),V&&(C?(d=d.add(C),u=B?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,T)=>(function(C,q){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:V})}};return B(C)-B(q)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const g=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,d.length!==0||p?{snapshot:new Mo(this.query,e.tu,u,d,e.mutatedKeys,y===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new z1(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new q1(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ig="SyncEngine";class $I{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class KI{constructor(e){this.key=e,this.hu=!1}}class QI{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ba((g=>a1(g)),td),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Te.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=Oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YI(s,e,n=!0){const i=K1(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await B1(i,e,n,!0),o}async function XI(s,e){const n=K1(s);await B1(n,e,!0,!1)}async function B1(s,e,n,i){const o=await gI(s.localStore,ks(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let g;return i&&(g=await WI(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&M1(s.remoteStore,o),g}async function WI(s,e,n,i,o){s.pu=(T,x,C)=>(async function(B,V,Y,ae){let K=V.view.ru(Y);K.Cs&&(K=await t0(B.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,K))));const H=ae&&ae.targetChanges.get(V.targetId),k=ae&&ae.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(K,B.isPrimaryClient,H,k);return h0(B,V.targetId,F.au),F.snapshot})(s,T,x,C);const u=await t0(s.localStore,e,!0),d=new GI(e,u.Qs),g=d.ru(u.documents),y=Mc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),p=d.applyChanges(g,s.isPrimaryClient,y);h0(s,n,p.au);const _=new $I(e,n,d);return s.Tu.set(e,_),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),p.snapshot}async function ZI(s,e,n){const i=Ie(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!td(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Yp(i.remoteStore,o.targetId),cp(i,o.targetId)})).catch(Bo)):(cp(i,o.targetId),await ap(i.localStore,o.targetId,!0))}async function JI(s,e){const n=Ie(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Yp(n.remoteStore,i.targetId))}async function ej(s,e,n){const i=oj(s);try{const o=await(function(d,g){const y=Ie(d),p=ct.now(),_=g.reduce(((C,q)=>C.add(q.key)),ze());let T,x;return y.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let q=vr(),B=ze();return y.Ns.getEntries(C,_).next((V=>{q=V,q.forEach(((Y,ae)=>{ae.isValidDocument()||(B=B.add(Y))}))})).next((()=>y.localDocuments.getOverlayedDocuments(C,q))).next((V=>{T=V;const Y=[];for(const ae of g){const K=pC(ae,T.get(ae.key).overlayedDocument);K!=null&&Y.push(new xi(ae.key,K,ZS(K.value.mapValue),Jn.exists(!0)))}return y.mutationQueue.addMutationBatch(C,p,Y,g)})).next((V=>{x=V;const Y=V.applyToLocalDocumentSet(T,B);return y.documentOverlayCache.saveOverlays(C,V.batchId,Y)}))})).then((()=>({batchId:x.batchId,changes:c1(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,g,y){let p=d.Vu[d.currentUser.toKey()];p||(p=new yt(qe)),p=p.insert(g,y),d.Vu[d.currentUser.toKey()]=p})(i,o.batchId,n),await kc(i,o.changes),await ld(i.remoteStore)}catch(o){const u=eg(o,"Failed to persist write");n.reject(u)}}async function F1(s,e){const n=Ie(s);try{const i=await fI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Qe(d.hu,14607):o.removedDocuments.size>0&&(Qe(d.hu,42227),d.hu=!1))})),await kc(n,i,e)}catch(i){await Bo(i)}}function u0(s,e,n){const i=Ie(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const y=Ie(d);y.onlineState=g;let p=!1;y.queries.forEach(((_,T)=>{for(const x of T.Sa)x.va(g)&&(p=!0)})),p&&sg(y)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tj(s,e,n){const i=Ie(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new yt(Te.comparator);d=d.insert(u,hn.newNoDocument(u,Re.min()));const g=ze().add(u),y=new id(Re.min(),new Map,new yt(qe),d,g);await F1(i,y),i.du=i.du.remove(u),i.Au.delete(e),ag(i)}else await ap(i.localStore,e,!1).then((()=>cp(i,e,n))).catch(Bo)}async function nj(s,e){const n=Ie(s),i=e.batch.batchId;try{const o=await dI(n.localStore,e);G1(n,i,null),H1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await kc(n,o)}catch(o){await Bo(o)}}async function sj(s,e,n){const i=Ie(s);try{const o=await(function(d,g){const y=Ie(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return y.mutationQueue.lookupMutationBatch(p,g).next((T=>(Qe(T!==null,37113),_=T.keys(),y.mutationQueue.removeMutationBatch(p,T)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,_,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>y.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);G1(i,e,n),H1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await kc(i,o)}catch(o){await Bo(o)}}function H1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function G1(s,e,n){const i=Ie(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function cp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||$1(s,i)}))}function $1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Yp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),ag(s))}function h0(s,e,n){for(const i of n)i instanceof q1?(s.Ru.addReference(i.key,e),rj(s,i)):i instanceof z1?(ge(ig,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||$1(s,i.key)):Ae(19791,{wu:i})}function rj(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(ge(ig,"New document in limbo: "+n),s.Eu.add(i),ag(s))}function ag(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Te(ot.fromString(e)),i=s.fu.next();s.Au.set(i,new KI(n)),s.du=s.du.insert(n,i),M1(s.remoteStore,new hi(ks(ed(n.path)),i,"TargetPurposeLimboResolution",Wh.ce))}}async function kc(s,e,n){const i=Ie(s),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,y)=>{d.push(i.pu(y,e,n).then((p=>{if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(y.targetId)?.current;i.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Kp.As(y.targetId,p);u.push(_)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(y,p){const _=Ie(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>le.forEach(p,(x=>le.forEach(x.Es,(C=>_.persistence.referenceDelegate.addReference(T,x.targetId,C))).next((()=>le.forEach(x.ds,(C=>_.persistence.referenceDelegate.removeReference(T,x.targetId,C)))))))))}catch(T){if(!Fo(T))throw T;ge(Qp,"Failed to update sequence numbers: "+T)}for(const T of p){const x=T.targetId;if(!T.fromCache){const C=_.Ms.get(x),q=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(q);_.Ms=_.Ms.insert(x,B)}}})(i.localStore,u))}async function ij(s,e){const n=Ie(s);if(!n.currentUser.isEqual(e)){ge(ig,"User change. New user:",e.toKey());const i=await I1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new pe(re.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kc(n,i.Ls)}}function aj(s,e){const n=Ie(s),i=n.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let o=ze();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function K1(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tj.bind(null,e),e.Pu.H_=FI.bind(null,e.eventManager),e.Pu.yu=HI.bind(null,e.eventManager),e}function oj(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sj.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hI(this.persistence,new lI,e.initialUser,this.serializer)}Cu(e){return new C1($p.mi,this.serializer)}Du(e){return new vI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class lj extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Lh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new C1((i=>Lh.mi(i,n)),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>u0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ij.bind(null,this.syncEngine),await qI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BI})()}createDatastore(e){const n=ad(e.databaseInfo.databaseId),i=(function(u){return new bI(u)})(e.databaseInfo);return(function(u,d,g,y){return new NI(u,d,g,y)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,d,g){return new CI(i,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>u0(this.syncEngine,n,0)),(function(){return r0.v()?new r0:new _I})())}createSyncEngine(e,n){return(function(o,u,d,g,y,p,_){const T=new QI(o,u,d,g,y,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ie(n);ge(Ea,"RemoteStore shutting down."),i.Ea.add(5),await Pc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="FirestoreClient";class cj{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{ge(Ti,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Ti,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=eg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function km(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Ti,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await I1(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function d0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await uj(s);ge(Ti,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>a0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>a0(e.remoteStore,o))),s._onlineComponents=e}async function uj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Ti,"Using user provided OfflineComponentProvider");try{await km(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),await km(s,new qh)}}else ge(Ti,"Using default OfflineComponentProvider"),await km(s,new lj(void 0));return s._offlineComponents}async function Q1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Ti,"Using user provided OnlineComponentProvider"),await d0(s,s._uninitializedComponentsProvider._online)):(ge(Ti,"Using default OnlineComponentProvider"),await d0(s,new up))),s._onlineComponents}function hj(s){return Q1(s).then((e=>e.syncEngine))}async function zh(s){const e=await Q1(s),n=e.eventManager;return n.onListen=YI.bind(null,e.syncEngine),n.onUnlisten=ZI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JI.bind(null,e.syncEngine),n}function dj(s,e,n={}){const i=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,y,p){const _=new og({next:x=>{_.Nu(),d.enqueueAndForget((()=>ng(u,T)));const C=x.docs.has(g);!C&&x.fromCache?p.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&y&&y.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),T=new rg(ed(g.path),_,{includeMetadataChanges:!0,qa:!0});return tg(u,T)})(await zh(s),s.asyncQueue,e,n,i))),i.promise}function fj(s,e,n={}){const i=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,y,p){const _=new og({next:x=>{_.Nu(),d.enqueueAndForget((()=>ng(u,T))),x.fromCache&&y.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),T=new rg(g,_,{includeMetadataChanges:!0,qa:!0});return tg(u,T)})(await zh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="firestore.googleapis.com",m0=!0;class p0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X1,this.ssl=m0}else this.host=e.host,this.ssl=e.ssl??m0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GC)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _2;switch(i.type){case"firstParty":return new b2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=f0.get(n);i&&(ge("ComponentProvider","Removing Datastore"),f0.delete(n),i.terminate())})(this),Promise.resolve()}}function mj(s,e,n,i={}){s=Nn(s,cd);const o=Lo(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(G0(`https://${g}`),$0("Firestore",!0)),u.host!==X1&&u.host!==g&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:i};if(!pa(y,d)&&(s._setSettings(y),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=un.MOCK_USER;else{p=Nx(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(T)}s._authCredentials=new E2(new qS(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class Et{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Dc(n,Et._jsonSchema))return new Et(e,i||null,new Te(ot.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Mt("string",Et._jsonSchemaVersion),referencePath:Mt("string")};class gi extends Ai{constructor(e,n,i){super(e,n,ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Te(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function Me(s,e,...n){if(s=Pt(s),zS("collection","path",e),s instanceof cd){const i=ot.fromString(e,...n);return RE(i),new gi(s,null,i)}{if(!(s instanceof Et||s instanceof gi))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ot.fromString(e,...n));return RE(i),new gi(s.firestore,null,i)}}function at(s,e,...n){if(s=Pt(s),arguments.length===1&&(e=Mp.newId()),zS("doc","path",e),s instanceof cd){const i=ot.fromString(e,...n);return NE(i),new Et(s,null,new Te(i))}{if(!(s instanceof Et||s instanceof gi))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ot.fromString(e,...n));return NE(i),new Et(s.firestore,s instanceof gi?s.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="AsyncQueue";class y0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D1(this,"async_queue_retry"),this._c=()=>{const i=Pm();i&&ge(g0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fo(e))throw e;ge(g0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",v0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Jp.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:v0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function v0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class _r extends cd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new y0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}}function pj(s,e){const n=typeof s=="object"?s:X0(),i=typeof s=="string"?s:Dh,o=wp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=xx("firestore");u&&mj(o,...u)}return o}function ud(s){if(s._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||gj(s),s._firestoreClient}function gj(s){const e=s._freezeSettings(),n=(function(o,u,d,g){return new q2(o,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Y1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new cj(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(sn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zn(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dc(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Mt("string",Zn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ls._jsonSchemaVersion}}static fromJSON(e){if(Dc(e,Ls._jsonSchema))return new Ls(e.latitude,e.longitude)}}Ls._jsonSchemaVersion="firestore/geoPoint/1.0",Ls._jsonSchema={type:Mt("string",Ls._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dc(e,Us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Us(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Us._jsonSchemaVersion="firestore/vectorValue/1.0",Us._jsonSchema={type:Mt("string",Us._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=/^__.*__$/;class vj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oc(e,this.data,n,this.fieldTransforms)}}class W1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:s})}}class cg{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z1(this.Ac)&&yj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _j{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ad(e)}Cc(e,n,i,o=!1){return new cg({Ac:e,methodName:n,Dc:i,path:nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(s){const e=s._freezeSettings(),n=ad(s._databaseId);return new _j(s._databaseId,!!e.ignoreUndefinedProperties,n)}function J1(s,e,n,i,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);ug("Data must be an object, but it was:",d,i);const g=eT(i,d);let y,p;if(u.merge)y=new kn(d.fieldMask),p=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const x=hp(e,T,n);if(!d.contains(x))throw new pe(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);nT(_,x)||_.push(x)}y=new kn(_),p=d.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,p=d.fieldTransforms;return new vj(new An(g),y,p)}class fd extends lg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function Ej(s,e,n,i){const o=s.Cc(1,e,n);ug("Data must be an object, but it was:",o,i);const u=[],d=An.empty();wi(i,((y,p)=>{const _=hg(e,y,n);p=Pt(p);const T=o.yc(_);if(p instanceof fd)u.push(_);else{const x=Vc(p,T);x!=null&&(u.push(_),d.set(_,x))}}));const g=new kn(u);return new W1(d,g,o.fieldTransforms)}function Sj(s,e,n,i,o,u){const d=s.Cc(1,e,n),g=[hp(e,i,n)],y=[o];if(u.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)g.push(hp(e,u[x])),y.push(u[x+1]);const p=[],_=An.empty();for(let x=g.length-1;x>=0;--x)if(!nT(p,g[x])){const C=g[x];let q=y[x];q=Pt(q);const B=d.yc(C);if(q instanceof fd)p.push(C);else{const V=Vc(q,B);V!=null&&(p.push(C),_.set(C,V))}}const T=new kn(p);return new W1(_,T,d.fieldTransforms)}function Tj(s,e,n,i=!1){return Vc(n,s.Cc(i?4:3,e))}function Vc(s,e){if(tT(s=Pt(s)))return ug("Unsupported field value:",e,s),eT(s,e);if(s instanceof lg)return(function(i,o){if(!Z1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const g of i){let y=Vc(g,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ct.fromDate(i);return{timestampValue:Vh(o.serializer,u)}}if(i instanceof ct){const u=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vh(o.serializer,u)}}if(i instanceof Ls)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zn)return{bytesValue:S1(o.serializer,i._byteString)};if(i instanceof Et){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Hp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Us)return(function(d,g){return{mapValue:{fields:{[XS]:{stringValue:WS},[Oh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return qp(g.serializer,p)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Xh(i)}`)})(s,e)}function eT(s,e){const n={};return HS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(s,((i,o)=>{const u=Vc(o,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function tT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ct||s instanceof Ls||s instanceof Zn||s instanceof Et||s instanceof lg||s instanceof Us)}function ug(s,e,n){if(!tT(n)||!BS(n)){const i=Xh(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function hp(s,e,n){if((e=Pt(e))instanceof hd)return e._internalPath;if(typeof e=="string")return hg(s,e);throw Bh("Field path arguments must be of type string or ",s,!1,void 0,n)}const bj=new RegExp("[~\\*/\\[\\]]");function hg(s,e,n){if(e.search(bj)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Bh(s,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new pe(re.INVALID_ARGUMENT,g+s+y)}function nT(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wj extends sT{data(){return super.data()}}function md(s,e){return typeof e=="string"?hg(s,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dg{}class iT extends dg{}function ut(s,e,...n){let i=[];e instanceof dg&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((y=>y instanceof fg)).length,g=u.filter((y=>y instanceof pd)).length;if(d>1||d>0&&g>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class pd extends iT{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new pd(e,n,i)}_apply(e){const n=this._parse(e);return aT(e._query,n),new Ai(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=dd(e.firestore);return(function(u,d,g,y,p,_,T){let x;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){S0(T,_);const q=[];for(const B of T)q.push(E0(y,u,B));x={arrayValue:{values:q}}}else x=E0(y,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||S0(T,_),x=Tj(g,d,T,_==="in"||_==="not-in");return Ot.create(p,_,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(s,e,n){const i=e,o=md("where",s);return pd._create(o,i,n)}class fg extends dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:gs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const g=u.getFlattenedFilters();for(const y of g)aT(d,y),d=ep(d,y)})(e._query,n),new Ai(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mg extends iT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(u,d)})(e._query,this._field,this._direction);return new Ai(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new Ho(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function da(s,e="asc"){const n=e,i=md("orderBy",s);return mg._create(i,n)}function E0(s,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i1(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ot.fromString(n));if(!Te.isDocumentKey(i))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kE(s,new Te(i))}if(n instanceof Et)return kE(s,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(n)}.`)}function S0(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aT(s,e){const n=(function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xj{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return wi(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Oh].arrayValue?.values?.map((i=>Ct(i.doubleValue)));return new Us(n)}convertGeoPoint(e){return new Ls(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Jh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const n=vi(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ot.fromString(e);Qe(N1(i),9688,{name:e});const o=new _c(i.get(1),i.get(3)),u=new Te(i.popFirst(5));return o.isEqual(n)||yr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends sT{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(md("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:Mt("string",fa._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Sh extends fa{data(e={}){return super.data(e)}}class ma{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ac(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Sh(this._firestore,this._userDataWriter,i.key,i,new ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const y=new Sh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ac(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new Sh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ac(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),_=d.indexOf(g.doc.key)),{type:Aj(g.type),doc:y,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Aj(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(s){s=Nn(s,Et);const e=Nn(s.firestore,_r);return dj(ud(e),s._key).then((n=>cT(e,s,n)))}ma._jsonSchemaVersion="firestore/querySnapshot/1.0",ma._jsonSchema={type:Mt("string",ma._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class pg extends xj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function nt(s){s=Nn(s,Ai);const e=Nn(s.firestore,_r),n=ud(e),i=new pg(e);return rT(s._query),fj(n,s._query).then((o=>new ma(e,i,s,o)))}function Nj(s,e,n){s=Nn(s,Et);const i=Nn(s.firestore,_r),o=oT(s.converter,e);return gd(i,[J1(dd(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Jn.none())])}function Vn(s,e,n,...i){s=Nn(s,Et);const o=Nn(s.firestore,_r),u=dd(o);let d;return d=typeof(e=Pt(e))=="string"||e instanceof hd?Sj(u,"updateDoc",s._key,e,n,i):Ej(u,"updateDoc",s._key,e),gd(o,[d.toMutation(s._key,Jn.exists(!0))])}function ur(s){return gd(Nn(s.firestore,_r),[new zp(s._key,Jn.none())])}function Er(s,e){const n=Nn(s.firestore,_r),i=at(s),o=oT(s.converter,e);return gd(n,[J1(dd(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Jn.exists(!1))]).then((()=>i))}function lT(s,...e){s=Pt(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||_0(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_0(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,d,g;if(s instanceof Et)d=Nn(s.firestore,_r),g=ed(s._key.path),u={next:y=>{e[i]&&e[i](cT(d,s,y))},error:e[i+1],complete:e[i+2]};else{const y=Nn(s,Ai);d=Nn(y.firestore,_r),g=y._query;const p=new pg(d);u={next:_=>{e[i]&&e[i](new ma(d,p,y,_))},error:e[i+1],complete:e[i+2]},rT(s._query)}return(function(p,_,T,x){const C=new og(x),q=new rg(_,C,T);return p.asyncQueue.enqueueAndForget((async()=>tg(await zh(p),q))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>ng(await zh(p),q)))}})(ud(d),g,o,u)}function gd(s,e){return(function(i,o){const u=new fr;return i.asyncQueue.enqueueAndForget((async()=>ej(await hj(i),o,u))),u.promise})(ud(s),e)}function cT(s,e,n){const i=n.docs.get(e._key),o=new pg(s);return new fa(s,o,e._key,i,new ac(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){zo=o})(Uo),No(new ga("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),g=new _r(new S2(i.getProvider("auth-internal")),new w2(d,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(p.options.projectId,_)})(d,o),d);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),mi(bE,wE,e),mi(bE,wE,"esm2020")})();const So={FIREBASE:{API_KEY:"AIzaSyBnil9YV9LpAVA4GLUjoPoq7PSgq3DYYgk",AUTH_DOMAIN:"animals-adoption-app-v2.firebaseapp.com",PROJECT_ID:"animals-adoption-app-v2",MESSAGING_SENDER_ID:"702758490735",APP_ID:"1:702758490735:web:animals-adoption-app-v2"},APP:{NAME:"Expo2025 - Adopción de Mascotas",VERSION:"1.0.0",ENVIRONMENT:"development"},SECURITY:{MAX_SHELTERS_PER_USER:parseInt("3")||3,MAX_PETS_PER_USER:parseInt("10")||10,MAX_DAILY_CREATIONS:parseInt("5")||5,REQUEST_TIMEOUT:parseInt("10000")||1e4},FEATURES:{ENABLE_STORAGE:!1,ENABLE_ANALYTICS:!1,ENABLE_MESSAGING:!1}},Rj=()=>{const s=["FIREBASE.API_KEY","FIREBASE.AUTH_DOMAIN","FIREBASE.PROJECT_ID","FIREBASE.MESSAGING_SENDER_ID","FIREBASE.APP_ID"],e=[];return s.forEach(n=>{const i=n.split(".");let o=So;for(const u of i)o=o?.[u];o||e.push(n)}),e.length>0&&(console.warn("⚠️ Variables de entorno faltantes:",e),console.warn("💡 Usando valores por defecto. En producción, configura las variables de entorno.")),e.length===0};Rj();const Cj={apiKey:So.FIREBASE.API_KEY,authDomain:So.FIREBASE.AUTH_DOMAIN,projectId:So.FIREBASE.PROJECT_ID,messagingSenderId:So.FIREBASE.MESSAGING_SENDER_ID,appId:So.FIREBASE.APP_ID},gg=Y0(Cj),ve=pj(gg),oc=p2(gg);console.log("Firebase initialized:",gg);console.log("Firestore database:",ve);console.log("Firebase auth:",oc);const gt={NETWORK:"NETWORK_ERROR",AUTH:"AUTH_ERROR",VALIDATION:"VALIDATION_ERROR",PERMISSION:"PERMISSION_ERROR",NOT_FOUND:"NOT_FOUND_ERROR",RATE_LIMIT:"RATE_LIMIT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},T0={"auth/user-not-found":gt.AUTH,"auth/wrong-password":gt.AUTH,"auth/email-already-in-use":gt.AUTH,"auth/weak-password":gt.VALIDATION,"auth/invalid-email":gt.VALIDATION,"permission-denied":gt.PERMISSION,"not-found":gt.NOT_FOUND,unavailable:gt.NETWORK,"deadline-exceeded":gt.NETWORK,"resource-exhausted":gt.RATE_LIMIT},Ij={[gt.NETWORK]:{title:"Error de Conexión",message:"No se pudo conectar al servidor. Verifica tu conexión a internet.",action:"Reintentar"},[gt.AUTH]:{title:"Error de Autenticación",message:"Credenciales incorrectas o sesión expirada.",action:"Iniciar Sesión"},[gt.VALIDATION]:{title:"Datos Inválidos",message:"Por favor, verifica que todos los campos estén correctamente completados.",action:"Corregir"},[gt.PERMISSION]:{title:"Sin Permisos",message:"No tienes permisos para realizar esta acción.",action:"Volver"},[gt.NOT_FOUND]:{title:"No Encontrado",message:"El recurso solicitado no existe.",action:"Volver"},[gt.RATE_LIMIT]:{title:"Demasiadas Solicitudes",message:"Has realizado demasiadas solicitudes. Espera un momento antes de intentar nuevamente.",action:"Esperar"},[gt.UNKNOWN]:{title:"Error Inesperado",message:"Ocurrió un error inesperado. Por favor, intenta nuevamente.",action:"Reintentar"}};class jj{constructor(){this.errorLog=[],this.maxLogSize=100}processError(e){console.error("ErrorHandler: Processing error:",e);let n=gt.UNKNOWN,i=e.message||"Error desconocido";e.code&&T0[e.code]?n=T0[e.code]:e.name==="FirebaseError"?n=gt.NETWORK:e.message?.includes("permission")?n=gt.PERMISSION:e.message?.includes("not found")?n=gt.NOT_FOUND:e.message?.includes("validation")&&(n=gt.VALIDATION);const o={id:Date.now().toString(),type:n,originalError:e,message:i,timestamp:new Date().toISOString(),userFriendly:Ij[n],stack:e.stack};return this.addToLog(o),o}addToLog(e){this.errorLog.unshift(e),this.errorLog.length>this.maxLogSize&&(this.errorLog=this.errorLog.slice(0,this.maxLogSize))}getUserFriendlyMessage(e){return this.processError(e).userFriendly}showErrorNotification(e,n={}){const i=this.processError(e),{title:o,message:u,action:d}=i.userFriendly,g={id:i.id,type:"error",title:o,message:u,action:d,timestamp:i.timestamp,...n};return console.error("Error Notification:",g),window.dispatchEvent(new CustomEvent("error-notification",{detail:g})),g}async retryWithBackoff(e,n=3,i=1e3){let o;for(let u=1;u<=n;u++)try{return await e()}catch(d){if(o=d,u===n)throw d;const g=i*Math.pow(2,u-1);console.log(`Retry attempt ${u}/${n} in ${g}ms`),await new Promise(y=>setTimeout(y,g))}throw o}getErrorStats(){const e={total:this.errorLog.length,byType:{},recent:this.errorLog.slice(0,10)};return this.errorLog.forEach(n=>{e.byType[n.type]=(e.byType[n.type]||0)+1}),e}clearLog(){this.errorLog=[]}}const b0=new jj,uT=(s,e="")=>{console.error(`Firebase Error in ${e}:`,s);const n=b0.processError(s);return b0.showErrorNotification(n,{context:e,showRetry:n.type===gt.NETWORK})},qt={name:{required:!0,minLength:2,maxLength:100,pattern:/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,message:"El nombre debe tener entre 2 y 100 caracteres y solo contener letras"},email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Ingresa un email válido"},phone:{required:!1,pattern:/^[\+]?[1-9][\d]{0,15}$/,message:"Ingresa un número de teléfono válido"},password:{required:!0,minLength:6,maxLength:128,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"La contraseña debe tener al menos 6 caracteres, una mayúscula, una minúscula y un número"},imageUrl:{required:!0,pattern:/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i,message:"Ingresa una URL válida de imagen (jpg, jpeg, png, gif, webp)"},description:{required:!1,maxLength:1e3,message:"La descripción no puede exceder 1000 caracteres"},location:{required:!0,minLength:3,maxLength:200,message:"La ubicación debe tener entre 3 y 200 caracteres"},age:{required:!0,pattern:/^\d+(\s*(años?|meses?|semanas?))?$/i,message:"Ingresa una edad válida (ej: 2 años, 6 meses)"},breed:{required:!1,maxLength:100,message:"La raza no puede exceder 100 caracteres"}};class Dj{constructor(){this.errors={}}validateField(e,n,i=null){const o=i||qt[e];return o?o.required&&(!n||n.trim()==="")?{isValid:!1,message:`${e} es requerido`}:!o.required&&(!n||n.trim()==="")?{isValid:!0,message:""}:o.minLength&&n.length<o.minLength?{isValid:!1,message:`${e} debe tener al menos ${o.minLength} caracteres`}:o.maxLength&&n.length>o.maxLength?{isValid:!1,message:`${e} no puede exceder ${o.maxLength} caracteres`}:o.pattern&&!o.pattern.test(n)?{isValid:!1,message:o.message||`${e} tiene un formato inválido`}:{isValid:!0,message:""}:{isValid:!0,message:""}}validateForm(e,n={}){this.errors={};let i=!0;return Object.keys(e).forEach(o=>{const u=n[o]||qt[o];if(u){const d=this.validateField(o,e[o],u);d.isValid||(this.errors[o]=d.message,i=!1)}}),{isValid:i,errors:this.errors}}validatePetData(e){const n={name:qt.name,type:{required:!0,pattern:/^(perro|gato|otro)$/,message:"El tipo debe ser perro, gato u otro"},age:qt.age,gender:{required:!0,pattern:/^(macho|hembra)$/i,message:"El género debe ser macho o hembra"},location:qt.location,img:qt.imageUrl,description:qt.description,breed:qt.breed};return this.validateForm(e,n)}validateUserData(e){const n={name:qt.name,email:qt.email,phone:qt.phone,address:{required:!1,maxLength:200,message:"La dirección no puede exceder 200 caracteres"}};return this.validateForm(e,n)}validateShelterData(e){const n={name:qt.name,location:qt.location,description:qt.description,phone:qt.phone,email:qt.email};return this.validateForm(e,n)}validateAdoptionRequestData(e){const n={adopterName:qt.name,adopterEmail:qt.email,adopterPhone:qt.phone,message:{required:!1,maxLength:500,message:"El mensaje no puede exceder 500 caracteres"}};return this.validateForm(e,n)}getFieldError(e){return this.errors[e]||""}clearErrors(){this.errors={}}hasErrors(){return Object.keys(this.errors).length>0}}const yg=new Dj,dp={getNotifications:async s=>{try{const e=ut(Me(ve,"notifications"),$e("userId","==",s),da("timestamp","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting notifications:",e),[]}},createNotification:async s=>{try{console.log("notificationService.createNotification called with:",s);const e={...s,timestamp:new Date().toISOString(),read:!1};console.log("Creating notification document:",e);const n=await Er(Me(ve,"notifications"),e);return console.log("✅ Notification created with ID:",n.id),n.id}catch(e){throw console.error("❌ Error creating notification:",e),e}},markAsRead:async s=>{try{await Vn(at(ve,"notifications",s),{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),e}},subscribeToNotifications:(s,e)=>{const n=ut(Me(ve,"notifications"),$e("userId","==",s),da("timestamp","desc"));return lT(n,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllNotifications:async()=>{try{return(await nt(Me(ve,"notifications"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting all notifications:",s),[]}}},dn={getConversations:async s=>{try{const e=ut(Me(ve,"conversations"),$e("participants","array-contains",s),da("lastMessageTime","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting conversations:",e),[]}},createConversation:async(s,e=null)=>{try{const n={participants:s,petId:e,lastMessage:"",lastMessageTime:new Date().toISOString(),createdAt:new Date().toISOString()};return(await Er(Me(ve,"conversations"),n)).id}catch(n){throw console.error("Error creating conversation:",n),n}},getMessages:async s=>{try{const e=ut(Me(ve,"messages"),$e("conversationId","==",s),da("timestamp","asc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting messages:",e),[]}},subscribeToMessages:(s,e)=>{console.log("chatService.subscribeToMessages called for:",s);const n=ut(Me(ve,"messages"),$e("conversationId","==",s),da("timestamp","asc"));return lT(n,i=>{console.log("chatService.subscribeToMessages: received snapshot with",i.docs.length,"messages");const o=i.docs.map(u=>({id:u.id,...u.data()}));console.log("chatService.subscribeToMessages: processed messages:",o),e(o)},i=>{console.error("chatService.subscribeToMessages error:",i)})},sendMessage:async(s,e,n)=>{try{console.log("chatService.sendMessage called:",{conversationId:s,senderId:e,messageText:n});const i=await Po(at(ve,"conversations",s));if(!i.exists())throw new Error("Conversación no encontrada");const o=i.data();if(!o.participants.includes(e))throw new Error("Usuario no autorizado para enviar mensajes en esta conversación");const d=(await Ln.getUserProfile(e))?.name||"Usuario",g={conversationId:s,senderId:e,senderName:d,message:n,timestamp:new Date().toISOString(),read:!1,participants:o.participants},y=await Er(Me(ve,"messages"),g);return console.log("✅ Message sent with ID:",y.id),await Vn(at(ve,"conversations",s),{lastMessage:n,lastMessageTime:new Date().toISOString()}),y.id}catch(i){throw console.error("Error sending message:",i),i}},getOrCreateConversation:async(s,e,n=null)=>{try{console.log("chatService.getOrCreateConversation called:",{userId1:s,userId2:e,petId:n});const i=ut(Me(ve,"conversations"),$e("participants","array-contains",s)),u=(await nt(i)).docs.find(g=>{const y=g.data();return y.participants.includes(e)&&y.participants.includes(s)});if(u)return console.log("✅ Found existing conversation:",u.id),n&&u.data().petId!==n&&(console.log("Updating conversation with new petId:",n),await Vn(at(ve,"conversations",u.id),{petId:n,lastMessageTime:new Date().toISOString()})),u.id;const d=await dn.createConversation([s,e],n);return console.log("✅ Created new conversation:",d),d}catch(i){throw console.error("Error getting or creating conversation:",i),i}},markMessagesAsRead:async(s,e)=>{try{const n=ut(Me(ve,"messages"),$e("conversationId","==",s),$e("senderId","!=",e),$e("read","==",!1)),o=(await nt(n)).docs.map(u=>Vn(u.ref,{read:!0}));await Promise.all(o),console.log(`✅ Marked ${o.length} messages as read`)}catch(n){console.error("Error marking messages as read:",n)}},deleteConversation:async s=>{try{console.log("chatService.deleteConversation called for:",s);const e=ut(Me(ve,"messages"),$e("conversationId","==",s)),n=await nt(e);console.log(`Found ${n.size} messages to delete`);const i=n.docs.map(o=>(console.log("Deleting message:",o.id),ur(o.ref)));return i.length>0&&(await Promise.all(i),console.log("✅ Deleted all messages")),console.log("Deleting conversation:",s),await ur(at(ve,"conversations",s)),console.log("✅ Conversation deleted successfully"),{success:!0,deletedMessages:n.size}}catch(e){throw console.error("Error deleting conversation:",e),e}}},Yt={getPets:async()=>{try{return(await nt(Me(ve,"pets"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting pets:",s),[]}},getPetsByOwner:async s=>{try{console.log("petService.getPetsByOwner called for ownerId:",s);const e=ut(Me(ve,"pets"),$e("ownerId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for owner:",i),i}catch(e){return console.error("Error getting pets by owner:",e),[]}},getPetsByShelter:async s=>{try{console.log("petService.getPetsByShelter called for shelterId:",s);const e=ut(Me(ve,"pets"),$e("shelterId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for shelter:",i),i}catch(e){return console.error("Error getting pets by shelter:",e),[]}},getPetById:async s=>{try{const e=at(ve,"pets",s),n=await Po(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error getting pet:",e),null}},createPet:async s=>{try{if(console.log("petService.createPet called with data:",s),!s.ownerId)throw new Error("Usuario no autenticado");const e=yg.validatePetData(s);if(!e.isValid){const i=Object.values(e.errors).join(", ");throw new Error(`Datos inválidos: ${i}`)}const n=await Er(Me(ve,"pets"),{...s,createdAt:new Date().toISOString(),status:"available",adoptionRequests:0,ownerId:s.ownerId||"",ownerName:s.ownerName||"",shelterId:s.shelterId||null,shelterName:s.shelterName||null});return console.log("✅ Pet created successfully with ID:",n.id),s.shelterId&&await mn.simulateShelterReview(s.shelterId),n.id}catch(e){throw console.error("❌ Error creating pet:",e),console.error("Error details:",{code:e.code,message:e.message,petData:s}),uT(e,"createPet"),e}},updatePet:async(s,e)=>{try{await Vn(at(ve,"pets",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating pet:",n),n}},updatePetStatus:async(s,e)=>{try{console.log("petService.updatePetStatus called for petId:",s,"status:",e),await Vn(at(ve,"pets",s),{status:e,updatedAt:new Date().toISOString()}),console.log("✅ Pet status updated successfully")}catch(n){throw console.error("Error updating pet status:",n),n}},deletePet:async s=>{try{console.log("petService.deletePet called for petId:",s);const e=await Po(at(ve,"pets",s));if(!e.exists())throw new Error("Mascota no encontrada");const i=e.data().name;console.log("Deleting pet:",i),console.log("Deleting adoption requests for pet:",s);const o=ut(Me(ve,"adoptionRequests"),$e("petId","==",s)),d=(await nt(o)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${d.length} adoption requests to delete`);const g=d.map(H=>(console.log("Deleting adoption request:",H.id),ur(at(ve,"adoptionRequests",H.id))));g.length>0&&(await Promise.all(g),console.log("✅ Deleted all adoption requests")),console.log("Deleting notifications for pet:",s);const y=ut(Me(ve,"notifications"),$e("petId","==",s)),_=(await nt(y)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${_.length} notifications to delete`);const T=_.map(H=>(console.log("Deleting notification:",H.id),ur(at(ve,"notifications",H.id))));T.length>0&&(await Promise.all(T),console.log("✅ Deleted all notifications")),console.log("Updating conversations for pet:",s);const x=ut(Me(ve,"conversations"),$e("petId","==",s)),q=(await nt(x)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${q.length} conversations to update`);const B=q.map(H=>(console.log("Updating conversation:",H.id),Er(Me(ve,"messages"),{conversationId:H.id,senderId:"system",message:`⚠️ ${i} ya no está disponible para adopción.`,timestamp:new Date().toISOString(),read:!1,isSystemMessage:!0})));B.length>0&&(await Promise.all(B),console.log("✅ Added system messages to conversations")),console.log("Deleting favorites for pet:",s);const V=ut(Me(ve,"favorites"),$e("petId","==",s)),ae=(await nt(V)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${ae.length} favorites to delete`);const K=ae.map(H=>(console.log("Deleting favorite:",H.id),ur(at(ve,"favorites",H.id))));return K.length>0&&(await Promise.all(K),console.log("✅ Deleted all favorites")),console.log("Deleting pet document:",s),await ur(at(ve,"pets",s)),console.log("✅ Pet deleted successfully"),{success:!0,deleted:{adoptionRequests:d.length,notifications:_.length,conversations:q.length,favorites:ae.length}}}catch(e){throw console.error("Error deleting pet:",e),e}}},Oj={getCategories:async()=>{try{console.log("categoryService.getCategories called");const e=(await nt(Me(ve,"categories"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Categories loaded from Firestore:",e),e}catch(s){return console.error("Error getting categories:",s),[]}},createCategory:async s=>{try{return(await Er(Me(ve,"categories"),{...s,createdAt:new Date().toISOString()})).id}catch(e){throw console.error("Error creating category:",e),e}},updateCategory:async(s,e)=>{try{await Vn(at(ve,"categories",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating category:",n),n}}},ms={getFavorites:async s=>{try{console.log("favoriteService.getFavorites called for userId:",s);const e=ut(Me(ve,"favorites"),$e("userId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Favorites loaded from Firestore:",i),i}catch(e){return console.error("Error getting favorites:",e),[]}},addFavorite:async(s,e)=>{try{if(console.log("favoriteService.addFavorite called for userId:",s,"petId:",e),!s)throw new Error("Usuario no autenticado");const n=await Er(Me(ve,"favorites"),{userId:s,petId:e,createdAt:new Date().toISOString()});return console.log("✅ Favorite added with ID:",n.id),n.id}catch(n){throw console.error("❌ Error adding favorite:",n),console.error("Error details:",{code:n.code,message:n.message,userId:s,petId:e}),n}},removeFavorite:async(s,e)=>{try{console.log("favoriteService.removeFavorite called for userId:",s,"petId:",e);const n=ut(Me(ve,"favorites"),$e("userId","==",s),$e("petId","==",e)),i=await nt(n);if(i.empty)return console.log("No favorite found to remove"),!1;const o=i.docs.map(u=>ur(u.ref));return await Promise.all(o),console.log("Favorite removed successfully"),!0}catch(n){throw console.error("Error removing favorite:",n),n}},isFavorite:async(s,e)=>{try{const n=ut(Me(ve,"favorites"),$e("userId","==",s),$e("petId","==",e));return!(await nt(n)).empty}catch(n){return console.error("Error checking favorite status:",n),!1}}},fn={createAdoptionRequest:async s=>{try{console.log("adoptionRequestService.createAdoptionRequest called:",s);const e=yg.validateAdoptionRequestData(s);if(!e.isValid){const i=Object.values(e.errors).join(", ");throw new Error(`Datos inválidos: ${i}`)}const n=await Er(Me(ve,"adoptionRequests"),{...s,status:"pending",createdAt:new Date().toISOString()});if(console.log("Adoption request created with ID:",n.id),s.userId&&s.ownerId)try{console.log("Creating conversation between:",s.userId,"and",s.ownerId);const i=await dn.getOrCreateConversation(s.userId,s.ownerId,s.petId);console.log("✅ Conversation created with ID:",i),await dn.sendMessage(i,s.userId,`Solicitud de adopción para ${s.pet?.name||"la mascota"} creada. Pueden comunicarse aquí.`)}catch(i){console.error("Error creating conversation:",i)}return n.id}catch(e){throw console.error("Error creating adoption request:",e),e}},getAdoptionRequests:async s=>{try{console.log("adoptionRequestService.getAdoptionRequests called for userId:",s);const e=ut(Me(ve,"adoptionRequests"),$e("userId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests loaded from Firestore:",i),i}catch(e){return console.error("Error getting adoption requests:",e),[]}},getAdoptionRequestsForOwner:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestsForOwner called for ownerId:",s);const e=ut(Me(ve,"adoptionRequests"),$e("ownerId","==",s),da("createdAt","desc")),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests for owner loaded from Firestore:",i),console.log("Number of requests found:",i.length),i}catch(e){return console.error("Error getting adoption requests for owner:",e),[]}},getAdoptionRequestById:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestById called for requestId:",s);const e=at(ve,"adoptionRequests",s),n=await Po(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Adoption request loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting adoption request:",e),null}},updateAdoptionRequestStatus:async(s,e,n="")=>{try{console.log("adoptionRequestService.updateAdoptionRequestStatus called for requestId:",s,"status:",e);const i={status:e,updatedAt:new Date().toISOString()};n&&(i.ownerNotes=n),await Vn(at(ve,"adoptionRequests",s),i),console.log("Adoption request status updated successfully")}catch(i){throw console.error("Error updating adoption request status:",i),i}},approveAdoptionRequest:async(s,e="")=>{try{console.log("adoptionRequestService.approveAdoptionRequest called for requestId:",s);const n=await fn.getAdoptionRequestById(s);if(!n)throw new Error("Solicitud no encontrada");const i=n.petId;console.log("Approving request for petId:",i),await fn.updateAdoptionRequestStatus(s,"approved",e),console.log("✅ Request approved:",s);const o=ut(Me(ve,"adoptionRequests"),$e("petId","==",i),$e("status","==","pending")),d=(await nt(o)).docs.map(y=>({id:y.id,...y.data()}));console.log(`Found ${d.length} pending requests for the same pet`);const g=d.filter(y=>y.id!==s).map(y=>(console.log("Auto-rejecting request:",y.id),fn.updateAdoptionRequestStatus(y.id,"rejected","Esta solicitud fue rechazada automáticamente porque se aprobó otra solicitud para la misma mascota.")));return g.length>0&&(await Promise.all(g),console.log(`✅ Auto-rejected ${g.length} other requests`)),await Yt.updatePetStatus(i,"adopted"),console.log("✅ Pet status updated to adopted"),{approved:s,rejected:d.filter(y=>y.id!==s).map(y=>y.id)}}catch(n){throw console.error("Error approving adoption request:",n),n}},getPendingRequestsForPet:async s=>{try{console.log("adoptionRequestService.getPendingRequestsForPet called for petId:",s);const e=ut(Me(ve,"adoptionRequests"),$e("petId","==",s),$e("status","==","pending"),da("createdAt","desc")),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log(`Found ${i.length} pending requests for pet ${s}`),i}catch(e){return console.error("Error getting pending requests for pet:",e),[]}},rejectAdoptionRequest:async(s,e="")=>{try{await fn.updateAdoptionRequestStatus(s,"rejected",e)}catch(n){throw console.error("Error rejecting adoption request:",n),n}}},mn={getShelters:async()=>{try{console.log("shelterService.getShelters called");const e=(await nt(Me(ve,"shelters"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Shelters loaded from Firestore:",e),e}catch(s){return console.error("Error getting shelters:",s),[]}},getShelterById:async s=>{try{console.log("shelterService.getShelterById called for shelterId:",s);const e=at(ve,"shelters",s),n=await Po(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Shelter loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting shelter:",e),null}},getSheltersByOwner:async s=>{try{console.log("shelterService.getSheltersByOwner called for ownerId:",s);const e=ut(Me(ve,"shelters"),$e("ownerId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Shelters for owner loaded from Firestore:",i),i}catch(e){return console.error("Error getting shelters by owner:",e),[]}},createShelter:async s=>{try{if(console.log("shelterService.createShelter called:",s),!s.ownerId)throw new Error("❌ Error: ownerId es requerido para crear un refugio");const e=yg.validateShelterData(s);if(!e.isValid){const u=Object.values(e.errors).join(", ");throw new Error(`Datos inválidos: ${u}`)}const n=[/<script/i,/javascript:/i,/on\w+\s*=/i,/eval\(/i],i=JSON.stringify(s);for(const u of n)if(u.test(i))throw new Error("❌ Error: Datos contienen contenido sospechoso");const o=await Er(Me(ve,"shelters"),{...s,createdAt:new Date().toISOString(),verified:!1,rating:0,petsCount:0,isPremium:!1,premiumExpiry:null,status:"pending"});return console.log("✅ Shelter created with ID:",o.id),o.id}catch(e){throw console.error("❌ Error creating shelter:",e),console.error("Error details:",{code:e.code,message:e.message,shelterData:s}),uT(e,"createShelter"),e}},updateShelter:async(s,e)=>{try{console.log("shelterService.updateShelter called for shelterId:",s,"updateData:",e),await Vn(at(ve,"shelters",s),{...e,updatedAt:new Date().toISOString()}),console.log("Shelter updated successfully")}catch(n){throw console.error("Error updating shelter:",n),n}},updateShelterStatus:async(s,e)=>{try{console.log("shelterService.updateShelterStatus called for shelterId:",s,"status:",e),await Vn(at(ve,"shelters",s),{status:e,updatedAt:new Date().toISOString()}),console.log("Shelter status updated successfully")}catch(n){throw console.error("Error updating shelter status:",n),n}},activatePremium:async(s,e=1)=>{try{console.log("shelterService.activatePremium called for shelterId:",s,"months:",e);const n=new Date;n.setMonth(n.getMonth()+e),await Vn(at(ve,"shelters",s),{isPremium:!0,premiumExpiry:n.toISOString(),updatedAt:new Date().toISOString()}),console.log("Premium subscription activated successfully")}catch(n){throw console.error("Error activating premium subscription:",n),n}},deactivatePremium:async s=>{try{console.log("shelterService.deactivatePremium called for shelterId:",s),await Vn(at(ve,"shelters",s),{isPremium:!1,premiumExpiry:null,updatedAt:new Date().toISOString()}),console.log("Premium subscription deactivated successfully")}catch(e){throw console.error("Error deactivating premium subscription:",e),e}},isPremiumActive:async s=>{try{const e=await mn.getShelterById(s);return!e||!e.isPremium?!1:e.premiumExpiry?new Date(e.premiumExpiry)>new Date:e.isPremium}catch(e){return console.error("Error checking premium status:",e),!1}},getPremiumShelters:async()=>{try{console.log("shelterService.getPremiumShelters called");const s=ut(Me(ve,"shelters"),$e("isPremium","==",!0)),n=(await nt(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Premium shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting premium shelters:",s),[]}},getRegularShelters:async()=>{try{console.log("shelterService.getRegularShelters called");const s=ut(Me(ve,"shelters"),$e("isPremium","==",!1)),n=(await nt(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Regular shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting regular shelters:",s),[]}},deleteShelter:async s=>{try{if(console.log("shelterService.deleteShelter called for shelterId:",s),!await mn.getShelterById(s))throw new Error("Refugio no encontrado");const n=ut(Me(ve,"pets"),$e("shelterId","==",s)),i=await nt(n);console.log(`Found ${i.size} pets to delete for shelter`);const o=i.docs.map(u=>(console.log("Deleting pet:",u.id),ur(u.ref)));return o.length>0&&(await Promise.all(o),console.log("✅ Deleted all shelter pets")),await ur(at(ve,"shelters",s)),console.log("✅ Shelter deleted successfully"),{success:!0,deletedPets:i.size}}catch(e){throw console.error("Error deleting shelter:",e),e}},simulateShelterReview:async s=>{try{console.log("🔍 Simulando revisión del refugio:",s);const e=await mn.getShelterById(s);if(!e){console.log("❌ Refugio no encontrado para revisión");return}const n=Math.random()*3e3+2e3;await new Promise(d=>setTimeout(d,n));const i=Math.random()>.1,o=i?"active":"pending";await mn.updateShelterStatus(s,o);const u={userId:e.ownerId,type:"shelter_review",title:i?"✅ Refugio Aprobado":"⏳ Refugio en Revisión",message:i?`¡Felicidades! Tu refugio "${e.name}" ha sido aprobado y está activo.`:`Tu refugio "${e.name}" está siendo revisado. Te notificaremos cuando esté listo.`,shelterId:s,shelterName:e.name};await dp.createNotification(u),console.log(`✅ Simulación de revisión completada: ${o}`)}catch(e){console.error("❌ Error en simulación de revisión:",e)}}},Ln={createUserProfile:async(s,e)=>{try{await Nj(at(ve,"users",s),{...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()})}catch(n){throw console.error("Error creating user profile:",n),n}},getUserProfile:async s=>{try{console.log("getUserProfile called with userId:",s);const e=at(ve,"users",s);console.log("Document reference created:",e.path);const n=await Po(e);if(console.log("Document snapshot:",n.exists()?"exists":"does not exist"),n.exists()){const i={id:n.id,...n.data()};return console.log("User profile data:",i),i}return console.log("No user profile found"),null}catch(e){return console.error("Error getting user profile:",e),null}},getAllUsers:async()=>{try{console.log("getAllUsers called");const e=(await nt(Me(ve,"users"))).docs.map(n=>({uid:n.id,...n.data()}));return console.log(`Found ${e.length} users`),e}catch(s){return console.error("Error getting all users:",s),[]}},updateUserProfile:async(s,e)=>{try{await Vn(at(ve,"users",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating user profile:",n),n}}},hT=I.createContext(),Bt=()=>{const s=I.useContext(hT);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Mj=({children:s})=>{const[e,n]=I.useState(null),[i,o]=I.useState(!0);I.useEffect(()=>{console.log("AuthProvider: Setting up auth listener");const p=sR(oc,_=>{console.log("AuthProvider: Auth state changed:",_),_?console.log("AuthProvider: User authenticated:",{uid:_.uid,email:_.email,displayName:_.displayName,emailVerified:_.emailVerified}):console.log("AuthProvider: No user authenticated"),n(_),o(!1)},_=>{console.error("AuthProvider: Auth state error:",_),o(!1)});return()=>{console.log("AuthProvider: Cleaning up auth listener"),p()}},[]);const y={user:e,loading:i,register:async(p,_,T)=>{try{const C=(await WN(oc,p,_)).user;return await eR(C,{displayName:T.name}),console.log("Creating user profile with data:",{name:T.name,email:C.email,phone:T.phone||"",address:T.address||"",isShelter:T.isShelter||!1,shelterInfo:T.shelterInfo||null}),await Ln.createUserProfile(C.uid,{name:T.name,email:C.email,phone:T.phone||"",address:T.address||"",isShelter:T.isShelter||!1,shelterInfo:T.shelterInfo||null}),console.log("User profile created successfully"),C}catch(x){throw console.error("Error registering user:",x),x}},login:async(p,_)=>{try{return(await ZN(oc,p,_)).user}catch(T){throw console.error("Error logging in:",T),T}},logout:async()=>{try{await rR(oc)}catch(p){throw console.error("Error logging out:",p),p}}};return c.jsx(hT.Provider,{value:y,children:s})},Pj=({error:s,onClose:e,onRetry:n,autoClose:i=!0,duration:o=5e3})=>{const[u,d]=I.useState(!1),[g,y]=I.useState(!1);I.useEffect(()=>{if(s&&(d(!0),y(!1),i)){const B=setTimeout(()=>{p()},o);return()=>clearTimeout(B)}},[s,i,o]);const p=()=>{y(!0),setTimeout(()=>{d(!1),e?.()},300)},_=()=>{n?.(),p()};if(!u||!s)return null;const{title:T,message:x,action:C,type:q="error"}=s;return c.jsxs("div",{className:`error-notification ${g?"closing":""} ${q}`,children:[c.jsxs("div",{className:"error-notification-content",children:[c.jsxs("div",{className:"error-notification-icon",children:[q==="error"&&"⚠️",q==="warning"&&"⚠️",q==="success"&&"✅",q==="info"&&"ℹ️"]}),c.jsxs("div",{className:"error-notification-text",children:[c.jsx("h4",{className:"error-notification-title",children:T}),c.jsx("p",{className:"error-notification-message",children:x})]}),c.jsxs("div",{className:"error-notification-actions",children:[C==="Reintentar"&&n&&c.jsx("button",{className:"error-notification-retry-btn",onClick:_,children:"Reintentar"}),c.jsx("button",{className:"error-notification-close-btn",onClick:p,"aria-label":"Cerrar notificación",children:"✕"})]})]}),c.jsx("div",{className:"error-notification-progress",children:c.jsx("div",{className:"error-notification-progress-bar",style:{animationDuration:`${o}ms`,animationPlayState:i?"running":"paused"}})})]})},kj=()=>{const[s,e]=I.useState("dark");return I.useEffect(()=>{const o=localStorage.getItem("theme")||"dark",u="dark";e(u),document.documentElement.setAttribute("data-theme",u),document.body.setAttribute("data-theme",u)},[]),{currentTheme:s,toggleTheme:()=>{const o=s==="dark"?"light":"dark";e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o)},setTheme:o=>{(o==="dark"||o==="light")&&(e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o))},isDark:s==="dark",isLight:s==="light"}};function ke(){const s=St(),e=ts(),{logout:n}=Bt(),i=()=>{s("/")},o=()=>{s("/profile")};return c.jsxs("nav",{className:"navbar",children:[c.jsx("div",{className:`nav-icon ${e.pathname==="/"?"active":""}`,title:"Inicio",onClick:i,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 3.172l8 7.2V20a1 1 0 01-1 1h-5v-6H10v6H5a1 1 0 01-1-1v-9.628l8-7.2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/upload"?"active":""}`,title:"Subir Mascota",onClick:()=>s("/upload"),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/profile"?"active":""}`,title:"Perfil",onClick:o,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]})}function Vj(){const{user:s}=Bt(),e=St(),n=ts(),[i,o]=I.useState([]),[u,d]=I.useState({name:"",address:""}),[g,y]=I.useState(""),[p,_]=I.useState(!0),[T,x]=I.useState([]),[C,q]=I.useState(["all"]),[B,V]=I.useState(!1),[Y,ae]=I.useState([]),[K,H]=I.useState([]),[k,F]=I.useState("user"),{currentTheme:R,toggleTheme:w}=kj(),N=n.state?.category||"";I.useEffect(()=>{const ee=ce=>{B&&!ce.target.closest(".filter-dropdown")&&V(!1)};return document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}},[B]);const j=async()=>{if(s?.uid)try{console.log("Loading favorites for user:",s.uid);const ee=await ms.getFavorites(s.uid),ce=await Promise.all(ee.map(async me=>{const ye=await Yt.getPetById(me.petId);return{...me,pet:ye}}));x(ce.filter(me=>me.pet)),console.log("Favorites loaded:",ce)}catch(ee){console.error("Error loading favorites:",ee)}},M=async()=>{try{console.log("Loading shelters...");const[ee,ce]=await Promise.all([mn.getPremiumShelters(),mn.getRegularShelters()]),me=[...ee,...ce];ae(me),console.log("Shelters loaded:",me)}catch(ee){console.error("Error loading shelters:",ee)}},U=async()=>{if(s?.uid)try{console.log("Loading user shelters...");const ee=await mn.getSheltersByOwner(s.uid);if(H(ee),ee.length>0){const ce=ee.some(me=>me.isPremium);F(ce?"premium":"shelter")}else F("user");console.log("User shelters loaded:",ee),console.log("User type determined:",k)}catch(ee){console.error("Error loading user shelters:",ee)}};I.useEffect(()=>{(async()=>{if(console.log("Home useEffect - user:",s),console.log("Home useEffect - loading:",p),s)try{console.log("User UID:",s.uid),console.log("User displayName:",s.displayName),console.log("User email:",s.email),console.log("Loading profile for user:",s.uid);const ce=await Ln.getUserProfile(s.uid);console.log("Profile loaded:",ce),ce?d({name:ce.name||"",address:ce.address||""}):(console.log("No profile found, using display name:",s.displayName),d({name:s.displayName||"",address:""})),await j(),await M(),await U();const me=await Yt.getPets();if(me.length===0){const ye=[{name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro",status:"available",ownerId:"admin",description:"Bobby es un perro muy cariñoso y juguetón. Le encanta jugar con niños y es muy obediente."},{name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato",status:"available",ownerId:"admin",description:"Luna es una gata muy independiente pero cariñosa. Es perfecta para una familia tranquila."}];for(const ht of ye)await Yt.createPet(ht);o(ye)}else o(me)}catch(ce){console.error("Error loading data:",ce)}finally{_(!1)}else try{const ce=await Yt.getPets();o(ce),await M()}catch(ce){console.error("Error loading pets:",ce),o([{id:1,name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro"},{id:2,name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato"}])}finally{_(!1)}})()},[s,p]);const D=I.useMemo(()=>{const ee=g.trim().toLowerCase();let ce=i;return C.length===0||C.includes("all")?N&&(ce=i.filter(me=>me.type.toLowerCase()===N.toLowerCase())):ce=i.filter(me=>C.some(ye=>{switch(ye){case"favorites":return s?.uid?T.map(Ke=>Ke.petId).includes(me.id):!1;case"shelters":return me.shelterId&&me.shelterName;case"dogs":return me.type.toLowerCase()==="perro";case"cats":return me.type.toLowerCase()==="gato";case"others":return me.type.toLowerCase()!=="perro"&&me.type.toLowerCase()!=="gato";default:return!1}})),ce.filter(me=>!ee||[me.name,me.breed,me.gender,me.age,me.location,me.shelterName].filter(Boolean).some(ht=>String(ht).toLowerCase().includes(ee)))},[i,g,C,N,T,s]),ue=()=>{e("/categories")},De=async(ee,ce)=>{if(ce.stopPropagation(),!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{T.some(ye=>ye.petId===ee.id)?(await ms.removeFavorite(s.uid,ee.id),x(ye=>ye.filter(ht=>ht.petId!==ee.id)),console.log("Pet removed from favorites")):(await ms.addFavorite(s.uid,ee.id),x(ye=>[...ye,{petId:ee.id,userId:s.uid,createdAt:new Date().toISOString()}]),console.log("Pet added to favorites"))}catch(me){console.error("Error updating favorites:",me),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},te=ee=>T.some(ce=>ce.petId===ee.id),he=ee=>{q(ce=>{if(ee==="all")return["all"];if(ce.includes(ee)){const me=ce.filter(ye=>ye!==ee);return me.length===0?["all"]:me}else return[...ce.filter(ye=>ye!=="all"),ee]})},X=()=>C.includes("all")||C.length===0?"Todos los filtros":C.length===1?{favorites:"Favoritas",shelters:"Refugios",dogs:"Perros",cats:"Gatos",others:"Otros"}[C[0]]||"Filtros":`${C.length} filtros`,Ee=ee=>{e("/adopt",{state:{pet:ee}})},P=()=>{e("/tracking")},ie=()=>{e("/shelters")},fe=()=>{e("/users")};return p?c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"18px"},children:"Cargando..."}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("div",{className:"header-top",children:[c.jsxs("div",{className:"greeting-section",children:[c.jsxs("h1",{className:"greeting-title",children:["Hola, ",u.name||"Amigo"," 👋"]}),c.jsx("p",{className:"greeting-subtitle",children:"Encuentra tu compañero perfecto"})]}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"conversations-button",onClick:()=>e("/conversations"),title:"Conversaciones",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})}),c.jsx("div",{className:"user-avatar",onClick:()=>e("/profile"),children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"A").charAt(0).toUpperCase()})})})]})]}),c.jsxs("div",{className:"search-container",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar mascotas...",value:g,onChange:ee=>y(ee.target.value),className:"search-input"}),c.jsx("button",{onClick:w,className:"theme-toggle-btn",title:R==="dark"?"Cambiar a modo claro":"Cambiar a modo oscuro",children:R==="dark"?c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5M17.6859 17.69L18.5 18.5M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsxs("button",{className:"quick-action-btn",onClick:P,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Seguimiento"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:fe,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Usuarios"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:ie,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Refugios"})]})]})]}),c.jsxs("main",{className:"main-content",children:[c.jsx("div",{className:"filter-container",children:c.jsxs("div",{className:"filter-dropdown",children:[c.jsxs("button",{className:"filter-trigger",onClick:()=>V(!B),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"})}),c.jsx("span",{className:"filter-label",children:X()}),c.jsx("svg",{className:`filter-arrow ${B?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),B&&c.jsxs("div",{className:"filter-options",children:[c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("all"),onChange:()=>he("all")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Todas las mascotas"]})]})}),s?.uid&&T.length>0&&c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("favorites"),onChange:()=>he("favorites")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"Favoritas (",T.length,")"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("shelters"),onChange:()=>he("shelters")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),"De refugios"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("dogs"),onChange:()=>he("dogs")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M18.5 2h-13C4.67 2 4 2.67 4 3.5v17c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5zM12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 14H8v-1.5c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2V20z"})}),"Perros"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("cats"),onChange:()=>he("cats")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Gatos"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("others"),onChange:()=>he("others")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Otras mascotas"]})]})})]})]})}),c.jsx("div",{className:"section-header",children:c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:C.includes("all")||C.length===0?"Mascotas disponibles":C.length===1?C.includes("favorites")?"Tus favoritas":C.includes("shelters")?"Mascotas de refugios":C.includes("dogs")?"Perros disponibles":C.includes("cats")?"Gatos disponibles":C.includes("others")?"Otras mascotas":"Mascotas disponibles":"Mascotas filtradas"}),c.jsxs("span",{className:"pets-count",children:[D.length," mascotas"]})]})}),c.jsx("div",{className:`pets-grid ${k==="user"?"single-column":k==="shelter"?"two-columns":"premium-layout"}`,children:D.map((ee,ce)=>c.jsxs("div",{className:`pet-card ${k==="premium"&&ce<2?"featured":""}`,onClick:()=>Ee(ee),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:ee.img,alt:ee.name,className:"pet-image"}),c.jsx("button",{className:`favorite-btn ${te(ee)?"favorited":""}`,onClick:me=>De(ee,me),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:ee.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:ee.name}),c.jsxs("p",{className:"pet-details",children:[ee.breed," • ",ee.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:ee.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",ee.location]})]}),ee.ownerName&&c.jsxs("div",{className:"pet-owner",children:[c.jsx("span",{className:"owner-label",children:"Dueño:"}),c.jsx("span",{className:"owner-name",children:ee.ownerName})]})]})]},ce))}),D.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No se encontraron mascotas"}),c.jsx("p",{children:"Intenta ajustar tu búsqueda o explorar todas las categorías"}),c.jsx("button",{className:"explore-btn",onClick:ue,children:"Explorar categorías"})]}),Y.length>0&&c.jsxs("section",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:showOnlyShelters?"Refugios":"Refugios destacados"}),c.jsxs("span",{className:"pets-count",children:[Y.length," refugios"]})]}),c.jsxs("div",{className:"shelters-controls",children:[c.jsxs("button",{className:`shelters-toggle ${showOnlyShelters?"active":""}`,onClick:()=>setShowOnlyShelters(!showOnlyShelters),children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),showOnlyShelters?"Ver mascotas":"Solo refugios"]}),c.jsx("button",{className:"view-all-shelters",onClick:()=>e("/shelters"),children:"Ver todos"})]})]}),c.jsx("div",{className:"shelters-grid",children:(showOnlyShelters?filteredShelters:Y.slice(0,4)).map((ee,ce)=>c.jsxs("div",{className:`shelter-card ${ee.isPremium?"premium":""}`,onClick:()=>e("/shelters"),children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:ee.image||"/default-shelter.jpg",alt:ee.name,className:"shelter-image"}),ee.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:ee.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",ee.location]}),c.jsx("p",{className:"shelter-description",children:ee.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",ee.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",ee.petsCount||0," mascotas"]})]})]})]},ee.id||ce))})]})]}),c.jsx(ke,{})]})}function Lj(){const s=St(),[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{g()},[]);const g=async()=>{try{console.log("Loading categories from Firebase..."),o(!0);const p=await Oj.getCategories();p.length===0?(console.log("No categories found in Firebase, using default categories"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])):(console.log("Categories loaded from Firebase:",p),n(p)),d(null)}catch(p){console.error("Error loading categories:",p),d("Error al cargar las categorías"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])}finally{o(!1)}},y=p=>{s("/",{state:{category:p}})};return i?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando categorías..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsxs("main",{children:[u&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:u}),c.jsx("button",{onClick:g,children:"Reintentar"})]}),c.jsx("div",{className:"category-cards",children:e.map((p,_)=>c.jsxs("div",{className:"category-card",style:{backgroundColor:p.bgColor,cursor:"pointer"},onClick:()=>y(p.type),children:[c.jsx("img",{src:p.image,alt:p.name}),c.jsx("div",{className:"category-name",children:p.name})]},p.id||_))})]}),c.jsx(ke,{})]})}function Uj(){const{user:s}=Bt(),e=St(),[n,i]=I.useState(""),[o,u]=I.useState({name:"",location:"",breed:"",gender:"",age:"",type:"",description:"",size:"",vaccinated:!1,sterilized:!1,specialNeeds:"",shelterId:"",shelterName:""}),[d,g]=I.useState({name:"",address:""}),[y,p]=I.useState([]),[_,T]=I.useState(!1),[x,C]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s)try{const H=await Ln.getUserProfile(s.uid);H&&(g({name:H.name||"",address:H.address||""}),u(F=>({...F,location:H.address||""})));const k=await mn.getSheltersByOwner(s.uid);p(k)}catch(H){console.error("Error loading data:",H)}})()},[s]);const q=K=>{i(K)},B=(K,H)=>{u(k=>({...k,[K]:H}))},V=K=>{C(K),K||u(H=>({...H,shelterId:"",shelterName:""}))},Y=K=>{const H=y.find(k=>k.id===K);u(k=>({...k,shelterId:K,shelterName:H?H.name:""}))},ae=async()=>{if(!o.name.trim()){alert("El nombre de la mascota es obligatorio");return}if(!o.type){alert("Debes seleccionar el tipo de mascota");return}if(!o.location.trim()){alert("La ubicación es obligatoria");return}if(!n.trim()){alert("Debes proporcionar un enlace de imagen");return}T(!0);try{console.log("Starting pet creation process...");const K={...o,img:n.trim(),status:"available",ownerId:s.uid,ownerName:d.name||s.displayName||"Usuario"};x&&o.shelterId&&(K.shelterId=o.shelterId,K.shelterName=o.shelterName),console.log("Pet data prepared:",K),console.log("Image URL:",n.trim());const H=await Yt.createPet(K);console.log("Pet created successfully with ID:",H),alert("Mascota subida correctamente"),e("/")}catch(K){console.error("Error saving pet:",K),alert("Error al subir la mascota: "+K.message)}finally{T(!1)}};return c.jsxs("div",{className:"upload-container",children:[c.jsxs("div",{className:"upload-header",children:[c.jsxs("h1",{className:"upload-title",children:[c.jsx("span",{className:"upload-icon",children:"🐾"}),"Subir Mascota"]}),c.jsx("p",{className:"upload-subtitle",children:"Comparte los detalles de tu mascota para encontrarle un hogar"})]}),c.jsxs("div",{className:"upload-content",children:[c.jsx("div",{className:"image-upload-section",children:c.jsxs("div",{className:"url-input-section",children:[c.jsxs("div",{className:"input-with-icon",children:[c.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24zm2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.42l-.47.48a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24z"})}),c.jsx("input",{type:"url",placeholder:"Pega un enlace de imagen (URL)",value:n,onChange:K=>q(K.target.value),className:"url-input",required:!0})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐕 Perro"}),c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐱 Gato"}),c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1583337130417-3346a1be7dee?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐰 Conejo"})]})]})}),c.jsxs("div",{className:"form-section",children:[c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Nombre *"}),c.jsx("input",{type:"text",value:o.name,onChange:K=>B("name",K.target.value),placeholder:"Nombre de la mascota",className:"field-input",required:!0})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tipo *"}),c.jsxs("select",{value:o.type,onChange:K=>B("type",K.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona tipo"}),c.jsx("option",{value:"Perro",children:"🐕 Perro"}),c.jsx("option",{value:"Gato",children:"🐱 Gato"}),c.jsx("option",{value:"Conejo",children:"🐰 Conejo"}),c.jsx("option",{value:"Hamster",children:"🐹 Hamster"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Ubicación *"}),c.jsx("input",{type:"text",value:o.location,onChange:K=>B("location",K.target.value),placeholder:"Ciudad, Estado",className:"field-input",required:!0})]}),y.length>0&&c.jsxs("div",{className:"form-field full-width",children:[c.jsx("div",{className:"shelter-toggle",children:c.jsxs("label",{className:"toggle-label",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:K=>V(K.target.checked),className:"toggle-checkbox"}),c.jsx("span",{className:"toggle-text",children:"🏠 Esta mascota pertenece a uno de mis refugios"})]})}),x&&c.jsxs("div",{className:"shelter-select",children:[c.jsx("label",{className:"field-label",children:"Seleccionar Refugio *"}),c.jsxs("select",{value:o.shelterId,onChange:K=>Y(K.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona un refugio"}),y.map(K=>c.jsxs("option",{value:K.id,children:[K.name," - ",K.location]},K.id))]}),o.shelterName&&c.jsxs("p",{className:"shelter-info",children:["✅ Mascota será asociada a: ",c.jsx("strong",{children:o.shelterName})]})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Raza"}),c.jsx("input",{type:"text",value:o.breed,onChange:K=>B("breed",K.target.value),placeholder:"Raza o mezcla",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Género"}),c.jsxs("select",{value:o.gender,onChange:K=>B("gender",K.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Macho",children:"♂️ Macho"}),c.jsx("option",{value:"Hembra",children:"♀️ Hembra"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Edad"}),c.jsx("input",{type:"text",value:o.age,onChange:K=>B("age",K.target.value),placeholder:"Ej: 2 años",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tamaño"}),c.jsxs("select",{value:o.size,onChange:K=>B("size",K.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Pequeño",children:"S Pequeño"}),c.jsx("option",{value:"Mediano",children:"M Mediano"}),c.jsx("option",{value:"Grande",children:"L Grande"})]})]})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Descripción"}),c.jsx("textarea",{value:o.description,onChange:K=>B("description",K.target.value),placeholder:"Cuéntanos sobre su personalidad y comportamiento...",className:"field-textarea",rows:"3"})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Necesidades especiales"}),c.jsx("textarea",{value:o.specialNeeds,onChange:K=>B("specialNeeds",K.target.value),placeholder:"Medicamentos, cuidados especiales, etc.",className:"field-textarea",rows:"2"})]}),c.jsxs("div",{className:"checkbox-section",children:[c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:o.vaccinated,onChange:K=>B("vaccinated",K.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está vacunado"})]}),c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:o.sterilized,onChange:K=>B("sterilized",K.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está esterilizado"})]})]}),c.jsx("button",{className:"submit-button",onClick:ae,disabled:_,children:_?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"loading-spinner"}),"Guardando..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"💾"}),"Guardar mascota"]})})]})]}),c.jsx(ke,{})]})}function qj(){const s=St(),{user:e,logout:n}=Bt(),[i,o]=I.useState("my-pets"),[u,d]=I.useState({name:"",address:"",phone:"",email:""}),[g,y]=I.useState([]),[p,_]=I.useState([]),[T,x]=I.useState([]),[C,q]=I.useState(!0),[B,V]=I.useState(!1),[Y,ae]=I.useState(null),[K,H]=I.useState({name:"",address:"",phone:"",email:""}),[k,F]=I.useState({name:"",breed:"",age:"",gender:"",location:"",description:""});I.useEffect(()=>{e?R():q(!1)},[e]);const R=async()=>{try{console.log("Profile: Starting to load user data for user:",e.uid),q(!0),console.log("Profile: Loading user profile...");const X=await Ln.getUserProfile(e.uid);if(X)console.log("Profile: User profile found:",X),d(X),H(X);else{console.log("Profile: No user profile found, using basic profile");const fe={name:e.displayName||"Usuario",address:"",phone:"",email:e.email||""};d(fe),H(fe)}console.log("Profile: Loading pets for owner:",e.uid);const Ee=await Yt.getPetsByOwner(e.uid);console.log("Profile: Pets data received:",Ee),y(Ee),console.log("Profile: Loading favorites...");const P=await ms.getFavorites(e.uid);console.log("Profile: Favorites data received:",P),_(P),console.log("Profile: Loading shelters...");const ie=await mn.getSheltersByOwner(e.uid);console.log("Profile: Shelters data received:",ie),x(ie)}catch(X){console.error("Profile: Error loading user data:",X)}finally{q(!1)}},w=(X,Ee)=>{H(P=>({...P,[X]:Ee}))},N=async()=>{try{await Ln.updateUserProfile(e.uid,K),d(K),V(!1),alert("Perfil actualizado correctamente")}catch(X){console.error("Error updating profile:",X),alert("Error al actualizar el perfil")}},j=()=>{H(u),V(!1)},M=X=>{X.ownerId===e.uid?(ae(X),F({name:X.name||"",breed:X.breed||"",age:X.age||"",gender:X.gender||"",location:X.location||"",description:X.description||""})):s("/adopt",{state:{pet:X}})},U=async(X,Ee)=>{if(Ee.stopPropagation(),!!e?.uid)try{p.some(ie=>ie.petId===X.id)?(await ms.removeFavorite(e.uid,X.id),_(ie=>ie.filter(fe=>fe.petId!==X.id))):(await ms.addFavorite(e.uid,X.id),_(ie=>[...ie,{petId:X.id,userId:e.uid,createdAt:new Date().toISOString()}]))}catch(P){console.error("Error updating favorites:",P)}},D=async()=>{try{await n(),s("/login")}catch(X){console.error("Error logging out:",X),alert("Error al cerrar sesión")}},ue=(X,Ee)=>{F(P=>({...P,[X]:Ee}))},De=async()=>{if(Y)try{await Yt.updatePet(Y.id,k),alert("Mascota actualizada correctamente"),ae(null),await R()}catch(X){console.error("Error updating pet:",X),alert("Error al actualizar la mascota")}},te=()=>{ae(null),F({name:"",breed:"",age:"",gender:"",location:"",description:""})},he=async()=>{if(!Y)return;const X=`¿Estás seguro de que quieres eliminar a ${Y.name}?

Esto también eliminará:
• Todas las solicitudes de adopción
• Todas las notificaciones relacionadas
• Mensajes en chats (se notificará a los usuarios)
• Favoritos de otros usuarios

Esta acción no se puede deshacer.`;if(window.confirm(X))try{const Ee=await Yt.deletePet(Y.id);let P=`✅ ${Y.name} eliminado correctamente`;Ee.deleted&&(P+=`

Eliminado:
`,Ee.deleted.adoptionRequests>0&&(P+=`• ${Ee.deleted.adoptionRequests} solicitudes de adopción
`),Ee.deleted.notifications>0&&(P+=`• ${Ee.deleted.notifications} notificaciones
`),Ee.deleted.conversations>0&&(P+=`• Mensajes en ${Ee.deleted.conversations} conversaciones
`),Ee.deleted.favorites>0&&(P+=`• ${Ee.deleted.favorites} favoritos
`)),alert(P),ae(null),await R()}catch(Ee){console.error("Error deleting pet:",Ee),alert("Error al eliminar la mascota: "+Ee.message)}};return C?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando perfil..."})]}),c.jsx(ke,{})]}):e?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"profile-header",children:[c.jsxs("div",{className:"profile-info",children:[c.jsx("div",{className:"profile-avatar",children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"U").charAt(0).toUpperCase()})})}),c.jsxs("div",{className:"profile-details",children:[c.jsx("h2",{className:"profile-name",children:u.name||"Usuario"}),c.jsx("p",{className:"profile-email",children:u.email||e.email})]})]}),c.jsx("button",{className:"settings-button",onClick:()=>V(!B),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})})})]}),c.jsxs("main",{className:"profile-main",children:[c.jsxs("div",{className:"profile-tabs",children:[c.jsx("button",{className:`tab-button ${i==="my-pets"?"active":""}`,onClick:()=>o("my-pets"),children:"Tus mascotas"}),c.jsx("button",{className:`tab-button ${i==="favorites"?"active":""}`,onClick:()=>o("favorites"),children:"Favoritas"}),c.jsx("button",{className:`tab-button ${i==="shelters"?"active":""}`,onClick:()=>o("shelters"),children:"Mis Refugios"})]}),c.jsxs("div",{className:"tab-content",children:[i==="my-pets"&&c.jsxs("div",{className:"pets-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Mascotas (",g.length,")"]}),c.jsx("div",{className:"section-actions",children:c.jsxs("button",{className:"refresh-button",onClick:R,disabled:C,children:[C?"🔄":"↻"," Recargar"]})})]}),g.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:g.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>M(X),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.img,alt:X.name,className:"pet-image"}),c.jsx("div",{className:"pet-type-badge",children:X.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.name}),c.jsxs("p",{className:"pet-details",children:[X.breed," • ",X.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.location]})]})]})]},X.id))})]}),i==="favorites"&&c.jsx("div",{className:"favorites-section",children:p.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"❤️"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Las mascotas que marques como favoritas aparecerán aquí"})]}):c.jsx("div",{className:"pets-grid",children:p.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>M(X.pet),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.pet?.img,alt:X.pet?.name,className:"pet-image"}),c.jsx("button",{className:"favorite-btn favorited",onClick:Ee=>U(X.pet,Ee),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:X.pet?.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.pet?.name}),c.jsxs("p",{className:"pet-details",children:[X.pet?.breed," • ",X.pet?.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.pet?.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.pet?.location]})]})]})]},X.id))})}),i==="shelters"&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Refugios (",T.length,")"]}),c.jsxs("div",{className:"section-actions",children:[c.jsx("button",{className:"refresh-button",onClick:R,disabled:C,children:"🔄 Actualizar"}),c.jsx("button",{className:"add-button",onClick:()=>s("/shelter-register"),children:"➕ Registrar Refugio"})]})]}),T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu refugio para comenzar a gestionar mascotas"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):c.jsx("div",{className:"shelters-grid",children:T.map(X=>c.jsxs("div",{className:"shelter-card",children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:X.image||"/default-shelter.jpg",alt:X.name,className:"shelter-image"}),X.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"}),c.jsx("div",{className:"status-badge status-{shelter.status}",children:X.status==="active"?"Activo":X.status==="pending"?"Pendiente":"Inactivo"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:X.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",X.location]}),c.jsx("p",{className:"shelter-description",children:X.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",X.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",X.petsCount||0," mascotas"]})]}),c.jsxs("div",{className:"shelter-actions",children:[c.jsx("button",{className:"manage-button",onClick:()=>s("/shelter-admin"),children:"Gestionar"}),!X.isPremium&&c.jsx("button",{className:"upgrade-button",onClick:()=>s("/shelters"),children:"Actualizar a Premium"})]})]})]},X.id))})]})]}),B&&c.jsx("div",{className:"modal-overlay",onClick:()=>V(!1),children:c.jsxs("div",{className:"settings-modal",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"settings-header",children:[c.jsxs("div",{className:"settings-title",children:[c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})}),c.jsx("h3",{children:"Configuración"})]}),c.jsx("button",{className:"close-btn",onClick:()=>V(!1),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"settings-content",children:[c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Información Personal"}),c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Nombre completo"]}),c.jsx("input",{type:"text",value:K.name,onChange:X=>w("name",X.target.value),placeholder:"Tu nombre completo",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Dirección"]}),c.jsx("input",{type:"text",value:K.address,onChange:X=>w("address",X.target.value),placeholder:"Tu dirección",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),"Teléfono"]}),c.jsx("input",{type:"tel",value:K.phone,onChange:X=>w("phone",X.target.value),placeholder:"Tu número de teléfono",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Email"]}),c.jsx("input",{type:"email",value:K.email,onChange:X=>w("email",X.target.value),placeholder:"Tu email",className:"form-input"})]})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Preferencias de Visualización"}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Mostrar mascotas"]}),c.jsxs("div",{className:"select-wrapper",children:[c.jsxs("select",{value:i,onChange:X=>o(X.target.value),className:"form-select",children:[c.jsx("option",{value:"my-pets",children:"Mis mascotas"}),c.jsx("option",{value:"favorites",children:"Favoritas"}),c.jsx("option",{value:"shelters",children:"Mis refugios"})]}),c.jsx("svg",{className:"select-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]})]})]})]}),c.jsxs("div",{className:"settings-footer",children:[c.jsxs("button",{className:"logout-btn",onClick:D,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Cerrar Sesión"]}),c.jsxs("div",{className:"settings-actions",children:[c.jsx("button",{className:"cancel-btn",onClick:j,children:"Cancelar"}),c.jsxs("button",{className:"save-btn",onClick:N,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Guardar"]})]})]})]})}),Y&&c.jsx("div",{className:"modal-overlay",onClick:te,children:c.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Editar Mascota"}),c.jsx("button",{className:"close-btn",onClick:te,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre"}),c.jsx("input",{type:"text",value:k.name,onChange:X=>ue("name",X.target.value),placeholder:"Nombre de la mascota"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Raza"}),c.jsx("input",{type:"text",value:k.breed,onChange:X=>ue("breed",X.target.value),placeholder:"Raza de la mascota"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Edad"}),c.jsx("input",{type:"text",value:k.age,onChange:X=>ue("age",X.target.value),placeholder:"Edad"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Género"}),c.jsxs("select",{value:k.gender,onChange:X=>ue("gender",X.target.value),children:[c.jsx("option",{value:"",children:"Seleccionar"}),c.jsx("option",{value:"Macho",children:"Macho"}),c.jsx("option",{value:"Hembra",children:"Hembra"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación"}),c.jsx("input",{type:"text",value:k.location,onChange:X=>ue("location",X.target.value),placeholder:"Ubicación"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción"}),c.jsx("textarea",{value:k.description,onChange:X=>ue("description",X.target.value),placeholder:"Descripción de la mascota",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"delete-button",onClick:he,children:"Eliminar Mascota"}),c.jsxs("div",{className:"modal-actions-right",children:[c.jsx("button",{className:"cancel-button",onClick:te,children:"Cancelar"}),c.jsx("button",{className:"save-button",onClick:De,children:"Guardar"})]})]})]})})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu perfil"}),c.jsx("p",{children:"Necesitas iniciar sesión para acceder a tu perfil"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/login"),children:"Iniciar sesión"})]}),c.jsx(ke,{})]})}function zj(){const s=St(),{login:e}=Bt(),[n,i]=I.useState(""),[o,u]=I.useState(""),[d,g]=I.useState(""),[y,p]=I.useState(!1),_=async T=>{T.preventDefault(),p(!0),g("");try{await e(n,o),s("/")}catch(x){g("Error al iniciar sesión. Verifica tus credenciales."),console.error("Login error:",x)}finally{p(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Bienvenido de vuelta!"}),c.jsx("p",{className:"auth-subtitle",children:"Inicia sesión para continuar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:_,className:"auth-form",children:[d&&c.jsx("div",{className:"error-message",children:d}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n,onChange:T=>i(T.target.value),placeholder:"tu@correo.com",required:!0,disabled:y})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:o,onChange:T=>u(T.target.value),placeholder:"••••••••",required:!0,disabled:y})]}),c.jsx("button",{className:`auth-button ${y?"loading":""}`,type:"submit",disabled:y,children:y?"Iniciando sesión...":"Iniciar sesión"}),c.jsxs("div",{className:"auth-link",children:["¿No tienes cuenta? ",c.jsx(Gh,{to:"/register",children:"Crear cuenta"})]})]})}),c.jsx(ke,{})]})}function Bj(){const s=St(),{register:e}=Bt(),[n,i]=I.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",isShelter:!1}),[o,u]=I.useState(""),[d,g]=I.useState(!1),y=(_,T)=>i(x=>({...x,[_]:T})),p=async _=>{if(_.preventDefault(),g(!0),u(""),n.password!==n.confirmPassword){u("Las contraseñas no coinciden"),g(!1);return}if(n.password.length<6){u("La contraseña debe tener al menos 6 caracteres"),g(!1);return}try{await e(n.email,n.password,{name:n.name,phone:n.phone,address:n.address,isShelter:n.isShelter}),s("/")}catch(T){u("Error al crear la cuenta. Intenta de nuevo."),console.error("Register error:",T)}finally{g(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Únete a nosotros!"}),c.jsx("p",{className:"auth-subtitle",children:"Crea tu cuenta para comenzar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:p,className:"auth-form",children:[o&&c.jsx("div",{className:"error-message",children:o}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nombre completo"}),c.jsx("input",{type:"text",className:"form-input",value:n.name,onChange:_=>y("name",_.target.value),placeholder:"Tu nombre completo",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n.email,onChange:_=>y("email",_.target.value),placeholder:"tu@correo.com",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.password,onChange:_=>y("password",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Confirmar contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.confirmPassword,onChange:_=>y("confirmPassword",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Teléfono (opcional)"}),c.jsx("input",{type:"tel",className:"form-input",value:n.phone,onChange:_=>y("phone",_.target.value),placeholder:"+506 0000-0000",disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Dirección (opcional)"}),c.jsx("input",{type:"text",className:"form-input",value:n.address,onChange:_=>y("address",_.target.value),placeholder:"Tu dirección",disabled:d})]}),c.jsxs("div",{className:"checkbox-group",children:[c.jsx("input",{type:"checkbox",className:"checkbox-input",id:"isShelter",checked:n.isShelter,onChange:_=>y("isShelter",_.target.checked),disabled:d}),c.jsx("label",{className:"checkbox-label",htmlFor:"isShelter",children:"¿Eres un refugio de animales?"})]}),c.jsx("button",{className:`auth-button ${d?"loading":""}`,type:"submit",disabled:d,children:d?"Creando cuenta...":"Crear cuenta"}),c.jsxs("div",{className:"auth-link",children:["¿Ya tienes cuenta? ",c.jsx(Gh,{to:"/login",children:"Iniciar sesión"})]})]})}),c.jsx(ke,{})]})}function Fj(){const{user:s}=Bt(),e=ts(),n=St(),{petId:i}=yp(),o=e.state?.pet,[u,d]=I.useState(o),[g,y]=I.useState(!o),[p,_]=I.useState({name:s?.displayName||"",email:s?.email||"",message:""}),[T,x]=I.useState(!1),[C,q]=I.useState(!1),[B,V]=I.useState(!1),[Y,ae]=I.useState(!1);I.useEffect(()=>{if(o){if(d(o),y(!1),H(o.id),k(o.id),s?.uid&&o.ownerId===s.uid){n("/profile");return}}else if(i)K(i);else{n("/");return}},[o,i,n,s]);const K=async N=>{try{console.log("Loading pet from Firebase with ID:",N),y(!0);const j=await Yt.getPetById(N);if(j){if(console.log("Pet loaded from Firebase:",j),s?.uid&&j.ownerId===s.uid){n("/profile");return}d(j),H(j.id),k(j.id)}else console.log("Pet not found in Firebase"),n("/")}catch(j){console.error("Error loading pet from Firebase:",j),n("/")}finally{y(!1)}},H=async N=>{if(s?.uid)try{const M=(await fn.getAdoptionRequests(s.uid)).find(U=>U.petId===N&&(U.status==="pending"||U.status==="approved"));V(!!M)}catch(j){console.error("Error checking existing request:",j)}},k=async N=>{if(s?.uid)try{const j=await ms.isFavorite(s.uid,N);ae(j)}catch(j){console.error("Error checking favorite status:",j)}},F=async()=>{if(!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{Y?(await ms.removeFavorite(s.uid,u.id),ae(!1),console.log("Pet removed from favorites")):(await ms.addFavorite(s.uid,u.id),ae(!0),console.log("Pet added to favorites"))}catch(N){console.error("Error updating favorites:",N),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},R=N=>{_(j=>({...j,[N.target.name]:N.target.value}))},w=async N=>{if(N.preventDefault(),!s?.uid){alert("Debes iniciar sesión para solicitar adopción");return}try{q(!0),console.log("=== STARTING ADOPTION REQUEST ==="),console.log("Pet data:",u),console.log("Form data:",p),console.log("User data:",s),console.log("Pet ownerId:",u.ownerId);const j={userId:s.uid,petId:u.id,ownerId:u.ownerId,pet:u,adopterName:p.name,adopterEmail:p.email,message:p.message||""};console.log("Creating adoption request with data:",j);const M=await fn.createAdoptionRequest(j);if(console.log("✅ Adoption request created with ID:",M),await dp.createNotification({userId:s.uid,type:"adoption",title:"Solicitud de adopción enviada",message:`Tu solicitud para adoptar a ${u.name} ha sido enviada y está siendo revisada.`,adoptionRequestId:M}),u.ownerId){console.log("=== CREATING NOTIFICATION FOR OWNER ==="),console.log("Pet owner ID:",u.ownerId),console.log("Adopter ID:",s.uid),console.log("Pet name:",u.name),console.log("Adopter name:",p.name);try{const U=await dp.createNotification({userId:u.ownerId,type:"adoption_request",title:"Nueva solicitud de adopción",message:`${p.name} quiere adoptar a ${u.name}. Revisa la solicitud en tu perfil.`,adoptionRequestId:M,petId:u.id,adopterId:s.uid});console.log("✅ Notification created successfully for pet owner:",u.ownerId),console.log("Notification ID:",U)}catch(U){console.error("❌ Error creating notification for owner:",U)}}else console.log("❌ No ownerId found for pet:",u);console.log("Notifications created successfully"),x(!0)}catch(j){console.error("Error creating adoption request:",j),alert("Error al procesar la solicitud. Inténtalo de nuevo.")}finally{q(!1)}};return g?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascota..."})]})}),c.jsx(ke,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"adopt-container",children:[c.jsxs("div",{className:"pet-header",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:u.img,alt:u.name,className:"pet-img"}),c.jsx("button",{className:`favorite-button ${Y?"active":""}`,onClick:F,title:Y?"Quitar de favoritos":"Agregar a favoritos",disabled:!s?.uid,children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.name}),c.jsxs("p",{className:"pet-details",children:[u.breed," • ",u.gender," • ",u.age," • ",u.location]})]})]}),T?c.jsxs("div",{className:"adoption-completed",children:[c.jsx("div",{className:"success-icon",children:"✅"}),c.jsx("h2",{children:"¡Solicitud enviada!"}),c.jsx("p",{children:"Tu solicitud de adopción ha sido enviada y está siendo revisada."}),c.jsxs("div",{className:"completion-actions",children:[c.jsx("button",{className:"tracking-button",onClick:()=>n("/tracking"),children:"Ver seguimiento"}),c.jsx("button",{className:"home-button",onClick:()=>n("/"),children:"Volver al inicio"})]})]}):c.jsxs(c.Fragment,{children:[B&&c.jsxs("div",{className:"existing-request-warning",children:[c.jsxs("p",{children:["⚠️ Ya tienes una solicitud pendiente para adoptar a ",u.name]}),c.jsx("p",{children:"Puedes revisar el estado de tu solicitud en tu perfil."})]}),c.jsxs("form",{className:"adopt-form",onSubmit:w,children:[!s?.uid&&c.jsxs("div",{className:"login-required",children:[c.jsx("p",{children:"Debes iniciar sesión para solicitar adopción"}),c.jsx("button",{type:"button",onClick:()=>n("/login"),children:"Iniciar sesión"})]}),c.jsx("label",{children:"Nombre"}),c.jsx("input",{name:"name",value:p.name,onChange:R,placeholder:"Tu nombre",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",name:"email",value:p.email,onChange:R,placeholder:"Tu email",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Mensaje (opcional)"}),c.jsx("textarea",{name:"message",value:p.message,onChange:R,placeholder:"Cuéntanos por qué quieres adoptar esta mascota...",rows:"3",disabled:!s?.uid}),c.jsx("button",{type:"submit",disabled:!s?.uid||C||B,children:C?"Enviando...":B?"Solicitud ya enviada":"Adoptar"})]})]})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la mascota."}),c.jsx("button",{onClick:()=>n("/"),children:"Volver al inicio"})]})}),c.jsx(ke,{})]})}function Hj(){const{user:s}=Bt(),e=St(),[n,i]=I.useState("sent"),[o,u]=I.useState([]),[d,g]=I.useState([]),[y,p]=I.useState(!0),[_,T]=I.useState(null),[x,C]=I.useState(!1);I.useEffect(()=>{s?.uid?q():p(!1)},[s]);const q=async()=>{try{p(!0),T(null);const k=await fn.getAdoptionRequests(s.uid);console.log("Sent requests loaded:",k);const F=await fn.getAdoptionRequestsForOwner(s.uid);console.log("Received requests loaded:",F);const R=await Promise.all(k.map(async N=>{const j=await Yt.getPetById(N.petId),M=await Ln.getUserProfile(N.ownerId);return{...N,pet:j,owner:M}})),w=await Promise.all(F.map(async N=>{const j=await Yt.getPetById(N.petId),M=await Ln.getUserProfile(N.userId);return{...N,pet:j,requester:M}}));u(R),g(w)}catch(k){console.error("Error loading requests:",k),T("Error al cargar solicitudes de adopción")}finally{p(!1)}},B=async k=>{try{C(!0),await fn.approveAdoptionRequest(k),await q(),alert("Solicitud aprobada exitosamente")}catch(F){console.error("Error approving request:",F),alert("Error al aprobar la solicitud")}finally{C(!1)}},V=async k=>{try{C(!0),await fn.rejectAdoptionRequest(k),await q(),alert("Solicitud rechazada")}catch(F){console.error("Error rejecting request:",F),alert("Error al rechazar la solicitud")}finally{C(!1)}},Y=k=>{switch(k){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},ae=k=>{switch(k){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}},K=k=>{e("/adoption-details",{state:{adoption:k}})};if(y)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]})}),c.jsx(ke,{})]});if(!s?.uid)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu seguimiento"}),c.jsx("p",{children:"Necesitas iniciar sesión para gestionar tus solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(ke,{})]});const H=n==="sent"?o:d;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsxs("main",{className:"main-content",children:[_&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:_}),c.jsx("button",{onClick:q,children:"Reintentar"})]}),c.jsxs("div",{className:"tracking-tabs",children:[c.jsxs("button",{className:`tracking-tab ${n==="sent"?"active":""}`,onClick:()=>i("sent"),children:["Mis solicitudes (",o.length,")"]}),c.jsxs("button",{className:`tracking-tab ${n==="received"?"active":""}`,onClick:()=>i("received"),children:["Solicitudes recibidas (",d.length,")"]})]}),c.jsx("div",{className:"tracking-content",children:H.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:n==="sent"?"📤":"📥"}),c.jsx("h3",{children:n==="sent"?"No has enviado solicitudes":"No tienes solicitudes recibidas"}),c.jsx("p",{children:n==="sent"?"Cuando envíes solicitudes de adopción, aparecerán aquí":"Las solicitudes para tus mascotas aparecerán aquí"}),n==="sent"&&c.jsx("button",{className:"browse-button",onClick:()=>e("/"),children:"Ver mascotas disponibles"})]}):c.jsx("div",{className:"requests-list",children:H.map(k=>c.jsxs("div",{className:"request-card",children:[c.jsx("div",{className:"request-image",children:c.jsx("img",{src:k.pet?.img||"/placeholder-pet.jpg",alt:k.pet?.name})}),c.jsxs("div",{className:"request-info",children:[c.jsx("h3",{children:k.pet?.name}),c.jsxs("p",{className:"pet-details",children:[k.pet?.breed," • ",k.pet?.age," • ",k.pet?.location]}),n==="sent"?c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Dueño:"})," ",k.owner?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.owner?.email||"No disponible"]})]}):c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",k.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.requester?.email||"No disponible"]}),k.message&&c.jsxs("p",{children:[c.jsx("strong",{children:"Mensaje:"}),' "',k.message,'"']})]}),c.jsxs("div",{className:"request-status",children:[c.jsx("span",{className:"status-badge",style:{backgroundColor:Y(k.status)},children:ae(k.status)}),c.jsx("span",{className:"date",children:new Date(k.createdAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"request-actions",children:[n==="received"&&k.status==="pending"&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"approve-btn",onClick:F=>{F.stopPropagation(),B(k.id)},disabled:x,children:"Aprobar"}),c.jsx("button",{className:"reject-btn",onClick:F=>{F.stopPropagation(),V(k.id)},disabled:x,children:"Rechazar"})]}),c.jsx("button",{className:"view-btn",onClick:()=>K(k),children:"Ver detalles"})]})]},k.id))})})]}),c.jsx(ke,{})]})}function Gj(){const{user:s}=Bt(),e=ts(),n=St(),{requestId:i}=yp(),o=e.state?.adoption,[u,d]=I.useState(o),[g,y]=I.useState(!o),[p,_]=I.useState([]),[T,x]=I.useState(""),[C,q]=I.useState(null);I.useEffect(()=>{if(o)d(o),y(!1),V(o.id);else if(i)B(i);else{n("/tracking");return}},[o,i,n,s]);const B=async F=>{try{console.log("Loading adoption request from Firebase with ID:",F),y(!0);const R=await fn.getAdoptionRequestById(F);R?(console.log("Adoption request loaded from Firebase:",R),d(R),V(R.id)):(console.log("Adoption request not found in Firebase"),n("/tracking"))}catch(R){console.error("Error loading adoption request from Firebase:",R),n("/tracking")}finally{y(!1)}},V=async F=>{try{const w=(await dn.getConversations(s?.uid)).find(N=>N.petId===u.petId||N.adoptionRequestId===F);if(w){q(w.id);const N=await dn.getMessages(w.id);_(N)}else{const N=await dn.createConversation([s.uid,u.pet.ownerId||"admin"],u.petId,F);q(N),_([])}}catch(R){console.error("Error loading messages:",R);try{const w=JSON.parse(localStorage.getItem(`messages_${F}`)||"[]");_(w)}catch(w){console.error("Error loading messages from localStorage:",w)}}},Y=F=>{switch(F){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},ae=F=>{switch(F){case"pending":return"Pendiente de revisión";case"approved":return"Aprobada - Contacta al dueño";case"rejected":return"Rechazada";case"completed":return"Adopción completada";default:return"Desconocido"}},K=async()=>{try{if(!u||!s?.uid)return;const F=u.userId===s.uid?u.pet.ownerId:u.userId;if(!F){alert("No se pudo identificar al otro usuario");return}const R=await dn.getOrCreateConversation(s.uid,F,u.pet.id);n(`/chat/${R}`)}catch(F){console.error("Error starting chat:",F),alert("Error al iniciar el chat")}},H=async F=>{if(F.preventDefault(),!(!T.trim()||!C))try{const R={content:T,senderId:s.uid,senderName:s.displayName||"Usuario",type:"text"};await dn.sendMessage(C,R),x("");const w=await dn.getMessages(C);_(w)}catch(R){console.error("Error sending message:",R);const w={id:Date.now(),content:T,sender:"user",timestamp:new Date().toISOString()},N=[...p,w];_(N),x("");try{localStorage.setItem(`messages_${u.id}`,JSON.stringify(N))}catch(j){console.error("Error saving message to localStorage",j)}}},k=async F=>{if(u.pet.ownerId!==s?.uid){alert("Solo el dueño de la mascota puede aprobar o rechazar solicitudes de adopción");return}if(window.confirm(`¿Cambiar estado a ${F}?`))try{await fn.updateAdoptionRequestStatus(u.id,F),d(R=>({...R,status:F})),alert("Estado actualizado correctamente")}catch(R){console.error("Error updating status:",R),alert("Error al actualizar el estado")}};return g?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando detalles de adopción..."})]})}),c.jsx(ke,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsxs("main",{className:"adoption-details-main",children:[c.jsxs("div",{className:"pet-section",children:[c.jsx("div",{className:"pet-image-container",children:c.jsx("img",{src:u.pet.img,alt:u.pet.name,className:"pet-detail-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.pet.name}),c.jsx("p",{className:"pet-breed",children:u.pet.breed}),c.jsxs("div",{className:"pet-details",children:[c.jsxs("span",{children:["🐾 ",u.pet.age]}),c.jsxs("span",{children:["⚥ ",u.pet.gender]}),c.jsxs("span",{children:["📍 ",u.pet.location]})]})]})]}),c.jsxs("div",{className:"status-section",children:[c.jsxs("div",{className:"status-header",children:[c.jsx("h3",{children:"Estado de la Adopción"}),c.jsx("span",{className:"status-badge",style:{backgroundColor:Y(u.status)},children:ae(u.status)})]}),u.status==="pending"&&u.pet.ownerId===s?.uid&&c.jsxs("div",{className:"status-actions",children:[c.jsx("button",{className:"action-button approve",onClick:()=>k("approved"),children:"Aprobar Adopción"}),c.jsx("button",{className:"action-button reject",onClick:()=>k("rejected"),children:"Rechazar"})]}),u&&s?.uid&&c.jsx("div",{className:"chat-actions",children:c.jsx("button",{className:"action-button chat",onClick:K,children:"💬 Iniciar Chat"})}),u.status==="approved"&&u.pet.ownerId===s?.uid&&c.jsx("div",{className:"status-actions",children:c.jsx("button",{className:"action-button complete",onClick:()=>k("completed"),children:"Marcar como Completada"})}),u.pet.ownerId!==s?.uid&&c.jsx("div",{className:"status-info",children:c.jsx("p",{children:"Esta solicitud está siendo revisada por el dueño de la mascota."})})]}),c.jsxs("div",{className:"adopter-section",children:[c.jsx("h3",{children:"Información del Adoptante"}),c.jsxs("div",{className:"adopter-info",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Nombre:"}),c.jsx("span",{children:u.adopterName})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Email:"}),c.jsx("span",{children:u.adopterEmail})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Teléfono:"}),c.jsx("span",{children:u.adopterPhone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Fecha de solicitud:"}),c.jsx("span",{children:new Date(u.createdAt).toLocaleDateString()})]})]})]}),c.jsxs("div",{className:"messages-section",children:[c.jsx("h3",{children:"Conversación"}),c.jsx("div",{className:"messages-container",children:p.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):p.map(F=>c.jsxs("div",{className:`message ${F.sender==="user"?"user-message":"other-message"}`,children:[c.jsx("div",{className:"message-content",children:F.content}),c.jsx("div",{className:"message-time",children:new Date(F.timestamp).toLocaleTimeString()})]},F.id))}),c.jsxs("form",{onSubmit:H,className:"message-form",children:[c.jsx("input",{type:"text",value:T,onChange:F=>x(F.target.value),placeholder:"Escribe un mensaje...",className:"message-input"}),c.jsx("button",{type:"submit",className:"send-button",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la solicitud de adopción."}),c.jsx("button",{onClick:()=>n("/tracking"),children:"Volver al seguimiento"})]})}),c.jsx(ke,{})]})}function $j(){const{user:s}=Bt(),{conversationId:e}=yp(),n=St(),[i,o]=I.useState([]),[u,d]=I.useState(""),[g,y]=I.useState(!0),[p,_]=I.useState(!1),[T,x]=I.useState(null),C=I.useRef(null),q=I.useRef(null);I.useEffect(()=>{if(!s?.uid){n("/login");return}return e&&(B(),V()),()=>{q.current&&q.current()}},[e,s]),I.useEffect(()=>{i.length>0&&setTimeout(()=>{ae()},100)},[i]);const B=async()=>{try{y(!0),console.log("Chat: Loading messages for conversation:",e),q.current=dn.subscribeToMessages(e,k=>{console.log("Chat: Received messages:",k),o(k),setTimeout(()=>{ae()},100),dn.markMessagesAsRead(e,s.uid)})}catch(k){console.error("Error loading messages:",k)}finally{y(!1)}},V=async()=>{try{const F=(await dn.getConversations(s.uid)).find(R=>R.id===e);if(F){const R=F.participants.find(w=>w!==s.uid);if(R)try{const w=await Ln.getUserProfile(R);console.log("Chat: Other user loaded:",w),w&&!w.name&&(w.name=w.displayName||w.email?.split("@")[0]||"Usuario"),x(w||{uid:R,name:"Usuario"})}catch(w){console.error("Error loading other user profile:",w),x({uid:R,name:"Usuario"})}}}catch(k){console.error("Error loading other user:",k)}},Y=async k=>{if(k.preventDefault(),!(!u.trim()||p))try{_(!0),console.log("Chat: Sending message:",{conversationId:e,message:u.trim()}),await dn.sendMessage(e,s.uid,u.trim()),console.log("Chat: Message sent successfully"),d(""),setTimeout(()=>{ae()},200)}catch(F){console.error("Error sending message:",F),alert("Error al enviar el mensaje")}finally{_(!1)}},ae=()=>{C.current&&C.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},K=k=>new Date(k).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),H=k=>{const F=new Date(k),R=new Date,w=new Date(R);return w.setDate(w.getDate()-1),F.toDateString()===R.toDateString()?"Hoy":F.toDateString()===w.toDateString()?"Ayer":F.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})};return g?c.jsxs("div",{className:"chat-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"chat-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversación..."})]})]}):c.jsxs("div",{className:"chat-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"chat-header",children:[c.jsx("button",{className:"back-button",onClick:()=>n("/conversations"),children:"← Volver"}),c.jsxs("div",{className:"chat-user-info",children:[c.jsx("div",{className:"user-avatar",children:T?.name?T.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:T?.name||"Usuario"}),c.jsx("p",{children:"En línea"})]})]})]}),c.jsxs("div",{className:"chat-messages",children:[i.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Envía el primero!"})}):i.map((k,F)=>{const R=k.senderId===s.uid,w=k.senderId==="system"||k.isSystemMessage,N=F===0||H(k.timestamp)!==H(i[F-1].timestamp);return w?c.jsxs("div",{children:[N&&c.jsx("div",{className:"message-date",children:H(k.timestamp)}),c.jsx("div",{className:"message system",children:c.jsxs("div",{className:"message-content",children:[c.jsx("p",{children:k.message}),c.jsx("span",{className:"message-time",children:K(k.timestamp)})]})})]},k.id):c.jsxs("div",{children:[N&&c.jsx("div",{className:"message-date",children:H(k.timestamp)}),c.jsxs("div",{className:`message-bubble ${R?"own":"other"}`,children:[!R&&c.jsx("div",{className:"message-sender",children:k.senderName||"Usuario"}),c.jsxs("div",{className:"bubble-content",children:[c.jsx("p",{children:k.message}),c.jsx("span",{className:"bubble-time",children:K(k.timestamp)})]})]})]},k.id)}),c.jsx("div",{ref:C})]}),c.jsxs("form",{className:"chat-input",onSubmit:Y,children:[c.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),placeholder:"Escribe un mensaje...",disabled:p,maxLength:500}),c.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"send-button",children:p?"⏳":"📤"})]})]})}function Kj(){const{user:s}=Bt(),e=St(),[n,i]=I.useState([]),[o,u]=I.useState(!0),[d,g]=I.useState(null),[y,p]=I.useState(!1),[_,T]=I.useState(null),x=I.useRef(0),C=I.useRef(0),q=I.useRef(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}B()},[s]);const B=async()=>{try{u(!0);const w=await dn.getConversations(s.uid),N=await Promise.all(w.map(async j=>{const M=j.participants.find(ue=>ue!==s.uid);let U=null;if(M)try{U=await Ln.getUserProfile(M),console.log("Other user loaded:",U),U&&!U.name&&(U.name=U.displayName||U.email?.split("@")[0]||"Usuario")}catch(ue){console.error("Error loading other user:",ue)}const D=j.petId?await Yt.getPetById(j.petId):null;return{...j,otherUser:U||{uid:M,name:"Usuario"},pet:D}}));i(N)}catch(w){console.error("Error loading conversations:",w)}finally{u(!1)}},V=w=>{const N=new Date(w),M=(new Date-N)/(1e3*60*60);return M<24?N.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):M<168?N.toLocaleDateString("es-ES",{weekday:"short"}):N.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})},Y=w=>{e(`/chat/${w}`)},ae=(w,N)=>{d&&d!==N&&g(null),x.current=w.touches[0].clientX,C.current=w.touches[0].clientX,q.current=!1},K=(w,N)=>{if(!x.current)return;C.current=w.touches[0].clientX;const j=x.current-C.current;Math.abs(j)>10&&(q.current=!0,w.preventDefault())},H=(w,N)=>{if(!q.current)return;x.current-C.current>80?g(N):g(null),x.current=0,C.current=0,q.current=!1},k=(w,N)=>{w.stopPropagation(),T(N),p(!0)},F=async()=>{if(_)try{const w=await dn.deleteConversation(_);i(N=>N.filter(j=>j.id!==_)),p(!1),T(null),g(null),console.log("Conversación eliminada:",_,"Mensajes eliminados:",w.deletedMessages)}catch(w){console.error("Error al eliminar conversación:",w),i(N=>N.filter(j=>j.id!==_)),p(!1),T(null),g(null)}},R=()=>{p(!1),T(null),g(null)};return o?c.jsxs("div",{className:"conversations-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"conversations-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversaciones..."})]})]}):c.jsxs("div",{className:"conversations-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"conversations-header",children:[c.jsx("h1",{children:"Conversaciones"}),c.jsx("p",{children:"Gestiona tus mensajes con otros usuarios"})]}),c.jsx("div",{className:"conversations-list",children:n.length===0?c.jsxs("div",{className:"no-conversations",children:[c.jsx("div",{className:"no-conversations-icon",children:"💬"}),c.jsx("h3",{children:"No tienes conversaciones"}),c.jsx("p",{children:"Las conversaciones aparecerán aquí cuando alguien te envíe un mensaje"})]}):n.map(w=>c.jsxs("div",{className:`conversation-item ${d===w.id?"swiped":""}`,onClick:()=>!q.current&&Y(w.id),onTouchStart:N=>ae(N,w.id),onTouchMove:N=>K(N,w.id),onTouchEnd:N=>H(N,w.id),children:[c.jsx("div",{className:"conversation-avatar",children:w.otherUser.name.charAt(0).toUpperCase()}),c.jsxs("div",{className:"conversation-content",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsx("h3",{children:w.otherUser.name}),c.jsx("span",{className:"conversation-time",children:V(w.lastMessageTime)})]}),w.pet&&c.jsxs("div",{className:"conversation-pet",children:[c.jsx("span",{className:"pet-label",children:"Sobre:"}),c.jsx("span",{className:"pet-name",children:w.pet.name})]}),c.jsx("p",{className:"conversation-preview",children:w.lastMessage||"Sin mensajes"})]}),d===w.id&&c.jsx("div",{className:"conversation-actions",children:c.jsx("button",{className:"delete-button",onClick:N=>k(N,w.id),children:"🗑️"})})]},w.id))}),y&&c.jsx("div",{className:"delete-modal-overlay",children:c.jsxs("div",{className:"delete-modal",children:[c.jsx("div",{className:"delete-modal-header",children:c.jsx("h3",{children:"¿Eliminar conversación?"})}),c.jsx("div",{className:"delete-modal-content",children:c.jsx("p",{children:"Esta acción no se puede deshacer. Se eliminarán todos los mensajes de esta conversación."})}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"cancel-button",onClick:R,children:"Cancelar"}),c.jsx("button",{className:"confirm-delete-button",onClick:F,children:"Eliminar"})]})]})})]})}function Qj(){const{user:s}=Bt(),e=St(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState(""),[y,p]=I.useState(!0),[_,T]=I.useState(null),[x,C]=I.useState([]),[q,B]=I.useState(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}V()},[s]),I.useEffect(()=>{if(d.trim()==="")u(n);else{const H=n.filter(k=>k.name?.toLowerCase().includes(d.toLowerCase())||k.email?.toLowerCase().includes(d.toLowerCase()));u(H)}},[d,n]);const V=async()=>{try{p(!0);const k=(await Ln.getAllUsers()).filter(F=>F.uid!==s.uid);i(k),u(k)}catch(H){console.error("Error loading users:",H)}finally{p(!1)}},Y=async H=>{try{T(H),B(!0);const k=await Yt.getPetsByOwner(H.uid);C(k)}catch(k){console.error("Error loading user pets:",k)}finally{B(!1)}},ae=async H=>{try{const k=await dn.getOrCreateConversation(s.uid,H.uid);e(`/chat/${k}`)}catch(k){console.error("Error creating conversation:",k),alert("Error al iniciar conversación")}},K=()=>{T(null),C([])};return y?c.jsxs("div",{className:"users-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"users-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando usuarios..."})]})]}):c.jsxs("div",{className:"users-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"users-header",children:[c.jsx("h1",{children:"Usuarios"}),c.jsx("p",{children:"Conecta con otros amantes de las mascotas"})]}),c.jsx("div",{className:"search-container",children:c.jsxs("div",{className:"search-input-wrapper",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:d,onChange:H=>g(H.target.value),className:"search-input"})]})}),c.jsx("div",{className:"users-list",children:o.length===0?c.jsxs("div",{className:"no-users",children:[c.jsx("div",{className:"no-users-icon",children:"👥"}),c.jsx("h3",{children:"No se encontraron usuarios"}),c.jsx("p",{children:"Intenta con un término de búsqueda diferente"})]}):o.map(H=>c.jsxs("div",{className:"user-item",onClick:()=>Y(H),children:[c.jsx("div",{className:"user-avatar",children:H.name?H.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-content",children:[c.jsx("h3",{children:H.name||"Usuario"}),c.jsx("p",{children:H.email})]}),c.jsx("div",{className:"user-actions",children:c.jsx("button",{className:"message-button",onClick:k=>{k.stopPropagation(),ae(H)},children:"💬"})})]},H.uid))}),_&&c.jsx("div",{className:"user-profile-modal-overlay",children:c.jsxs("div",{className:"user-profile-modal",children:[c.jsxs("div",{className:"user-profile-header",children:[c.jsx("button",{className:"close-button",onClick:K,children:"✕"}),c.jsxs("div",{className:"user-profile-info",children:[c.jsx("div",{className:"user-profile-avatar",children:_.name?_.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-profile-details",children:[c.jsx("h2",{children:_.name||"Usuario"}),c.jsx("p",{children:_.email})]})]}),c.jsx("button",{className:"send-message-button",onClick:()=>ae(_),children:"💬 Enviar Mensaje"})]}),c.jsxs("div",{className:"user-profile-content",children:[c.jsxs("h3",{children:["Mascotas de ",_.name]}),q?c.jsxs("div",{className:"pets-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascotas..."})]}):x.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("div",{className:"no-pets-icon",children:"🐾"}),c.jsx("p",{children:"Este usuario no tiene mascotas publicadas"})]}):c.jsx("div",{className:"user-pets-grid",children:x.map(H=>c.jsxs("div",{className:"user-pet-card",children:[c.jsx("div",{className:"pet-image-wrapper",children:c.jsx("img",{src:H.img||"/placeholder-pet.jpg",alt:H.name,className:"pet-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h4",{children:H.name}),c.jsxs("p",{children:[H.breed," • ",H.age," años"]}),c.jsxs("p",{className:"pet-location",children:["📍 ",H.location]})]})]},H.id))})]})]})})]})}function Yj(){const{user:s}=Bt(),e=St(),[n,i]=I.useState([]),[o,u]=I.useState(!0);I.useEffect(()=>{s?d():e("/login")},[s,e]);const d=async()=>{try{u(!0);const p=await ms.getFavorites(s.uid),_=await Promise.all(p.map(async T=>{const x=await Yt.getPetById(T.petId);return{...T,pet:x}}));i(_.filter(T=>T.pet)),console.log("Favorites loaded:",_)}catch(p){console.error("Error loading favorites:",p)}finally{u(!1)}},g=async p=>{try{await ms.removeFavorite(s.uid,p),i(_=>_.filter(T=>T.petId!==p)),console.log("Favorite removed")}catch(_){console.error("Error removing favorite:",_),alert("Error al quitar de favoritos")}},y=p=>{e("/adopt",{state:{pet:p}})};return o?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Mis Favoritos"})}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando favoritos..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Favoritos"}),c.jsx("p",{className:"page-subtitle",children:"Mascotas que te han gustado"})]}),c.jsx("main",{className:"main-content",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"💔"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Explora las mascotas disponibles y agrega las que te gusten a tus favoritos"}),c.jsx("button",{className:"primary-button",onClick:()=>e("/"),children:"Explorar Mascotas"})]}):c.jsx("div",{className:"favorites-grid",children:n.map(p=>c.jsxs("div",{className:"favorite-card",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:p.pet.img,alt:p.pet.name,onClick:()=>y(p.pet)}),c.jsx("button",{className:"remove-favorite-btn",onClick:()=>g(p.petId),title:"Quitar de favoritos",children:"❌"})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>y(p.pet),children:p.pet.name}),c.jsxs("p",{className:"pet-details",children:[p.pet.breed," • ",p.pet.gender," • ",p.pet.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",p.pet.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-details-btn",onClick:()=>y(p.pet),children:"Ver Detalles"})})]})]},p.id))})}),c.jsx(ke,{})]})}function Xj(){const{user:s}=Bt(),e=St(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState(!0),[y,p]=I.useState(null);I.useEffect(()=>{s?.uid?(_(),T()):g(!1)},[s]);const _=async()=>{try{console.log("Loading pets for owner:",s.uid),g(!0),p(null);const Y=(await Yt.getPets()).filter(ae=>ae.ownerId===s.uid);console.log("My pets loaded:",Y),i(Y)}catch(V){console.error("Error loading my pets:",V),p("Error al cargar tus mascotas")}finally{g(!1)}},T=async()=>{try{const V=await fn.getAdoptionRequests(s.uid),Y=n.map(K=>K.id),ae=V.filter(K=>Y.includes(K.petId));console.log("Adoption requests for my pets:",ae),u(ae)}catch(V){console.error("Error loading adoption requests:",V)}},x=V=>{e("/adopt",{state:{pet:V}})},C=V=>{e("/adoption-details",{state:{adoption:V}})},q=V=>{switch(V){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},B=V=>{switch(V){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}};return d?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando tus mascotas..."})]})}),c.jsx(ke,{})]}):s?.uid?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsxs("main",{className:"main-content",children:[y&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:y}),c.jsx("button",{onClick:_,children:"Reintentar"})]}),c.jsxs("div",{className:"action-buttons-section",children:[c.jsxs("button",{className:"add-pet-button",onClick:()=>e("/upload"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 5v14m-7-7h14"})}),"Agregar Nueva Mascota"]}),c.jsxs("button",{className:"requests-button",onClick:()=>e("/adoption-requests"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Gestionar Solicitudes"]})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h3",{children:["Mis Mascotas (",n.length,")"]}),n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar a recibir solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:n.map(V=>c.jsxs("div",{className:"pet-card",children:[c.jsxs("div",{className:"pet-image",onClick:()=>x(V),children:[c.jsx("img",{src:V.img,alt:V.name}),c.jsx("div",{className:"pet-status",children:c.jsx("span",{className:`status-badge ${V.status}`,children:V.status==="available"?"Disponible":"Adoptado"})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>x(V),children:V.name}),c.jsxs("p",{className:"pet-details",children:[V.breed," • ",V.gender," • ",V.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",V.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-button",onClick:()=>x(V),children:"Ver Detalles"})})]})]},V.id))})]}),c.jsxs("div",{className:"requests-section",children:[c.jsxs("h3",{children:["Solicitudes de Adopción (",o.length,")"]}),o.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes de adopción"}),c.jsx("p",{children:"Las solicitudes de adopción para tus mascotas aparecerán aquí"})]}):c.jsx("div",{className:"requests-list",children:o.map(V=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsx("h4",{children:V.pet.name}),c.jsx("span",{className:"status-badge",style:{backgroundColor:q(V.status)},children:B(V.status)})]}),c.jsxs("div",{className:"request-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",V.adopterName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",V.adopterEmail]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",V.adopterPhone]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(V.createdAt).toLocaleDateString()]})]}),c.jsx("div",{className:"request-actions",children:c.jsx("button",{className:"view-button",onClick:()=>C(V),children:"Ver Detalles"})})]},V.id))})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para gestionar tus mascotas"}),c.jsx("p",{children:"Necesitas iniciar sesión para ver y gestionar tus mascotas"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(ke,{})]})}function vg({isOpen:s,onClose:e,shelterId:n,shelterName:i,onSuccess:o}){const[u,d]=I.useState(!1),g={name:"Premium",price:"$9.99",duration:"mensual",features:["Mascotas en dos columnas","Mascotas destacadas al inicio","Badge premium visible","Mayor visibilidad en búsquedas"]},y=async()=>{d(!0);try{await new Promise(p=>setTimeout(p,2e3)),await mn.activatePremium(n,1),alert(`¡Felicidades! ${i} ahora tiene suscripción premium.`),o(),e()}catch(p){console.error("Error activating premium:",p),alert("Error al procesar el pago. Inténtalo de nuevo.")}finally{d(!1)}};return s?c.jsx("div",{className:"premium-modal-overlay",children:c.jsxs("div",{className:"premium-modal",children:[c.jsxs("div",{className:"premium-modal-header",children:[c.jsx("h2",{children:"⭐ Actualizar a Premium"}),c.jsx("button",{className:"close-button",onClick:e,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"premium-modal-content",children:[c.jsxs("div",{className:"shelter-info",children:[c.jsx("h3",{children:i}),c.jsx("p",{children:"Mejora la visibilidad de tus mascotas"})]}),c.jsxs("div",{className:"plan-card selected",children:[c.jsx("div",{className:"plan-header",children:c.jsx("h4",{children:g.name})}),c.jsxs("div",{className:"plan-price",children:[c.jsx("span",{className:"price",children:g.price}),c.jsxs("span",{className:"duration",children:["/",g.duration]})]}),c.jsx("ul",{className:"plan-features",children:g.features.map((p,_)=>c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:"✓"}),p]},_))})]}),c.jsx("div",{className:"payment-info",children:c.jsx("p",{className:"payment-note",children:"💳 Simulación de pago - Sin cargo real"})})]}),c.jsxs("div",{className:"premium-modal-footer",children:[c.jsx("button",{className:"cancel-button",onClick:e,disabled:u,children:"Cancelar"}),c.jsx("button",{className:"purchase-button",onClick:y,disabled:u,children:u?"Procesando...":"Activar Premium"})]})]})}):null}function Wj(){const s=St(),{user:e}=Bt(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState([]),[y,p]=I.useState(""),[_,T]=I.useState(null),[x,C]=I.useState(!1),[q,B]=I.useState(null),[V,Y]=I.useState(!0);I.useEffect(()=>{ae()},[]);const ae=async()=>{try{Y(!0),console.log("Loading shelters from Firebase...");const ue=new Promise((X,Ee)=>setTimeout(()=>Ee(new Error("Timeout loading shelters")),1e4)),De=Promise.all([mn.getPremiumShelters(),mn.getRegularShelters()]),[te,he]=await Promise.race([De,ue]);console.log("Premium shelters:",te),console.log("Regular shelters:",he),u(te),g(he),i([...te,...he]),console.log("No se crean refugios de ejemplo automáticamente")}catch(ue){console.error("Error loading shelters:",ue),K()}finally{Y(!1)}},K=()=>{try{const ue=JSON.parse(localStorage.getItem("shelters")||"[]");i(ue),u(ue.filter(De=>De.isPremium)),g(ue.filter(De=>!De.isPremium))}catch(ue){console.error("Error loading from localStorage",ue)}},H=n.filter(ue=>ue.name.toLowerCase().includes(y.toLowerCase())||ue.location.toLowerCase().includes(y.toLowerCase())||ue.description.toLowerCase().includes(y.toLowerCase())),k=o.filter(ue=>ue.name.toLowerCase().includes(y.toLowerCase())||ue.location.toLowerCase().includes(y.toLowerCase())||ue.description.toLowerCase().includes(y.toLowerCase())),F=d.filter(ue=>ue.name.toLowerCase().includes(y.toLowerCase())||ue.location.toLowerCase().includes(y.toLowerCase())||ue.description.toLowerCase().includes(y.toLowerCase())),R=ue=>{T(ue)},w=ue=>{alert(`Contactando con ${ue.name}...
Teléfono: ${ue.phone}
Email: ${ue.email}`)},N=()=>{T(null)},j=()=>{s("/shelter-register")},M=ue=>{B(ue),C(!0)},U=()=>{ae()},D=(ue,De=!1)=>c.jsxs("div",{className:`shelter-card ${De?"premium":""}`,onClick:()=>R(ue),children:[De&&c.jsx("div",{className:"premium-badge",children:c.jsx("span",{children:"⭐ Premium"})}),c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:ue.image,alt:ue.name})}),c.jsxs("div",{className:"shelter-content",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h3",{children:ue.name}),ue.verified&&c.jsx("div",{className:"verified-badge",children:c.jsx("span",{children:"✓"})})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",ue.location]}),c.jsx("p",{className:"shelter-description",children:ue.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsx("div",{className:"rating",children:c.jsxs("span",{children:["⭐ ",ue.rating]})}),c.jsx("div",{className:"pets-count",children:c.jsxs("span",{children:["🐾 ",ue.petsCount," mascotas"]})})]}),!De&&e&&ue.ownerId===e.uid&&c.jsx("button",{className:"upgrade-button",onClick:te=>{te.stopPropagation(),M(ue)},children:"🚀 Actualizar a Premium"})]}),c.jsx("div",{className:"shelter-arrow",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})})]},ue.id);return _?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("button",{className:"back-button",onClick:N,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"section-title",children:"Detalles del Refugio"})]}),c.jsxs("main",{className:"shelter-details-main",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:_.image,alt:_.name})}),c.jsxs("div",{className:"shelter-info",children:[c.jsx("h1",{children:_.name}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("div",{className:"rating",children:[c.jsx("span",{className:"stars",children:"⭐"}),c.jsx("span",{children:_.rating})]}),c.jsxs("div",{className:"pets-count",children:[c.jsx("span",{children:"🐾"}),c.jsxs("span",{children:[_.petsCount," mascotas"]})]}),_.verified&&c.jsxs("div",{className:"verified-badge",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:"Verificado"})]})]}),c.jsx("p",{className:"shelter-description",children:_.description})]})]}),c.jsxs("div",{className:"shelter-sections",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"contact-info",children:[c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📍"}),c.jsx("span",{children:_.address})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📞"}),c.jsx("span",{children:_.phone})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"✉️"}),c.jsx("span",{children:_.email})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🌐"}),c.jsx("span",{children:_.website})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🕒"}),c.jsx("span",{children:_.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:_.services.map((ue,De)=>c.jsxs("div",{className:"service-item",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:ue})]},De))})]}),c.jsxs("div",{className:"actions-section",children:[c.jsx("button",{className:"contact-button",onClick:()=>w(_),children:"Contactar Refugio"}),c.jsx("button",{className:"visit-button",onClick:()=>s("/",{state:{shelter:_}}),children:"Ver Mascotas Disponibles"})]})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"section-title",children:"Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"header-actions"})]})}),c.jsxs("main",{className:"main-content",children:[c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box",children:[c.jsx("span",{className:"search-icon",children:"🔍"}),c.jsx("input",{type:"text",placeholder:"Buscar refugios...",value:y,onChange:ue=>p(ue.target.value)})]}),c.jsx("button",{className:"register-shelter-button",onClick:j,children:"Registrar Refugio"})]}),V?c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]}):c.jsxs("div",{className:"shelters-container",children:[k.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"⭐ Refugios Premium"}),c.jsx("p",{children:"Refugios destacados con mayor visibilidad"})]}),c.jsx("div",{className:"shelters-list premium-grid",children:k.map(ue=>D(ue,!0))})]}),F.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"🏠 Refugios"}),c.jsx("p",{children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"shelters-list regular-grid",children:F.map(ue=>D(ue,!1))})]}),H.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No se encontraron refugios"}),c.jsx("p",{children:"Intenta con otros términos de búsqueda"})]})]})]}),c.jsx(ke,{}),x&&q&&c.jsx(vg,{isOpen:x,onClose:()=>C(!1),shelterId:q.id,shelterName:q.name,onSuccess:U})]})}function Zj(){const s=St(),{user:e}=Bt(),[n,i]=I.useState({name:"",description:"",location:"",address:"",phone:"",email:"",website:"",hours:"",services:[],image:""}),[o,u]=I.useState([]),[d,g]=I.useState(!1),[y,p]=I.useState(""),[_,T]=I.useState(!1),[x,C]=I.useState(null);I.useEffect(()=>{e?q():s("/login")},[e,s]);const q=async()=>{try{const k=await Ln.getUserProfile(e.uid);i(k?F=>({...F,name:k.name?`${k.name} - Refugio`:"Mi Refugio",email:k.email||e.email||"",phone:k.phone||"",address:k.address||"",location:k.address||"Costa Rica"}):F=>({...F,name:e.displayName?`${e.displayName} - Refugio`:"Mi Refugio",email:e.email||"",location:"Costa Rica"}))}catch(k){console.error("Error loading user data:",k)}},B=["Adopción","Esterilización","Vacunación","Atención médica","Rescate","Rehabilitación","Entrenamiento","Hospedaje temporal","Donaciones","Voluntariado"],V=(k,F)=>{i(R=>({...R,[k]:F}))},Y=k=>{u(F=>F.includes(k)?F.filter(R=>R!==k):[...F,k])},ae=async k=>{k.preventDefault(),g(!0),p("");try{const F={...n,services:o,ownerId:e?.uid||"anonymous",ownerName:e?.displayName||e?.email||"Usuario Anónimo",rating:0,petsCount:0,verified:!0,isPremium:!1,status:"active"};console.log("Creating shelter with data:",F);const R=await mn.createShelter(F);console.log("Shelter created with ID:",R),T(!0),C(R)}catch(F){console.error("Error creating shelter",F),p("Error al registrar el refugio. Inténtalo de nuevo.")}finally{g(!1)}},K=()=>{T(!1),C(null),alert(`¡Refugio registrado exitosamente! Ahora tienes acceso premium.

¿Te gustaría subir tu primera mascota?`),s("/upload")},H=()=>{T(!1),C(null),alert(`Refugio registrado exitosamente. Puedes actualizar a premium más tarde desde la página de refugios.

¿Te gustaría subir tu primera mascota?`),s("/upload")};return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>s("/shelters"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Registrar Refugio"}),c.jsx("p",{className:"page-subtitle",children:"Únete a nuestra red de organizaciones de rescate"})]}),c.jsxs("main",{className:"shelter-register-main",children:[!e&&c.jsxs("div",{className:"info-message",children:[c.jsx("span",{children:"ℹ️"}),c.jsx("span",{children:"Puedes registrar un refugio sin iniciar sesión. Si tienes cuenta, inicia sesión para gestionar mejor tu refugio."})]}),y&&c.jsxs("div",{className:"error-message",children:[c.jsx("span",{children:"⚠️"}),c.jsx("span",{children:y})]}),c.jsxs("form",{onSubmit:ae,className:"shelter-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información Básica"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre del Refugio *"}),c.jsx("input",{type:"text",value:n.name,onChange:k=>V("name",k.target.value),placeholder:"Ej: Refugio Animal San José",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción *"}),c.jsx("textarea",{value:n.description,onChange:k=>V("description",k.target.value),placeholder:"Describe tu organización, misión y objetivos...",rows:"4",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Imagen del Refugio"}),c.jsx("input",{type:"url",value:n.image,onChange:k=>V("image",k.target.value),placeholder:"https://ejemplo.com/imagen.jpg"}),n.image&&c.jsx("div",{className:"image-preview",children:c.jsx("img",{src:n.image,alt:"Preview"})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación *"}),c.jsx("input",{type:"text",value:n.location,onChange:k=>V("location",k.target.value),placeholder:"Ej: San José, Costa Rica",required:!0})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Teléfono"}),c.jsx("input",{type:"tel",value:n.phone,onChange:k=>V("phone",k.target.value),placeholder:"+506 2222-3333"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:n.email,onChange:k=>V("email",k.target.value),placeholder:"contacto@refugio.com"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Sitio Web"}),c.jsx("input",{type:"url",value:n.website,onChange:k=>V("website",k.target.value),placeholder:"www.refugio.com"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Horarios de Atención *"}),c.jsx("input",{type:"text",value:n.hours,onChange:k=>V("hours",k.target.value),placeholder:"Lunes a Viernes: 8:00 AM - 6:00 PM",required:!0})]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("p",{className:"section-description",children:"Selecciona todos los servicios que ofrece tu refugio:"}),c.jsx("div",{className:"services-grid",children:B.map(k=>c.jsxs("label",{className:"service-checkbox",children:[c.jsx("input",{type:"checkbox",checked:o.includes(k),onChange:()=>Y(k)}),c.jsx("span",{className:"checkmark"}),c.jsx("span",{className:"service-label",children:k})]},k))})]}),c.jsx("div",{className:"form-section",children:c.jsx("div",{className:"terms-section",children:c.jsxs("label",{className:"terms-checkbox",children:[c.jsx("input",{type:"checkbox",required:!0}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{children:["Acepto los ",c.jsx("a",{href:"#",className:"terms-link",children:"términos y condiciones"})," y la ",c.jsx("a",{href:"#",className:"terms-link",children:"política de privacidad"})]})]})})}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>s("/shelters"),children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-button",disabled:d,children:d?"Registrando...":"Registrar Refugio"})]})]})]}),c.jsx(ke,{}),c.jsx(vg,{isOpen:_,onClose:H,shelterId:x,shelterName:n.name,onSuccess:K})]})}function Jj(){const s=St(),{user:e}=Bt(),[n,i]=I.useState([]),[o,u]=I.useState(null),[d,g]=I.useState([]),[y,p]=I.useState(!0),[_,T]=I.useState(!1),[x,C]=I.useState(null);I.useEffect(()=>{e?q():s("/login")},[e,s]);const q=async()=>{try{p(!0);const F=await mn.getSheltersByOwner(e.uid);i(F),console.log("User shelters loaded:",F)}catch(F){console.error("Error loading shelters:",F)}finally{p(!1)}},B=async F=>{try{const R=await Yt.getPetsByShelter(F);g(R),console.log("Shelter pets loaded:",R)}catch(R){console.error("Error loading shelter pets:",R)}},V=F=>{u(F),B(F.id)},Y=F=>{C(F),T(!0)},ae=()=>{q(),T(!1)},K=async F=>{if(window.confirm("¿Estás seguro de que quieres eliminar este refugio? Esta acción no se puede deshacer."))try{await mn.deleteShelter(F),alert("Refugio eliminado exitosamente"),q(),o&&o.id===F&&(u(null),g([]))}catch(R){console.error("Error deleting shelter:",R),alert("Error al eliminar el refugio")}},H=F=>{const R={pending:{text:"Pendiente",class:"status-pending"},approved:{text:"Aprobado",class:"status-approved"},rejected:{text:"Rechazado",class:"status-rejected"}},w=R[F]||R.pending;return c.jsx("span",{className:`status-badge ${w.class}`,children:w.text})},k=(F,R)=>{if(!F)return null;const w=R&&new Date(R)<new Date;return c.jsx("span",{className:`premium-badge ${w?"expired":"active"}`,children:w?"⚠️ Premium Expirado":"⭐ Premium"})};return y?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Administrar Refugios"})}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Administrar Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus refugios y suscripciones premium"})]}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"admin-layout",children:[c.jsxs("div",{className:"shelters-panel",children:[c.jsxs("div",{className:"panel-header",children:[c.jsxs("h3",{children:["Mis Refugios (",n.length,")"]}),c.jsx("button",{className:"add-shelter-btn",onClick:()=>s("/shelter-register"),children:"+ Nuevo Refugio"})]}),c.jsx("div",{className:"shelters-list",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h4",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu primer refugio para comenzar"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):n.map(F=>c.jsxs("div",{className:`shelter-item ${o?.id===F.id?"selected":""}`,onClick:()=>V(F),children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h4",{children:F.name}),c.jsxs("div",{className:"shelter-badges",children:[H(F.status),k(F.isPremium,F.premiumExpiry)]})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",F.location]}),c.jsx("p",{className:"shelter-description",children:F.description}),c.jsxs("div",{className:"shelter-stats",children:[c.jsxs("span",{children:["🐾 ",F.petsCount||0," mascotas"]}),c.jsxs("span",{children:["⭐ ",F.rating||0," rating"]})]}),c.jsxs("div",{className:"shelter-actions",children:[!F.isPremium&&c.jsx("button",{className:"upgrade-btn",onClick:R=>{R.stopPropagation(),Y(F)},children:"🚀 Premium"}),c.jsx("button",{className:"delete-btn",onClick:R=>{R.stopPropagation(),K(F.id)},children:"🗑️"})]})]},F.id))})]}),c.jsx("div",{className:"details-panel",children:o?c.jsxs("div",{className:"shelter-details",children:[c.jsxs("div",{className:"details-header",children:[c.jsx("h3",{children:o.name}),c.jsxs("div",{className:"details-badges",children:[H(o.status),k(o.isPremium,o.premiumExpiry)]})]}),c.jsxs("div",{className:"details-content",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h4",{children:"Información General"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Ubicación:"}),c.jsx("span",{children:o.location})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Dirección:"}),c.jsx("span",{children:o.address})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Teléfono:"}),c.jsx("span",{children:o.phone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Email:"}),c.jsx("span",{children:o.email})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Sitio Web:"}),c.jsx("span",{children:o.website||"No especificado"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Horarios:"}),c.jsx("span",{children:o.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h4",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:o.services?.map((F,R)=>c.jsx("span",{className:"service-tag",children:F},R))})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h4",{children:["Mascotas del Refugio (",d.length,")"]}),d.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("p",{children:"No hay mascotas registradas en este refugio"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:d.map(F=>c.jsxs("div",{className:"pet-card",children:[c.jsx("img",{src:F.img,alt:F.name}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h5",{children:F.name}),c.jsxs("p",{children:[F.type," • ",F.breed]}),c.jsx("span",{className:`pet-status ${F.status}`,children:F.status==="available"?"Disponible":F.status==="adopted"?"Adoptado":"Reservado"})]})]},F.id))})]})]})]}):c.jsxs("div",{className:"no-selection",children:[c.jsx("div",{className:"no-selection-icon",children:"🏠"}),c.jsx("h3",{children:"Selecciona un refugio"}),c.jsx("p",{children:"Elige un refugio de la lista para ver sus detalles y gestionar sus mascotas"})]})})]})}),c.jsx(ke,{}),_&&x&&c.jsx(vg,{isOpen:_,onClose:()=>T(!1),shelterId:x.id,shelterName:x.name,onSuccess:ae})]})}function e4(){const s=St(),[e,n]=I.useState([]),[i,o]=I.useState("all");I.useEffect(()=>{try{const C=JSON.parse(localStorage.getItem("notifications")||"[]");n(C)}catch(C){console.error("Error loading notifications",C)}},[]);const u=C=>{switch(C){case"adoption":return"🐾";case"message":return"💬";case"system":return"🔔";case"approval":return"✅";case"rejection":return"❌";default:return"🔔"}},d=C=>{switch(C){case"adoption":return"#3b82f6";case"message":return"#10b981";case"system":return"#f59e0b";case"approval":return"#10b981";case"rejection":return"#ef4444";default:return"#6b7280"}},g=C=>{const q=e.map(B=>B.id===C?{...B,read:!0}:B);n(q);try{localStorage.setItem("notifications",JSON.stringify(q))}catch(B){console.error("Error updating notification",B)}},y=()=>{const C=e.map(q=>({...q,read:!0}));n(C);try{localStorage.setItem("notifications",JSON.stringify(C))}catch(q){console.error("Error updating notifications",q)}},p=C=>{const q=e.filter(B=>B.id!==C);n(q);try{localStorage.setItem("notifications",JSON.stringify(q))}catch(B){console.error("Error deleting notification",B)}},_=C=>{switch(g(C.id),C.type){case"adoption":s("/tracking");break;case"message":s("/chat");break;case"approval":case"rejection":s("/tracking");break}},T=e.filter(C=>i==="all"?!0:i==="unread"?!C.read:C.type===i),x=e.filter(C=>!C.read).length;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsx("h2",{className:"logo-text",children:"Notificaciones"}),c.jsx("div",{className:"header-actions",children:x>0&&c.jsx("button",{className:"mark-all-read",onClick:y,children:"Marcar todas como leídas"})})]}),c.jsxs("main",{className:"notifications-main",children:[c.jsxs("div",{className:"filter-tabs",children:[c.jsxs("button",{className:`filter-tab ${i==="all"?"active":""}`,onClick:()=>o("all"),children:["Todas (",e.length,")"]}),c.jsxs("button",{className:`filter-tab ${i==="unread"?"active":""}`,onClick:()=>o("unread"),children:["No leídas (",x,")"]}),c.jsx("button",{className:`filter-tab ${i==="adoption"?"active":""}`,onClick:()=>o("adoption"),children:"Adopciones"}),c.jsx("button",{className:`filter-tab ${i==="message"?"active":""}`,onClick:()=>o("message"),children:"Mensajes"})]}),c.jsx("div",{className:"notifications-list",children:T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔔"}),c.jsx("h3",{children:"No hay notificaciones"}),c.jsx("p",{children:"Cuando tengas notificaciones, aparecerán aquí"})]}):T.map(C=>c.jsxs("div",{className:`notification-item ${C.read?"":"unread"}`,onClick:()=>_(C),children:[c.jsx("div",{className:"notification-icon",children:c.jsx("span",{style:{color:d(C.type)},children:u(C.type)})}),c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-title",children:C.title}),c.jsx("div",{className:"notification-message",children:C.message}),c.jsxs("div",{className:"notification-time",children:[new Date(C.timestamp).toLocaleDateString()," a las"," ",new Date(C.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),c.jsxs("div",{className:"notification-actions",children:[!C.read&&c.jsx("div",{className:"unread-dot"}),c.jsx("button",{className:"delete-button",onClick:q=>{q.stopPropagation(),p(C.id)},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]},C.id))})]}),c.jsx(ke,{})]})}function t4(){const{user:s}=Bt();St();const[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null),[g,y]=I.useState(!1),[p,_]=I.useState(""),[T,x]=I.useState(!1);I.useEffect(()=>{s&&C()},[s]);const C=async()=>{try{o(!0);const H=await fn.getAdoptionRequestsForOwner(s.uid),k=await Promise.all(H.map(async F=>{const R=await Yt.getPetById(F.petId),w=await Ln.getUserProfile(F.userId);return{...F,pet:R,requester:w}}));n(k)}catch(H){console.error("Error loading adoption requests:",H)}finally{o(!1)}},q=async H=>{try{x(!0),await fn.approveAdoptionRequest(H,p),y(!1),_(""),await C(),alert("Solicitud aprobada exitosamente")}catch(k){console.error("Error approving request:",k),alert("Error al aprobar la solicitud")}finally{x(!1)}},B=async H=>{try{x(!0),await fn.rejectAdoptionRequest(H,p),y(!1),_(""),await C(),alert("Solicitud rechazada")}catch(k){console.error("Error rejecting request:",k),alert("Error al rechazar la solicitud")}finally{x(!1)}},V=H=>{d(H),y(!0)},Y=()=>{y(!1),d(null),_("")},ae=H=>{switch(H){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}},K=H=>{switch(H){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";default:return"Desconocido"}};return i?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]}),c.jsx("h1",{className:"page-title",children:"Solicitudes de Adopción"}),c.jsx("p",{className:"page-description",children:"Gestiona las solicitudes de adopción para tus mascotas"})]}),c.jsx("main",{className:"adoption-requests-main",children:e.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes"}),c.jsx("p",{children:"No tienes solicitudes de adopción pendientes"})]}):c.jsx("div",{className:"requests-list",children:e.map(H=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsxs("div",{className:"pet-info",children:[c.jsx("img",{src:H.pet?.img||"/placeholder-pet.jpg",alt:H.pet?.name,className:"pet-image"}),c.jsxs("div",{className:"pet-details",children:[c.jsx("h3",{children:H.pet?.name}),c.jsxs("p",{children:[H.pet?.type," • ",H.pet?.breed]})]})]}),c.jsx("div",{className:"status-badge",style:{backgroundColor:ae(H.status)},children:K(H.status)})]}),c.jsxs("div",{className:"requester-info",children:[c.jsx("h4",{children:"Solicitante:"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nombre:"})," ",H.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",H.requester?.email||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",H.requester?.phone||"No disponible"]})]}),H.message&&c.jsxs("div",{className:"request-message",children:[c.jsx("h4",{children:"Mensaje del solicitante:"}),c.jsxs("p",{children:['"',H.message,'"']})]}),c.jsxs("div",{className:"request-actions",children:[c.jsx("span",{className:"request-date",children:new Date(H.createdAt).toLocaleDateString()}),H.status==="pending"&&c.jsx("div",{className:"action-buttons",children:c.jsx("button",{className:"approve-btn",onClick:()=>V(H),children:"Revisar"})})]})]},H.id))})}),g&&u&&c.jsx("div",{className:"modal-overlay",onClick:Y,children:c.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Gestionar Solicitud"}),c.jsx("button",{className:"close-btn",onClick:Y,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"request-details",children:[c.jsxs("h4",{children:["Mascota: ",u.pet?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",u.requester?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",u.requester?.email]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",u.requester?.phone]}),u.message&&c.jsxs("div",{className:"message-section",children:[c.jsx("h5",{children:"Mensaje:"}),c.jsxs("p",{children:['"',u.message,'"']})]})]}),c.jsxs("div",{className:"notes-section",children:[c.jsx("label",{children:"Notas adicionales (opcional):"}),c.jsx("textarea",{value:p,onChange:H=>_(H.target.value),placeholder:"Agrega cualquier comentario adicional...",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"reject-btn",onClick:()=>B(u.id),disabled:T,children:T?"Procesando...":"Rechazar"}),c.jsx("button",{className:"approve-btn",onClick:()=>q(u.id),disabled:T,children:T?"Procesando...":"Aprobar"})]})]})}),c.jsx(ke,{})]})}const en=({element:s,user:e,loading:n})=>n?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"Cargando..."}):e?s:c.jsx(O0,{to:"/login",replace:!0});function n4(){const{user:s,loading:e}=Bt(),[n,i]=I.useState(null);I.useEffect(()=>{const u=d=>{i(d.detail)};return window.addEventListener("error-notification",u),()=>window.removeEventListener("error-notification",u)},[]);const o=()=>{i(null)};return e?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"Cargando..."}):(console.log("App render - user:",s),console.log("App render - loading:",e),c.jsxs(c.Fragment,{children:[c.jsxs(Lw,{children:[c.jsx(Rt,{path:"/login",element:c.jsx(zj,{})}),c.jsx(Rt,{path:"/register",element:c.jsx(Bj,{})}),c.jsx(Rt,{path:"/",element:c.jsx(en,{element:c.jsx(Vj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/categories",element:c.jsx(en,{element:c.jsx(Lj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/upload",element:c.jsx(en,{element:c.jsx(Uj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/profile",element:c.jsx(en,{element:c.jsx(qj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/adopt",element:c.jsx(en,{element:c.jsx(Fj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/tracking",element:c.jsx(en,{element:c.jsx(Hj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/adoption-details",element:c.jsx(en,{element:c.jsx(Gj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/chat/:conversationId",element:c.jsx(en,{element:c.jsx($j,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/conversations",element:c.jsx(en,{element:c.jsx(Kj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/users",element:c.jsx(en,{element:c.jsx(Qj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/favorites",element:c.jsx(en,{element:c.jsx(Yj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/my-pets",element:c.jsx(en,{element:c.jsx(Xj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/shelters",element:c.jsx(en,{element:c.jsx(Wj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/shelter-register",element:c.jsx(en,{element:c.jsx(Zj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/shelter-admin",element:c.jsx(en,{element:c.jsx(Jj,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/notifications",element:c.jsx(en,{element:c.jsx(e4,{}),user:s,loading:e})}),c.jsx(Rt,{path:"/adoption-requests",element:c.jsx(en,{element:c.jsx(t4,{}),user:s,loading:e})}),c.jsx(Rt,{path:"*",element:c.jsx(O0,{to:"/",replace:!0})})]}),c.jsx(Pj,{error:n,onClose:o})]}))}const s4=localStorage.getItem("theme")||"dark";document.body.setAttribute("data-theme",s4);Qb.createRoot(document.getElementById("root")).render(c.jsx(I.StrictMode,{children:c.jsx(ox,{children:c.jsx(Mj,{children:c.jsx(n4,{})})})}));
