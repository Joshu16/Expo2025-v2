(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var pm={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function PT(){if(R_)return Yl;R_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Yl.Fragment=e,Yl.jsx=n,Yl.jsxs=n,Yl}var C_;function OT(){return C_||(C_=1,pm.exports=PT()),pm.exports}var c=OT(),gm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function MT(){if(I_)return Ie;I_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Q={};function k(M,se,he){this.props=M,this.context=se,this.refs=Q,this.updater=he||C}k.prototype.isReactComponent={},k.prototype.setState=function(M,se){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,se,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function B(){}B.prototype=k.prototype;function ne(M,se,he){this.props=M,this.context=se,this.refs=Q,this.updater=he||C}var ae=ne.prototype=new B;ae.constructor=ne,q(ae,k.prototype),ae.isPureReactComponent=!0;var G=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function R(M,se,he,L,ce,de){return he=de.ref,{$$typeof:s,type:M,key:se,ref:he!==void 0?he:null,props:de}}function b(M,se){return R(M.type,se,void 0,void 0,void 0,M.props)}function x(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function j(M){var se={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(he){return se[he]})}var O=/\/+/g;function z(M,se){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):se.toString(36)}function D(){}function qe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(se){M.status==="pending"&&(M.status="fulfilled",M.value=se)},function(se){M.status==="pending"&&(M.status="rejected",M.reason=se)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ze(M,se,he,L,ce){var de=typeof M;(de==="undefined"||de==="boolean")&&(M=null);var pe=!1;if(M===null)pe=!0;else switch(de){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(M.$$typeof){case s:case e:pe=!0;break;case _:return pe=M._init,ze(pe(M._payload),se,he,L,ce)}}if(pe)return ce=ce(M),pe=L===""?"."+z(M,0):L,G(ce)?(he="",pe!=null&&(he=pe.replace(O,"$&/")+"/"),ze(ce,se,he,"",function(es){return es})):ce!=null&&(x(ce)&&(ce=b(ce,he+(ce.key==null||M&&M.key===ce.key?"":(""+ce.key).replace(O,"$&/")+"/")+pe)),se.push(ce)),1;pe=0;var ct=L===""?".":L+":";if(G(M))for(var Ge=0;Ge<M.length;Ge++)L=M[Ge],de=ct+z(L,Ge),pe+=ze(L,se,he,de,ce);else if(Ge=A(M),typeof Ge=="function")for(M=Ge.call(M),Ge=0;!(L=M.next()).done;)L=L.value,de=ct+z(L,Ge++),pe+=ze(L,se,he,de,ce);else if(de==="object"){if(typeof M.then=="function")return ze(qe(M),se,he,L,ce);throw se=String(M),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return pe}function ee(M,se,he){if(M==null)return M;var L=[],ce=0;return ze(M,L,"","",function(de){return se.call(he,de,ce++)}),L}function fe(M){if(M._status===-1){var se=M._result;se=se(),se.then(function(he){(M._status===0||M._status===-1)&&(M._status=1,M._result=he)},function(he){(M._status===0||M._status===-1)&&(M._status=2,M._result=he)}),M._status===-1&&(M._status=0,M._result=se)}if(M._status===1)return M._result.default;throw M._result}var X=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function _e(){}return Ie.Children={map:ee,forEach:function(M,se,he){ee(M,function(){se.apply(this,arguments)},he)},count:function(M){var se=0;return ee(M,function(){se++}),se},toArray:function(M){return ee(M,function(se){return se})||[]},only:function(M){if(!x(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ie.Component=k,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=ne,Ie.StrictMode=i,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(M){return F.H.useMemoCache(M)}},Ie.cache=function(M){return function(){return M.apply(null,arguments)}},Ie.cloneElement=function(M,se,he){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var L=q({},M.props),ce=M.key,de=void 0;if(se!=null)for(pe in se.ref!==void 0&&(de=void 0),se.key!==void 0&&(ce=""+se.key),se)!V.call(se,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&se.ref===void 0||(L[pe]=se[pe]);var pe=arguments.length-2;if(pe===1)L.children=he;else if(1<pe){for(var ct=Array(pe),Ge=0;Ge<pe;Ge++)ct[Ge]=arguments[Ge+2];L.children=ct}return R(M.type,ce,void 0,void 0,de,L)},Ie.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Ie.createElement=function(M,se,he){var L,ce={},de=null;if(se!=null)for(L in se.key!==void 0&&(de=""+se.key),se)V.call(se,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(ce[L]=se[L]);var pe=arguments.length-2;if(pe===1)ce.children=he;else if(1<pe){for(var ct=Array(pe),Ge=0;Ge<pe;Ge++)ct[Ge]=arguments[Ge+2];ce.children=ct}if(M&&M.defaultProps)for(L in pe=M.defaultProps,pe)ce[L]===void 0&&(ce[L]=pe[L]);return R(M,de,void 0,void 0,null,ce)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(M){return{$$typeof:g,render:M}},Ie.isValidElement=x,Ie.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:fe}},Ie.memo=function(M,se){return{$$typeof:y,type:M,compare:se===void 0?null:se}},Ie.startTransition=function(M){var se=F.T,he={};F.T=he;try{var L=M(),ce=F.S;ce!==null&&ce(he,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(_e,X)}catch(de){X(de)}finally{F.T=se}},Ie.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ie.use=function(M){return F.H.use(M)},Ie.useActionState=function(M,se,he){return F.H.useActionState(M,se,he)},Ie.useCallback=function(M,se){return F.H.useCallback(M,se)},Ie.useContext=function(M){return F.H.useContext(M)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(M,se){return F.H.useDeferredValue(M,se)},Ie.useEffect=function(M,se,he){var L=F.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return L.useEffect(M,se)},Ie.useId=function(){return F.H.useId()},Ie.useImperativeHandle=function(M,se,he){return F.H.useImperativeHandle(M,se,he)},Ie.useInsertionEffect=function(M,se){return F.H.useInsertionEffect(M,se)},Ie.useLayoutEffect=function(M,se){return F.H.useLayoutEffect(M,se)},Ie.useMemo=function(M,se){return F.H.useMemo(M,se)},Ie.useOptimistic=function(M,se){return F.H.useOptimistic(M,se)},Ie.useReducer=function(M,se,he){return F.H.useReducer(M,se,he)},Ie.useRef=function(M){return F.H.useRef(M)},Ie.useState=function(M){return F.H.useState(M)},Ie.useSyncExternalStore=function(M,se,he){return F.H.useSyncExternalStore(M,se,he)},Ie.useTransition=function(){return F.H.useTransition()},Ie.version="19.1.1",Ie}var j_;function hp(){return j_||(j_=1,gm.exports=MT()),gm.exports}var I=hp(),ym={exports:{}},Xl={},vm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function kT(){return D_||(D_=1,(function(s){function e(ee,fe){var X=ee.length;ee.push(fe);e:for(;0<X;){var _e=X-1>>>1,M=ee[_e];if(0<o(M,fe))ee[_e]=fe,ee[X]=M,X=_e;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var fe=ee[0],X=ee.pop();if(X!==fe){ee[0]=X;e:for(var _e=0,M=ee.length,se=M>>>1;_e<se;){var he=2*(_e+1)-1,L=ee[he],ce=he+1,de=ee[ce];if(0>o(L,X))ce<M&&0>o(de,L)?(ee[_e]=de,ee[ce]=X,_e=ce):(ee[_e]=L,ee[he]=X,_e=he);else if(ce<M&&0>o(de,X))ee[_e]=de,ee[ce]=X,_e=ce;else break e}}return fe}function o(ee,fe){var X=ee.sortIndex-fe.sortIndex;return X!==0?X:ee.id-fe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var p=[],y=[],_=1,T=null,A=3,C=!1,q=!1,Q=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function G(ee){for(var fe=n(y);fe!==null;){if(fe.callback===null)i(y);else if(fe.startTime<=ee)i(y),fe.sortIndex=fe.expirationTime,e(p,fe);else break;fe=n(y)}}function F(ee){if(Q=!1,G(ee),!q)if(n(p)!==null)q=!0,V||(V=!0,z());else{var fe=n(y);fe!==null&&ze(F,fe.startTime-ee)}}var V=!1,R=-1,b=5,x=-1;function j(){return k?!0:!(s.unstable_now()-x<b)}function O(){if(k=!1,V){var ee=s.unstable_now();x=ee;var fe=!0;try{e:{q=!1,Q&&(Q=!1,ne(R),R=-1),C=!0;var X=A;try{t:{for(G(ee),T=n(p);T!==null&&!(T.expirationTime>ee&&j());){var _e=T.callback;if(typeof _e=="function"){T.callback=null,A=T.priorityLevel;var M=_e(T.expirationTime<=ee);if(ee=s.unstable_now(),typeof M=="function"){T.callback=M,G(ee),fe=!0;break t}T===n(p)&&i(p),G(ee)}else i(p);T=n(p)}if(T!==null)fe=!0;else{var se=n(y);se!==null&&ze(F,se.startTime-ee),fe=!1}}break e}finally{T=null,A=X,C=!1}fe=void 0}}finally{fe?z():V=!1}}}var z;if(typeof ae=="function")z=function(){ae(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,qe=D.port2;D.port1.onmessage=O,z=function(){qe.postMessage(null)}}else z=function(){B(O,0)};function ze(ee,fe){R=B(function(){ee(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(ee){switch(A){case 1:case 2:case 3:var fe=3;break;default:fe=A}var X=A;A=fe;try{return ee()}finally{A=X}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var X=A;A=ee;try{return fe()}finally{A=X}},s.unstable_scheduleCallback=function(ee,fe,X){var _e=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_e+X:_e):X=_e,ee){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=X+M,ee={id:_++,callback:fe,priorityLevel:ee,startTime:X,expirationTime:M,sortIndex:-1},X>_e?(ee.sortIndex=X,e(y,ee),n(p)===null&&ee===n(y)&&(Q?(ne(R),R=-1):Q=!0,ze(F,X-_e))):(ee.sortIndex=M,e(p,ee),q||C||(q=!0,V||(V=!0,z()))),ee},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(ee){var fe=A;return function(){var X=A;A=fe;try{return ee.apply(this,arguments)}finally{A=X}}}})(_m)),_m}var P_;function VT(){return P_||(P_=1,vm.exports=kT()),vm.exports}var Em={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function LT(){if(O_)return on;O_=1;var s=hp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:y,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(p,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,_)},on.flushSync=function(p){var y=d.T,_=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=y,i.p=_,i.d.f()}},on.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},on.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},on.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var _=y.as,T=g(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:C}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:A,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},on.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=g(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},on.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,T=g(_,y.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},on.preloadModule=function(p,y){if(typeof p=="string")if(y){var _=g(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},on.requestFormReset=function(p){i.d.r(p)},on.unstable_batchedUpdates=function(p,y){return p(y)},on.useFormState=function(p,y,_){return d.H.useFormState(p,y,_)},on.useFormStatus=function(){return d.H.useHostTransitionStatus()},on.version="19.1.1",on}var M_;function UT(){if(M_)return Em.exports;M_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Em.exports=LT(),Em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function qT(){if(k_)return Xl;k_=1;var s=VT(),e=hp(),n=UT();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===l)return g(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var S=!1,w=f.child;w;){if(w===a){S=!0,a=f,l=m;break}if(w===l){S=!0,l=f,a=m;break}w=w.sibling}if(!S){for(w=m.child;w;){if(w===a){S=!0,a=m,l=f;break}if(w===l){S=!0,l=m,a=f;break}w=w.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ne=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case k:return"Profiler";case Q:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case ae:return(t.displayName||"Context")+".Provider";case ne:return(t._context.displayName||"Context")+".Consumer";case G:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:qe(t.type)||"Memo";case b:r=t._payload,t=t._init;try{return qe(t(r))}catch{}}return null}var ze=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},_e=[],M=-1;function se(t){return{current:t}}function he(t){0>M||(t.current=_e[M],_e[M]=null,M--)}function L(t,r){M++,_e[M]=t.current,t.current=r}var ce=se(null),de=se(null),pe=se(null),ct=se(null);function Ge(t,r){switch(L(pe,r),L(de,t),L(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?n_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=n_(r),t=s_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}he(ce),L(ce,t)}function es(){he(ce),he(de),he(pe)}function Fo(t){t.memoizedState!==null&&L(ct,t);var r=ce.current,a=s_(r,t.type);r!==a&&(L(de,t),L(ce,a))}function Ta(t){de.current===t&&(he(ce),he(de)),ct.current===t&&(he(ct),Hl._currentValue=X)}var wa=Object.prototype.hasOwnProperty,xi=s.unstable_scheduleCallback,xa=s.unstable_cancelCallback,pd=s.unstable_shouldYield,Ho=s.unstable_requestPaint,vn=s.unstable_now,kc=s.unstable_getCurrentPriorityLevel,Mt=s.unstable_ImmediatePriority,Bt=s.unstable_UserBlockingPriority,qs=s.unstable_NormalPriority,gd=s.unstable_LowPriority,Go=s.unstable_IdlePriority,yd=s.log,Ai=s.unstable_setDisableYieldValue,Sr=null,sn=null;function Vn(t){if(typeof yd=="function"&&Ai(t),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Sr,t)}catch{}}var fn=Math.clz32?Math.clz32:Lc,vd=Math.log,Vc=Math.LN2;function Lc(t){return t>>>=0,t===0?32:31-(vd(t)/Vc|0)|0}var ys=256,br=4194304;function ts(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ln(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?f=ts(l):(S&=w,S!==0?f=ts(S):a||(a=w&~t,a!==0&&(f=ts(a))))):(w=l&~m,w!==0?f=ts(w):S!==0?f=ts(S):a||(a=l&~t,a!==0&&(f=ts(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function Tr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Aa(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qo(){var t=ys;return ys<<=1,(ys&4194048)===0&&(ys=256),t}function wr(){var t=br;return br<<=1,(br&62914560)===0&&(br=4194304),t}function Na(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function St(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uc(t,r,a,l,f,m){var S=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,P=t.expirationTimes,Y=t.hiddenUpdates;for(a=S&~a;0<a;){var te=31-fn(a),oe=1<<te;w[te]=0,P[te]=-1;var W=Y[te];if(W!==null)for(Y[te]=null,te=0;te<W.length;te++){var Z=W[te];Z!==null&&(Z.lane&=-536870913)}a&=~oe}l!==0&&xr(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(S&~r))}function xr(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-fn(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Ar(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-fn(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function $o(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ko(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function zs(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:b_(t.type))}function _d(t,r){var a=fe.p;try{return fe.p=t,r()}finally{fe.p=a}}var vs=Math.random().toString(36).slice(2),bt="__reactFiber$"+vs,Kt="__reactProps$"+vs,Bs="__reactContainer$"+vs,Ni="__reactEvents$"+vs,Ri="__reactListeners$"+vs,Ed="__reactHandles$"+vs,ns="__reactResources$"+vs,Nr="__reactMarker$"+vs;function Ra(t){delete t[bt],delete t[Kt],delete t[Ni],delete t[Ri],delete t[Ed]}function _s(t){var r=t[bt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Bs]||a[bt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=o_(t);t!==null;){if(a=t[bt])return a;t=o_(t)}return r}t=a,a=t.parentNode}return null}function Es(t){if(t=t[bt]||t[Bs]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Rr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function Cr(t){var r=t[ns];return r||(r=t[ns]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tt(t){t[Nr]=!0}var qc=new Set,Ci={};function Ss(t,r){bs(t,r),bs(t+"Capture",r)}function bs(t,r){for(Ci[t]=r,t=0;t<r.length;t++)qc.add(r[t])}var Ii=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ts={},Ca={};function Sd(t){return wa.call(Ca,t)?!0:wa.call(Ts,t)?!1:Ii.test(t)?Ca[t]=!0:(Ts[t]=!0,!1)}function ji(t,r,a){if(Sd(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Di(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Un(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Pi,Ia;function Fs(t){if(Pi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Pi=r&&r[1]||"",Ia=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pi+t+Ia}var ja=!1;function Da(t,r){if(!t||ja)return"";ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var W=Z}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(Z){W=Z}t.call(oe.prototype)}}else{try{throw Error()}catch(Z){W=Z}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),S=m[0],w=m[1];if(S&&w){var P=S.split(`
`),Y=w.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===Y.length)for(l=P.length-1,f=Y.length-1;1<=l&&0<=f&&P[l]!==Y[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==Y[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==Y[f]){var te=`
`+P[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=f);break}}}finally{ja=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Fs(a):""}function bd(t){switch(t.tag){case 26:case 27:case 5:return Fs(t.type);case 16:return Fs("Lazy");case 13:return Fs("Suspense");case 19:return Fs("SuspenseList");case 0:case 15:return Da(t.type,!1);case 11:return Da(t.type.render,!1);case 1:return Da(t.type,!0);case 31:return Fs("Activity");default:return""}}function ss(t){try{var r="";do r+=bd(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Oi(t){var r=Ir(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(S){l=""+S,m.call(this,S)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function jr(t){t._valueTracker||(t._valueTracker=Oi(t))}function Je(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ir(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Mi=/[\n"\\]/g;function Ft(t){return t.replace(Mi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Yo(t,r,a,l,f,m,S,w){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),r!=null?S==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mt(r)):t.value!==""+mt(r)&&(t.value=""+mt(r)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),r!=null?Wo(t,S,mt(r)):a!=null?Wo(t,S,mt(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+mt(w):t.removeAttribute("name")}function Xo(t,r,a,l,f,m,S,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+mt(a):"",r=r!=null?""+mt(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S)}function Wo(t,r,a){r==="number"&&Hs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Dr(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function zc(t,r,a){if(r!=null&&(r=""+mt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mt(a):""}function Bc(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(ze(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function qn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zo(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Gs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Jo(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Zo(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Zo(t,m,r[m])}function Pa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rs(t){return Hc.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var el=null;function tl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pr=null,mn=null;function Gc(t){var r=Es(t);if(r&&(t=r.stateNode)){var a=t[Kt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Yo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ft(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[Kt]||null;if(!f)throw Error(i(90));Yo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Je(l)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Dr(t,!!a.multiple,r,!1)}}}var ki=!1;function Vi(t,r,a){if(ki)return t(r,a);ki=!0;try{var l=t(r);return l}finally{if(ki=!1,(Pr!==null||mn!==null)&&(Ou(),Pr&&(r=Pr,t=mn,mn=Pr=null,Gc(r),t)))for(r=0;r<t.length;r++)Gc(t[r])}}function Or(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Kt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(pn)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{Qs=!1}var zn=null,rt=null,Oa=null;function Qc(){if(Oa)return Oa;var t,r=rt,a=r.length,l,f="value"in zn?zn.value:zn.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var S=a-t;for(l=1;l<=S&&r[a-l]===f[m-l];l++);return Oa=f.slice(t,1<l?1-l:void 0)}function Li(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ui(){return!0}function nl(){return!1}function kt(t){function r(a,l,f,m,S){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ui:nl,this.isPropagationStopped=nl,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),r}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=kt(rn),zi=_({},rn,{view:0,detail:0}),Bi=kt(zi),Ma,Fi,ws,Hi=_({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ws&&(ws&&t.type==="mousemove"?(Ma=t.screenX-ws.screenX,Fi=t.screenY-ws.screenY):Fi=Ma=0,ws=t),Ma)},movementY:function(t){return"movementY"in t?t.movementY:Fi}}),Gi=kt(Hi),Td=_({},Hi,{dataTransfer:0}),$c=kt(Td),Qi=_({},zi,{relatedTarget:0}),ka=kt(Qi),Kc=_({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),sl=kt(Kc),rl=_({},rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yc=kt(rl),Va=_({},rn,{data:0}),il=kt(Va),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wc[t])?!!r[t]:!1}function La(){return Zc}var Jc=_({},zi,{key:function(t){if(t.key){var r=Xc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$s[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(t){return t.type==="keypress"?Li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ua=kt(Jc),gn=_({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),al=kt(gn),eu=_({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),kr=kt(eu),h=_({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=kt(h),E=_({},Hi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N=kt(E),K=_({},rn,{newState:0,oldState:0}),J=kt(K),ue=[9,13,27,32],Re=pn&&"CompositionEvent"in window,ut=null;pn&&"documentMode"in document&&(ut=document.documentMode);var Ye=pn&&"TextEvent"in window&&!ut,wt=pn&&(!Re||ut&&8<ut&&11>=ut),An=" ",xs=!1;function is(t,r){switch(t){case"keyup":return ue.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function as(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function ol(t,r){switch(t){case"compositionend":return as(r);case"keypress":return r.which!==32?null:(xs=!0,An);case"textInput":return t=r.data,t===An&&xs?null:t;default:return null}}function ab(t,r){if(os)return t==="compositionend"||!Re&&is(t,r)?(t=Qc(),Oa=rt=zn=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return wt&&r.locale!=="ko"?null:r.data;default:return null}}var ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ob[t.type]:r==="textarea"}function yg(t,r,a,l){Pr?mn?mn.push(l):mn=[l]:Pr=l,r=qu(r,"onChange"),0<r.length&&(a=new qi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var ll=null,cl=null;function lb(t){Wv(t,0)}function tu(t){var r=Rr(t);if(Je(r))return t}function vg(t,r){if(t==="change")return r}var _g=!1;if(pn){var wd;if(pn){var xd="oninput"in document;if(!xd){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),xd=typeof Eg.oninput=="function"}wd=xd}else wd=!1;_g=wd&&(!document.documentMode||9<document.documentMode)}function Sg(){ll&&(ll.detachEvent("onpropertychange",bg),cl=ll=null)}function bg(t){if(t.propertyName==="value"&&tu(cl)){var r=[];yg(r,cl,t,tl(t)),Vi(lb,r)}}function cb(t,r,a){t==="focusin"?(Sg(),ll=r,cl=a,ll.attachEvent("onpropertychange",bg)):t==="focusout"&&Sg()}function ub(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(cl)}function hb(t,r){if(t==="click")return tu(r)}function db(t,r){if(t==="input"||t==="change")return tu(r)}function fb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:fb;function ul(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!wa.call(r,f)||!Nn(t[f],r[f]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,r){var a=Tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function xg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?xg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ag(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Hs(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Hs(t.document)}return r}function Ad(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var mb=pn&&"documentMode"in document&&11>=document.documentMode,qa=null,Nd=null,hl=null,Rd=!1;function Ng(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rd||qa==null||qa!==Hs(l)||(l=qa,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hl&&ul(hl,l)||(hl=l,l=qu(Nd,"onSelect"),0<l.length&&(r=new qi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=qa)))}function $i(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var za={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},Cd={},Rg={};pn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Ki(t){if(Cd[t])return Cd[t];if(!za[t])return t;var r=za[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Cd[t]=r[a];return t}var Cg=Ki("animationend"),Ig=Ki("animationiteration"),jg=Ki("animationstart"),pb=Ki("transitionrun"),gb=Ki("transitionstart"),yb=Ki("transitioncancel"),Dg=Ki("transitionend"),Pg=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function ls(t,r){Pg.set(t,r),Ss(r,[t])}var Og=new WeakMap;function Bn(t,r){if(typeof t=="object"&&t!==null){var a=Og.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ss(r)},Og.set(t,r),r)}return{value:t,source:r,stack:ss(r)}}var Fn=[],Ba=0,jd=0;function nu(){for(var t=Ba,r=jd=Ba=0;r<t;){var a=Fn[r];Fn[r++]=null;var l=Fn[r];Fn[r++]=null;var f=Fn[r];Fn[r++]=null;var m=Fn[r];if(Fn[r++]=null,l!==null&&f!==null){var S=l.pending;S===null?f.next=f:(f.next=S.next,S.next=f),l.pending=f}m!==0&&Mg(a,f,m)}}function su(t,r,a,l){Fn[Ba++]=t,Fn[Ba++]=r,Fn[Ba++]=a,Fn[Ba++]=l,jd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Dd(t,r,a,l){return su(t,r,a,l),ru(t)}function Fa(t,r){return su(t,null,null,r),ru(t)}function Mg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-fn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function ru(t){if(50<kl)throw kl=0,Uf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ha={};function vb(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,r,a,l){return new vb(t,r,a,l)}function Pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,r){var a=t.alternate;return a===null?(a=Rn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function kg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function iu(t,r,a,l,f,m){var S=0;if(l=t,typeof t=="function")Pd(t)&&(S=1);else if(typeof t=="string")S=ET(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=Rn(31,a,r,f),t.elementType=x,t.lanes=m,t;case q:return Yi(a.children,f,m,r);case Q:S=8,f|=24;break;case k:return t=Rn(12,a,r,f|2),t.elementType=k,t.lanes=m,t;case F:return t=Rn(13,a,r,f),t.elementType=F,t.lanes=m,t;case V:return t=Rn(19,a,r,f),t.elementType=V,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:case ae:S=10;break e;case ne:S=9;break e;case G:S=11;break e;case R:S=14;break e;case b:S=16,l=null;break e}S=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Rn(S,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Yi(t,r,a,l){return t=Rn(7,t,l,r),t.lanes=a,t}function Od(t,r,a){return t=Rn(6,t,null,r),t.lanes=a,t}function Md(t,r,a){return r=Rn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ga=[],Qa=0,au=null,ou=0,Hn=[],Gn=0,Xi=null,Ys=1,Xs="";function Wi(t,r){Ga[Qa++]=ou,Ga[Qa++]=au,au=t,ou=r}function Vg(t,r,a){Hn[Gn++]=Ys,Hn[Gn++]=Xs,Hn[Gn++]=Xi,Xi=t;var l=Ys;t=Xs;var f=32-fn(l)-1;l&=~(1<<f),a+=1;var m=32-fn(r)+f;if(30<m){var S=f-f%5;m=(l&(1<<S)-1).toString(32),l>>=S,f-=S,Ys=1<<32-fn(r)+f|a<<f|l,Xs=m+t}else Ys=1<<m|a<<f|l,Xs=t}function kd(t){t.return!==null&&(Wi(t,1),Vg(t,1,0))}function Vd(t){for(;t===au;)au=Ga[--Qa],Ga[Qa]=null,ou=Ga[--Qa],Ga[Qa]=null;for(;t===Xi;)Xi=Hn[--Gn],Hn[Gn]=null,Xs=Hn[--Gn],Hn[Gn]=null,Ys=Hn[--Gn],Hn[Gn]=null}var yn=null,yt=null,$e=!1,Zi=null,As=!1,Ld=Error(i(519));function Ji(t){var r=Error(i(418,""));throw ml(Bn(r,t)),Ld}function Lg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[bt]=t,r[Kt]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)ke(Ll[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),Xo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),jr(r);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),Bc(r,l.value,l.defaultValue,l.children),jr(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||t_(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=zu),r=!0):r=!1,r||Ji(t)}function Ug(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:yn=yn.return}}function dl(t){if(t!==yn)return!1;if(!$e)return Ug(t),$e=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tm(t.type,t.memoizedProps)),a=!a),a&&yt&&Ji(t),Ug(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){yt=us(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}yt=null}}else r===27?(r=yt,Zr(t.type)?(t=im,im=null,yt=t):yt=r):yt=yn?us(t.stateNode.nextSibling):null;return!0}function fl(){yt=yn=null,$e=!1}function qg(){var t=Zi;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Zi=null),t}function ml(t){Zi===null?Zi=[t]:Zi.push(t)}var Ud=se(null),ea=null,Ws=null;function Vr(t,r,a){L(Ud,r._currentValue),r._currentValue=a}function Zs(t){t._currentValue=Ud.current,he(Ud)}function qd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var P=0;P<r.length;P++)if(w.context===r[P]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),qd(m.return,a,t),l||(S=null);break e}m=w.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),qd(S,a,t),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===t){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function pl(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var w=f.type;Nn(f.pendingProps.value,S.value)||(t!==null?t.push(w):t=[w])}}else if(f===ct.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}f=f.return}t!==null&&zd(r,t,a,l),r.flags|=262144}function lu(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ta(t){ea=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return zg(ea,t)}function cu(t,r){return ea===null&&ta(t),zg(t,r)}function zg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ws===null){if(t===null)throw Error(i(308));Ws=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ws=Ws.next=r;return a}var _b=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Eb=s.unstable_scheduleCallback,Sb=s.unstable_NormalPriority,Vt={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new _b,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&Eb(Sb,function(){t.controller.abort()})}var yl=null,Fd=0,$a=0,Ka=null;function bb(t,r){if(yl===null){var a=yl=[];Fd=0,$a=Qf(),Ka={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Fd++,r.then(Bg,Bg),r}function Bg(){if(--Fd===0&&yl!==null){Ka!==null&&(Ka.status="fulfilled");var t=yl;yl=null,$a=0,Ka=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Tb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Fg=ee.S;ee.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&bb(t,r),Fg!==null&&Fg(t,r)};var na=se(null);function Hd(){var t=na.current;return t!==null?t:it.pooledCache}function uu(t,r){r===null?L(na,na.current):L(na,r.pool)}function Hg(){var t=Hd();return t===null?null:{parent:Vt._currentValue,pool:t}}var vl=Error(i(460)),Gg=Error(i(474)),hu=Error(i(542)),Gd={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function du(){}function $g(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(du,du),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Yg(t),t;default:if(typeof r.status=="string")r.then(du,du);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Yg(t),t}throw _l=r,vl}}var _l=null;function Kg(){if(_l===null)throw Error(i(459));var t=_l;return _l=null,t}function Yg(t){if(t===vl||t===hu)throw Error(i(483))}var Lr=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ur(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=ru(t),Mg(t,null,a),r}return su(t,l,r,a),ru(t)}function El(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Ar(t,a)}}function Kd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Yd=!1;function Sl(){if(Yd){var t=Ka;if(t!==null)throw t}}function bl(t,r,a,l){Yd=!1;var f=t.updateQueue;Lr=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var P=w,Y=P.next;P.next=null,S===null?m=Y:S.next=Y,S=P;var te=t.alternate;te!==null&&(te=te.updateQueue,w=te.lastBaseUpdate,w!==S&&(w===null?te.firstBaseUpdate=Y:w.next=Y,te.lastBaseUpdate=P))}if(m!==null){var oe=f.baseState;S=0,te=Y=P=null,w=m;do{var W=w.lane&-536870913,Z=W!==w.lane;if(Z?(Be&W)===W:(l&W)===W){W!==0&&W===$a&&(Yd=!0),te!==null&&(te=te.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=t,be=w;W=r;var nt=a;switch(be.tag){case 1:if(Ae=be.payload,typeof Ae=="function"){oe=Ae.call(nt,oe,W);break e}oe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=be.payload,W=typeof Ae=="function"?Ae.call(nt,oe,W):Ae,W==null)break e;oe=_({},oe,W);break e;case 2:Lr=!0}}W=w.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:w.tag,payload:w.payload,callback:w.callback,next:null},te===null?(Y=te=Z,P=oe):te=te.next=Z,S|=W;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);te===null&&(P=oe),f.baseState=P,f.firstBaseUpdate=Y,f.lastBaseUpdate=te,m===null&&(f.shared.lanes=0),Kr|=S,t.lanes=S,t.memoizedState=oe}}function Xg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Wg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Xg(a[t],r)}var Ya=se(null),fu=se(0);function Zg(t,r){t=ir,L(fu,t),L(Ya,r),ir=t|r.baseLanes}function Xd(){L(fu,ir),L(Ya,Ya.current)}function Wd(){ir=fu.current,he(Ya),he(fu)}var zr=0,De=null,et=null,Ct=null,mu=!1,Xa=!1,sa=!1,pu=0,Tl=0,Wa=null,wb=0;function xt(){throw Error(i(321))}function Zd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function Jd(t,r,a,l,f,m){return zr=m,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=t===null||t.memoizedState===null?My:ky,sa=!1,m=a(l,f),sa=!1,Xa&&(m=ey(r,a,l,f)),Jg(t),m}function Jg(t){ee.H=Su;var r=et!==null&&et.next!==null;if(zr=0,Ct=et=De=null,mu=!1,Tl=0,Wa=null,r)throw Error(i(300));t===null||Ht||(t=t.dependencies,t!==null&&lu(t)&&(Ht=!0))}function ey(t,r,a,l){De=t;var f=0;do{if(Xa&&(Wa=null),Tl=0,Xa=!1,25<=f)throw Error(i(301));if(f+=1,Ct=et=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ee.H=jb,m=r(a,l)}while(Xa);return m}function xb(){var t=ee.H,r=t.useState()[0];return r=typeof r.then=="function"?wl(r):r,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(De.flags|=1024),r}function ef(){var t=pu!==0;return pu=0,t}function tf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function nf(t){if(mu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}mu=!1}zr=0,Ct=et=De=null,Xa=!1,Tl=pu=0,Wa=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?De.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function It(){if(et===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var r=Ct===null?De.memoizedState:Ct.next;if(r!==null)Ct=r,et=t;else{if(t===null)throw De.alternate===null?Error(i(467)):Error(i(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ct===null?De.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var r=Tl;return Tl+=1,Wa===null&&(Wa=[]),t=$g(Wa,t,r),r=De,(Ct===null?r.memoizedState:Ct.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?My:ky),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===ae)return an(t)}throw Error(i(438,String(t)))}function rf(t){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=sf(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=j;return r.index++,a}function Js(t,r){return typeof r=="function"?r(t):r}function yu(t){var r=It();return af(r,et,t)}function af(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var w=S=null,P=null,Y=r,te=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(Be&oe)===oe:(zr&oe)===oe){var W=Y.revertLane;if(W===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===$a&&(te=!0);else if((zr&W)===W){Y=Y.next,W===$a&&(te=!0);continue}else oe={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=oe,S=m):P=P.next=oe,De.lanes|=W,Kr|=W;oe=Y.action,sa&&a(m,oe),m=Y.hasEagerState?Y.eagerState:a(m,oe)}else W={lane:oe,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=W,S=m):P=P.next=W,De.lanes|=oe,Kr|=oe;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?S=m:P.next=w,!Nn(m,t.memoizedState)&&(Ht=!0,te&&(a=Ka,a!==null)))throw a;t.memoizedState=m,t.baseState=S,t.baseQueue=P,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var r=It(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var S=f=f.next;do m=t(m,S.action),S=S.next;while(S!==f);Nn(m,r.memoizedState)||(Ht=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function ty(t,r,a){var l=De,f=It(),m=$e;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var S=!Nn((et||f).memoizedState,a);S&&(f.memoizedState=a,Ht=!0),f=f.queue;var w=ry.bind(null,l,f,t);if(xl(2048,8,w,[t]),f.getSnapshot!==r||S||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Za(9,vu(),sy.bind(null,l,f,a,r),null),it===null)throw Error(i(349));m||(zr&124)!==0||ny(l,r,a)}return a}function ny(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=sf(),De.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function sy(t,r,a,l){r.value=a,r.getSnapshot=l,iy(r)&&ay(t)}function ry(t,r,a){return a(function(){iy(r)&&ay(t)})}function iy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function ay(t){var r=Fa(t,2);r!==null&&Pn(r,t,2)}function lf(t){var r=_n();if(typeof t=="function"){var a=t;if(t=a(),sa){Vn(!0);try{a()}finally{Vn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},r}function oy(t,r,a,l){return t.baseState=a,af(t,et,typeof l=="function"?l:Js)}function Ab(t,r,a,l,f){if(Eu(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};ee.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,ly(r,m)):(m.next=a.next,r.pending=a.next=m)}}function ly(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=ee.T,S={};ee.T=S;try{var w=a(f,l),P=ee.S;P!==null&&P(S,w),cy(t,r,w)}catch(Y){cf(t,r,Y)}finally{ee.T=m}}else try{m=a(f,l),cy(t,r,m)}catch(Y){cf(t,r,Y)}}function cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){uy(t,r,l)},function(l){return cf(t,r,l)}):uy(t,r,a)}function uy(t,r,a){r.status="fulfilled",r.value=a,hy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,ly(t,a)))}function cf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,hy(r),r=r.next;while(r!==l)}t.action=null}function hy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function dy(t,r){return r}function fy(t,r){if($e){var a=it.formState;if(a!==null){e:{var l=De;if($e){if(yt){t:{for(var f=yt,m=As;f.nodeType!==8;){if(!m){f=null;break t}if(f=us(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){yt=us(f.nextSibling),l=f.data==="F!";break e}}Ji(l)}l=!1}l&&(r=a[0])}}return a=_n(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},a.queue=l,a=Dy.bind(null,De,l),l.dispatch=a,l=lf(!1),m=mf.bind(null,De,!1,l.queue),l=_n(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=Ab.bind(null,De,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function my(t){var r=It();return py(r,et,t)}function py(t,r,a){if(r=af(t,r,dy)[0],t=yu(Js)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wl(r)}catch(S){throw S===vl?hu:S}else l=r;r=It();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(De.flags|=2048,Za(9,vu(),Nb.bind(null,f,a),null)),[l,m,t]}function Nb(t,r){t.action=r}function gy(t){var r=It(),a=et;if(a!==null)return py(r,a,t);It(),r=r.memoizedState,a=It();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Za(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=De.updateQueue,r===null&&(r=sf(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vu(){return{destroy:void 0,resource:void 0}}function yy(){return It().memoizedState}function _u(t,r,a,l){var f=_n();l=l===void 0?null:l,De.flags|=t,f.memoizedState=Za(1|r,vu(),a,l)}function xl(t,r,a,l){var f=It();l=l===void 0?null:l;var m=f.memoizedState.inst;et!==null&&l!==null&&Zd(l,et.memoizedState.deps)?f.memoizedState=Za(r,m,a,l):(De.flags|=t,f.memoizedState=Za(1|r,m,a,l))}function vy(t,r){_u(8390656,8,t,r)}function _y(t,r){xl(2048,8,t,r)}function Ey(t,r){return xl(4,2,t,r)}function Sy(t,r){return xl(4,4,t,r)}function by(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ty(t,r,a){a=a!=null?a.concat([t]):null,xl(4,4,by.bind(null,r,t),a)}function uf(){}function wy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Zd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function xy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Zd(r,l[1]))return l[0];if(l=t(),sa){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(zr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Rv(),De.lanes|=t,Kr|=t,a)}function Ay(t,r,a,l){return Nn(a,r)?a:Ya.current!==null?(t=hf(t,a,l),Nn(t,r)||(Ht=!0),t):(zr&42)===0?(Ht=!0,t.memoizedState=a):(t=Rv(),De.lanes|=t,Kr|=t,r)}function Ny(t,r,a,l,f){var m=fe.p;fe.p=m!==0&&8>m?m:8;var S=ee.T,w={};ee.T=w,mf(t,!1,r,a);try{var P=f(),Y=ee.S;if(Y!==null&&Y(w,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var te=Tb(P,l);Al(t,r,te,Dn(t))}else Al(t,r,l,Dn(t))}catch(oe){Al(t,r,{then:function(){},status:"rejected",reason:oe},Dn())}finally{fe.p=m,ee.T=S}}function Rb(){}function df(t,r,a,l){if(t.tag!==5)throw Error(i(476));var f=Ry(t).queue;Ny(t,f,r,X,a===null?Rb:function(){return Cy(t),a(l)})}function Ry(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:X},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Cy(t){var r=Ry(t).next.queue;Al(t,r,{},Dn())}function ff(){return an(Hl)}function Iy(){return It().memoizedState}function jy(){return It().memoizedState}function Cb(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Dn();t=Ur(a);var l=qr(r,t,a);l!==null&&(Pn(l,r,a),El(l,r,a)),r={cache:Bd()},t.payload=r;return}r=r.return}}function Ib(t,r,a){var l=Dn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Eu(t)?Py(r,a):(a=Dd(t,r,a,l),a!==null&&(Pn(a,t,l),Oy(a,r,l)))}function Dy(t,r,a){var l=Dn();Al(t,r,a,l)}function Al(t,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))Py(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var S=r.lastRenderedState,w=m(S,a);if(f.hasEagerState=!0,f.eagerState=w,Nn(w,S))return su(t,r,f,0),it===null&&nu(),!1}catch{}finally{}if(a=Dd(t,r,f,l),a!==null)return Pn(a,t,l),Oy(a,r,l),!0}return!1}function mf(t,r,a,l){if(l={lane:2,revertLane:Qf(),action:l,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(r)throw Error(i(479))}else r=Dd(t,a,l,2),r!==null&&Pn(r,t,2)}function Eu(t){var r=t.alternate;return t===De||r!==null&&r===De}function Py(t,r){Xa=mu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Oy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Ar(t,a)}}var Su={readContext:an,use:gu,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},My={readContext:an,use:gu,useCallback:function(t,r){return _n().memoizedState=[t,r===void 0?null:r],t},useContext:an,useEffect:vy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,_u(4194308,4,by.bind(null,r,t),a)},useLayoutEffect:function(t,r){return _u(4194308,4,t,r)},useInsertionEffect:function(t,r){_u(4,2,t,r)},useMemo:function(t,r){var a=_n();r=r===void 0?null:r;var l=t();if(sa){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=_n();if(a!==void 0){var f=a(r);if(sa){Vn(!0);try{a(r)}finally{Vn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=Ib.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var r=_n();return t={current:t},r.memoizedState=t},useState:function(t){t=lf(t);var r=t.queue,a=Dy.bind(null,De,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:uf,useDeferredValue:function(t,r){var a=_n();return hf(a,t,r)},useTransition:function(){var t=lf(!1);return t=Ny.bind(null,De,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=De,f=_n();if($e){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),it===null)throw Error(i(349));(Be&124)!==0||ny(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,vy(ry.bind(null,l,m,t),[t]),l.flags|=2048,Za(9,vu(),sy.bind(null,l,m,a,r),null),a},useId:function(){var t=_n(),r=it.identifierPrefix;if($e){var a=Xs,l=Ys;a=(l&~(1<<32-fn(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=pu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=wb++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:ff,useFormState:fy,useActionState:fy,useOptimistic:function(t){var r=_n();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=mf.bind(null,De,!0,a),a.dispatch=r,[t,r]},useMemoCache:rf,useCacheRefresh:function(){return _n().memoizedState=Cb.bind(null,De)}},ky={readContext:an,use:gu,useCallback:wy,useContext:an,useEffect:_y,useImperativeHandle:Ty,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:xy,useReducer:yu,useRef:yy,useState:function(){return yu(Js)},useDebugValue:uf,useDeferredValue:function(t,r){var a=It();return Ay(a,et.memoizedState,t,r)},useTransition:function(){var t=yu(Js)[0],r=It().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:ff,useFormState:my,useActionState:my,useOptimistic:function(t,r){var a=It();return oy(a,et,t,r)},useMemoCache:rf,useCacheRefresh:jy},jb={readContext:an,use:gu,useCallback:wy,useContext:an,useEffect:_y,useImperativeHandle:Ty,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:xy,useReducer:of,useRef:yy,useState:function(){return of(Js)},useDebugValue:uf,useDeferredValue:function(t,r){var a=It();return et===null?hf(a,t,r):Ay(a,et.memoizedState,t,r)},useTransition:function(){var t=of(Js)[0],r=It().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:ff,useFormState:gy,useActionState:gy,useOptimistic:function(t,r){var a=It();return et!==null?oy(a,et,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:jy},Ja=null,Nl=0;function bu(t){var r=Nl;return Nl+=1,Ja===null&&(Ja=[]),$g(Ja,t,r)}function Rl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Tu(t,r){throw r.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Vy(t){var r=t._init;return r(t._payload)}function Ly(t){function r(H,U){if(t){var $=H.deletions;$===null?(H.deletions=[U],H.flags|=16):$.push(U)}}function a(H,U){if(!t)return null;for(;U!==null;)r(H,U),U=U.sibling;return null}function l(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function f(H,U){return H=Ks(H,U),H.index=0,H.sibling=null,H}function m(H,U,$){return H.index=$,t?($=H.alternate,$!==null?($=$.index,$<U?(H.flags|=67108866,U):$):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function S(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function w(H,U,$,re){return U===null||U.tag!==6?(U=Od($,H.mode,re),U.return=H,U):(U=f(U,$),U.return=H,U)}function P(H,U,$,re){var ve=$.type;return ve===q?te(H,U,$.props.children,re,$.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===b&&Vy(ve)===U.type)?(U=f(U,$.props),Rl(U,$),U.return=H,U):(U=iu($.type,$.key,$.props,null,H.mode,re),Rl(U,$),U.return=H,U)}function Y(H,U,$,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=Md($,H.mode,re),U.return=H,U):(U=f(U,$.children||[]),U.return=H,U)}function te(H,U,$,re,ve){return U===null||U.tag!==7?(U=Yi($,H.mode,re,ve),U.return=H,U):(U=f(U,$),U.return=H,U)}function oe(H,U,$){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Od(""+U,H.mode,$),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return $=iu(U.type,U.key,U.props,null,H.mode,$),Rl($,U),$.return=H,$;case C:return U=Md(U,H.mode,$),U.return=H,U;case b:var re=U._init;return U=re(U._payload),oe(H,U,$)}if(ze(U)||z(U))return U=Yi(U,H.mode,$,null),U.return=H,U;if(typeof U.then=="function")return oe(H,bu(U),$);if(U.$$typeof===ae)return oe(H,cu(H,U),$);Tu(H,U)}return null}function W(H,U,$,re){var ve=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ve!==null?null:w(H,U,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return $.key===ve?P(H,U,$,re):null;case C:return $.key===ve?Y(H,U,$,re):null;case b:return ve=$._init,$=ve($._payload),W(H,U,$,re)}if(ze($)||z($))return ve!==null?null:te(H,U,$,re,null);if(typeof $.then=="function")return W(H,U,bu($),re);if($.$$typeof===ae)return W(H,U,cu(H,$),re);Tu(H,$)}return null}function Z(H,U,$,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get($)||null,w(U,H,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return H=H.get(re.key===null?$:re.key)||null,P(U,H,re,ve);case C:return H=H.get(re.key===null?$:re.key)||null,Y(U,H,re,ve);case b:var Oe=re._init;return re=Oe(re._payload),Z(H,U,$,re,ve)}if(ze(re)||z(re))return H=H.get($)||null,te(U,H,re,ve,null);if(typeof re.then=="function")return Z(H,U,$,bu(re),ve);if(re.$$typeof===ae)return Z(H,U,$,cu(U,re),ve);Tu(U,re)}return null}function Ae(H,U,$,re){for(var ve=null,Oe=null,Ee=U,Te=U=0,Qt=null;Ee!==null&&Te<$.length;Te++){Ee.index>Te?(Qt=Ee,Ee=null):Qt=Ee.sibling;var Qe=W(H,Ee,$[Te],re);if(Qe===null){Ee===null&&(Ee=Qt);break}t&&Ee&&Qe.alternate===null&&r(H,Ee),U=m(Qe,U,Te),Oe===null?ve=Qe:Oe.sibling=Qe,Oe=Qe,Ee=Qt}if(Te===$.length)return a(H,Ee),$e&&Wi(H,Te),ve;if(Ee===null){for(;Te<$.length;Te++)Ee=oe(H,$[Te],re),Ee!==null&&(U=m(Ee,U,Te),Oe===null?ve=Ee:Oe.sibling=Ee,Oe=Ee);return $e&&Wi(H,Te),ve}for(Ee=l(Ee);Te<$.length;Te++)Qt=Z(Ee,H,Te,$[Te],re),Qt!==null&&(t&&Qt.alternate!==null&&Ee.delete(Qt.key===null?Te:Qt.key),U=m(Qt,U,Te),Oe===null?ve=Qt:Oe.sibling=Qt,Oe=Qt);return t&&Ee.forEach(function(si){return r(H,si)}),$e&&Wi(H,Te),ve}function be(H,U,$,re){if($==null)throw Error(i(151));for(var ve=null,Oe=null,Ee=U,Te=U=0,Qt=null,Qe=$.next();Ee!==null&&!Qe.done;Te++,Qe=$.next()){Ee.index>Te?(Qt=Ee,Ee=null):Qt=Ee.sibling;var si=W(H,Ee,Qe.value,re);if(si===null){Ee===null&&(Ee=Qt);break}t&&Ee&&si.alternate===null&&r(H,Ee),U=m(si,U,Te),Oe===null?ve=si:Oe.sibling=si,Oe=si,Ee=Qt}if(Qe.done)return a(H,Ee),$e&&Wi(H,Te),ve;if(Ee===null){for(;!Qe.done;Te++,Qe=$.next())Qe=oe(H,Qe.value,re),Qe!==null&&(U=m(Qe,U,Te),Oe===null?ve=Qe:Oe.sibling=Qe,Oe=Qe);return $e&&Wi(H,Te),ve}for(Ee=l(Ee);!Qe.done;Te++,Qe=$.next())Qe=Z(Ee,H,Te,Qe.value,re),Qe!==null&&(t&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Te:Qe.key),U=m(Qe,U,Te),Oe===null?ve=Qe:Oe.sibling=Qe,Oe=Qe);return t&&Ee.forEach(function(DT){return r(H,DT)}),$e&&Wi(H,Te),ve}function nt(H,U,$,re){if(typeof $=="object"&&$!==null&&$.type===q&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case A:e:{for(var ve=$.key;U!==null;){if(U.key===ve){if(ve=$.type,ve===q){if(U.tag===7){a(H,U.sibling),re=f(U,$.props.children),re.return=H,H=re;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===b&&Vy(ve)===U.type){a(H,U.sibling),re=f(U,$.props),Rl(re,$),re.return=H,H=re;break e}a(H,U);break}else r(H,U);U=U.sibling}$.type===q?(re=Yi($.props.children,H.mode,re,$.key),re.return=H,H=re):(re=iu($.type,$.key,$.props,null,H.mode,re),Rl(re,$),re.return=H,H=re)}return S(H);case C:e:{for(ve=$.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){a(H,U.sibling),re=f(U,$.children||[]),re.return=H,H=re;break e}else{a(H,U);break}else r(H,U);U=U.sibling}re=Md($,H.mode,re),re.return=H,H=re}return S(H);case b:return ve=$._init,$=ve($._payload),nt(H,U,$,re)}if(ze($))return Ae(H,U,$,re);if(z($)){if(ve=z($),typeof ve!="function")throw Error(i(150));return $=ve.call($),be(H,U,$,re)}if(typeof $.then=="function")return nt(H,U,bu($),re);if($.$$typeof===ae)return nt(H,U,cu(H,$),re);Tu(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,U!==null&&U.tag===6?(a(H,U.sibling),re=f(U,$),re.return=H,H=re):(a(H,U),re=Od($,H.mode,re),re.return=H,H=re),S(H)):a(H,U)}return function(H,U,$,re){try{Nl=0;var ve=nt(H,U,$,re);return Ja=null,ve}catch(Ee){if(Ee===vl||Ee===hu)throw Ee;var Oe=Rn(29,Ee,null,H.mode);return Oe.lanes=re,Oe.return=H,Oe}finally{}}}var eo=Ly(!0),Uy=Ly(!1),Qn=se(null),Ns=null;function Br(t){var r=t.alternate;L(Lt,Lt.current&1),L(Qn,t),Ns===null&&(r===null||Ya.current!==null||r.memoizedState!==null)&&(Ns=t)}function qy(t){if(t.tag===22){if(L(Lt,Lt.current),L(Qn,t),Ns===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ns=t)}}else Fr()}function Fr(){L(Lt,Lt.current),L(Qn,Qn.current)}function er(t){he(Qn),Ns===t&&(Ns=null),he(Lt)}var Lt=se(0);function wu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||rm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function pf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Dn(),f=Ur(l);f.payload=r,a!=null&&(f.callback=a),r=qr(t,f,l),r!==null&&(Pn(r,t,l),El(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Dn(),f=Ur(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=qr(t,f,l),r!==null&&(Pn(r,t,l),El(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Dn(),l=Ur(a);l.tag=2,r!=null&&(l.callback=r),r=qr(t,l,a),r!==null&&(Pn(r,t,a),El(r,t,a))}};function zy(t,r,a,l,f,m,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,S):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(f,m):!0}function By(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&gf.enqueueReplaceState(r,r.state,null)}function ra(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Fy(t){xu(t)}function Hy(t){console.error(t)}function Gy(t){xu(t)}function Au(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Qy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function yf(t,r,a){return a=Ur(a),a.tag=3,a.payload={element:null},a.callback=function(){Au(t,r)},a}function $y(t){return t=Ur(t),t.tag=3,t}function Ky(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Qy(r,a,l)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Qy(r,a,l),typeof f!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Db(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&pl(r,a,f,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Ns===null?zf():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Gd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Ff(t,l,f)),!1;case 22:return a.flags|=65536,l===Gd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Ff(t,l,f)),!1}throw Error(i(435,a.tag))}return Ff(t,l,f),zf(),!1}if($e)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Ld&&(t=Error(i(422),{cause:l}),ml(Bn(t,a)))):(l!==Ld&&(r=Error(i(423),{cause:l}),ml(Bn(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Bn(l,a),f=yf(t.stateNode,l,f),Kd(t,f),vt!==4&&(vt=2)),!1;var m=Error(i(520),{cause:l});if(m=Bn(m,a),Ml===null?Ml=[m]:Ml.push(m),vt!==4&&(vt=2),r===null)return!0;l=Bn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=yf(a.stateNode,l,t),Kd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yr===null||!Yr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=$y(f),Ky(f,t,a,l),Kd(a,f),!1}a=a.return}while(a!==null);return!1}var Yy=Error(i(461)),Ht=!1;function Yt(t,r,a,l){r.child=t===null?Uy(r,null,a,l):eo(r,t.child,a,l)}function Xy(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var S={};for(var w in l)w!=="ref"&&(S[w]=l[w])}else S=l;return ta(r),l=Jd(t,r,a,S,m,f),w=ef(),t!==null&&!Ht?(tf(t,r,f),tr(t,r,f)):($e&&w&&kd(r),r.flags|=1,Yt(t,r,l,f),r.child)}function Wy(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Pd(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Zy(t,r,m,l,f)):(t=iu(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!xf(t,f)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(S,l)&&t.ref===r.ref)return tr(t,r,f)}return r.flags|=1,t=Ks(m,l),t.ref=r.ref,t.return=r,r.child=t}function Zy(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(ul(m,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=m,xf(t,f))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,tr(t,r,f)}return vf(t,r,a,l,f)}function Jy(t,r,a){var l=r.pendingProps,f=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(f=r.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return ev(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&uu(r,m!==null?m.cachePool:null),m!==null?Zg(r,m):Xd(),qy(r);else return r.lanes=r.childLanes=536870912,ev(t,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(uu(r,m.cachePool),Zg(r,m),Fr(),r.memoizedState=null):(t!==null&&uu(r,null),Xd(),Fr());return Yt(t,r,f,a),r.child}function ev(t,r,a,l){var f=Hd();return f=f===null?null:{parent:Vt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&uu(r,null),Xd(),qy(r),t!==null&&pl(t,r,l,!0),null}function Nu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function vf(t,r,a,l,f){return ta(r),a=Jd(t,r,a,l,void 0,f),l=ef(),t!==null&&!Ht?(tf(t,r,f),tr(t,r,f)):($e&&l&&kd(r),r.flags|=1,Yt(t,r,a,f),r.child)}function tv(t,r,a,l,f,m){return ta(r),r.updateQueue=null,a=ey(r,l,a,f),Jg(t),l=ef(),t!==null&&!Ht?(tf(t,r,m),tr(t,r,m)):($e&&l&&kd(r),r.flags|=1,Yt(t,r,a,m),r.child)}function nv(t,r,a,l,f){if(ta(r),r.stateNode===null){var m=Ha,S=a.contextType;typeof S=="object"&&S!==null&&(m=an(S)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Qd(r),S=a.contextType,m.context=typeof S=="object"&&S!==null?an(S):Ha,m.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(pf(r,a,S,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&gf.enqueueReplaceState(m,m.state,null),bl(r,l,m,f),Sl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var w=r.memoizedProps,P=ra(a,w);m.props=P;var Y=m.context,te=a.contextType;S=Ha,typeof te=="object"&&te!==null&&(S=an(te));var oe=a.getDerivedStateFromProps;te=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||Y!==S)&&By(r,m,l,S),Lr=!1;var W=r.memoizedState;m.state=W,bl(r,l,m,f),Sl(),Y=r.memoizedState,w||W!==Y||Lr?(typeof oe=="function"&&(pf(r,a,oe,l),Y=r.memoizedState),(P=Lr||zy(r,a,P,l,W,Y,S))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Y),m.props=l,m.state=Y,m.context=S,l=P):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,$d(t,r),S=r.memoizedProps,te=ra(a,S),m.props=te,oe=r.pendingProps,W=m.context,Y=a.contextType,P=Ha,typeof Y=="object"&&Y!==null&&(P=an(Y)),w=a.getDerivedStateFromProps,(Y=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==oe||W!==P)&&By(r,m,l,P),Lr=!1,W=r.memoizedState,m.state=W,bl(r,l,m,f),Sl();var Z=r.memoizedState;S!==oe||W!==Z||Lr||t!==null&&t.dependencies!==null&&lu(t.dependencies)?(typeof w=="function"&&(pf(r,a,w,l),Z=r.memoizedState),(te=Lr||zy(r,a,te,l,W,Z,P)||t!==null&&t.dependencies!==null&&lu(t.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,P)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),m.props=l,m.state=Z,m.context=P,l=te):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Nu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=eo(r,t.child,null,f),r.child=eo(r,null,a,f)):Yt(t,r,a,f),r.memoizedState=m.state,t=r.child):t=tr(t,r,f),t}function sv(t,r,a,l){return fl(),r.flags|=256,Yt(t,r,a,l),r.child}var _f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ef(t){return{baseLanes:t,cachePool:Hg()}}function Sf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=$n),t}function rv(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,S;if((S=m)||(S=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),S&&(f=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,t===null){if($e){if(f?Br(r):Fr(),$e){var w=yt,P;if(P=w){e:{for(P=w,w=As;P.nodeType!==8;){if(!w){w=null;break e}if(P=us(P.nextSibling),P===null){w=null;break e}}w=P}w!==null?(r.memoizedState={dehydrated:w,treeContext:Xi!==null?{id:Ys,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},P=Rn(18,null,null,0),P.stateNode=w,P.return=r,r.child=P,yn=r,yt=null,P=!0):P=!1}P||Ji(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return rm(w)?r.lanes=32:r.lanes=536870912,null;er(r)}return w=l.children,l=l.fallback,f?(Fr(),f=r.mode,w=Ru({mode:"hidden",children:w},f),l=Yi(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,f=r.child,f.memoizedState=Ef(a),f.childLanes=Sf(t,S,a),r.memoizedState=_f,l):(Br(r),bf(r,w))}if(P=t.memoizedState,P!==null&&(w=P.dehydrated,w!==null)){if(m)r.flags&256?(Br(r),r.flags&=-257,r=Tf(t,r,a)):r.memoizedState!==null?(Fr(),r.child=t.child,r.flags|=128,r=null):(Fr(),f=l.fallback,w=r.mode,l=Ru({mode:"visible",children:l.children},w),f=Yi(f,w,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,eo(r,t.child,null,a),l=r.child,l.memoizedState=Ef(a),l.childLanes=Sf(t,S,a),r.memoizedState=_f,r=f);else if(Br(r),rm(w)){if(S=w.nextSibling&&w.nextSibling.dataset,S)var Y=S.dgst;S=Y,l=Error(i(419)),l.stack="",l.digest=S,ml({value:l,source:null,stack:null}),r=Tf(t,r,a)}else if(Ht||pl(t,r,a,!1),S=(a&t.childLanes)!==0,Ht||S){if(S=it,S!==null&&(l=a&-a,l=(l&42)!==0?1:$o(l),l=(l&(S.suspendedLanes|a))!==0?0:l,l!==0&&l!==P.retryLane))throw P.retryLane=l,Fa(t,l),Pn(S,t,l),Yy;w.data==="$?"||zf(),r=Tf(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=P.treeContext,yt=us(w.nextSibling),yn=r,$e=!0,Zi=null,As=!1,t!==null&&(Hn[Gn++]=Ys,Hn[Gn++]=Xs,Hn[Gn++]=Xi,Ys=t.id,Xs=t.overflow,Xi=r),r=bf(r,l.children),r.flags|=4096);return r}return f?(Fr(),f=l.fallback,w=r.mode,P=t.child,Y=P.sibling,l=Ks(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,Y!==null?f=Ks(Y,f):(f=Yi(f,w,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,w=t.child.memoizedState,w===null?w=Ef(a):(P=w.cachePool,P!==null?(Y=Vt._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=Hg(),w={baseLanes:w.baseLanes|a,cachePool:P}),f.memoizedState=w,f.childLanes=Sf(t,S,a),r.memoizedState=_f,l):(Br(r),a=t.child,t=a.sibling,a=Ks(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(S=r.deletions,S===null?(r.deletions=[t],r.flags|=16):S.push(t)),r.child=a,r.memoizedState=null,a)}function bf(t,r){return r=Ru({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ru(t,r){return t=Rn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Tf(t,r,a){return eo(r,t.child,null,a),t=bf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function iv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),qd(t.return,r,a)}function wf(t,r,a,l,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function av(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;if(Yt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iv(t,a,r);else if(t.tag===19)iv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(L(Lt,l),f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&wu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),wf(r,!1,f,a,m);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&wu(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}wf(r,!0,a,null,m);break;case"together":wf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function tr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Kr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(pl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ks(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ks(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function xf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lu(t)))}function Pb(t,r,a){switch(r.tag){case 3:Ge(r,r.stateNode.containerInfo),Vr(r,Vt,t.memoizedState.cache),fl();break;case 27:case 5:Fo(r);break;case 4:Ge(r,r.stateNode.containerInfo);break;case 10:Vr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Br(r),r.flags|=128,null):(a&r.child.childLanes)!==0?rv(t,r,a):(Br(r),t=tr(t,r,a),t!==null?t.sibling:null);Br(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(pl(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return av(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),L(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,Jy(t,r,a);case 24:Vr(r,Vt,t.memoizedState.cache)}return tr(t,r,a)}function ov(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!xf(t,a)&&(r.flags&128)===0)return Ht=!1,Pb(t,r,a);Ht=(t.flags&131072)!==0}else Ht=!1,$e&&(r.flags&1048576)!==0&&Vg(r,ou,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Pd(l)?(t=ra(l,t),r.tag=1,r=nv(null,r,l,t,a)):(r.tag=0,r=vf(null,r,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===G){r.tag=11,r=Xy(null,r,l,t,a);break e}else if(f===R){r.tag=14,r=Wy(null,r,l,t,a);break e}}throw r=qe(l)||l,Error(i(306,r,""))}}return r;case 0:return vf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ra(l,r.pendingProps),nv(t,r,l,f,a);case 3:e:{if(Ge(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,$d(t,r),bl(r,l,null,a);var S=r.memoizedState;if(l=S.cache,Vr(r,Vt,l),l!==m.cache&&zd(r,[Vt],a,!0),Sl(),l=S.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=sv(t,r,l,a);break e}else if(l!==f){f=Bn(Error(i(424)),r),ml(f),r=sv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=us(t.firstChild),yn=r,$e=!0,Zi=null,As=!0,a=Uy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===f){r=tr(t,r,a);break e}Yt(t,r,l,a)}r=r.child}return r;case 26:return Nu(t,r),t===null?(a=h_(r.type,null,r.pendingProps,null))?r.memoizedState=a:$e||(a=r.type,t=r.pendingProps,l=Bu(pe.current).createElement(a),l[bt]=r,l[Kt]=t,Wt(l,a,t),Tt(l),r.stateNode=l):r.memoizedState=h_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Fo(r),t===null&&$e&&(l=r.stateNode=l_(r.type,r.pendingProps,pe.current),yn=r,As=!0,f=yt,Zr(r.type)?(im=f,yt=us(l.firstChild)):yt=f),Yt(t,r,r.pendingProps.children,a),Nu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&$e&&((f=l=yt)&&(l=oT(l,r.type,r.pendingProps,As),l!==null?(r.stateNode=l,yn=r,yt=us(l.firstChild),As=!1,f=!0):f=!1),f||Ji(r)),Fo(r),f=r.type,m=r.pendingProps,S=t!==null?t.memoizedProps:null,l=m.children,tm(f,m)?l=null:S!==null&&tm(f,S)&&(r.flags|=32),r.memoizedState!==null&&(f=Jd(t,r,xb,null,null,a),Hl._currentValue=f),Nu(t,r),Yt(t,r,l,a),r.child;case 6:return t===null&&$e&&((t=a=yt)&&(a=lT(a,r.pendingProps,As),a!==null?(r.stateNode=a,yn=r,yt=null,t=!0):t=!1),t||Ji(r)),null;case 13:return rv(t,r,a);case 4:return Ge(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=eo(r,null,l,a):Yt(t,r,l,a),r.child;case 11:return Xy(t,r,r.type,r.pendingProps,a);case 7:return Yt(t,r,r.pendingProps,a),r.child;case 8:return Yt(t,r,r.pendingProps.children,a),r.child;case 12:return Yt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Vr(r,r.type,l.value),Yt(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ta(r),f=an(f),l=l(f),r.flags|=1,Yt(t,r,l,a),r.child;case 14:return Wy(t,r,r.type,r.pendingProps,a);case 15:return Zy(t,r,r.type,r.pendingProps,a);case 19:return av(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ru(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ks(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Jy(t,r,a);case 24:return ta(r),l=an(Vt),t===null?(f=Hd(),f===null&&(f=it,m=Bd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},Qd(r),Vr(r,Vt,f)):((t.lanes&a)!==0&&($d(t,r),bl(r,null,null,a),Sl()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Vr(r,Vt,l)):(l=m.cache,Vr(r,Vt,l),l!==f.cache&&zd(r,[Vt],a,!0))),Yt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function nr(t){t.flags|=4}function lv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!g_(r)){if(r=Qn.current,r!==null&&((Be&4194048)===Be?Ns!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==Ns))throw _l=Gd,Gg;t.flags|=8192}}function Cu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?wr():536870912,t.lanes|=r,ro|=r)}function Cl(t,r){if(!$e)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function Ob(t,r,a){var l=r.pendingProps;switch(Vd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zs(Vt),es(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(dl(r)?nr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qg())),pt(r),null;case 26:return a=r.memoizedState,t===null?(nr(r),a!==null?(pt(r),lv(r,a)):(pt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(nr(r),pt(r),lv(r,a)):(pt(r),r.flags&=-16777217):(t.memoizedProps!==l&&nr(r),pt(r),r.flags&=-16777217),null;case 27:Ta(r),a=pe.current;var f=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&nr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}t=ce.current,dl(r)?Lg(r):(t=l_(f,l,a),r.stateNode=t,nr(r))}return pt(r),null;case 5:if(Ta(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&nr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}if(t=ce.current,dl(r))Lg(r);else{switch(f=Bu(pe.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[bt]=r,t[Kt]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=t;e:switch(Wt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&nr(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&nr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=pe.current,dl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=yn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[bt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||t_(t.nodeValue,a)),t||Ji(r)}else t=Bu(t).createTextNode(l),t[bt]=r,r.stateNode=t}return pt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=dl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[bt]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),f=!1}else f=qg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(er(r),r):(er(r),null)}if(er(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Cu(r,r.updateQueue),pt(r),null;case 4:return es(),t===null&&Xf(r.stateNode.containerInfo),pt(r),null;case 10:return Zs(r.type),pt(r),null;case 19:if(he(Lt),f=r.memoizedState,f===null)return pt(r),null;if(l=(r.flags&128)!==0,m=f.rendering,m===null)if(l)Cl(f,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=wu(t),m!==null){for(r.flags|=128,Cl(f,!1),t=m.updateQueue,r.updateQueue=t,Cu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)kg(a,t),a=a.sibling;return L(Lt,Lt.current&1|2),r.child}t=t.sibling}f.tail!==null&&vn()>Du&&(r.flags|=128,l=!0,Cl(f,!1),r.lanes=4194304)}else{if(!l)if(t=wu(m),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Cu(r,t),Cl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!$e)return pt(r),null}else 2*vn()-f.renderingStartTime>Du&&a!==536870912&&(r.flags|=128,l=!0,Cl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(t=f.last,t!==null?t.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=vn(),r.sibling=null,t=Lt.current,L(Lt,l?t&1|2:t&1),r):(pt(r),null);case 22:case 23:return er(r),Wd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Cu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&he(na),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Zs(Vt),pt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Mb(t,r){switch(Vd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Zs(Vt),es(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Ta(r),null;case 13:if(er(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));fl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return he(Lt),null;case 4:return es(),null;case 10:return Zs(r.type),null;case 22:case 23:return er(r),Wd(),t!==null&&he(na),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Zs(Vt),null;case 25:return null;default:return null}}function cv(t,r){switch(Vd(r),r.tag){case 3:Zs(Vt),es();break;case 26:case 27:case 5:Ta(r);break;case 4:es();break;case 13:er(r);break;case 19:he(Lt);break;case 10:Zs(r.type);break;case 22:case 23:er(r),Wd(),t!==null&&he(na);break;case 24:Zs(Vt)}}function Il(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,S=a.inst;l=m(),S.destroy=l}a=a.next}while(a!==f)}}catch(w){st(r,r.return,w)}}function Hr(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var S=l.inst,w=S.destroy;if(w!==void 0){S.destroy=void 0,f=r;var P=a,Y=w;try{Y()}catch(te){st(f,P,te)}}}l=l.next}while(l!==m)}}catch(te){st(r,r.return,te)}}function uv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Wg(r,a)}catch(l){st(t,t.return,l)}}}function hv(t,r,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,r,l)}}function jl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){st(t,r,f)}}function Rs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){st(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(t,r,f)}else a.current=null}function dv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){st(t,t.return,f)}}function Af(t,r,a){try{var l=t.stateNode;nT(l,t.type,a,r),l[Kt]=r}catch(f){st(t,t.return,f)}}function fv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zr(t.type)||t.tag===4}function Nf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=zu));else if(l!==4&&(l===27&&Zr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Rf(t,r,a),t=t.sibling;t!==null;)Rf(t,r,a),t=t.sibling}function Iu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Zr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,r,a),t=t.sibling;t!==null;)Iu(t,r,a),t=t.sibling}function mv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Wt(r,l,a),r[bt]=t,r[Kt]=a}catch(m){st(t,t.return,m)}}var sr=!1,At=!1,Cf=!1,pv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function kb(t,r){if(t=t.containerInfo,Jf=Ku,t=Ag(t),Ad(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,w=-1,P=-1,Y=0,te=0,oe=t,W=null;t:for(;;){for(var Z;oe!==a||f!==0&&oe.nodeType!==3||(w=S+f),oe!==m||l!==0&&oe.nodeType!==3||(P=S+l),oe.nodeType===3&&(S+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)W=oe,oe=Z;for(;;){if(oe===t)break t;if(W===a&&++Y===f&&(w=S),W===m&&++te===l&&(P=S),(Z=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=Z}a=w===-1||P===-1?null:{start:w,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(em={focusedElem:t,selectionRange:a},Ku=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ae=ra(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ae,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){st(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)sm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}}function gv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Gr(t,a),l&4&&Il(5,a);break;case 1:if(Gr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(S){st(a,a.return,S)}else{var f=ra(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(S){st(a,a.return,S)}}l&64&&uv(a),l&512&&jl(a,a.return);break;case 3:if(Gr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wg(t,r)}catch(S){st(a,a.return,S)}}break;case 27:r===null&&l&4&&mv(a);case 26:case 5:Gr(t,a),r===null&&l&4&&dv(a),l&512&&jl(a,a.return);break;case 12:Gr(t,a);break;case 13:Gr(t,a),l&4&&_v(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Gb.bind(null,a),cT(t,a))));break;case 22:if(l=a.memoizedState!==null||sr,!l){r=r!==null&&r.memoizedState!==null||At,f=sr;var m=At;sr=l,(At=r)&&!m?Qr(t,a,(a.subtreeFlags&8772)!==0):Gr(t,a),sr=f,At=m}break;case 30:break;default:Gr(t,a)}}function yv(t){var r=t.alternate;r!==null&&(t.alternate=null,yv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ra(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,En=!1;function rr(t,r,a){for(a=a.child;a!==null;)vv(t,r,a),a=a.sibling}function vv(t,r,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Sr,a)}catch{}switch(a.tag){case 26:At||Rs(a,r),rr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||Rs(a,r);var l=dt,f=En;Zr(a.type)&&(dt=a.stateNode,En=!1),rr(t,r,a),ql(a.stateNode),dt=l,En=f;break;case 5:At||Rs(a,r);case 6:if(l=dt,f=En,dt=null,rr(t,r,a),dt=l,En=f,dt!==null)if(En)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(m){st(a,r,m)}else try{dt.removeChild(a.stateNode)}catch(m){st(a,r,m)}break;case 18:dt!==null&&(En?(t=dt,a_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Kl(t)):a_(dt,a.stateNode));break;case 4:l=dt,f=En,dt=a.stateNode.containerInfo,En=!0,rr(t,r,a),dt=l,En=f;break;case 0:case 11:case 14:case 15:At||Hr(2,a,r),At||Hr(4,a,r),rr(t,r,a);break;case 1:At||(Rs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&hv(a,r,l)),rr(t,r,a);break;case 21:rr(t,r,a);break;case 22:At=(l=At)||a.memoizedState!==null,rr(t,r,a),At=l;break;default:rr(t,r,a)}}function _v(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(a){st(r,r.return,a)}}function Vb(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new pv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new pv),r;default:throw Error(i(435,t.tag))}}function If(t,r){var a=Vb(t);r.forEach(function(l){var f=Qb.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function Cn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,S=r,w=S;e:for(;w!==null;){switch(w.tag){case 27:if(Zr(w.type)){dt=w.stateNode,En=!1;break e}break;case 5:dt=w.stateNode,En=!1;break e;case 3:case 4:dt=w.stateNode.containerInfo,En=!0;break e}w=w.return}if(dt===null)throw Error(i(160));vv(m,S,f),dt=null,En=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ev(r,t),r=r.sibling}var cs=null;function Ev(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(r,t),In(t),l&4&&(Hr(3,t,t.return),Il(3,t),Hr(5,t,t.return));break;case 1:Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),l&64&&sr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=cs;if(Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Nr]||m[bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Wt(m,l,a),m[bt]=t,Tt(m),l=m;break e;case"link":var S=m_("link","href",f).get(l+(a.href||""));if(S){for(var w=0;w<S.length;w++)if(m=S[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(w,1);break t}}m=f.createElement(l),Wt(m,l,a),f.head.appendChild(m);break;case"meta":if(S=m_("meta","content",f).get(l+(a.content||""))){for(w=0;w<S.length;w++)if(m=S[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(w,1);break t}}m=f.createElement(l),Wt(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[bt]=t,Tt(m),l=m}t.stateNode=l}else p_(f,t.type,t.stateNode);else t.stateNode=f_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?p_(f,t.type,t.stateNode):f_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Af(t,t.memoizedProps,a.memoizedProps)}break;case 27:Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),a!==null&&l&4&&Af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),t.flags&32){f=t.stateNode;try{qn(f,"")}catch(Z){st(t,t.return,Z)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Af(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Cf=!0);break;case 6:if(Cn(r,t),In(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Z){st(t,t.return,Z)}}break;case 3:if(Gu=null,f=cs,cs=Fu(r.containerInfo),Cn(r,t),cs=f,In(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch(Z){st(t,t.return,Z)}Cf&&(Cf=!1,Sv(t));break;case 4:l=cs,cs=Fu(t.stateNode.containerInfo),Cn(r,t),In(t),cs=l;break;case 12:Cn(r,t),In(t);break;case 13:Cn(r,t),In(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kf=vn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,If(t,l)));break;case 22:f=t.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=sr,te=At;if(sr=Y||f,At=te||P,Cn(r,t),At=te,sr=Y,In(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||P||sr||At||ia(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(m=P.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{w=P.stateNode;var oe=P.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){st(P,P.return,Z)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Z){st(P,P.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,If(t,a))));break;case 19:Cn(r,t),In(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,If(t,l)));break;case 30:break;case 21:break;default:Cn(r,t),In(t)}}function In(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(fv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=Nf(t);Iu(t,m,f);break;case 5:var S=a.stateNode;a.flags&32&&(qn(S,""),a.flags&=-33);var w=Nf(t);Iu(t,w,S);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=Nf(t);Rf(t,Y,P);break;default:throw Error(i(161))}}catch(te){st(t,t.return,te)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Sv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Sv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Gr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)gv(t,r.alternate,r),r=r.sibling}function ia(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Hr(4,r,r.return),ia(r);break;case 1:Rs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&hv(r,r.return,a),ia(r);break;case 27:ql(r.stateNode);case 26:case 5:Rs(r,r.return),ia(r);break;case 22:r.memoizedState===null&&ia(r);break;case 30:ia(r);break;default:ia(r)}t=t.sibling}}function Qr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,S=m.flags;switch(m.tag){case 0:case 11:case 15:Qr(f,m,a),Il(4,m);break;case 1:if(Qr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){st(l,l.return,Y)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)Xg(P[f],w)}catch(Y){st(l,l.return,Y)}}a&&S&64&&uv(m),jl(m,m.return);break;case 27:mv(m);case 26:case 5:Qr(f,m,a),a&&l===null&&S&4&&dv(m),jl(m,m.return);break;case 12:Qr(f,m,a);break;case 13:Qr(f,m,a),a&&S&4&&_v(f,m);break;case 22:m.memoizedState===null&&Qr(f,m,a),jl(m,m.return);break;case 30:break;default:Qr(f,m,a)}r=r.sibling}}function jf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gl(a))}function Df(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gl(t))}function Cs(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bv(t,r,a,l),r=r.sibling}function bv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Cs(t,r,a,l),f&2048&&Il(9,r);break;case 1:Cs(t,r,a,l);break;case 3:Cs(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gl(t)));break;case 12:if(f&2048){Cs(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,S=m.id,w=m.onPostCommit;typeof w=="function"&&w(S,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){st(r,r.return,P)}}else Cs(t,r,a,l);break;case 13:Cs(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,S=r.alternate,r.memoizedState!==null?m._visibility&2?Cs(t,r,a,l):Dl(t,r):m._visibility&2?Cs(t,r,a,l):(m._visibility|=2,to(t,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&jf(S,r);break;case 24:Cs(t,r,a,l),f&2048&&Df(r.alternate,r);break;default:Cs(t,r,a,l)}}function to(t,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,S=r,w=a,P=l,Y=S.flags;switch(S.tag){case 0:case 11:case 15:to(m,S,w,P,f),Il(8,S);break;case 23:break;case 22:var te=S.stateNode;S.memoizedState!==null?te._visibility&2?to(m,S,w,P,f):Dl(m,S):(te._visibility|=2,to(m,S,w,P,f)),f&&Y&2048&&jf(S.alternate,S);break;case 24:to(m,S,w,P,f),f&&Y&2048&&Df(S.alternate,S);break;default:to(m,S,w,P,f)}r=r.sibling}}function Dl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Dl(a,l),f&2048&&jf(l.alternate,l);break;case 24:Dl(a,l),f&2048&&Df(l.alternate,l);break;default:Dl(a,l)}r=r.sibling}}var Pl=8192;function no(t){if(t.subtreeFlags&Pl)for(t=t.child;t!==null;)Tv(t),t=t.sibling}function Tv(t){switch(t.tag){case 26:no(t),t.flags&Pl&&t.memoizedState!==null&&bT(cs,t.memoizedState,t.memoizedProps);break;case 5:no(t);break;case 3:case 4:var r=cs;cs=Fu(t.stateNode.containerInfo),no(t),cs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Pl,Pl=16777216,no(t),Pl=r):no(t));break;default:no(t)}}function wv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ol(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Av(l,t)}wv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 0:case 11:case 15:Ol(t),t.flags&2048&&Hr(9,t,t.return);break;case 3:Ol(t);break;case 12:Ol(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ju(t)):Ol(t);break;default:Ol(t)}}function ju(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Av(l,t)}wv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Hr(8,r,r.return),ju(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ju(r));break;default:ju(r)}t=t.sibling}}function Av(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Hr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var f=l.sibling,m=l.return;if(yv(l),l===a){Gt=null;break e}if(f!==null){f.return=m,Gt=f;break e}Gt=m}}}var Lb={getCacheForType:function(t){var r=an(Vt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},Ub=typeof WeakMap=="function"?WeakMap:Map,Xe=0,it=null,Me=null,Be=0,We=0,jn=null,$r=!1,so=!1,Pf=!1,ir=0,vt=0,Kr=0,aa=0,Of=0,$n=0,ro=0,Ml=null,Sn=null,Mf=!1,kf=0,Du=1/0,Pu=null,Yr=null,Xt=0,Xr=null,io=null,ao=0,Vf=0,Lf=null,Nv=null,kl=0,Uf=null;function Dn(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(ee.T!==null){var t=$a;return t!==0?t:Qf()}return zs()}function Rv(){$n===0&&($n=(Be&536870912)===0||$e?Qo():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),$n}function Pn(t,r,a){(t===it&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(oo(t,0),Wr(t,Be,$n,!1)),St(t,a),((Xe&2)===0||t!==it)&&(t===it&&((Xe&2)===0&&(aa|=a),vt===4&&Wr(t,Be,$n,!1)),Is(t))}function Cv(t,r,a){if((Xe&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Tr(t,r),f=l?Bb(t,r):Bf(t,r,!0),m=l;do{if(f===0){so&&!l&&Wr(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!qb(a)){f=Bf(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var w=t;f=Ml;var P=w.current.memoizedState.isDehydrated;if(P&&(oo(w,S).flags|=256),S=Bf(w,S,!1),S!==2){if(Pf&&!P){w.errorRecoveryDisabledLanes|=m,aa|=m,f=4;break e}m=Sn,Sn=f,m!==null&&(Sn===null?Sn=m:Sn.push.apply(Sn,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){oo(t,0),Wr(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Wr(l,r,$n,!$r);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=kf+300-vn(),10<f)){if(Wr(l,r,$n,!$r),Ln(l,0,!0)!==0)break e;l.timeoutHandle=r_(Iv.bind(null,l,a,Sn,Pu,Mf,r,$n,aa,ro,$r,m,2,-0,0),f);break e}Iv(l,a,Sn,Pu,Mf,r,$n,aa,ro,$r,m,0,-0,0)}}break}while(!0);Is(t)}function Iv(t,r,a,l,f,m,S,w,P,Y,te,oe,W,Z){if(t.timeoutHandle=-1,oe=r.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Fl={stylesheets:null,count:0,unsuspend:ST},Tv(r),oe=TT(),oe!==null)){t.cancelPendingCommit=oe(Vv.bind(null,t,r,m,a,l,f,S,w,P,te,1,W,Z)),Wr(t,m,S,!Y);return}Vv(t,r,m,a,l,f,S,w,P)}function qb(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wr(t,r,a,l){r&=~Of,r&=~aa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-fn(f),S=1<<m;l[m]=-1,f&=~S}a!==0&&xr(t,a,r)}function Ou(){return(Xe&6)===0?(Vl(0),!1):!0}function qf(){if(Me!==null){if(We===0)var t=Me.return;else t=Me,Ws=ea=null,nf(t),Ja=null,Nl=0,t=Me;for(;t!==null;)cv(t.alternate,t),t=t.return;Me=null}}function oo(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,rT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),qf(),it=t,Me=a=Ks(t.current,null),Be=r,We=0,jn=null,$r=!1,so=Tr(t,r),Pf=!1,ro=$n=Of=aa=Kr=vt=0,Sn=Ml=null,Mf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-fn(l),m=1<<f;r|=t[f],l&=~m}return ir=r,nu(),a}function jv(t,r){De=null,ee.H=Su,r===vl||r===hu?(r=Kg(),We=3):r===Gg?(r=Kg(),We=4):We=r===Yy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jn=r,Me===null&&(vt=1,Au(t,Bn(r,t.current)))}function Dv(){var t=ee.H;return ee.H=Su,t===null?Su:t}function Pv(){var t=ee.A;return ee.A=Lb,t}function zf(){vt=4,$r||(Be&4194048)!==Be&&Qn.current!==null||(so=!0),(Kr&134217727)===0&&(aa&134217727)===0||it===null||Wr(it,Be,$n,!1)}function Bf(t,r,a){var l=Xe;Xe|=2;var f=Dv(),m=Pv();(it!==t||Be!==r)&&(Pu=null,oo(t,r)),r=!1;var S=vt;e:do try{if(We!==0&&Me!==null){var w=Me,P=jn;switch(We){case 8:qf(),S=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var Y=We;if(We=0,jn=null,lo(t,w,P,Y),a&&so){S=0;break e}break;default:Y=We,We=0,jn=null,lo(t,w,P,Y)}}zb(),S=vt;break}catch(te){jv(t,te)}while(!0);return r&&t.shellSuspendCounter++,Ws=ea=null,Xe=l,ee.H=f,ee.A=m,Me===null&&(it=null,Be=0,nu()),S}function zb(){for(;Me!==null;)Ov(Me)}function Bb(t,r){var a=Xe;Xe|=2;var l=Dv(),f=Pv();it!==t||Be!==r?(Pu=null,Du=vn()+500,oo(t,r)):so=Tr(t,r);e:do try{if(We!==0&&Me!==null){r=Me;var m=jn;t:switch(We){case 1:We=0,jn=null,lo(t,r,m,1);break;case 2:case 9:if(Qg(m)){We=0,jn=null,Mv(r);break}r=function(){We!==2&&We!==9||it!==t||(We=7),Is(t)},m.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Qg(m)?(We=0,jn=null,Mv(r)):(We=0,jn=null,lo(t,r,m,7));break;case 5:var S=null;switch(Me.tag){case 26:S=Me.memoizedState;case 5:case 27:var w=Me;if(!S||g_(S)){We=0,jn=null;var P=w.sibling;if(P!==null)Me=P;else{var Y=w.return;Y!==null?(Me=Y,Mu(Y)):Me=null}break t}}We=0,jn=null,lo(t,r,m,5);break;case 6:We=0,jn=null,lo(t,r,m,6);break;case 8:qf(),vt=6;break e;default:throw Error(i(462))}}Fb();break}catch(te){jv(t,te)}while(!0);return Ws=ea=null,ee.H=l,ee.A=f,Xe=a,Me!==null?0:(it=null,Be=0,nu(),vt)}function Fb(){for(;Me!==null&&!pd();)Ov(Me)}function Ov(t){var r=ov(t.alternate,t,ir);t.memoizedProps=t.pendingProps,r===null?Mu(t):Me=r}function Mv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=tv(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=tv(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:nf(r);default:cv(a,r),r=Me=kg(r,ir),r=ov(a,r,ir)}t.memoizedProps=t.pendingProps,r===null?Mu(t):Me=r}function lo(t,r,a,l){Ws=ea=null,nf(r),Ja=null,Nl=0;var f=r.return;try{if(Db(t,f,r,a,Be)){vt=1,Au(t,Bn(a,t.current)),Me=null;return}}catch(m){if(f!==null)throw Me=f,m;vt=1,Au(t,Bn(a,t.current)),Me=null;return}r.flags&32768?($e||l===1?t=!0:so||(Be&536870912)!==0?t=!1:($r=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),kv(r,t)):Mu(r)}function Mu(t){var r=t;do{if((r.flags&32768)!==0){kv(r,$r);return}t=r.return;var a=Ob(r.alternate,r,ir);if(a!==null){Me=a;return}if(r=r.sibling,r!==null){Me=r;return}Me=r=t}while(r!==null);vt===0&&(vt=5)}function kv(t,r){do{var a=Mb(t.alternate,t);if(a!==null){a.flags&=32767,Me=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Me=t;return}Me=t=a}while(t!==null);vt=6,Me=null}function Vv(t,r,a,l,f,m,S,w,P){t.cancelPendingCommit=null;do ku();while(Xt!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=jd,Uc(t,a,m,S,w,P),t===it&&(Me=it=null,Be=0),io=r,Xr=t,ao=a,Vf=m,Lf=f,Nv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$b(qs,function(){return Bv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,f=fe.p,fe.p=2,S=Xe,Xe|=4;try{kb(t,r,a)}finally{Xe=S,fe.p=f,ee.T=l}}Xt=1,Lv(),Uv(),qv()}}function Lv(){if(Xt===1){Xt=0;var t=Xr,r=io,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var l=fe.p;fe.p=2;var f=Xe;Xe|=4;try{Ev(r,t);var m=em,S=Ag(t.containerInfo),w=m.focusedElem,P=m.selectionRange;if(S!==w&&w&&w.ownerDocument&&xg(w.ownerDocument.documentElement,w)){if(P!==null&&Ad(w)){var Y=P.start,te=P.end;if(te===void 0&&(te=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(te,w.value.length);else{var oe=w.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ae=w.textContent.length,be=Math.min(P.start,Ae),nt=P.end===void 0?be:Math.min(P.end,Ae);!Z.extend&&be>nt&&(S=nt,nt=be,be=S);var H=wg(w,be),U=wg(w,nt);if(H&&U&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==U.node||Z.focusOffset!==U.offset)){var $=oe.createRange();$.setStart(H.node,H.offset),Z.removeAllRanges(),be>nt?(Z.addRange($),Z.extend(U.node,U.offset)):($.setEnd(U.node,U.offset),Z.addRange($))}}}}for(oe=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var re=oe[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ku=!!Jf,em=Jf=null}finally{Xe=f,fe.p=l,ee.T=a}}t.current=r,Xt=2}}function Uv(){if(Xt===2){Xt=0;var t=Xr,r=io,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var l=fe.p;fe.p=2;var f=Xe;Xe|=4;try{gv(t,r.alternate,r)}finally{Xe=f,fe.p=l,ee.T=a}}Xt=3}}function qv(){if(Xt===4||Xt===3){Xt=0,Ho();var t=Xr,r=io,a=ao,l=Nv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,io=Xr=null,zv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Yr=null),Ko(a),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Sr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=ee.T,f=fe.p,fe.p=2,ee.T=null;try{for(var m=t.onRecoverableError,S=0;S<l.length;S++){var w=l[S];m(w.value,{componentStack:w.stack})}}finally{ee.T=r,fe.p=f}}(ao&3)!==0&&ku(),Is(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===Uf?kl++:(kl=0,Uf=t):kl=0,Vl(0)}}function zv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gl(r)))}function ku(t){return Lv(),Uv(),qv(),Bv()}function Bv(){if(Xt!==5)return!1;var t=Xr,r=Vf;Vf=0;var a=Ko(ao),l=ee.T,f=fe.p;try{fe.p=32>a?32:a,ee.T=null,a=Lf,Lf=null;var m=Xr,S=ao;if(Xt=0,io=Xr=null,ao=0,(Xe&6)!==0)throw Error(i(331));var w=Xe;if(Xe|=4,xv(m.current),bv(m,m.current,S,a),Xe=w,Vl(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Sr,m)}catch{}return!0}finally{fe.p=f,ee.T=l,zv(t,r)}}function Fv(t,r,a){r=Bn(a,r),r=yf(t.stateNode,r,2),t=qr(t,r,2),t!==null&&(St(t,2),Is(t))}function st(t,r,a){if(t.tag===3)Fv(t,t,a);else for(;r!==null;){if(r.tag===3){Fv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yr===null||!Yr.has(l))){t=Bn(a,t),a=$y(2),l=qr(r,a,2),l!==null&&(Ky(a,l,r,t),St(l,2),Is(l));break}}r=r.return}}function Ff(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Ub;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Pf=!0,f.add(a),t=Hb.bind(null,t,r,a),r.then(t,t))}function Hb(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Be&a)===a&&(vt===4||vt===3&&(Be&62914560)===Be&&300>vn()-kf?(Xe&2)===0&&oo(t,0):Of|=a,ro===Be&&(ro=0)),Is(t)}function Hv(t,r){r===0&&(r=wr()),t=Fa(t,r),t!==null&&(St(t,r),Is(t))}function Gb(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Hv(t,a)}function Qb(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Hv(t,a)}function $b(t,r){return xi(t,r)}var Vu=null,co=null,Hf=!1,Lu=!1,Gf=!1,oa=0;function Is(t){t!==co&&t.next===null&&(co===null?Vu=co=t:co=co.next=t),Lu=!0,Hf||(Hf=!0,Yb())}function Vl(t,r){if(!Gf&&Lu){Gf=!0;do for(var a=!1,l=Vu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var S=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-fn(42|t)+1)-1,m&=f&~(S&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Kv(l,m))}else m=Be,m=Ln(l,l===it?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Tr(l,m)||(a=!0,Kv(l,m));l=l.next}while(a);Gf=!1}}function Kb(){Gv()}function Gv(){Lu=Hf=!1;var t=0;oa!==0&&(sT()&&(t=oa),oa=0);for(var r=vn(),a=null,l=Vu;l!==null;){var f=l.next,m=Qv(l,r);m===0?(l.next=null,a===null?Vu=f:a.next=f,f===null&&(co=a)):(a=l,(t!==0||(m&3)!==0)&&(Lu=!0)),l=f}Vl(t)}function Qv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var S=31-fn(m),w=1<<S,P=f[S];P===-1?((w&a)===0||(w&l)!==0)&&(f[S]=Aa(w,r)):P<=r&&(t.expiredLanes|=w),m&=~w}if(r=it,a=Be,a=Ln(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&xa(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Tr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&xa(l),Ko(a)){case 2:case 8:a=Bt;break;case 32:a=qs;break;case 268435456:a=Go;break;default:a=qs}return l=$v.bind(null,t),a=xi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&xa(l),t.callbackPriority=2,t.callbackNode=null,2}function $v(t,r){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=Be;return l=Ln(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Cv(t,l,r),Qv(t,vn()),t.callbackNode!=null&&t.callbackNode===a?$v.bind(null,t):null)}function Kv(t,r){if(ku())return null;Cv(t,r,!0)}function Yb(){iT(function(){(Xe&6)!==0?xi(Mt,Kb):Gv()})}function Qf(){return oa===0&&(oa=Qo()),oa}function Yv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rs(""+t)}function Xv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Xb(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=Yv((f[Kt]||null).action),S=l.submitter;S&&(r=(r=S[Kt]||null)?Yv(r.formAction):S.getAttribute("formAction"),r!==null&&(m=r,S=null));var w=new qi("action","action",null,l,f);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(oa!==0){var P=S?Xv(f,S):new FormData(f);df(a,{pending:!0,data:P,method:f.method,action:m},null,P)}}else typeof m=="function"&&(w.preventDefault(),P=S?Xv(f,S):new FormData(f),df(a,{pending:!0,data:P,method:f.method,action:m},m,P))},currentTarget:f}]})}}for(var $f=0;$f<Id.length;$f++){var Kf=Id[$f],Wb=Kf.toLowerCase(),Zb=Kf[0].toUpperCase()+Kf.slice(1);ls(Wb,"on"+Zb)}ls(Cg,"onAnimationEnd"),ls(Ig,"onAnimationIteration"),ls(jg,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(pb,"onTransitionRun"),ls(gb,"onTransitionStart"),ls(yb,"onTransitionCancel"),ls(Dg,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function Wv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var S=l.length-1;0<=S;S--){var w=l[S],P=w.instance,Y=w.currentTarget;if(w=w.listener,P!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=Y;try{m(f)}catch(te){xu(te)}f.currentTarget=null,m=P}else for(S=0;S<l.length;S++){if(w=l[S],P=w.instance,Y=w.currentTarget,w=w.listener,P!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=Y;try{m(f)}catch(te){xu(te)}f.currentTarget=null,m=P}}}}function ke(t,r){var a=r[Ni];a===void 0&&(a=r[Ni]=new Set);var l=t+"__bubble";a.has(l)||(Zv(r,t,2,!1),a.add(l))}function Yf(t,r,a){var l=0;r&&(l|=4),Zv(a,t,l,r)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[Uu]){t[Uu]=!0,qc.forEach(function(a){a!=="selectionchange"&&(Jb.has(a)||Yf(a,!1,t),Yf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Uu]||(r[Uu]=!0,Yf("selectionchange",!1,r))}}function Zv(t,r,a,l){switch(b_(r)){case 2:var f=AT;break;case 8:f=NT;break;default:f=um}a=f.bind(null,r,a,t),f=void 0,!Qs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Wf(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var w=l.stateNode.containerInfo;if(w===f)break;if(S===4)for(S=l.return;S!==null;){var P=S.tag;if((P===3||P===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;w!==null;){if(S=_s(w),S===null)return;if(P=S.tag,P===5||P===6||P===26||P===27){l=m=S;continue e}w=w.parentNode}}l=l.return}Vi(function(){var Y=m,te=tl(a),oe=[];e:{var W=Pg.get(t);if(W!==void 0){var Z=qi,Ae=t;switch(t){case"keypress":if(Li(a)===0)break e;case"keydown":case"keyup":Z=Ua;break;case"focusin":Ae="focus",Z=ka;break;case"focusout":Ae="blur",Z=ka;break;case"beforeblur":case"afterblur":Z=ka;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=$c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=kr;break;case Cg:case Ig:case jg:Z=sl;break;case Dg:Z=v;break;case"scroll":case"scrollend":Z=Bi;break;case"wheel":Z=N;break;case"copy":case"cut":case"paste":Z=Yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=al;break;case"toggle":case"beforetoggle":Z=J}var be=(r&4)!==0,nt=!be&&(t==="scroll"||t==="scrollend"),H=be?W!==null?W+"Capture":null:W;be=[];for(var U=Y,$;U!==null;){var re=U;if($=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||$===null||H===null||(re=Or(U,H),re!=null&&be.push(Ul(U,re,$))),nt)break;U=U.return}0<be.length&&(W=new Z(W,Ae,null,a,te),oe.push({event:W,listeners:be}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&a!==el&&(Ae=a.relatedTarget||a.fromElement)&&(_s(Ae)||Ae[Bs]))break e;if((Z||W)&&(W=te.window===te?te:(W=te.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ae=a.relatedTarget||a.toElement,Z=Y,Ae=Ae?_s(Ae):null,Ae!==null&&(nt=u(Ae),be=Ae.tag,Ae!==nt||be!==5&&be!==27&&be!==6)&&(Ae=null)):(Z=null,Ae=Y),Z!==Ae)){if(be=Gi,re="onMouseLeave",H="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(be=al,re="onPointerLeave",H="onPointerEnter",U="pointer"),nt=Z==null?W:Rr(Z),$=Ae==null?W:Rr(Ae),W=new be(re,U+"leave",Z,a,te),W.target=nt,W.relatedTarget=$,re=null,_s(te)===Y&&(be=new be(H,U+"enter",Ae,a,te),be.target=$,be.relatedTarget=nt,re=be),nt=re,Z&&Ae)t:{for(be=Z,H=Ae,U=0,$=be;$;$=uo($))U++;for($=0,re=H;re;re=uo(re))$++;for(;0<U-$;)be=uo(be),U--;for(;0<$-U;)H=uo(H),$--;for(;U--;){if(be===H||H!==null&&be===H.alternate)break t;be=uo(be),H=uo(H)}be=null}else be=null;Z!==null&&Jv(oe,W,Z,be,!1),Ae!==null&&nt!==null&&Jv(oe,nt,Ae,be,!0)}}e:{if(W=Y?Rr(Y):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var ve=vg;else if(gg(W))if(_g)ve=db;else{ve=ub;var Oe=cb}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Pa(Y.elementType)&&(ve=vg):ve=hb;if(ve&&(ve=ve(t,Y))){yg(oe,ve,a,te);break e}Oe&&Oe(t,W,Y),t==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&Wo(W,"number",W.value)}switch(Oe=Y?Rr(Y):window,t){case"focusin":(gg(Oe)||Oe.contentEditable==="true")&&(qa=Oe,Nd=Y,hl=null);break;case"focusout":hl=Nd=qa=null;break;case"mousedown":Rd=!0;break;case"contextmenu":case"mouseup":case"dragend":Rd=!1,Ng(oe,a,te);break;case"selectionchange":if(mb)break;case"keydown":case"keyup":Ng(oe,a,te)}var Ee;if(Re)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else os?is(t,a)&&(Te="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(wt&&a.locale!=="ko"&&(os||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&os&&(Ee=Qc()):(zn=te,rt="value"in zn?zn.value:zn.textContent,os=!0)),Oe=qu(Y,Te),0<Oe.length&&(Te=new il(Te,t,null,a,te),oe.push({event:Te,listeners:Oe}),Ee?Te.data=Ee:(Ee=as(a),Ee!==null&&(Te.data=Ee)))),(Ee=Ye?ol(t,a):ab(t,a))&&(Te=qu(Y,"onBeforeInput"),0<Te.length&&(Oe=new il("onBeforeInput","beforeinput",null,a,te),oe.push({event:Oe,listeners:Te}),Oe.data=Ee)),Xb(oe,t,Y,a,te)}Wv(oe,r)})}function Ul(t,r,a){return{instance:t,listener:r,currentTarget:a}}function qu(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Or(t,a),f!=null&&l.unshift(Ul(t,f,m)),f=Or(t,r),f!=null&&l.push(Ul(t,f,m))),t.tag===3)return l;t=t.return}return[]}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jv(t,r,a,l,f){for(var m=r._reactName,S=[];a!==null&&a!==l;){var w=a,P=w.alternate,Y=w.stateNode;if(w=w.tag,P!==null&&P===l)break;w!==5&&w!==26&&w!==27||Y===null||(P=Y,f?(Y=Or(a,m),Y!=null&&S.unshift(Ul(a,Y,P))):f||(Y=Or(a,m),Y!=null&&S.push(Ul(a,Y,P)))),a=a.return}S.length!==0&&t.push({event:r,listeners:S})}var eT=/\r\n?/g,tT=/\u0000|\uFFFD/g;function e_(t){return(typeof t=="string"?t:""+t).replace(eT,`
`).replace(tT,"")}function t_(t,r){return r=e_(r),e_(t)===r}function zu(){}function tt(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||qn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&qn(t,""+l);break;case"className":Di(t,"class",l);break;case"tabIndex":Di(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(t,a,l);break;case"style":Jo(t,l,m);break;case"data":if(r!=="object"){Di(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=rs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&tt(t,r,"name",f.name,f,null),tt(t,r,"formEncType",f.formEncType,f,null),tt(t,r,"formMethod",f.formMethod,f,null),tt(t,r,"formTarget",f.formTarget,f,null)):(tt(t,r,"encType",f.encType,f,null),tt(t,r,"method",f.method,f,null),tt(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=rs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=zu);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=rs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),ji(t,"popover",l);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ji(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fc.get(a)||a,ji(t,a,l))}}function Zf(t,r,a,l,f,m){switch(a){case"style":Jo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?qn(t,l):(typeof l=="number"||typeof l=="bigint")&&qn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ci.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[Kt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ji(t,a,l)}}}function Wt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:tt(t,r,m,S,a,null)}}f&&tt(t,r,"srcSet",a.srcSet,a,null),l&&tt(t,r,"src",a.src,a,null);return;case"input":ke("invalid",t);var w=m=S=f=null,P=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":f=te;break;case"type":S=te;break;case"checked":P=te;break;case"defaultChecked":Y=te;break;case"value":m=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:tt(t,r,l,te,a,null)}}Xo(t,m,w,P,Y,S,f,!1),jr(t);return;case"select":ke("invalid",t),l=S=m=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":S=w;break;case"multiple":l=w;default:tt(t,r,f,w,a,null)}r=m,a=S,t.multiple=!!l,r!=null?Dr(t,!!l,r,!1):a!=null&&Dr(t,!!l,a,!0);return;case"textarea":ke("invalid",t),m=f=l=null;for(S in a)if(a.hasOwnProperty(S)&&(w=a[S],w!=null))switch(S){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:tt(t,r,S,w,a,null)}Bc(t,l,f,m),jr(t);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(t,r,P,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)ke(Ll[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:tt(t,r,Y,l,a,null)}return;default:if(Pa(r)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&Zf(t,r,te,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&tt(t,r,w,l,a,null))}function nT(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,w=null,P=null,Y=null,te=null;for(Z in a){var oe=a[Z];if(a.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":P=oe;default:l.hasOwnProperty(Z)||tt(t,r,Z,null,l,oe)}}for(var W in l){var Z=l[W];if(oe=a[W],l.hasOwnProperty(W)&&(Z!=null||oe!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":Y=Z;break;case"defaultChecked":te=Z;break;case"value":S=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==oe&&tt(t,r,W,Z,l,oe)}}Yo(t,S,w,P,Y,te,m,f);return;case"select":Z=S=w=W=null;for(m in a)if(P=a[m],a.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":Z=P;default:l.hasOwnProperty(m)||tt(t,r,m,null,l,P)}for(f in l)if(m=l[f],P=a[f],l.hasOwnProperty(f)&&(m!=null||P!=null))switch(f){case"value":W=m;break;case"defaultValue":w=m;break;case"multiple":S=m;default:m!==P&&tt(t,r,f,m,l,P)}r=w,a=S,l=Z,W!=null?Dr(t,!!a,W,!1):!!l!=!!a&&(r!=null?Dr(t,!!a,r,!0):Dr(t,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(t,r,w,null,l,f)}for(S in l)if(f=l[S],m=a[S],l.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&tt(t,r,S,f,l,m)}zc(t,W,Z);return;case"option":for(var Ae in a)if(W=a[Ae],a.hasOwnProperty(Ae)&&W!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":t.selected=!1;break;default:tt(t,r,Ae,null,l,W)}for(P in l)if(W=l[P],Z=a[P],l.hasOwnProperty(P)&&W!==Z&&(W!=null||Z!=null))switch(P){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:tt(t,r,P,W,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)W=a[be],a.hasOwnProperty(be)&&W!=null&&!l.hasOwnProperty(be)&&tt(t,r,be,null,l,W);for(Y in l)if(W=l[Y],Z=a[Y],l.hasOwnProperty(Y)&&W!==Z&&(W!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:tt(t,r,Y,W,l,Z)}return;default:if(Pa(r)){for(var nt in a)W=a[nt],a.hasOwnProperty(nt)&&W!==void 0&&!l.hasOwnProperty(nt)&&Zf(t,r,nt,void 0,l,W);for(te in l)W=l[te],Z=a[te],!l.hasOwnProperty(te)||W===Z||W===void 0&&Z===void 0||Zf(t,r,te,W,l,Z);return}}for(var H in a)W=a[H],a.hasOwnProperty(H)&&W!=null&&!l.hasOwnProperty(H)&&tt(t,r,H,null,l,W);for(oe in l)W=l[oe],Z=a[oe],!l.hasOwnProperty(oe)||W===Z||W==null&&Z==null||tt(t,r,oe,W,l,Z)}var Jf=null,em=null;function Bu(t){return t.nodeType===9?t:t.ownerDocument}function n_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function tm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nm=null;function sT(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var r_=typeof setTimeout=="function"?setTimeout:void 0,rT=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,iT=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(aT)}:r_;function aT(t){setTimeout(function(){throw t})}function Zr(t){return t==="head"}function a_(t,r){var a=r,l=0,f=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var S=t.ownerDocument;if(a&1&&ql(S.documentElement),a&2&&ql(S.body),a&4)for(a=S.head,ql(a),S=a.firstChild;S;){var w=S.nextSibling,P=S.nodeName;S[Nr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=w}}if(f===0){t.removeChild(m),Kl(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);Kl(r)}function sm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sm(a),Ra(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function oT(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Nr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=us(t.nextSibling),t===null)break}return null}function lT(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=us(t.nextSibling),t===null))return null;return t}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function cT(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function us(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var im=null;function o_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function l_(t,r,a){switch(r=Bu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ql(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ra(t)}var Kn=new Map,c_=new Set;function Fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ar=fe.d;fe.d={f:uT,r:hT,D:dT,C:fT,L:mT,m:pT,X:yT,S:gT,M:vT};function uT(){var t=ar.f(),r=Ou();return t||r}function hT(t){var r=Es(t);r!==null&&r.tag===5&&r.type==="form"?Cy(r):ar.r(t)}var ho=typeof document>"u"?null:document;function u_(t,r,a){var l=ho;if(l&&typeof r=="string"&&r){var f=Ft(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),c_.has(f)||(c_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Wt(r,"link",t),Tt(r),l.head.appendChild(r)))}}function dT(t){ar.D(t),u_("dns-prefetch",t,null)}function fT(t,r){ar.C(t,r),u_("preconnect",t,r)}function mT(t,r,a){ar.L(t,r,a);var l=ho;if(l&&t&&r){var f='link[rel="preload"][as="'+Ft(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ft(a.imageSizes)+'"]')):f+='[href="'+Ft(t)+'"]';var m=f;switch(r){case"style":m=fo(t);break;case"script":m=mo(t)}Kn.has(m)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Kn.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(zl(m))||r==="script"&&l.querySelector(Bl(m))||(r=l.createElement("link"),Wt(r,"link",t),Tt(r),l.head.appendChild(r)))}}function pT(t,r){ar.m(t,r);var a=ho;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Ft(l)+'"][href="'+Ft(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=mo(t)}if(!Kn.has(m)&&(t=_({rel:"modulepreload",href:t},r),Kn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(m)))return}l=a.createElement("link"),Wt(l,"link",t),Tt(l),a.head.appendChild(l)}}}function gT(t,r,a){ar.S(t,r,a);var l=ho;if(l&&t){var f=Cr(l).hoistableStyles,m=fo(t);r=r||"default";var S=f.get(m);if(!S){var w={loading:0,preload:null};if(S=l.querySelector(zl(m)))w.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Kn.get(m))&&am(t,a);var P=S=l.createElement("link");Tt(P),Wt(P,"link",t),P._p=new Promise(function(Y,te){P.onload=Y,P.onerror=te}),P.addEventListener("load",function(){w.loading|=1}),P.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Hu(S,r,l)}S={type:"stylesheet",instance:S,count:1,state:w},f.set(m,S)}}}function yT(t,r){ar.X(t,r);var a=ho;if(a&&t){var l=Cr(a).hoistableScripts,f=mo(t),m=l.get(f);m||(m=a.querySelector(Bl(f)),m||(t=_({src:t,async:!0},r),(r=Kn.get(f))&&om(t,r),m=a.createElement("script"),Tt(m),Wt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function vT(t,r){ar.M(t,r);var a=ho;if(a&&t){var l=Cr(a).hoistableScripts,f=mo(t),m=l.get(f);m||(m=a.querySelector(Bl(f)),m||(t=_({src:t,async:!0,type:"module"},r),(r=Kn.get(f))&&om(t,r),m=a.createElement("script"),Tt(m),Wt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function h_(t,r,a,l){var f=(f=pe.current)?Fu(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=fo(a.href),a=Cr(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=fo(a.href);var m=Cr(f).hoistableStyles,S=m.get(t);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,S),(m=f.querySelector(zl(t)))&&!m._p&&(S.instance=m,S.state.loading=5),Kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(t,a),m||_T(f,t,a,S.state))),r&&l===null)throw Error(i(528,""));return S}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=mo(a),a=Cr(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function fo(t){return'href="'+Ft(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function d_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function _T(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Wt(r,"link",a),Tt(r),t.head.appendChild(r))}function mo(t){return'[src="'+Ft(t)+'"]'}function Bl(t){return"script[async]"+t}function f_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ft(a.href)+'"]');if(l)return r.instance=l,Tt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Tt(l),Wt(l,"style",f),Hu(l,a.precedence,t),r.instance=l;case"stylesheet":f=fo(a.href);var m=t.querySelector(zl(f));if(m)return r.state.loading|=4,r.instance=m,Tt(m),m;l=d_(a),(f=Kn.get(f))&&am(l,f),m=(t.ownerDocument||t).createElement("link"),Tt(m);var S=m;return S._p=new Promise(function(w,P){S.onload=w,S.onerror=P}),Wt(m,"link",l),r.state.loading|=4,Hu(m,a.precedence,t),r.instance=m;case"script":return m=mo(a.src),(f=t.querySelector(Bl(m)))?(r.instance=f,Tt(f),f):(l=a,(f=Kn.get(m))&&(l=_({},a),om(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Tt(f),Wt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Hu(l,a.precedence,t));return r.instance}function Hu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,S=0;S<l.length;S++){var w=l[S];if(w.dataset.precedence===r)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function am(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function om(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gu=null;function m_(t,r,a){if(Gu===null){var l=new Map,f=Gu=new Map;f.set(a,l)}else f=Gu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Nr]||m[bt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(r)||"";S=t+S;var w=l.get(S);w?w.push(m):l.set(S,[m])}}return l}function p_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function ET(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function g_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Fl=null;function ST(){}function bT(t,r,a){if(Fl===null)throw Error(i(475));var l=Fl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=fo(a.href),m=t.querySelector(zl(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Qu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=m,Tt(m);return}m=t.ownerDocument||t,a=d_(a),(f=Kn.get(f))&&am(a,f),m=m.createElement("link"),Tt(m);var S=m;S._p=new Promise(function(w,P){S.onload=w,S.onerror=P}),Wt(m,"link",a),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Qu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function TT(){if(Fl===null)throw Error(i(475));var t=Fl;return t.stylesheets&&t.count===0&&lm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&lm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)lm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function lm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,r.forEach(wT,t),$u=null,Qu.call(t))}function wT(t,r){if(!(r.state.loading&4)){var a=$u.get(t);if(a)var l=a.get(null);else{a=new Map,$u.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),l=S)}l&&a.set(null,l)}f=r.instance,S=f.getAttribute("data-precedence"),m=a.get(S)||l,m===l&&a.set(null,f),a.set(S,f),this.count++,l=Qu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Hl={$$typeof:ae,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function xT(t,r,a,l,f,m,S,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.hiddenUpdates=Na(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function y_(t,r,a,l,f,m,S,w,P,Y,te,oe){return t=new xT(t,r,a,S,w,P,Y,oe),r=1,m===!0&&(r|=24),m=Rn(3,null,null,r),t.current=m,m.stateNode=t,r=Bd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Qd(m),t}function v_(t){return t?(t=Ha,t):Ha}function __(t,r,a,l,f,m){f=v_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ur(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=qr(t,l,r),a!==null&&(Pn(a,t,r),El(a,t,r))}function E_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function cm(t,r){E_(t,r),(t=t.alternate)&&E_(t,r)}function S_(t){if(t.tag===13){var r=Fa(t,67108864);r!==null&&Pn(r,t,67108864),cm(t,67108864)}}var Ku=!0;function AT(t,r,a,l){var f=ee.T;ee.T=null;var m=fe.p;try{fe.p=2,um(t,r,a,l)}finally{fe.p=m,ee.T=f}}function NT(t,r,a,l){var f=ee.T;ee.T=null;var m=fe.p;try{fe.p=8,um(t,r,a,l)}finally{fe.p=m,ee.T=f}}function um(t,r,a,l){if(Ku){var f=hm(l);if(f===null)Wf(t,r,l,Yu,a),T_(t,l);else if(CT(f,t,r,a,l))l.stopPropagation();else if(T_(t,l),r&4&&-1<RT.indexOf(t)){for(;f!==null;){var m=Es(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=ts(m.pendingLanes);if(S!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;S;){var P=1<<31-fn(S);w.entanglements[1]|=P,S&=~P}Is(m),(Xe&6)===0&&(Du=vn()+500,Vl(0))}}break;case 13:w=Fa(m,2),w!==null&&Pn(w,m,2),Ou(),cm(m,2)}if(m=hm(l),m===null&&Wf(t,r,l,Yu,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Wf(t,r,l,null,a)}}function hm(t){return t=tl(t),dm(t)}var Yu=null;function dm(t){if(Yu=null,t=_s(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yu=t,null}function b_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kc()){case Mt:return 2;case Bt:return 8;case qs:case gd:return 32;case Go:return 268435456;default:return 32}default:return 32}}var fm=!1,Jr=null,ei=null,ti=null,Gl=new Map,Ql=new Map,ni=[],RT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(t,r){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Gl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(r.pointerId)}}function $l(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Es(r),r!==null&&S_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function CT(t,r,a,l,f){switch(r){case"focusin":return Jr=$l(Jr,t,r,a,l,f),!0;case"dragenter":return ei=$l(ei,t,r,a,l,f),!0;case"mouseover":return ti=$l(ti,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Gl.set(m,$l(Gl.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ql.set(m,$l(Ql.get(m)||null,t,r,a,l,f)),!0}return!1}function w_(t){var r=_s(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,_d(t.priority,function(){if(a.tag===13){var l=Dn();l=$o(l);var f=Fa(a,l);f!==null&&Pn(f,a,l),cm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);el=l,a.target.dispatchEvent(l),el=null}else return r=Es(a),r!==null&&S_(r),t.blockedOn=a,!1;r.shift()}return!0}function x_(t,r,a){Xu(t)&&a.delete(r)}function IT(){fm=!1,Jr!==null&&Xu(Jr)&&(Jr=null),ei!==null&&Xu(ei)&&(ei=null),ti!==null&&Xu(ti)&&(ti=null),Gl.forEach(x_),Ql.forEach(x_)}function Wu(t,r){t.blockedOn===r&&(t.blockedOn=null,fm||(fm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,IT)))}var Zu=null;function A_(t){Zu!==t&&(Zu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Zu===t&&(Zu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(dm(l||a)===null)continue;break}var m=Es(a);m!==null&&(t.splice(r,3),r-=3,df(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Kl(t){function r(P){return Wu(P,t)}Jr!==null&&Wu(Jr,t),ei!==null&&Wu(ei,t),ti!==null&&Wu(ti,t),Gl.forEach(r),Ql.forEach(r);for(var a=0;a<ni.length;a++){var l=ni[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ni.length&&(a=ni[0],a.blockedOn===null);)w_(a),a.blockedOn===null&&ni.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],S=f[Kt]||null;if(typeof m=="function")S||A_(a);else if(S){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[Kt]||null)w=S.formAction;else if(dm(f)!==null)continue}else w=S.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),A_(a)}}}function mm(t){this._internalRoot=t}Ju.prototype.render=mm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Dn();__(a,l,t,r,null,null)},Ju.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;__(t.current,2,null,t,null,null),Ou(),r[Bs]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var r=zs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ni.length&&r!==0&&r<ni[a].priority;a++);ni.splice(a,0,t),a===0&&w_(t)}};var N_=e.version;if(N_!=="19.1.1")throw Error(i(527,N_,"19.1.1"));fe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var jT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Sr=eh.inject(jT),sn=eh}catch{}}return Xl.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",f=Fy,m=Hy,S=Gy,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=y_(t,1,!1,null,null,a,l,f,m,S,w,null),t[Bs]=r.current,Xf(t),new mm(r)},Xl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=Fy,S=Hy,w=Gy,P=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=y_(t,1,!0,r,a??null,l,f,m,S,w,P,Y),r.context=v_(null),a=r.current,l=Dn(),l=$o(l),f=Ur(l),f.callback=null,qr(a,f,l),a=l,r.current.lanes=a,St(r,a),Is(r),t[Bs]=r.current,Xf(t),new Ju(r)},Xl.version="19.1.1",Xl}var V_;function zT(){if(V_)return ym.exports;V_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ym.exports=qT(),ym.exports}var BT=zT();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var L_="popstate";function FT(s={}){function e(o,u){let{pathname:d="/",search:g="",hash:p=""}=_a(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Mm("",{pathname:d,search:g,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");g=y===-1?p:p.slice(0,y)}return g+"#"+(typeof u=="string"?u:hc(u))}function i(o,u){Zn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return GT(e,n,i,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Zn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HT(){return Math.random().toString(36).substring(2,10)}function U_(s,e){return{usr:s.state,key:s.key,idx:e}}function Mm(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?_a(e):e,state:n,key:e&&e.key||i||HT()}}function hc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function _a(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function GT(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,g="POP",p=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function T(){g="POP";let k=_(),B=k==null?null:k-y;y=k,p&&p({action:g,location:Q.location,delta:B})}function A(k,B){g="PUSH";let ne=Mm(Q.location,k,B);n&&n(ne,k),y=_()+1;let ae=U_(ne,y),G=Q.createHref(ne);try{d.pushState(ae,"",G)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;o.location.assign(G)}u&&p&&p({action:g,location:Q.location,delta:1})}function C(k,B){g="REPLACE";let ne=Mm(Q.location,k,B);n&&n(ne,k),y=_();let ae=U_(ne,y),G=Q.createHref(ne);d.replaceState(ae,"",G),u&&p&&p({action:g,location:Q.location,delta:0})}function q(k){return QT(k)}let Q={get action(){return g},get location(){return s(o,d)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(L_,T),p=k,()=>{o.removeEventListener(L_,T),p=null}},createHref(k){return e(o,k)},createURL:q,encodeLocation(k){let B=q(k);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:A,replace:C,go(k){return d.go(k)}};return Q}function QT(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:hc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function _0(s,e,n="/"){return $T(s,e,n,!1)}function $T(s,e,n,i){let o=typeof e=="string"?_a(e):e,u=dr(o.pathname||"/",n);if(u==null)return null;let d=E0(s);KT(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=iw(u);g=sw(d[p],y,i)}return g}function E0(s,e=[],n=[],i="",o=!1){let u=(d,g,p=o,y)=>{let _={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=cr([i,_.relativePath]),A=n.concat(_);d.children&&d.children.length>0&&(ft(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),E0(d.children,e,A,T,p)),!(d.path==null&&!d.index)&&e.push({path:T,score:tw(T,d.index),routesMeta:A})};return s.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))u(d,g);else for(let p of S0(d.path))u(d,g,!0,p)}),e}function S0(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=S0(i.join("/")),g=[];return g.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&g.push(...d),g.map(p=>s.startsWith("/")&&p===""?"/":p)}function KT(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:nw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var YT=/^:[\w-]+$/,XT=3,WT=2,ZT=1,JT=10,ew=-2,q_=s=>s==="*";function tw(s,e){let n=s.split("/"),i=n.length;return n.some(q_)&&(i+=ew),e&&(i+=WT),n.filter(o=>!q_(o)).reduce((o,u)=>o+(YT.test(u)?XT:u===""?ZT:JT),i)}function nw(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function sw(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",d=[];for(let g=0;g<i.length;++g){let p=i[g],y=g===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",T=Eh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),A=p.route;if(!T&&y&&n&&!i[i.length-1].route.index&&(T=Eh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:cr([u,T.pathname]),pathnameBase:cw(cr([u,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(u=cr([u,T.pathnameBase]))}return d}function Eh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=rw(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((y,{paramName:_,isOptional:T},A)=>{if(_==="*"){let q=g[A]||"";d=u.slice(0,u.length-q.length).replace(/(.)\/+$/,"$1")}const C=g[A];return T&&!C?y[_]=void 0:y[_]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function rw(s,e=!1,n=!0){Zn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(i.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function iw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function dr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function aw(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?_a(s):s;return{pathname:n?n.startsWith("/")?n:ow(n,e):e,search:uw(i),hash:hw(o)}}function ow(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Sm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lw(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dp(s){let e=lw(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function fp(s,e,n,i=!1){let o;typeof s=="string"?o=_a(s):(o={...s},ft(!o.pathname||!o.pathname.includes("?"),Sm("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Sm("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Sm("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,g;if(d==null)g=n;else{let T=e.length-1;if(!i&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),T-=1;o.pathname=A.join("/")}g=T>=0?e[T]:"/"}let p=aw(o,g),y=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}var cr=s=>s.join("/").replace(/\/\/+/g,"/"),cw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),uw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function dw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var b0=["POST","PUT","PATCH","DELETE"];new Set(b0);var fw=["GET",...b0];new Set(fw);var Po=I.createContext(null);Po.displayName="DataRouter";var zh=I.createContext(null);zh.displayName="DataRouterState";I.createContext(!1);var T0=I.createContext({isTransitioning:!1});T0.displayName="ViewTransition";var mw=I.createContext(new Map);mw.displayName="Fetchers";var pw=I.createContext(null);pw.displayName="Await";var ps=I.createContext(null);ps.displayName="Navigation";var bc=I.createContext(null);bc.displayName="Location";var gs=I.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var mp=I.createContext(null);mp.displayName="RouteError";function gw(s,{relative:e}={}){ft(Oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(ps),{hash:o,pathname:u,search:d}=Tc(s,{relative:e}),g=u;return n!=="/"&&(g=u==="/"?n:cr([n,u])),i.createHref({pathname:g,search:d,hash:o})}function Oo(){return I.useContext(bc)!=null}function Jn(){return ft(Oo(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(bc).location}var w0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x0(s){I.useContext(ps).static||I.useLayoutEffect(s)}function Et(){let{isDataRoute:s}=I.useContext(gs);return s?Cw():yw()}function yw(){ft(Oo(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(Po),{basename:e,navigator:n}=I.useContext(ps),{matches:i}=I.useContext(gs),{pathname:o}=Jn(),u=JSON.stringify(dp(i)),d=I.useRef(!1);return x0(()=>{d.current=!0}),I.useCallback((p,y={})=>{if(Zn(d.current,w0),!d.current)return;if(typeof p=="number"){n.go(p);return}let _=fp(p,JSON.parse(u),o,y.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:cr([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,u,o,s])}I.createContext(null);function pp(){let{matches:s}=I.useContext(gs),e=s[s.length-1];return e?e.params:{}}function Tc(s,{relative:e}={}){let{matches:n}=I.useContext(gs),{pathname:i}=Jn(),o=JSON.stringify(dp(n));return I.useMemo(()=>fp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function vw(s,e){return A0(s,e)}function A0(s,e,n,i){ft(Oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(ps),{matches:u}=I.useContext(gs),d=u[u.length-1],g=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",_=d&&d.route;{let B=_&&_.path||"";N0(p,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let T=Jn(),A;if(e){let B=typeof e=="string"?_a(e):e;ft(y==="/"||B.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),A=B}else A=T;let C=A.pathname||"/",q=C;if(y!=="/"){let B=y.replace(/^\//,"").split("/");q="/"+C.replace(/^\//,"").split("/").slice(B.length).join("/")}let Q=_0(s,{pathname:q});Zn(_||Q!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Zn(Q==null||Q[Q.length-1].route.element!==void 0||Q[Q.length-1].route.Component!==void 0||Q[Q.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Tw(Q&&Q.map(B=>Object.assign({},B,{params:Object.assign({},g,B.params),pathname:cr([y,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:cr([y,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),u,n,i);return e&&k?I.createElement(bc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},k):k}function _w(){let s=Rw(),e=dw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:u},"ErrorBoundary")," or"," ",I.createElement("code",{style:u},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,d)}var Ew=I.createElement(_w,null),Sw=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?I.createElement(gs.Provider,{value:this.props.routeContext},I.createElement(mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bw({routeContext:s,match:e,children:n}){let i=I.useContext(Po);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(gs.Provider,{value:s},n)}function Tw(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,u=n?.errors;if(u!=null){let p=o.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);ft(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,g=-1;if(n)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=p),y.route.id){let{loaderData:_,errors:T}=n,A=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||A){d=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}return o.reduceRight((p,y,_)=>{let T,A=!1,C=null,q=null;n&&(T=u&&y.route.id?u[y.route.id]:void 0,C=y.route.errorElement||Ew,d&&(g<0&&_===0?(N0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,q=null):g===_&&(A=!0,q=y.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,_+1)),k=()=>{let B;return T?B=C:A?B=q:y.route.Component?B=I.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=p,I.createElement(bw,{match:y,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:B})};return n&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?I.createElement(Sw,{location:n.location,revalidation:n.revalidation,component:C,error:T,children:k(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):k()},null)}function gp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ww(s){let e=I.useContext(Po);return ft(e,gp(s)),e}function xw(s){let e=I.useContext(zh);return ft(e,gp(s)),e}function Aw(s){let e=I.useContext(gs);return ft(e,gp(s)),e}function yp(s){let e=Aw(s),n=e.matches[e.matches.length-1];return ft(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Nw(){return yp("useRouteId")}function Rw(){let s=I.useContext(mp),e=xw("useRouteError"),n=yp("useRouteError");return s!==void 0?s:e.errors?.[n]}function Cw(){let{router:s}=ww("useNavigate"),e=yp("useNavigate"),n=I.useRef(!1);return x0(()=>{n.current=!0}),I.useCallback(async(o,u={})=>{Zn(n.current,w0),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var z_={};function N0(s,e,n){!e&&!z_[s]&&(z_[s]=!0,Zn(!1,n))}I.memo(Iw);function Iw({routes:s,future:e,state:n}){return A0(s,void 0,n,e)}function R0({to:s,replace:e,state:n,relative:i}){ft(Oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(ps);Zn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=I.useContext(gs),{pathname:d}=Jn(),g=Et(),p=fp(s,dp(u),d,i==="path"),y=JSON.stringify(p);return I.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:i})},[g,y,i,e,n]),null}function Nt(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jw({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){ft(!Oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=I.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=_a(n));let{pathname:p="/",search:y="",hash:_="",state:T=null,key:A="default"}=n,C=I.useMemo(()=>{let q=dr(p,d);return q==null?null:{location:{pathname:q,search:y,hash:_,state:T,key:A},navigationType:i}},[d,p,y,_,T,A,i]);return Zn(C!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:I.createElement(ps.Provider,{value:g},I.createElement(bc.Provider,{children:e,value:C}))}function Dw({children:s,location:e}){return vw(km(s),e)}function km(s,e=[]){let n=[];return I.Children.forEach(s,(i,o)=>{if(!I.isValidElement(i))return;let u=[...e,o];if(i.type===I.Fragment){n.push.apply(n,km(i.props.children,u));return}ft(i.type===Nt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=km(i.props.children,u)),n.push(d)}),n}var lh="get",ch="application/x-www-form-urlencoded";function Bh(s){return s!=null&&typeof s.tagName=="string"}function Pw(s){return Bh(s)&&s.tagName.toLowerCase()==="button"}function Ow(s){return Bh(s)&&s.tagName.toLowerCase()==="form"}function Mw(s){return Bh(s)&&s.tagName.toLowerCase()==="input"}function kw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Vw(s,e){return s.button===0&&(!e||e==="_self")&&!kw(s)}var th=null;function Lw(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var Uw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bm(s){return s!=null&&!Uw.has(s)?(Zn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):s}function qw(s,e){let n,i,o,u,d;if(Ow(s)){let g=s.getAttribute("action");i=g?dr(g,e):null,n=s.getAttribute("method")||lh,o=bm(s.getAttribute("enctype"))||ch,u=new FormData(s)}else if(Pw(s)||Mw(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||g.getAttribute("action");if(i=p?dr(p,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||lh,o=bm(s.getAttribute("formenctype"))||bm(g.getAttribute("enctype"))||ch,u=new FormData(g,s),!Lw()){let{name:y,type:_,value:T}=s;if(_==="image"){let A=y?`${y}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else y&&u.append(y,T)}}else{if(Bh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lh,i=null,o=ch,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function zw(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&dr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Bw(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fw(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Hw(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Bw(u,n);return d.links?d.links():[]}return[]}));return Kw(i.flat(1).filter(Fw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function B_(s,e,n,i,o,u){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):u==="data"?e.filter((p,y)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Gw(s,e,{includeHydrateFallback:n}={}){return Qw(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Qw(s){return[...new Set(s)]}function $w(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function Kw(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify($w(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function C0(){let s=I.useContext(Po);return vp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Yw(){let s=I.useContext(zh);return vp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var _p=I.createContext(void 0);_p.displayName="FrameworkContext";function I0(){let s=I.useContext(_p);return vp(s,"You must render this element inside a <HydratedRouter> element"),s}function Xw(s,e){let n=I.useContext(_p),[i,o]=I.useState(!1),[u,d]=I.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:_,onTouchStart:T}=e,A=I.useRef(null);I.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let Q=B=>{B.forEach(ne=>{d(ne.isIntersecting)})},k=new IntersectionObserver(Q,{threshold:.5});return A.current&&k.observe(A.current),()=>{k.disconnect()}}},[s]),I.useEffect(()=>{if(i){let Q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(Q)}}},[i]);let C=()=>{o(!0)},q=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,A,{}]:[u,A,{onFocus:Wl(g,C),onBlur:Wl(p,q),onMouseEnter:Wl(y,C),onMouseLeave:Wl(_,q),onTouchStart:Wl(T,C)}]:[!1,A,{}]}function Wl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function Ww({page:s,...e}){let{router:n}=C0(),i=I.useMemo(()=>_0(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?I.createElement(Jw,{page:s,matches:i,...e}):null}function Zw(s){let{manifest:e,routeModules:n}=I0(),[i,o]=I.useState([]);return I.useEffect(()=>{let u=!1;return Hw(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),i}function Jw({page:s,matches:e,...n}){let i=Jn(),{manifest:o,routeModules:u}=I0(),{basename:d}=C0(),{loaderData:g,matches:p}=Yw(),y=I.useMemo(()=>B_(s,e,p,o,i,"data"),[s,e,p,o,i]),_=I.useMemo(()=>B_(s,e,p,o,i,"assets"),[s,e,p,o,i]),T=I.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let q=new Set,Q=!1;if(e.forEach(B=>{let ne=o.routes[B.route.id];!ne||!ne.hasLoader||(!y.some(ae=>ae.route.id===B.route.id)&&B.route.id in g&&u[B.route.id]?.shouldRevalidate||ne.hasClientLoader?Q=!0:q.add(B.route.id))}),q.size===0)return[];let k=zw(s,d,"data");return Q&&q.size>0&&k.searchParams.set("_routes",e.filter(B=>q.has(B.route.id)).map(B=>B.route.id).join(",")),[k.pathname+k.search]},[d,g,i,o,y,e,s,u]),A=I.useMemo(()=>Gw(_,o),[_,o]),C=Zw(_);return I.createElement(I.Fragment,null,T.map(q=>I.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...n})),A.map(q=>I.createElement("link",{key:q,rel:"modulepreload",href:q,...n})),C.map(({key:q,link:Q})=>I.createElement("link",{key:q,nonce:n.nonce,...Q})))}function ex(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var j0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j0&&(window.__reactRouterVersion="7.8.1")}catch{}function tx({basename:s,children:e,window:n}){let i=I.useRef();i.current==null&&(i.current=FT({window:n,v5Compat:!0}));let o=i.current,[u,d]=I.useState({action:o.action,location:o.location}),g=I.useCallback(p=>{I.startTransition(()=>d(p))},[d]);return I.useLayoutEffect(()=>o.listen(g),[o,g]),I.createElement(jw,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var D0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fh=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:g,target:p,to:y,preventScrollReset:_,viewTransition:T,...A},C){let{basename:q}=I.useContext(ps),Q=typeof y=="string"&&D0.test(y),k,B=!1;if(typeof y=="string"&&Q&&(k=y,j0))try{let x=new URL(window.location.href),j=y.startsWith("//")?new URL(x.protocol+y):new URL(y),O=dr(j.pathname,q);j.origin===x.origin&&O!=null?y=O+j.search+j.hash:B=!0}catch{Zn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=gw(y,{relative:o}),[ae,G,F]=Xw(i,A),V=ix(y,{replace:d,state:g,target:p,preventScrollReset:_,relative:o,viewTransition:T});function R(x){e&&e(x),x.defaultPrevented||V(x)}let b=I.createElement("a",{...A,...F,href:k||ne,onClick:B||u?e:R,ref:ex(C,G),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return ae&&!Q?I.createElement(I.Fragment,null,b,I.createElement(Ww,{page:ne})):b});Fh.displayName="Link";var nx=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:g,children:p,...y},_){let T=Tc(d,{relative:y.relative}),A=Jn(),C=I.useContext(zh),{navigator:q,basename:Q}=I.useContext(ps),k=C!=null&&ux(T)&&g===!0,B=q.encodeLocation?q.encodeLocation(T).pathname:T.pathname,ne=A.pathname,ae=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(ne=ne.toLowerCase(),ae=ae?ae.toLowerCase():null,B=B.toLowerCase()),ae&&Q&&(ae=dr(ae,Q)||ae);const G=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let F=ne===B||!o&&ne.startsWith(B)&&ne.charAt(G)==="/",V=ae!=null&&(ae===B||!o&&ae.startsWith(B)&&ae.charAt(B.length)==="/"),R={isActive:F,isPending:V,isTransitioning:k},b=F?e:void 0,x;typeof i=="function"?x=i(R):x=[i,F?"active":null,V?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(R):u;return I.createElement(Fh,{...y,"aria-current":b,className:x,ref:_,style:j,to:d,viewTransition:g},typeof p=="function"?p(R):p)});nx.displayName="NavLink";var sx=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=lh,action:g,onSubmit:p,relative:y,preventScrollReset:_,viewTransition:T,...A},C)=>{let q=lx(),Q=cx(g,{relative:y}),k=d.toLowerCase()==="get"?"get":"post",B=typeof g=="string"&&D0.test(g),ne=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let G=ae.nativeEvent.submitter,F=G?.getAttribute("formmethod")||d;q(G||ae.currentTarget,{fetcherKey:e,method:F,navigate:n,replace:o,state:u,relative:y,preventScrollReset:_,viewTransition:T})};return I.createElement("form",{ref:C,method:k,action:Q,onSubmit:i?p:ne,...A,"data-discover":!B&&s==="render"?"true":void 0})});sx.displayName="Form";function rx(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function P0(s){let e=I.useContext(Po);return ft(e,rx(s)),e}function ix(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let g=Et(),p=Jn(),y=Tc(s,{relative:u});return I.useCallback(_=>{if(Vw(_,e)){_.preventDefault();let T=n!==void 0?n:hc(p)===hc(y);g(s,{replace:T,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[p,g,y,n,i,e,s,o,u,d])}var ax=0,ox=()=>`__${String(++ax)}__`;function lx(){let{router:s}=P0("useSubmit"),{basename:e}=I.useContext(ps),n=Nw();return I.useCallback(async(i,o={})=>{let{action:u,method:d,encType:g,formData:p,body:y}=qw(i,e);if(o.navigate===!1){let _=o.fetcherKey||ox();await s.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function cx(s,{relative:e}={}){let{basename:n}=I.useContext(ps),i=I.useContext(gs);ft(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...Tc(s||".",{relative:e})},d=Jn();if(s==null){u.search=d.search;let g=new URLSearchParams(u.search),p=g.getAll("index");if(p.some(_=>_==="")){g.delete("index"),p.filter(T=>T).forEach(T=>g.append("index",T));let _=g.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:cr([n,u.pathname])),hc(u)}function ux(s,{relative:e}={}){let n=I.useContext(T0);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=P0("useViewTransitionState"),o=Tc(s,{relative:e});if(!n.isTransitioning)return!1;let u=dr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=dr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Eh(o.pathname,d)!=null||Eh(o.pathname,u)!=null}const hx=()=>{};var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},dx=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],g=s[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,g=d?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,_=u>>2,T=(u&3)<<4|g>>4;let A=(g&15)<<2|y>>6,C=y&63;p||(C=64,d||(A=64)),i.push(n[_],n[T],n[A],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(O0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):dx(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||y==null||T==null)throw new fx;const A=u<<2|g>>4;if(i.push(A),y!==64){const C=g<<4&240|y>>2;if(i.push(C),T!==64){const q=y<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class fx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mx=function(s){const e=O0(s);return M0.encodeByteArray(e,!0)},Sh=function(s){return mx(s).replace(/\./g,"")},k0=function(s){try{return M0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=()=>px().__FIREBASE_DEFAULTS__,yx=()=>{if(typeof process>"u"||typeof F_>"u")return;const s=F_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},vx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&k0(s[1]);return e&&JSON.parse(e)},Hh=()=>{try{return hx()||gx()||yx()||vx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},V0=s=>Hh()?.emulatorHosts?.[s],_x=s=>{const e=V0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},L0=()=>Hh()?.config,U0=s=>Hh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Sh(JSON.stringify(n)),Sh(JSON.stringify(d)),""].join(".")}const ic={};function bx(){const s={prod:[],emulator:[]};for(const e of Object.keys(ic))ic[e]?s.emulator.push(e):s.prod.push(e);return s}function Tx(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let H_=!1;function z0(s,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||ic[s]===e||ic[s]||H_)return;ic[s]=e;function n(A){return`__firebase__banner__${A}`}const i="__firebase__banner",u=bx().prod.length>0;function d(){const A=document.getElementById(i);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{H_=!0,d()},A}function _(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=Tx(i),C=n("text"),q=document.getElementById(C)||document.createElement("span"),Q=n("learnmore"),k=document.getElementById(Q)||document.createElement("a"),B=n("preprendIcon"),ne=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ae=A.element;g(ae),_(k,Q);const G=y();p(ne,B),ae.append(ne,q,k,G),document.body.appendChild(ae)}u?(q.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function xx(){const s=Hh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nx(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Rx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cx(){const s=dn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Ix(){return!xx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jx(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="FirebaseError";class _r extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Px,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Ox(u,i):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new _r(o,g,i)}}function Ox(s,e){return s.replace(Mx,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Mx=/\{\$([^}]+)}/g;function kx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fa(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(G_(u)&&G_(d)){if(!fa(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function G_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Jl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Vx(s,e){const n=new Lx(s,e);return n.subscribe.bind(n)}class Lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Ux(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Tm),o.error===void 0&&(o.error=Tm),o.complete===void 0&&(o.complete=Tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ux(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(s){return s&&s._delegate?s._delegate:s}class ma{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ex;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bx(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);i===g&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zx(s){return s===la?void 0:s}function Bx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ve||(Ve={}));const Hx={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Gx=Ve.INFO,Qx={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},$x=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Qx[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=Gx,this._logHandler=$x,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Kx=(s,e)=>e.some(n=>s instanceof n);let Q_,$_;function Yx(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xx(){return $_||($_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,Vm=new WeakMap,F0=new WeakMap,wm=new WeakMap,Sp=new WeakMap;function Wx(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(ui(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&B0.set(n,s)}).catch(()=>{}),Sp.set(e,s),e}function Zx(s){if(Vm.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Vm.set(s,e)}let Lm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Vm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||F0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Jx(s){Lm=s(Lm)}function eA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(xm(this),e,...n);return F0.set(i,e.sort?e.sort():[e]),ui(i)}:Xx().includes(s)?function(...e){return s.apply(xm(this),e),ui(B0.get(this))}:function(...e){return ui(s.apply(xm(this),e))}}function tA(s){return typeof s=="function"?eA(s):(s instanceof IDBTransaction&&Zx(s),Kx(s,Yx())?new Proxy(s,Lm):s)}function ui(s){if(s instanceof IDBRequest)return Wx(s);if(wm.has(s))return wm.get(s);const e=tA(s);return e!==s&&(wm.set(s,e),Sp.set(e,s)),e}const xm=s=>Sp.get(s);function nA(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),g=ui(d);return i&&d.addEventListener("upgradeneeded",p=>{i(ui(d.result),p.oldVersion,p.newVersion,ui(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const sA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],Am=new Map;function K_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=rA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||sA.includes(n)))return;const u=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Am.set(e,u),u}Jx(s=>({...s,get:(e,n,i)=>K_(e,n)||s.get(e,n,i),has:(e,n)=>!!K_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aA(s){return s.getComponent()?.type==="VERSION"}const Um="@firebase/app",Y_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Ep("@firebase/app"),oA="@firebase/app-compat",lA="@firebase/analytics-compat",cA="@firebase/analytics",uA="@firebase/app-check-compat",hA="@firebase/app-check",dA="@firebase/auth",fA="@firebase/auth-compat",mA="@firebase/database",pA="@firebase/data-connect",gA="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",_A="@firebase/installations",EA="@firebase/installations-compat",SA="@firebase/messaging",bA="@firebase/messaging-compat",TA="@firebase/performance",wA="@firebase/performance-compat",xA="@firebase/remote-config",AA="@firebase/remote-config-compat",NA="@firebase/storage",RA="@firebase/storage-compat",CA="@firebase/firestore",IA="@firebase/ai",jA="@firebase/firestore-compat",DA="firebase",PA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",OA={[Um]:"fire-core",[oA]:"fire-core-compat",[cA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[uA]:"fire-app-check-compat",[dA]:"fire-auth",[fA]:"fire-auth-compat",[mA]:"fire-rtdb",[pA]:"fire-data-connect",[gA]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[_A]:"fire-iid",[EA]:"fire-iid-compat",[SA]:"fire-fcm",[bA]:"fire-fcm-compat",[TA]:"fire-perf",[wA]:"fire-perf-compat",[xA]:"fire-rc",[AA]:"fire-rc-compat",[NA]:"fire-gcs",[RA]:"fire-gcs-compat",[CA]:"fire-fst",[jA]:"fire-fst-compat",[IA]:"fire-vertex","fire-js":"fire-js",[DA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,MA=new Map,zm=new Map;function X_(s,e){try{s.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function xo(s){const e=s.name;if(zm.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,s);for(const n of bh.values())X_(n,s);for(const n of MA.values())X_(n,s);return!0}function bp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Yn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new wc("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=PA;function H0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:qm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw hi.create("bad-app-name",{appName:String(o)});if(n||(n=L0()),!n)throw hi.create("no-options");const u=bh.get(o);if(u){if(fa(n,u.options)&&fa(i,u.config))return u;throw hi.create("duplicate-app",{appName:o})}const d=new Fx(o);for(const p of zm.values())d.addComponent(p);const g=new VA(n,i,d);return bh.set(o,g),g}function G0(s=qm){const e=bh.get(s);if(!e&&s===qm&&L0())return H0();if(!e)throw hi.create("no-app",{appName:s});return e}function di(s,e,n){let i=OA[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(d.join(" "));return}xo(new ma(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",UA=1,dc="firebase-heartbeat-store";let Nm=null;function Q0(){return Nm||(Nm=nA(LA,UA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(s=>{throw hi.create("idb-open",{originalErrorMessage:s.message})})),Nm}async function qA(s){try{const n=(await Q0()).transaction(dc),i=await n.objectStore(dc).get($0(s));return await n.done,i}catch(e){if(e instanceof _r)fr.warn(e.message);else{const n=hi.create("idb-get",{originalErrorMessage:e?.message});fr.warn(n.message)}}}async function W_(s,e){try{const i=(await Q0()).transaction(dc,"readwrite");await i.objectStore(dc).put(e,$0(s)),await i.done}catch(n){if(n instanceof _r)fr.warn(n.message);else{const i=hi.create("idb-set",{originalErrorMessage:n?.message});fr.warn(i.message)}}}function $0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1024,BA=30;class FA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>BA){const o=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z_(),{heartbeatsToSend:n,unsentEntries:i}=HA(this._heartbeatsCache.heartbeats),o=Sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fr.warn(e),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function HA(s,e=zA){const n=[];let i=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),J_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),J_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class GA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jx()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function J_(s){return Sh(JSON.stringify({version:2,heartbeats:s})).length}function QA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(s){xo(new ma("platform-logger",e=>new iA(e),"PRIVATE")),xo(new ma("heartbeat",e=>new FA(e),"PRIVATE")),di(Um,Y_,s),di(Um,Y_,"esm2020"),di("fire-js","")}$A("");function K0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KA=K0,Y0=new wc("auth","Firebase",K0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Ep("@firebase/auth");function YA(s,...e){Th.logLevel<=Ve.WARN&&Th.warn(`Auth (${ko}): ${s}`,...e)}function uh(s,...e){Th.logLevel<=Ve.ERROR&&Th.error(`Auth (${ko}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(s,...e){throw Tp(s,...e)}function Ps(s,...e){return Tp(s,...e)}function X0(s,e,n){const i={...KA(),[e]:n};return new wc("auth","Firebase",i).create(e,{appName:s.name})}function ur(s){return X0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tp(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Y0.create(s,...e)}function we(s,e,...n){if(!s)throw Tp(e,...n)}function or(s){const e="INTERNAL ASSERTION FAILED: "+s;throw uh(e),new Error(e)}function mr(s,e){s||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return typeof self<"u"&&self.location?.href||""}function XA(){return eE()==="http:"||eE()==="https:"}function eE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XA()||Nx()||"connection"in navigator)?navigator.onLine:!0}function ZA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=wx()||Rx()}get(){return WA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(s,e){mr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tN=new Ac(3e4,6e4);function Si(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Er(s,e,n,i,o={}){return Z0(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const g=xc({key:s.config.apiKey,...d}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...u};return Ax()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Mo(s.emulatorConfig.host)&&(y.credentials="include"),W0.fetch()(await J0(s,s.config.apiHost,n,g),y)})}async function Z0(s,e,n){s._canInitEmulator=!1;const i={...JA,...e};try{const o=new sN(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw nh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw nh(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw nh(s,"user-disabled",d);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw X0(s,_,y);fs(s,_)}}catch(o){if(o instanceof _r)throw o;fs(s,"network-request-failed",{message:String(o)})}}async function Nc(s,e,n,i,o={}){const u=await Er(s,e,n,i,o);return"mfaPendingCredential"in u&&fs(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function J0(s,e,n,i){const o=`${e}${n}?${i}`,u=s,d=u.config.emulator?wp(s.config,o):`${s.config.apiScheme}://${o}`;return eN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function nN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ps(this.auth,"network-request-failed")),tN.get())})}}function nh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ps(s,e,i);return o.customData._tokenResponse=n,o}function tE(s){return s!==void 0&&s.enterprise!==void 0}class rN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iN(s,e){return Er(s,"GET","/v2/recaptchaConfig",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(s,e){return Er(s,"POST","/v1/accounts:delete",e)}async function wh(s,e){return Er(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oN(s,e=!1){const n=Ot(s),i=await n.getIdToken(e),o=xp(i);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:ac(Rm(o.auth_time)),issuedAtTime:ac(Rm(o.iat)),expirationTime:ac(Rm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Rm(s){return Number(s)*1e3}function xp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=k0(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function nE(s){const e=xp(s);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _r&&lN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function lN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(s){const e=s.auth,n=await s.getIdToken(),i=await Ao(s,wh(e,{idToken:n}));we(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?eS(o.providerUserInfo):[],d=hN(s.providerData,u),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!d?.length,y=g?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,_)}async function uN(s){const e=Ot(s);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hN(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function eS(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(s,e){const n=await Z0(s,{},async()=>{const i=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await J0(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:i};return s.emulatorConfig&&Mo(s.emulatorConfig.host)&&(p.credentials="include"),W0.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fN(s,e){return Er(s,"POST","/v2/accounts:revokeToken",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=nE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await dN(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new So;return i&&(we(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(s,e){we(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class hs{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new cN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oN(this,e)}reload(){return uN(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await xh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await Ao(this,aN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:C,providerData:q,stsTokenManager:Q}=n;we(T&&Q,e,"internal-error");const k=So.fromJSON(this.name,Q);we(typeof T=="string",e,"internal-error"),ri(i,e.name),ri(o,e.name),we(typeof A=="boolean",e,"internal-error"),we(typeof C=="boolean",e,"internal-error"),ri(u,e.name),ri(d,e.name),ri(g,e.name),ri(p,e.name),ri(y,e.name),ri(_,e.name);const B=new hs({uid:T,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:C,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:k,createdAt:y,lastLoginAt:_});return q&&Array.isArray(q)&&(B.providerData=q.map(ne=>({...ne}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,i=!1){const o=new So;o.updateFromServerResponse(n);const u=new hs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?eS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,g=new So;g.updateFromIdToken(i);const p=new hs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function lr(s){mr(s instanceof Function,"Expected a class definition");let e=sE.get(s);return e?(mr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,sE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tS.type="NONE";const rE=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s,e,n){return`firebase:${s}:${e}:${n}`}class bo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=hh(this.userKey,o.apiKey,u),this.fullPersistenceKey=hh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wh(this.auth,{idToken:e}).catch(()=>{});return n?hs._fromGetAccountInfoResponse(this.auth,n,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bo(lr(rE),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||lr(rE);const d=hh(i,e.config.apiKey,e.name);let g=null;for(const y of n)try{const _=await y._get(d);if(_){let T;if(typeof _=="string"){const A=await wh(e,{idToken:_}).catch(()=>{});if(!A)break;T=await hs._fromGetAccountInfoResponse(e,A,_)}else T=hs._fromJSON(e,_);y!==u&&(g=T),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new bo(u,e,i):(u=p[0],g&&await u._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new bo(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oS(e))return"Blackberry";if(lS(e))return"Webos";if(sS(e))return"Safari";if((e.includes("chrome/")||rS(e))&&!e.includes("edge/"))return"Chrome";if(aS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function nS(s=dn()){return/firefox\//i.test(s)}function sS(s=dn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rS(s=dn()){return/crios\//i.test(s)}function iS(s=dn()){return/iemobile/i.test(s)}function aS(s=dn()){return/android/i.test(s)}function oS(s=dn()){return/blackberry/i.test(s)}function lS(s=dn()){return/webos/i.test(s)}function Ap(s=dn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mN(s=dn()){return Ap(s)&&!!window.navigator?.standalone}function pN(){return Cx()&&document.documentMode===10}function cS(s=dn()){return Ap(s)||aS(s)||lS(s)||oS(s)||/windows phone/i.test(s)||iS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(s,e=[]){let n;switch(s){case"Browser":n=iE(dn());break;case"Worker":n=`${iE(dn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,g)=>{try{const p=e(u);d(p)}catch(p){g(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(s,e={}){return Er(s,"GET","/v2/passwordPolicy",Si(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=6;class _N{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new gN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wh(this,{idToken:e}),i=await hs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Yn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(ur(this));const n=e?Ot(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yN(this),n=new _N(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ea(s){return Ot(s)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vx(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SN(s){Gh=s}function hS(s){return Gh.loadJS(s)}function bN(){return Gh.recaptchaEnterpriseScript}function TN(){return Gh.gapiScript}function wN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class xN{constructor(){this.enterprise=new AN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NN="recaptcha-enterprise",dS="NO_RECAPTCHA";class RN{constructor(e){this.type=NN,this.auth=Ea(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{iN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new rN(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(p=>{g(p)})})}function o(u,d,g){const p=window.grecaptcha;tE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(dS)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xN().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(g=>{if(!n&&tE(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=bN();p.length!==0&&(p+=g),hS(p).then(()=>{o(g,u,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function oE(s,e,n,i=!1,o=!1){const u=new RN(s);let d;if(o)d=dS;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Hm(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await oE(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await oE(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(s,e){const n=bp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(fa(u,e??{}))return o;fs(o,"already-initialized")}return n.initialize({options:e})}function IN(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(lr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function jN(s,e,n){const i=Ea(s);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=fS(e),{host:d,port:g}=DN(e),p=g===null?"":`:${g}`,y={url:`${u}//${d}${p}/`},_=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(fa(y,i.config.emulator)&&fa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Mo(d)?(q0(`${u}//${d}${p}`),z0("Auth",!0)):PN()}function fS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function DN(s){const e=fS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:lE(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:lE(d)}}}function lE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function PN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function ON(s,e){return Er(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(s,e){return Nc(s,"POST","/v1/accounts:signInWithPassword",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(s,e){return Nc(s,"POST","/v1/accounts:signInWithEmailLink",Si(s,e))}async function VN(s,e){return Nc(s,"POST","/v1/accounts:signInWithEmailLink",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Np{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new fc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,n,"signInWithPassword",MN);case"emailLink":return kN(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,i,"signUpPassword",ON);case"emailLink":return VN(e,{idToken:n,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(s,e){return Nc(s,"POST","/v1/accounts:signInWithIdp",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="http://localhost";class pa extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const d=new pa(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,To(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:LN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qN(s){const e=Zl(Jl(s)).link,n=e?Zl(Jl(e)).deep_link_id:null,i=Zl(Jl(s)).deep_link_id;return(i?Zl(Jl(i)).link:null)||i||n||e||s}class Rp{constructor(e){const n=Zl(Jl(e)),i=n.apiKey??null,o=n.oobCode??null,u=UN(n.mode??null);we(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qN(e);try{return new Rp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Rp.parseLink(n);return we(i,"argument-error"),fc._fromEmailAndCode(e,i.code,i.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends mS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Rc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pa._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ai.credential(n,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Rc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Rc{constructor(){super("twitter.com")}static credential(e,n){return pa._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return li.credential(n,i)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(s,e){return Nc(s,"POST","/v1/accounts:signUp",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await hs._fromIdTokenResponse(e,i,o),d=cE(i);return new ga({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=cE(i);return new ga({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function cE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends _r{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Ah(e,n,i,o)}}function pS(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(s,u,e,i):u})}async function BN(s,e,n=!1){const i=await Ao(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ga._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(s,e,n=!1){const{auth:i}=s;if(Yn(i.app))return Promise.reject(ur(i));const o="reauthenticate";try{const u=await Ao(s,pS(i,o,e,s),n);we(u.idToken,i,"internal-error");const d=xp(u.idToken);we(d,i,"internal-error");const{sub:g}=d;return we(s.uid===g,i,"user-mismatch"),ga._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&fs(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(s,e,n=!1){if(Yn(s.app))return Promise.reject(ur(s));const i="signIn",o=await pS(s,i,e),u=await ga._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function HN(s,e){return gS(Ea(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(s){const e=Ea(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GN(s,e,n){if(Yn(s.app))return Promise.reject(ur(s));const i=Ea(s),d=await Hm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&yS(s),p}),g=await ga._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(g.user),g}function QN(s,e,n){return Yn(s.app)?Promise.reject(ur(s)):HN(Ot(s),Vo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&yS(s),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(s,e){return Er(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ot(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await Ao(i,$N(i.auth,u));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const g=i.providerData.find(({providerId:p})=>p==="password");g&&(g.displayName=i.displayName,g.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function YN(s,e,n,i){return Ot(s).onIdTokenChanged(e,n,i)}function XN(s,e,n){return Ot(s).beforeAuthStateChanged(e,n)}function WN(s,e,n,i){return Ot(s).onAuthStateChanged(e,n,i)}function ZN(s){return Ot(s).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=1e3,e2=10;class _S extends vS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);pN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,e2):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},JN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_S.type="LOCAL";const t2=_S;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends vS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ES.type="SESSION";const SS=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(d).map(async y=>y(n.origin,u)),p=await n2(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,p)=>{const y=Cp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(A.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function r2(s){Os().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function i2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a2(){return navigator?.serviceWorker?.controller||null}function o2(){return bS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firebaseLocalStorageDb",l2=1,Rh="firebaseLocalStorage",wS="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(s,e){return s.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function c2(){const s=indexedDB.deleteDatabase(TS);return new Cc(s).toPromise()}function Gm(){const s=indexedDB.open(TS,l2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Rh,{keyPath:wS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Rh)?e(i):(i.close(),await c2(),e(await Gm()))})})}async function uE(s,e,n){const i=$h(s,!0).put({[wS]:e,value:n});return new Cc(i).toPromise()}async function u2(s,e){const n=$h(s,!1).get(e),i=await new Cc(n).toPromise();return i===void 0?null:i.value}function hE(s,e){const n=$h(s,!0).delete(e);return new Cc(n).toPromise()}const h2=800,d2=3;class xS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>d2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(o2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i2(),!this.activeServiceWorker)return;this.sender=new s2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gm();return await uE(e,Nh,"1"),await hE(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>uE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>u2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=$h(o,!1).getAll();return new Cc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xS.type="LOCAL";const f2=xS;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(s,e){return e?lr(e):(we(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p2(s){return gS(s.auth,new Ip(s),s.bypassAuthState)}function g2(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),FN(n,new Ip(s),s.bypassAuthState)}async function y2(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),BN(n,new Ip(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p2;case"linkViaPopup":case"linkViaRedirect":return y2;case"reauthViaPopup":case"reauthViaRedirect":return g2;default:fs(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Ac(2e3,1e4);class Eo extends AS{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v2.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="pendingRedirect",dh=new Map;class E2 extends AS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const i=await S2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S2(s,e){const n=w2(e),i=T2(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function b2(s,e){dh.set(s._key(),e)}function T2(s){return lr(s._redirectPersistence)}function w2(s){return hh(_2,s.config.apiKey,s.name)}async function x2(s,e,n=!1){if(Yn(s.app))return Promise.reject(ur(s));const i=Ea(s),o=m2(i,e),d=await new E2(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=600*1e3;class N2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!NS(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ps(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A2&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function NS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function R2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(s,e={}){return Er(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j2=/^https?/;async function D2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await C2(s);for(const n of e)try{if(P2(n))return}catch{}fs(s,"unauthorized-domain")}function P2(s){const e=Bm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!j2.test(n))return!1;if(I2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new Ac(3e4,6e4);function fE(){const s=Os().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function M2(s){return new Promise((e,n)=>{function i(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(Ps(s,"network-request-failed"))},timeout:O2.get()})}if(Os().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Os().gapi?.load)i();else{const o=wN("iframefcb");return Os()[o]=()=>{gapi.load?i():n(Ps(s,"network-request-failed"))},hS(`${TN()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw fh=null,e})}let fh=null;function k2(s){return fh=fh||M2(s),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Ac(5e3,15e3),L2="__/auth/iframe",U2="emulator/auth/iframe",q2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B2(s){const e=s.config;we(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?wp(e,U2):`https://${s.config.authDomain}/${L2}`,i={apiKey:e.apiKey,appName:s.name,v:ko},o=z2.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${xc(i).slice(1)}`}async function F2(s){const e=await k2(s),n=Os().gapi;return we(n,s,"internal-error"),e.open({where:document.body,url:B2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q2,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ps(s,"network-request-failed"),g=Os().setTimeout(()=>{u(d)},V2.get());function p(){Os().clearTimeout(g),o(i)}i.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G2=500,Q2=600,$2="_blank",K2="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y2(s,e,n,i=G2,o=Q2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const p={...H2,width:i.toString(),height:o.toString(),top:u,left:d},y=dn().toLowerCase();n&&(g=rS(y)?$2:n),nS(y)&&(e=e||K2,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[C,q])=>`${A}${C}=${q},`,"");if(mN(y)&&g!=="_self")return X2(e||"",g),new mE(null);const T=window.open(e||"",g,_);we(T,s,"popup-blocked");try{T.focus()}catch{}return new mE(T)}function X2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="__/auth/handler",Z2="emulator/auth/handler",J2=encodeURIComponent("fac");async function pE(s,e,n,i,o,u){we(s.config.authDomain,s,"auth-domain-config-required"),we(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:ko,eventId:o};if(e instanceof mS){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",kx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))d[_]=T}if(e instanceof Rc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const p=await s._getAppCheckToken(),y=p?`#${J2}=${encodeURIComponent(p)}`:"";return`${eR(s)}?${xc(g).slice(1)}${y}`}function eR({config:s}){return s.emulator?wp(s,Z2):`https://${s.authDomain}/${W2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class tR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SS,this._completeRedirectFn=x2,this._overrideRedirectResult=b2}async _openPopup(e,n,i,o){mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await pE(e,n,i,Bm(),o);return Y2(e,u,Cp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await pE(e,n,i,Bm(),o);return r2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await F2(e),i=new N2(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cm,{type:Cm},o=>{const u=o?.[0]?.[Cm];u!==void 0&&n(!!u),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cS()||sS()||Ap()}}const nR=tR;var gE="@firebase/auth",yE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iR(s){xo(new ma("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=i.options;we(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uS(s)},y=new EN(i,o,u,p);return IN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xo(new ma("auth-internal",e=>{const n=Ea(e.getProvider("auth").getImmediate());return(i=>new sR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(gE,yE,rR(s)),di(gE,yE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=300,oR=U0("authIdTokenMaxAge")||aR;let vE=null;const lR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>oR)return;const o=n?.token;vE!==o&&(vE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cR(s=G0()){const e=bp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=CN(s,{popupRedirectResolver:nR,persistence:[f2,t2,SS]}),i=U0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=lR(u.toString());XN(n,d,()=>d(n.currentUser)),YN(n,g=>d(g))}}const o=V0("auth");return o&&jN(n,`http://${o}`),n}function uR(){return document.getElementsByTagName("head")?.[0]??document}SN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Ps("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",uR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iR("Browser");var hR="firebase",dR="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(hR,dR,"app");var _E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,RS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,b){function x(){}x.prototype=b.prototype,R.F=b.prototype,R.prototype=new x,R.prototype.constructor=R,R.D=function(j,O,z){for(var D=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)D[qe-2]=arguments[qe];return b.prototype[O].apply(j,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,b,x){x||(x=0);const j=Array(16);if(typeof b=="string")for(var O=0;O<16;++O)j[O]=b.charCodeAt(x++)|b.charCodeAt(x++)<<8|b.charCodeAt(x++)<<16|b.charCodeAt(x++)<<24;else for(O=0;O<16;++O)j[O]=b[x++]|b[x++]<<8|b[x++]<<16|b[x++]<<24;b=R.g[0],x=R.g[1],O=R.g[2];let z=R.g[3],D;D=b+(z^x&(O^z))+j[0]+3614090360&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(O^b&(x^O))+j[1]+3905402710&4294967295,z=b+(D<<12&4294967295|D>>>20),D=O+(x^z&(b^x))+j[2]+606105819&4294967295,O=z+(D<<17&4294967295|D>>>15),D=x+(b^O&(z^b))+j[3]+3250441966&4294967295,x=O+(D<<22&4294967295|D>>>10),D=b+(z^x&(O^z))+j[4]+4118548399&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(O^b&(x^O))+j[5]+1200080426&4294967295,z=b+(D<<12&4294967295|D>>>20),D=O+(x^z&(b^x))+j[6]+2821735955&4294967295,O=z+(D<<17&4294967295|D>>>15),D=x+(b^O&(z^b))+j[7]+4249261313&4294967295,x=O+(D<<22&4294967295|D>>>10),D=b+(z^x&(O^z))+j[8]+1770035416&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(O^b&(x^O))+j[9]+2336552879&4294967295,z=b+(D<<12&4294967295|D>>>20),D=O+(x^z&(b^x))+j[10]+4294925233&4294967295,O=z+(D<<17&4294967295|D>>>15),D=x+(b^O&(z^b))+j[11]+2304563134&4294967295,x=O+(D<<22&4294967295|D>>>10),D=b+(z^x&(O^z))+j[12]+1804603682&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(O^b&(x^O))+j[13]+4254626195&4294967295,z=b+(D<<12&4294967295|D>>>20),D=O+(x^z&(b^x))+j[14]+2792965006&4294967295,O=z+(D<<17&4294967295|D>>>15),D=x+(b^O&(z^b))+j[15]+1236535329&4294967295,x=O+(D<<22&4294967295|D>>>10),D=b+(O^z&(x^O))+j[1]+4129170786&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^O&(b^x))+j[6]+3225465664&4294967295,z=b+(D<<9&4294967295|D>>>23),D=O+(b^x&(z^b))+j[11]+643717713&4294967295,O=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(O^z))+j[0]+3921069994&4294967295,x=O+(D<<20&4294967295|D>>>12),D=b+(O^z&(x^O))+j[5]+3593408605&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^O&(b^x))+j[10]+38016083&4294967295,z=b+(D<<9&4294967295|D>>>23),D=O+(b^x&(z^b))+j[15]+3634488961&4294967295,O=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(O^z))+j[4]+3889429448&4294967295,x=O+(D<<20&4294967295|D>>>12),D=b+(O^z&(x^O))+j[9]+568446438&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^O&(b^x))+j[14]+3275163606&4294967295,z=b+(D<<9&4294967295|D>>>23),D=O+(b^x&(z^b))+j[3]+4107603335&4294967295,O=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(O^z))+j[8]+1163531501&4294967295,x=O+(D<<20&4294967295|D>>>12),D=b+(O^z&(x^O))+j[13]+2850285829&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^O&(b^x))+j[2]+4243563512&4294967295,z=b+(D<<9&4294967295|D>>>23),D=O+(b^x&(z^b))+j[7]+1735328473&4294967295,O=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(O^z))+j[12]+2368359562&4294967295,x=O+(D<<20&4294967295|D>>>12),D=b+(x^O^z)+j[5]+4294588738&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^O)+j[8]+2272392833&4294967295,z=b+(D<<11&4294967295|D>>>21),D=O+(z^b^x)+j[11]+1839030562&4294967295,O=z+(D<<16&4294967295|D>>>16),D=x+(O^z^b)+j[14]+4259657740&4294967295,x=O+(D<<23&4294967295|D>>>9),D=b+(x^O^z)+j[1]+2763975236&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^O)+j[4]+1272893353&4294967295,z=b+(D<<11&4294967295|D>>>21),D=O+(z^b^x)+j[7]+4139469664&4294967295,O=z+(D<<16&4294967295|D>>>16),D=x+(O^z^b)+j[10]+3200236656&4294967295,x=O+(D<<23&4294967295|D>>>9),D=b+(x^O^z)+j[13]+681279174&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^O)+j[0]+3936430074&4294967295,z=b+(D<<11&4294967295|D>>>21),D=O+(z^b^x)+j[3]+3572445317&4294967295,O=z+(D<<16&4294967295|D>>>16),D=x+(O^z^b)+j[6]+76029189&4294967295,x=O+(D<<23&4294967295|D>>>9),D=b+(x^O^z)+j[9]+3654602809&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^O)+j[12]+3873151461&4294967295,z=b+(D<<11&4294967295|D>>>21),D=O+(z^b^x)+j[15]+530742520&4294967295,O=z+(D<<16&4294967295|D>>>16),D=x+(O^z^b)+j[2]+3299628645&4294967295,x=O+(D<<23&4294967295|D>>>9),D=b+(O^(x|~z))+j[0]+4096336452&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~O))+j[7]+1126891415&4294967295,z=b+(D<<10&4294967295|D>>>22),D=O+(b^(z|~x))+j[14]+2878612391&4294967295,O=z+(D<<15&4294967295|D>>>17),D=x+(z^(O|~b))+j[5]+4237533241&4294967295,x=O+(D<<21&4294967295|D>>>11),D=b+(O^(x|~z))+j[12]+1700485571&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~O))+j[3]+2399980690&4294967295,z=b+(D<<10&4294967295|D>>>22),D=O+(b^(z|~x))+j[10]+4293915773&4294967295,O=z+(D<<15&4294967295|D>>>17),D=x+(z^(O|~b))+j[1]+2240044497&4294967295,x=O+(D<<21&4294967295|D>>>11),D=b+(O^(x|~z))+j[8]+1873313359&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~O))+j[15]+4264355552&4294967295,z=b+(D<<10&4294967295|D>>>22),D=O+(b^(z|~x))+j[6]+2734768916&4294967295,O=z+(D<<15&4294967295|D>>>17),D=x+(z^(O|~b))+j[13]+1309151649&4294967295,x=O+(D<<21&4294967295|D>>>11),D=b+(O^(x|~z))+j[4]+4149444226&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~O))+j[11]+3174756917&4294967295,z=b+(D<<10&4294967295|D>>>22),D=O+(b^(z|~x))+j[2]+718787259&4294967295,O=z+(D<<15&4294967295|D>>>17),D=x+(z^(O|~b))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+b&4294967295,R.g[1]=R.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,b){b===void 0&&(b=R.length);const x=b-this.blockSize,j=this.C;let O=this.h,z=0;for(;z<b;){if(O==0)for(;z<=x;)o(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<b;)if(j[O++]=R.charCodeAt(z++),O==this.blockSize){o(this,j),O=0;break}}else for(;z<b;)if(j[O++]=R[z++],O==this.blockSize){o(this,j),O=0;break}}this.h=O,this.o+=b},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var b=1;b<R.length-8;++b)R[b]=0;b=this.o*8;for(var x=R.length-8;x<R.length;++x)R[x]=b&255,b/=256;for(this.v(R),R=Array(16),b=0,x=0;x<4;++x)for(let j=0;j<32;j+=8)R[b++]=this.g[x]>>>j&255;return R};function u(R,b){var x=g;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=b(R)}function d(R,b){this.h=b;const x=[];let j=!0;for(let O=R.length-1;O>=0;O--){const z=R[O]|0;j&&z==b||(x[O]=z,j=!1)}this.g=x}var g={};function p(R){return-128<=R&&R<128?u(R,function(b){return new d([b|0],b<0?-1:0)}):new d([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return k(y(-R));const b=[];let x=1;for(let j=0;R>=x;j++)b[j]=R/x|0,x*=4294967296;return new d(b,0)}function _(R,b){if(R.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R.charAt(0)=="-")return k(_(R.substring(1),b));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=y(Math.pow(b,8));let j=T;for(let z=0;z<R.length;z+=8){var O=Math.min(8,R.length-z);const D=parseInt(R.substring(z,z+O),b);O<8?(O=y(Math.pow(b,O)),j=j.j(O).add(y(D))):(j=j.j(x),j=j.add(y(D)))}return j}var T=p(0),A=p(1),C=p(16777216);s=d.prototype,s.m=function(){if(Q(this))return-k(this).m();let R=0,b=1;for(let x=0;x<this.g.length;x++){const j=this.i(x);R+=(j>=0?j:4294967296+j)*b,b*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(Q(this))return"-"+k(this).toString(R);const b=y(Math.pow(R,6));var x=this;let j="";for(;;){const O=G(x,b).g;x=B(x,O.j(b));let z=((x.g.length>0?x.g[0]:x.h)>>>0).toString(R);if(x=O,q(x))return z+j;for(;z.length<6;)z="0"+z;j=z+j}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(let b=0;b<R.g.length;b++)if(R.g[b]!=0)return!1;return!0}function Q(R){return R.h==-1}s.l=function(R){return R=B(this,R),Q(R)?-1:q(R)?0:1};function k(R){const b=R.g.length,x=[];for(let j=0;j<b;j++)x[j]=~R.g[j];return new d(x,~R.h).add(A)}s.abs=function(){return Q(this)?k(this):this},s.add=function(R){const b=Math.max(this.g.length,R.g.length),x=[];let j=0;for(let O=0;O<=b;O++){let z=j+(this.i(O)&65535)+(R.i(O)&65535),D=(z>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);j=D>>>16,z&=65535,D&=65535,x[O]=D<<16|z}return new d(x,x[x.length-1]&-2147483648?-1:0)};function B(R,b){return R.add(k(b))}s.j=function(R){if(q(this)||q(R))return T;if(Q(this))return Q(R)?k(this).j(k(R)):k(k(this).j(R));if(Q(R))return k(this.j(k(R)));if(this.l(C)<0&&R.l(C)<0)return y(this.m()*R.m());const b=this.g.length+R.g.length,x=[];for(var j=0;j<2*b;j++)x[j]=0;for(j=0;j<this.g.length;j++)for(let O=0;O<R.g.length;O++){const z=this.i(j)>>>16,D=this.i(j)&65535,qe=R.i(O)>>>16,ze=R.i(O)&65535;x[2*j+2*O]+=D*ze,ne(x,2*j+2*O),x[2*j+2*O+1]+=z*ze,ne(x,2*j+2*O+1),x[2*j+2*O+1]+=D*qe,ne(x,2*j+2*O+1),x[2*j+2*O+2]+=z*qe,ne(x,2*j+2*O+2)}for(R=0;R<b;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=b;R<2*b;R++)x[R]=0;return new d(x,0)};function ne(R,b){for(;(R[b]&65535)!=R[b];)R[b+1]+=R[b]>>>16,R[b]&=65535,b++}function ae(R,b){this.g=R,this.h=b}function G(R,b){if(q(b))throw Error("division by zero");if(q(R))return new ae(T,T);if(Q(R))return b=G(k(R),b),new ae(k(b.g),k(b.h));if(Q(b))return b=G(R,k(b)),new ae(k(b.g),b.h);if(R.g.length>30){if(Q(R)||Q(b))throw Error("slowDivide_ only works with positive integers.");for(var x=A,j=b;j.l(R)<=0;)x=F(x),j=F(j);var O=V(x,1),z=V(j,1);for(j=V(j,2),x=V(x,2);!q(j);){var D=z.add(j);D.l(R)<=0&&(O=O.add(x),z=D),j=V(j,1),x=V(x,1)}return b=B(R,O.j(b)),new ae(O,b)}for(O=T;R.l(b)>=0;){for(x=Math.max(1,Math.floor(R.m()/b.m())),j=Math.ceil(Math.log(x)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),z=y(x),D=z.j(b);Q(D)||D.l(R)>0;)x-=j,z=y(x),D=z.j(b);q(z)&&(z=A),O=O.add(z),R=B(R,D)}return new ae(O,R)}s.B=function(R){return G(this,R).h},s.and=function(R){const b=Math.max(this.g.length,R.g.length),x=[];for(let j=0;j<b;j++)x[j]=this.i(j)&R.i(j);return new d(x,this.h&R.h)},s.or=function(R){const b=Math.max(this.g.length,R.g.length),x=[];for(let j=0;j<b;j++)x[j]=this.i(j)|R.i(j);return new d(x,this.h|R.h)},s.xor=function(R){const b=Math.max(this.g.length,R.g.length),x=[];for(let j=0;j<b;j++)x[j]=this.i(j)^R.i(j);return new d(x,this.h^R.h)};function F(R){const b=R.g.length+1,x=[];for(let j=0;j<b;j++)x[j]=R.i(j)<<1|R.i(j-1)>>>31;return new d(x,R.h)}function V(R,b){const x=b>>5;b%=32;const j=R.g.length-x,O=[];for(let z=0;z<j;z++)O[z]=b>0?R.i(z+x)>>>b|R.i(z+x+1)<<32-b:R.i(z+x);return new d(O,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,RS=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,fi=d}).apply(typeof _E<"u"?_E:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CS,ec,IS,mh,Qm,jS,DS,PS;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var E=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var K=h[N];if(!(K in E))break e;E=E[K]}h=h[h.length-1],N=E[h],v=v(N),v!=N&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&E.push([N,v[N]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function p(h,v,E){return h.call.apply(h.bind,arguments)}function y(h,v,E){return y=p,y.apply(null,arguments)}function _(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function T(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(N,K,J){for(var ue=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ue[Re-2]=arguments[Re];return v.prototype[K].apply(N,ue)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const v=h.length;if(v>0){const E=Array(v);for(let N=0;N<v;N++)E[N]=h[N];return E}return[]}function q(h,v){for(let N=1;N<arguments.length;N++){const K=arguments[N];var E=typeof K;if(E=E!="object"?E:K?Array.isArray(K)?"array":E:"null",E=="array"||E=="object"&&typeof K.length=="number"){E=h.length||0;const J=K.length||0;h.length=E+J;for(let ue=0;ue<J;ue++)h[E+ue]=K[ue]}else h.push(K)}}class Q{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function k(h){d.setTimeout(()=>{throw h},0)}function B(){var h=R;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ne{constructor(){this.h=this.g=null}add(v,E){const N=ae.get();N.set(v,E),this.h?this.h.next=N:this.g=N,this.h=N}}var ae=new Q(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let F,V=!1,R=new ne,b=()=>{const h=Promise.resolve(void 0);F=()=>{h.then(x)}};function x(){for(var h;h=B();){try{h.h.call(h.g)}catch(E){k(E)}var v=ae;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}V=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function qe(h,v){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(qe,O),qe.prototype.init=function(h,v){const E=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),ee=0;function fe(h,v,E,N,K){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!N,this.ha=K,this.key=++ee,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,v,E){for(const N in h)v.call(E,h[N],N,h)}function M(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function se(h){const v={};for(const E in h)v[E]=h[E];return v}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,v){let E,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(E in N)h[E]=N[E];for(let J=0;J<he.length;J++)E=he[J],Object.prototype.hasOwnProperty.call(N,E)&&(h[E]=N[E])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,E,N,K){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const ue=pe(h,v,N,K);return ue>-1?(v=h[ue],E||(v.fa=!1)):(v=new fe(v,this.src,J,!!N,K),v.fa=E,h.push(v)),v};function de(h,v){const E=v.type;if(E in h.g){var N=h.g[E],K=Array.prototype.indexOf.call(N,v,void 0),J;(J=K>=0)&&Array.prototype.splice.call(N,K,1),J&&(X(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function pe(h,v,E,N){for(let K=0;K<h.length;++K){const J=h[K];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==N)return K}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),Ge={};function es(h,v,E,N,K){if(Array.isArray(v)){for(let J=0;J<v.length;J++)es(h,v[J],E,N,K);return null}return E=kc(E),h&&h[ze]?h.J(v,E,g(N)?!!N.capture:!1,K):Fo(h,v,E,!1,N,K)}function Fo(h,v,E,N,K,J){if(!v)throw Error("Invalid event type");const ue=g(K)?!!K.capture:!!K;let Re=Ho(h);if(Re||(h[ct]=Re=new ce(h)),E=Re.add(v,E,N,ue,J),E.proxy)return E;if(N=Ta(),E.proxy=N,N.src=h,N.listener=E,h.addEventListener)z||(K=ue),K===void 0&&(K=!1),h.addEventListener(v.toString(),N,K);else if(h.attachEvent)h.attachEvent(xa(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ta(){function h(E){return v.call(h.src,h.listener,E)}const v=pd;return h}function wa(h,v,E,N,K){if(Array.isArray(v))for(var J=0;J<v.length;J++)wa(h,v[J],E,N,K);else N=g(N)?!!N.capture:!!N,E=kc(E),h&&h[ze]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],E=pe(v,E,N,K),E>-1&&(X(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=Ho(h))&&(v=h.g[v.toString()],h=-1,v&&(h=pe(v,E,N,K)),(E=h>-1?v[h]:null)&&xi(E))}function xi(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ze])de(v.i,h);else{var E=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(E,N,h.capture):v.detachEvent?v.detachEvent(xa(E),N):v.addListener&&v.removeListener&&v.removeListener(N),(E=Ho(v))?(de(E,h),E.h==0&&(E.src=null,v[ct]=null)):X(h)}}}function xa(h){return h in Ge?Ge[h]:Ge[h]="on"+h}function pd(h,v){if(h.da)h=!0;else{v=new qe(v,this);const E=h.listener,N=h.ha||h.src;h.fa&&xi(h),h=E.call(N,v)}return h}function Ho(h){return h=h[ct],h instanceof ce?h:null}var vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function kc(h){return typeof h=="function"?h:(h[vn]||(h[vn]=function(v){return h.handleEvent(v)}),h[vn])}function Mt(){j.call(this),this.i=new ce(this),this.M=this,this.G=null}T(Mt,j),Mt.prototype[ze]=!0,Mt.prototype.removeEventListener=function(h,v,E,N){wa(this,h,v,E,N)};function Bt(h,v){var E,N=h.G;if(N)for(E=[];N;N=N.G)E.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new O(v,h);else if(v instanceof O)v.target=v.target||h;else{var K=v;v=new O(N,h),L(v,K)}K=!0;let J,ue;if(E)for(ue=E.length-1;ue>=0;ue--)J=v.g=E[ue],K=qs(J,N,!0,v)&&K;if(J=v.g=h,K=qs(J,N,!0,v)&&K,K=qs(J,N,!1,v)&&K,E)for(ue=0;ue<E.length;ue++)J=v.g=E[ue],K=qs(J,N,!1,v)&&K}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let N=0;N<E.length;N++)X(E[N]);delete h.g[v],h.h--}}this.G=null},Mt.prototype.J=function(h,v,E,N){return this.i.add(String(h),v,!1,E,N)},Mt.prototype.K=function(h,v,E,N){return this.i.add(String(h),v,!0,E,N)};function qs(h,v,E,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let K=!0;for(let J=0;J<v.length;++J){const ue=v[J];if(ue&&!ue.da&&ue.capture==E){const Re=ue.listener,ut=ue.ha||ue.src;ue.fa&&de(h.i,ue),K=Re.call(ut,N)!==!1&&K}}return K&&!N.defaultPrevented}function gd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Go(h){h.g=gd(()=>{h.g=null,h.i&&(h.i=!1,Go(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class yd extends j{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(h){j.call(this),this.h=h,this.g={}}T(Ai,j);var Sr=[];function sn(h){_e(h.g,function(v,E){this.g.hasOwnProperty(E)&&xi(v)},h),h.g={}}Ai.prototype.N=function(){Ai.Z.N.call(this),sn(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=d.JSON.stringify,fn=d.JSON.parse,vd=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Vc(){}function Lc(){}var ys={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function br(){O.call(this,"d")}T(br,O);function ts(){O.call(this,"c")}T(ts,O);var Ln={},Tr=null;function Aa(){return Tr=Tr||new Mt}Ln.Ia="serverreachability";function Qo(h){O.call(this,Ln.Ia,h)}T(Qo,O);function wr(h){const v=Aa();Bt(v,new Qo(v))}Ln.STAT_EVENT="statevent";function Na(h,v){O.call(this,Ln.STAT_EVENT,h),this.stat=v}T(Na,O);function St(h){const v=Aa();Bt(v,new Na(v,h))}Ln.Ja="timingevent";function Uc(h,v){O.call(this,Ln.Ja,h),this.size=v}T(Uc,O);function xr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Ar(){this.g=!0}Ar.prototype.ua=function(){this.g=!1};function $o(h,v,E,N,K,J){h.info(function(){if(h.g)if(J){var ue="",Re=J.split("&");for(let Ye=0;Ye<Re.length;Ye++){var ut=Re[Ye].split("=");if(ut.length>1){const wt=ut[0];ut=ut[1];const An=wt.split("_");ue=An.length>=2&&An[1]=="type"?ue+(wt+"="+ut+"&"):ue+(wt+"=redacted&")}}}else ue=null;else ue=J;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+v+`
`+E+`
`+ue})}function Ko(h,v,E,N,K,J,ue){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+v+`
`+E+`
`+J+" "+ue})}function zs(h,v,E,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+vs(h,E)+(N?" "+N:"")})}function _d(h,v){h.info(function(){return"TIMEOUT: "+v})}Ar.prototype.info=function(){};function vs(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var N=E[1];if(Array.isArray(N)&&!(N.length<1)){var K=N[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ue=1;ue<N.length;ue++)N[ue]=""}}}}return Vn(J)}catch{return v}}var bt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bs;function Ni(){}T(Ni,Vc),Ni.prototype.g=function(){return new XMLHttpRequest},Bs=new Ni;function Ri(h){return encodeURIComponent(String(h))}function Ed(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function ns(h,v,E,N){this.j=h,this.i=v,this.l=E,this.S=N||1,this.V=new Ai(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nr}function Nr(){this.i=null,this.g="",this.h=!1}var Ra={},_s={};function Es(h,v,E){h.M=1,h.A=Hs(mt(v)),h.u=E,h.R=!0,Rr(h,null)}function Rr(h,v){h.F=Date.now(),Ci(h),h.B=mt(h.A);var E=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Fc(E.i,"t",N),h.C=0,E=h.j.L,h.h=new Nr,h.g=La(h.j,E?v:null,!h.u),h.P>0&&(h.O=new yd(y(h.Y,h,h.g),h.P)),v=h.V,E=h.g,N=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(Sr[0]=K.toString()),K=Sr);for(let J=0;J<K.length;J++){const ue=es(E,K[J],N||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.J?se(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),wr(),$o(h.i,h.v,h.B,h.l,h.S,h.u)}ns.prototype.ba=function(h){h=h.target;const v=this.O;v&&rn(h)==3?v.j():this.Y(h)},ns.prototype.Y=function(h){try{if(h==this.g)e:{const Re=rn(this.g),ut=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||qi(this.g)))){this.K||Re!=4||ut==7||(ut==8||Ye<=0?wr(3):wr(2)),bs(this);var v=this.g.ca();this.X=v;var E=Cr(this);if(this.o=v==200,Ko(this.i,this.v,this.B,this.l,this.S,Re,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,K=this.g;if((N=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var J=N;break t}}J=null}if(h=J)zs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ca(this,h);else{this.o=!1,this.m=3,St(12),Ts(this),Ii(this);break e}}if(this.R){h=!0;let wt;for(;!this.K&&this.C<E.length;)if(wt=qc(this,E),wt==_s){Re==4&&(this.m=4,St(14),h=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==Ra){this.m=4,St(15),zs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else zs(this.i,this.l,wt,null),Ca(this,wt);if(Tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||E.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)zs(this.i,this.l,E,"[Invalid Chunked Response]"),Ts(this),Ii(this);else if(E.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),rl(ue),ue.P=!0,St(11))}}else zs(this.i,this.l,E,null),Ca(this,E);Re==4&&Ts(this),this.o&&!this.K&&(Re==4?il(this.j,this):(this.o=!1,Ci(this)))}else zi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Ts(this),Ii(this)}}}catch{}finally{}};function Cr(h){if(!Tt(h))return h.g.la();const v=qi(h.g);if(v==="")return"";let E="";const N=v.length,K=rn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ts(h),Ii(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<N;J++)h.h.h=!0,E+=h.h.i.decode(v[J],{stream:!(K&&J==N-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function Tt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function qc(h,v){var E=h.C,N=v.indexOf(`
`,E);return N==-1?_s:(E=Number(v.substring(E,N)),isNaN(E)?Ra:(N+=1,N+E>v.length?_s:(v=v.slice(N,N+E),h.C=N+E,v)))}ns.prototype.cancel=function(){this.K=!0,Ts(this)};function Ci(h){h.T=Date.now()+h.H,Ss(h,h.H)}function Ss(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xr(y(h.aa,h),v)}function bs(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ns.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(_d(this.i,this.B),this.M!=2&&(wr(),St(17)),Ts(this),this.m=2,Ii(this)):Ss(this,this.T-h)};function Ii(h){h.j.I==0||h.K||il(h.j,h)}function Ts(h){bs(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,sn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Ca(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||Pi(E.h,h))){if(!h.L&&Pi(E.h,h)&&E.I==3){try{var N=E.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Va(E),ws(E);else break e;sl(E),St(18)}}else E.xa=K[1],0<E.xa-E.K&&K[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=xr(y(E.Va,E),6e3));Un(E.h)<=1&&E.ta&&(E.ta=void 0)}else $s(E,11)}else if((h.L||E.g==h)&&Va(E),!D(v))for(K=E.Ba.g.parse(v),v=0;v<K.length;v++){let Ye=K[v];const wt=Ye[0];if(!(wt<=E.K))if(E.K=wt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const An=Ye[3];An!=null&&(E.ka=An,E.j.info("VER="+E.ka));const xs=Ye[4];xs!=null&&(E.za=xs,E.j.info("SVER="+E.za));const is=Ye[5];is!=null&&typeof is=="number"&&is>0&&(N=1.5*is,E.O=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const as=h.g;if(as){const os=as.g?as.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var J=N.h;J.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ia(J,J.h),J.h=null))}if(N.G){const ol=as.g?as.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(N.wa=ol,Je(N.J,N.G,ol))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),N=E;var ue=h;if(N.na=Zc(N,N.L?N.ba:null,N.W),ue.L){Fs(N.h,ue);var Re=ue,ut=N.O;ut&&(Re.H=ut),Re.D&&(bs(Re),Ci(Re)),N.g=ue}else Kc(N);E.i.length>0&&Gi(E)}else Ye[0]!="stop"&&Ye[0]!="close"||$s(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?$s(E,7):Fi(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}wr(4)}catch{}}var Sd=class{constructor(h,v){this.g=h,this.map=v}};function ji(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Di(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Un(h){return h.h?1:h.g?h.g.size:0}function Pi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ia(h,v){h.g?h.g.add(v):h.h=v}function Fs(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ji.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ja(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return C(h.i)}var Da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bd(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const N=h[E].indexOf("=");let K,J=null;N>=0?(K=h[E].substring(0,N),J=h[E].substring(N+1)):K=h[E],v(K,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function ss(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ss?(this.l=h.l,Ir(this,h.j),this.o=h.o,this.g=h.g,Oi(this,h.u),this.h=h.h,jr(this,Hc(h.i)),this.m=h.m):h&&(v=String(h).match(Da))?(this.l=!1,Ir(this,v[1]||"",!0),this.o=Mi(v[2]||""),this.g=Mi(v[3]||"",!0),Oi(this,v[4]),this.h=Mi(v[5]||"",!0),jr(this,v[6]||"",!0),this.m=Mi(v[7]||"")):(this.l=!1,this.i=new qn(null,this.l))}ss.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ft(v,Xo,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ft(v,Xo,!0),"@"),h.push(Ri(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ft(E,E.charAt(0)=="/"?Dr:Wo,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ft(E,Bc)),h.join("")},ss.prototype.resolve=function(h){const v=mt(this);let E=!!h.j;E?Ir(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var N=h.h;if(E)Oi(v,h.u);else if(E=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var K=v.h.lastIndexOf("/");K!=-1&&(N=v.h.slice(0,K+1)+N)}if(K=N,K==".."||K==".")N="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){N=K.lastIndexOf("/",0)==0,K=K.split("/");const J=[];for(let ue=0;ue<K.length;){const Re=K[ue++];Re=="."?N&&ue==K.length&&J.push(""):Re==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),N&&ue==K.length&&J.push("")):(J.push(Re),N=!0)}N=J.join("/")}else N=K}return E?v.h=N:E=h.i.toString()!=="",E?jr(v,Hc(h.i)):E=!!h.m,E&&(v.m=h.m),v};function mt(h){return new ss(h)}function Ir(h,v,E){h.j=E?Mi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Oi(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function jr(h,v,E){v instanceof qn?(h.i=v,el(h.i,h.l)):(E||(v=Ft(v,zc)),h.i=new qn(v,h.l))}function Je(h,v,E){h.i.set(v,E)}function Hs(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ft(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Yo),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yo(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xo=/[#\/\?@]/g,Wo=/[#\?:]/g,Dr=/[#\?]/g,zc=/[#\?@]/g,Bc=/#/g;function qn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Gs(h){h.g||(h.g=new Map,h.h=0,h.i&&bd(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=qn.prototype,s.add=function(h,v){Gs(this),this.i=null,h=rs(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Zo(h,v){Gs(h),v=rs(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Jo(h,v){return Gs(h),v=rs(h,v),h.g.has(v)}s.forEach=function(h,v){Gs(this),this.g.forEach(function(E,N){E.forEach(function(K){h.call(v,K,N,this)},this)},this)};function Pa(h,v){Gs(h);let E=[];if(typeof v=="string")Jo(h,v)&&(E=E.concat(h.g.get(rs(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}s.set=function(h,v){return Gs(this),this.i=null,h=rs(this,h),Jo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Pa(this,h),h.length>0?String(h[0]):v):v};function Fc(h,v,E){Zo(h,v),E.length>0&&(h.i=null,h.g.set(rs(h,v),C(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var E=v[N];const K=Ri(E);E=Pa(this,E);for(let J=0;J<E.length;J++){let ue=K;E[J]!==""&&(ue+="="+Ri(E[J])),h.push(ue)}}return this.i=h.join("&")};function Hc(h){const v=new qn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function rs(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function el(h,v){v&&!h.j&&(Gs(h),h.i=null,h.g.forEach(function(E,N){const K=N.toLowerCase();N!=K&&(Zo(this,N),Fc(this,K,E))},h)),h.j=v}function tl(h,v){const E=new Ar;if(d.Image){const N=new Image;N.onload=_(mn,E,"TestLoadImage: loaded",!0,v,N),N.onerror=_(mn,E,"TestLoadImage: error",!1,v,N),N.onabort=_(mn,E,"TestLoadImage: abort",!1,v,N),N.ontimeout=_(mn,E,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function Pr(h,v){const E=new Ar,N=new AbortController,K=setTimeout(()=>{N.abort(),mn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(J=>{clearTimeout(K),J.ok?mn(E,"TestPingServer: ok",!0,v):mn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),mn(E,"TestPingServer: error",!1,v)})}function mn(h,v,E,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(E)}catch{}}function Gc(){this.g=new vd}function ki(h){this.i=h.Sb||null,this.h=h.ab||!1}T(ki,Vc),ki.prototype.g=function(){return new Vi(this.i,this.h)};function Vi(h,v){Mt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Vi,Mt),s=Vi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Qs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pn(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Or(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Or(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?pn(this):Qs(this),this.readyState==3&&Or(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,pn(this))},s.Na=function(h){this.g&&(this.response=h,pn(this))},s.ga=function(){this.g&&pn(this)};function pn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Qs(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Qs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mr(h){let v="";return _e(h,function(E,N){v+=N,v+=":",v+=E,v+=`\r
`}),v}function zn(h,v,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=Mr(E),typeof h=="string"?E!=null&&Ri(E):Je(h,v,E))}function rt(h){Mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,Mt);var Oa=/^https?$/i,Qc=["POST","PUT"];s=rt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bs.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Li(this,J);return}if(h=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)E.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const J of N.keys())E.set(J,N.get(J));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),K=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qc,v,void 0)>=0)||N||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of E)this.g.setRequestHeader(J,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Li(this,J)}};function Li(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Ui(h),kt(h)}function Ui(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Bt(this,"complete"),Bt(this,"abort"),kt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kt(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?nl(this):this.Xa())},s.Xa=function(){nl(this)};function nl(h){if(h.h&&typeof u<"u"){if(h.v&&rn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Bt(h,"readystatechange"),rn(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var N;if(N=J===0){let ue=String(h.D).match(Da)[1]||null;!ue&&d.self&&d.self.location&&(ue=d.self.location.protocol.slice(0,-1)),N=!Oa.test(ue?ue.toLowerCase():"")}E=N}if(E)Bt(h,"complete"),Bt(h,"success");else{h.o=6;try{var K=rn(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",Ui(h)}}finally{kt(h)}}}}function kt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||Bt(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function rn(h){return h.g?h.g.readyState:0}s.ca=function(){try{return rn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),fn(v)}};function qi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(h){const v={};h=(h.g&&rn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(D(h[N]))continue;var E=Ed(h[N]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[K]||[];v[K]=J,J.push(E)}M(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Ma(h){this.za=0,this.i=[],this.j=new Ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,h),this.Za=Bi("retryDelaySeedMs",1e4,h),this.Ta=Bi("forwardChannelMaxRetries",2,h),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ji(h&&h.concurrentRequestLimit),this.Ba=new Gc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ma.prototype,s.ka=8,s.I=1,s.connect=function(h,v,E,N){St(0),this.W=h,this.H=v||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.J=Zc(this,null,this.W),Gi(this)};function Fi(h){if(Hi(h),h.I==3){var v=h.V++,E=mt(h.J);if(Je(E,"SID",h.M),Je(E,"RID",v),Je(E,"TYPE","terminate"),Qi(h,E),v=new ns(h,h.j,v),v.M=2,v.A=Hs(mt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=La(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ci(v)}Wc(h)}function ws(h){h.g&&(rl(h),h.g.cancel(),h.g=null)}function Hi(h){ws(h),h.v&&(d.clearTimeout(h.v),h.v=null),Va(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Gi(h){if(!Di(h.h)&&!h.m){h.m=!0;var v=h.Ea;F||b(),V||(F(),V=!0),R.add(v,h),h.D=0}}function Td(h,v){return Un(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xr(y(h.Ea,h,v),Xc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new ns(this,this.j,h);let J=this.o;if(this.U&&(J?(J=se(J),L(J,this.U)):J=this.U),this.u!==null||this.R||(K.J=J,J=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=ka(this,K,v),E=mt(this.J),Je(E,"RID",h),Je(E,"CVER",22),this.G&&Je(E,"X-HTTP-Session-Id",this.G),Qi(this,E),J&&(this.R?v="headers="+Ri(Mr(J))+"&"+v:this.u&&zn(E,this.u,J)),Ia(this.h,K),this.Ra&&Je(E,"TYPE","init"),this.S?(Je(E,"$req",v),Je(E,"SID","null"),K.U=!0,Es(K,E,null)):Es(K,E,v),this.I=2}}else this.I==3&&(h?$c(this,h):this.i.length==0||Di(this.h)||$c(this))};function $c(h,v){var E;v?E=v.l:E=h.V++;const N=mt(h.J);Je(N,"SID",h.M),Je(N,"RID",E),Je(N,"AID",h.K),Qi(h,N),h.u&&h.o&&zn(N,h.u,h.o),E=new ns(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=ka(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ia(h.h,E),Es(E,N,v)}function Qi(h,v){h.H&&_e(h.H,function(E,N){Je(v,N,E)}),h.l&&_e({},function(E,N){Je(v,N,E)})}function ka(h,v,E){E=Math.min(h.i.length,E);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var K=h.i;let Re=-1;for(;;){const ut=["count="+E];Re==-1?E>0?(Re=K[0].g,ut.push("ofs="+Re)):Re=0:ut.push("ofs="+Re);let Ye=!0;for(let wt=0;wt<E;wt++){var J=K[wt].g;const An=K[wt].map;if(J-=Re,J<0)Re=Math.max(0,K[wt].g-100),Ye=!1;else try{J="req"+J+"_"||"";try{var ue=An instanceof Map?An:Object.entries(An);for(const[xs,is]of ue){let as=is;g(is)&&(as=Vn(is)),ut.push(J+xs+"="+encodeURIComponent(as))}}catch(xs){throw ut.push(J+"type="+encodeURIComponent("_badmap")),xs}}catch{N&&N(An)}}if(Ye){ue=ut.join("&");break e}}ue=void 0}return h=h.i.splice(0,E),v.G=h,ue}function Kc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;F||b(),V||(F(),V=!0),R.add(v,h),h.A=0}}function sl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xr(y(h.Da,h),Xc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xr(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),ws(this),Yc(this))};function rl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Yc(h){h.g=new ns(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=mt(h.na);Je(v,"RID","rpc"),Je(v,"SID",h.M),Je(v,"AID",h.K),Je(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(v,"TO",h.ia),Je(v,"TYPE","xmlhttp"),Qi(h,v),h.u&&h.o&&zn(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Hs(mt(v)),E.u=null,E.R=!0,Rr(E,h)}s.Va=function(){this.C!=null&&(this.C=null,ws(this),sl(this),St(19))};function Va(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function il(h,v){var E=null;if(h.g==v){Va(h),rl(h),h.g=null;var N=2}else if(Pi(h.h,v))E=v.G,Fs(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var K=h.D;N=Aa(),Bt(N,new Uc(N,E)),Gi(h)}else Kc(h);else if(K=v.m,K==3||K==0&&v.X>0||!(N==1&&Td(h,v)||N==2&&sl(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),K){case 1:$s(h,5);break;case 4:$s(h,10);break;case 3:$s(h,6);break;default:$s(h,2)}}}function Xc(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function $s(h,v){if(h.j.info("Error code "+v),v==2){var E=y(h.bb,h),N=h.Ua;const K=!N;N=new ss(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ir(N,"https"),Hs(N),K?tl(N.toString(),E):Pr(N.toString(),E)}else St(2);h.I=0,h.l&&h.l.pa(v),Wc(h),Hi(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Wc(h){if(h.I=0,h.ja=[],h.l){const v=ja(h.h);(v.length!=0||h.i.length!=0)&&(q(h.ja,v),q(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Zc(h,v,E){var N=E instanceof ss?mt(E):new ss(E);if(N.g!="")v&&(N.g=v+"."+N.g),Oi(N,N.u);else{var K=d.location;N=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;const J=new ss(null);N&&Ir(J,N),v&&(J.g=v),K&&Oi(J,K),E&&(J.h=E),N=J}return E=h.G,v=h.wa,E&&v&&Je(N,E,v),Je(N,"VER",h.ka),Qi(h,N),N}function La(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new rt(new ki({ab:E})):new rt(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}s=Jc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ua(){}Ua.prototype.g=function(h,v){return new gn(h,v)};function gn(h,v){Mt.call(this),this.g=new Ma(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new kr(this)}T(gn,Mt),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Fi(this.g)},gn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Vn(h),h=E);v.i.push(new Sd(v.Ya++,h)),v.I==3&&Gi(v)},gn.prototype.N=function(){this.g.l=null,delete this.j,Fi(this.g),delete this.g,gn.Z.N.call(this)};function al(h){br.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(al,br);function eu(){ts.call(this),this.status=1}T(eu,ts);function kr(h){this.g=h}T(kr,Jc),kr.prototype.ra=function(){Bt(this.g,"a")},kr.prototype.qa=function(h){Bt(this.g,new al(h))},kr.prototype.pa=function(h){Bt(this.g,new eu)},kr.prototype.oa=function(){Bt(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,PS=function(){return new Ua},DS=function(){return Aa()},jS=Ln,Qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,mh=bt,Kt.COMPLETE="complete",IS=Kt,Lc.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,ec=Lc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,CS=rt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const EE="@firebase/firestore",SE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Ep("@firebase/firestore");function po(){return ya.logLevel}function ge(s,...e){if(ya.logLevel<=Ve.DEBUG){const n=e.map(jp);ya.debug(`Firestore (${Lo}): ${s}`,...n)}}function pr(s,...e){if(ya.logLevel<=Ve.ERROR){const n=e.map(jp);ya.error(`Firestore (${Lo}): ${s}`,...n)}}function No(s,...e){if(ya.logLevel<=Ve.WARN){const n=e.map(jp);ya.warn(`Firestore (${Lo}): ${s}`,...n)}}function jp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,OS(s,i,n)}function OS(s,e,n){let i=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw pr(i),new Error(i)}function Ke(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||OS(e,o,i)}function Ce(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cn.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pR{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new MS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class gR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new gR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const i=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=_R(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function Le(s,e){return s<e?-1:s>e?1:0}function $m(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return Im(o)===Im(u)?Le(o,u):Im(o)?1:-1}return Le(s.length,e.length)}const ER=55296,SR=57343;function Im(s){const e=s.charCodeAt(0);return e>=ER&&e<=SR}function Ro(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class js{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&xe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof js?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=js.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const i=js.isNumericId(e),o=js.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?js.extractNumericId(e).compare(js.extractNumericId(n)):$m(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fi.fromString(e.substring(4,e.length-2))}}class ot extends js{construct(e,n,i){return new ot(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends js{construct(e,n,i){return new en(e,n,i)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new en([TE])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(i+=g,o++):(u(),o++)}if(u(),d)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ot.fromString(e))}static fromName(e){return new Se(ot.fromString(e).popFirst(5))}static empty(){return new Se(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(s,e,n){if(!n)throw new me(ie.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function TR(s,e,n,i){if(e===!0&&i===!0)throw new me(ie.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function wE(s){if(!Se.isDocumentKey(s))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xE(s){if(Se.isDocumentKey(s))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function VS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Kh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":xe(12329,{type:typeof s})}function xn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(s);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Ic(s,e){if(!VS(s))throw new me(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new me(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,NE=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*NE);return new ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AE)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NE}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Pt("string",ht._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function wR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(i===1e9?new ht(n+1,0):new ht(n,i));return new pi(o,Se.empty(),e)}function xR(s){return new pi(s.readTime,s.key,mc)}class pi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new pi(Ne.min(),Se.empty(),mc)}static max(){return new pi(Ne.max(),Se.empty(),mc)}}function AR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(s.documentKey,e.documentKey),n!==0?n:Le(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(s){if(s.code!==ie.FAILED_PRECONDITION||s.message!==NR)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&n()}),(p=>i(p)))})),d=!0,u===o&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((o=>o?le.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,o)=>{const u=e.length,d=new Array(u);let g=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((_=>{d[y]=_,++g,g===u&&i(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new le(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function CR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Xh(s){return s==null}function Ch(s){return s===0&&1/s==-1/0}function IR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="";function jR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=RE(e)),e=DR(s.get(n),e);return RE(e)}function DR(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case LS:n+="";break;default:n+=u}}return n}function RE(s){return s+LS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function bi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function US(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new Jt(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new On([])}unionWith(e){let n=new qt(en.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qS("Invalid base64 string: "+u):u}})(e);return new nn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const PR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=PR.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yi(s){return typeof s=="string"?nn.fromBase64String(s):nn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="server_timestamp",BS="__type__",FS="__previous_value__",HS="__local_write_time__";function Op(s){return(s?.mapValue?.fields||{})[BS]?.stringValue===zS}function Wh(s){const e=s.mapValue.fields[FS];return Op(e)?Wh(e):e}function pc(s){const e=gi(s.mapValue.fields[HS].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,i,o,u,d,g,p,y,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Ih="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="__type__",MR="__max__",ih={mapValue:{}},QS="__vector__",jh="value";function vi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Op(s)?4:VR(s)?9007199254740991:kR(s)?10:11:xe(28295,{value:s})}function Us(s,e){if(s===e)return!0;const n=vi(s);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return pc(s).isEqual(pc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=gi(o.timestampValue),g=gi(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return yi(o.bytesValue).isEqual(yi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Rt(o.geoPointValue.latitude)===Rt(u.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Rt(o.integerValue)===Rt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Rt(o.doubleValue),g=Rt(u.doubleValue);return d===g?Ch(d)===Ch(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Ro(s.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(CE(d)!==CE(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!Us(d[p],g[p])))return!1;return!0})(s,e);default:return xe(52216,{left:s})}}function yc(s,e){return(s.values||[]).find((n=>Us(n,e)))!==void 0}function Co(s,e){if(s===e)return 0;const n=vi(s),i=vi(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=Rt(u.integerValue||u.doubleValue),p=Rt(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return jE(s.timestampValue,e.timestampValue);case 4:return jE(pc(s),pc(e));case 5:return $m(s.stringValue,e.stringValue);case 6:return(function(u,d){const g=yi(u),p=yi(d);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const _=Le(g[y],p[y]);if(_!==0)return _}return Le(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=Le(Rt(u.latitude),Rt(d.latitude));return g!==0?g:Le(Rt(u.longitude),Rt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return DE(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const g=u.fields||{},p=d.fields||{},y=g[jh]?.arrayValue,_=p[jh]?.arrayValue,T=Le(y?.values?.length||0,_?.values?.length||0);return T!==0?T:DE(y,_)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===ih.mapValue&&d===ih.mapValue)return 0;if(u===ih.mapValue)return 1;if(d===ih.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),y=d.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const A=$m(p[T],_[T]);if(A!==0)return A;const C=Co(g[p[T]],y[_[T]]);if(C!==0)return C}return Le(p.length,_.length)})(s.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function jE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Le(s,e);const n=gi(s),i=gi(e),o=Le(n.seconds,i.seconds);return o!==0?o:Le(n.nanos,i.nanos)}function DE(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=Co(n[o],i[o]);if(u)return u}return Le(n.length,i.length)}function Io(s){return Km(s)}function Km(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=gi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Se.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=Km(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Km(n.fields[d])}`;return o+"}"})(s.mapValue):xe(61005,{value:s})}function ph(s){switch(vi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wh(s);return e?16+ph(e):16;case 5:return 2*s.stringValue.length;case 6:return yi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+ph(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return bi(i.fields,((u,d)=>{o+=u.length+ph(d)})),o})(s.mapValue);default:throw xe(13486,{value:s})}}function PE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ym(s){return!!s&&"integerValue"in s}function Mp(s){return!!s&&"arrayValue"in s}function OE(s){return!!s&&"nullValue"in s}function ME(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gh(s){return!!s&&"mapValue"in s}function kR(s){return(s?.mapValue?.fields||{})[GS]?.stringValue===QS}function oc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return bi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=oc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(s.arrayValue.values[n]);return e}return{...s}}function VR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===MR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=en.emptyPath(),i={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=g.popLast()}d?i[g.lastSegment()]=oc(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){bi(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new wn(oc(this.value))}}function $S(s){const e=[];return bi(s.fields,((n,i)=>{const o=new en([n]);if(gh(i)){const u=$S(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,i,o,u,d,g){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new un(e,0,Ne.min(),Ne.min(),Ne.min(),wn.empty(),0)}static newFoundDocument(e,n,i,o){return new un(e,1,n,Ne.min(),i,o,0)}static newNoDocument(e,n){return new un(e,2,n,Ne.min(),Ne.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ne.min(),Ne.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function kE(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=Se.comparator(Se.fromName(d.referenceValue),n.key):i=Co(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function VE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Us(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function LR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{}class Dt extends KS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new qR(e,n,i):n==="array-contains"?new FR(e,i):n==="in"?new HR(e,i):n==="not-in"?new GR(e,i):n==="array-contains-any"?new QR(e,i):new Dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new zR(e,i):new BR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Co(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends KS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ms(e,n)}matches(e){return YS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YS(s){return s.op==="and"}function XS(s){return UR(s)&&YS(s)}function UR(s){for(const e of s.filters)if(e instanceof ms)return!1;return!0}function Xm(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+Io(s.value);if(XS(s))return s.filters.map((e=>Xm(e))).join(",");{const e=s.filters.map((n=>Xm(n))).join(",");return`${s.op}(${e})`}}function WS(s,e){return s instanceof Dt?(function(i,o){return o instanceof Dt&&i.op===o.op&&i.field.isEqual(o.field)&&Us(i.value,o.value)})(s,e):s instanceof ms?(function(i,o){return o instanceof ms&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,g)=>u&&WS(d,o.filters[g])),!0):!1})(s,e):void xe(19439)}function ZS(s){return s instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`})(s):s instanceof ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(ZS).join(" ,")+"}"})(s):"Filter"}class qR extends Dt{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class zR extends Dt{constructor(e,n){super(e,"in",n),this.keys=JS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class BR extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=JS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function JS(s,e){return(e.arrayValue?.values||[]).map((n=>Se.fromName(n.referenceValue)))}class FR extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mp(n)&&yc(n.arrayValue,this.value)}}class HR extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class GR extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class QR extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>yc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n=null,i=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function LE(s,e=null,n=[],i=[],o=null,u=null,d=null){return new $R(s,e,n,i,o,u,d)}function kp(s){const e=Ce(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Xm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Io(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Io(i))).join(",")),e.Te=n}return e.Te}function Vp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!LR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!WS(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!VE(s.startAt,e.startAt)&&VE(s.endAt,e.endAt)}function Wm(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n=null,i=[],o=[],u=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KR(s,e,n,i,o,u,d,g){return new zo(s,e,n,i,o,u,d,g)}function Zh(s){return new zo(s)}function UE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function e1(s){return s.collectionGroup!==null}function lc(s){const e=Ce(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new qt(en.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vc(u,i))})),n.has(en.keyField().canonicalString())||e.Ie.push(new vc(en.keyField(),i))}return e.Ie}function Ms(s){const e=Ce(s);return e.Ee||(e.Ee=YR(e,lc(s))),e.Ee}function YR(s,e){if(s.limitType==="F")return LE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vc(o.field,u)}));const n=s.endAt?new Dh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Dh(s.startAt.position,s.startAt.inclusive):null;return LE(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Zm(s,e){const n=s.filters.concat([e]);return new zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Jm(s,e,n){return new zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Jh(s,e){return Vp(Ms(s),Ms(e))&&s.limitType===e.limitType}function t1(s){return`${kp(Ms(s))}|lt:${s.limitType}`}function go(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>ZS(o))).join(", ")}]`),Xh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Io(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Io(o))).join(",")),`Target(${i})`})(Ms(s))}; limitType=${s.limitType})`}function ed(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Se.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of lc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,g,p){const y=kE(d,g,p);return d.inclusive?y<=0:y<0})(i.startAt,lc(i),o)||i.endAt&&!(function(d,g,p){const y=kE(d,g,p);return d.inclusive?y>=0:y>0})(i.endAt,lc(i),o))})(s,e)}function XR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function n1(s){return(e,n)=>{let i=!1;for(const o of lc(s)){const u=WR(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function WR(s,e,n){const i=s.field.isKeyField()?Se.comparator(e.key,n.key):(function(u,d,g){const p=d.data.field(u),y=g.data.field(u);return p!==null&&y!==null?Co(p,y):xe(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return US(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new gt(Se.comparator);function gr(){return ZR}const s1=new gt(Se.comparator);function tc(...s){let e=s1;for(const n of s)e=e.insert(n.key,n);return e}function r1(s){let e=s1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ca(){return cc()}function i1(){return cc()}function cc(){return new Sa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const JR=new gt(Se.comparator),eC=new qt(Se.comparator);function Ue(...s){let e=eC;for(const n of s)e=e.add(n);return e}const tC=new qt(Le);function nC(){return tC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function a1(s){return{integerValue:""+s}}function sC(s,e){return IR(e)?a1(e):Lp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function rC(s,e,n){return s instanceof Ph?(function(o,u){const d={fields:{[BS]:{stringValue:zS},[HS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Op(u)&&(u=Wh(u)),u&&(d.fields[FS]=u),{mapValue:d}})(n,e):s instanceof _c?l1(s,e):s instanceof Ec?c1(s,e):(function(o,u){const d=o1(o,u),g=qE(d)+qE(o.Ae);return Ym(d)&&Ym(o.Ae)?a1(g):Lp(o.serializer,g)})(s,e)}function iC(s,e,n){return s instanceof _c?l1(s,e):s instanceof Ec?c1(s,e):n}function o1(s,e){return s instanceof Oh?(function(i){return Ym(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Ph extends td{}class _c extends td{constructor(e){super(),this.elements=e}}function l1(s,e){const n=u1(e);for(const i of s.elements)n.some((o=>Us(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Ec extends td{constructor(e){super(),this.elements=e}}function c1(s,e){let n=u1(e);for(const i of s.elements)n=n.filter((o=>!Us(o,i)));return{arrayValue:{values:n}}}class Oh extends td{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qE(s){return Rt(s.integerValue||s.doubleValue)}function u1(s){return Mp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function aC(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof _c&&o instanceof _c||i instanceof Ec&&o instanceof Ec?Ro(i.elements,o.elements,Us):i instanceof Oh&&o instanceof Oh?Us(i.Ae,o.Ae):i instanceof Ph&&o instanceof Ph})(s.transform,e.transform)}class oC{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class nd{}function h1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Up(s.key,Wn.none()):new jc(s.key,s.data,Wn.none());{const n=s.data,i=wn.empty();let o=new qt(en.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new Ti(s.key,i,new On(o.toArray()),Wn.none())}}function lC(s,e,n){s instanceof jc?(function(o,u,d){const g=o.value.clone(),p=BE(o.fieldTransforms,u,d.transformResults);g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):s instanceof Ti?(function(o,u,d){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=BE(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(d1(o)),p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function uc(s,e,n,i){return s instanceof jc?(function(u,d,g,p){if(!yh(u.precondition,d))return g;const y=u.value.clone(),_=FE(u.fieldTransforms,p,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof Ti?(function(u,d,g,p){if(!yh(u.precondition,d))return g;const y=FE(u.fieldTransforms,p,d),_=d.data;return _.setAll(d1(u)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,i):(function(u,d,g){return yh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,n)}function cC(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=o1(i.transform,o||null);u!=null&&(n===null&&(n=wn.empty()),n.set(i.field,u))}return n||null}function zE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ro(i,o,((u,d)=>aC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class jc extends nd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ti extends nd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function d1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function BE(s,e,n){const i=new Map;Ke(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,g=e.data.field(u.field);i.set(u.field,iC(d,g,n[o]))}return i}function FE(s,e,n){const i=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);i.set(o.field,rC(u,d,e))}return i}class Up extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uC extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&lC(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=i1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=n.has(o.key)?null:g;const p=h1(d,g);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Ne.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((n,i)=>zE(n,i)))&&Ro(this.baseMutations,e.baseMutations,((n,i)=>zE(n,i)))}}class qp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return JR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new qp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Fe;function mC(s){switch(s){case ie.OK:return xe(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return xe(15467,{code:s})}}function f1(s){if(s===void 0)return pr("GRPC error has no .code"),ie.UNKNOWN;switch(s){case jt.OK:return ie.OK;case jt.CANCELLED:return ie.CANCELLED;case jt.UNKNOWN:return ie.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ie.INTERNAL;case jt.UNAVAILABLE:return ie.UNAVAILABLE;case jt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case jt.NOT_FOUND:return ie.NOT_FOUND;case jt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case jt.ABORTED:return ie.ABORTED;case jt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case jt.DATA_LOSS:return ie.DATA_LOSS;default:return xe(39323,{code:s})}}(Fe=jt||(jt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new fi([4294967295,4294967295],0);function HE(s){const e=pC().encode(s),n=new RS;return n.update(e),new Uint8Array(n.digest())}function GE(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fi([n,i],0),new fi([o,u],0)]}class zp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(i<0)throw new nc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(fi.fromNumber(i)));return o.compare(gC)===1&&(o=new fi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=HE(e),[i,o]=GE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new zp(u,o,n);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=HE(e),[i,o]=GE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new sd(Ne.min(),o,new gt(Le),gr(),Ue())}}class Dc{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Dc(i,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class m1{constructor(e,n){this.targetId=e,this.Ce=n}}class p1{constructor(e,n,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class QE{constructor(){this.ve=0,this.Fe=$E(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),i=Ue();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:xe(38017,{changeType:u})}})),new Dc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=$E()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yC{constructor(e){this.Ge=e,this.ze=new Map,this.je=gr(),this.Je=ah(),this.He=ah(),this.Ye=new gt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Wm(u))if(i===0){const d=new Se(u.path);this.et(n,d,un.newNoDocument(d,Ne.min()))}else Ke(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,g;try{d=yi(i).toUint8Array()}catch(p){if(p instanceof qS)return No("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new zp(d,o,u)}catch(p){return No(p instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&Wm(g.target)){const p=new Se(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,un.newNoDocument(p,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let i=Ue();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new sd(e,n,this.Ye,this.je,i);return this.je=gr(),this.Je=ah(),this.He=ah(),this.Ye=new gt(Le),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new QE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ah(){return new gt(Se.comparator)}function $E(){return new gt(Se.comparator)}const vC={asc:"ASCENDING",desc:"DESCENDING"},_C={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EC={and:"AND",or:"OR"};class SC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(s,e){return s.useProto3Json||Xh(e)?e:{value:e}}function Mh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function bC(s,e){return Mh(s,e.toTimestamp())}function ks(s){return Ke(!!s,49232),Ne.fromTimestamp((function(n){const i=gi(n);return new ht(i.seconds,i.nanos)})(s))}function Bp(s,e){return tp(s,e).canonicalString()}function tp(s,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function y1(s){const e=ot.fromString(s);return Ke(b1(e),10190,{key:e.toString()}),e}function np(s,e){return Bp(s.databaseId,e.path)}function jm(s,e){const n=y1(e);if(n.get(1)!==s.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Se(_1(n))}function v1(s,e){return Bp(s.databaseId,e)}function TC(s){const e=y1(s);return e.length===4?ot.emptyPath():_1(e)}function sp(s){return new ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function _1(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function KE(s,e,n){return{name:np(s,e),fields:n.value.mapValue.fields}}function wC(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:xe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,_){return y.useProto3Json?(Ke(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const _=y.code===void 0?ie.UNKNOWN:f1(y.code);return new me(_,y.message||"")})(d);n=new p1(i,o,u,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=jm(s,i.document.name),u=ks(i.document.updateTime),d=i.document.createTime?ks(i.document.createTime):Ne.min(),g=new wn({mapValue:{fields:i.document.fields}}),p=un.newFoundDocument(o,u,d,g),y=i.targetIds||[],_=i.removedTargetIds||[];n=new vh(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=jm(s,i.document),u=i.readTime?ks(i.readTime):Ne.min(),d=un.newNoDocument(o,u),g=i.removedTargetIds||[];n=new vh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=jm(s,i.document),u=i.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new fC(o,u),g=i.targetId;n=new m1(g,d)}}return n}function xC(s,e){let n;if(e instanceof jc)n={update:KE(s,e.key,e.value)};else if(e instanceof Up)n={delete:np(s,e.key)};else if(e instanceof Ti)n={update:KE(s,e.key,e.data),updateMask:OC(e.fieldMask)};else{if(!(e instanceof uC))return xe(16599,{Vt:e.type});n={verify:np(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const g=d.transform;if(g instanceof Ph)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof _c)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Oh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw xe(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:bC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe(27497)})(s,e.precondition)),n}function AC(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?ks(o.updateTime):ks(u);return d.isEqual(Ne.min())&&(d=ks(u)),new oC(d,o.transformResults||[])})(n,e)))):[]}function NC(s,e){return{documents:[v1(s,e.path)]}}function RC(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=v1(s,o);const u=(function(y){if(y.length!==0)return S1(ms.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:yo(A.field),direction:jC(A.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=ep(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function CC(s){let e=TC(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const A=E1(T);return A instanceof ms&&XS(A)?A.getFilters():[A]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((A=>(function(q){return new vc(vo(q.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(A)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let A;return A=typeof T=="object"?T.value:T,Xh(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(T){const A=!!T.before,C=T.values||[];return new Dh(C,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const A=!T.before,C=T.values||[];return new Dh(C,A)})(n.endAt)),KR(e,o,d,u,g,"F",p,y)}function IC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=vo(n.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vo(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=vo(n.unaryFilter.field);return Dt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Dt.create(vo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ms.create(n.compositeFilter.filters.map((i=>E1(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(n.compositeFilter.op))})(s):xe(30097,{filter:s})}function jC(s){return vC[s]}function DC(s){return _C[s]}function PC(s){return EC[s]}function yo(s){return{fieldPath:s.canonicalString()}}function vo(s){return en.fromServerFormat(s.fieldPath)}function S1(s){return s instanceof Dt?(function(n){if(n.op==="=="){if(ME(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NAN"}};if(OE(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ME(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NAN"}};if(OE(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(n.field),op:DC(n.op),value:n.value}}})(s):s instanceof ms?(function(n){const i=n.getFilters().map((o=>S1(o)));return i.length===1?i[0]:{compositeFilter:{op:PC(n.op),filters:i}}})(s):xe(54877,{filter:s})}function OC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function b1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,i,o,u=Ne.min(),d=Ne.min(),g=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.yt=e}}function kC(s){const e=CC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.Cn=new LC}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(pi.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class LC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new qt(ot.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new qt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T1=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(T1,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",UC=1048576;function WE([s,e],[n,i]){const o=Le(s,n);return o===0?Le(e,i):o}class qC{constructor(e){this.Ir=e,this.buffer=new qt(WE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();WE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(XE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qo(n)?ge(XE,"Ignoring IndexedDB error during garbage collection: ",n):await Uo(n)}await this.Vr(3e5)}))}}class BC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Yh.ce);const i=new qC(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(YE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,u,d,g,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,g=Date.now(),this.removeTargets(e,i,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),po()<=Ve.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function FC(s,e){return new BC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.changes=new Sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&uc(i.mutation,o,On.empty(),ht.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ue()){const o=ca();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let d=tc();return u.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ca();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ue())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,i,o){let u=gr();const d=cc(),g=(function(){return cc()})();return n.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ti)?u=u.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),uc(_.mutation,y,_.mutation.getFieldMask(),ht.now())):d.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,_)=>d.set(y,_))),n.forEach(((y,_)=>g.set(y,new GC(_,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const i=cc();let o=new gt(((d,g)=>d-g)),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let _=i.get(p)||On.empty();_=g.applyToLocalView(y,_),i.set(p,_);const T=(o.get(g.batchId)||Ue()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,_=p.value,T=i1();_.forEach((A=>{if(!u.has(A)){const C=h1(n.get(A),i.get(A));C!==null&&T.set(A,C),u=u.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return le.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Se.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):e1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):le.resolve(ca());let g=mc,p=u;return d.next((y=>le.forEach(y,((_,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Ue()))).next((_=>({batchId:g,changes:r1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((i=>{let o=tc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=tc();return this.indexManager.getCollectionParents(e,u).next((g=>le.forEach(g,(p=>{const y=(function(T,A){return new zo(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((T,A)=>{d=d.insert(T,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((d=>{u.forEach(((p,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,un.newInvalidDocument(_)))}));let g=tc();return d.forEach(((p,y)=>{const _=u.get(p);_!==void 0&&uc(_.mutation,y,On.empty(),ht.now()),ed(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ks(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:kC(o.bundledQuery),readTime:ks(o.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.overlays=new gt(Se.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ca();return le.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.St(e,n,u)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const o=ca(),u=n.length+1,d=new Se(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>i&&o.set(p.getKey(),p)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new gt(((y,_)=>y-_));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let _=u.get(y.largestBatchId);_===null&&(_=ca(),u=u.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const g=ca(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>g.set(y,_))),!(g.size()>=o)););return le.resolve(g)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new dC(n,i));let u=this.qr.get(n);u===void 0&&(u=Ue(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Qr=new qt($t.$r),this.Ur=new qt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new $t(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new $t(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Se(new ot([])),i=new $t(n,e),o=new $t(n,e+1),u=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new ot([])),i=new $t(n,e),o=new $t(n,e+1);let u=Ue();return this.Ur.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new $t(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt($t.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new hC(u,n,i,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new $t(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Pp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new $t(n,0),o=new $t(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new qt(Le);return n.forEach((o=>{const u=new $t(o,0),d=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{i=i.add(g.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;Se.isDocumentKey(u)||(u=u.child(""));const d=new $t(new Se(u),0);let g=new qt(Le);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),d),le.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,(o=>{const u=new $t(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new $t(n,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.ri=e,this.docs=(function(){return new gt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let i=gr();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=gr();const d=n.path,g=new Se(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||AR(xR(_),i)<=0||(o.has(_.key)||ed(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,i,o){xe(9500)}ii(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new ZC(this)}getSize(e){return le.resolve(this.size)}}class ZC extends HC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.persistence=e,this.si=new Sa((n=>kp(n)),Vp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Fp,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yh(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=e(this),this.Pi=new JC(this),this.indexManager=new VC,this.remoteDocumentCache=(function(o){return new WC(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new MC(n),this.Ii=new $C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new XC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const o=new eI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class eI extends RR{constructor(e){super(),this.currentSequenceNumber=e}}class Hp{constructor(e){this.persistence=e,this.Ri=new Fp,this.Vi=null}static mi(e){return new Hp(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=Se.fromPath(i);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new Sa((i=>jR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=FC(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?le.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(i++,u.removeEntry(d,Ne.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ix()?8:CR(dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new tI;return this.Ss(e,n,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>u.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(po()<=Ve.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(po()<=Ve.DEBUG&&ge("QueryEngine","Query:",go(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(po()<=Ve.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(n))):le.resolve())}ys(e,n){if(UE(n))return le.resolve(null);let i=Ms(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Jm(n,null,"F"),i=Ms(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Ue(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(e,Jm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,i,o){return UE(n)||o.isEqual(Ne.min())?le.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,i,o)?le.resolve(null):(po()<=Ve.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(n)),this.vs(e,d,n,wR(o,mc)).next((g=>g)))}))}Ds(e,n){let i=new qt(n1(e));return n.forEach(((o,u)=>{ed(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return po()<=Ve.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,pi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",sI=3e8;class rI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(Le),this.xs=new Sa((u=>kp(u)),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function iI(s,e,n,i){return new rI(s,e,n,i)}async function x1(s,e){const n=Ce(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],g=[];let p=Ue();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of u){g.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function aI(s,e){const n=Ce(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,_){const T=y.batch,A=T.keys();let C=le.resolve();return A.forEach((q=>{C=C.next((()=>_.getEntry(p,q))).next((Q=>{const k=y.docVersions.get(q);Ke(k!==null,48541),Q.version.compareTo(k)<0&&(T.applyToRemoteDocument(Q,y),Q.isValidDocument()&&(Q.setReadTime(y.commitVersion),_.addEntry(Q)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let p=Ue();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function A1(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function oI(s,e){const n=Ce(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((_,T)=>{const A=o.get(T);if(!A)return;g.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,T))));let C=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(nn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(T,C),(function(Q,k,B){return Q.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=sI?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(A,C,_)&&g.push(n.Pi.updateTargetData(u,C))}));let p=gr(),y=Ue();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(lI(u,d,e.documentUpdates).next((_=>{p=_.ks,y=_.qs}))),!i.isEqual(Ne.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));g.push(_)}return le.waitFor(g).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function lI(s,e,n){let i=Ue(),o=Ue();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=gr();return n.forEach(((g,p)=>{const y=u.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Ne.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):ge(Qp,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function cI(s,e){const n=Ce(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Pp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function uI(s,e){const n=Ce(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((u=>u?(o=u,le.resolve(o)):n.Pi.allocateTargetId(i).next((d=>(o=new ci(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function rp(s,e,n){const i=Ce(s),o=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!qo(d))throw d;ge(Qp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function ZE(s,e,n){const i=Ce(s);let o=Ne.min(),u=Ue();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,_){const T=Ce(p),A=T.xs.get(_);return A!==void 0?le.resolve(T.Ms.get(A)):T.Pi.getTargetData(y,_)})(i,d,Ms(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{u=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?o:Ne.min(),n?u:Ue()))).next((g=>(hI(i,XR(e),g),{documents:g,Qs:u})))))}function hI(s,e,n){let i=s.Os.get(e)||Ne.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class JE{constructor(){this.activeTargetIds=nC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dI{constructor(){this.Mo=new JE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="ConnectivityMonitor";class t0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(e0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(e0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function ip(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",mI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,u){const d=ip(),g=this.zo(e,n.toUriEncodedString());ge(Dm,`Sending RPC '${e}' ${d}:`,g,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(g),_=Mo(y);return this.Jo(e,g,p,i,_).then((T=>(ge(Dm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw No(Dm,`RPC '${e}' ${d} failed with error: `,T,"url: ",g,"request:",i),T}))}Ho(e,n,i,o,u,d){return this.Go(e,n,i,o,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const i=mI[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class yI extends pI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const d=ip();return new Promise(((g,p)=>{const y=new CS;y.setWithCredentials(!0),y.listenOnce(IS.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case mh.NO_ERROR:const T=y.getResponseJson();ge(ln,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),g(T);break;case mh.TIMEOUT:ge(ln,`RPC '${e}' ${d} timed out`),p(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const A=y.getStatus();if(ge(ln,`RPC '${e}' ${d} failed with status:`,A,"response text:",y.getResponseText()),A>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const q=C?.error;if(q&&q.status&&q.message){const Q=(function(B){const ne=B.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(ne)>=0?ne:ie.UNKNOWN})(q.status);p(new me(Q,q.message))}else p(new me(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new me(ie.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ge(ln,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ge(ln,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",_,i,15)}))}T_(e,n,i){const o=ip(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=PS(),g=DS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const _=u.join("");ge(ln,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=d.createWebChannel(_,p);this.I_(T);let A=!1,C=!1;const q=new gI({Yo:k=>{C?ge(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(A||(ge(ln,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),ge(ln,`RPC '${e}' stream ${o} sending:`,k),T.send(k))},Zo:()=>T.close()}),Q=(k,B,ne)=>{k.listen(B,(ae=>{try{ne(ae)}catch(G){setTimeout((()=>{throw G}),0)}}))};return Q(T,ec.EventType.OPEN,(()=>{C||(ge(ln,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),Q(T,ec.EventType.CLOSE,(()=>{C||(C=!0,ge(ln,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(T))})),Q(T,ec.EventType.ERROR,(k=>{C||(C=!0,No(ln,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),q.a_(new me(ie.UNAVAILABLE,"The operation could not be completed")))})),Q(T,ec.EventType.MESSAGE,(k=>{if(!C){const B=k.data[0];Ke(!!B,16349);const ne=B,ae=ne?.error||ne[0]?.error;if(ae){ge(ln,`RPC '${e}' stream ${o} received error:`,ae);const G=ae.status;let F=(function(b){const x=jt[b];if(x!==void 0)return f1(x)})(G),V=ae.message;F===void 0&&(F=ie.INTERNAL,V="Unknown error status: "+G+" with message "+ae.message),C=!0,q.a_(new me(F,V)),T.close()}else ge(ln,`RPC '${e}' stream ${o} received:`,B),q.u_(B)}})),Q(g,jS.STAT_EVENT,(k=>{k.stat===Qm.PROXY?ge(ln,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===Qm.NOPROXY&&ge(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){return new SC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="PersistentStream";class R1{constructor(e,n,i,o,u,d,g,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new N1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new me(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(n0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(n0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends R1{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wC(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Ne.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ne.min():d.readTime?ks(d.readTime):Ne.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(u,d){let g;const p=d.target;if(g=Wm(p)?{documents:NC(u,p)}:{query:RC(u,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=g1(u,d.resumeToken);const y=ep(u,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ne.min())>0){g.readTime=Mh(u,d.snapshotVersion.toTimestamp());const y=ep(u,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const i=IC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class _I extends R1{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=AC(e.writeResults,e.commitTime),i=ks(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>xC(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{}class SI extends EI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,tp(n,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ie.UNKNOWN,u.toString())}))}Ho(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,tp(n,i),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new me(ie.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pr(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class TI{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{ba(this)&&(ge(va,"Restarting streams for network reachability change."),await(async function(p){const y=Ce(p);y.Ea.add(4),await Pc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await id(y)})(this))}))})),this.Ra=new bI(i,o)}}async function id(s){if(ba(s))for(const e of s.da)await e(!0)}async function Pc(s){for(const e of s.da)await e(!1)}function C1(s,e){const n=Ce(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xp(n)?Yp(n):Bo(n).O_()&&Kp(n,e))}function $p(s,e){const n=Ce(s),i=Bo(n);n.Ia.delete(e),i.O_()&&I1(n,e),n.Ia.size===0&&(i.O_()?i.L_():ba(n)&&n.Ra.set("Unknown"))}function Kp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bo(s).Y_(e)}function I1(s,e){s.Va.Ue(e),Bo(s).Z_(e)}function Yp(s){s.Va=new yC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Bo(s).start(),s.Ra.ua()}function Xp(s){return ba(s)&&!Bo(s).x_()&&s.Ia.size>0}function ba(s){return Ce(s).Ea.size===0}function j1(s){s.Va=void 0}async function wI(s){s.Ra.set("Online")}async function xI(s){s.Ia.forEach(((e,n)=>{Kp(s,e)}))}async function AI(s,e){j1(s),Xp(s)?(s.Ra.ha(e),Yp(s)):s.Ra.set("Unknown")}async function NI(s,e,n){if(s.Ra.set("Online"),e instanceof p1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(i){ge(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vh(s,i)}else if(e instanceof vh?s.Va.Ze(e):e instanceof m1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ne.min()))try{const i=await A1(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ia.get(y);_&&u.Ia.set(y,_.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const _=u.Ia.get(p);if(!_)return;u.Ia.set(p,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),I1(u,p);const T=new ci(_.target,p,y,_.sequenceNumber);Kp(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(i){ge(va,"Failed to raise snapshot:",i),await Vh(s,i)}}async function Vh(s,e,n){if(!qo(e))throw e;s.Ea.add(1),await Pc(s),s.Ra.set("Offline"),n||(n=()=>A1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(va,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await id(s)}))}function D1(s,e){return e().catch((n=>Vh(s,n,e)))}async function ad(s){const e=Ce(s),n=_i(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pp;for(;RI(e);)try{const o=await cI(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,CI(e,o)}catch(o){await Vh(e,o)}P1(e)&&O1(e)}function RI(s){return ba(s)&&s.Ta.length<10}function CI(s,e){s.Ta.push(e);const n=_i(s);n.O_()&&n.X_&&n.ea(e.mutations)}function P1(s){return ba(s)&&!_i(s).x_()&&s.Ta.length>0}function O1(s){_i(s).start()}async function II(s){_i(s).ra()}async function jI(s){const e=_i(s);for(const n of s.Ta)e.ea(n.mutations)}async function DI(s,e,n){const i=s.Ta.shift(),o=qp.from(i,e,n);await D1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ad(s)}async function PI(s,e){e&&_i(s).X_&&await(async function(i,o){if((function(d){return mC(d)&&d!==ie.ABORTED})(o.code)){const u=i.Ta.shift();_i(i).B_(),await D1(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ad(i)}})(s,e),P1(s)&&O1(s)}async function s0(s,e){const n=Ce(s);n.asyncQueue.verifyOperationInProgress(),ge(va,"RemoteStore received new credentials");const i=ba(n);n.Ea.add(3),await Pc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await id(n)}async function OI(s,e){const n=Ce(s);e?(n.Ea.delete(2),await id(n)):e||(n.Ea.add(2),await Pc(n),n.Ra.set("Unknown"))}function Bo(s){return s.ma||(s.ma=(function(n,i,o){const u=Ce(n);return u.sa(),new vI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:wI.bind(null,s),t_:xI.bind(null,s),r_:AI.bind(null,s),H_:NI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Xp(s)?Yp(s):s.Ra.set("Unknown")):(await s.ma.stop(),j1(s))}))),s.ma}function _i(s){return s.fa||(s.fa=(function(n,i,o){const u=Ce(n);return u.sa(),new _I(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:II.bind(null,s),r_:PI.bind(null,s),ta:jI.bind(null,s),na:DI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ad(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(va,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,g=new Wp(e,n,d,o,u);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(s,e){if(pr("AsyncQueue",`${e}: ${s}`),qo(s))return new me(ie.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=tc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.ga=new gt(Se.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Do{constructor(e,n,i,o,u,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Do(e,n,wo.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kI{constructor(){this.queries=i0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ce(n),u=o.queries;o.queries=i0(),u.forEach(((d,g)=>{for(const p of g.Sa)p.onError(i)}))})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function i0(){return new Sa((s=>t1(s)),Jh)}async function Jp(s,e){const n=Ce(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new MI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=Zp(d,`Initialization of query '${go(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&tg(n)}async function eg(s,e){const n=Ce(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function VI(s,e){const n=Ce(s);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(i=!0);d.wa=o}}i&&tg(n)}function LI(s,e,n){const i=Ce(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function tg(s){s.Ca.forEach((e=>{e.next()}))}var ap,a0;(a0=ap||(ap={})).Ma="default",a0.Cache="cache";class ng{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Do(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.key=e}}class k1{constructor(e){this.key=e}}class UI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=n1(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new r0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const A=o.get(_),C=ed(this.query,T)?T:null,q=!!A&&this.mutatedKeys.has(A.key),Q=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let k=!1;A&&C?A.data.isEqual(C.data)?q!==Q&&(i.track({type:3,doc:C}),k=!0):this.su(A,C)||(i.track({type:2,doc:C}),k=!0,(p&&this.eu(C,p)>0||y&&this.eu(C,y)<0)&&(g=!0)):!A&&C?(i.track({type:0,doc:C}),k=!0):A&&!C&&(i.track({type:1,doc:A}),k=!0,(p||y)&&(g=!0)),k&&(C?(d=d.add(C),u=Q?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,T)=>(function(C,q){const Q=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:k})}};return Q(C)-Q(q)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new Do(this.query,e.tu,u,d,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new k1(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new M1(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Do.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sg="SyncEngine";class qI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class zI{constructor(e){this.key=e,this.hu=!1}}class BI{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Sa((g=>t1(g)),Jh),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Se.comparator),this.Au=new Map,this.Ru=new Fp,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FI(s,e,n=!0){const i=B1(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await V1(i,e,n,!0),o}async function HI(s,e){const n=B1(s);await V1(n,e,!0,!1)}async function V1(s,e,n,i){const o=await uI(s.localStore,Ms(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let g;return i&&(g=await GI(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&C1(s.remoteStore,o),g}async function GI(s,e,n,i,o){s.pu=(T,A,C)=>(async function(Q,k,B,ne){let ae=k.view.ru(B);ae.Cs&&(ae=await ZE(Q.localStore,k.query,!1).then((({documents:R})=>k.view.ru(R,ae))));const G=ne&&ne.targetChanges.get(k.targetId),F=ne&&ne.targetMismatches.get(k.targetId)!=null,V=k.view.applyChanges(ae,Q.isPrimaryClient,G,F);return l0(Q,k.targetId,V.au),V.snapshot})(s,T,A,C);const u=await ZE(s.localStore,e,!0),d=new UI(e,u.Qs),g=d.ru(u.documents),p=Dc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=d.applyChanges(g,s.isPrimaryClient,p);l0(s,n,y.au);const _=new qI(e,n,d);return s.Tu.set(e,_),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function QI(s,e,n){const i=Ce(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!Jh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await rp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&$p(i.remoteStore,o.targetId),op(i,o.targetId)})).catch(Uo)):(op(i,o.targetId),await rp(i.localStore,o.targetId,!0))}async function $I(s,e){const n=Ce(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$p(n.remoteStore,i.targetId))}async function KI(s,e,n){const i=tj(s);try{const o=await(function(d,g){const p=Ce(d),y=ht.now(),_=g.reduce(((C,q)=>C.add(q.key)),Ue());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let q=gr(),Q=Ue();return p.Ns.getEntries(C,_).next((k=>{q=k,q.forEach(((B,ne)=>{ne.isValidDocument()||(Q=Q.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,q))).next((k=>{T=k;const B=[];for(const ne of g){const ae=cC(ne,T.get(ne.key).overlayedDocument);ae!=null&&B.push(new Ti(ne.key,ae,$S(ae.value.mapValue),Wn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,B,g)})).next((k=>{A=k;const B=k.applyToLocalDocumentSet(T,Q);return p.documentOverlayCache.saveOverlays(C,k.batchId,B)}))})).then((()=>({batchId:A.batchId,changes:r1(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new gt(Le)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y})(i,o.batchId,n),await Oc(i,o.changes),await ad(i.remoteStore)}catch(o){const u=Zp(o,"Failed to persist write");n.reject(u)}}async function L1(s,e){const n=Ce(s);try{const i=await oI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await Oc(n,i,e)}catch(i){await Uo(i)}}function o0(s,e,n){const i=Ce(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const p=Ce(d);p.onlineState=g;let y=!1;p.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(g)&&(y=!0)})),y&&tg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YI(s,e,n){const i=Ce(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new gt(Se.comparator);d=d.insert(u,un.newNoDocument(u,Ne.min()));const g=Ue().add(u),p=new sd(Ne.min(),new Map,new gt(Le),d,g);await L1(i,p),i.du=i.du.remove(u),i.Au.delete(e),rg(i)}else await rp(i.localStore,e,!1).then((()=>op(i,e,n))).catch(Uo)}async function XI(s,e){const n=Ce(s),i=e.batch.batchId;try{const o=await aI(n.localStore,e);q1(n,i,null),U1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Oc(n,o)}catch(o){await Uo(o)}}async function WI(s,e,n){const i=Ce(s);try{const o=await(function(d,g){const p=Ce(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,g).next((T=>(Ke(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);q1(i,e,n),U1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Oc(i,o)}catch(o){await Uo(o)}}function U1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function q1(s,e,n){const i=Ce(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function op(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||z1(s,i)}))}function z1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&($p(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),rg(s))}function l0(s,e,n){for(const i of n)i instanceof M1?(s.Ru.addReference(i.key,e),ZI(s,i)):i instanceof k1?(ge(sg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||z1(s,i.key)):xe(19791,{wu:i})}function ZI(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(ge(sg,"New document in limbo: "+n),s.Eu.add(i),rg(s))}function rg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Se(ot.fromString(e)),i=s.fu.next();s.Au.set(i,new zI(n)),s.du=s.du.insert(n,i),C1(s.remoteStore,new ci(Ms(Zh(n.path)),i,"TargetPurposeLimboResolution",Yh.ce))}}async function Oc(s,e,n){const i=Ce(s),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,p)=>{d.push(i.pu(p,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const _=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Gp.As(p.targetId,y);u.push(_)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(p,y){const _=Ce(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>le.forEach(y,(A=>le.forEach(A.Es,(C=>_.persistence.referenceDelegate.addReference(T,A.targetId,C))).next((()=>le.forEach(A.ds,(C=>_.persistence.referenceDelegate.removeReference(T,A.targetId,C)))))))))}catch(T){if(!qo(T))throw T;ge(Qp,"Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const C=_.Ms.get(A),q=C.snapshotVersion,Q=C.withLastLimboFreeSnapshotVersion(q);_.Ms=_.Ms.insert(A,Q)}}})(i.localStore,u))}async function JI(s,e){const n=Ce(s);if(!n.currentUser.isEqual(e)){ge(sg,"User change. New user:",e.toKey());const i=await x1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new me(ie.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Oc(n,i.Ls)}}function ej(s,e){const n=Ce(s),i=n.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let o=Ue();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function B1(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=L1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YI.bind(null,e),e.Pu.H_=VI.bind(null,e.eventManager),e.Pu.yu=LI.bind(null,e.eventManager),e}function tj(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WI.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iI(this.persistence,new nI,e.initialUser,this.serializer)}Cu(e){return new w1(Hp.mi,this.serializer)}Du(e){return new dI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class nj extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof kh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new w1((i=>kh.mi(i,n)),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JI.bind(null,this.syncEngine),await OI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),i=(function(u){return new yI(u)})(e.databaseInfo);return(function(u,d,g,p){return new SI(u,d,g,p)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,d,g){return new TI(i,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>o0(this.syncEngine,n,0)),(function(){return t0.v()?new t0:new fI})())}createSyncEngine(e,n){return(function(o,u,d,g,p,y,_){const T=new BI(o,u,d,g,p,y);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ce(n);ge(va,"RemoteStore shutting down."),i.Ea.add(5),await Pc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="FirestoreClient";class sj{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{ge(Ei,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Ei,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Zp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Om(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Ei,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await x1(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function c0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await rj(s);ge(Ei,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>s0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>s0(e.remoteStore,o))),s._onlineComponents=e}async function rj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Ei,"Using user provided OfflineComponentProvider");try{await Om(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await Om(s,new Lh)}}else ge(Ei,"Using default OfflineComponentProvider"),await Om(s,new nj(void 0));return s._offlineComponents}async function F1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Ei,"Using user provided OnlineComponentProvider"),await c0(s,s._uninitializedComponentsProvider._online)):(ge(Ei,"Using default OnlineComponentProvider"),await c0(s,new lp))),s._onlineComponents}function ij(s){return F1(s).then((e=>e.syncEngine))}async function Uh(s){const e=await F1(s),n=e.eventManager;return n.onListen=FI.bind(null,e.syncEngine),n.onUnlisten=QI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$I.bind(null,e.syncEngine),n}function aj(s,e,n={}){const i=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,p,y){const _=new ig({next:A=>{_.Nu(),d.enqueueAndForget((()=>eg(u,T)));const C=A.docs.has(g);!C&&A.fromCache?y.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&A.fromCache&&p&&p.source==="server"?y.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),T=new ng(Zh(g.path),_,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}function oj(s,e,n={}){const i=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,p,y){const _=new ig({next:A=>{_.Nu(),d.enqueueAndForget((()=>eg(u,T))),A.fromCache&&p.source==="server"?y.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),T=new ng(g,_,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firestore.googleapis.com",h0=!0;class d0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G1,this.ssl=h0}else this.host=e.host,this.ssl=e.ssl??h0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UC)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new fR;switch(i.type){case"firstParty":return new yR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=u0.get(n);i&&(ge("ComponentProvider","Removing Datastore"),u0.delete(n),i.terminate())})(this),Promise.resolve()}}function lj(s,e,n,i={}){s=xn(s,od);const o=Mo(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(q0(`https://${g}`),z0("Firestore",!0)),u.host!==G1&&u.host!==g&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:i};if(!fa(p,d)&&(s._setSettings(p),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=cn.MOCK_USER;else{y=Sx(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new cn(T)}s._authCredentials=new mR(new MS(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class _t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ic(n,_t._jsonSchema))return new _t(e,i||null,new Se(ot.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Pt("string",_t._jsonSchemaVersion),referencePath:Pt("string")};class mi extends wi{constructor(e,n,i){super(e,n,Zh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Se(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function je(s,e,...n){if(s=Ot(s),kS("collection","path",e),s instanceof od){const i=ot.fromString(e,...n);return xE(i),new mi(s,null,i)}{if(!(s instanceof _t||s instanceof mi))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ot.fromString(e,...n));return xE(i),new mi(s.firestore,null,i)}}function at(s,e,...n){if(s=Ot(s),arguments.length===1&&(e=Dp.newId()),kS("doc","path",e),s instanceof od){const i=ot.fromString(e,...n);return wE(i),new _t(s,null,new Se(i))}{if(!(s instanceof _t||s instanceof mi))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ot.fromString(e,...n));return wE(i),new _t(s.firestore,s instanceof mi?s.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="AsyncQueue";class m0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new N1(this,"async_queue_retry"),this._c=()=>{const i=Pm();i&&ge(f0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;ge(f0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,pr("INTERNAL UNHANDLED ERROR: ",p0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Wp.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:p0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function p0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class yr extends od{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new m0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m0(e),this._firestoreClient=void 0,await e}}}function cj(s,e){const n=typeof s=="object"?s:G0(),i=typeof s=="string"?s:Ih,o=bp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=_x("firestore");u&&lj(o,...u)}return o}function ld(s){if(s._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||uj(s),s._firestoreClient}function uj(s){const e=s._freezeSettings(),n=(function(o,u,d,g){return new OR(o,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,H1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new sj(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(nn.fromBase64String(e))}catch(n){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Pt("string",Xn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vs._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,Vs._jsonSchema))return new Vs(e.latitude,e.longitude)}}Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:Pt("string",Vs._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ls(e.vectorValues);throw new me(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:Pt("string",Ls._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=/^__.*__$/;class dj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new jc(e,this.data,n,this.fieldTransforms)}}class Q1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:s})}}class og{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($1(this.Ac)&&hj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rd(e)}Cc(e,n,i,o=!1){return new og({Ac:e,methodName:n,Dc:i,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(s){const e=s._freezeSettings(),n=rd(s._databaseId);return new fj(s._databaseId,!!e.ignoreUndefinedProperties,n)}function K1(s,e,n,i,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",d,i);const g=Y1(i,d);let p,y;if(u.merge)p=new On(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const A=cp(e,T,n);if(!d.contains(A))throw new me(ie.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);W1(_,A)||_.push(A)}p=new On(_),y=d.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=d.fieldTransforms;return new dj(new wn(g),p,y)}class hd extends ag{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}function mj(s,e,n,i){const o=s.Cc(1,e,n);lg("Data must be an object, but it was:",o,i);const u=[],d=wn.empty();bi(i,((p,y)=>{const _=cg(e,p,n);y=Ot(y);const T=o.yc(_);if(y instanceof hd)u.push(_);else{const A=Mc(y,T);A!=null&&(u.push(_),d.set(_,A))}}));const g=new On(u);return new Q1(d,g,o.fieldTransforms)}function pj(s,e,n,i,o,u){const d=s.Cc(1,e,n),g=[cp(e,i,n)],p=[o];if(u.length%2!=0)throw new me(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)g.push(cp(e,u[A])),p.push(u[A+1]);const y=[],_=wn.empty();for(let A=g.length-1;A>=0;--A)if(!W1(y,g[A])){const C=g[A];let q=p[A];q=Ot(q);const Q=d.yc(C);if(q instanceof hd)y.push(C);else{const k=Mc(q,Q);k!=null&&(y.push(C),_.set(C,k))}}const T=new On(y);return new Q1(_,T,d.fieldTransforms)}function gj(s,e,n,i=!1){return Mc(n,s.Cc(i?4:3,e))}function Mc(s,e){if(X1(s=Ot(s)))return lg("Unsupported field value:",e,s),Y1(s,e);if(s instanceof ag)return(function(i,o){if(!$1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const g of i){let p=Mc(g,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ht.fromDate(i);return{timestampValue:Mh(o.serializer,u)}}if(i instanceof ht){const u=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mh(o.serializer,u)}}if(i instanceof Vs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:g1(o.serializer,i._byteString)};if(i instanceof _t){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ls)return(function(d,g){return{mapValue:{fields:{[GS]:{stringValue:QS},[jh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Lp(g.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Kh(i)}`)})(s,e)}function Y1(s,e){const n={};return US(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(s,((i,o)=>{const u=Mc(o,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function X1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ht||s instanceof Vs||s instanceof Xn||s instanceof _t||s instanceof ag||s instanceof Ls)}function lg(s,e,n){if(!X1(n)||!VS(n)){const i=Kh(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function cp(s,e,n){if((e=Ot(e))instanceof cd)return e._internalPath;if(typeof e=="string")return cg(s,e);throw qh("Field path arguments must be of type string or ",s,!1,void 0,n)}const yj=new RegExp("[~\\*/\\[\\]]");function cg(s,e,n){if(e.search(yj)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new cd(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function qh(s,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new me(ie.INVALID_ARGUMENT,g+s+p)}function W1(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vj extends Z1{data(){return super.data()}}function dd(s,e){return typeof e=="string"?cg(s,e):e instanceof cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class eb extends ug{}function lt(s,e,...n){let i=[];e instanceof ug&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((p=>p instanceof hg)).length,g=u.filter((p=>p instanceof fd)).length;if(d>1||d>0&&g>0)throw new me(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class fd extends eb{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new fd(e,n,i)}_apply(e){const n=this._parse(e);return tb(e._query,n),new wi(e.firestore,e.converter,Zm(e._query,n))}_parse(e){const n=ud(e.firestore);return(function(u,d,g,p,y,_,T){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){v0(T,_);const q=[];for(const Q of T)q.push(y0(p,u,Q));A={arrayValue:{values:q}}}else A=y0(p,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||v0(T,_),A=gj(g,d,T,_==="in"||_==="not-in");return Dt.create(y,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function He(s,e,n){const i=e,o=dd("where",s);return fd._create(o,i,n)}class hg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const g=u.getFlattenedFilters();for(const p of g)tb(d,p),d=Zm(d,p)})(e._query,n),new wi(e.firestore,e.converter,Zm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends eb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(u,d)})(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new zo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function ua(s,e="asc"){const n=e,i=dd("orderBy",s);return dg._create(i,n)}function y0(s,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new me(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e1(e)&&n.indexOf("/")!==-1)throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ot.fromString(n));if(!Se.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return PE(s,new Se(i))}if(n instanceof _t)return PE(s,n._key);throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function v0(s,e){if(!Array.isArray(s)||s.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tb(s,e){const n=(function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _j{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bi(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[jh].arrayValue?.values?.map((i=>Rt(i.doubleValue)));return new Ls(n)}convertGeoPoint(e){return new Vs(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Wh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=gi(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ot.fromString(e);Ke(b1(i),9688,{name:e});const o=new gc(i.get(1),i.get(3)),u=new Se(i.popFirst(5));return o.isEqual(n)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends Z1{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(dd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Pt("string",ha._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class _h extends ha{data(e={}){return super.data(e)}}class da{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new sc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new _h(this._firestore,this._userDataWriter,i.key,i,new sc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const p=new _h(o._firestore,o._userDataWriter,g.doc.key,g.doc,new sc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new _h(o._firestore,o._userDataWriter,g.doc.key,g.doc,new sc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),_=d.indexOf(g.doc.key)),{type:Ej(g.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ej(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s){s=xn(s,_t);const e=xn(s.firestore,yr);return aj(ld(e),s._key).then((n=>rb(e,s,n)))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:Pt("string",da._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class fg extends _j{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function Ze(s){s=xn(s,wi);const e=xn(s.firestore,yr),n=ld(e),i=new fg(e);return J1(s._query),oj(n,s._query).then((o=>new da(e,i,s,o)))}function Sj(s,e,n){s=xn(s,_t);const i=xn(s.firestore,yr),o=nb(s.converter,e);return md(i,[K1(ud(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Wn.none())])}function Mn(s,e,n,...i){s=xn(s,_t);const o=xn(s.firestore,yr),u=ud(o);let d;return d=typeof(e=Ot(e))=="string"||e instanceof cd?pj(u,"updateDoc",s._key,e,n,i):mj(u,"updateDoc",s._key,e),md(o,[d.toMutation(s._key,Wn.exists(!0))])}function Ds(s){return md(xn(s.firestore,yr),[new Up(s._key,Wn.none())])}function vr(s,e){const n=xn(s.firestore,yr),i=at(s),o=nb(s.converter,e);return md(n,[K1(ud(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then((()=>i))}function sb(s,...e){s=Ot(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||g0(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(g0(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let u,d,g;if(s instanceof _t)d=xn(s.firestore,yr),g=Zh(s._key.path),u={next:p=>{e[i]&&e[i](rb(d,s,p))},error:e[i+1],complete:e[i+2]};else{const p=xn(s,wi);d=xn(p.firestore,yr),g=p._query;const y=new fg(d);u={next:_=>{e[i]&&e[i](new da(d,y,p,_))},error:e[i+1],complete:e[i+2]},J1(s._query)}return(function(y,_,T,A){const C=new ig(A),q=new ng(_,C,T);return y.asyncQueue.enqueueAndForget((async()=>Jp(await Uh(y),q))),()=>{C.Nu(),y.asyncQueue.enqueueAndForget((async()=>eg(await Uh(y),q)))}})(ld(d),g,o,u)}function md(s,e){return(function(i,o){const u=new hr;return i.asyncQueue.enqueueAndForget((async()=>KI(await ij(i),o,u))),u.promise})(ld(s),e)}function rb(s,e,n){const i=n.docs.get(e._key),o=new fg(s);return new ha(s,o,e._key,i,new sc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Lo=o})(ko),xo(new ma("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),g=new yr(new pR(i.getProvider("auth-internal")),new vR(d,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(y.options.projectId,_)})(d,o),d);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),di(EE,SE,e),di(EE,SE,"esm2020")})();const _o={FIREBASE:{API_KEY:"AIzaSyBnil9YV9LpAVA4GLUjoPoq7PSgq3DYYgk",AUTH_DOMAIN:"animals-adoption-app-v2.firebaseapp.com",PROJECT_ID:"animals-adoption-app-v2",MESSAGING_SENDER_ID:"702758490735",APP_ID:"1:702758490735:web:animals-adoption-app-v2"},APP:{NAME:"Expo2025 - Adopción de Mascotas",VERSION:"1.0.0",ENVIRONMENT:"development"},SECURITY:{MAX_SHELTERS_PER_USER:parseInt("3")||3,MAX_PETS_PER_USER:parseInt("10")||10,MAX_DAILY_CREATIONS:parseInt("5")||5,REQUEST_TIMEOUT:parseInt("10000")||1e4},FEATURES:{ENABLE_STORAGE:!1,ENABLE_ANALYTICS:!1,ENABLE_MESSAGING:!1}},bj=()=>{const s=["FIREBASE.API_KEY","FIREBASE.AUTH_DOMAIN","FIREBASE.PROJECT_ID","FIREBASE.MESSAGING_SENDER_ID","FIREBASE.APP_ID"],e=[];return s.forEach(n=>{const i=n.split(".");let o=_o;for(const u of i)o=o?.[u];o||e.push(n)}),e.length>0&&(console.warn("⚠️ Variables de entorno faltantes:",e),console.warn("💡 Usando valores por defecto. En producción, configura las variables de entorno.")),e.length===0};bj();const Tj={apiKey:_o.FIREBASE.API_KEY,authDomain:_o.FIREBASE.AUTH_DOMAIN,projectId:_o.FIREBASE.PROJECT_ID,messagingSenderId:_o.FIREBASE.MESSAGING_SENDER_ID,appId:_o.FIREBASE.APP_ID},mg=H0(Tj),ye=cj(mg),rc=cR(mg);console.log("Firebase initialized:",mg);console.log("Firestore database:",ye);console.log("Firebase auth:",rc);const up={getNotifications:async s=>{try{const e=lt(je(ye,"notifications"),He("userId","==",s),ua("timestamp","desc"));return(await Ze(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting notifications:",e),[]}},createNotification:async s=>{try{console.log("notificationService.createNotification called with:",s);const e={...s,timestamp:new Date().toISOString(),read:!1};console.log("Creating notification document:",e);const n=await vr(je(ye,"notifications"),e);return console.log("✅ Notification created with ID:",n.id),n.id}catch(e){throw console.error("❌ Error creating notification:",e),e}},markAsRead:async s=>{try{await Mn(at(ye,"notifications",s),{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),e}},subscribeToNotifications:(s,e)=>{const n=lt(je(ye,"notifications"),He("userId","==",s),ua("timestamp","desc"));return sb(n,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllNotifications:async()=>{try{return(await Ze(je(ye,"notifications"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting all notifications:",s),[]}}},Tn={getConversations:async s=>{try{const e=lt(je(ye,"conversations"),He("participants","array-contains",s),ua("lastMessageTime","desc"));return(await Ze(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting conversations:",e),[]}},createConversation:async(s,e=null)=>{try{const n={participants:s,petId:e,lastMessage:"",lastMessageTime:new Date().toISOString(),createdAt:new Date().toISOString()};return(await vr(je(ye,"conversations"),n)).id}catch(n){throw console.error("Error creating conversation:",n),n}},getMessages:async s=>{try{const e=lt(je(ye,"messages"),He("conversationId","==",s),ua("timestamp","asc"));return(await Ze(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting messages:",e),[]}},subscribeToMessages:(s,e)=>{console.log("chatService.subscribeToMessages called for:",s);const n=lt(je(ye,"messages"),He("conversationId","==",s),ua("timestamp","asc"));return sb(n,i=>{console.log("chatService.subscribeToMessages: received snapshot with",i.docs.length,"messages");const o=i.docs.map(u=>({id:u.id,...u.data()}));console.log("chatService.subscribeToMessages: processed messages:",o),e(o)},i=>{console.error("chatService.subscribeToMessages error:",i)})},sendMessage:async(s,e,n)=>{try{console.log("chatService.sendMessage called:",{conversationId:s,senderId:e,messageText:n});const o=(await kn.getUserProfile(e))?.name||"Usuario",u={conversationId:s,senderId:e,senderName:o,message:n,timestamp:new Date().toISOString(),read:!1},d=await vr(je(ye,"messages"),u);return console.log("✅ Message sent with ID:",d.id),await Mn(at(ye,"conversations",s),{lastMessage:n,lastMessageTime:new Date().toISOString()}),d.id}catch(i){throw console.error("Error sending message:",i),i}},getOrCreateConversation:async(s,e,n=null)=>{try{console.log("chatService.getOrCreateConversation called:",{userId1:s,userId2:e,petId:n});const i=lt(je(ye,"conversations"),He("participants","array-contains",s)),u=(await Ze(i)).docs.find(g=>{const p=g.data();return p.participants.includes(e)&&p.participants.includes(s)});if(u)return console.log("✅ Found existing conversation:",u.id),n&&u.data().petId!==n&&(console.log("Updating conversation with new petId:",n),await Mn(at(ye,"conversations",u.id),{petId:n,lastMessageTime:new Date().toISOString()})),u.id;const d=await Tn.createConversation([s,e],n);return console.log("✅ Created new conversation:",d),d}catch(i){throw console.error("Error getting or creating conversation:",i),i}},markMessagesAsRead:async(s,e)=>{try{const n=lt(je(ye,"messages"),He("conversationId","==",s),He("senderId","!=",e),He("read","==",!1)),o=(await Ze(n)).docs.map(u=>Mn(u.ref,{read:!0}));await Promise.all(o),console.log(`✅ Marked ${o.length} messages as read`)}catch(n){console.error("Error marking messages as read:",n)}},deleteConversation:async s=>{try{console.log("chatService.deleteConversation called for:",s);const e=lt(je(ye,"messages"),He("conversationId","==",s)),n=await Ze(e);console.log(`Found ${n.size} messages to delete`);const i=n.docs.map(o=>(console.log("Deleting message:",o.id),Ds(o.ref)));return i.length>0&&(await Promise.all(i),console.log("✅ Deleted all messages")),console.log("Deleting conversation:",s),await Ds(at(ye,"conversations",s)),console.log("✅ Conversation deleted successfully"),{success:!0,deletedMessages:n.size}}catch(e){throw console.error("Error deleting conversation:",e),e}}},Ut={getPets:async()=>{try{return(await Ze(je(ye,"pets"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting pets:",s),[]}},getPetsByOwner:async s=>{try{console.log("petService.getPetsByOwner called for ownerId:",s);const e=lt(je(ye,"pets"),He("ownerId","==",s)),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for owner:",i),i}catch(e){return console.error("Error getting pets by owner:",e),[]}},getPetsByShelter:async s=>{try{console.log("petService.getPetsByShelter called for shelterId:",s);const e=lt(je(ye,"pets"),He("shelterId","==",s)),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for shelter:",i),i}catch(e){return console.error("Error getting pets by shelter:",e),[]}},getPetById:async s=>{try{const e=at(ye,"pets",s),n=await Sc(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error getting pet:",e),null}},uploadPetImage:async(s,e)=>{try{console.log("Storage no disponible - usando imagen placeholder");const n={"image/jpeg":"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop","image/png":"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop","image/webp":"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop"};return n[s.type]||n["image/jpeg"]}catch(n){return console.error("Error with image placeholder:",n),"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop"}},createPet:async(s,e=null)=>{try{let n=s.img||"";if(e&&!s.img)try{console.log("Attempting to upload image to Firebase Storage...");const o=await Ut.uploadPetImage(e,"temp-"+Date.now());n=o,console.log("Image uploaded successfully:",o)}catch(o){console.error("Firebase Storage failed, using placeholder:",o),n="https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop",console.log("Using placeholder image:",n)}const i=await vr(je(ye,"pets"),{...s,img:n,createdAt:new Date().toISOString(),status:"available",adoptionRequests:0,ownerId:s.ownerId||"",ownerName:s.ownerName||"",shelterId:s.shelterId||null,shelterName:s.shelterName||null});return console.log("Pet created successfully with ID:",i.id),s.shelterId&&await hn.simulateShelterReview(s.shelterId),i.id}catch(n){throw console.error("Error creating pet:",n),n}},updatePet:async(s,e)=>{try{await Mn(at(ye,"pets",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating pet:",n),n}},updatePetStatus:async(s,e)=>{try{console.log("petService.updatePetStatus called for petId:",s,"status:",e),await Mn(at(ye,"pets",s),{status:e,updatedAt:new Date().toISOString()}),console.log("✅ Pet status updated successfully")}catch(n){throw console.error("Error updating pet status:",n),n}},deletePet:async s=>{try{console.log("petService.deletePet called for petId:",s);const e=await Sc(at(ye,"pets",s));if(!e.exists())throw new Error("Mascota no encontrada");const i=e.data().name;console.log("Deleting pet:",i),console.log("Deleting adoption requests for pet:",s);const o=lt(je(ye,"adoptionRequests"),He("petId","==",s)),d=(await Ze(o)).docs.map(G=>({id:G.id,...G.data()}));console.log(`Found ${d.length} adoption requests to delete`);const g=d.map(G=>(console.log("Deleting adoption request:",G.id),Ds(at(ye,"adoptionRequests",G.id))));g.length>0&&(await Promise.all(g),console.log("✅ Deleted all adoption requests")),console.log("Deleting notifications for pet:",s);const p=lt(je(ye,"notifications"),He("petId","==",s)),_=(await Ze(p)).docs.map(G=>({id:G.id,...G.data()}));console.log(`Found ${_.length} notifications to delete`);const T=_.map(G=>(console.log("Deleting notification:",G.id),Ds(at(ye,"notifications",G.id))));T.length>0&&(await Promise.all(T),console.log("✅ Deleted all notifications")),console.log("Updating conversations for pet:",s);const A=lt(je(ye,"conversations"),He("petId","==",s)),q=(await Ze(A)).docs.map(G=>({id:G.id,...G.data()}));console.log(`Found ${q.length} conversations to update`);const Q=q.map(G=>(console.log("Updating conversation:",G.id),vr(je(ye,"messages"),{conversationId:G.id,senderId:"system",message:`⚠️ ${i} ya no está disponible para adopción.`,timestamp:new Date().toISOString(),read:!1,isSystemMessage:!0})));Q.length>0&&(await Promise.all(Q),console.log("✅ Added system messages to conversations")),console.log("Deleting favorites for pet:",s);const k=lt(je(ye,"favorites"),He("petId","==",s)),ne=(await Ze(k)).docs.map(G=>({id:G.id,...G.data()}));console.log(`Found ${ne.length} favorites to delete`);const ae=ne.map(G=>(console.log("Deleting favorite:",G.id),Ds(at(ye,"favorites",G.id))));return ae.length>0&&(await Promise.all(ae),console.log("✅ Deleted all favorites")),console.log("Deleting pet document:",s),await Ds(at(ye,"pets",s)),console.log("✅ Pet deleted successfully"),{success:!0,deleted:{adoptionRequests:d.length,notifications:_.length,conversations:q.length,favorites:ne.length}}}catch(e){throw console.error("Error deleting pet:",e),e}}},wj={getCategories:async()=>{try{console.log("categoryService.getCategories called");const e=(await Ze(je(ye,"categories"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Categories loaded from Firestore:",e),e}catch(s){return console.error("Error getting categories:",s),[]}},createCategory:async s=>{try{return(await vr(je(ye,"categories"),{...s,createdAt:new Date().toISOString()})).id}catch(e){throw console.error("Error creating category:",e),e}},updateCategory:async(s,e)=>{try{await Mn(at(ye,"categories",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating category:",n),n}}},ds={getFavorites:async s=>{try{console.log("favoriteService.getFavorites called for userId:",s);const e=lt(je(ye,"favorites"),He("userId","==",s)),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Favorites loaded from Firestore:",i),i}catch(e){return console.error("Error getting favorites:",e),[]}},addFavorite:async(s,e)=>{try{console.log("favoriteService.addFavorite called for userId:",s,"petId:",e);const n=await vr(je(ye,"favorites"),{userId:s,petId:e,createdAt:new Date().toISOString()});return console.log("Favorite added with ID:",n.id),n.id}catch(n){throw console.error("Error adding favorite:",n),n}},removeFavorite:async(s,e)=>{try{console.log("favoriteService.removeFavorite called for userId:",s,"petId:",e);const n=lt(je(ye,"favorites"),He("userId","==",s),He("petId","==",e)),i=await Ze(n);if(i.empty)return console.log("No favorite found to remove"),!1;const o=i.docs.map(u=>Ds(u.ref));return await Promise.all(o),console.log("Favorite removed successfully"),!0}catch(n){throw console.error("Error removing favorite:",n),n}},isFavorite:async(s,e)=>{try{const n=lt(je(ye,"favorites"),He("userId","==",s),He("petId","==",e));return!(await Ze(n)).empty}catch(n){return console.error("Error checking favorite status:",n),!1}}},tn={createAdoptionRequest:async s=>{try{console.log("adoptionRequestService.createAdoptionRequest called:",s);const e=await vr(je(ye,"adoptionRequests"),{...s,status:"pending",createdAt:new Date().toISOString()});return console.log("Adoption request created with ID:",e.id),e.id}catch(e){throw console.error("Error creating adoption request:",e),e}},getAdoptionRequests:async s=>{try{console.log("adoptionRequestService.getAdoptionRequests called for userId:",s);const e=lt(je(ye,"adoptionRequests"),He("userId","==",s)),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests loaded from Firestore:",i),i}catch(e){return console.error("Error getting adoption requests:",e),[]}},getAdoptionRequestsForOwner:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestsForOwner called for ownerId:",s);const e=lt(je(ye,"adoptionRequests"),He("ownerId","==",s),ua("createdAt","desc")),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests for owner loaded from Firestore:",i),console.log("Number of requests found:",i.length),i}catch(e){return console.error("Error getting adoption requests for owner:",e),[]}},getAdoptionRequestById:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestById called for requestId:",s);const e=at(ye,"adoptionRequests",s),n=await Sc(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Adoption request loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting adoption request:",e),null}},updateAdoptionRequestStatus:async(s,e,n="")=>{try{console.log("adoptionRequestService.updateAdoptionRequestStatus called for requestId:",s,"status:",e);const i={status:e,updatedAt:new Date().toISOString()};n&&(i.ownerNotes=n),await Mn(at(ye,"adoptionRequests",s),i),console.log("Adoption request status updated successfully")}catch(i){throw console.error("Error updating adoption request status:",i),i}},approveAdoptionRequest:async(s,e="")=>{try{console.log("adoptionRequestService.approveAdoptionRequest called for requestId:",s);const n=await tn.getAdoptionRequestById(s);if(!n)throw new Error("Solicitud no encontrada");const i=n.petId;console.log("Approving request for petId:",i),await tn.updateAdoptionRequestStatus(s,"approved",e),console.log("✅ Request approved:",s);const o=lt(je(ye,"adoptionRequests"),He("petId","==",i),He("status","==","pending")),d=(await Ze(o)).docs.map(p=>({id:p.id,...p.data()}));console.log(`Found ${d.length} pending requests for the same pet`);const g=d.filter(p=>p.id!==s).map(p=>(console.log("Auto-rejecting request:",p.id),tn.updateAdoptionRequestStatus(p.id,"rejected","Esta solicitud fue rechazada automáticamente porque se aprobó otra solicitud para la misma mascota.")));return g.length>0&&(await Promise.all(g),console.log(`✅ Auto-rejected ${g.length} other requests`)),await Ut.updatePetStatus(i,"adopted"),console.log("✅ Pet status updated to adopted"),{approved:s,rejected:d.filter(p=>p.id!==s).map(p=>p.id)}}catch(n){throw console.error("Error approving adoption request:",n),n}},cleanOldRejectedRequests:async()=>{try{console.log("adoptionRequestService.cleanOldRejectedRequests called");const s=new Date;s.setDate(s.getDate()-30);const e=s.toISOString(),n=lt(je(ye,"adoptionRequests"),He("status","==","rejected"),He("updatedAt","<",e)),o=(await Ze(n)).docs.map(d=>({id:d.id,...d.data()}));console.log(`Found ${o.length} old rejected requests to clean`);const u=o.map(d=>(console.log("Deleting old rejected request:",d.id),Ds(at(ye,"adoptionRequests",d.id))));return u.length>0&&(await Promise.all(u),console.log(`✅ Cleaned ${u.length} old rejected requests`)),o.length}catch(s){throw console.error("Error cleaning old rejected requests:",s),s}},getPendingRequestsForPet:async s=>{try{console.log("adoptionRequestService.getPendingRequestsForPet called for petId:",s);const e=lt(je(ye,"adoptionRequests"),He("petId","==",s),He("status","==","pending"),ua("createdAt","desc")),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log(`Found ${i.length} pending requests for pet ${s}`),i}catch(e){return console.error("Error getting pending requests for pet:",e),[]}},rejectAdoptionRequest:async(s,e="")=>{try{await tn.updateAdoptionRequestStatus(s,"rejected",e)}catch(n){throw console.error("Error rejecting adoption request:",n),n}}},hn={getShelters:async()=>{try{console.log("shelterService.getShelters called");const e=(await Ze(je(ye,"shelters"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Shelters loaded from Firestore:",e),e}catch(s){return console.error("Error getting shelters:",s),[]}},getShelterById:async s=>{try{console.log("shelterService.getShelterById called for shelterId:",s);const e=at(ye,"shelters",s),n=await Sc(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Shelter loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting shelter:",e),null}},getSheltersByOwner:async s=>{try{console.log("shelterService.getSheltersByOwner called for ownerId:",s);const e=lt(je(ye,"shelters"),He("ownerId","==",s)),i=(await Ze(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Shelters for owner loaded from Firestore:",i),i}catch(e){return console.error("Error getting shelters by owner:",e),[]}},createShelter:async s=>{try{if(console.log("shelterService.createShelter called:",s),!s.ownerId)throw new Error("❌ Error: ownerId es requerido para crear un refugio");if(!s.name||s.name.length<3)throw new Error("❌ Error: Nombre del refugio debe tener al menos 3 caracteres");if(s.name&&s.name.length>100)throw new Error("❌ Error: Nombre del refugio no puede exceder 100 caracteres");const e=[/<script/i,/javascript:/i,/on\w+\s*=/i,/eval\(/i],n=JSON.stringify(s);for(const o of e)if(o.test(n))throw new Error("❌ Error: Datos contienen contenido sospechoso");const i=await vr(je(ye,"shelters"),{...s,createdAt:new Date().toISOString(),verified:!1,rating:0,petsCount:0,isPremium:!1,premiumExpiry:null,status:"pending"});return console.log("✅ Shelter created with ID:",i.id),i.id}catch(e){throw console.error("❌ Error creating shelter:",e),e}},updateShelter:async(s,e)=>{try{console.log("shelterService.updateShelter called for shelterId:",s,"updateData:",e),await Mn(at(ye,"shelters",s),{...e,updatedAt:new Date().toISOString()}),console.log("Shelter updated successfully")}catch(n){throw console.error("Error updating shelter:",n),n}},updateShelterStatus:async(s,e)=>{try{console.log("shelterService.updateShelterStatus called for shelterId:",s,"status:",e),await Mn(at(ye,"shelters",s),{status:e,updatedAt:new Date().toISOString()}),console.log("Shelter status updated successfully")}catch(n){throw console.error("Error updating shelter status:",n),n}},activatePremium:async(s,e=1)=>{try{console.log("shelterService.activatePremium called for shelterId:",s,"months:",e);const n=new Date;n.setMonth(n.getMonth()+e),await Mn(at(ye,"shelters",s),{isPremium:!0,premiumExpiry:n.toISOString(),updatedAt:new Date().toISOString()}),console.log("Premium subscription activated successfully")}catch(n){throw console.error("Error activating premium subscription:",n),n}},deactivatePremium:async s=>{try{console.log("shelterService.deactivatePremium called for shelterId:",s),await Mn(at(ye,"shelters",s),{isPremium:!1,premiumExpiry:null,updatedAt:new Date().toISOString()}),console.log("Premium subscription deactivated successfully")}catch(e){throw console.error("Error deactivating premium subscription:",e),e}},isPremiumActive:async s=>{try{const e=await hn.getShelterById(s);return!e||!e.isPremium?!1:e.premiumExpiry?new Date(e.premiumExpiry)>new Date:e.isPremium}catch(e){return console.error("Error checking premium status:",e),!1}},getPremiumShelters:async()=>{try{console.log("shelterService.getPremiumShelters called");const s=lt(je(ye,"shelters"),He("isPremium","==",!0)),n=(await Ze(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Premium shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting premium shelters:",s),[]}},getRegularShelters:async()=>{try{console.log("shelterService.getRegularShelters called");const s=lt(je(ye,"shelters"),He("isPremium","==",!1)),n=(await Ze(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Regular shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting regular shelters:",s),[]}},deleteShelter:async s=>{try{if(console.log("shelterService.deleteShelter called for shelterId:",s),!await hn.getShelterById(s))throw new Error("Refugio no encontrado");const n=lt(je(ye,"pets"),He("shelterId","==",s)),i=await Ze(n);console.log(`Found ${i.size} pets to delete for shelter`);const o=i.docs.map(u=>(console.log("Deleting pet:",u.id),Ds(u.ref)));return o.length>0&&(await Promise.all(o),console.log("✅ Deleted all shelter pets")),await Ds(at(ye,"shelters",s)),console.log("✅ Shelter deleted successfully"),{success:!0,deletedPets:i.size}}catch(e){throw console.error("Error deleting shelter:",e),e}},uploadShelterImage:async(s,e)=>{try{return console.log("Storage no disponible - usando imagen placeholder para refugio"),"https://images.unsplash.com/photo-1601758228041-f3b2795255f1?q=80&w=400&auto=format&fit=crop"}catch(n){return console.error("Error with shelter image placeholder:",n),"https://images.unsplash.com/photo-1601758228041-f3b2795255f1?q=80&w=400&auto=format&fit=crop"}},simulateShelterReview:async s=>{try{console.log("🔍 Simulando revisión del refugio:",s);const e=await hn.getShelterById(s);if(!e){console.log("❌ Refugio no encontrado para revisión");return}const n=Math.random()*3e3+2e3;await new Promise(d=>setTimeout(d,n));const i=Math.random()>.1,o=i?"active":"pending";await hn.updateShelterStatus(s,o);const u={userId:e.ownerId,type:"shelter_review",title:i?"✅ Refugio Aprobado":"⏳ Refugio en Revisión",message:i?`¡Felicidades! Tu refugio "${e.name}" ha sido aprobado y está activo.`:`Tu refugio "${e.name}" está siendo revisado. Te notificaremos cuando esté listo.`,shelterId:s,shelterName:e.name};await up.createNotification(u),console.log(`✅ Simulación de revisión completada: ${o}`)}catch(e){console.error("❌ Error en simulación de revisión:",e)}}},kn={createUserProfile:async(s,e)=>{try{await Sj(at(ye,"users",s),{...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()})}catch(n){throw console.error("Error creating user profile:",n),n}},getUserProfile:async s=>{try{console.log("getUserProfile called with userId:",s);const e=at(ye,"users",s);console.log("Document reference created:",e.path);const n=await Sc(e);if(console.log("Document snapshot:",n.exists()?"exists":"does not exist"),n.exists()){const i={id:n.id,...n.data()};return console.log("User profile data:",i),i}return console.log("No user profile found"),null}catch(e){return console.error("Error getting user profile:",e),null}},getAllUsers:async()=>{try{console.log("getAllUsers called");const e=(await Ze(je(ye,"users"))).docs.map(n=>({uid:n.id,...n.data()}));return console.log(`Found ${e.length} users`),e}catch(s){return console.error("Error getting all users:",s),[]}},updateUserProfile:async(s,e)=>{try{await Mn(at(ye,"users",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating user profile:",n),n}}},ib=I.createContext(),zt=()=>{const s=I.useContext(ib);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},xj=({children:s})=>{const[e,n]=I.useState(null),[i,o]=I.useState(!0);I.useEffect(()=>{console.log("AuthProvider: Setting up auth listener");const y=WN(rc,_=>{console.log("AuthProvider: Auth state changed:",_),n(_),o(!1)});return()=>{console.log("AuthProvider: Cleaning up auth listener"),y()}},[]);const p={user:e,loading:i,register:async(y,_,T)=>{try{const C=(await GN(rc,y,_)).user;return await KN(C,{displayName:T.name}),console.log("Creating user profile with data:",{name:T.name,email:C.email,phone:T.phone||"",address:T.address||"",isShelter:T.isShelter||!1,shelterInfo:T.shelterInfo||null}),await kn.createUserProfile(C.uid,{name:T.name,email:C.email,phone:T.phone||"",address:T.address||"",isShelter:T.isShelter||!1,shelterInfo:T.shelterInfo||null}),console.log("User profile created successfully"),C}catch(A){throw console.error("Error registering user:",A),A}},login:async(y,_)=>{try{return(await QN(rc,y,_)).user}catch(T){throw console.error("Error logging in:",T),T}},logout:async()=>{try{await ZN(rc)}catch(y){throw console.error("Error logging out:",y),y}}};return c.jsx(ib.Provider,{value:p,children:s})},Aj=({error:s,onClose:e,onRetry:n,autoClose:i=!0,duration:o=5e3})=>{const[u,d]=I.useState(!1),[g,p]=I.useState(!1);I.useEffect(()=>{if(s&&(d(!0),p(!1),i)){const Q=setTimeout(()=>{y()},o);return()=>clearTimeout(Q)}},[s,i,o]);const y=()=>{p(!0),setTimeout(()=>{d(!1),e?.()},300)},_=()=>{n?.(),y()};if(!u||!s)return null;const{title:T,message:A,action:C,type:q="error"}=s;return c.jsxs("div",{className:`error-notification ${g?"closing":""} ${q}`,children:[c.jsxs("div",{className:"error-notification-content",children:[c.jsxs("div",{className:"error-notification-icon",children:[q==="error"&&"⚠️",q==="warning"&&"⚠️",q==="success"&&"✅",q==="info"&&"ℹ️"]}),c.jsxs("div",{className:"error-notification-text",children:[c.jsx("h4",{className:"error-notification-title",children:T}),c.jsx("p",{className:"error-notification-message",children:A})]}),c.jsxs("div",{className:"error-notification-actions",children:[C==="Reintentar"&&n&&c.jsx("button",{className:"error-notification-retry-btn",onClick:_,children:"Reintentar"}),c.jsx("button",{className:"error-notification-close-btn",onClick:y,"aria-label":"Cerrar notificación",children:"✕"})]})]}),c.jsx("div",{className:"error-notification-progress",children:c.jsx("div",{className:"error-notification-progress-bar",style:{animationDuration:`${o}ms`,animationPlayState:i?"running":"paused"}})})]})},Nj=()=>{const[s,e]=I.useState("dark");return I.useEffect(()=>{const o=localStorage.getItem("theme")||"dark";e(o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o)},[]),{currentTheme:s,toggleTheme:()=>{const o=s==="dark"?"light":"dark";e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o)},setTheme:o=>{(o==="dark"||o==="light")&&(e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o))},isDark:s==="dark",isLight:s==="light"}};function Pe(){const s=Et(),e=Jn(),{logout:n}=zt(),i=()=>{s("/")},o=()=>{s("/profile")};return c.jsxs("nav",{className:"navbar",children:[c.jsx("div",{className:`nav-icon ${e.pathname==="/"?"active":""}`,title:"Inicio",onClick:i,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 3.172l8 7.2V20a1 1 0 01-1 1h-5v-6H10v6H5a1 1 0 01-1-1v-9.628l8-7.2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/upload"?"active":""}`,title:"Subir Mascota",onClick:()=>s("/upload"),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/profile"?"active":""}`,title:"Perfil",onClick:o,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]})}function Rj(){const{user:s}=zt(),e=Et(),n=Jn(),[i,o]=I.useState([]),[u,d]=I.useState({name:"",address:""}),[g,p]=I.useState(""),[y,_]=I.useState(!0),[T,A]=I.useState([]),[C,q]=I.useState(["all"]),[Q,k]=I.useState(!1),[B,ne]=I.useState([]),[ae,G]=I.useState([]),[F,V]=I.useState("user"),{currentTheme:R,toggleTheme:b}=Nj(),x=n.state?.category||"";I.useEffect(()=>{const L=ce=>{Q&&!ce.target.closest(".filter-dropdown")&&k(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[Q]);const j=async()=>{if(s?.uid)try{console.log("Loading favorites for user:",s.uid);const L=await ds.getFavorites(s.uid),ce=await Promise.all(L.map(async de=>{const pe=await Ut.getPetById(de.petId);return{...de,pet:pe}}));A(ce),console.log("Favorites loaded:",ce)}catch(L){console.error("Error loading favorites:",L)}},O=async()=>{try{console.log("Loading shelters...");const[L,ce]=await Promise.all([hn.getPremiumShelters(),hn.getRegularShelters()]),de=[...L,...ce];ne(de),console.log("Shelters loaded:",de)}catch(L){console.error("Error loading shelters:",L)}},z=async()=>{if(s?.uid)try{console.log("Loading user shelters...");const L=await hn.getSheltersByOwner(s.uid);if(G(L),L.length>0){const ce=L.some(de=>de.isPremium);V(ce?"premium":"shelter")}else V("user");console.log("User shelters loaded:",L),console.log("User type determined:",F)}catch(L){console.error("Error loading user shelters:",L)}};I.useEffect(()=>{(async()=>{if(console.log("Home useEffect - user:",s),console.log("Home useEffect - loading:",y),s)try{console.log("User UID:",s.uid),console.log("User displayName:",s.displayName),console.log("User email:",s.email),console.log("Loading profile for user:",s.uid);const ce=await kn.getUserProfile(s.uid);console.log("Profile loaded:",ce),ce?d({name:ce.name||"",address:ce.address||""}):(console.log("No profile found, using display name:",s.displayName),d({name:s.displayName||"",address:""})),await j(),await O(),await z();const de=await Ut.getPets();if(de.length===0){const pe=[{name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro",status:"available",ownerId:"admin",description:"Bobby es un perro muy cariñoso y juguetón. Le encanta jugar con niños y es muy obediente."},{name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato",status:"available",ownerId:"admin",description:"Luna es una gata muy independiente pero cariñosa. Es perfecta para una familia tranquila."}];for(const ct of pe)await Ut.createPet(ct);o(pe)}else o(de)}catch(ce){console.error("Error loading data:",ce)}finally{_(!1)}else try{const ce=await Ut.getPets();o(ce),await O()}catch(ce){console.error("Error loading pets:",ce),o([{id:1,name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro"},{id:2,name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato"}])}finally{_(!1)}})()},[s,y]);const D=I.useMemo(()=>{const L=g.trim().toLowerCase();let ce=i;return C.length===0||C.includes("all")?x&&(ce=i.filter(de=>de.type.toLowerCase()===x.toLowerCase())):ce=i.filter(de=>C.some(pe=>{switch(pe){case"favorites":return s?.uid?T.map(Ge=>Ge.petId).includes(de.id):!1;case"shelters":return de.shelterId&&de.shelterName;case"dogs":return de.type.toLowerCase()==="perro";case"cats":return de.type.toLowerCase()==="gato";case"others":return de.type.toLowerCase()!=="perro"&&de.type.toLowerCase()!=="gato";default:return!1}})),ce.filter(de=>!L||[de.name,de.breed,de.gender,de.age,de.location,de.shelterName].filter(Boolean).some(ct=>String(ct).toLowerCase().includes(L)))},[i,g,C,x,T,s]),qe=()=>{e("/categories")},ze=L=>{q(ce=>{if(L==="all")return["all"];if(ce.includes(L)){const de=ce.filter(pe=>pe!==L);return de.length===0?["all"]:de}else return[...ce.filter(pe=>pe!=="all"),L]})},ee=()=>C.includes("all")||C.length===0?"Todos los filtros":C.length===1?{favorites:"Favoritas",shelters:"Refugios",dogs:"Perros",cats:"Gatos",others:"Otros"}[C[0]]||"Filtros":`${C.length} filtros`,fe=L=>{e("/adopt",{state:{pet:L}})},X=()=>{e("/tracking")},_e=()=>{e("/shelters")},M=()=>{e("/users")},se=async(L,ce)=>{if(ce.stopPropagation(),!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{T.some(pe=>pe.petId===L.id)?(await ds.removeFavorite(s.uid,L.id),A(pe=>pe.filter(ct=>ct.petId!==L.id)),console.log("Pet removed from favorites")):(await ds.addFavorite(s.uid,L.id),A(pe=>[...pe,{petId:L.id,userId:s.uid,createdAt:new Date().toISOString()}]),console.log("Pet added to favorites"))}catch(de){console.error("Error updating favorites:",de),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},he=L=>T.some(ce=>ce.petId===L.id);return y?c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"18px"},children:"Cargando..."}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("div",{className:"header-top",children:[c.jsxs("div",{className:"greeting-section",children:[c.jsxs("h1",{className:"greeting-title",children:["Hola, ",u.name||"Amigo"," 👋"]}),c.jsx("p",{className:"greeting-subtitle",children:"Encuentra tu compañero perfecto"})]}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"conversations-button",onClick:()=>e("/conversations"),title:"Conversaciones",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})}),c.jsx("div",{className:"user-avatar",onClick:()=>e("/profile"),children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"A").charAt(0).toUpperCase()})})})]})]}),c.jsxs("div",{className:"search-container",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar mascotas...",value:g,onChange:L=>p(L.target.value),className:"search-input"}),c.jsx("button",{onClick:b,className:"theme-toggle-btn",title:R==="dark"?"Cambiar a modo claro":"Cambiar a modo oscuro",children:R==="dark"?c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5M17.6859 17.69L18.5 18.5M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsxs("button",{className:"quick-action-btn",onClick:X,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Seguimiento"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:M,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Usuarios"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:_e,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Refugios"})]})]})]}),c.jsxs("main",{className:"main-content",children:[c.jsx("div",{className:"filter-container",children:c.jsxs("div",{className:"filter-dropdown",children:[c.jsxs("button",{className:"filter-trigger",onClick:()=>k(!Q),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"})}),c.jsx("span",{className:"filter-label",children:ee()}),c.jsx("svg",{className:`filter-arrow ${Q?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),Q&&c.jsxs("div",{className:"filter-options",children:[c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("all"),onChange:()=>ze("all")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Todas las mascotas"]})]})}),s?.uid&&T.length>0&&c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("favorites"),onChange:()=>ze("favorites")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"Favoritas (",T.length,")"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("shelters"),onChange:()=>ze("shelters")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),"De refugios"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("dogs"),onChange:()=>ze("dogs")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M18.5 2h-13C4.67 2 4 2.67 4 3.5v17c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5zM12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 14H8v-1.5c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2V20z"})}),"Perros"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("cats"),onChange:()=>ze("cats")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Gatos"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("others"),onChange:()=>ze("others")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Otras mascotas"]})]})})]})]})}),c.jsx("div",{className:"section-header",children:c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:C.includes("all")||C.length===0?"Mascotas disponibles":C.length===1?C.includes("favorites")?"Tus favoritas":C.includes("shelters")?"Mascotas de refugios":C.includes("dogs")?"Perros disponibles":C.includes("cats")?"Gatos disponibles":C.includes("others")?"Otras mascotas":"Mascotas disponibles":"Mascotas filtradas"}),c.jsxs("span",{className:"pets-count",children:[D.length," mascotas"]})]})}),c.jsx("div",{className:`pets-grid ${F==="user"?"single-column":F==="shelter"?"two-columns":"premium-layout"}`,children:D.map((L,ce)=>c.jsxs("div",{className:`pet-card ${F==="premium"&&ce<2?"featured":""}`,onClick:()=>fe(L),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:L.img,alt:L.name,className:"pet-image"}),c.jsx("button",{className:`favorite-btn ${he(L)?"favorited":""}`,onClick:de=>se(L,de),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:L.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:L.name}),c.jsxs("p",{className:"pet-details",children:[L.breed," • ",L.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:L.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",L.location]})]}),L.ownerName&&c.jsxs("div",{className:"pet-owner",children:[c.jsx("span",{className:"owner-label",children:"Dueño:"}),c.jsx("span",{className:"owner-name",children:L.ownerName})]})]})]},ce))}),D.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No se encontraron mascotas"}),c.jsx("p",{children:"Intenta ajustar tu búsqueda o explorar todas las categorías"}),c.jsx("button",{className:"explore-btn",onClick:qe,children:"Explorar categorías"})]}),B.length>0&&c.jsxs("section",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:showOnlyShelters?"Refugios":"Refugios destacados"}),c.jsxs("span",{className:"pets-count",children:[B.length," refugios"]})]}),c.jsxs("div",{className:"shelters-controls",children:[c.jsxs("button",{className:`shelters-toggle ${showOnlyShelters?"active":""}`,onClick:()=>setShowOnlyShelters(!showOnlyShelters),children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),showOnlyShelters?"Ver mascotas":"Solo refugios"]}),c.jsx("button",{className:"view-all-shelters",onClick:()=>e("/shelters"),children:"Ver todos"})]})]}),c.jsx("div",{className:"shelters-grid",children:(showOnlyShelters?filteredShelters:B.slice(0,4)).map((L,ce)=>c.jsxs("div",{className:`shelter-card ${L.isPremium?"premium":""}`,onClick:()=>e("/shelters"),children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:L.image||"/default-shelter.jpg",alt:L.name,className:"shelter-image"}),L.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:L.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",L.location]}),c.jsx("p",{className:"shelter-description",children:L.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",L.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",L.petsCount||0," mascotas"]})]})]})]},L.id||ce))})]})]}),c.jsx(Pe,{})]})}function Cj(){const s=Et(),[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{g()},[]);const g=async()=>{try{console.log("Loading categories from Firebase..."),o(!0);const y=await wj.getCategories();y.length===0?(console.log("No categories found in Firebase, using default categories"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])):(console.log("Categories loaded from Firebase:",y),n(y)),d(null)}catch(y){console.error("Error loading categories:",y),d("Error al cargar las categorías"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])}finally{o(!1)}},p=y=>{s("/",{state:{category:y}})};return i?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando categorías..."})]})}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsxs("main",{children:[u&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:u}),c.jsx("button",{onClick:g,children:"Reintentar"})]}),c.jsx("div",{className:"category-cards",children:e.map((y,_)=>c.jsxs("div",{className:"category-card",style:{backgroundColor:y.bgColor,cursor:"pointer"},onClick:()=>p(y.type),children:[c.jsx("img",{src:y.image,alt:y.name}),c.jsx("div",{className:"category-name",children:y.name})]},y.id||_))})]}),c.jsx(Pe,{})]})}function Ij(){const{user:s}=zt(),e=Et(),[n,i]=I.useState(null),[o,u]=I.useState(""),[d,g]=I.useState(""),[p,y]=I.useState({name:"",location:"",breed:"",gender:"",age:"",type:"",description:"",size:"",vaccinated:!1,sterilized:!1,specialNeeds:"",shelterId:"",shelterName:""}),[_,T]=I.useState({name:"",address:""}),[A,C]=I.useState([]),[q,Q]=I.useState(!1),[k,B]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s)try{const x=await kn.getUserProfile(s.uid);x&&(T({name:x.name||"",address:x.address||""}),y(O=>({...O,location:x.address||""})));const j=await hn.getSheltersByOwner(s.uid);C(j)}catch(x){console.error("Error loading data:",x)}})()},[s]);const ne=b=>{const x=b.target.files[0];if(i(x),x){const j=new FileReader;j.onload=()=>u(j.result),j.readAsDataURL(x)}else u("")},ae=b=>{g(b),b&&/^https?:\/\//i.test(b)&&u(b)},G=(b,x)=>{y(j=>({...j,[b]:x}))},F=b=>{B(b),b||y(x=>({...x,shelterId:"",shelterName:""}))},V=b=>{const x=A.find(j=>j.id===b);y(j=>({...j,shelterId:b,shelterName:x?x.name:""}))},R=async()=>{if(!p.name.trim()){alert("El nombre de la mascota es obligatorio");return}if(!p.type){alert("Debes seleccionar el tipo de mascota");return}if(!p.location.trim()){alert("La ubicación es obligatoria");return}if(!n&&!d.trim()){alert("Debes subir una imagen o proporcionar un enlace");return}Q(!0);try{console.log("Starting pet creation process...");const b={...p,img:d.trim()||"",status:"available",ownerId:s.uid,ownerName:_.name||s.displayName||"Usuario"};k&&p.shelterId&&(b.shelterId=p.shelterId,b.shelterName=p.shelterName),console.log("Pet data prepared:",b),console.log("Selected file:",n?"Yes":"No"),console.log("Image URL:",d.trim()||"None");const x=await Ut.createPet(b,n);console.log("Pet created successfully with ID:",x),alert("Mascota subida correctamente"),e("/")}catch(b){console.error("Error saving pet:",b),alert("Error al subir la mascota: "+b.message)}finally{Q(!1)}};return c.jsxs("div",{className:"upload-container",children:[c.jsxs("div",{className:"upload-header",children:[c.jsxs("h1",{className:"upload-title",children:[c.jsx("span",{className:"upload-icon",children:"🐾"}),"Subir Mascota"]}),c.jsx("p",{className:"upload-subtitle",children:"Comparte los detalles de tu mascota para encontrarle un hogar"})]}),c.jsxs("div",{className:"upload-content",children:[c.jsxs("div",{className:"image-upload-section",children:[c.jsxs("div",{className:"image-upload-area",children:[c.jsx("input",{type:"file",id:"file-upload",accept:"image/*",onChange:ne,className:"file-input"}),c.jsx("label",{htmlFor:"file-upload",className:"image-upload-label",children:o?c.jsxs("div",{className:"image-preview",children:[c.jsx("img",{src:o,alt:"Preview"}),c.jsx("div",{className:"image-overlay",children:c.jsx("span",{className:"change-text",children:"Cambiar imagen"})})]}):c.jsxs("div",{className:"upload-placeholder",children:[c.jsx("div",{className:"upload-icon-large",children:c.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M4 5a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V7a2 2 0 00-2-2H4zm3 9l3-4 2 3 3-4 4 5H7z"})})}),c.jsx("p",{className:"upload-text",children:"Toca para subir una foto"}),c.jsx("p",{className:"upload-hint",children:"JPG, PNG o GIF"})]})})]}),c.jsxs("div",{className:"url-input-section",children:[c.jsxs("div",{className:"input-with-icon",children:[c.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24zm2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.42l-.47.48a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24z"})}),c.jsx("input",{type:"url",placeholder:"O pega un enlace de imagen",value:d,onChange:b=>ae(b.target.value),className:"url-input"})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsx("button",{type:"button",onClick:()=>g("https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐕 Perro"}),c.jsx("button",{type:"button",onClick:()=>g("https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐱 Gato"}),c.jsx("button",{type:"button",onClick:()=>g("https://images.unsplash.com/photo-1583337130417-3346a1be7dee?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐰 Conejo"})]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Nombre *"}),c.jsx("input",{type:"text",value:p.name,onChange:b=>G("name",b.target.value),placeholder:"Nombre de la mascota",className:"field-input",required:!0})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tipo *"}),c.jsxs("select",{value:p.type,onChange:b=>G("type",b.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona tipo"}),c.jsx("option",{value:"Perro",children:"🐕 Perro"}),c.jsx("option",{value:"Gato",children:"🐱 Gato"}),c.jsx("option",{value:"Conejo",children:"🐰 Conejo"}),c.jsx("option",{value:"Erizo",children:"🦔 Erizo"}),c.jsx("option",{value:"Hamster",children:"🐹 Hamster"}),c.jsx("option",{value:"Loro",children:"🦜 Loro"}),c.jsx("option",{value:"Otro",children:"🐾 Otro"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Ubicación *"}),c.jsx("input",{type:"text",value:p.location,onChange:b=>G("location",b.target.value),placeholder:"Ciudad, Estado",className:"field-input",required:!0})]}),A.length>0&&c.jsxs("div",{className:"form-field full-width",children:[c.jsx("div",{className:"shelter-toggle",children:c.jsxs("label",{className:"toggle-label",children:[c.jsx("input",{type:"checkbox",checked:k,onChange:b=>F(b.target.checked),className:"toggle-checkbox"}),c.jsx("span",{className:"toggle-text",children:"🏠 Esta mascota pertenece a uno de mis refugios"})]})}),k&&c.jsxs("div",{className:"shelter-select",children:[c.jsx("label",{className:"field-label",children:"Seleccionar Refugio *"}),c.jsxs("select",{value:p.shelterId,onChange:b=>V(b.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona un refugio"}),A.map(b=>c.jsxs("option",{value:b.id,children:[b.name," - ",b.location]},b.id))]}),p.shelterName&&c.jsxs("p",{className:"shelter-info",children:["✅ Mascota será asociada a: ",c.jsx("strong",{children:p.shelterName})]})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Raza"}),c.jsx("input",{type:"text",value:p.breed,onChange:b=>G("breed",b.target.value),placeholder:"Raza o mezcla",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Género"}),c.jsxs("select",{value:p.gender,onChange:b=>G("gender",b.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Macho",children:"♂️ Macho"}),c.jsx("option",{value:"Hembra",children:"♀️ Hembra"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Edad"}),c.jsx("input",{type:"text",value:p.age,onChange:b=>G("age",b.target.value),placeholder:"Ej: 2 años",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tamaño"}),c.jsxs("select",{value:p.size,onChange:b=>G("size",b.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Pequeño",children:"S Pequeño"}),c.jsx("option",{value:"Mediano",children:"M Mediano"}),c.jsx("option",{value:"Grande",children:"L Grande"})]})]})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Descripción"}),c.jsx("textarea",{value:p.description,onChange:b=>G("description",b.target.value),placeholder:"Cuéntanos sobre su personalidad y comportamiento...",className:"field-textarea",rows:"3"})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Necesidades especiales"}),c.jsx("textarea",{value:p.specialNeeds,onChange:b=>G("specialNeeds",b.target.value),placeholder:"Medicamentos, cuidados especiales, etc.",className:"field-textarea",rows:"2"})]}),c.jsxs("div",{className:"checkbox-section",children:[c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:p.vaccinated,onChange:b=>G("vaccinated",b.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está vacunado"})]}),c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:p.sterilized,onChange:b=>G("sterilized",b.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está esterilizado"})]})]}),c.jsx("button",{className:"submit-button",onClick:R,disabled:q,children:q?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"loading-spinner"}),"Guardando..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"💾"}),"Guardar mascota"]})})]})]}),c.jsx(Pe,{})]})}function jj(){const s=Et(),{user:e,logout:n}=zt(),[i,o]=I.useState("my-pets"),[u,d]=I.useState({name:"",address:"",phone:"",email:""}),[g,p]=I.useState([]),[y,_]=I.useState([]),[T,A]=I.useState([]),[C,q]=I.useState(!0),[Q,k]=I.useState(!1),[B,ne]=I.useState(null),[ae,G]=I.useState({name:"",address:"",phone:"",email:""}),[F,V]=I.useState({name:"",breed:"",age:"",gender:"",location:"",description:""});I.useEffect(()=>{e?R():q(!1)},[e]);const R=async()=>{try{console.log("Profile: Starting to load user data for user:",e.uid),q(!0),console.log("Profile: Loading user profile...");const X=await kn.getUserProfile(e.uid);if(X)console.log("Profile: User profile found:",X),d(X),G(X);else{console.log("Profile: No user profile found, using basic profile");const he={name:e.displayName||"Usuario",address:"",phone:"",email:e.email||""};d(he),G(he)}console.log("Profile: Loading pets for owner:",e.uid);const _e=await Ut.getPetsByOwner(e.uid);console.log("Profile: Pets data received:",_e),p(_e),console.log("Profile: Loading favorites...");const M=await ds.getFavorites(e.uid);console.log("Profile: Favorites data received:",M),_(M),console.log("Profile: Loading shelters...");const se=await hn.getSheltersByOwner(e.uid);console.log("Profile: Shelters data received:",se),A(se)}catch(X){console.error("Profile: Error loading user data:",X)}finally{q(!1)}},b=(X,_e)=>{G(M=>({...M,[X]:_e}))},x=async()=>{try{await kn.updateUserProfile(e.uid,ae),d(ae),k(!1),alert("Perfil actualizado correctamente")}catch(X){console.error("Error updating profile:",X),alert("Error al actualizar el perfil")}},j=()=>{G(u),k(!1)},O=X=>{X.ownerId===e.uid?(ne(X),V({name:X.name||"",breed:X.breed||"",age:X.age||"",gender:X.gender||"",location:X.location||"",description:X.description||""})):s("/adopt",{state:{pet:X}})},z=async(X,_e)=>{if(_e.stopPropagation(),!!e?.uid)try{y.some(se=>se.petId===X.id)?(await ds.removeFavorite(e.uid,X.id),_(se=>se.filter(he=>he.petId!==X.id))):(await ds.addFavorite(e.uid,X.id),_(se=>[...se,{petId:X.id,userId:e.uid,createdAt:new Date().toISOString()}]))}catch(M){console.error("Error updating favorites:",M)}},D=async()=>{try{await n(),s("/login")}catch(X){console.error("Error logging out:",X),alert("Error al cerrar sesión")}},qe=(X,_e)=>{V(M=>({...M,[X]:_e}))},ze=async()=>{if(B)try{await Ut.updatePet(B.id,F),alert("Mascota actualizada correctamente"),ne(null),await R()}catch(X){console.error("Error updating pet:",X),alert("Error al actualizar la mascota")}},ee=()=>{ne(null),V({name:"",breed:"",age:"",gender:"",location:"",description:""})},fe=async()=>{if(!B)return;const X=`¿Estás seguro de que quieres eliminar a ${B.name}?

Esto también eliminará:
• Todas las solicitudes de adopción
• Todas las notificaciones relacionadas
• Mensajes en chats (se notificará a los usuarios)
• Favoritos de otros usuarios

Esta acción no se puede deshacer.`;if(window.confirm(X))try{const _e=await Ut.deletePet(B.id);let M=`✅ ${B.name} eliminado correctamente`;_e.deleted&&(M+=`

Eliminado:
`,_e.deleted.adoptionRequests>0&&(M+=`• ${_e.deleted.adoptionRequests} solicitudes de adopción
`),_e.deleted.notifications>0&&(M+=`• ${_e.deleted.notifications} notificaciones
`),_e.deleted.conversations>0&&(M+=`• Mensajes en ${_e.deleted.conversations} conversaciones
`),_e.deleted.favorites>0&&(M+=`• ${_e.deleted.favorites} favoritos
`)),alert(M),ne(null),await R()}catch(_e){console.error("Error deleting pet:",_e),alert("Error al eliminar la mascota: "+_e.message)}};return C?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando perfil..."})]}),c.jsx(Pe,{})]}):e?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"profile-header",children:[c.jsxs("div",{className:"profile-info",children:[c.jsx("div",{className:"profile-avatar",children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"U").charAt(0).toUpperCase()})})}),c.jsxs("div",{className:"profile-details",children:[c.jsx("h2",{className:"profile-name",children:u.name||"Usuario"}),c.jsx("p",{className:"profile-email",children:u.email||e.email})]})]}),c.jsx("button",{className:"settings-button",onClick:()=>k(!Q),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})})})]}),c.jsxs("main",{className:"profile-main",children:[c.jsxs("div",{className:"profile-tabs",children:[c.jsx("button",{className:`tab-button ${i==="my-pets"?"active":""}`,onClick:()=>o("my-pets"),children:"Tus mascotas"}),c.jsx("button",{className:`tab-button ${i==="favorites"?"active":""}`,onClick:()=>o("favorites"),children:"Favoritas"}),c.jsx("button",{className:`tab-button ${i==="shelters"?"active":""}`,onClick:()=>o("shelters"),children:"Mis Refugios"})]}),c.jsxs("div",{className:"tab-content",children:[i==="my-pets"&&c.jsxs("div",{className:"pets-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Mascotas (",g.length,")"]}),c.jsx("div",{className:"section-actions",children:c.jsxs("button",{className:"refresh-button",onClick:R,disabled:C,children:[C?"🔄":"↻"," Recargar"]})})]}),g.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:g.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>O(X),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.img,alt:X.name,className:"pet-image"}),c.jsx("div",{className:"pet-type-badge",children:X.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.name}),c.jsxs("p",{className:"pet-details",children:[X.breed," • ",X.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.location]})]})]})]},X.id))})]}),i==="favorites"&&c.jsx("div",{className:"favorites-section",children:y.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"❤️"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Las mascotas que marques como favoritas aparecerán aquí"})]}):c.jsx("div",{className:"pets-grid",children:y.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>O(X.pet),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.pet?.img,alt:X.pet?.name,className:"pet-image"}),c.jsx("button",{className:"favorite-btn favorited",onClick:_e=>z(X.pet,_e),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:X.pet?.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.pet?.name}),c.jsxs("p",{className:"pet-details",children:[X.pet?.breed," • ",X.pet?.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.pet?.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.pet?.location]})]})]})]},X.id))})}),i==="shelters"&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Refugios (",T.length,")"]}),c.jsxs("div",{className:"section-actions",children:[c.jsx("button",{className:"refresh-button",onClick:R,disabled:C,children:"🔄 Actualizar"}),c.jsx("button",{className:"add-button",onClick:()=>s("/shelter-register"),children:"➕ Registrar Refugio"})]})]}),T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu refugio para comenzar a gestionar mascotas"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):c.jsx("div",{className:"shelters-grid",children:T.map(X=>c.jsxs("div",{className:"shelter-card",children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:X.image||"/default-shelter.jpg",alt:X.name,className:"shelter-image"}),X.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"}),c.jsx("div",{className:"status-badge status-{shelter.status}",children:X.status==="active"?"Activo":X.status==="pending"?"Pendiente":"Inactivo"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:X.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",X.location]}),c.jsx("p",{className:"shelter-description",children:X.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",X.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",X.petsCount||0," mascotas"]})]}),c.jsxs("div",{className:"shelter-actions",children:[c.jsx("button",{className:"manage-button",onClick:()=>s("/shelter-admin"),children:"Gestionar"}),!X.isPremium&&c.jsx("button",{className:"upgrade-button",onClick:()=>s("/shelters"),children:"Actualizar a Premium"})]})]})]},X.id))})]})]}),Q&&c.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:c.jsxs("div",{className:"settings-modal",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"settings-header",children:[c.jsxs("div",{className:"settings-title",children:[c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})}),c.jsx("h3",{children:"Configuración"})]}),c.jsx("button",{className:"close-btn",onClick:()=>k(!1),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"settings-content",children:[c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Información Personal"}),c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Nombre completo"]}),c.jsx("input",{type:"text",value:ae.name,onChange:X=>b("name",X.target.value),placeholder:"Tu nombre completo",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Dirección"]}),c.jsx("input",{type:"text",value:ae.address,onChange:X=>b("address",X.target.value),placeholder:"Tu dirección",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),"Teléfono"]}),c.jsx("input",{type:"tel",value:ae.phone,onChange:X=>b("phone",X.target.value),placeholder:"Tu número de teléfono",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Email"]}),c.jsx("input",{type:"email",value:ae.email,onChange:X=>b("email",X.target.value),placeholder:"Tu email",className:"form-input"})]})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Preferencias de Visualización"}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Mostrar mascotas"]}),c.jsxs("div",{className:"select-wrapper",children:[c.jsxs("select",{value:i,onChange:X=>o(X.target.value),className:"form-select",children:[c.jsx("option",{value:"my-pets",children:"Mis mascotas"}),c.jsx("option",{value:"favorites",children:"Favoritas"}),c.jsx("option",{value:"shelters",children:"Mis refugios"})]}),c.jsx("svg",{className:"select-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]})]})]})]}),c.jsxs("div",{className:"settings-footer",children:[c.jsxs("button",{className:"logout-btn",onClick:D,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Cerrar Sesión"]}),c.jsxs("div",{className:"settings-actions",children:[c.jsx("button",{className:"cancel-btn",onClick:j,children:"Cancelar"}),c.jsxs("button",{className:"save-btn",onClick:x,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Guardar"]})]})]})]})}),B&&c.jsx("div",{className:"modal-overlay",onClick:ee,children:c.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Editar Mascota"}),c.jsx("button",{className:"close-btn",onClick:ee,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre"}),c.jsx("input",{type:"text",value:F.name,onChange:X=>qe("name",X.target.value),placeholder:"Nombre de la mascota"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Raza"}),c.jsx("input",{type:"text",value:F.breed,onChange:X=>qe("breed",X.target.value),placeholder:"Raza de la mascota"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Edad"}),c.jsx("input",{type:"text",value:F.age,onChange:X=>qe("age",X.target.value),placeholder:"Edad"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Género"}),c.jsxs("select",{value:F.gender,onChange:X=>qe("gender",X.target.value),children:[c.jsx("option",{value:"",children:"Seleccionar"}),c.jsx("option",{value:"Macho",children:"Macho"}),c.jsx("option",{value:"Hembra",children:"Hembra"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación"}),c.jsx("input",{type:"text",value:F.location,onChange:X=>qe("location",X.target.value),placeholder:"Ubicación"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción"}),c.jsx("textarea",{value:F.description,onChange:X=>qe("description",X.target.value),placeholder:"Descripción de la mascota",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"delete-button",onClick:fe,children:"Eliminar Mascota"}),c.jsxs("div",{className:"modal-actions-right",children:[c.jsx("button",{className:"cancel-button",onClick:ee,children:"Cancelar"}),c.jsx("button",{className:"save-button",onClick:ze,children:"Guardar"})]})]})]})})]}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu perfil"}),c.jsx("p",{children:"Necesitas iniciar sesión para acceder a tu perfil"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/login"),children:"Iniciar sesión"})]}),c.jsx(Pe,{})]})}function Dj(){const s=Et(),{login:e}=zt(),[n,i]=I.useState(""),[o,u]=I.useState(""),[d,g]=I.useState(""),[p,y]=I.useState(!1),_=async T=>{T.preventDefault(),y(!0),g("");try{await e(n,o),s("/")}catch(A){g("Error al iniciar sesión. Verifica tus credenciales."),console.error("Login error:",A)}finally{y(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Bienvenido de vuelta!"}),c.jsx("p",{className:"auth-subtitle",children:"Inicia sesión para continuar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:_,className:"auth-form",children:[d&&c.jsx("div",{className:"error-message",children:d}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n,onChange:T=>i(T.target.value),placeholder:"tu@correo.com",required:!0,disabled:p})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:o,onChange:T=>u(T.target.value),placeholder:"••••••••",required:!0,disabled:p})]}),c.jsx("button",{className:`auth-button ${p?"loading":""}`,type:"submit",disabled:p,children:p?"Iniciando sesión...":"Iniciar sesión"}),c.jsxs("div",{className:"auth-link",children:["¿No tienes cuenta? ",c.jsx(Fh,{to:"/register",children:"Crear cuenta"})]})]})}),c.jsx(Pe,{})]})}function Pj(){const s=Et(),{register:e}=zt(),[n,i]=I.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",isShelter:!1}),[o,u]=I.useState(""),[d,g]=I.useState(!1),p=(_,T)=>i(A=>({...A,[_]:T})),y=async _=>{if(_.preventDefault(),g(!0),u(""),n.password!==n.confirmPassword){u("Las contraseñas no coinciden"),g(!1);return}if(n.password.length<6){u("La contraseña debe tener al menos 6 caracteres"),g(!1);return}try{await e(n.email,n.password,{name:n.name,phone:n.phone,address:n.address,isShelter:n.isShelter}),s("/")}catch(T){u("Error al crear la cuenta. Intenta de nuevo."),console.error("Register error:",T)}finally{g(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Únete a nosotros!"}),c.jsx("p",{className:"auth-subtitle",children:"Crea tu cuenta para comenzar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:y,className:"auth-form",children:[o&&c.jsx("div",{className:"error-message",children:o}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nombre completo"}),c.jsx("input",{type:"text",className:"form-input",value:n.name,onChange:_=>p("name",_.target.value),placeholder:"Tu nombre completo",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n.email,onChange:_=>p("email",_.target.value),placeholder:"tu@correo.com",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.password,onChange:_=>p("password",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Confirmar contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.confirmPassword,onChange:_=>p("confirmPassword",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Teléfono (opcional)"}),c.jsx("input",{type:"tel",className:"form-input",value:n.phone,onChange:_=>p("phone",_.target.value),placeholder:"+506 0000-0000",disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Dirección (opcional)"}),c.jsx("input",{type:"text",className:"form-input",value:n.address,onChange:_=>p("address",_.target.value),placeholder:"Tu dirección",disabled:d})]}),c.jsxs("div",{className:"checkbox-group",children:[c.jsx("input",{type:"checkbox",className:"checkbox-input",id:"isShelter",checked:n.isShelter,onChange:_=>p("isShelter",_.target.checked),disabled:d}),c.jsx("label",{className:"checkbox-label",htmlFor:"isShelter",children:"¿Eres un refugio de animales?"})]}),c.jsx("button",{className:`auth-button ${d?"loading":""}`,type:"submit",disabled:d,children:d?"Creando cuenta...":"Crear cuenta"}),c.jsxs("div",{className:"auth-link",children:["¿Ya tienes cuenta? ",c.jsx(Fh,{to:"/login",children:"Iniciar sesión"})]})]})}),c.jsx(Pe,{})]})}function Oj(){const{user:s}=zt(),e=Jn(),n=Et(),{petId:i}=pp(),o=e.state?.pet,[u,d]=I.useState(o),[g,p]=I.useState(!o),[y,_]=I.useState({name:s?.displayName||"",email:s?.email||"",message:""}),[T,A]=I.useState(!1),[C,q]=I.useState(!1),[Q,k]=I.useState(!1),[B,ne]=I.useState(!1);I.useEffect(()=>{if(o){if(d(o),p(!1),G(o.id),F(o.id),s?.uid&&o.ownerId===s.uid){n("/profile");return}}else if(i)ae(i);else{n("/");return}},[o,i,n,s]);const ae=async x=>{try{console.log("Loading pet from Firebase with ID:",x),p(!0);const j=await Ut.getPetById(x);if(j){if(console.log("Pet loaded from Firebase:",j),s?.uid&&j.ownerId===s.uid){n("/profile");return}d(j),G(j.id),F(j.id)}else console.log("Pet not found in Firebase"),n("/")}catch(j){console.error("Error loading pet from Firebase:",j),n("/")}finally{p(!1)}},G=async x=>{if(s?.uid)try{const j=await ds.isFavorite(s.uid,x);q(j)}catch(j){console.error("Error checking favorite status:",j)}},F=async x=>{if(s?.uid)try{const O=(await tn.getAdoptionRequests(s.uid)).find(z=>z.petId===x&&(z.status==="pending"||z.status==="approved"));ne(!!O)}catch(j){console.error("Error checking existing request:",j)}},V=x=>{_(j=>({...j,[x.target.name]:x.target.value}))},R=async()=>{if(!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{C?(await ds.removeFavorite(s.uid,u.id),q(!1),console.log("Pet removed from favorites")):(await ds.addFavorite(s.uid,u.id),q(!0),console.log("Pet added to favorites"))}catch(x){console.error("Error updating favorites:",x),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},b=async x=>{if(x.preventDefault(),!s?.uid){alert("Debes iniciar sesión para solicitar adopción");return}try{k(!0),console.log("=== STARTING ADOPTION REQUEST ==="),console.log("Pet data:",u),console.log("Form data:",y),console.log("User data:",s),console.log("Pet ownerId:",u.ownerId);const j={userId:s.uid,petId:u.id,ownerId:u.ownerId,pet:u,adopterName:y.name,adopterEmail:y.email,message:y.message||""};console.log("Creating adoption request with data:",j);const O=await tn.createAdoptionRequest(j);if(console.log("✅ Adoption request created with ID:",O),await up.createNotification({userId:s.uid,type:"adoption",title:"Solicitud de adopción enviada",message:`Tu solicitud para adoptar a ${u.name} ha sido enviada y está siendo revisada.`,adoptionRequestId:O}),u.ownerId){console.log("=== CREATING NOTIFICATION FOR OWNER ==="),console.log("Pet owner ID:",u.ownerId),console.log("Adopter ID:",s.uid),console.log("Pet name:",u.name),console.log("Adopter name:",y.name);try{const z=await up.createNotification({userId:u.ownerId,type:"adoption_request",title:"Nueva solicitud de adopción",message:`${y.name} quiere adoptar a ${u.name}. Revisa la solicitud en tu perfil.`,adoptionRequestId:O,petId:u.id,adopterId:s.uid});console.log("✅ Notification created successfully for pet owner:",u.ownerId),console.log("Notification ID:",z)}catch(z){console.error("❌ Error creating notification for owner:",z)}}else console.log("❌ No ownerId found for pet:",u);console.log("Notifications created successfully"),A(!0)}catch(j){console.error("Error creating adoption request:",j),alert("Error al procesar la solicitud. Inténtalo de nuevo.")}finally{k(!1)}};return g?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascota..."})]})}),c.jsx(Pe,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"adopt-container",children:[c.jsxs("div",{className:"pet-header",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:u.img,alt:u.name,className:"pet-img"}),c.jsx("button",{className:`favorite-button ${C?"active":""}`,onClick:R,title:C?"Quitar de favoritos":"Agregar a favoritos",disabled:!s?.uid,children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.name}),c.jsxs("p",{className:"pet-details",children:[u.breed," • ",u.gender," • ",u.age," • ",u.location]})]})]}),T?c.jsxs("div",{className:"adoption-completed",children:[c.jsx("div",{className:"success-icon",children:"✅"}),c.jsx("h2",{children:"¡Solicitud enviada!"}),c.jsx("p",{children:"Tu solicitud de adopción ha sido enviada y está siendo revisada."}),c.jsxs("div",{className:"completion-actions",children:[c.jsx("button",{className:"tracking-button",onClick:()=>n("/tracking"),children:"Ver seguimiento"}),c.jsx("button",{className:"home-button",onClick:()=>n("/"),children:"Volver al inicio"})]})]}):c.jsxs(c.Fragment,{children:[B&&c.jsxs("div",{className:"existing-request-warning",children:[c.jsxs("p",{children:["⚠️ Ya tienes una solicitud pendiente para adoptar a ",u.name]}),c.jsx("p",{children:"Puedes revisar el estado de tu solicitud en tu perfil."})]}),c.jsxs("form",{className:"adopt-form",onSubmit:b,children:[!s?.uid&&c.jsxs("div",{className:"login-required",children:[c.jsx("p",{children:"Debes iniciar sesión para solicitar adopción"}),c.jsx("button",{type:"button",onClick:()=>n("/login"),children:"Iniciar sesión"})]}),c.jsx("label",{children:"Nombre"}),c.jsx("input",{name:"name",value:y.name,onChange:V,placeholder:"Tu nombre",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",name:"email",value:y.email,onChange:V,placeholder:"Tu email",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Mensaje (opcional)"}),c.jsx("textarea",{name:"message",value:y.message,onChange:V,placeholder:"Cuéntanos por qué quieres adoptar esta mascota...",rows:"3",disabled:!s?.uid}),c.jsx("button",{type:"submit",disabled:!s?.uid||Q||B,children:Q?"Enviando...":B?"Solicitud ya enviada":"Adoptar"})]})]})]})}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la mascota."}),c.jsx("button",{onClick:()=>n("/"),children:"Volver al inicio"})]})}),c.jsx(Pe,{})]})}function Mj(){const{user:s}=zt(),e=Et(),[n,i]=I.useState("sent"),[o,u]=I.useState([]),[d,g]=I.useState([]),[p,y]=I.useState(!0),[_,T]=I.useState(null),[A,C]=I.useState(!1);I.useEffect(()=>{s?.uid?(q(),B()):y(!1)},[s]);const q=async()=>{try{y(!0),T(null);const V=await tn.getAdoptionRequests(s.uid);console.log("Sent requests loaded:",V);const R=await tn.getAdoptionRequestsForOwner(s.uid);console.log("Received requests loaded:",R);const b=await Promise.all(V.map(async j=>{const O=await Ut.getPetById(j.petId),z=await kn.getUserProfile(j.ownerId);return{...j,pet:O,owner:z}})),x=await Promise.all(R.map(async j=>{const O=await Ut.getPetById(j.petId),z=await kn.getUserProfile(j.userId);return{...j,pet:O,requester:z}}));u(b),g(x)}catch(V){console.error("Error loading requests:",V),T("Error al cargar solicitudes de adopción")}finally{y(!1)}},Q=async V=>{try{C(!0),await tn.approveAdoptionRequest(V),await q(),alert("Solicitud aprobada exitosamente")}catch(R){console.error("Error approving request:",R),alert("Error al aprobar la solicitud")}finally{C(!1)}},k=async V=>{try{C(!0),await tn.rejectAdoptionRequest(V),await q(),alert("Solicitud rechazada")}catch(R){console.error("Error rejecting request:",R),alert("Error al rechazar la solicitud")}finally{C(!1)}},B=async()=>{try{console.log("Cleaning old rejected requests...");const V=await tn.cleanOldRejectedRequests();V>0&&(console.log(`✅ Cleaned ${V} old rejected requests`),await q())}catch(V){console.error("Error cleaning old rejected requests:",V)}},ne=V=>{switch(V){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},ae=V=>{switch(V){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}},G=V=>{e("/adoption-details",{state:{adoption:V}})};if(p)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]})}),c.jsx(Pe,{})]});if(!s?.uid)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu seguimiento"}),c.jsx("p",{children:"Necesitas iniciar sesión para gestionar tus solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(Pe,{})]});const F=n==="sent"?o:d;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsxs("main",{className:"main-content",children:[_&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:_}),c.jsx("button",{onClick:q,children:"Reintentar"})]}),c.jsxs("div",{className:"tracking-tabs",children:[c.jsxs("button",{className:`tracking-tab ${n==="sent"?"active":""}`,onClick:()=>i("sent"),children:["Mis solicitudes (",o.length,")"]}),c.jsxs("button",{className:`tracking-tab ${n==="received"?"active":""}`,onClick:()=>i("received"),children:["Solicitudes recibidas (",d.length,")"]})]}),c.jsx("div",{className:"tracking-content",children:F.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:n==="sent"?"📤":"📥"}),c.jsx("h3",{children:n==="sent"?"No has enviado solicitudes":"No tienes solicitudes recibidas"}),c.jsx("p",{children:n==="sent"?"Cuando envíes solicitudes de adopción, aparecerán aquí":"Las solicitudes para tus mascotas aparecerán aquí"}),n==="sent"&&c.jsx("button",{className:"browse-button",onClick:()=>e("/"),children:"Ver mascotas disponibles"})]}):c.jsx("div",{className:"requests-list",children:F.map(V=>c.jsxs("div",{className:"request-card",children:[c.jsx("div",{className:"request-image",children:c.jsx("img",{src:V.pet?.img||"/placeholder-pet.jpg",alt:V.pet?.name})}),c.jsxs("div",{className:"request-info",children:[c.jsx("h3",{children:V.pet?.name}),c.jsxs("p",{className:"pet-details",children:[V.pet?.breed," • ",V.pet?.age," • ",V.pet?.location]}),n==="sent"?c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Dueño:"})," ",V.owner?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",V.owner?.email||"No disponible"]})]}):c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",V.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",V.requester?.email||"No disponible"]}),V.message&&c.jsxs("p",{children:[c.jsx("strong",{children:"Mensaje:"}),' "',V.message,'"']})]}),c.jsxs("div",{className:"request-status",children:[c.jsx("span",{className:"status-badge",style:{backgroundColor:ne(V.status)},children:ae(V.status)}),c.jsx("span",{className:"date",children:new Date(V.createdAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"request-actions",children:[n==="received"&&V.status==="pending"&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"approve-btn",onClick:R=>{R.stopPropagation(),Q(V.id)},disabled:A,children:"Aprobar"}),c.jsx("button",{className:"reject-btn",onClick:R=>{R.stopPropagation(),k(V.id)},disabled:A,children:"Rechazar"})]}),c.jsx("button",{className:"view-btn",onClick:()=>G(V),children:"Ver detalles"})]})]},V.id))})})]}),c.jsx(Pe,{})]})}function kj(){const{user:s}=zt(),e=Jn(),n=Et(),{requestId:i}=pp(),o=e.state?.adoption,[u,d]=I.useState(o),[g,p]=I.useState(!o),[y,_]=I.useState([]),[T,A]=I.useState(""),[C,q]=I.useState(null);I.useEffect(()=>{if(o)d(o),p(!1),k(o.id);else if(i)Q(i);else{n("/tracking");return}},[o,i,n,s]);const Q=async V=>{try{console.log("Loading adoption request from Firebase with ID:",V),p(!0);const R=await tn.getAdoptionRequestById(V);R?(console.log("Adoption request loaded from Firebase:",R),d(R),k(R.id)):(console.log("Adoption request not found in Firebase"),n("/tracking"))}catch(R){console.error("Error loading adoption request from Firebase:",R),n("/tracking")}finally{p(!1)}},k=async V=>{try{const b=(await Tn.getConversations(s?.uid)).find(x=>x.petId===u.petId||x.adoptionRequestId===V);if(b){q(b.id);const x=await Tn.getMessages(b.id);_(x)}else{const x=await Tn.createConversation([s.uid,u.pet.ownerId||"admin"],u.petId,V);q(x),_([])}}catch(R){console.error("Error loading messages:",R);try{const b=JSON.parse(localStorage.getItem(`messages_${V}`)||"[]");_(b)}catch(b){console.error("Error loading messages from localStorage:",b)}}},B=V=>{switch(V){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},ne=V=>{switch(V){case"pending":return"Pendiente de revisión";case"approved":return"Aprobada - Contacta al dueño";case"rejected":return"Rechazada";case"completed":return"Adopción completada";default:return"Desconocido"}},ae=async()=>{try{if(!u||!s?.uid)return;const V=u.userId===s.uid?u.pet.ownerId:u.userId;if(!V){alert("No se pudo identificar al otro usuario");return}const R=await Tn.getOrCreateConversation(s.uid,V,u.pet.id);n(`/chat/${R}`)}catch(V){console.error("Error starting chat:",V),alert("Error al iniciar el chat")}},G=async V=>{if(V.preventDefault(),!(!T.trim()||!C))try{const R={content:T,senderId:s.uid,senderName:s.displayName||"Usuario",type:"text"};await Tn.sendMessage(C,R),A("");const b=await Tn.getMessages(C);_(b)}catch(R){console.error("Error sending message:",R);const b={id:Date.now(),content:T,sender:"user",timestamp:new Date().toISOString()},x=[...y,b];_(x),A("");try{localStorage.setItem(`messages_${u.id}`,JSON.stringify(x))}catch(j){console.error("Error saving message to localStorage",j)}}},F=async V=>{if(u.pet.ownerId!==s?.uid){alert("Solo el dueño de la mascota puede aprobar o rechazar solicitudes de adopción");return}if(window.confirm(`¿Cambiar estado a ${V}?`))try{await tn.updateAdoptionRequestStatus(u.id,V),d(R=>({...R,status:V})),alert("Estado actualizado correctamente")}catch(R){console.error("Error updating status:",R),alert("Error al actualizar el estado")}};return g?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando detalles de adopción..."})]})}),c.jsx(Pe,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsxs("main",{className:"adoption-details-main",children:[c.jsxs("div",{className:"pet-section",children:[c.jsx("div",{className:"pet-image-container",children:c.jsx("img",{src:u.pet.img,alt:u.pet.name,className:"pet-detail-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.pet.name}),c.jsx("p",{className:"pet-breed",children:u.pet.breed}),c.jsxs("div",{className:"pet-details",children:[c.jsxs("span",{children:["🐾 ",u.pet.age]}),c.jsxs("span",{children:["⚥ ",u.pet.gender]}),c.jsxs("span",{children:["📍 ",u.pet.location]})]})]})]}),c.jsxs("div",{className:"status-section",children:[c.jsxs("div",{className:"status-header",children:[c.jsx("h3",{children:"Estado de la Adopción"}),c.jsx("span",{className:"status-badge",style:{backgroundColor:B(u.status)},children:ne(u.status)})]}),u.status==="pending"&&u.pet.ownerId===s?.uid&&c.jsxs("div",{className:"status-actions",children:[c.jsx("button",{className:"action-button approve",onClick:()=>F("approved"),children:"Aprobar Adopción"}),c.jsx("button",{className:"action-button reject",onClick:()=>F("rejected"),children:"Rechazar"})]}),u&&s?.uid&&c.jsx("div",{className:"chat-actions",children:c.jsx("button",{className:"action-button chat",onClick:ae,children:"💬 Iniciar Chat"})}),u.status==="approved"&&u.pet.ownerId===s?.uid&&c.jsx("div",{className:"status-actions",children:c.jsx("button",{className:"action-button complete",onClick:()=>F("completed"),children:"Marcar como Completada"})}),u.pet.ownerId!==s?.uid&&c.jsx("div",{className:"status-info",children:c.jsx("p",{children:"Esta solicitud está siendo revisada por el dueño de la mascota."})})]}),c.jsxs("div",{className:"adopter-section",children:[c.jsx("h3",{children:"Información del Adoptante"}),c.jsxs("div",{className:"adopter-info",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Nombre:"}),c.jsx("span",{children:u.adopterName})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Email:"}),c.jsx("span",{children:u.adopterEmail})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Teléfono:"}),c.jsx("span",{children:u.adopterPhone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Fecha de solicitud:"}),c.jsx("span",{children:new Date(u.createdAt).toLocaleDateString()})]})]})]}),c.jsxs("div",{className:"messages-section",children:[c.jsx("h3",{children:"Conversación"}),c.jsx("div",{className:"messages-container",children:y.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):y.map(V=>c.jsxs("div",{className:`message ${V.sender==="user"?"user-message":"other-message"}`,children:[c.jsx("div",{className:"message-content",children:V.content}),c.jsx("div",{className:"message-time",children:new Date(V.timestamp).toLocaleTimeString()})]},V.id))}),c.jsxs("form",{onSubmit:G,className:"message-form",children:[c.jsx("input",{type:"text",value:T,onChange:V=>A(V.target.value),placeholder:"Escribe un mensaje...",className:"message-input"}),c.jsx("button",{type:"submit",className:"send-button",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})]}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la solicitud de adopción."}),c.jsx("button",{onClick:()=>n("/tracking"),children:"Volver al seguimiento"})]})}),c.jsx(Pe,{})]})}function Vj(){const{user:s}=zt(),{conversationId:e}=pp(),n=Et(),[i,o]=I.useState([]),[u,d]=I.useState(""),[g,p]=I.useState(!0),[y,_]=I.useState(!1),[T,A]=I.useState(null),C=I.useRef(null),q=I.useRef(null);I.useEffect(()=>{if(!s?.uid){n("/login");return}return e&&(Q(),k()),()=>{q.current&&q.current()}},[e,s]);const Q=async()=>{try{p(!0),console.log("Chat: Loading messages for conversation:",e),q.current=Tn.subscribeToMessages(e,F=>{console.log("Chat: Received messages:",F),o(F),ne(),Tn.markMessagesAsRead(e,s.uid)})}catch(F){console.error("Error loading messages:",F)}finally{p(!1)}},k=async()=>{try{const V=(await Tn.getConversations(s.uid)).find(R=>R.id===e);if(V){const R=V.participants.find(b=>b!==s.uid);if(R){const b=await kn.getUserProfile(R);A(b||{uid:R,name:"Usuario"})}}}catch(F){console.error("Error loading other user:",F)}},B=async F=>{if(F.preventDefault(),!(!u.trim()||y))try{_(!0),console.log("Chat: Sending message:",{conversationId:e,message:u.trim()}),await Tn.sendMessage(e,s.uid,u.trim()),console.log("Chat: Message sent successfully"),d("")}catch(V){console.error("Error sending message:",V),alert("Error al enviar el mensaje")}finally{_(!1)}},ne=()=>{C.current?.scrollIntoView({behavior:"smooth"})},ae=F=>new Date(F).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),G=F=>{const V=new Date(F),R=new Date,b=new Date(R);return b.setDate(b.getDate()-1),V.toDateString()===R.toDateString()?"Hoy":V.toDateString()===b.toDateString()?"Ayer":V.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})};return g?c.jsxs("div",{className:"chat-container",children:[c.jsx(Pe,{}),c.jsxs("div",{className:"chat-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversación..."})]})]}):c.jsxs("div",{className:"chat-container",children:[c.jsx(Pe,{}),c.jsxs("div",{className:"chat-header",children:[c.jsx("button",{className:"back-button",onClick:()=>n("/conversations"),children:"← Volver"}),c.jsxs("div",{className:"chat-user-info",children:[c.jsx("div",{className:"user-avatar",children:T?.name?T.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:T?.name||"Usuario"}),c.jsx("p",{children:"En línea"})]})]})]}),c.jsxs("div",{className:"chat-messages",children:[i.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Envía el primero!"})}):i.map((F,V)=>{const R=F.senderId===s.uid,b=F.senderId==="system"||F.isSystemMessage,x=V===0||G(F.timestamp)!==G(i[V-1].timestamp);return b?c.jsxs("div",{children:[x&&c.jsx("div",{className:"message-date",children:G(F.timestamp)}),c.jsx("div",{className:"message system",children:c.jsxs("div",{className:"message-content",children:[c.jsx("p",{children:F.message}),c.jsx("span",{className:"message-time",children:ae(F.timestamp)})]})})]},F.id):c.jsxs("div",{children:[x&&c.jsx("div",{className:"message-date",children:G(F.timestamp)}),c.jsxs("div",{className:`message-bubble ${R?"own":"other"}`,children:[!R&&c.jsx("div",{className:"message-sender",children:F.senderName||"Usuario"}),c.jsxs("div",{className:"bubble-content",children:[c.jsx("p",{children:F.message}),c.jsx("span",{className:"bubble-time",children:ae(F.timestamp)})]})]})]},F.id)}),c.jsx("div",{ref:C})]}),c.jsxs("form",{className:"chat-input",onSubmit:B,children:[c.jsx("input",{type:"text",value:u,onChange:F=>d(F.target.value),placeholder:"Escribe un mensaje...",disabled:y,maxLength:500}),c.jsx("button",{type:"submit",disabled:!u.trim()||y,className:"send-button",children:y?"⏳":"📤"})]})]})}function Lj(){const{user:s}=zt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState(!0),[d,g]=I.useState(null),[p,y]=I.useState(!1),[_,T]=I.useState(null),A=I.useRef(0),C=I.useRef(0),q=I.useRef(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}Q()},[s]);const Q=async()=>{try{u(!0);const b=await Tn.getConversations(s.uid),x=await Promise.all(b.map(async j=>{const O=j.participants.find(qe=>qe!==s.uid),z=O?await kn.getUserProfile(O):null,D=j.petId?await Ut.getPetById(j.petId):null;return{...j,otherUser:z||{uid:O,name:"Usuario"},pet:D}}));i(x)}catch(b){console.error("Error loading conversations:",b)}finally{u(!1)}},k=b=>{const x=new Date(b),O=(new Date-x)/(1e3*60*60);return O<24?x.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):O<168?x.toLocaleDateString("es-ES",{weekday:"short"}):x.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})},B=b=>{e(`/chat/${b}`)},ne=(b,x)=>{d&&d!==x&&g(null),A.current=b.touches[0].clientX,C.current=b.touches[0].clientX,q.current=!1},ae=(b,x)=>{if(!A.current)return;C.current=b.touches[0].clientX;const j=A.current-C.current;Math.abs(j)>10&&(q.current=!0,b.preventDefault())},G=(b,x)=>{if(!q.current)return;A.current-C.current>80?g(x):g(null),A.current=0,C.current=0,q.current=!1},F=(b,x)=>{b.stopPropagation(),T(x),y(!0)},V=async()=>{if(_)try{const b=await Tn.deleteConversation(_);i(x=>x.filter(j=>j.id!==_)),y(!1),T(null),g(null),console.log("Conversación eliminada:",_,"Mensajes eliminados:",b.deletedMessages)}catch(b){console.error("Error al eliminar conversación:",b),i(x=>x.filter(j=>j.id!==_)),y(!1),T(null),g(null)}},R=()=>{y(!1),T(null),g(null)};return o?c.jsxs("div",{className:"conversations-container",children:[c.jsx(Pe,{}),c.jsxs("div",{className:"conversations-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversaciones..."})]})]}):c.jsxs("div",{className:"conversations-container",children:[c.jsx(Pe,{}),c.jsxs("div",{className:"conversations-header",children:[c.jsx("h1",{children:"Conversaciones"}),c.jsx("p",{children:"Gestiona tus mensajes con otros usuarios"})]}),c.jsx("div",{className:"conversations-list",children:n.length===0?c.jsxs("div",{className:"no-conversations",children:[c.jsx("div",{className:"no-conversations-icon",children:"💬"}),c.jsx("h3",{children:"No tienes conversaciones"}),c.jsx("p",{children:"Las conversaciones aparecerán aquí cuando alguien te envíe un mensaje"})]}):n.map(b=>c.jsxs("div",{className:`conversation-item ${d===b.id?"swiped":""}`,onClick:()=>!q.current&&B(b.id),onTouchStart:x=>ne(x,b.id),onTouchMove:x=>ae(x,b.id),onTouchEnd:x=>G(x,b.id),children:[c.jsx("div",{className:"conversation-avatar",children:b.otherUser.name.charAt(0).toUpperCase()}),c.jsxs("div",{className:"conversation-content",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsx("h3",{children:b.otherUser.name}),c.jsx("span",{className:"conversation-time",children:k(b.lastMessageTime)})]}),b.pet&&c.jsxs("div",{className:"conversation-pet",children:[c.jsx("span",{className:"pet-label",children:"Sobre:"}),c.jsx("span",{className:"pet-name",children:b.pet.name})]}),c.jsx("p",{className:"conversation-preview",children:b.lastMessage||"Sin mensajes"})]}),d===b.id&&c.jsx("div",{className:"conversation-actions",children:c.jsx("button",{className:"delete-button",onClick:x=>F(x,b.id),children:"🗑️"})})]},b.id))}),p&&c.jsx("div",{className:"delete-modal-overlay",children:c.jsxs("div",{className:"delete-modal",children:[c.jsx("div",{className:"delete-modal-header",children:c.jsx("h3",{children:"¿Eliminar conversación?"})}),c.jsx("div",{className:"delete-modal-content",children:c.jsx("p",{children:"Esta acción no se puede deshacer. Se eliminarán todos los mensajes de esta conversación."})}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"cancel-button",onClick:R,children:"Cancelar"}),c.jsx("button",{className:"confirm-delete-button",onClick:V,children:"Eliminar"})]})]})})]})}function Uj(){const{user:s}=zt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState(""),[p,y]=I.useState(!0),[_,T]=I.useState(null),[A,C]=I.useState([]),[q,Q]=I.useState(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}k()},[s]),I.useEffect(()=>{if(d.trim()==="")u(n);else{const G=n.filter(F=>F.name?.toLowerCase().includes(d.toLowerCase())||F.email?.toLowerCase().includes(d.toLowerCase()));u(G)}},[d,n]);const k=async()=>{try{y(!0);const F=(await kn.getAllUsers()).filter(V=>V.uid!==s.uid);i(F),u(F)}catch(G){console.error("Error loading users:",G)}finally{y(!1)}},B=async G=>{try{T(G),Q(!0);const F=await Ut.getPetsByOwner(G.uid);C(F)}catch(F){console.error("Error loading user pets:",F)}finally{Q(!1)}},ne=async G=>{try{const F=await Tn.getOrCreateConversation(s.uid,G.uid);e(`/chat/${F}`)}catch(F){console.error("Error creating conversation:",F),alert("Error al iniciar conversación")}},ae=()=>{T(null),C([])};return p?c.jsxs("div",{className:"users-container",children:[c.jsx(Pe,{}),c.jsxs("div",{className:"users-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando usuarios..."})]})]}):c.jsxs("div",{className:"users-container",children:[c.jsx(Pe,{}),c.jsxs("div",{className:"users-header",children:[c.jsx("h1",{children:"Usuarios"}),c.jsx("p",{children:"Conecta con otros amantes de las mascotas"})]}),c.jsx("div",{className:"search-container",children:c.jsxs("div",{className:"search-input-wrapper",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:d,onChange:G=>g(G.target.value),className:"search-input"})]})}),c.jsx("div",{className:"users-list",children:o.length===0?c.jsxs("div",{className:"no-users",children:[c.jsx("div",{className:"no-users-icon",children:"👥"}),c.jsx("h3",{children:"No se encontraron usuarios"}),c.jsx("p",{children:"Intenta con un término de búsqueda diferente"})]}):o.map(G=>c.jsxs("div",{className:"user-item",onClick:()=>B(G),children:[c.jsx("div",{className:"user-avatar",children:G.name?G.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-content",children:[c.jsx("h3",{children:G.name||"Usuario"}),c.jsx("p",{children:G.email})]}),c.jsx("div",{className:"user-actions",children:c.jsx("button",{className:"message-button",onClick:F=>{F.stopPropagation(),ne(G)},children:"💬"})})]},G.uid))}),_&&c.jsx("div",{className:"user-profile-modal-overlay",children:c.jsxs("div",{className:"user-profile-modal",children:[c.jsxs("div",{className:"user-profile-header",children:[c.jsx("button",{className:"close-button",onClick:ae,children:"✕"}),c.jsxs("div",{className:"user-profile-info",children:[c.jsx("div",{className:"user-profile-avatar",children:_.name?_.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-profile-details",children:[c.jsx("h2",{children:_.name||"Usuario"}),c.jsx("p",{children:_.email})]})]}),c.jsx("button",{className:"send-message-button",onClick:()=>ne(_),children:"💬 Enviar Mensaje"})]}),c.jsxs("div",{className:"user-profile-content",children:[c.jsxs("h3",{children:["Mascotas de ",_.name]}),q?c.jsxs("div",{className:"pets-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascotas..."})]}):A.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("div",{className:"no-pets-icon",children:"🐾"}),c.jsx("p",{children:"Este usuario no tiene mascotas publicadas"})]}):c.jsx("div",{className:"user-pets-grid",children:A.map(G=>c.jsxs("div",{className:"user-pet-card",children:[c.jsx("div",{className:"pet-image-wrapper",children:c.jsx("img",{src:G.img||"/placeholder-pet.jpg",alt:G.name,className:"pet-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h4",{children:G.name}),c.jsxs("p",{children:[G.breed," • ",G.age," años"]}),c.jsxs("p",{className:"pet-location",children:["📍 ",G.location]})]})]},G.id))})]})]})})]})}function qj(){const{user:s}=zt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState("all"),[p,y]=I.useState(!0),[_,T]=I.useState(null);I.useEffect(()=>{s?.uid?A():y(!1)},[s]);const A=async()=>{try{console.log("Loading favorites from Firebase for user:",s.uid),y(!0),T(null);const B=await ds.getFavorites(s.uid);i(B);const ne=B.map(F=>Ut.getPetById(F.petId)),G=(await Promise.all(ne)).filter(F=>F!==null);console.log("Favorite pets loaded:",G),u(G)}catch(B){console.error("Error loading favorites:",B),T("Error al cargar favoritos");try{const ne=JSON.parse(localStorage.getItem("favorites")||"[]");i(ne),u(ne)}catch(ne){console.error("Error loading favorites from localStorage",ne)}}finally{y(!1)}},C=async B=>{if(!s?.uid){alert("Debes iniciar sesión para gestionar favoritos");return}try{console.log("Removing favorite for petId:",B),await ds.removeFavorite(s.uid,B);const ne=n.filter(G=>G.petId!==B);i(ne);const ae=o.filter(G=>G.id!==B);u(ae),console.log("Favorite removed successfully")}catch(ne){console.error("Error removing favorite:",ne),alert("Error al quitar de favoritos. Inténtalo de nuevo.")}},q=B=>{e("/adopt",{state:{pet:B}})},Q=o.filter(B=>d==="all"?!0:d==="dogs"?B.type==="Perro":d==="cats"?B.type==="Gato":d==="others"?!["Perro","Gato"].includes(B.type):!0),k=B=>{switch(B){case"Perro":return"🐕";case"Gato":return"🐱";case"Conejo":return"🐰";case"Erizo":return"🦔";case"Hamster":return"🐹";case"Loro":return"🦜";default:return"🐾"}};return p?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Favoritos"}),c.jsx("p",{className:"page-subtitle",children:"Tus mascotas favoritas"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando favoritos..."})]})}),c.jsx(Pe,{})]}):s?.uid?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Favoritos"}),c.jsx("p",{className:"page-subtitle",children:"Tus mascotas favoritas"})]}),c.jsxs("main",{className:"main-content",children:[_&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:_}),c.jsx("button",{onClick:A,children:"Reintentar"})]}),c.jsxs("div",{className:"filter-tabs",children:[c.jsxs("button",{className:`filter-tab ${d==="all"?"active":""}`,onClick:()=>g("all"),children:["Todas (",o.length,")"]}),c.jsxs("button",{className:`filter-tab ${d==="dogs"?"active":""}`,onClick:()=>g("dogs"),children:["Perros (",o.filter(B=>B.type==="Perro").length,")"]}),c.jsxs("button",{className:`filter-tab ${d==="cats"?"active":""}`,onClick:()=>g("cats"),children:["Gatos (",o.filter(B=>B.type==="Gato").length,")"]}),c.jsxs("button",{className:`filter-tab ${d==="others"?"active":""}`,onClick:()=>g("others"),children:["Otros (",o.filter(B=>!["Perro","Gato"].includes(B.type)).length,")"]})]}),c.jsx("div",{className:"favorites-list",children:Q.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"💖"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Las mascotas que marques como favoritas aparecerán aquí"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/"),children:"Explorar mascotas"})]}):Q.map(B=>c.jsxs("div",{className:"favorite-card",children:[c.jsxs("div",{className:"pet-image",onClick:()=>q(B),children:[c.jsx("img",{src:B.img,alt:B.name}),c.jsxs("div",{className:"pet-type-badge",children:[c.jsx("span",{children:k(B.type)}),c.jsx("span",{children:B.type})]})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>q(B),children:B.name}),c.jsxs("p",{className:"pet-details",children:[B.breed," • ",B.gender," • ",B.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",B.location]}),c.jsxs("div",{className:"pet-actions",children:[c.jsx("button",{className:"adopt-button",onClick:()=>q(B),children:"Adoptar"}),c.jsx("button",{className:"remove-button",onClick:()=>C(B.id),children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]})]},B.id))})]}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Favoritos"}),c.jsx("p",{className:"page-subtitle",children:"Tus mascotas favoritas"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tus favoritos"}),c.jsx("p",{children:"Necesitas iniciar sesión para gestionar tus mascotas favoritas"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(Pe,{})]})}function zj(){const{user:s}=zt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState(!0),[p,y]=I.useState(null);I.useEffect(()=>{s?.uid?(_(),T()):g(!1)},[s]);const _=async()=>{try{console.log("Loading pets for owner:",s.uid),g(!0),y(null);const B=(await Ut.getPets()).filter(ne=>ne.ownerId===s.uid);console.log("My pets loaded:",B),i(B)}catch(k){console.error("Error loading my pets:",k),y("Error al cargar tus mascotas")}finally{g(!1)}},T=async()=>{try{const k=await tn.getAdoptionRequests(s.uid),B=n.map(ae=>ae.id),ne=k.filter(ae=>B.includes(ae.petId));console.log("Adoption requests for my pets:",ne),u(ne)}catch(k){console.error("Error loading adoption requests:",k)}},A=k=>{e("/adopt",{state:{pet:k}})},C=k=>{e("/adoption-details",{state:{adoption:k}})},q=k=>{switch(k){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},Q=k=>{switch(k){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}};return d?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando tus mascotas..."})]})}),c.jsx(Pe,{})]}):s?.uid?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsxs("main",{className:"main-content",children:[p&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:p}),c.jsx("button",{onClick:_,children:"Reintentar"})]}),c.jsxs("div",{className:"action-buttons-section",children:[c.jsxs("button",{className:"add-pet-button",onClick:()=>e("/upload"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 5v14m-7-7h14"})}),"Agregar Nueva Mascota"]}),c.jsxs("button",{className:"requests-button",onClick:()=>e("/adoption-requests"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Gestionar Solicitudes"]})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h3",{children:["Mis Mascotas (",n.length,")"]}),n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar a recibir solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:n.map(k=>c.jsxs("div",{className:"pet-card",children:[c.jsxs("div",{className:"pet-image",onClick:()=>A(k),children:[c.jsx("img",{src:k.img,alt:k.name}),c.jsx("div",{className:"pet-status",children:c.jsx("span",{className:`status-badge ${k.status}`,children:k.status==="available"?"Disponible":"Adoptado"})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>A(k),children:k.name}),c.jsxs("p",{className:"pet-details",children:[k.breed," • ",k.gender," • ",k.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",k.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-button",onClick:()=>A(k),children:"Ver Detalles"})})]})]},k.id))})]}),c.jsxs("div",{className:"requests-section",children:[c.jsxs("h3",{children:["Solicitudes de Adopción (",o.length,")"]}),o.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes de adopción"}),c.jsx("p",{children:"Las solicitudes de adopción para tus mascotas aparecerán aquí"})]}):c.jsx("div",{className:"requests-list",children:o.map(k=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsx("h4",{children:k.pet.name}),c.jsx("span",{className:"status-badge",style:{backgroundColor:q(k.status)},children:Q(k.status)})]}),c.jsxs("div",{className:"request-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",k.adopterName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.adopterEmail]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",k.adopterPhone]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(k.createdAt).toLocaleDateString()]})]}),c.jsx("div",{className:"request-actions",children:c.jsx("button",{className:"view-button",onClick:()=>C(k),children:"Ver Detalles"})})]},k.id))})]})]}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para gestionar tus mascotas"}),c.jsx("p",{children:"Necesitas iniciar sesión para ver y gestionar tus mascotas"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(Pe,{})]})}function pg({isOpen:s,onClose:e,shelterId:n,shelterName:i,onSuccess:o}){const[u,d]=I.useState(!1),g={name:"Premium",price:"$9.99",duration:"mensual",features:["Mascotas en dos columnas","Mascotas destacadas al inicio","Badge premium visible","Mayor visibilidad en búsquedas"]},p=async()=>{d(!0);try{await new Promise(y=>setTimeout(y,2e3)),await hn.activatePremium(n,1),alert(`¡Felicidades! ${i} ahora tiene suscripción premium.`),o(),e()}catch(y){console.error("Error activating premium:",y),alert("Error al procesar el pago. Inténtalo de nuevo.")}finally{d(!1)}};return s?c.jsx("div",{className:"premium-modal-overlay",children:c.jsxs("div",{className:"premium-modal",children:[c.jsxs("div",{className:"premium-modal-header",children:[c.jsx("h2",{children:"⭐ Actualizar a Premium"}),c.jsx("button",{className:"close-button",onClick:e,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"premium-modal-content",children:[c.jsxs("div",{className:"shelter-info",children:[c.jsx("h3",{children:i}),c.jsx("p",{children:"Mejora la visibilidad de tus mascotas"})]}),c.jsxs("div",{className:"plan-card selected",children:[c.jsx("div",{className:"plan-header",children:c.jsx("h4",{children:g.name})}),c.jsxs("div",{className:"plan-price",children:[c.jsx("span",{className:"price",children:g.price}),c.jsxs("span",{className:"duration",children:["/",g.duration]})]}),c.jsx("ul",{className:"plan-features",children:g.features.map((y,_)=>c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:"✓"}),y]},_))})]}),c.jsx("div",{className:"payment-info",children:c.jsx("p",{className:"payment-note",children:"💳 Simulación de pago - Sin cargo real"})})]}),c.jsxs("div",{className:"premium-modal-footer",children:[c.jsx("button",{className:"cancel-button",onClick:e,disabled:u,children:"Cancelar"}),c.jsx("button",{className:"purchase-button",onClick:p,disabled:u,children:u?"Procesando...":"Activar Premium"})]})]})}):null}function Bj(){const s=Et(),{user:e}=zt(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,g]=I.useState([]),[p,y]=I.useState(""),[_,T]=I.useState(null),[A,C]=I.useState(!1),[q,Q]=I.useState(null),[k,B]=I.useState(!0),[ne,ae]=I.useState(!1),[G,F]=I.useState(!1),[V,R]=I.useState(!1);I.useEffect(()=>{b()},[]);const b=async()=>{try{B(!0),console.log("Loading shelters from Firebase...");const L=new Promise((ct,Ge)=>setTimeout(()=>Ge(new Error("Timeout loading shelters")),1e4)),ce=Promise.all([hn.getPremiumShelters(),hn.getRegularShelters()]),[de,pe]=await Promise.race([ce,L]);console.log("Premium shelters:",de),console.log("Regular shelters:",pe),u(de),g(pe),i([...de,...pe]),console.log("No se crean refugios de ejemplo automáticamente")}catch(L){console.error("Error loading shelters:",L),x()}finally{B(!1)}},x=()=>{try{const L=JSON.parse(localStorage.getItem("shelters")||"[]");i(L),u(L.filter(ce=>ce.isPremium)),g(L.filter(ce=>!ce.isPremium))}catch(L){console.error("Error loading from localStorage",L)}},j=n.filter(L=>L.name.toLowerCase().includes(p.toLowerCase())||L.location.toLowerCase().includes(p.toLowerCase())||L.description.toLowerCase().includes(p.toLowerCase())),O=o.filter(L=>L.name.toLowerCase().includes(p.toLowerCase())||L.location.toLowerCase().includes(p.toLowerCase())||L.description.toLowerCase().includes(p.toLowerCase())),z=d.filter(L=>L.name.toLowerCase().includes(p.toLowerCase())||L.location.toLowerCase().includes(p.toLowerCase())||L.description.toLowerCase().includes(p.toLowerCase())),D=L=>{T(L)},qe=L=>{alert(`Contactando con ${L.name}...
Teléfono: ${L.phone}
Email: ${L.email}`)},ze=()=>{T(null)},ee=()=>{s("/shelter-register")},fe=L=>{Q(L),C(!0)},X=async()=>{if(confirm("¿Estás seguro de que quieres eliminar TODOS los refugios de la base de datos? Esta acción no se puede deshacer."))try{ae(!0),console.log("Iniciando limpieza...");const L=new Promise((de,pe)=>setTimeout(()=>pe(new Error("Timeout: La limpieza tardó demasiado")),3e4)),ce=0;console.log(`Limpieza completada: ${ce} refugios eliminados`),alert(`✅ Se eliminaron ${ce} refugios de la base de datos.`),window.location.reload()}catch(L){console.error("Error cleaning shelters:",L),L.message.includes("Timeout")?alert("⏰ La limpieza tardó demasiado. Intenta de nuevo o revisa la consola."):alert("❌ Error al limpiar los refugios. Revisa la consola para más detalles.")}finally{ae(!1)}},_e=async()=>{try{F(!0),console.log("Iniciando debug...");const L={message:"Debug removido"};console.log("Debug completado:",L),alert(`🔍 Debug completado. Revisa la consola para ver los detalles.

Total: ${L.total} refugios
Status: ${Object.keys(L.statusCounts).join(", ")}`)}catch(L){console.error("Error debugging shelters:",L),alert("❌ Error al hacer debug. Revisa la consola para más detalles.")}finally{F(!1)}},M=async()=>{if(confirm("🚨 EMERGENCIA: Esto eliminará TODOS los datos de la base de datos (refugios, mascotas, etc.). ¿Estás seguro?"))try{R(!0),console.log("Iniciando limpieza de emergencia..."),console.log("Limpieza de emergencia removida"),alert("🎉 Limpieza de emergencia completada. Tu quota de Firebase debería estar liberada."),window.location.reload()}catch(L){console.error("Error en limpieza de emergencia:",L),alert("❌ Error en limpieza de emergencia. Revisa la consola.")}finally{R(!1)}},se=()=>{b()},he=(L,ce=!1)=>c.jsxs("div",{className:`shelter-card ${ce?"premium":""}`,onClick:()=>D(L),children:[ce&&c.jsx("div",{className:"premium-badge",children:c.jsx("span",{children:"⭐ Premium"})}),c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:L.image,alt:L.name})}),c.jsxs("div",{className:"shelter-content",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h3",{children:L.name}),L.verified&&c.jsx("div",{className:"verified-badge",children:c.jsx("span",{children:"✓"})})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",L.location]}),c.jsx("p",{className:"shelter-description",children:L.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsx("div",{className:"rating",children:c.jsxs("span",{children:["⭐ ",L.rating]})}),c.jsx("div",{className:"pets-count",children:c.jsxs("span",{children:["🐾 ",L.petsCount," mascotas"]})})]}),!ce&&e&&L.ownerId===e.uid&&c.jsx("button",{className:"upgrade-button",onClick:de=>{de.stopPropagation(),fe(L)},children:"🚀 Actualizar a Premium"})]}),c.jsx("div",{className:"shelter-arrow",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})})]},L.id);return _?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("button",{className:"back-button",onClick:ze,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"section-title",children:"Detalles del Refugio"})]}),c.jsxs("main",{className:"shelter-details-main",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:_.image,alt:_.name})}),c.jsxs("div",{className:"shelter-info",children:[c.jsx("h1",{children:_.name}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("div",{className:"rating",children:[c.jsx("span",{className:"stars",children:"⭐"}),c.jsx("span",{children:_.rating})]}),c.jsxs("div",{className:"pets-count",children:[c.jsx("span",{children:"🐾"}),c.jsxs("span",{children:[_.petsCount," mascotas"]})]}),_.verified&&c.jsxs("div",{className:"verified-badge",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:"Verificado"})]})]}),c.jsx("p",{className:"shelter-description",children:_.description})]})]}),c.jsxs("div",{className:"shelter-sections",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"contact-info",children:[c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📍"}),c.jsx("span",{children:_.address})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📞"}),c.jsx("span",{children:_.phone})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"✉️"}),c.jsx("span",{children:_.email})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🌐"}),c.jsx("span",{children:_.website})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🕒"}),c.jsx("span",{children:_.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:_.services.map((L,ce)=>c.jsxs("div",{className:"service-item",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:L})]},ce))})]}),c.jsxs("div",{className:"actions-section",children:[c.jsx("button",{className:"contact-button",onClick:()=>qe(_),children:"Contactar Refugio"}),c.jsx("button",{className:"visit-button",onClick:()=>s("/",{state:{shelter:_}}),children:"Ver Mascotas Disponibles"})]})]})]}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"section-title",children:"Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Conecta con organizaciones de rescate animal"})]}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"debug-button",onClick:_e,disabled:G,title:"Analizar refugios en la base de datos",children:G?"🔍 Analizando...":"🔍 Debug BD"}),c.jsx("button",{className:"clean-button",onClick:X,disabled:ne,title:"Limpiar todos los refugios de la base de datos",children:ne?"🧹 Limpiando...":"🧹 Limpiar BD"}),c.jsx("button",{className:"emergency-button",onClick:M,disabled:V,title:"EMERGENCIA: Limpiar TODA la base de datos",children:V?"🚨 Limpiando...":"🚨 EMERGENCIA"})]})]})}),c.jsxs("main",{className:"main-content",children:[c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box",children:[c.jsx("span",{className:"search-icon",children:"🔍"}),c.jsx("input",{type:"text",placeholder:"Buscar refugios...",value:p,onChange:L=>y(L.target.value)})]}),c.jsx("button",{className:"register-shelter-button",onClick:ee,children:"Registrar Refugio"})]}),k?c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]}):c.jsxs("div",{className:"shelters-container",children:[O.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"⭐ Refugios Premium"}),c.jsx("p",{children:"Refugios destacados con mayor visibilidad"})]}),c.jsx("div",{className:"shelters-list premium-grid",children:O.map(L=>he(L,!0))})]}),z.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"🏠 Refugios"}),c.jsx("p",{children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"shelters-list regular-grid",children:z.map(L=>he(L,!1))})]}),j.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No se encontraron refugios"}),c.jsx("p",{children:"Intenta con otros términos de búsqueda"})]})]})]}),c.jsx(Pe,{}),A&&q&&c.jsx(pg,{isOpen:A,onClose:()=>C(!1),shelterId:q.id,shelterName:q.name,onSuccess:se})]})}function Fj(){const s=Et(),{user:e}=zt(),[n,i]=I.useState({name:"",description:"",location:"",address:"",phone:"",email:"",website:"",hours:"",services:[],image:""}),[o,u]=I.useState([]),[d,g]=I.useState(!1),[p,y]=I.useState(""),[_,T]=I.useState(!1),[A,C]=I.useState(null);I.useEffect(()=>{e?q():s("/login")},[e,s]);const q=async()=>{try{const F=await kn.getUserProfile(e.uid);i(F?V=>({...V,name:F.name?`${F.name} - Refugio`:"Mi Refugio",email:F.email||e.email||"",phone:F.phone||"",address:F.address||"",location:F.address||"Costa Rica"}):V=>({...V,name:e.displayName?`${e.displayName} - Refugio`:"Mi Refugio",email:e.email||"",location:"Costa Rica"}))}catch(F){console.error("Error loading user data:",F)}},Q=["Adopción","Esterilización","Vacunación","Atención médica","Rescate","Rehabilitación","Entrenamiento","Hospedaje temporal","Donaciones","Voluntariado"],k=(F,V)=>{i(R=>({...R,[F]:V}))},B=F=>{u(V=>V.includes(F)?V.filter(R=>R!==F):[...V,F])},ne=async F=>{F.preventDefault(),g(!0),y("");try{const V={...n,services:o,ownerId:e?.uid||"anonymous",ownerName:e?.displayName||e?.email||"Usuario Anónimo",rating:0,petsCount:0,verified:!0,isPremium:!1,status:"active"};console.log("Creating shelter with data:",V);const R=await hn.createShelter(V);console.log("Shelter created with ID:",R),T(!0),C(R)}catch(V){console.error("Error creating shelter",V),y("Error al registrar el refugio. Inténtalo de nuevo.")}finally{g(!1)}},ae=()=>{T(!1),C(null),alert(`¡Refugio registrado exitosamente! Ahora tienes acceso premium.

¿Te gustaría subir tu primera mascota?`),s("/upload")},G=()=>{T(!1),C(null),alert(`Refugio registrado exitosamente. Puedes actualizar a premium más tarde desde la página de refugios.

¿Te gustaría subir tu primera mascota?`),s("/upload")};return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>s("/shelters"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Registrar Refugio"}),c.jsx("p",{className:"page-subtitle",children:"Únete a nuestra red de organizaciones de rescate"})]}),c.jsxs("main",{className:"shelter-register-main",children:[!e&&c.jsxs("div",{className:"info-message",children:[c.jsx("span",{children:"ℹ️"}),c.jsx("span",{children:"Puedes registrar un refugio sin iniciar sesión. Si tienes cuenta, inicia sesión para gestionar mejor tu refugio."})]}),p&&c.jsxs("div",{className:"error-message",children:[c.jsx("span",{children:"⚠️"}),c.jsx("span",{children:p})]}),c.jsxs("form",{onSubmit:ne,className:"shelter-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información Básica"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre del Refugio *"}),c.jsx("input",{type:"text",value:n.name,onChange:F=>k("name",F.target.value),placeholder:"Ej: Refugio Animal San José",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción *"}),c.jsx("textarea",{value:n.description,onChange:F=>k("description",F.target.value),placeholder:"Describe tu organización, misión y objetivos...",rows:"4",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Imagen del Refugio"}),c.jsx("input",{type:"url",value:n.image,onChange:F=>k("image",F.target.value),placeholder:"https://ejemplo.com/imagen.jpg"}),n.image&&c.jsx("div",{className:"image-preview",children:c.jsx("img",{src:n.image,alt:"Preview"})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación *"}),c.jsx("input",{type:"text",value:n.location,onChange:F=>k("location",F.target.value),placeholder:"Ej: San José, Costa Rica",required:!0})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Teléfono"}),c.jsx("input",{type:"tel",value:n.phone,onChange:F=>k("phone",F.target.value),placeholder:"+506 2222-3333"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:n.email,onChange:F=>k("email",F.target.value),placeholder:"contacto@refugio.com"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Sitio Web"}),c.jsx("input",{type:"url",value:n.website,onChange:F=>k("website",F.target.value),placeholder:"www.refugio.com"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Horarios de Atención *"}),c.jsx("input",{type:"text",value:n.hours,onChange:F=>k("hours",F.target.value),placeholder:"Lunes a Viernes: 8:00 AM - 6:00 PM",required:!0})]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("p",{className:"section-description",children:"Selecciona todos los servicios que ofrece tu refugio:"}),c.jsx("div",{className:"services-grid",children:Q.map(F=>c.jsxs("label",{className:"service-checkbox",children:[c.jsx("input",{type:"checkbox",checked:o.includes(F),onChange:()=>B(F)}),c.jsx("span",{className:"checkmark"}),c.jsx("span",{className:"service-label",children:F})]},F))})]}),c.jsx("div",{className:"form-section",children:c.jsx("div",{className:"terms-section",children:c.jsxs("label",{className:"terms-checkbox",children:[c.jsx("input",{type:"checkbox",required:!0}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{children:["Acepto los ",c.jsx("a",{href:"#",className:"terms-link",children:"términos y condiciones"})," y la ",c.jsx("a",{href:"#",className:"terms-link",children:"política de privacidad"})]})]})})}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>s("/shelters"),children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-button",disabled:d,children:d?"Registrando...":"Registrar Refugio"})]})]})]}),c.jsx(Pe,{}),c.jsx(pg,{isOpen:_,onClose:G,shelterId:A,shelterName:n.name,onSuccess:ae})]})}function Hj(){const s=Et(),{user:e}=zt(),[n,i]=I.useState([]),[o,u]=I.useState(null),[d,g]=I.useState([]),[p,y]=I.useState(!0),[_,T]=I.useState(!1),[A,C]=I.useState(null);I.useEffect(()=>{e?q():s("/login")},[e,s]);const q=async()=>{try{y(!0);const V=await hn.getSheltersByOwner(e.uid);i(V),console.log("User shelters loaded:",V)}catch(V){console.error("Error loading shelters:",V)}finally{y(!1)}},Q=async V=>{try{const R=await Ut.getPetsByShelter(V);g(R),console.log("Shelter pets loaded:",R)}catch(R){console.error("Error loading shelter pets:",R)}},k=V=>{u(V),Q(V.id)},B=V=>{C(V),T(!0)},ne=()=>{q(),T(!1)},ae=async V=>{if(window.confirm("¿Estás seguro de que quieres eliminar este refugio? Esta acción no se puede deshacer."))try{await hn.deleteShelter(V),alert("Refugio eliminado exitosamente"),q(),o&&o.id===V&&(u(null),g([]))}catch(R){console.error("Error deleting shelter:",R),alert("Error al eliminar el refugio")}},G=V=>{const R={pending:{text:"Pendiente",class:"status-pending"},approved:{text:"Aprobado",class:"status-approved"},rejected:{text:"Rechazado",class:"status-rejected"}},b=R[V]||R.pending;return c.jsx("span",{className:`status-badge ${b.class}`,children:b.text})},F=(V,R)=>{if(!V)return null;const b=R&&new Date(R)<new Date;return c.jsx("span",{className:`premium-badge ${b?"expired":"active"}`,children:b?"⚠️ Premium Expirado":"⭐ Premium"})};return p?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Administrar Refugios"})}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]})}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Administrar Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus refugios y suscripciones premium"})]}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"admin-layout",children:[c.jsxs("div",{className:"shelters-panel",children:[c.jsxs("div",{className:"panel-header",children:[c.jsxs("h3",{children:["Mis Refugios (",n.length,")"]}),c.jsx("button",{className:"add-shelter-btn",onClick:()=>s("/shelter-register"),children:"+ Nuevo Refugio"})]}),c.jsx("div",{className:"shelters-list",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h4",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu primer refugio para comenzar"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):n.map(V=>c.jsxs("div",{className:`shelter-item ${o?.id===V.id?"selected":""}`,onClick:()=>k(V),children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h4",{children:V.name}),c.jsxs("div",{className:"shelter-badges",children:[G(V.status),F(V.isPremium,V.premiumExpiry)]})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",V.location]}),c.jsx("p",{className:"shelter-description",children:V.description}),c.jsxs("div",{className:"shelter-stats",children:[c.jsxs("span",{children:["🐾 ",V.petsCount||0," mascotas"]}),c.jsxs("span",{children:["⭐ ",V.rating||0," rating"]})]}),c.jsxs("div",{className:"shelter-actions",children:[!V.isPremium&&c.jsx("button",{className:"upgrade-btn",onClick:R=>{R.stopPropagation(),B(V)},children:"🚀 Premium"}),c.jsx("button",{className:"delete-btn",onClick:R=>{R.stopPropagation(),ae(V.id)},children:"🗑️"})]})]},V.id))})]}),c.jsx("div",{className:"details-panel",children:o?c.jsxs("div",{className:"shelter-details",children:[c.jsxs("div",{className:"details-header",children:[c.jsx("h3",{children:o.name}),c.jsxs("div",{className:"details-badges",children:[G(o.status),F(o.isPremium,o.premiumExpiry)]})]}),c.jsxs("div",{className:"details-content",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h4",{children:"Información General"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Ubicación:"}),c.jsx("span",{children:o.location})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Dirección:"}),c.jsx("span",{children:o.address})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Teléfono:"}),c.jsx("span",{children:o.phone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Email:"}),c.jsx("span",{children:o.email})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Sitio Web:"}),c.jsx("span",{children:o.website||"No especificado"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Horarios:"}),c.jsx("span",{children:o.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h4",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:o.services?.map((V,R)=>c.jsx("span",{className:"service-tag",children:V},R))})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h4",{children:["Mascotas del Refugio (",d.length,")"]}),d.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("p",{children:"No hay mascotas registradas en este refugio"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:d.map(V=>c.jsxs("div",{className:"pet-card",children:[c.jsx("img",{src:V.img,alt:V.name}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h5",{children:V.name}),c.jsxs("p",{children:[V.type," • ",V.breed]}),c.jsx("span",{className:`pet-status ${V.status}`,children:V.status==="available"?"Disponible":V.status==="adopted"?"Adoptado":"Reservado"})]})]},V.id))})]})]})]}):c.jsxs("div",{className:"no-selection",children:[c.jsx("div",{className:"no-selection-icon",children:"🏠"}),c.jsx("h3",{children:"Selecciona un refugio"}),c.jsx("p",{children:"Elige un refugio de la lista para ver sus detalles y gestionar sus mascotas"})]})})]})}),c.jsx(Pe,{}),_&&A&&c.jsx(pg,{isOpen:_,onClose:()=>T(!1),shelterId:A.id,shelterName:A.name,onSuccess:ne})]})}function Gj(){const s=Et(),[e,n]=I.useState([]),[i,o]=I.useState("all");I.useEffect(()=>{try{const C=JSON.parse(localStorage.getItem("notifications")||"[]");n(C)}catch(C){console.error("Error loading notifications",C)}},[]);const u=C=>{switch(C){case"adoption":return"🐾";case"message":return"💬";case"system":return"🔔";case"approval":return"✅";case"rejection":return"❌";default:return"🔔"}},d=C=>{switch(C){case"adoption":return"#3b82f6";case"message":return"#10b981";case"system":return"#f59e0b";case"approval":return"#10b981";case"rejection":return"#ef4444";default:return"#6b7280"}},g=C=>{const q=e.map(Q=>Q.id===C?{...Q,read:!0}:Q);n(q);try{localStorage.setItem("notifications",JSON.stringify(q))}catch(Q){console.error("Error updating notification",Q)}},p=()=>{const C=e.map(q=>({...q,read:!0}));n(C);try{localStorage.setItem("notifications",JSON.stringify(C))}catch(q){console.error("Error updating notifications",q)}},y=C=>{const q=e.filter(Q=>Q.id!==C);n(q);try{localStorage.setItem("notifications",JSON.stringify(q))}catch(Q){console.error("Error deleting notification",Q)}},_=C=>{switch(g(C.id),C.type){case"adoption":s("/tracking");break;case"message":s("/chat");break;case"approval":case"rejection":s("/tracking");break}},T=e.filter(C=>i==="all"?!0:i==="unread"?!C.read:C.type===i),A=e.filter(C=>!C.read).length;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsx("h2",{className:"logo-text",children:"Notificaciones"}),c.jsx("div",{className:"header-actions",children:A>0&&c.jsx("button",{className:"mark-all-read",onClick:p,children:"Marcar todas como leídas"})})]}),c.jsxs("main",{className:"notifications-main",children:[c.jsxs("div",{className:"filter-tabs",children:[c.jsxs("button",{className:`filter-tab ${i==="all"?"active":""}`,onClick:()=>o("all"),children:["Todas (",e.length,")"]}),c.jsxs("button",{className:`filter-tab ${i==="unread"?"active":""}`,onClick:()=>o("unread"),children:["No leídas (",A,")"]}),c.jsx("button",{className:`filter-tab ${i==="adoption"?"active":""}`,onClick:()=>o("adoption"),children:"Adopciones"}),c.jsx("button",{className:`filter-tab ${i==="message"?"active":""}`,onClick:()=>o("message"),children:"Mensajes"})]}),c.jsx("div",{className:"notifications-list",children:T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔔"}),c.jsx("h3",{children:"No hay notificaciones"}),c.jsx("p",{children:"Cuando tengas notificaciones, aparecerán aquí"})]}):T.map(C=>c.jsxs("div",{className:`notification-item ${C.read?"":"unread"}`,onClick:()=>_(C),children:[c.jsx("div",{className:"notification-icon",children:c.jsx("span",{style:{color:d(C.type)},children:u(C.type)})}),c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-title",children:C.title}),c.jsx("div",{className:"notification-message",children:C.message}),c.jsxs("div",{className:"notification-time",children:[new Date(C.timestamp).toLocaleDateString()," a las"," ",new Date(C.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),c.jsxs("div",{className:"notification-actions",children:[!C.read&&c.jsx("div",{className:"unread-dot"}),c.jsx("button",{className:"delete-button",onClick:q=>{q.stopPropagation(),y(C.id)},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]},C.id))})]}),c.jsx(Pe,{})]})}function Qj(){const{user:s}=zt();Et();const[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null),[g,p]=I.useState(!1),[y,_]=I.useState(""),[T,A]=I.useState(!1);I.useEffect(()=>{s&&C()},[s]);const C=async()=>{try{o(!0);const G=await tn.getAdoptionRequestsForOwner(s.uid),F=await Promise.all(G.map(async V=>{const R=await Ut.getPetById(V.petId),b=await kn.getUserProfile(V.userId);return{...V,pet:R,requester:b}}));n(F)}catch(G){console.error("Error loading adoption requests:",G)}finally{o(!1)}},q=async G=>{try{A(!0),await tn.approveAdoptionRequest(G,y),p(!1),_(""),await C(),alert("Solicitud aprobada exitosamente")}catch(F){console.error("Error approving request:",F),alert("Error al aprobar la solicitud")}finally{A(!1)}},Q=async G=>{try{A(!0),await tn.rejectAdoptionRequest(G,y),p(!1),_(""),await C(),alert("Solicitud rechazada")}catch(F){console.error("Error rejecting request:",F),alert("Error al rechazar la solicitud")}finally{A(!1)}},k=G=>{d(G),p(!0)},B=()=>{p(!1),d(null),_("")},ne=G=>{switch(G){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}},ae=G=>{switch(G){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";default:return"Desconocido"}};return i?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]}),c.jsx(Pe,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]}),c.jsx("h1",{className:"page-title",children:"Solicitudes de Adopción"}),c.jsx("p",{className:"page-description",children:"Gestiona las solicitudes de adopción para tus mascotas"})]}),c.jsx("main",{className:"adoption-requests-main",children:e.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes"}),c.jsx("p",{children:"No tienes solicitudes de adopción pendientes"})]}):c.jsx("div",{className:"requests-list",children:e.map(G=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsxs("div",{className:"pet-info",children:[c.jsx("img",{src:G.pet?.img||"/placeholder-pet.jpg",alt:G.pet?.name,className:"pet-image"}),c.jsxs("div",{className:"pet-details",children:[c.jsx("h3",{children:G.pet?.name}),c.jsxs("p",{children:[G.pet?.type," • ",G.pet?.breed]})]})]}),c.jsx("div",{className:"status-badge",style:{backgroundColor:ne(G.status)},children:ae(G.status)})]}),c.jsxs("div",{className:"requester-info",children:[c.jsx("h4",{children:"Solicitante:"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nombre:"})," ",G.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",G.requester?.email||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",G.requester?.phone||"No disponible"]})]}),G.message&&c.jsxs("div",{className:"request-message",children:[c.jsx("h4",{children:"Mensaje del solicitante:"}),c.jsxs("p",{children:['"',G.message,'"']})]}),c.jsxs("div",{className:"request-actions",children:[c.jsx("span",{className:"request-date",children:new Date(G.createdAt).toLocaleDateString()}),G.status==="pending"&&c.jsx("div",{className:"action-buttons",children:c.jsx("button",{className:"approve-btn",onClick:()=>k(G),children:"Revisar"})})]})]},G.id))})}),g&&u&&c.jsx("div",{className:"modal-overlay",onClick:B,children:c.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Gestionar Solicitud"}),c.jsx("button",{className:"close-btn",onClick:B,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"request-details",children:[c.jsxs("h4",{children:["Mascota: ",u.pet?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",u.requester?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",u.requester?.email]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",u.requester?.phone]}),u.message&&c.jsxs("div",{className:"message-section",children:[c.jsx("h5",{children:"Mensaje:"}),c.jsxs("p",{children:['"',u.message,'"']})]})]}),c.jsxs("div",{className:"notes-section",children:[c.jsx("label",{children:"Notas adicionales (opcional):"}),c.jsx("textarea",{value:y,onChange:G=>_(G.target.value),placeholder:"Agrega cualquier comentario adicional...",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"reject-btn",onClick:()=>Q(u.id),disabled:T,children:T?"Procesando...":"Rechazar"}),c.jsx("button",{className:"approve-btn",onClick:()=>q(u.id),disabled:T,children:T?"Procesando...":"Aprobar"})]})]})}),c.jsx(Pe,{})]})}const Zt=({element:s,user:e,loading:n})=>n?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"Cargando..."}):e?s:c.jsx(R0,{to:"/login",replace:!0});function $j(){const{user:s,loading:e}=zt(),[n,i]=I.useState(null);I.useEffect(()=>{const u=d=>{i(d.detail)};return window.addEventListener("error-notification",u),()=>window.removeEventListener("error-notification",u)},[]);const o=()=>{i(null)};return e?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"Cargando..."}):(console.log("App render - user:",s),console.log("App render - loading:",e),c.jsxs(c.Fragment,{children:[c.jsxs(Dw,{children:[c.jsx(Nt,{path:"/login",element:c.jsx(Dj,{})}),c.jsx(Nt,{path:"/register",element:c.jsx(Pj,{})}),c.jsx(Nt,{path:"/",element:c.jsx(Zt,{element:c.jsx(Rj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/categories",element:c.jsx(Zt,{element:c.jsx(Cj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/upload",element:c.jsx(Zt,{element:c.jsx(Ij,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/profile",element:c.jsx(Zt,{element:c.jsx(jj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adopt",element:c.jsx(Zt,{element:c.jsx(Oj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/tracking",element:c.jsx(Zt,{element:c.jsx(Mj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adoption-details",element:c.jsx(Zt,{element:c.jsx(kj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/chat/:conversationId",element:c.jsx(Zt,{element:c.jsx(Vj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/conversations",element:c.jsx(Zt,{element:c.jsx(Lj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/users",element:c.jsx(Zt,{element:c.jsx(Uj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/favorites",element:c.jsx(Zt,{element:c.jsx(qj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/my-pets",element:c.jsx(Zt,{element:c.jsx(zj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelters",element:c.jsx(Zt,{element:c.jsx(Bj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelter-register",element:c.jsx(Zt,{element:c.jsx(Fj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelter-admin",element:c.jsx(Zt,{element:c.jsx(Hj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/notifications",element:c.jsx(Zt,{element:c.jsx(Gj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adoption-requests",element:c.jsx(Zt,{element:c.jsx(Qj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"*",element:c.jsx(R0,{to:"/",replace:!0})})]}),c.jsx(Aj,{error:n,onClose:o})]}))}const Kj=localStorage.getItem("theme")||"dark";document.body.setAttribute("data-theme",Kj);BT.createRoot(document.getElementById("root")).render(c.jsx(I.StrictMode,{children:c.jsx(tx,{children:c.jsx(xj,{children:c.jsx($j,{})})})}));
