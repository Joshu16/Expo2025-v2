(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var gm={exports:{}},Xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function kT(){if(R_)return Xl;R_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Xl.Fragment=e,Xl.jsx=n,Xl.jsxs=n,Xl}var C_;function VT(){return C_||(C_=1,gm.exports=kT()),gm.exports}var c=VT(),ym={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function LT(){if(I_)return je;I_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function V(O,ie,fe){this.props=O,this.context=ie,this.refs=B,this.updater=fe||C}V.prototype.isReactComponent={},V.prototype.setState=function(O,ie){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ie,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=V.prototype;function oe(O,ie,fe){this.props=O,this.context=ie,this.refs=B,this.updater=fe||C}var $=oe.prototype=new Y;$.constructor=oe,U($,V.prototype),$.isPureReactComponent=!0;var H=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function R(O,ie,fe,ee,ce,me){return fe=me.ref,{$$typeof:s,type:O,key:ie,ref:fe!==void 0?fe:null,props:me}}function w(O,ie){return R(O.type,ie,void 0,void 0,void 0,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function j(O){var ie={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return ie[fe]})}var M=/\/+/g;function q(O,ie){return typeof O=="object"&&O!==null&&O.key!=null?j(""+O.key):ie.toString(36)}function D(){}function he(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(ie){O.status==="pending"&&(O.status="fulfilled",O.value=ie)},function(ie){O.status==="pending"&&(O.status="rejected",O.reason=ie)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function De(O,ie,fe,ee,ce){var me=typeof O;(me==="undefined"||me==="boolean")&&(O=null);var ye=!1;if(O===null)ye=!0;else switch(me){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(O.$$typeof){case s:case e:ye=!0;break;case _:return ye=O._init,De(ye(O._payload),ie,fe,ee,ce)}}if(ye)return ce=ce(O),ye=ee===""?"."+q(O,0):ee,H(ce)?(fe="",ye!=null&&(fe=ye.replace(M,"$&/")+"/"),De(ce,ie,fe,"",function(ns){return ns})):ce!=null&&(N(ce)&&(ce=w(ce,fe+(ce.key==null||O&&O.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+ye)),ie.push(ce)),1;ye=0;var ht=ee===""?".":ee+":";if(H(O))for(var $e=0;$e<O.length;$e++)ee=O[$e],me=ht+q(ee,$e),ye+=De(ee,ie,fe,me,ce);else if($e=x(O),typeof $e=="function")for(O=$e.call(O),$e=0;!(ee=O.next()).done;)ee=ee.value,me=ht+q(ee,$e++),ye+=De(ee,ie,fe,me,ce);else if(me==="object"){if(typeof O.then=="function")return De(he(O),ie,fe,ee,ce);throw ie=String(O),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ye}function te(O,ie,fe){if(O==null)return O;var ee=[],ce=0;return De(O,ee,"","",function(me){return ie.call(fe,me,ce++)}),ee}function ue(O){if(O._status===-1){var ie=O._result;ie=ie(),ie.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=ie)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ee(){}return je.Children={map:te,forEach:function(O,ie,fe){te(O,function(){ie.apply(this,arguments)},fe)},count:function(O){var ie=0;return te(O,function(){ie++}),ie},toArray:function(O){return te(O,function(ie){return ie})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},je.Component=V,je.Fragment=n,je.Profiler=o,je.PureComponent=oe,je.StrictMode=i,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,je.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},je.cache=function(O){return function(){return O.apply(null,arguments)}},je.cloneElement=function(O,ie,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=U({},O.props),ce=O.key,me=void 0;if(ie!=null)for(ye in ie.ref!==void 0&&(me=void 0),ie.key!==void 0&&(ce=""+ie.key),ie)!F.call(ie,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ie.ref===void 0||(ee[ye]=ie[ye]);var ye=arguments.length-2;if(ye===1)ee.children=fe;else if(1<ye){for(var ht=Array(ye),$e=0;$e<ye;$e++)ht[$e]=arguments[$e+2];ee.children=ht}return R(O.type,ce,void 0,void 0,me,ee)},je.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},je.createElement=function(O,ie,fe){var ee,ce={},me=null;if(ie!=null)for(ee in ie.key!==void 0&&(me=""+ie.key),ie)F.call(ie,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ce[ee]=ie[ee]);var ye=arguments.length-2;if(ye===1)ce.children=fe;else if(1<ye){for(var ht=Array(ye),$e=0;$e<ye;$e++)ht[$e]=arguments[$e+2];ce.children=ht}if(O&&O.defaultProps)for(ee in ye=O.defaultProps,ye)ce[ee]===void 0&&(ce[ee]=ye[ee]);return R(O,me,void 0,void 0,null,ce)},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:y,render:O}},je.isValidElement=N,je.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:ue}},je.memo=function(O,ie){return{$$typeof:p,type:O,compare:ie===void 0?null:ie}},je.startTransition=function(O){var ie=k.T,fe={};k.T=fe;try{var ee=O(),ce=k.S;ce!==null&&ce(fe,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Ee,X)}catch(me){X(me)}finally{k.T=ie}},je.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},je.use=function(O){return k.H.use(O)},je.useActionState=function(O,ie,fe){return k.H.useActionState(O,ie,fe)},je.useCallback=function(O,ie){return k.H.useCallback(O,ie)},je.useContext=function(O){return k.H.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O,ie){return k.H.useDeferredValue(O,ie)},je.useEffect=function(O,ie,fe){var ee=k.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(O,ie)},je.useId=function(){return k.H.useId()},je.useImperativeHandle=function(O,ie,fe){return k.H.useImperativeHandle(O,ie,fe)},je.useInsertionEffect=function(O,ie){return k.H.useInsertionEffect(O,ie)},je.useLayoutEffect=function(O,ie){return k.H.useLayoutEffect(O,ie)},je.useMemo=function(O,ie){return k.H.useMemo(O,ie)},je.useOptimistic=function(O,ie){return k.H.useOptimistic(O,ie)},je.useReducer=function(O,ie,fe){return k.H.useReducer(O,ie,fe)},je.useRef=function(O){return k.H.useRef(O)},je.useState=function(O){return k.H.useState(O)},je.useSyncExternalStore=function(O,ie,fe){return k.H.useSyncExternalStore(O,ie,fe)},je.useTransition=function(){return k.H.useTransition()},je.version="19.1.1",je}var j_;function hp(){return j_||(j_=1,ym.exports=LT()),ym.exports}var I=hp(),vm={exports:{}},Wl={},_m={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function UT(){return D_||(D_=1,(function(s){function e(te,ue){var X=te.length;te.push(ue);e:for(;0<X;){var Ee=X-1>>>1,O=te[Ee];if(0<o(O,ue))te[Ee]=ue,te[X]=O,X=Ee;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ue=te[0],X=te.pop();if(X!==ue){te[0]=X;e:for(var Ee=0,O=te.length,ie=O>>>1;Ee<ie;){var fe=2*(Ee+1)-1,ee=te[fe],ce=fe+1,me=te[ce];if(0>o(ee,X))ce<O&&0>o(me,ee)?(te[Ee]=me,te[ce]=X,Ee=ce):(te[Ee]=ee,te[fe]=X,Ee=fe);else if(ce<O&&0>o(me,X))te[Ee]=me,te[ce]=X,Ee=ce;else break e}}return ue}function o(te,ue){var X=te.sortIndex-ue.sortIndex;return X!==0?X:te.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();s.unstable_now=function(){return d.now()-y}}var g=[],p=[],_=1,b=null,x=3,C=!1,U=!1,B=!1,V=!1,Y=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function H(te){for(var ue=n(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=te)i(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=n(p)}}function k(te){if(B=!1,H(te),!U)if(n(g)!==null)U=!0,F||(F=!0,q());else{var ue=n(p);ue!==null&&De(k,ue.startTime-te)}}var F=!1,R=-1,w=5,N=-1;function j(){return V?!0:!(s.unstable_now()-N<w)}function M(){if(V=!1,F){var te=s.unstable_now();N=te;var ue=!0;try{e:{U=!1,B&&(B=!1,oe(R),R=-1),C=!0;var X=x;try{t:{for(H(te),b=n(g);b!==null&&!(b.expirationTime>te&&j());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,x=b.priorityLevel;var O=Ee(b.expirationTime<=te);if(te=s.unstable_now(),typeof O=="function"){b.callback=O,H(te),ue=!0;break t}b===n(g)&&i(g),H(te)}else i(g);b=n(g)}if(b!==null)ue=!0;else{var ie=n(p);ie!==null&&De(k,ie.startTime-te),ue=!1}}break e}finally{b=null,x=X,C=!1}ue=void 0}}finally{ue?q():F=!1}}}var q;if(typeof $=="function")q=function(){$(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,he=D.port2;D.port1.onmessage=M,q=function(){he.postMessage(null)}}else q=function(){Y(M,0)};function De(te,ue){R=Y(function(){te(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(te){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var X=x;x=ue;try{return te()}finally{x=X}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var X=x;x=te;try{return ue()}finally{x=X}},s.unstable_scheduleCallback=function(te,ue,X){var Ee=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ee+X:Ee):X=Ee,te){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=X+O,te={id:_++,callback:ue,priorityLevel:te,startTime:X,expirationTime:O,sortIndex:-1},X>Ee?(te.sortIndex=X,e(p,te),n(g)===null&&te===n(p)&&(B?(oe(R),R=-1):B=!0,De(k,X-Ee))):(te.sortIndex=O,e(g,te),U||C||(U=!0,F||(F=!0,q()))),te},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(te){var ue=x;return function(){var X=x;x=ue;try{return te.apply(this,arguments)}finally{x=X}}}})(Em)),Em}var P_;function qT(){return P_||(P_=1,_m.exports=UT()),_m.exports}var Sm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function zT(){if(M_)return cn;M_=1;var s=hp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:p,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,_)},cn.flushSync=function(g){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=p,i.p=_,i.d.f()}},cn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},cn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},cn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,b=y(_,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:C}):_==="script"&&i.d.X(g,{crossOrigin:b,integrity:x,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=y(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},cn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=y(_,p.crossOrigin);i.d.L(g,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=y(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},cn.requestFormReset=function(g){i.d.r(g)},cn.unstable_batchedUpdates=function(g,p){return g(p)},cn.useFormState=function(g,p,_){return d.H.useFormState(g,p,_)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var O_;function BT(){if(O_)return Sm.exports;O_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sm.exports=zT(),Sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function FT(){if(k_)return Wl;k_=1;var s=qT(),e=hp(),n=BT();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(i(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return y(f),t;if(m===l)return y(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var S=!1,T=f.child;T;){if(T===a){S=!0,a=f,l=m;break}if(T===l){S=!0,l=f,a=m;break}T=T.sibling}if(!S){for(T=m.child;T;){if(T===a){S=!0,a=m,l=f;break}if(T===l){S=!0,l=m,a=f;break}T=T.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),$=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function he(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case V:return"Profiler";case B:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case $:return(t.displayName||"Context")+".Provider";case oe:return(t._context.displayName||"Context")+".Consumer";case H:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:he(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return he(t(r))}catch{}}return null}var De=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Ee=[],O=-1;function ie(t){return{current:t}}function fe(t){0>O||(t.current=Ee[O],Ee[O]=null,O--)}function ee(t,r){O++,Ee[O]=t.current,t.current=r}var ce=ie(null),me=ie(null),ye=ie(null),ht=ie(null);function $e(t,r){switch(ee(ye,r),ee(me,t),ee(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?n_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=n_(r),t=s_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(ce),ee(ce,t)}function ns(){fe(ce),fe(me),fe(ye)}function Ho(t){t.memoizedState!==null&&ee(ht,t);var r=ce.current,a=s_(r,t.type);r!==a&&(ee(me,t),ee(ce,a))}function wa(t){me.current===t&&(fe(ce),fe(me)),ht.current===t&&(fe(ht),Gl._currentValue=X)}var xa=Object.prototype.hasOwnProperty,Ai=s.unstable_scheduleCallback,Aa=s.unstable_cancelCallback,gd=s.unstable_shouldYield,Go=s.unstable_requestPaint,En=s.unstable_now,kc=s.unstable_getCurrentPriorityLevel,kt=s.unstable_ImmediatePriority,Bt=s.unstable_UserBlockingPriority,qs=s.unstable_NormalPriority,yd=s.unstable_LowPriority,Qo=s.unstable_IdlePriority,vd=s.log,Ni=s.unstable_setDisableYieldValue,br=null,an=null;function Ln(t){if(typeof vd=="function"&&Ni(t),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(br,t)}catch{}}var mn=Math.clz32?Math.clz32:Lc,_d=Math.log,Vc=Math.LN2;function Lc(t){return t>>>=0,t===0?32:31-(_d(t)/Vc|0)|0}var vs=256,Tr=4194304;function ss(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Un(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?f=ss(l):(S&=T,S!==0?f=ss(S):a||(a=T&~t,a!==0&&(f=ss(a))))):(T=l&~m,T!==0?f=ss(T):S!==0?f=ss(S):a||(a=l&~t,a!==0&&(f=ss(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function wr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Na(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $o(){var t=vs;return vs<<=1,(vs&4194048)===0&&(vs=256),t}function xr(){var t=Tr;return Tr<<=1,(Tr&62914560)===0&&(Tr=4194304),t}function Ra(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function St(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uc(t,r,a,l,f,m){var S=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,P=t.expirationTimes,K=t.hiddenUpdates;for(a=S&~a;0<a;){var ne=31-mn(a),ae=1<<ne;T[ne]=0,P[ne]=-1;var W=K[ne];if(W!==null)for(K[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}a&=~ae}l!==0&&Ar(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(S&~r))}function Ar(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-mn(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Nr(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-mn(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function Ko(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function zs(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:b_(t.type))}function Ed(t,r){var a=ue.p;try{return ue.p=t,r()}finally{ue.p=a}}var _s=Math.random().toString(36).slice(2),bt="__reactFiber$"+_s,Yt="__reactProps$"+_s,Bs="__reactContainer$"+_s,Ri="__reactEvents$"+_s,Ci="__reactListeners$"+_s,Sd="__reactHandles$"+_s,rs="__reactResources$"+_s,Rr="__reactMarker$"+_s;function Ca(t){delete t[bt],delete t[Yt],delete t[Ri],delete t[Ci],delete t[Sd]}function Es(t){var r=t[bt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Bs]||a[bt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=o_(t);t!==null;){if(a=t[bt])return a;t=o_(t)}return r}t=a,a=t.parentNode}return null}function Ss(t){if(t=t[bt]||t[Bs]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Cr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function Ir(t){var r=t[rs];return r||(r=t[rs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tt(t){t[Rr]=!0}var qc=new Set,Ii={};function bs(t,r){Ts(t,r),Ts(t+"Capture",r)}function Ts(t,r){for(Ii[t]=r,t=0;t<r.length;t++)qc.add(r[t])}var ji=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},Ia={};function bd(t){return xa.call(Ia,t)?!0:xa.call(ws,t)?!1:ji.test(t)?Ia[t]=!0:(ws[t]=!0,!1)}function Di(t,r,a){if(bd(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Pi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function qn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Mi,ja;function Fs(t){if(Mi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Mi=r&&r[1]||"",ja=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mi+t+ja}var Da=!1;function Pa(t,r){if(!t||Da)return"";Da=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var W=Z}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(Z){W=Z}t.call(ae.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),S=m[0],T=m[1];if(S&&T){var P=S.split(`
`),K=T.split(`
`);for(f=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(l===P.length||f===K.length)for(l=P.length-1,f=K.length-1;1<=l&&0<=f&&P[l]!==K[f];)f--;for(;1<=l&&0<=f;l--,f--)if(P[l]!==K[f]){if(l!==1||f!==1)do if(l--,f--,0>f||P[l]!==K[f]){var ne=`
`+P[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=f);break}}}finally{Da=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Fs(a):""}function Td(t){switch(t.tag){case 26:case 27:case 5:return Fs(t.type);case 16:return Fs("Lazy");case 13:return Fs("Suspense");case 19:return Fs("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return Fs("Activity");default:return""}}function is(t){try{var r="";do r+=Td(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Oi(t){var r=jr(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(S){l=""+S,m.call(this,S)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Dr(t){t._valueTracker||(t._valueTracker=Oi(t))}function Ze(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=jr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ki=/[\n"\\]/g;function Ft(t){return t.replace(ki,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xo(t,r,a,l,f,m,S,T){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),r!=null?S==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mt(r)):t.value!==""+mt(r)&&(t.value=""+mt(r)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),r!=null?Zo(t,S,mt(r)):a!=null?Zo(t,S,mt(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+mt(T):t.removeAttribute("name")}function Wo(t,r,a,l,f,m,S,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+mt(a):"",r=r!=null?""+mt(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S)}function Zo(t,r,a){r==="number"&&Hs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Pr(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function zc(t,r,a){if(r!=null&&(r=""+mt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mt(a):""}function Bc(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(De(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jo(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Gs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function el(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Jo(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Jo(t,m,r[m])}function Ma(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(t){return Hc.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var tl=null;function nl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mr=null,pn=null;function Gc(t){var r=Ss(t);if(r&&(t=r.stateNode)){var a=t[Yt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Xo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ft(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[Yt]||null;if(!f)throw Error(i(90));Xo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ze(l)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Pr(t,!!a.multiple,r,!1)}}}var Vi=!1;function Li(t,r,a){if(Vi)return t(r,a);Vi=!0;try{var l=t(r);return l}finally{if(Vi=!1,(Mr!==null||pn!==null)&&(Mu(),Mr&&(r=Mr,t=pn,pn=Mr=null,Gc(r),t)))for(r=0;r<t.length;r++)Gc(t[r])}}function Or(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(gn)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{Qs=!1}var Bn=null,rt=null,Oa=null;function Qc(){if(Oa)return Oa;var t,r=rt,a=r.length,l,f="value"in Bn?Bn.value:Bn.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var S=a-t;for(l=1;l<=S&&r[a-l]===f[m-l];l++);return Oa=f.slice(t,1<l?1-l:void 0)}function Ui(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function qi(){return!0}function sl(){return!1}function Vt(t){function r(a,l,f,m,S){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?qi:sl,this.isPropagationStopped=sl,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),r}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=Vt(on),Bi=_({},on,{view:0,detail:0}),Fi=Vt(Bi),ka,Hi,xs,Gi=_({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xs&&(xs&&t.type==="mousemove"?(ka=t.screenX-xs.screenX,Hi=t.screenY-xs.screenY):Hi=ka=0,xs=t),ka)},movementY:function(t){return"movementY"in t?t.movementY:Hi}}),Qi=Vt(Gi),wd=_({},Gi,{dataTransfer:0}),$c=Vt(wd),$i=_({},Bi,{relatedTarget:0}),Va=Vt($i),Kc=_({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),rl=Vt(Kc),il=_({},on,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yc=Vt(il),La=_({},on,{data:0}),al=Vt(La),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wc[t])?!!r[t]:!1}function Ua(){return Zc}var Jc=_({},Bi,{key:function(t){if(t.key){var r=Xc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$s[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(t){return t.type==="keypress"?Ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qa=Vt(Jc),yn=_({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=Vt(yn),eu=_({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),Vr=Vt(eu),h=_({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=Vt(h),E=_({},Gi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Vt(E),Q=_({},on,{newState:0,oldState:0}),J=Vt(Q),de=[9,13,27,32],Ce=gn&&"CompositionEvent"in window,ot=null;gn&&"documentMode"in document&&(ot=document.documentMode);var Ye=gn&&"TextEvent"in window&&!ot,wt=gn&&(!Ce||ot&&8<ot&&11>=ot),Rn=" ",As=!1;function os(t,r){switch(t){case"keyup":return de.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ls(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function ll(t,r){switch(t){case"compositionend":return ls(r);case"keypress":return r.which!==32?null:(As=!0,Rn);case"textInput":return t=r.data,t===Rn&&As?null:t;default:return null}}function cb(t,r){if(cs)return t==="compositionend"||!Ce&&os(t,r)?(t=Qc(),Oa=rt=Bn=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return wt&&r.locale!=="ko"?null:r.data;default:return null}}var ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ub[t.type]:r==="textarea"}function yg(t,r,a,l){Mr?pn?pn.push(l):pn=[l]:Mr=l,r=qu(r,"onChange"),0<r.length&&(a=new zi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var cl=null,ul=null;function hb(t){Wv(t,0)}function tu(t){var r=Cr(t);if(Ze(r))return t}function vg(t,r){if(t==="change")return r}var _g=!1;if(gn){var xd;if(gn){var Ad="oninput"in document;if(!Ad){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),Ad=typeof Eg.oninput=="function"}xd=Ad}else xd=!1;_g=xd&&(!document.documentMode||9<document.documentMode)}function Sg(){cl&&(cl.detachEvent("onpropertychange",bg),ul=cl=null)}function bg(t){if(t.propertyName==="value"&&tu(ul)){var r=[];yg(r,ul,t,nl(t)),Li(hb,r)}}function db(t,r,a){t==="focusin"?(Sg(),cl=r,ul=a,cl.attachEvent("onpropertychange",bg)):t==="focusout"&&Sg()}function fb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(ul)}function mb(t,r){if(t==="click")return tu(r)}function pb(t,r){if(t==="input"||t==="change")return tu(r)}function gb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Cn=typeof Object.is=="function"?Object.is:gb;function hl(t,r){if(Cn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!xa.call(r,f)||!Cn(t[f],r[f]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,r){var a=Tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function xg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?xg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ag(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Hs(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Hs(t.document)}return r}function Nd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var yb=gn&&"documentMode"in document&&11>=document.documentMode,za=null,Rd=null,dl=null,Cd=!1;function Ng(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cd||za==null||za!==Hs(l)||(l=za,"selectionStart"in l&&Nd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&hl(dl,l)||(dl=l,l=qu(Rd,"onSelect"),0<l.length&&(r=new zi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=za)))}function Ki(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ba={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},Id={},Rg={};gn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Yi(t){if(Id[t])return Id[t];if(!Ba[t])return t;var r=Ba[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Id[t]=r[a];return t}var Cg=Yi("animationend"),Ig=Yi("animationiteration"),jg=Yi("animationstart"),vb=Yi("transitionrun"),_b=Yi("transitionstart"),Eb=Yi("transitioncancel"),Dg=Yi("transitionend"),Pg=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function us(t,r){Pg.set(t,r),bs(r,[t])}var Mg=new WeakMap;function Fn(t,r){if(typeof t=="object"&&t!==null){var a=Mg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:is(r)},Mg.set(t,r),r)}return{value:t,source:r,stack:is(r)}}var Hn=[],Fa=0,Dd=0;function nu(){for(var t=Fa,r=Dd=Fa=0;r<t;){var a=Hn[r];Hn[r++]=null;var l=Hn[r];Hn[r++]=null;var f=Hn[r];Hn[r++]=null;var m=Hn[r];if(Hn[r++]=null,l!==null&&f!==null){var S=l.pending;S===null?f.next=f:(f.next=S.next,S.next=f),l.pending=f}m!==0&&Og(a,f,m)}}function su(t,r,a,l){Hn[Fa++]=t,Hn[Fa++]=r,Hn[Fa++]=a,Hn[Fa++]=l,Dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Pd(t,r,a,l){return su(t,r,a,l),ru(t)}function Ha(t,r){return su(t,null,null,r),ru(t)}function Og(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-mn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function ru(t){if(50<Vl)throw Vl=0,qf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ga={};function Sb(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,r,a,l){return new Sb(t,r,a,l)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,r){var a=t.alternate;return a===null?(a=In(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function kg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function iu(t,r,a,l,f,m){var S=0;if(l=t,typeof t=="function")Md(t)&&(S=1);else if(typeof t=="string")S=TT(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=In(31,a,r,f),t.elementType=N,t.lanes=m,t;case U:return Xi(a.children,f,m,r);case B:S=8,f|=24;break;case V:return t=In(12,a,r,f|2),t.elementType=V,t.lanes=m,t;case k:return t=In(13,a,r,f),t.elementType=k,t.lanes=m,t;case F:return t=In(19,a,r,f),t.elementType=F,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case $:S=10;break e;case oe:S=9;break e;case H:S=11;break e;case R:S=14;break e;case w:S=16,l=null;break e}S=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=In(S,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Xi(t,r,a,l){return t=In(7,t,l,r),t.lanes=a,t}function Od(t,r,a){return t=In(6,t,null,r),t.lanes=a,t}function kd(t,r,a){return r=In(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Qa=[],$a=0,au=null,ou=0,Gn=[],Qn=0,Wi=null,Ys=1,Xs="";function Zi(t,r){Qa[$a++]=ou,Qa[$a++]=au,au=t,ou=r}function Vg(t,r,a){Gn[Qn++]=Ys,Gn[Qn++]=Xs,Gn[Qn++]=Wi,Wi=t;var l=Ys;t=Xs;var f=32-mn(l)-1;l&=~(1<<f),a+=1;var m=32-mn(r)+f;if(30<m){var S=f-f%5;m=(l&(1<<S)-1).toString(32),l>>=S,f-=S,Ys=1<<32-mn(r)+f|a<<f|l,Xs=m+t}else Ys=1<<m|a<<f|l,Xs=t}function Vd(t){t.return!==null&&(Zi(t,1),Vg(t,1,0))}function Ld(t){for(;t===au;)au=Qa[--$a],Qa[$a]=null,ou=Qa[--$a],Qa[$a]=null;for(;t===Wi;)Wi=Gn[--Qn],Gn[Qn]=null,Xs=Gn[--Qn],Gn[Qn]=null,Ys=Gn[--Qn],Gn[Qn]=null}var vn=null,yt=null,Ge=!1,Ji=null,Ns=!1,Ud=Error(i(519));function ea(t){var r=Error(i(418,""));throw pl(Fn(r,t)),Ud}function Lg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[bt]=t,r[Yt]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Ul.length;a++)Le(Ul[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Wo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Dr(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Bc(r,l.value,l.defaultValue,l.children),Dr(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||t_(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=zu),r=!0):r=!1,r||ea(t)}function Ug(t){for(vn=t.return;vn;)switch(vn.tag){case 5:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:vn=vn.return}}function fl(t){if(t!==vn)return!1;if(!Ge)return Ug(t),Ge=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||nm(t.type,t.memoizedProps)),a=!a),a&&yt&&ea(t),Ug(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){yt=ds(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}yt=null}}else r===27?(r=yt,Jr(t.type)?(t=am,am=null,yt=t):yt=r):yt=vn?ds(t.stateNode.nextSibling):null;return!0}function ml(){yt=vn=null,Ge=!1}function qg(){var t=Ji;return t!==null&&(Tn===null?Tn=t:Tn.push.apply(Tn,t),Ji=null),t}function pl(t){Ji===null?Ji=[t]:Ji.push(t)}var qd=ie(null),ta=null,Ws=null;function Lr(t,r,a){ee(qd,r._currentValue),r._currentValue=a}function Zs(t){t._currentValue=qd.current,fe(qd)}function zd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Bd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var P=0;P<r.length;P++)if(T.context===r[P]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),zd(m.return,a,t),l||(S=null);break e}m=T.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),zd(S,a,t),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===t){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function gl(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var T=f.type;Cn(f.pendingProps.value,S.value)||(t!==null?t.push(T):t=[T])}}else if(f===ht.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Gl):t=[Gl])}f=f.return}t!==null&&Bd(r,t,a,l),r.flags|=262144}function lu(t){for(t=t.firstContext;t!==null;){if(!Cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){ta=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return zg(ta,t)}function cu(t,r){return ta===null&&na(t),zg(t,r)}function zg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ws===null){if(t===null)throw Error(i(308));Ws=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ws=Ws.next=r;return a}var bb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Tb=s.unstable_scheduleCallback,wb=s.unstable_NormalPriority,Lt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fd(){return{controller:new bb,data:new Map,refCount:0}}function yl(t){t.refCount--,t.refCount===0&&Tb(wb,function(){t.controller.abort()})}var vl=null,Hd=0,Ka=0,Ya=null;function xb(t,r){if(vl===null){var a=vl=[];Hd=0,Ka=$f(),Ya={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Hd++,r.then(Bg,Bg),r}function Bg(){if(--Hd===0&&vl!==null){Ya!==null&&(Ya.status="fulfilled");var t=vl;vl=null,Ka=0,Ya=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Ab(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Fg=te.S;te.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&xb(t,r),Fg!==null&&Fg(t,r)};var sa=ie(null);function Gd(){var t=sa.current;return t!==null?t:it.pooledCache}function uu(t,r){r===null?ee(sa,sa.current):ee(sa,r.pool)}function Hg(){var t=Gd();return t===null?null:{parent:Lt._currentValue,pool:t}}var _l=Error(i(460)),Gg=Error(i(474)),hu=Error(i(542)),Qd={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function du(){}function $g(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(du,du),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Yg(t),t;default:if(typeof r.status=="string")r.then(du,du);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Yg(t),t}throw El=r,_l}}var El=null;function Kg(){if(El===null)throw Error(i(459));var t=El;return El=null,t}function Yg(t){if(t===_l||t===hu)throw Error(i(483))}var Ur=!1;function $d(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=ru(t),Og(t,null,a),r}return su(t,l,r,a),ru(t)}function Sl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Nr(t,a)}}function Yd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Xd=!1;function bl(){if(Xd){var t=Ya;if(t!==null)throw t}}function Tl(t,r,a,l){Xd=!1;var f=t.updateQueue;Ur=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var P=T,K=P.next;P.next=null,S===null?m=K:S.next=K,S=P;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==S&&(T===null?ne.firstBaseUpdate=K:T.next=K,ne.lastBaseUpdate=P))}if(m!==null){var ae=f.baseState;S=0,ne=K=P=null,T=m;do{var W=T.lane&-536870913,Z=W!==T.lane;if(Z?(Be&W)===W:(l&W)===W){W!==0&&W===Ka&&(Xd=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=t,Te=T;W=r;var tt=a;switch(Te.tag){case 1:if(Ne=Te.payload,typeof Ne=="function"){ae=Ne.call(tt,ae,W);break e}ae=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Te.payload,W=typeof Ne=="function"?Ne.call(tt,ae,W):Ne,W==null)break e;ae=_({},ae,W);break e;case 2:Ur=!0}}W=T.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(K=ne=Z,P=ae):ne=ne.next=Z,S|=W;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(P=ae),f.baseState=P,f.firstBaseUpdate=K,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),Yr|=S,t.lanes=S,t.memoizedState=ae}}function Xg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Wg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Xg(a[t],r)}var Xa=ie(null),fu=ie(0);function Zg(t,r){t=ir,ee(fu,t),ee(Xa,r),ir=t|r.baseLanes}function Wd(){ee(fu,ir),ee(Xa,Xa.current)}function Zd(){ir=fu.current,fe(Xa),fe(fu)}var Br=0,Pe=null,Je=null,Ct=null,mu=!1,Wa=!1,ra=!1,pu=0,wl=0,Za=null,Nb=0;function xt(){throw Error(i(321))}function Jd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Cn(t[a],r[a]))return!1;return!0}function ef(t,r,a,l,f,m){return Br=m,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=t===null||t.memoizedState===null?Oy:ky,ra=!1,m=a(l,f),ra=!1,Wa&&(m=ey(r,a,l,f)),Jg(t),m}function Jg(t){te.H=Su;var r=Je!==null&&Je.next!==null;if(Br=0,Ct=Je=Pe=null,mu=!1,wl=0,Za=null,r)throw Error(i(300));t===null||Ht||(t=t.dependencies,t!==null&&lu(t)&&(Ht=!0))}function ey(t,r,a,l){Pe=t;var f=0;do{if(Wa&&(Za=null),wl=0,Wa=!1,25<=f)throw Error(i(301));if(f+=1,Ct=Je=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=Mb,m=r(a,l)}while(Wa);return m}function Rb(){var t=te.H,r=t.useState()[0];return r=typeof r.then=="function"?xl(r):r,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Pe.flags|=1024),r}function tf(){var t=pu!==0;return pu=0,t}function nf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function sf(t){if(mu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}mu=!1}Br=0,Ct=Je=Pe=null,Wa=!1,wl=pu=0,Za=null}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Pe.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function It(){if(Je===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var r=Ct===null?Pe.memoizedState:Ct.next;if(r!==null)Ct=r,Je=t;else{if(t===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ct===null?Pe.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(t){var r=wl;return wl+=1,Za===null&&(Za=[]),t=$g(Za,t,r),r=Pe,(Ct===null?r.memoizedState:Ct.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?Oy:ky),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xl(t);if(t.$$typeof===$)return ln(t)}throw Error(i(438,String(t)))}function af(t){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=rf(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=j;return r.index++,a}function Js(t,r){return typeof r=="function"?r(t):r}function yu(t){var r=It();return of(r,Je,t)}function of(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var T=S=null,P=null,K=r,ne=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(Be&ae)===ae:(Br&ae)===ae){var W=K.revertLane;if(W===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===Ka&&(ne=!0);else if((Br&W)===W){K=K.next,W===Ka&&(ne=!0);continue}else ae={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(T=P=ae,S=m):P=P.next=ae,Pe.lanes|=W,Yr|=W;ae=K.action,ra&&a(m,ae),m=K.hasEagerState?K.eagerState:a(m,ae)}else W={lane:ae,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(T=P=W,S=m):P=P.next=W,Pe.lanes|=ae,Yr|=ae;K=K.next}while(K!==null&&K!==r);if(P===null?S=m:P.next=T,!Cn(m,t.memoizedState)&&(Ht=!0,ne&&(a=Ya,a!==null)))throw a;t.memoizedState=m,t.baseState=S,t.baseQueue=P,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function lf(t){var r=It(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var S=f=f.next;do m=t(m,S.action),S=S.next;while(S!==f);Cn(m,r.memoizedState)||(Ht=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function ty(t,r,a){var l=Pe,f=It(),m=Ge;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var S=!Cn((Je||f).memoizedState,a);S&&(f.memoizedState=a,Ht=!0),f=f.queue;var T=ry.bind(null,l,f,t);if(Al(2048,8,T,[t]),f.getSnapshot!==r||S||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ja(9,vu(),sy.bind(null,l,f,a,r),null),it===null)throw Error(i(349));m||(Br&124)!==0||ny(l,r,a)}return a}function ny(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=rf(),Pe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function sy(t,r,a,l){r.value=a,r.getSnapshot=l,iy(r)&&ay(t)}function ry(t,r,a){return a(function(){iy(r)&&ay(t)})}function iy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Cn(t,a)}catch{return!0}}function ay(t){var r=Ha(t,2);r!==null&&On(r,t,2)}function cf(t){var r=Sn();if(typeof t=="function"){var a=t;if(t=a(),ra){Ln(!0);try{a()}finally{Ln(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},r}function oy(t,r,a,l){return t.baseState=a,of(t,Je,typeof l=="function"?l:Js)}function Cb(t,r,a,l,f){if(Eu(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};te.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,ly(r,m)):(m.next=a.next,r.pending=a.next=m)}}function ly(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=te.T,S={};te.T=S;try{var T=a(f,l),P=te.S;P!==null&&P(S,T),cy(t,r,T)}catch(K){uf(t,r,K)}finally{te.T=m}}else try{m=a(f,l),cy(t,r,m)}catch(K){uf(t,r,K)}}function cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){uy(t,r,l)},function(l){return uf(t,r,l)}):uy(t,r,a)}function uy(t,r,a){r.status="fulfilled",r.value=a,hy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,ly(t,a)))}function uf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,hy(r),r=r.next;while(r!==l)}t.action=null}function hy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function dy(t,r){return r}function fy(t,r){if(Ge){var a=it.formState;if(a!==null){e:{var l=Pe;if(Ge){if(yt){t:{for(var f=yt,m=Ns;f.nodeType!==8;){if(!m){f=null;break t}if(f=ds(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){yt=ds(f.nextSibling),l=f.data==="F!";break e}}ea(l)}l=!1}l&&(r=a[0])}}return a=Sn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},a.queue=l,a=Dy.bind(null,Pe,l),l.dispatch=a,l=cf(!1),m=pf.bind(null,Pe,!1,l.queue),l=Sn(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=Cb.bind(null,Pe,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function my(t){var r=It();return py(r,Je,t)}function py(t,r,a){if(r=of(t,r,dy)[0],t=yu(Js)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=xl(r)}catch(S){throw S===_l?hu:S}else l=r;r=It();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Ja(9,vu(),Ib.bind(null,f,a),null)),[l,m,t]}function Ib(t,r){t.action=r}function gy(t){var r=It(),a=Je;if(a!==null)return py(r,a,t);It(),r=r.memoizedState,a=It();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ja(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=rf(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vu(){return{destroy:void 0,resource:void 0}}function yy(){return It().memoizedState}function _u(t,r,a,l){var f=Sn();l=l===void 0?null:l,Pe.flags|=t,f.memoizedState=Ja(1|r,vu(),a,l)}function Al(t,r,a,l){var f=It();l=l===void 0?null:l;var m=f.memoizedState.inst;Je!==null&&l!==null&&Jd(l,Je.memoizedState.deps)?f.memoizedState=Ja(r,m,a,l):(Pe.flags|=t,f.memoizedState=Ja(1|r,m,a,l))}function vy(t,r){_u(8390656,8,t,r)}function _y(t,r){Al(2048,8,t,r)}function Ey(t,r){return Al(4,2,t,r)}function Sy(t,r){return Al(4,4,t,r)}function by(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ty(t,r,a){a=a!=null?a.concat([t]):null,Al(4,4,by.bind(null,r,t),a)}function hf(){}function wy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Jd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function xy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Jd(r,l[1]))return l[0];if(l=t(),ra){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,r],l}function df(t,r,a){return a===void 0||(Br&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Rv(),Pe.lanes|=t,Yr|=t,a)}function Ay(t,r,a,l){return Cn(a,r)?a:Xa.current!==null?(t=df(t,a,l),Cn(t,r)||(Ht=!0),t):(Br&42)===0?(Ht=!0,t.memoizedState=a):(t=Rv(),Pe.lanes|=t,Yr|=t,r)}function Ny(t,r,a,l,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var S=te.T,T={};te.T=T,pf(t,!1,r,a);try{var P=f(),K=te.S;if(K!==null&&K(T,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ne=Ab(P,l);Nl(t,r,ne,Mn(t))}else Nl(t,r,l,Mn(t))}catch(ae){Nl(t,r,{then:function(){},status:"rejected",reason:ae},Mn())}finally{ue.p=m,te.T=S}}function jb(){}function ff(t,r,a,l){if(t.tag!==5)throw Error(i(476));var f=Ry(t).queue;Ny(t,f,r,X,a===null?jb:function(){return Cy(t),a(l)})}function Ry(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:X},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Cy(t){var r=Ry(t).next.queue;Nl(t,r,{},Mn())}function mf(){return ln(Gl)}function Iy(){return It().memoizedState}function jy(){return It().memoizedState}function Db(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();t=qr(a);var l=zr(r,t,a);l!==null&&(On(l,r,a),Sl(l,r,a)),r={cache:Fd()},t.payload=r;return}r=r.return}}function Pb(t,r,a){var l=Mn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Eu(t)?Py(r,a):(a=Pd(t,r,a,l),a!==null&&(On(a,t,l),My(a,r,l)))}function Dy(t,r,a){var l=Mn();Nl(t,r,a,l)}function Nl(t,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))Py(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var S=r.lastRenderedState,T=m(S,a);if(f.hasEagerState=!0,f.eagerState=T,Cn(T,S))return su(t,r,f,0),it===null&&nu(),!1}catch{}finally{}if(a=Pd(t,r,f,l),a!==null)return On(a,t,l),My(a,r,l),!0}return!1}function pf(t,r,a,l){if(l={lane:2,revertLane:$f(),action:l,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(r)throw Error(i(479))}else r=Pd(t,a,l,2),r!==null&&On(r,t,2)}function Eu(t){var r=t.alternate;return t===Pe||r!==null&&r===Pe}function Py(t,r){Wa=mu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function My(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Nr(t,a)}}var Su={readContext:ln,use:gu,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},Oy={readContext:ln,use:gu,useCallback:function(t,r){return Sn().memoizedState=[t,r===void 0?null:r],t},useContext:ln,useEffect:vy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,_u(4194308,4,by.bind(null,r,t),a)},useLayoutEffect:function(t,r){return _u(4194308,4,t,r)},useInsertionEffect:function(t,r){_u(4,2,t,r)},useMemo:function(t,r){var a=Sn();r=r===void 0?null:r;var l=t();if(ra){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Sn();if(a!==void 0){var f=a(r);if(ra){Ln(!0);try{a(r)}finally{Ln(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=Pb.bind(null,Pe,t),[l.memoizedState,t]},useRef:function(t){var r=Sn();return t={current:t},r.memoizedState=t},useState:function(t){t=cf(t);var r=t.queue,a=Dy.bind(null,Pe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:hf,useDeferredValue:function(t,r){var a=Sn();return df(a,t,r)},useTransition:function(){var t=cf(!1);return t=Ny.bind(null,Pe,t.queue,!0,!1),Sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Pe,f=Sn();if(Ge){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),it===null)throw Error(i(349));(Be&124)!==0||ny(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,vy(ry.bind(null,l,m,t),[t]),l.flags|=2048,Ja(9,vu(),sy.bind(null,l,m,a,r),null),a},useId:function(){var t=Sn(),r=it.identifierPrefix;if(Ge){var a=Xs,l=Ys;a=(l&~(1<<32-mn(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=pu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=Nb++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:mf,useFormState:fy,useActionState:fy,useOptimistic:function(t){var r=Sn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=pf.bind(null,Pe,!0,a),a.dispatch=r,[t,r]},useMemoCache:af,useCacheRefresh:function(){return Sn().memoizedState=Db.bind(null,Pe)}},ky={readContext:ln,use:gu,useCallback:wy,useContext:ln,useEffect:_y,useImperativeHandle:Ty,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:xy,useReducer:yu,useRef:yy,useState:function(){return yu(Js)},useDebugValue:hf,useDeferredValue:function(t,r){var a=It();return Ay(a,Je.memoizedState,t,r)},useTransition:function(){var t=yu(Js)[0],r=It().memoizedState;return[typeof t=="boolean"?t:xl(t),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:mf,useFormState:my,useActionState:my,useOptimistic:function(t,r){var a=It();return oy(a,Je,t,r)},useMemoCache:af,useCacheRefresh:jy},Mb={readContext:ln,use:gu,useCallback:wy,useContext:ln,useEffect:_y,useImperativeHandle:Ty,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:xy,useReducer:lf,useRef:yy,useState:function(){return lf(Js)},useDebugValue:hf,useDeferredValue:function(t,r){var a=It();return Je===null?df(a,t,r):Ay(a,Je.memoizedState,t,r)},useTransition:function(){var t=lf(Js)[0],r=It().memoizedState;return[typeof t=="boolean"?t:xl(t),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:mf,useFormState:gy,useActionState:gy,useOptimistic:function(t,r){var a=It();return Je!==null?oy(a,Je,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:af,useCacheRefresh:jy},eo=null,Rl=0;function bu(t){var r=Rl;return Rl+=1,eo===null&&(eo=[]),$g(eo,t,r)}function Cl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Tu(t,r){throw r.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Vy(t){var r=t._init;return r(t._payload)}function Ly(t){function r(z,L){if(t){var G=z.deletions;G===null?(z.deletions=[L],z.flags|=16):G.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Ks(z,L),z.index=0,z.sibling=null,z}function m(z,L,G){return z.index=G,t?(G=z.alternate,G!==null?(G=G.index,G<L?(z.flags|=67108866,L):G):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function S(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function T(z,L,G,se){return L===null||L.tag!==6?(L=Od(G,z.mode,se),L.return=z,L):(L=f(L,G),L.return=z,L)}function P(z,L,G,se){var _e=G.type;return _e===U?ne(z,L,G.props.children,se,G.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Vy(_e)===L.type)?(L=f(L,G.props),Cl(L,G),L.return=z,L):(L=iu(G.type,G.key,G.props,null,z.mode,se),Cl(L,G),L.return=z,L)}function K(z,L,G,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=kd(G,z.mode,se),L.return=z,L):(L=f(L,G.children||[]),L.return=z,L)}function ne(z,L,G,se,_e){return L===null||L.tag!==7?(L=Xi(G,z.mode,se,_e),L.return=z,L):(L=f(L,G),L.return=z,L)}function ae(z,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Od(""+L,z.mode,G),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return G=iu(L.type,L.key,L.props,null,z.mode,G),Cl(G,L),G.return=z,G;case C:return L=kd(L,z.mode,G),L.return=z,L;case w:var se=L._init;return L=se(L._payload),ae(z,L,G)}if(De(L)||q(L))return L=Xi(L,z.mode,G,null),L.return=z,L;if(typeof L.then=="function")return ae(z,bu(L),G);if(L.$$typeof===$)return ae(z,cu(z,L),G);Tu(z,L)}return null}function W(z,L,G,se){var _e=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:T(z,L,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return G.key===_e?P(z,L,G,se):null;case C:return G.key===_e?K(z,L,G,se):null;case w:return _e=G._init,G=_e(G._payload),W(z,L,G,se)}if(De(G)||q(G))return _e!==null?null:ne(z,L,G,se,null);if(typeof G.then=="function")return W(z,L,bu(G),se);if(G.$$typeof===$)return W(z,L,cu(z,G),se);Tu(z,G)}return null}function Z(z,L,G,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get(G)||null,T(L,z,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return z=z.get(se.key===null?G:se.key)||null,P(L,z,se,_e);case C:return z=z.get(se.key===null?G:se.key)||null,K(L,z,se,_e);case w:var Oe=se._init;return se=Oe(se._payload),Z(z,L,G,se,_e)}if(De(se)||q(se))return z=z.get(G)||null,ne(L,z,se,_e,null);if(typeof se.then=="function")return Z(z,L,G,bu(se),_e);if(se.$$typeof===$)return Z(z,L,G,cu(L,se),_e);Tu(L,se)}return null}function Ne(z,L,G,se){for(var _e=null,Oe=null,Se=L,we=L=0,Qt=null;Se!==null&&we<G.length;we++){Se.index>we?(Qt=Se,Se=null):Qt=Se.sibling;var He=W(z,Se,G[we],se);if(He===null){Se===null&&(Se=Qt);break}t&&Se&&He.alternate===null&&r(z,Se),L=m(He,L,we),Oe===null?_e=He:Oe.sibling=He,Oe=He,Se=Qt}if(we===G.length)return a(z,Se),Ge&&Zi(z,we),_e;if(Se===null){for(;we<G.length;we++)Se=ae(z,G[we],se),Se!==null&&(L=m(Se,L,we),Oe===null?_e=Se:Oe.sibling=Se,Oe=Se);return Ge&&Zi(z,we),_e}for(Se=l(Se);we<G.length;we++)Qt=Z(Se,z,we,G[we],se),Qt!==null&&(t&&Qt.alternate!==null&&Se.delete(Qt.key===null?we:Qt.key),L=m(Qt,L,we),Oe===null?_e=Qt:Oe.sibling=Qt,Oe=Qt);return t&&Se.forEach(function(ri){return r(z,ri)}),Ge&&Zi(z,we),_e}function Te(z,L,G,se){if(G==null)throw Error(i(151));for(var _e=null,Oe=null,Se=L,we=L=0,Qt=null,He=G.next();Se!==null&&!He.done;we++,He=G.next()){Se.index>we?(Qt=Se,Se=null):Qt=Se.sibling;var ri=W(z,Se,He.value,se);if(ri===null){Se===null&&(Se=Qt);break}t&&Se&&ri.alternate===null&&r(z,Se),L=m(ri,L,we),Oe===null?_e=ri:Oe.sibling=ri,Oe=ri,Se=Qt}if(He.done)return a(z,Se),Ge&&Zi(z,we),_e;if(Se===null){for(;!He.done;we++,He=G.next())He=ae(z,He.value,se),He!==null&&(L=m(He,L,we),Oe===null?_e=He:Oe.sibling=He,Oe=He);return Ge&&Zi(z,we),_e}for(Se=l(Se);!He.done;we++,He=G.next())He=Z(Se,z,we,He.value,se),He!==null&&(t&&He.alternate!==null&&Se.delete(He.key===null?we:He.key),L=m(He,L,we),Oe===null?_e=He:Oe.sibling=He,Oe=He);return t&&Se.forEach(function(OT){return r(z,OT)}),Ge&&Zi(z,we),_e}function tt(z,L,G,se){if(typeof G=="object"&&G!==null&&G.type===U&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case x:e:{for(var _e=G.key;L!==null;){if(L.key===_e){if(_e=G.type,_e===U){if(L.tag===7){a(z,L.sibling),se=f(L,G.props.children),se.return=z,z=se;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Vy(_e)===L.type){a(z,L.sibling),se=f(L,G.props),Cl(se,G),se.return=z,z=se;break e}a(z,L);break}else r(z,L);L=L.sibling}G.type===U?(se=Xi(G.props.children,z.mode,se,G.key),se.return=z,z=se):(se=iu(G.type,G.key,G.props,null,z.mode,se),Cl(se,G),se.return=z,z=se)}return S(z);case C:e:{for(_e=G.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a(z,L.sibling),se=f(L,G.children||[]),se.return=z,z=se;break e}else{a(z,L);break}else r(z,L);L=L.sibling}se=kd(G,z.mode,se),se.return=z,z=se}return S(z);case w:return _e=G._init,G=_e(G._payload),tt(z,L,G,se)}if(De(G))return Ne(z,L,G,se);if(q(G)){if(_e=q(G),typeof _e!="function")throw Error(i(150));return G=_e.call(G),Te(z,L,G,se)}if(typeof G.then=="function")return tt(z,L,bu(G),se);if(G.$$typeof===$)return tt(z,L,cu(z,G),se);Tu(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a(z,L.sibling),se=f(L,G),se.return=z,z=se):(a(z,L),se=Od(G,z.mode,se),se.return=z,z=se),S(z)):a(z,L)}return function(z,L,G,se){try{Rl=0;var _e=tt(z,L,G,se);return eo=null,_e}catch(Se){if(Se===_l||Se===hu)throw Se;var Oe=In(29,Se,null,z.mode);return Oe.lanes=se,Oe.return=z,Oe}finally{}}}var to=Ly(!0),Uy=Ly(!1),$n=ie(null),Rs=null;function Fr(t){var r=t.alternate;ee(Ut,Ut.current&1),ee($n,t),Rs===null&&(r===null||Xa.current!==null||r.memoizedState!==null)&&(Rs=t)}function qy(t){if(t.tag===22){if(ee(Ut,Ut.current),ee($n,t),Rs===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Rs=t)}}else Hr()}function Hr(){ee(Ut,Ut.current),ee($n,$n.current)}function er(t){fe($n),Rs===t&&(Rs=null),fe(Ut)}var Ut=ie(0);function wu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||im(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function gf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var yf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Mn(),f=qr(l);f.payload=r,a!=null&&(f.callback=a),r=zr(t,f,l),r!==null&&(On(r,t,l),Sl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Mn(),f=qr(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=zr(t,f,l),r!==null&&(On(r,t,l),Sl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Mn(),l=qr(a);l.tag=2,r!=null&&(l.callback=r),r=zr(t,l,a),r!==null&&(On(r,t,a),Sl(r,t,a))}};function zy(t,r,a,l,f,m,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,S):r.prototype&&r.prototype.isPureReactComponent?!hl(a,l)||!hl(f,m):!0}function By(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&yf.enqueueReplaceState(r,r.state,null)}function ia(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Fy(t){xu(t)}function Hy(t){console.error(t)}function Gy(t){xu(t)}function Au(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Qy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function vf(t,r,a){return a=qr(a),a.tag=3,a.payload={element:null},a.callback=function(){Au(t,r)},a}function $y(t){return t=qr(t),t.tag=3,t}function Ky(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Qy(r,a,l)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Qy(r,a,l),typeof f!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Ob(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&gl(r,a,f,!0),a=$n.current,a!==null){switch(a.tag){case 13:return Rs===null?Bf():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Qd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Hf(t,l,f)),!1;case 22:return a.flags|=65536,l===Qd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Hf(t,l,f)),!1}throw Error(i(435,a.tag))}return Hf(t,l,f),Bf(),!1}if(Ge)return r=$n.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Ud&&(t=Error(i(422),{cause:l}),pl(Fn(t,a)))):(l!==Ud&&(r=Error(i(423),{cause:l}),pl(Fn(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Fn(l,a),f=vf(t.stateNode,l,f),Yd(t,f),vt!==4&&(vt=2)),!1;var m=Error(i(520),{cause:l});if(m=Fn(m,a),kl===null?kl=[m]:kl.push(m),vt!==4&&(vt=2),r===null)return!0;l=Fn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=vf(a.stateNode,l,t),Yd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xr===null||!Xr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=$y(f),Ky(f,t,a,l),Yd(a,f),!1}a=a.return}while(a!==null);return!1}var Yy=Error(i(461)),Ht=!1;function Xt(t,r,a,l){r.child=t===null?Uy(r,null,a,l):to(r,t.child,a,l)}function Xy(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var S={};for(var T in l)T!=="ref"&&(S[T]=l[T])}else S=l;return na(r),l=ef(t,r,a,S,m,f),T=tf(),t!==null&&!Ht?(nf(t,r,f),tr(t,r,f)):(Ge&&T&&Vd(r),r.flags|=1,Xt(t,r,l,f),r.child)}function Wy(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Md(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Zy(t,r,m,l,f)):(t=iu(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Af(t,f)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:hl,a(S,l)&&t.ref===r.ref)return tr(t,r,f)}return r.flags|=1,t=Ks(m,l),t.ref=r.ref,t.return=r,r.child=t}function Zy(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(hl(m,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=m,Af(t,f))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,tr(t,r,f)}return _f(t,r,a,l,f)}function Jy(t,r,a){var l=r.pendingProps,f=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(f=r.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return ev(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&uu(r,m!==null?m.cachePool:null),m!==null?Zg(r,m):Wd(),qy(r);else return r.lanes=r.childLanes=536870912,ev(t,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(uu(r,m.cachePool),Zg(r,m),Hr(),r.memoizedState=null):(t!==null&&uu(r,null),Wd(),Hr());return Xt(t,r,f,a),r.child}function ev(t,r,a,l){var f=Gd();return f=f===null?null:{parent:Lt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&uu(r,null),Wd(),qy(r),t!==null&&gl(t,r,l,!0),null}function Nu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function _f(t,r,a,l,f){return na(r),a=ef(t,r,a,l,void 0,f),l=tf(),t!==null&&!Ht?(nf(t,r,f),tr(t,r,f)):(Ge&&l&&Vd(r),r.flags|=1,Xt(t,r,a,f),r.child)}function tv(t,r,a,l,f,m){return na(r),r.updateQueue=null,a=ey(r,l,a,f),Jg(t),l=tf(),t!==null&&!Ht?(nf(t,r,m),tr(t,r,m)):(Ge&&l&&Vd(r),r.flags|=1,Xt(t,r,a,m),r.child)}function nv(t,r,a,l,f){if(na(r),r.stateNode===null){var m=Ga,S=a.contextType;typeof S=="object"&&S!==null&&(m=ln(S)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=yf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},$d(r),S=a.contextType,m.context=typeof S=="object"&&S!==null?ln(S):Ga,m.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(gf(r,a,S,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&yf.enqueueReplaceState(m,m.state,null),Tl(r,l,m,f),bl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var T=r.memoizedProps,P=ia(a,T);m.props=P;var K=m.context,ne=a.contextType;S=Ga,typeof ne=="object"&&ne!==null&&(S=ln(ne));var ae=a.getDerivedStateFromProps;ne=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||K!==S)&&By(r,m,l,S),Ur=!1;var W=r.memoizedState;m.state=W,Tl(r,l,m,f),bl(),K=r.memoizedState,T||W!==K||Ur?(typeof ae=="function"&&(gf(r,a,ae,l),K=r.memoizedState),(P=Ur||zy(r,a,P,l,W,K,S))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=K),m.props=l,m.state=K,m.context=S,l=P):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Kd(t,r),S=r.memoizedProps,ne=ia(a,S),m.props=ne,ae=r.pendingProps,W=m.context,K=a.contextType,P=Ga,typeof K=="object"&&K!==null&&(P=ln(K)),T=a.getDerivedStateFromProps,(K=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==ae||W!==P)&&By(r,m,l,P),Ur=!1,W=r.memoizedState,m.state=W,Tl(r,l,m,f),bl();var Z=r.memoizedState;S!==ae||W!==Z||Ur||t!==null&&t.dependencies!==null&&lu(t.dependencies)?(typeof T=="function"&&(gf(r,a,T,l),Z=r.memoizedState),(ne=Ur||zy(r,a,ne,l,W,Z,P)||t!==null&&t.dependencies!==null&&lu(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,P)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),m.props=l,m.state=Z,m.context=P,l=ne):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Nu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=to(r,t.child,null,f),r.child=to(r,null,a,f)):Xt(t,r,a,f),r.memoizedState=m.state,t=r.child):t=tr(t,r,f),t}function sv(t,r,a,l){return ml(),r.flags|=256,Xt(t,r,a,l),r.child}var Ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:Hg()}}function bf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Kn),t}function rv(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,S;if((S=m)||(S=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),S&&(f=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ge){if(f?Fr(r):Hr(),Ge){var T=yt,P;if(P=T){e:{for(P=T,T=Ns;P.nodeType!==8;){if(!T){T=null;break e}if(P=ds(P.nextSibling),P===null){T=null;break e}}T=P}T!==null?(r.memoizedState={dehydrated:T,treeContext:Wi!==null?{id:Ys,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},P=In(18,null,null,0),P.stateNode=T,P.return=r,r.child=P,vn=r,yt=null,P=!0):P=!1}P||ea(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return im(T)?r.lanes=32:r.lanes=536870912,null;er(r)}return T=l.children,l=l.fallback,f?(Hr(),f=r.mode,T=Ru({mode:"hidden",children:T},f),l=Xi(l,f,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,f=r.child,f.memoizedState=Sf(a),f.childLanes=bf(t,S,a),r.memoizedState=Ef,l):(Fr(r),Tf(r,T))}if(P=t.memoizedState,P!==null&&(T=P.dehydrated,T!==null)){if(m)r.flags&256?(Fr(r),r.flags&=-257,r=wf(t,r,a)):r.memoizedState!==null?(Hr(),r.child=t.child,r.flags|=128,r=null):(Hr(),f=l.fallback,T=r.mode,l=Ru({mode:"visible",children:l.children},T),f=Xi(f,T,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,to(r,t.child,null,a),l=r.child,l.memoizedState=Sf(a),l.childLanes=bf(t,S,a),r.memoizedState=Ef,r=f);else if(Fr(r),im(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var K=S.dgst;S=K,l=Error(i(419)),l.stack="",l.digest=S,pl({value:l,source:null,stack:null}),r=wf(t,r,a)}else if(Ht||gl(t,r,a,!1),S=(a&t.childLanes)!==0,Ht||S){if(S=it,S!==null&&(l=a&-a,l=(l&42)!==0?1:Ko(l),l=(l&(S.suspendedLanes|a))!==0?0:l,l!==0&&l!==P.retryLane))throw P.retryLane=l,Ha(t,l),On(S,t,l),Yy;T.data==="$?"||Bf(),r=wf(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=P.treeContext,yt=ds(T.nextSibling),vn=r,Ge=!0,Ji=null,Ns=!1,t!==null&&(Gn[Qn++]=Ys,Gn[Qn++]=Xs,Gn[Qn++]=Wi,Ys=t.id,Xs=t.overflow,Wi=r),r=Tf(r,l.children),r.flags|=4096);return r}return f?(Hr(),f=l.fallback,T=r.mode,P=t.child,K=P.sibling,l=Ks(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,K!==null?f=Ks(K,f):(f=Xi(f,T,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,T=t.child.memoizedState,T===null?T=Sf(a):(P=T.cachePool,P!==null?(K=Lt._currentValue,P=P.parent!==K?{parent:K,pool:K}:P):P=Hg(),T={baseLanes:T.baseLanes|a,cachePool:P}),f.memoizedState=T,f.childLanes=bf(t,S,a),r.memoizedState=Ef,l):(Fr(r),a=t.child,t=a.sibling,a=Ks(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(S=r.deletions,S===null?(r.deletions=[t],r.flags|=16):S.push(t)),r.child=a,r.memoizedState=null,a)}function Tf(t,r){return r=Ru({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ru(t,r){return t=In(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function wf(t,r,a){return to(r,t.child,null,a),t=Tf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function iv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),zd(t.return,r,a)}function xf(t,r,a,l,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function av(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;if(Xt(t,r,l.children,a),l=Ut.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iv(t,a,r);else if(t.tag===19)iv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Ut,l),f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&wu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),xf(r,!1,f,a,m);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&wu(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}xf(r,!0,a,null,m);break;case"together":xf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function tr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Yr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(gl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ks(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ks(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Af(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lu(t)))}function kb(t,r,a){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),Lr(r,Lt,t.memoizedState.cache),ml();break;case 27:case 5:Ho(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:Lr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Fr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?rv(t,r,a):(Fr(r),t=tr(t,r,a),t!==null?t.sibling:null);Fr(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(gl(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return av(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(Ut,Ut.current),l)break;return null;case 22:case 23:return r.lanes=0,Jy(t,r,a);case 24:Lr(r,Lt,t.memoizedState.cache)}return tr(t,r,a)}function ov(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!Af(t,a)&&(r.flags&128)===0)return Ht=!1,kb(t,r,a);Ht=(t.flags&131072)!==0}else Ht=!1,Ge&&(r.flags&1048576)!==0&&Vg(r,ou,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Md(l)?(t=ia(l,t),r.tag=1,r=nv(null,r,l,t,a)):(r.tag=0,r=_f(null,r,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===H){r.tag=11,r=Xy(null,r,l,t,a);break e}else if(f===R){r.tag=14,r=Wy(null,r,l,t,a);break e}}throw r=he(l)||l,Error(i(306,r,""))}}return r;case 0:return _f(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ia(l,r.pendingProps),nv(t,r,l,f,a);case 3:e:{if($e(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Kd(t,r),Tl(r,l,null,a);var S=r.memoizedState;if(l=S.cache,Lr(r,Lt,l),l!==m.cache&&Bd(r,[Lt],a,!0),bl(),l=S.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=sv(t,r,l,a);break e}else if(l!==f){f=Fn(Error(i(424)),r),pl(f),r=sv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=ds(t.firstChild),vn=r,Ge=!0,Ji=null,Ns=!0,a=Uy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ml(),l===f){r=tr(t,r,a);break e}Xt(t,r,l,a)}r=r.child}return r;case 26:return Nu(t,r),t===null?(a=h_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ge||(a=r.type,t=r.pendingProps,l=Bu(ye.current).createElement(a),l[bt]=r,l[Yt]=t,Zt(l,a,t),Tt(l),r.stateNode=l):r.memoizedState=h_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ho(r),t===null&&Ge&&(l=r.stateNode=l_(r.type,r.pendingProps,ye.current),vn=r,Ns=!0,f=yt,Jr(r.type)?(am=f,yt=ds(l.firstChild)):yt=f),Xt(t,r,r.pendingProps.children,a),Nu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ge&&((f=l=yt)&&(l=uT(l,r.type,r.pendingProps,Ns),l!==null?(r.stateNode=l,vn=r,yt=ds(l.firstChild),Ns=!1,f=!0):f=!1),f||ea(r)),Ho(r),f=r.type,m=r.pendingProps,S=t!==null?t.memoizedProps:null,l=m.children,nm(f,m)?l=null:S!==null&&nm(f,S)&&(r.flags|=32),r.memoizedState!==null&&(f=ef(t,r,Rb,null,null,a),Gl._currentValue=f),Nu(t,r),Xt(t,r,l,a),r.child;case 6:return t===null&&Ge&&((t=a=yt)&&(a=hT(a,r.pendingProps,Ns),a!==null?(r.stateNode=a,vn=r,yt=null,t=!0):t=!1),t||ea(r)),null;case 13:return rv(t,r,a);case 4:return $e(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=to(r,null,l,a):Xt(t,r,l,a),r.child;case 11:return Xy(t,r,r.type,r.pendingProps,a);case 7:return Xt(t,r,r.pendingProps,a),r.child;case 8:return Xt(t,r,r.pendingProps.children,a),r.child;case 12:return Xt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Lr(r,r.type,l.value),Xt(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,na(r),f=ln(f),l=l(f),r.flags|=1,Xt(t,r,l,a),r.child;case 14:return Wy(t,r,r.type,r.pendingProps,a);case 15:return Zy(t,r,r.type,r.pendingProps,a);case 19:return av(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ru(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ks(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Jy(t,r,a);case 24:return na(r),l=ln(Lt),t===null?(f=Gd(),f===null&&(f=it,m=Fd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},$d(r),Lr(r,Lt,f)):((t.lanes&a)!==0&&(Kd(t,r),Tl(r,null,null,a),bl()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Lr(r,Lt,l)):(l=m.cache,Lr(r,Lt,l),l!==f.cache&&Bd(r,[Lt],a,!0))),Xt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function nr(t){t.flags|=4}function lv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!g_(r)){if(r=$n.current,r!==null&&((Be&4194048)===Be?Rs!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==Rs))throw El=Qd,Gg;t.flags|=8192}}function Cu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?xr():536870912,t.lanes|=r,io|=r)}function Il(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function Vb(t,r,a){var l=r.pendingProps;switch(Ld(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zs(Lt),ns(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(fl(r)?nr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qg())),pt(r),null;case 26:return a=r.memoizedState,t===null?(nr(r),a!==null?(pt(r),lv(r,a)):(pt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(nr(r),pt(r),lv(r,a)):(pt(r),r.flags&=-16777217):(t.memoizedProps!==l&&nr(r),pt(r),r.flags&=-16777217),null;case 27:wa(r),a=ye.current;var f=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&nr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}t=ce.current,fl(r)?Lg(r):(t=l_(f,l,a),r.stateNode=t,nr(r))}return pt(r),null;case 5:if(wa(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&nr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}if(t=ce.current,fl(r))Lg(r);else{switch(f=Bu(ye.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[bt]=r,t[Yt]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=t;e:switch(Zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&nr(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&nr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=ye.current,fl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=vn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[bt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||t_(t.nodeValue,a)),t||ea(r)}else t=Bu(t).createTextNode(l),t[bt]=r,r.stateNode=t}return pt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=fl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[bt]=r}else ml(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),f=!1}else f=qg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(er(r),r):(er(r),null)}if(er(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Cu(r,r.updateQueue),pt(r),null;case 4:return ns(),t===null&&Wf(r.stateNode.containerInfo),pt(r),null;case 10:return Zs(r.type),pt(r),null;case 19:if(fe(Ut),f=r.memoizedState,f===null)return pt(r),null;if(l=(r.flags&128)!==0,m=f.rendering,m===null)if(l)Il(f,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=wu(t),m!==null){for(r.flags|=128,Il(f,!1),t=m.updateQueue,r.updateQueue=t,Cu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)kg(a,t),a=a.sibling;return ee(Ut,Ut.current&1|2),r.child}t=t.sibling}f.tail!==null&&En()>Du&&(r.flags|=128,l=!0,Il(f,!1),r.lanes=4194304)}else{if(!l)if(t=wu(m),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Cu(r,t),Il(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ge)return pt(r),null}else 2*En()-f.renderingStartTime>Du&&a!==536870912&&(r.flags|=128,l=!0,Il(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(t=f.last,t!==null?t.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=En(),r.sibling=null,t=Ut.current,ee(Ut,l?t&1|2:t&1),r):(pt(r),null);case 22:case 23:return er(r),Zd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Cu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&fe(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Zs(Lt),pt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Lb(t,r){switch(Ld(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Zs(Lt),ns(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return wa(r),null;case 13:if(er(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ml()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return fe(Ut),null;case 4:return ns(),null;case 10:return Zs(r.type),null;case 22:case 23:return er(r),Zd(),t!==null&&fe(sa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Zs(Lt),null;case 25:return null;default:return null}}function cv(t,r){switch(Ld(r),r.tag){case 3:Zs(Lt),ns();break;case 26:case 27:case 5:wa(r);break;case 4:ns();break;case 13:er(r);break;case 19:fe(Ut);break;case 10:Zs(r.type);break;case 22:case 23:er(r),Zd(),t!==null&&fe(sa);break;case 24:Zs(Lt)}}function jl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,S=a.inst;l=m(),S.destroy=l}a=a.next}while(a!==f)}}catch(T){st(r,r.return,T)}}function Gr(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var S=l.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,f=r;var P=a,K=T;try{K()}catch(ne){st(f,P,ne)}}}l=l.next}while(l!==m)}}catch(ne){st(r,r.return,ne)}}function uv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Wg(r,a)}catch(l){st(t,t.return,l)}}}function hv(t,r,a){a.props=ia(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,r,l)}}function Dl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){st(t,r,f)}}function Cs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){st(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(t,r,f)}else a.current=null}function dv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){st(t,t.return,f)}}function Nf(t,r,a){try{var l=t.stateNode;iT(l,t.type,a,r),l[Yt]=r}catch(f){st(t,t.return,f)}}function fv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Jr(t.type)||t.tag===4}function Rf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Jr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=zu));else if(l!==4&&(l===27&&Jr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Cf(t,r,a),t=t.sibling;t!==null;)Cf(t,r,a),t=t.sibling}function Iu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Jr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,r,a),t=t.sibling;t!==null;)Iu(t,r,a),t=t.sibling}function mv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Zt(r,l,a),r[bt]=t,r[Yt]=a}catch(m){st(t,t.return,m)}}var sr=!1,At=!1,If=!1,pv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Ub(t,r){if(t=t.containerInfo,em=Ku,t=Ag(t),Nd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,T=-1,P=-1,K=0,ne=0,ae=t,W=null;t:for(;;){for(var Z;ae!==a||f!==0&&ae.nodeType!==3||(T=S+f),ae!==m||l!==0&&ae.nodeType!==3||(P=S+l),ae.nodeType===3&&(S+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)W=ae,ae=Z;for(;;){if(ae===t)break t;if(W===a&&++K===f&&(T=S),W===m&&++ne===l&&(P=S),(Z=ae.nextSibling)!==null)break;ae=W,W=ae.parentNode}ae=Z}a=T===-1||P===-1?null:{start:T,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(tm={focusedElem:t,selectionRange:a},Ku=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ne=ia(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){st(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)rm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}}function gv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(t,a),l&4&&jl(5,a);break;case 1:if(Qr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(S){st(a,a.return,S)}else{var f=ia(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(S){st(a,a.return,S)}}l&64&&uv(a),l&512&&Dl(a,a.return);break;case 3:if(Qr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wg(t,r)}catch(S){st(a,a.return,S)}}break;case 27:r===null&&l&4&&mv(a);case 26:case 5:Qr(t,a),r===null&&l&4&&dv(a),l&512&&Dl(a,a.return);break;case 12:Qr(t,a);break;case 13:Qr(t,a),l&4&&_v(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Kb.bind(null,a),dT(t,a))));break;case 22:if(l=a.memoizedState!==null||sr,!l){r=r!==null&&r.memoizedState!==null||At,f=sr;var m=At;sr=l,(At=r)&&!m?$r(t,a,(a.subtreeFlags&8772)!==0):Qr(t,a),sr=f,At=m}break;case 30:break;default:Qr(t,a)}}function yv(t){var r=t.alternate;r!==null&&(t.alternate=null,yv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ca(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,bn=!1;function rr(t,r,a){for(a=a.child;a!==null;)vv(t,r,a),a=a.sibling}function vv(t,r,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(br,a)}catch{}switch(a.tag){case 26:At||Cs(a,r),rr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||Cs(a,r);var l=dt,f=bn;Jr(a.type)&&(dt=a.stateNode,bn=!1),rr(t,r,a),zl(a.stateNode),dt=l,bn=f;break;case 5:At||Cs(a,r);case 6:if(l=dt,f=bn,dt=null,rr(t,r,a),dt=l,bn=f,dt!==null)if(bn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(m){st(a,r,m)}else try{dt.removeChild(a.stateNode)}catch(m){st(a,r,m)}break;case 18:dt!==null&&(bn?(t=dt,a_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Yl(t)):a_(dt,a.stateNode));break;case 4:l=dt,f=bn,dt=a.stateNode.containerInfo,bn=!0,rr(t,r,a),dt=l,bn=f;break;case 0:case 11:case 14:case 15:At||Gr(2,a,r),At||Gr(4,a,r),rr(t,r,a);break;case 1:At||(Cs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&hv(a,r,l)),rr(t,r,a);break;case 21:rr(t,r,a);break;case 22:At=(l=At)||a.memoizedState!==null,rr(t,r,a),At=l;break;default:rr(t,r,a)}}function _v(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yl(t)}catch(a){st(r,r.return,a)}}function qb(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new pv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new pv),r;default:throw Error(i(435,t.tag))}}function jf(t,r){var a=qb(t);r.forEach(function(l){var f=Yb.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function jn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,S=r,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(Jr(T.type)){dt=T.stateNode,bn=!1;break e}break;case 5:dt=T.stateNode,bn=!1;break e;case 3:case 4:dt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(dt===null)throw Error(i(160));vv(m,S,f),dt=null,bn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ev(r,t),r=r.sibling}var hs=null;function Ev(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(r,t),Dn(t),l&4&&(Gr(3,t,t.return),jl(3,t),Gr(5,t,t.return));break;case 1:jn(r,t),Dn(t),l&512&&(At||a===null||Cs(a,a.return)),l&64&&sr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=hs;if(jn(r,t),Dn(t),l&512&&(At||a===null||Cs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Rr]||m[bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Zt(m,l,a),m[bt]=t,Tt(m),l=m;break e;case"link":var S=m_("link","href",f).get(l+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(m=S[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}m=f.createElement(l),Zt(m,l,a),f.head.appendChild(m);break;case"meta":if(S=m_("meta","content",f).get(l+(a.content||""))){for(T=0;T<S.length;T++)if(m=S[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}m=f.createElement(l),Zt(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[bt]=t,Tt(m),l=m}t.stateNode=l}else p_(f,t.type,t.stateNode);else t.stateNode=f_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?p_(f,t.type,t.stateNode):f_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:jn(r,t),Dn(t),l&512&&(At||a===null||Cs(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(jn(r,t),Dn(t),l&512&&(At||a===null||Cs(a,a.return)),t.flags&32){f=t.stateNode;try{zn(f,"")}catch(Z){st(t,t.return,Z)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Nf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(If=!0);break;case 6:if(jn(r,t),Dn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Z){st(t,t.return,Z)}}break;case 3:if(Gu=null,f=hs,hs=Fu(r.containerInfo),jn(r,t),hs=f,Dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Yl(r.containerInfo)}catch(Z){st(t,t.return,Z)}If&&(If=!1,Sv(t));break;case 4:l=hs,hs=Fu(t.stateNode.containerInfo),jn(r,t),Dn(t),hs=l;break;case 12:jn(r,t),Dn(t);break;case 13:jn(r,t),Dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vf=En()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jf(t,l)));break;case 22:f=t.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,K=sr,ne=At;if(sr=K||f,At=ne||P,jn(r,t),At=ne,sr=K,Dn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||P||sr||At||aa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(m=P.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=P.stateNode;var ae=P.memoizedProps.style,W=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;T.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){st(P,P.return,Z)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Z){st(P,P.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jf(t,a))));break;case 19:jn(r,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,jf(t,l)));break;case 30:break;case 21:break;default:jn(r,t),Dn(t)}}function Dn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(fv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=Rf(t);Iu(t,m,f);break;case 5:var S=a.stateNode;a.flags&32&&(zn(S,""),a.flags&=-33);var T=Rf(t);Iu(t,T,S);break;case 3:case 4:var P=a.stateNode.containerInfo,K=Rf(t);Cf(t,K,P);break;default:throw Error(i(161))}}catch(ne){st(t,t.return,ne)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Sv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Sv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Qr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)gv(t,r.alternate,r),r=r.sibling}function aa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Gr(4,r,r.return),aa(r);break;case 1:Cs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&hv(r,r.return,a),aa(r);break;case 27:zl(r.stateNode);case 26:case 5:Cs(r,r.return),aa(r);break;case 22:r.memoizedState===null&&aa(r);break;case 30:aa(r);break;default:aa(r)}t=t.sibling}}function $r(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,S=m.flags;switch(m.tag){case 0:case 11:case 15:$r(f,m,a),jl(4,m);break;case 1:if($r(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){st(l,l.return,K)}if(l=m,f=l.updateQueue,f!==null){var T=l.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)Xg(P[f],T)}catch(K){st(l,l.return,K)}}a&&S&64&&uv(m),Dl(m,m.return);break;case 27:mv(m);case 26:case 5:$r(f,m,a),a&&l===null&&S&4&&dv(m),Dl(m,m.return);break;case 12:$r(f,m,a);break;case 13:$r(f,m,a),a&&S&4&&_v(f,m);break;case 22:m.memoizedState===null&&$r(f,m,a),Dl(m,m.return);break;case 30:break;default:$r(f,m,a)}r=r.sibling}}function Df(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&yl(a))}function Pf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yl(t))}function Is(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bv(t,r,a,l),r=r.sibling}function bv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Is(t,r,a,l),f&2048&&jl(9,r);break;case 1:Is(t,r,a,l);break;case 3:Is(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yl(t)));break;case 12:if(f&2048){Is(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,S=m.id,T=m.onPostCommit;typeof T=="function"&&T(S,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){st(r,r.return,P)}}else Is(t,r,a,l);break;case 13:Is(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,S=r.alternate,r.memoizedState!==null?m._visibility&2?Is(t,r,a,l):Pl(t,r):m._visibility&2?Is(t,r,a,l):(m._visibility|=2,no(t,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&Df(S,r);break;case 24:Is(t,r,a,l),f&2048&&Pf(r.alternate,r);break;default:Is(t,r,a,l)}}function no(t,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,S=r,T=a,P=l,K=S.flags;switch(S.tag){case 0:case 11:case 15:no(m,S,T,P,f),jl(8,S);break;case 23:break;case 22:var ne=S.stateNode;S.memoizedState!==null?ne._visibility&2?no(m,S,T,P,f):Pl(m,S):(ne._visibility|=2,no(m,S,T,P,f)),f&&K&2048&&Df(S.alternate,S);break;case 24:no(m,S,T,P,f),f&&K&2048&&Pf(S.alternate,S);break;default:no(m,S,T,P,f)}r=r.sibling}}function Pl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Pl(a,l),f&2048&&Df(l.alternate,l);break;case 24:Pl(a,l),f&2048&&Pf(l.alternate,l);break;default:Pl(a,l)}r=r.sibling}}var Ml=8192;function so(t){if(t.subtreeFlags&Ml)for(t=t.child;t!==null;)Tv(t),t=t.sibling}function Tv(t){switch(t.tag){case 26:so(t),t.flags&Ml&&t.memoizedState!==null&&xT(hs,t.memoizedState,t.memoizedProps);break;case 5:so(t);break;case 3:case 4:var r=hs;hs=Fu(t.stateNode.containerInfo),so(t),hs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ml,Ml=16777216,so(t),Ml=r):so(t));break;default:so(t)}}function wv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ol(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Av(l,t)}wv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 0:case 11:case 15:Ol(t),t.flags&2048&&Gr(9,t,t.return);break;case 3:Ol(t);break;case 12:Ol(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ju(t)):Ol(t);break;default:Ol(t)}}function ju(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Av(l,t)}wv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Gr(8,r,r.return),ju(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ju(r));break;default:ju(r)}t=t.sibling}}function Av(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Gr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var f=l.sibling,m=l.return;if(yv(l),l===a){Gt=null;break e}if(f!==null){f.return=m,Gt=f;break e}Gt=m}}}var zb={getCacheForType:function(t){var r=ln(Lt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},Bb=typeof WeakMap=="function"?WeakMap:Map,Xe=0,it=null,Ve=null,Be=0,We=0,Pn=null,Kr=!1,ro=!1,Mf=!1,ir=0,vt=0,Yr=0,oa=0,Of=0,Kn=0,io=0,kl=null,Tn=null,kf=!1,Vf=0,Du=1/0,Pu=null,Xr=null,Wt=0,Wr=null,ao=null,oo=0,Lf=0,Uf=null,Nv=null,Vl=0,qf=null;function Mn(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(te.T!==null){var t=Ka;return t!==0?t:$f()}return zs()}function Rv(){Kn===0&&(Kn=(Be&536870912)===0||Ge?$o():536870912);var t=$n.current;return t!==null&&(t.flags|=32),Kn}function On(t,r,a){(t===it&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(lo(t,0),Zr(t,Be,Kn,!1)),St(t,a),((Xe&2)===0||t!==it)&&(t===it&&((Xe&2)===0&&(oa|=a),vt===4&&Zr(t,Be,Kn,!1)),js(t))}function Cv(t,r,a){if((Xe&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||wr(t,r),f=l?Gb(t,r):Ff(t,r,!0),m=l;do{if(f===0){ro&&!l&&Zr(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!Fb(a)){f=Ff(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var T=t;f=kl;var P=T.current.memoizedState.isDehydrated;if(P&&(lo(T,S).flags|=256),S=Ff(T,S,!1),S!==2){if(Mf&&!P){T.errorRecoveryDisabledLanes|=m,oa|=m,f=4;break e}m=Tn,Tn=f,m!==null&&(Tn===null?Tn=m:Tn.push.apply(Tn,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){lo(t,0),Zr(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Zr(l,r,Kn,!Kr);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Vf+300-En(),10<f)){if(Zr(l,r,Kn,!Kr),Un(l,0,!0)!==0)break e;l.timeoutHandle=r_(Iv.bind(null,l,a,Tn,Pu,kf,r,Kn,oa,io,Kr,m,2,-0,0),f);break e}Iv(l,a,Tn,Pu,kf,r,Kn,oa,io,Kr,m,0,-0,0)}}break}while(!0);js(t)}function Iv(t,r,a,l,f,m,S,T,P,K,ne,ae,W,Z){if(t.timeoutHandle=-1,ae=r.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:wT},Tv(r),ae=AT(),ae!==null)){t.cancelPendingCommit=ae(Vv.bind(null,t,r,m,a,l,f,S,T,P,ne,1,W,Z)),Zr(t,m,S,!K);return}Vv(t,r,m,a,l,f,S,T,P)}function Fb(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Cn(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zr(t,r,a,l){r&=~Of,r&=~oa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-mn(f),S=1<<m;l[m]=-1,f&=~S}a!==0&&Ar(t,a,r)}function Mu(){return(Xe&6)===0?(Ll(0),!1):!0}function zf(){if(Ve!==null){if(We===0)var t=Ve.return;else t=Ve,Ws=ta=null,sf(t),eo=null,Rl=0,t=Ve;for(;t!==null;)cv(t.alternate,t),t=t.return;Ve=null}}function lo(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,oT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),zf(),it=t,Ve=a=Ks(t.current,null),Be=r,We=0,Pn=null,Kr=!1,ro=wr(t,r),Mf=!1,io=Kn=Of=oa=Yr=vt=0,Tn=kl=null,kf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-mn(l),m=1<<f;r|=t[f],l&=~m}return ir=r,nu(),a}function jv(t,r){Pe=null,te.H=Su,r===_l||r===hu?(r=Kg(),We=3):r===Gg?(r=Kg(),We=4):We=r===Yy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pn=r,Ve===null&&(vt=1,Au(t,Fn(r,t.current)))}function Dv(){var t=te.H;return te.H=Su,t===null?Su:t}function Pv(){var t=te.A;return te.A=zb,t}function Bf(){vt=4,Kr||(Be&4194048)!==Be&&$n.current!==null||(ro=!0),(Yr&134217727)===0&&(oa&134217727)===0||it===null||Zr(it,Be,Kn,!1)}function Ff(t,r,a){var l=Xe;Xe|=2;var f=Dv(),m=Pv();(it!==t||Be!==r)&&(Pu=null,lo(t,r)),r=!1;var S=vt;e:do try{if(We!==0&&Ve!==null){var T=Ve,P=Pn;switch(We){case 8:zf(),S=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(r=!0);var K=We;if(We=0,Pn=null,co(t,T,P,K),a&&ro){S=0;break e}break;default:K=We,We=0,Pn=null,co(t,T,P,K)}}Hb(),S=vt;break}catch(ne){jv(t,ne)}while(!0);return r&&t.shellSuspendCounter++,Ws=ta=null,Xe=l,te.H=f,te.A=m,Ve===null&&(it=null,Be=0,nu()),S}function Hb(){for(;Ve!==null;)Mv(Ve)}function Gb(t,r){var a=Xe;Xe|=2;var l=Dv(),f=Pv();it!==t||Be!==r?(Pu=null,Du=En()+500,lo(t,r)):ro=wr(t,r);e:do try{if(We!==0&&Ve!==null){r=Ve;var m=Pn;t:switch(We){case 1:We=0,Pn=null,co(t,r,m,1);break;case 2:case 9:if(Qg(m)){We=0,Pn=null,Ov(r);break}r=function(){We!==2&&We!==9||it!==t||(We=7),js(t)},m.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Qg(m)?(We=0,Pn=null,Ov(r)):(We=0,Pn=null,co(t,r,m,7));break;case 5:var S=null;switch(Ve.tag){case 26:S=Ve.memoizedState;case 5:case 27:var T=Ve;if(!S||g_(S)){We=0,Pn=null;var P=T.sibling;if(P!==null)Ve=P;else{var K=T.return;K!==null?(Ve=K,Ou(K)):Ve=null}break t}}We=0,Pn=null,co(t,r,m,5);break;case 6:We=0,Pn=null,co(t,r,m,6);break;case 8:zf(),vt=6;break e;default:throw Error(i(462))}}Qb();break}catch(ne){jv(t,ne)}while(!0);return Ws=ta=null,te.H=l,te.A=f,Xe=a,Ve!==null?0:(it=null,Be=0,nu(),vt)}function Qb(){for(;Ve!==null&&!gd();)Mv(Ve)}function Mv(t){var r=ov(t.alternate,t,ir);t.memoizedProps=t.pendingProps,r===null?Ou(t):Ve=r}function Ov(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=tv(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=tv(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:sf(r);default:cv(a,r),r=Ve=kg(r,ir),r=ov(a,r,ir)}t.memoizedProps=t.pendingProps,r===null?Ou(t):Ve=r}function co(t,r,a,l){Ws=ta=null,sf(r),eo=null,Rl=0;var f=r.return;try{if(Ob(t,f,r,a,Be)){vt=1,Au(t,Fn(a,t.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;vt=1,Au(t,Fn(a,t.current)),Ve=null;return}r.flags&32768?(Ge||l===1?t=!0:ro||(Be&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),kv(r,t)):Ou(r)}function Ou(t){var r=t;do{if((r.flags&32768)!==0){kv(r,Kr);return}t=r.return;var a=Vb(r.alternate,r,ir);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);vt===0&&(vt=5)}function kv(t,r){do{var a=Lb(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);vt=6,Ve=null}function Vv(t,r,a,l,f,m,S,T,P){t.cancelPendingCommit=null;do ku();while(Wt!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Dd,Uc(t,a,m,S,T,P),t===it&&(Ve=it=null,Be=0),ao=r,Wr=t,oo=a,Lf=m,Uf=f,Nv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Xb(qs,function(){return Bv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,f=ue.p,ue.p=2,S=Xe,Xe|=4;try{Ub(t,r,a)}finally{Xe=S,ue.p=f,te.T=l}}Wt=1,Lv(),Uv(),qv()}}function Lv(){if(Wt===1){Wt=0;var t=Wr,r=ao,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=ue.p;ue.p=2;var f=Xe;Xe|=4;try{Ev(r,t);var m=tm,S=Ag(t.containerInfo),T=m.focusedElem,P=m.selectionRange;if(S!==T&&T&&T.ownerDocument&&xg(T.ownerDocument.documentElement,T)){if(P!==null&&Nd(T)){var K=P.start,ne=P.end;if(ne===void 0&&(ne=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(ne,T.value.length);else{var ae=T.ownerDocument||document,W=ae&&ae.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ne=T.textContent.length,Te=Math.min(P.start,Ne),tt=P.end===void 0?Te:Math.min(P.end,Ne);!Z.extend&&Te>tt&&(S=tt,tt=Te,Te=S);var z=wg(T,Te),L=wg(T,tt);if(z&&L&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var G=ae.createRange();G.setStart(z.node,z.offset),Z.removeAllRanges(),Te>tt?(Z.addRange(G),Z.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),Z.addRange(G))}}}}for(ae=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ae.length;T++){var se=ae[T];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Ku=!!em,tm=em=null}finally{Xe=f,ue.p=l,te.T=a}}t.current=r,Wt=2}}function Uv(){if(Wt===2){Wt=0;var t=Wr,r=ao,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=ue.p;ue.p=2;var f=Xe;Xe|=4;try{gv(t,r.alternate,r)}finally{Xe=f,ue.p=l,te.T=a}}Wt=3}}function qv(){if(Wt===4||Wt===3){Wt=0,Go();var t=Wr,r=ao,a=oo,l=Nv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Wt=5:(Wt=0,ao=Wr=null,zv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Xr=null),Yo(a),r=r.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(br,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=te.T,f=ue.p,ue.p=2,te.T=null;try{for(var m=t.onRecoverableError,S=0;S<l.length;S++){var T=l[S];m(T.value,{componentStack:T.stack})}}finally{te.T=r,ue.p=f}}(oo&3)!==0&&ku(),js(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===qf?Vl++:(Vl=0,qf=t):Vl=0,Ll(0)}}function zv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,yl(r)))}function ku(t){return Lv(),Uv(),qv(),Bv()}function Bv(){if(Wt!==5)return!1;var t=Wr,r=Lf;Lf=0;var a=Yo(oo),l=te.T,f=ue.p;try{ue.p=32>a?32:a,te.T=null,a=Uf,Uf=null;var m=Wr,S=oo;if(Wt=0,ao=Wr=null,oo=0,(Xe&6)!==0)throw Error(i(331));var T=Xe;if(Xe|=4,xv(m.current),bv(m,m.current,S,a),Xe=T,Ll(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(br,m)}catch{}return!0}finally{ue.p=f,te.T=l,zv(t,r)}}function Fv(t,r,a){r=Fn(a,r),r=vf(t.stateNode,r,2),t=zr(t,r,2),t!==null&&(St(t,2),js(t))}function st(t,r,a){if(t.tag===3)Fv(t,t,a);else for(;r!==null;){if(r.tag===3){Fv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xr===null||!Xr.has(l))){t=Fn(a,t),a=$y(2),l=zr(r,a,2),l!==null&&(Ky(a,l,r,t),St(l,2),js(l));break}}r=r.return}}function Hf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Bb;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Mf=!0,f.add(a),t=$b.bind(null,t,r,a),r.then(t,t))}function $b(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Be&a)===a&&(vt===4||vt===3&&(Be&62914560)===Be&&300>En()-Vf?(Xe&2)===0&&lo(t,0):Of|=a,io===Be&&(io=0)),js(t)}function Hv(t,r){r===0&&(r=xr()),t=Ha(t,r),t!==null&&(St(t,r),js(t))}function Kb(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Hv(t,a)}function Yb(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Hv(t,a)}function Xb(t,r){return Ai(t,r)}var Vu=null,uo=null,Gf=!1,Lu=!1,Qf=!1,la=0;function js(t){t!==uo&&t.next===null&&(uo===null?Vu=uo=t:uo=uo.next=t),Lu=!0,Gf||(Gf=!0,Zb())}function Ll(t,r){if(!Qf&&Lu){Qf=!0;do for(var a=!1,l=Vu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var S=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-mn(42|t)+1)-1,m&=f&~(S&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Kv(l,m))}else m=Be,m=Un(l,l===it?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||wr(l,m)||(a=!0,Kv(l,m));l=l.next}while(a);Qf=!1}}function Wb(){Gv()}function Gv(){Lu=Gf=!1;var t=0;la!==0&&(aT()&&(t=la),la=0);for(var r=En(),a=null,l=Vu;l!==null;){var f=l.next,m=Qv(l,r);m===0?(l.next=null,a===null?Vu=f:a.next=f,f===null&&(uo=a)):(a=l,(t!==0||(m&3)!==0)&&(Lu=!0)),l=f}Ll(t)}function Qv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var S=31-mn(m),T=1<<S,P=f[S];P===-1?((T&a)===0||(T&l)!==0)&&(f[S]=Na(T,r)):P<=r&&(t.expiredLanes|=T),m&=~T}if(r=it,a=Be,a=Un(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Aa(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||wr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Aa(l),Yo(a)){case 2:case 8:a=Bt;break;case 32:a=qs;break;case 268435456:a=Qo;break;default:a=qs}return l=$v.bind(null,t),a=Ai(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Aa(l),t.callbackPriority=2,t.callbackNode=null,2}function $v(t,r){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=Be;return l=Un(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Cv(t,l,r),Qv(t,En()),t.callbackNode!=null&&t.callbackNode===a?$v.bind(null,t):null)}function Kv(t,r){if(ku())return null;Cv(t,r,!0)}function Zb(){lT(function(){(Xe&6)!==0?Ai(kt,Wb):Gv()})}function $f(){return la===0&&(la=$o()),la}function Yv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:as(""+t)}function Xv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Jb(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=Yv((f[Yt]||null).action),S=l.submitter;S&&(r=(r=S[Yt]||null)?Yv(r.formAction):S.getAttribute("formAction"),r!==null&&(m=r,S=null));var T=new zi("action","action",null,l,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(la!==0){var P=S?Xv(f,S):new FormData(f);ff(a,{pending:!0,data:P,method:f.method,action:m},null,P)}}else typeof m=="function"&&(T.preventDefault(),P=S?Xv(f,S):new FormData(f),ff(a,{pending:!0,data:P,method:f.method,action:m},m,P))},currentTarget:f}]})}}for(var Kf=0;Kf<jd.length;Kf++){var Yf=jd[Kf],eT=Yf.toLowerCase(),tT=Yf[0].toUpperCase()+Yf.slice(1);us(eT,"on"+tT)}us(Cg,"onAnimationEnd"),us(Ig,"onAnimationIteration"),us(jg,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(vb,"onTransitionRun"),us(_b,"onTransitionStart"),us(Eb,"onTransitionCancel"),us(Dg,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function Wv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var S=l.length-1;0<=S;S--){var T=l[S],P=T.instance,K=T.currentTarget;if(T=T.listener,P!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=K;try{m(f)}catch(ne){xu(ne)}f.currentTarget=null,m=P}else for(S=0;S<l.length;S++){if(T=l[S],P=T.instance,K=T.currentTarget,T=T.listener,P!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=K;try{m(f)}catch(ne){xu(ne)}f.currentTarget=null,m=P}}}}function Le(t,r){var a=r[Ri];a===void 0&&(a=r[Ri]=new Set);var l=t+"__bubble";a.has(l)||(Zv(r,t,2,!1),a.add(l))}function Xf(t,r,a){var l=0;r&&(l|=4),Zv(a,t,l,r)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Uu]){t[Uu]=!0,qc.forEach(function(a){a!=="selectionchange"&&(nT.has(a)||Xf(a,!1,t),Xf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Uu]||(r[Uu]=!0,Xf("selectionchange",!1,r))}}function Zv(t,r,a,l){switch(b_(r)){case 2:var f=CT;break;case 8:f=IT;break;default:f=hm}a=f.bind(null,r,a,t),f=void 0,!Qs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Zf(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var T=l.stateNode.containerInfo;if(T===f)break;if(S===4)for(S=l.return;S!==null;){var P=S.tag;if((P===3||P===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;T!==null;){if(S=Es(T),S===null)return;if(P=S.tag,P===5||P===6||P===26||P===27){l=m=S;continue e}T=T.parentNode}}l=l.return}Li(function(){var K=m,ne=nl(a),ae=[];e:{var W=Pg.get(t);if(W!==void 0){var Z=zi,Ne=t;switch(t){case"keypress":if(Ui(a)===0)break e;case"keydown":case"keyup":Z=qa;break;case"focusin":Ne="focus",Z=Va;break;case"focusout":Ne="blur",Z=Va;break;case"beforeblur":case"afterblur":Z=Va;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=$c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Vr;break;case Cg:case Ig:case jg:Z=rl;break;case Dg:Z=v;break;case"scroll":case"scrollend":Z=Fi;break;case"wheel":Z=A;break;case"copy":case"cut":case"paste":Z=Yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ol;break;case"toggle":case"beforetoggle":Z=J}var Te=(r&4)!==0,tt=!Te&&(t==="scroll"||t==="scrollend"),z=Te?W!==null?W+"Capture":null:W;Te=[];for(var L=K,G;L!==null;){var se=L;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||z===null||(se=Or(L,z),se!=null&&Te.push(ql(L,se,G))),tt)break;L=L.return}0<Te.length&&(W=new Z(W,Ne,null,a,ne),ae.push({event:W,listeners:Te}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&a!==tl&&(Ne=a.relatedTarget||a.fromElement)&&(Es(Ne)||Ne[Bs]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ne=a.relatedTarget||a.toElement,Z=K,Ne=Ne?Es(Ne):null,Ne!==null&&(tt=u(Ne),Te=Ne.tag,Ne!==tt||Te!==5&&Te!==27&&Te!==6)&&(Ne=null)):(Z=null,Ne=K),Z!==Ne)){if(Te=Qi,se="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Te=ol,se="onPointerLeave",z="onPointerEnter",L="pointer"),tt=Z==null?W:Cr(Z),G=Ne==null?W:Cr(Ne),W=new Te(se,L+"leave",Z,a,ne),W.target=tt,W.relatedTarget=G,se=null,Es(ne)===K&&(Te=new Te(z,L+"enter",Ne,a,ne),Te.target=G,Te.relatedTarget=tt,se=Te),tt=se,Z&&Ne)t:{for(Te=Z,z=Ne,L=0,G=Te;G;G=ho(G))L++;for(G=0,se=z;se;se=ho(se))G++;for(;0<L-G;)Te=ho(Te),L--;for(;0<G-L;)z=ho(z),G--;for(;L--;){if(Te===z||z!==null&&Te===z.alternate)break t;Te=ho(Te),z=ho(z)}Te=null}else Te=null;Z!==null&&Jv(ae,W,Z,Te,!1),Ne!==null&&tt!==null&&Jv(ae,tt,Ne,Te,!0)}}e:{if(W=K?Cr(K):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var _e=vg;else if(gg(W))if(_g)_e=pb;else{_e=fb;var Oe=db}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?K&&Ma(K.elementType)&&(_e=vg):_e=mb;if(_e&&(_e=_e(t,K))){yg(ae,_e,a,ne);break e}Oe&&Oe(t,W,K),t==="focusout"&&K&&W.type==="number"&&K.memoizedProps.value!=null&&Zo(W,"number",W.value)}switch(Oe=K?Cr(K):window,t){case"focusin":(gg(Oe)||Oe.contentEditable==="true")&&(za=Oe,Rd=K,dl=null);break;case"focusout":dl=Rd=za=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,Ng(ae,a,ne);break;case"selectionchange":if(yb)break;case"keydown":case"keyup":Ng(ae,a,ne)}var Se;if(Ce)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else cs?os(t,a)&&(we="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(wt&&a.locale!=="ko"&&(cs||we!=="onCompositionStart"?we==="onCompositionEnd"&&cs&&(Se=Qc()):(Bn=ne,rt="value"in Bn?Bn.value:Bn.textContent,cs=!0)),Oe=qu(K,we),0<Oe.length&&(we=new al(we,t,null,a,ne),ae.push({event:we,listeners:Oe}),Se?we.data=Se:(Se=ls(a),Se!==null&&(we.data=Se)))),(Se=Ye?ll(t,a):cb(t,a))&&(we=qu(K,"onBeforeInput"),0<we.length&&(Oe=new al("onBeforeInput","beforeinput",null,a,ne),ae.push({event:Oe,listeners:we}),Oe.data=Se)),Jb(ae,t,K,a,ne)}Wv(ae,r)})}function ql(t,r,a){return{instance:t,listener:r,currentTarget:a}}function qu(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Or(t,a),f!=null&&l.unshift(ql(t,f,m)),f=Or(t,r),f!=null&&l.push(ql(t,f,m))),t.tag===3)return l;t=t.return}return[]}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jv(t,r,a,l,f){for(var m=r._reactName,S=[];a!==null&&a!==l;){var T=a,P=T.alternate,K=T.stateNode;if(T=T.tag,P!==null&&P===l)break;T!==5&&T!==26&&T!==27||K===null||(P=K,f?(K=Or(a,m),K!=null&&S.unshift(ql(a,K,P))):f||(K=Or(a,m),K!=null&&S.push(ql(a,K,P)))),a=a.return}S.length!==0&&t.push({event:r,listeners:S})}var sT=/\r\n?/g,rT=/\u0000|\uFFFD/g;function e_(t){return(typeof t=="string"?t:""+t).replace(sT,`
`).replace(rT,"")}function t_(t,r){return r=e_(r),e_(t)===r}function zu(){}function et(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&zn(t,""+l);break;case"className":Pi(t,"class",l);break;case"tabIndex":Pi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Pi(t,a,l);break;case"style":el(t,l,m);break;case"data":if(r!=="object"){Pi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=as(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&et(t,r,"name",f.name,f,null),et(t,r,"formEncType",f.formEncType,f,null),et(t,r,"formMethod",f.formMethod,f,null),et(t,r,"formTarget",f.formTarget,f,null)):(et(t,r,"encType",f.encType,f,null),et(t,r,"method",f.method,f,null),et(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=as(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=zu);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=as(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),Di(t,"popover",l);break;case"xlinkActuate":qn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Di(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fc.get(a)||a,Di(t,a,l))}}function Jf(t,r,a,l,f,m){switch(a){case"style":el(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ii.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[Yt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Di(t,a,l)}}}function Zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,m,S,a,null)}}f&&et(t,r,"srcSet",a.srcSet,a,null),l&&et(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var T=m=S=f=null,P=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":f=ne;break;case"type":S=ne;break;case"checked":P=ne;break;case"defaultChecked":K=ne;break;case"value":m=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:et(t,r,l,ne,a,null)}}Wo(t,m,T,P,K,S,f,!1),Dr(t);return;case"select":Le("invalid",t),l=S=m=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":S=T;break;case"multiple":l=T;default:et(t,r,f,T,a,null)}r=m,a=S,t.multiple=!!l,r!=null?Pr(t,!!l,r,!1):a!=null&&Pr(t,!!l,a,!0);return;case"textarea":Le("invalid",t),m=f=l=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":l=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:et(t,r,S,T,a,null)}Bc(t,l,f,m),Dr(t);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,r,P,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<Ul.length;l++)Le(Ul[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,K,l,a,null)}return;default:if(Ma(r)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&Jf(t,r,ne,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&et(t,r,T,l,a,null))}function iT(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,T=null,P=null,K=null,ne=null;for(Z in a){var ae=a[Z];if(a.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":P=ae;default:l.hasOwnProperty(Z)||et(t,r,Z,null,l,ae)}}for(var W in l){var Z=l[W];if(ae=a[W],l.hasOwnProperty(W)&&(Z!=null||ae!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":K=Z;break;case"defaultChecked":ne=Z;break;case"value":S=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ae&&et(t,r,W,Z,l,ae)}}Xo(t,S,T,P,K,ne,m,f);return;case"select":Z=S=T=W=null;for(m in a)if(P=a[m],a.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":Z=P;default:l.hasOwnProperty(m)||et(t,r,m,null,l,P)}for(f in l)if(m=l[f],P=a[f],l.hasOwnProperty(f)&&(m!=null||P!=null))switch(f){case"value":W=m;break;case"defaultValue":T=m;break;case"multiple":S=m;default:m!==P&&et(t,r,f,m,l,P)}r=T,a=S,l=Z,W!=null?Pr(t,!!a,W,!1):!!l!=!!a&&(r!=null?Pr(t,!!a,r,!0):Pr(t,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(t,r,T,null,l,f)}for(S in l)if(f=l[S],m=a[S],l.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&et(t,r,S,f,l,m)}zc(t,W,Z);return;case"option":for(var Ne in a)if(W=a[Ne],a.hasOwnProperty(Ne)&&W!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:et(t,r,Ne,null,l,W)}for(P in l)if(W=l[P],Z=a[P],l.hasOwnProperty(P)&&W!==Z&&(W!=null||Z!=null))switch(P){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:et(t,r,P,W,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)W=a[Te],a.hasOwnProperty(Te)&&W!=null&&!l.hasOwnProperty(Te)&&et(t,r,Te,null,l,W);for(K in l)if(W=l[K],Z=a[K],l.hasOwnProperty(K)&&W!==Z&&(W!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:et(t,r,K,W,l,Z)}return;default:if(Ma(r)){for(var tt in a)W=a[tt],a.hasOwnProperty(tt)&&W!==void 0&&!l.hasOwnProperty(tt)&&Jf(t,r,tt,void 0,l,W);for(ne in l)W=l[ne],Z=a[ne],!l.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||Jf(t,r,ne,W,l,Z);return}}for(var z in a)W=a[z],a.hasOwnProperty(z)&&W!=null&&!l.hasOwnProperty(z)&&et(t,r,z,null,l,W);for(ae in l)W=l[ae],Z=a[ae],!l.hasOwnProperty(ae)||W===Z||W==null&&Z==null||et(t,r,ae,W,l,Z)}var em=null,tm=null;function Bu(t){return t.nodeType===9?t:t.ownerDocument}function n_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function nm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sm=null;function aT(){var t=window.event;return t&&t.type==="popstate"?t===sm?!1:(sm=t,!0):(sm=null,!1)}var r_=typeof setTimeout=="function"?setTimeout:void 0,oT=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,lT=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(cT)}:r_;function cT(t){setTimeout(function(){throw t})}function Jr(t){return t==="head"}function a_(t,r){var a=r,l=0,f=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var S=t.ownerDocument;if(a&1&&zl(S.documentElement),a&2&&zl(S.body),a&4)for(a=S.head,zl(a),S=a.firstChild;S;){var T=S.nextSibling,P=S.nodeName;S[Rr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=T}}if(f===0){t.removeChild(m),Yl(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);Yl(r)}function rm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rm(a),Ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function uT(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Rr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ds(t.nextSibling),t===null)break}return null}function hT(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ds(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function dT(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ds(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var am=null;function o_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function l_(t,r,a){switch(r=Bu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function zl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ca(t)}var Yn=new Map,c_=new Set;function Fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ar=ue.d;ue.d={f:fT,r:mT,D:pT,C:gT,L:yT,m:vT,X:ET,S:_T,M:ST};function fT(){var t=ar.f(),r=Mu();return t||r}function mT(t){var r=Ss(t);r!==null&&r.tag===5&&r.type==="form"?Cy(r):ar.r(t)}var fo=typeof document>"u"?null:document;function u_(t,r,a){var l=fo;if(l&&typeof r=="string"&&r){var f=Ft(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),c_.has(f)||(c_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Zt(r,"link",t),Tt(r),l.head.appendChild(r)))}}function pT(t){ar.D(t),u_("dns-prefetch",t,null)}function gT(t,r){ar.C(t,r),u_("preconnect",t,r)}function yT(t,r,a){ar.L(t,r,a);var l=fo;if(l&&t&&r){var f='link[rel="preload"][as="'+Ft(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ft(a.imageSizes)+'"]')):f+='[href="'+Ft(t)+'"]';var m=f;switch(r){case"style":m=mo(t);break;case"script":m=po(t)}Yn.has(m)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Yn.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Bl(m))||r==="script"&&l.querySelector(Fl(m))||(r=l.createElement("link"),Zt(r,"link",t),Tt(r),l.head.appendChild(r)))}}function vT(t,r){ar.m(t,r);var a=fo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Ft(l)+'"][href="'+Ft(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=po(t)}if(!Yn.has(m)&&(t=_({rel:"modulepreload",href:t},r),Yn.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(m)))return}l=a.createElement("link"),Zt(l,"link",t),Tt(l),a.head.appendChild(l)}}}function _T(t,r,a){ar.S(t,r,a);var l=fo;if(l&&t){var f=Ir(l).hoistableStyles,m=mo(t);r=r||"default";var S=f.get(m);if(!S){var T={loading:0,preload:null};if(S=l.querySelector(Bl(m)))T.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Yn.get(m))&&om(t,a);var P=S=l.createElement("link");Tt(P),Zt(P,"link",t),P._p=new Promise(function(K,ne){P.onload=K,P.onerror=ne}),P.addEventListener("load",function(){T.loading|=1}),P.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Hu(S,r,l)}S={type:"stylesheet",instance:S,count:1,state:T},f.set(m,S)}}}function ET(t,r){ar.X(t,r);var a=fo;if(a&&t){var l=Ir(a).hoistableScripts,f=po(t),m=l.get(f);m||(m=a.querySelector(Fl(f)),m||(t=_({src:t,async:!0},r),(r=Yn.get(f))&&lm(t,r),m=a.createElement("script"),Tt(m),Zt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function ST(t,r){ar.M(t,r);var a=fo;if(a&&t){var l=Ir(a).hoistableScripts,f=po(t),m=l.get(f);m||(m=a.querySelector(Fl(f)),m||(t=_({src:t,async:!0,type:"module"},r),(r=Yn.get(f))&&lm(t,r),m=a.createElement("script"),Tt(m),Zt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function h_(t,r,a,l){var f=(f=ye.current)?Fu(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=mo(a.href),a=Ir(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=mo(a.href);var m=Ir(f).hoistableStyles,S=m.get(t);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,S),(m=f.querySelector(Bl(t)))&&!m._p&&(S.instance=m,S.state.loading=5),Yn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(t,a),m||bT(f,t,a,S.state))),r&&l===null)throw Error(i(528,""));return S}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=po(a),a=Ir(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function mo(t){return'href="'+Ft(t)+'"'}function Bl(t){return'link[rel="stylesheet"]['+t+"]"}function d_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function bT(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zt(r,"link",a),Tt(r),t.head.appendChild(r))}function po(t){return'[src="'+Ft(t)+'"]'}function Fl(t){return"script[async]"+t}function f_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ft(a.href)+'"]');if(l)return r.instance=l,Tt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Tt(l),Zt(l,"style",f),Hu(l,a.precedence,t),r.instance=l;case"stylesheet":f=mo(a.href);var m=t.querySelector(Bl(f));if(m)return r.state.loading|=4,r.instance=m,Tt(m),m;l=d_(a),(f=Yn.get(f))&&om(l,f),m=(t.ownerDocument||t).createElement("link"),Tt(m);var S=m;return S._p=new Promise(function(T,P){S.onload=T,S.onerror=P}),Zt(m,"link",l),r.state.loading|=4,Hu(m,a.precedence,t),r.instance=m;case"script":return m=po(a.src),(f=t.querySelector(Fl(m)))?(r.instance=f,Tt(f),f):(l=a,(f=Yn.get(m))&&(l=_({},a),lm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Tt(f),Zt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Hu(l,a.precedence,t));return r.instance}function Hu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,S=0;S<l.length;S++){var T=l[S];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function om(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gu=null;function m_(t,r,a){if(Gu===null){var l=new Map,f=Gu=new Map;f.set(a,l)}else f=Gu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Rr]||m[bt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(r)||"";S=t+S;var T=l.get(S);T?T.push(m):l.set(S,[m])}}return l}function p_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function TT(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function g_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Hl=null;function wT(){}function xT(t,r,a){if(Hl===null)throw Error(i(475));var l=Hl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=mo(a.href),m=t.querySelector(Bl(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Qu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=m,Tt(m);return}m=t.ownerDocument||t,a=d_(a),(f=Yn.get(f))&&om(a,f),m=m.createElement("link"),Tt(m);var S=m;S._p=new Promise(function(T,P){S.onload=T,S.onerror=P}),Zt(m,"link",a),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Qu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function AT(){if(Hl===null)throw Error(i(475));var t=Hl;return t.stylesheets&&t.count===0&&cm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&cm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)cm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function cm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,r.forEach(NT,t),$u=null,Qu.call(t))}function NT(t,r){if(!(r.state.loading&4)){var a=$u.get(t);if(a)var l=a.get(null);else{a=new Map,$u.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),l=S)}l&&a.set(null,l)}f=r.instance,S=f.getAttribute("data-precedence"),m=a.get(S)||l,m===l&&a.set(null,f),a.set(S,f),this.count++,l=Qu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Gl={$$typeof:$,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function RT(t,r,a,l,f,m,S,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.hiddenUpdates=Ra(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function y_(t,r,a,l,f,m,S,T,P,K,ne,ae){return t=new RT(t,r,a,S,T,P,K,ae),r=1,m===!0&&(r|=24),m=In(3,null,null,r),t.current=m,m.stateNode=t,r=Fd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},$d(m),t}function v_(t){return t?(t=Ga,t):Ga}function __(t,r,a,l,f,m){f=v_(f),l.context===null?l.context=f:l.pendingContext=f,l=qr(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=zr(t,l,r),a!==null&&(On(a,t,r),Sl(a,t,r))}function E_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function um(t,r){E_(t,r),(t=t.alternate)&&E_(t,r)}function S_(t){if(t.tag===13){var r=Ha(t,67108864);r!==null&&On(r,t,67108864),um(t,67108864)}}var Ku=!0;function CT(t,r,a,l){var f=te.T;te.T=null;var m=ue.p;try{ue.p=2,hm(t,r,a,l)}finally{ue.p=m,te.T=f}}function IT(t,r,a,l){var f=te.T;te.T=null;var m=ue.p;try{ue.p=8,hm(t,r,a,l)}finally{ue.p=m,te.T=f}}function hm(t,r,a,l){if(Ku){var f=dm(l);if(f===null)Zf(t,r,l,Yu,a),T_(t,l);else if(DT(f,t,r,a,l))l.stopPropagation();else if(T_(t,l),r&4&&-1<jT.indexOf(t)){for(;f!==null;){var m=Ss(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=ss(m.pendingLanes);if(S!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var P=1<<31-mn(S);T.entanglements[1]|=P,S&=~P}js(m),(Xe&6)===0&&(Du=En()+500,Ll(0))}}break;case 13:T=Ha(m,2),T!==null&&On(T,m,2),Mu(),um(m,2)}if(m=dm(l),m===null&&Zf(t,r,l,Yu,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Zf(t,r,l,null,a)}}function dm(t){return t=nl(t),fm(t)}var Yu=null;function fm(t){if(Yu=null,t=Es(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yu=t,null}function b_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kc()){case kt:return 2;case Bt:return 8;case qs:case yd:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var mm=!1,ei=null,ti=null,ni=null,Ql=new Map,$l=new Map,si=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(t,r){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(r.pointerId)}}function Kl(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Ss(r),r!==null&&S_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function DT(t,r,a,l,f){switch(r){case"focusin":return ei=Kl(ei,t,r,a,l,f),!0;case"dragenter":return ti=Kl(ti,t,r,a,l,f),!0;case"mouseover":return ni=Kl(ni,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Ql.set(m,Kl(Ql.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,$l.set(m,Kl($l.get(m)||null,t,r,a,l,f)),!0}return!1}function w_(t){var r=Es(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Ed(t.priority,function(){if(a.tag===13){var l=Mn();l=Ko(l);var f=Ha(a,l);f!==null&&On(f,a,l),um(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=dm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);tl=l,a.target.dispatchEvent(l),tl=null}else return r=Ss(a),r!==null&&S_(r),t.blockedOn=a,!1;r.shift()}return!0}function x_(t,r,a){Xu(t)&&a.delete(r)}function PT(){mm=!1,ei!==null&&Xu(ei)&&(ei=null),ti!==null&&Xu(ti)&&(ti=null),ni!==null&&Xu(ni)&&(ni=null),Ql.forEach(x_),$l.forEach(x_)}function Wu(t,r){t.blockedOn===r&&(t.blockedOn=null,mm||(mm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,PT)))}var Zu=null;function A_(t){Zu!==t&&(Zu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Zu===t&&(Zu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(fm(l||a)===null)continue;break}var m=Ss(a);m!==null&&(t.splice(r,3),r-=3,ff(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Yl(t){function r(P){return Wu(P,t)}ei!==null&&Wu(ei,t),ti!==null&&Wu(ti,t),ni!==null&&Wu(ni,t),Ql.forEach(r),$l.forEach(r);for(var a=0;a<si.length;a++){var l=si[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<si.length&&(a=si[0],a.blockedOn===null);)w_(a),a.blockedOn===null&&si.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],S=f[Yt]||null;if(typeof m=="function")S||A_(a);else if(S){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[Yt]||null)T=S.formAction;else if(fm(f)!==null)continue}else T=S.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),A_(a)}}}function pm(t){this._internalRoot=t}Ju.prototype.render=pm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Mn();__(a,l,t,r,null,null)},Ju.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;__(t.current,2,null,t,null,null),Mu(),r[Bs]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var r=zs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<si.length&&r!==0&&r<si[a].priority;a++);si.splice(a,0,t),a===0&&w_(t)}};var N_=e.version;if(N_!=="19.1.1")throw Error(i(527,N_,"19.1.1"));ue.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var MT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{br=eh.inject(MT),an=eh}catch{}}return Wl.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",f=Fy,m=Hy,S=Gy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=y_(t,1,!1,null,null,a,l,f,m,S,T,null),t[Bs]=r.current,Wf(t),new pm(r)},Wl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=Fy,S=Hy,T=Gy,P=null,K=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(K=a.formState)),r=y_(t,1,!0,r,a??null,l,f,m,S,T,P,K),r.context=v_(null),a=r.current,l=Mn(),l=Ko(l),f=qr(l),f.callback=null,zr(a,f,l),a=l,r.current.lanes=a,St(r,a),js(r),t[Bs]=r.current,Wf(t),new Ju(r)},Wl.version="19.1.1",Wl}var V_;function HT(){if(V_)return vm.exports;V_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),vm.exports=FT(),vm.exports}var GT=HT();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var L_="popstate";function QT(s={}){function e(o,u){let{pathname:d="/",search:y="",hash:g=""}=Ea(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),km("",{pathname:d,search:y,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let d=o.document.querySelector("base"),y="";if(d&&d.getAttribute("href")){let g=o.location.href,p=g.indexOf("#");y=p===-1?g:g.slice(0,p)}return y+"#"+(typeof u=="string"?u:hc(u))}function i(o,u){es(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return KT(e,n,i,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function es(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $T(){return Math.random().toString(36).substring(2,10)}function U_(s,e){return{usr:s.state,key:s.key,idx:e}}function km(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ea(e):e,state:n,key:e&&e.key||i||$T()}}function hc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ea(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function KT(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,y="POP",g=null,p=_();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function _(){return(d.state||{idx:null}).idx}function b(){y="POP";let V=_(),Y=V==null?null:V-p;p=V,g&&g({action:y,location:B.location,delta:Y})}function x(V,Y){y="PUSH";let oe=km(B.location,V,Y);n&&n(oe,V),p=_()+1;let $=U_(oe,p),H=B.createHref(oe);try{d.pushState($,"",H)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(H)}u&&g&&g({action:y,location:B.location,delta:1})}function C(V,Y){y="REPLACE";let oe=km(B.location,V,Y);n&&n(oe,V),p=_();let $=U_(oe,p),H=B.createHref(oe);d.replaceState($,"",H),u&&g&&g({action:y,location:B.location,delta:0})}function U(V){return YT(V)}let B={get action(){return y},get location(){return s(o,d)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(L_,b),g=V,()=>{o.removeEventListener(L_,b),g=null}},createHref(V){return e(o,V)},createURL:U,encodeLocation(V){let Y=U(V);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:x,replace:C,go(V){return d.go(V)}};return B}function YT(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:hc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function E0(s,e,n="/"){return XT(s,e,n,!1)}function XT(s,e,n,i){let o=typeof e=="string"?Ea(e):e,u=fr(o.pathname||"/",n);if(u==null)return null;let d=S0(s);WT(d);let y=null;for(let g=0;y==null&&g<d.length;++g){let p=lw(u);y=aw(d[g],p,i)}return y}function S0(s,e=[],n=[],i="",o=!1){let u=(d,y,g=o,p)=>{let _={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:y,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&g)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let b=ur([i,_.relativePath]),x=n.concat(_);d.children&&d.children.length>0&&(ft(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),S0(d.children,e,x,b,g)),!(d.path==null&&!d.index)&&e.push({path:b,score:rw(b,d.index),routesMeta:x})};return s.forEach((d,y)=>{if(d.path===""||!d.path?.includes("?"))u(d,y);else for(let g of b0(d.path))u(d,y,!0,g)}),e}function b0(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=b0(i.join("/")),y=[];return y.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&y.push(...d),y.map(g=>s.startsWith("/")&&g===""?"/":g)}function WT(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:iw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var ZT=/^:[\w-]+$/,JT=3,ew=2,tw=1,nw=10,sw=-2,q_=s=>s==="*";function rw(s,e){let n=s.split("/"),i=n.length;return n.some(q_)&&(i+=sw),e&&(i+=ew),n.filter(o=>!q_(o)).reduce((o,u)=>o+(ZT.test(u)?JT:u===""?tw:nw),i)}function iw(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function aw(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",d=[];for(let y=0;y<i.length;++y){let g=i[y],p=y===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",b=Eh({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},_),x=g.route;if(!b&&p&&n&&!i[i.length-1].route.index&&(b=Eh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:ur([u,b.pathname]),pathnameBase:dw(ur([u,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(u=ur([u,b.pathnameBase]))}return d}function Eh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=ow(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),y=o.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:b},x)=>{if(_==="*"){let U=y[x]||"";d=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const C=y[x];return b&&!C?p[_]=void 0:p[_]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:s}}function ow(s,e=!1,n=!0){es(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,y,g)=>(i.push({paramName:y,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function lw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return es(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function fr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function cw(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?Ea(s):s;return{pathname:n?n.startsWith("/")?n:uw(n,e):e,search:fw(i),hash:mw(o)}}function uw(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hw(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dp(s){let e=hw(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function fp(s,e,n,i=!1){let o;typeof s=="string"?o=Ea(s):(o={...s},ft(!o.pathname||!o.pathname.includes("?"),bm("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),bm("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),bm("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,y;if(d==null)y=n;else{let b=e.length-1;if(!i&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),b-=1;o.pathname=x.join("/")}y=b>=0?e[b]:"/"}let g=cw(o,y),p=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||_)&&(g.pathname+="/"),g}var ur=s=>s.join("/").replace(/\/\/+/g,"/"),dw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),fw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,mw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function pw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var T0=["POST","PUT","PATCH","DELETE"];new Set(T0);var gw=["GET",...T0];new Set(gw);var Mo=I.createContext(null);Mo.displayName="DataRouter";var Bh=I.createContext(null);Bh.displayName="DataRouterState";I.createContext(!1);var w0=I.createContext({isTransitioning:!1});w0.displayName="ViewTransition";var yw=I.createContext(new Map);yw.displayName="Fetchers";var vw=I.createContext(null);vw.displayName="Await";var gs=I.createContext(null);gs.displayName="Navigation";var bc=I.createContext(null);bc.displayName="Location";var ys=I.createContext({outlet:null,matches:[],isDataRoute:!1});ys.displayName="Route";var mp=I.createContext(null);mp.displayName="RouteError";function _w(s,{relative:e}={}){ft(Oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(gs),{hash:o,pathname:u,search:d}=Tc(s,{relative:e}),y=u;return n!=="/"&&(y=u==="/"?n:ur([n,u])),i.createHref({pathname:y,search:d,hash:o})}function Oo(){return I.useContext(bc)!=null}function ts(){return ft(Oo(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(bc).location}var x0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A0(s){I.useContext(gs).static||I.useLayoutEffect(s)}function Et(){let{isDataRoute:s}=I.useContext(ys);return s?Dw():Ew()}function Ew(){ft(Oo(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(Mo),{basename:e,navigator:n}=I.useContext(gs),{matches:i}=I.useContext(ys),{pathname:o}=ts(),u=JSON.stringify(dp(i)),d=I.useRef(!1);return A0(()=>{d.current=!0}),I.useCallback((g,p={})=>{if(es(d.current,x0),!d.current)return;if(typeof g=="number"){n.go(g);return}let _=fp(g,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ur([e,_.pathname])),(p.replace?n.replace:n.push)(_,p.state,p)},[e,n,u,o,s])}I.createContext(null);function pp(){let{matches:s}=I.useContext(ys),e=s[s.length-1];return e?e.params:{}}function Tc(s,{relative:e}={}){let{matches:n}=I.useContext(ys),{pathname:i}=ts(),o=JSON.stringify(dp(n));return I.useMemo(()=>fp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function Sw(s,e){return N0(s,e)}function N0(s,e,n,i){ft(Oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(gs),{matches:u}=I.useContext(ys),d=u[u.length-1],y=d?d.params:{},g=d?d.pathname:"/",p=d?d.pathnameBase:"/",_=d&&d.route;{let Y=_&&_.path||"";R0(g,!_||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let b=ts(),x;if(e){let Y=typeof e=="string"?Ea(e):e;ft(p==="/"||Y.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),x=Y}else x=b;let C=x.pathname||"/",U=C;if(p!=="/"){let Y=p.replace(/^\//,"").split("/");U="/"+C.replace(/^\//,"").split("/").slice(Y.length).join("/")}let B=E0(s,{pathname:U});es(_||B!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),es(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=Aw(B&&B.map(Y=>Object.assign({},Y,{params:Object.assign({},y,Y.params),pathname:ur([p,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?p:ur([p,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,n,i);return e&&V?I.createElement(bc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},V):V}function bw(){let s=jw(),e=pw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:u},"ErrorBoundary")," or"," ",I.createElement("code",{style:u},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,d)}var Tw=I.createElement(bw,null),ww=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?I.createElement(ys.Provider,{value:this.props.routeContext},I.createElement(mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xw({routeContext:s,match:e,children:n}){let i=I.useContext(Mo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(ys.Provider,{value:s},n)}function Aw(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,u=n?.errors;if(u!=null){let g=o.findIndex(p=>p.route.id&&u?.[p.route.id]!==void 0);ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,y=-1;if(n)for(let g=0;g<o.length;g++){let p=o[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(y=g),p.route.id){let{loaderData:_,errors:b}=n,x=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||x){d=!0,y>=0?o=o.slice(0,y+1):o=[o[0]];break}}}return o.reduceRight((g,p,_)=>{let b,x=!1,C=null,U=null;n&&(b=u&&p.route.id?u[p.route.id]:void 0,C=p.route.errorElement||Tw,d&&(y<0&&_===0?(R0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,U=null):y===_&&(x=!0,U=p.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,_+1)),V=()=>{let Y;return b?Y=C:x?Y=U:p.route.Component?Y=I.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=g,I.createElement(xw,{match:p,routeContext:{outlet:g,matches:B,isDataRoute:n!=null},children:Y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?I.createElement(ww,{location:n.location,revalidation:n.revalidation,component:C,error:b,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}function gp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nw(s){let e=I.useContext(Mo);return ft(e,gp(s)),e}function Rw(s){let e=I.useContext(Bh);return ft(e,gp(s)),e}function Cw(s){let e=I.useContext(ys);return ft(e,gp(s)),e}function yp(s){let e=Cw(s),n=e.matches[e.matches.length-1];return ft(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Iw(){return yp("useRouteId")}function jw(){let s=I.useContext(mp),e=Rw("useRouteError"),n=yp("useRouteError");return s!==void 0?s:e.errors?.[n]}function Dw(){let{router:s}=Nw("useNavigate"),e=yp("useNavigate"),n=I.useRef(!1);return A0(()=>{n.current=!0}),I.useCallback(async(o,u={})=>{es(n.current,x0),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var z_={};function R0(s,e,n){!e&&!z_[s]&&(z_[s]=!0,es(!1,n))}I.memo(Pw);function Pw({routes:s,future:e,state:n}){return N0(s,void 0,n,e)}function C0({to:s,replace:e,state:n,relative:i}){ft(Oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(gs);es(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=I.useContext(ys),{pathname:d}=ts(),y=Et(),g=fp(s,dp(u),d,i==="path"),p=JSON.stringify(g);return I.useEffect(()=>{y(JSON.parse(p),{replace:e,state:n,relative:i})},[y,p,i,e,n]),null}function Nt(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mw({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){ft(!Oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),y=I.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=Ea(n));let{pathname:g="/",search:p="",hash:_="",state:b=null,key:x="default"}=n,C=I.useMemo(()=>{let U=fr(g,d);return U==null?null:{location:{pathname:U,search:p,hash:_,state:b,key:x},navigationType:i}},[d,g,p,_,b,x,i]);return es(C!=null,`<Router basename="${d}"> is not able to match the URL "${g}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:I.createElement(gs.Provider,{value:y},I.createElement(bc.Provider,{children:e,value:C}))}function Ow({children:s,location:e}){return Sw(Vm(s),e)}function Vm(s,e=[]){let n=[];return I.Children.forEach(s,(i,o)=>{if(!I.isValidElement(i))return;let u=[...e,o];if(i.type===I.Fragment){n.push.apply(n,Vm(i.props.children,u));return}ft(i.type===Nt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Vm(i.props.children,u)),n.push(d)}),n}var lh="get",ch="application/x-www-form-urlencoded";function Fh(s){return s!=null&&typeof s.tagName=="string"}function kw(s){return Fh(s)&&s.tagName.toLowerCase()==="button"}function Vw(s){return Fh(s)&&s.tagName.toLowerCase()==="form"}function Lw(s){return Fh(s)&&s.tagName.toLowerCase()==="input"}function Uw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function qw(s,e){return s.button===0&&(!e||e==="_self")&&!Uw(s)}var th=null;function zw(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var Bw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(s){return s!=null&&!Bw.has(s)?(es(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):s}function Fw(s,e){let n,i,o,u,d;if(Vw(s)){let y=s.getAttribute("action");i=y?fr(y,e):null,n=s.getAttribute("method")||lh,o=Tm(s.getAttribute("enctype"))||ch,u=new FormData(s)}else if(kw(s)||Lw(s)&&(s.type==="submit"||s.type==="image")){let y=s.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||y.getAttribute("action");if(i=g?fr(g,e):null,n=s.getAttribute("formmethod")||y.getAttribute("method")||lh,o=Tm(s.getAttribute("formenctype"))||Tm(y.getAttribute("enctype"))||ch,u=new FormData(y,s),!zw()){let{name:p,type:_,value:b}=s;if(_==="image"){let x=p?`${p}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else p&&u.append(p,b)}}else{if(Fh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lh,i=null,o=ch,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Hw(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&fr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Gw(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qw(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function $w(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Gw(u,n);return d.links?d.links():[]}return[]}));return Ww(i.flat(1).filter(Qw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function B_(s,e,n,i,o,u){let d=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,y=(g,p)=>n[p].pathname!==g.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,p)=>d(g,p)||y(g,p)):u==="data"?e.filter((g,p)=>{let _=i.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,p)||y(g,p))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Kw(s,e,{includeHydrateFallback:n}={}){return Yw(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Yw(s){return[...new Set(s)]}function Xw(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function Ww(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(Xw(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function I0(){let s=I.useContext(Mo);return vp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Zw(){let s=I.useContext(Bh);return vp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var _p=I.createContext(void 0);_p.displayName="FrameworkContext";function j0(){let s=I.useContext(_p);return vp(s,"You must render this element inside a <HydratedRouter> element"),s}function Jw(s,e){let n=I.useContext(_p),[i,o]=I.useState(!1),[u,d]=I.useState(!1),{onFocus:y,onBlur:g,onMouseEnter:p,onMouseLeave:_,onTouchStart:b}=e,x=I.useRef(null);I.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=Y=>{Y.forEach(oe=>{d(oe.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return x.current&&V.observe(x.current),()=>{V.disconnect()}}},[s]),I.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let C=()=>{o(!0)},U=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,x,{}]:[u,x,{onFocus:Zl(y,C),onBlur:Zl(g,U),onMouseEnter:Zl(p,C),onMouseLeave:Zl(_,U),onTouchStart:Zl(b,C)}]:[!1,x,{}]}function Zl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function ex({page:s,...e}){let{router:n}=I0(),i=I.useMemo(()=>E0(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?I.createElement(nx,{page:s,matches:i,...e}):null}function tx(s){let{manifest:e,routeModules:n}=j0(),[i,o]=I.useState([]);return I.useEffect(()=>{let u=!1;return $w(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),i}function nx({page:s,matches:e,...n}){let i=ts(),{manifest:o,routeModules:u}=j0(),{basename:d}=I0(),{loaderData:y,matches:g}=Zw(),p=I.useMemo(()=>B_(s,e,g,o,i,"data"),[s,e,g,o,i]),_=I.useMemo(()=>B_(s,e,g,o,i,"assets"),[s,e,g,o,i]),b=I.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,B=!1;if(e.forEach(Y=>{let oe=o.routes[Y.route.id];!oe||!oe.hasLoader||(!p.some($=>$.route.id===Y.route.id)&&Y.route.id in y&&u[Y.route.id]?.shouldRevalidate||oe.hasClientLoader?B=!0:U.add(Y.route.id))}),U.size===0)return[];let V=Hw(s,d,"data");return B&&U.size>0&&V.searchParams.set("_routes",e.filter(Y=>U.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[V.pathname+V.search]},[d,y,i,o,p,e,s,u]),x=I.useMemo(()=>Kw(_,o),[_,o]),C=tx(_);return I.createElement(I.Fragment,null,b.map(U=>I.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),x.map(U=>I.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),C.map(({key:U,link:B})=>I.createElement("link",{key:U,nonce:n.nonce,...B})))}function sx(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var D0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{D0&&(window.__reactRouterVersion="7.8.1")}catch{}function rx({basename:s,children:e,window:n}){let i=I.useRef();i.current==null&&(i.current=QT({window:n,v5Compat:!0}));let o=i.current,[u,d]=I.useState({action:o.action,location:o.location}),y=I.useCallback(g=>{I.startTransition(()=>d(g))},[d]);return I.useLayoutEffect(()=>o.listen(y),[o,y]),I.createElement(Mw,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var P0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hh=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:y,target:g,to:p,preventScrollReset:_,viewTransition:b,...x},C){let{basename:U}=I.useContext(gs),B=typeof p=="string"&&P0.test(p),V,Y=!1;if(typeof p=="string"&&B&&(V=p,D0))try{let N=new URL(window.location.href),j=p.startsWith("//")?new URL(N.protocol+p):new URL(p),M=fr(j.pathname,U);j.origin===N.origin&&M!=null?p=M+j.search+j.hash:Y=!0}catch{es(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let oe=_w(p,{relative:o}),[$,H,k]=Jw(i,x),F=lx(p,{replace:d,state:y,target:g,preventScrollReset:_,relative:o,viewTransition:b});function R(N){e&&e(N),N.defaultPrevented||F(N)}let w=I.createElement("a",{...x,...k,href:V||oe,onClick:Y||u?e:R,ref:sx(C,H),target:g,"data-discover":!B&&n==="render"?"true":void 0});return $&&!B?I.createElement(I.Fragment,null,w,I.createElement(ex,{page:oe})):w});Hh.displayName="Link";var ix=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:y,children:g,...p},_){let b=Tc(d,{relative:p.relative}),x=ts(),C=I.useContext(Bh),{navigator:U,basename:B}=I.useContext(gs),V=C!=null&&fx(b)&&y===!0,Y=U.encodeLocation?U.encodeLocation(b).pathname:b.pathname,oe=x.pathname,$=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(oe=oe.toLowerCase(),$=$?$.toLowerCase():null,Y=Y.toLowerCase()),$&&B&&($=fr($,B)||$);const H=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let k=oe===Y||!o&&oe.startsWith(Y)&&oe.charAt(H)==="/",F=$!=null&&($===Y||!o&&$.startsWith(Y)&&$.charAt(Y.length)==="/"),R={isActive:k,isPending:F,isTransitioning:V},w=k?e:void 0,N;typeof i=="function"?N=i(R):N=[i,k?"active":null,F?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(R):u;return I.createElement(Hh,{...p,"aria-current":w,className:N,ref:_,style:j,to:d,viewTransition:y},typeof g=="function"?g(R):g)});ix.displayName="NavLink";var ax=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=lh,action:y,onSubmit:g,relative:p,preventScrollReset:_,viewTransition:b,...x},C)=>{let U=hx(),B=dx(y,{relative:p}),V=d.toLowerCase()==="get"?"get":"post",Y=typeof y=="string"&&P0.test(y),oe=$=>{if(g&&g($),$.defaultPrevented)return;$.preventDefault();let H=$.nativeEvent.submitter,k=H?.getAttribute("formmethod")||d;U(H||$.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:o,state:u,relative:p,preventScrollReset:_,viewTransition:b})};return I.createElement("form",{ref:C,method:V,action:B,onSubmit:i?g:oe,...x,"data-discover":!Y&&s==="render"?"true":void 0})});ax.displayName="Form";function ox(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M0(s){let e=I.useContext(Mo);return ft(e,ox(s)),e}function lx(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let y=Et(),g=ts(),p=Tc(s,{relative:u});return I.useCallback(_=>{if(qw(_,e)){_.preventDefault();let b=n!==void 0?n:hc(g)===hc(p);y(s,{replace:b,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[g,y,p,n,i,e,s,o,u,d])}var cx=0,ux=()=>`__${String(++cx)}__`;function hx(){let{router:s}=M0("useSubmit"),{basename:e}=I.useContext(gs),n=Iw();return I.useCallback(async(i,o={})=>{let{action:u,method:d,encType:y,formData:g,body:p}=Fw(i,e);if(o.navigate===!1){let _=o.fetcherKey||ux();await s.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||d,formEncType:o.encType||y,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||d,formEncType:o.encType||y,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function dx(s,{relative:e}={}){let{basename:n}=I.useContext(gs),i=I.useContext(ys);ft(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...Tc(s||".",{relative:e})},d=ts();if(s==null){u.search=d.search;let y=new URLSearchParams(u.search),g=y.getAll("index");if(g.some(_=>_==="")){y.delete("index"),g.filter(b=>b).forEach(b=>y.append("index",b));let _=y.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ur([n,u.pathname])),hc(u)}function fx(s,{relative:e}={}){let n=I.useContext(w0);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=M0("useViewTransitionState"),o=Tc(s,{relative:e});if(!n.isTransitioning)return!1;let u=fr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=fr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Eh(o.pathname,d)!=null||Eh(o.pathname,u)!=null}const mx=()=>{};var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},px=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],y=s[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},k0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,y=d?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,_=u>>2,b=(u&3)<<4|y>>4;let x=(y&15)<<2|p>>6,C=p&63;g||(C=64,d||(x=64)),i.push(n[_],n[b],n[x],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(O0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):px(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],y=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const b=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||y==null||p==null||b==null)throw new gx;const x=u<<2|y>>4;if(i.push(x),p!==64){const C=y<<4&240|p>>2;if(i.push(C),b!==64){const U=p<<6&192|b;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class gx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yx=function(s){const e=O0(s);return k0.encodeByteArray(e,!0)},Sh=function(s){return yx(s).replace(/\./g,"")},V0=function(s){try{return k0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=()=>vx().__FIREBASE_DEFAULTS__,Ex=()=>{if(typeof process>"u"||typeof F_>"u")return;const s=F_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Sx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&V0(s[1]);return e&&JSON.parse(e)},Gh=()=>{try{return mx()||_x()||Ex()||Sx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},L0=s=>Gh()?.emulatorHosts?.[s],bx=s=>{const e=L0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},U0=()=>Gh()?.config,q0=s=>Gh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Sh(JSON.stringify(n)),Sh(JSON.stringify(d)),""].join(".")}const ic={};function xx(){const s={prod:[],emulator:[]};for(const e of Object.keys(ic))ic[e]?s.emulator.push(e):s.prod.push(e);return s}function Ax(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let H_=!1;function B0(s,e){if(typeof window>"u"||typeof document>"u"||!ko(window.location.host)||ic[s]===e||ic[s]||H_)return;ic[s]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",u=xx().prod.length>0;function d(){const x=document.getElementById(i);x&&x.remove()}function y(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{H_=!0,d()},x}function _(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=Ax(i),C=n("text"),U=document.getElementById(C)||document.createElement("span"),B=n("learnmore"),V=document.getElementById(B)||document.createElement("a"),Y=n("preprendIcon"),oe=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const $=x.element;y($),_(V,B);const H=p();g(oe,Y),$.append(oe,U,V,H),document.body.appendChild($)}u?(U.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Rx(){const s=Gh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ix(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dx(){const s=fn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Px(){return!Rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ox(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class Er extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=kx,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Vx(u,i):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new Er(o,y,i)}}function Vx(s,e){return s.replace(Lx,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Lx=/\{\$([^}]+)}/g;function Ux(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ma(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(G_(u)&&G_(d)){if(!ma(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function G_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ec(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function qx(s,e){const n=new zx(s,e);return n.subscribe.bind(n)}class zx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Bx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=wm),o.error===void 0&&(o.error=wm),o.complete===void 0&&(o.complete=wm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bx(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(s){return s&&s._delegate?s._delegate:s}class pa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Tx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gx(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);i===y&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Hx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hx(s){return s===ca?void 0:s}function Gx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const $x={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Kx=Ue.INFO,Yx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Xx=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Yx[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=Kx,this._logHandler=Xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$x[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Wx=(s,e)=>e.some(n=>s instanceof n);let Q_,$_;function Zx(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jx(){return $_||($_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F0=new WeakMap,Lm=new WeakMap,H0=new WeakMap,xm=new WeakMap,Sp=new WeakMap;function eA(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(hi(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&F0.set(n,s)}).catch(()=>{}),Sp.set(e,s),e}function tA(s){if(Lm.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Lm.set(s,e)}let Um={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Lm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||H0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function nA(s){Um=s(Um)}function sA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(Am(this),e,...n);return H0.set(i,e.sort?e.sort():[e]),hi(i)}:Jx().includes(s)?function(...e){return s.apply(Am(this),e),hi(F0.get(this))}:function(...e){return hi(s.apply(Am(this),e))}}function rA(s){return typeof s=="function"?sA(s):(s instanceof IDBTransaction&&tA(s),Wx(s,Zx())?new Proxy(s,Um):s)}function hi(s){if(s instanceof IDBRequest)return eA(s);if(xm.has(s))return xm.get(s);const e=rA(s);return e!==s&&(xm.set(s,e),Sp.set(e,s)),e}const Am=s=>Sp.get(s);function iA(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),y=hi(d);return i&&d.addEventListener("upgradeneeded",g=>{i(hi(d.result),g.oldVersion,g.newVersion,hi(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),y.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),y}const aA=["get","getKey","getAll","getAllKeys","count"],oA=["put","add","delete","clear"],Nm=new Map;function K_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=oA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||aA.includes(n)))return;const u=async function(d,...y){const g=this.transaction(d,o?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(y.shift())),(await Promise.all([p[n](...y),o&&g.done]))[0]};return Nm.set(e,u),u}nA(s=>({...s,get:(e,n,i)=>K_(e,n)||s.get(e,n,i),has:(e,n)=>!!K_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function cA(s){return s.getComponent()?.type==="VERSION"}const qm="@firebase/app",Y_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Ep("@firebase/app"),uA="@firebase/app-compat",hA="@firebase/analytics-compat",dA="@firebase/analytics",fA="@firebase/app-check-compat",mA="@firebase/app-check",pA="@firebase/auth",gA="@firebase/auth-compat",yA="@firebase/database",vA="@firebase/data-connect",_A="@firebase/database-compat",EA="@firebase/functions",SA="@firebase/functions-compat",bA="@firebase/installations",TA="@firebase/installations-compat",wA="@firebase/messaging",xA="@firebase/messaging-compat",AA="@firebase/performance",NA="@firebase/performance-compat",RA="@firebase/remote-config",CA="@firebase/remote-config-compat",IA="@firebase/storage",jA="@firebase/storage-compat",DA="@firebase/firestore",PA="@firebase/ai",MA="@firebase/firestore-compat",OA="firebase",kA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]",VA={[qm]:"fire-core",[uA]:"fire-core-compat",[dA]:"fire-analytics",[hA]:"fire-analytics-compat",[mA]:"fire-app-check",[fA]:"fire-app-check-compat",[pA]:"fire-auth",[gA]:"fire-auth-compat",[yA]:"fire-rtdb",[vA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[EA]:"fire-fn",[SA]:"fire-fn-compat",[bA]:"fire-iid",[TA]:"fire-iid-compat",[wA]:"fire-fcm",[xA]:"fire-fcm-compat",[AA]:"fire-perf",[NA]:"fire-perf-compat",[RA]:"fire-rc",[CA]:"fire-rc-compat",[IA]:"fire-gcs",[jA]:"fire-gcs-compat",[DA]:"fire-fst",[MA]:"fire-fst-compat",[PA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,LA=new Map,Bm=new Map;function X_(s,e){try{s.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ao(s){const e=s.name;if(Bm.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,s);for(const n of bh.values())X_(n,s);for(const n of LA.values())X_(n,s);return!0}function bp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Xn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new wc("app","Firebase",UA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=kA;function G0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:zm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw di.create("bad-app-name",{appName:String(o)});if(n||(n=U0()),!n)throw di.create("no-options");const u=bh.get(o);if(u){if(ma(n,u.options)&&ma(i,u.config))return u;throw di.create("duplicate-app",{appName:o})}const d=new Qx(o);for(const g of Bm.values())d.addComponent(g);const y=new qA(n,i,d);return bh.set(o,y),y}function Q0(s=zm){const e=bh.get(s);if(!e&&s===zm&&U0())return G0();if(!e)throw di.create("no-app",{appName:s});return e}function fi(s,e,n){let i=VA[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(d.join(" "));return}Ao(new pa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",BA=1,dc="firebase-heartbeat-store";let Rm=null;function $0(){return Rm||(Rm=iA(zA,BA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(s=>{throw di.create("idb-open",{originalErrorMessage:s.message})})),Rm}async function FA(s){try{const n=(await $0()).transaction(dc),i=await n.objectStore(dc).get(K0(s));return await n.done,i}catch(e){if(e instanceof Er)mr.warn(e.message);else{const n=di.create("idb-get",{originalErrorMessage:e?.message});mr.warn(n.message)}}}async function W_(s,e){try{const i=(await $0()).transaction(dc,"readwrite");await i.objectStore(dc).put(e,K0(s)),await i.done}catch(n){if(n instanceof Er)mr.warn(n.message);else{const i=di.create("idb-set",{originalErrorMessage:n?.message});mr.warn(i.message)}}}function K0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1024,GA=30;class QA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>GA){const o=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z_(),{heartbeatsToSend:n,unsentEntries:i}=$A(this._heartbeatsCache.heartbeats),o=Sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return mr.warn(e),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function $A(s,e=HA){const n=[];let i=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),J_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),J_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class KA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mx()?Ox().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function J_(s){return Sh(JSON.stringify({version:2,heartbeats:s})).length}function YA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(s){Ao(new pa("platform-logger",e=>new lA(e),"PRIVATE")),Ao(new pa("heartbeat",e=>new QA(e),"PRIVATE")),fi(qm,Y_,s),fi(qm,Y_,"esm2020"),fi("fire-js","")}XA("");function Y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WA=Y0,X0=new wc("auth","Firebase",Y0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Ep("@firebase/auth");function ZA(s,...e){Th.logLevel<=Ue.WARN&&Th.warn(`Auth (${Vo}): ${s}`,...e)}function uh(s,...e){Th.logLevel<=Ue.ERROR&&Th.error(`Auth (${Vo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(s,...e){throw Tp(s,...e)}function Ps(s,...e){return Tp(s,...e)}function W0(s,e,n){const i={...WA(),[e]:n};return new wc("auth","Firebase",i).create(e,{appName:s.name})}function hr(s){return W0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tp(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return X0.create(s,...e)}function xe(s,e,...n){if(!s)throw Tp(e,...n)}function or(s){const e="INTERNAL ASSERTION FAILED: "+s;throw uh(e),new Error(e)}function pr(s,e){s||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(){return typeof self<"u"&&self.location?.href||""}function JA(){return eE()==="http:"||eE()==="https:"}function eE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JA()||Ix()||"connection"in navigator)?navigator.onLine:!0}function tN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=Nx()||jx()}get(){return eN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(s,e){pr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rN=new Ac(3e4,6e4);function bi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Sr(s,e,n,i,o={}){return J0(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const y=xc({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return Cx()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&ko(s.emulatorConfig.host)&&(p.credentials="include"),Z0.fetch()(await eS(s,s.config.apiHost,n,y),p)})}async function J0(s,e,n){s._canInitEmulator=!1;const i={...nN,...e};try{const o=new aN(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw nh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[g,p]=y.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw nh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw nh(s,"user-disabled",d);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw W0(s,_,p);ms(s,_)}}catch(o){if(o instanceof Er)throw o;ms(s,"network-request-failed",{message:String(o)})}}async function Nc(s,e,n,i,o={}){const u=await Sr(s,e,n,i,o);return"mfaPendingCredential"in u&&ms(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function eS(s,e,n,i){const o=`${e}${n}?${i}`,u=s,d=u.config.emulator?wp(s.config,o):`${s.config.apiScheme}://${o}`;return sN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function iN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ps(this.auth,"network-request-failed")),rN.get())})}}function nh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ps(s,e,i);return o.customData._tokenResponse=n,o}function tE(s){return s!==void 0&&s.enterprise!==void 0}class oN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lN(s,e){return Sr(s,"GET","/v2/recaptchaConfig",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(s,e){return Sr(s,"POST","/v1/accounts:delete",e)}async function wh(s,e){return Sr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uN(s,e=!1){const n=Mt(s),i=await n.getIdToken(e),o=xp(i);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:ac(Cm(o.auth_time)),issuedAtTime:ac(Cm(o.iat)),expirationTime:ac(Cm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Cm(s){return Number(s)*1e3}function xp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=V0(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function nE(s){const e=xp(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Er&&hN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function hN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(s){const e=s.auth,n=await s.getIdToken(),i=await No(s,wh(e,{idToken:n}));xe(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?tS(o.providerUserInfo):[],d=mN(s.providerData,u),y=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,p=y?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Hm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,_)}async function fN(s){const e=Mt(s);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mN(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function tS(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(s,e){const n=await J0(s,{},async()=>{const i=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await eS(s,o,"/v1/token",`key=${u}`),y=await s._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:y,body:i};return s.emulatorConfig&&ko(s.emulatorConfig.host)&&(g.credentials="include"),Z0.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gN(s,e){return Sr(s,"POST","/v2/accounts:revokeToken",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=nE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await pN(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new bo;return i&&(xe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new dN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uN(this,e)}reload(){return fN(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await xh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await No(this,cN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:C,providerData:U,stsTokenManager:B}=n;xe(b&&B,e,"internal-error");const V=bo.fromJSON(this.name,B);xe(typeof b=="string",e,"internal-error"),ii(i,e.name),ii(o,e.name),xe(typeof x=="boolean",e,"internal-error"),xe(typeof C=="boolean",e,"internal-error"),ii(u,e.name),ii(d,e.name),ii(y,e.name),ii(g,e.name),ii(p,e.name),ii(_,e.name);const Y=new fs({uid:b,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:C,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:V,createdAt:p,lastLoginAt:_});return U&&Array.isArray(U)&&(Y.providerData=U.map(oe=>({...oe}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(e,n,i=!1){const o=new bo;o.updateFromServerResponse(n);const u=new fs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?tS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new bo;y.updateFromIdToken(i);const g=new fs({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Hm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function lr(s){pr(s instanceof Function,"Expected a class definition");let e=sE.get(s);return e?(pr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,sE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nS.type="NONE";const rE=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s,e,n){return`firebase:${s}:${e}:${n}`}class To{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=hh(this.userKey,o.apiKey,u),this.fullPersistenceKey=hh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wh(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new To(lr(rE),e,i);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||lr(rE);const d=hh(i,e.config.apiKey,e.name);let y=null;for(const p of n)try{const _=await p._get(d);if(_){let b;if(typeof _=="string"){const x=await wh(e,{idToken:_}).catch(()=>{});if(!x)break;b=await fs._fromGetAccountInfoResponse(e,x,_)}else b=fs._fromJSON(e,_);p!==u&&(y=b),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new To(u,e,i):(u=g[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new To(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lS(e))return"Blackberry";if(cS(e))return"Webos";if(rS(e))return"Safari";if((e.includes("chrome/")||iS(e))&&!e.includes("edge/"))return"Chrome";if(oS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function sS(s=fn()){return/firefox\//i.test(s)}function rS(s=fn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iS(s=fn()){return/crios\//i.test(s)}function aS(s=fn()){return/iemobile/i.test(s)}function oS(s=fn()){return/android/i.test(s)}function lS(s=fn()){return/blackberry/i.test(s)}function cS(s=fn()){return/webos/i.test(s)}function Ap(s=fn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function yN(s=fn()){return Ap(s)&&!!window.navigator?.standalone}function vN(){return Dx()&&document.documentMode===10}function uS(s=fn()){return Ap(s)||oS(s)||cS(s)||lS(s)||/windows phone/i.test(s)||aS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(s,e=[]){let n;switch(s){case"Browser":n=iE(fn());break;case"Worker":n=`${iE(fn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,y)=>{try{const g=e(u);d(g)}catch(g){y(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(s,e={}){return Sr(s,"GET","/v2/passwordPolicy",bi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=6;class bN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??SN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new _N(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await To.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wh(this,{idToken:e}),i=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(hr(this));const n=e?Mt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EN(this),n=new bN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await gN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Sa(s){return Mt(s)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=qx(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wN(s){Qh=s}function dS(s){return Qh.loadJS(s)}function xN(){return Qh.recaptchaEnterpriseScript}function AN(){return Qh.gapiScript}function NN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class RN{constructor(){this.enterprise=new CN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const IN="recaptcha-enterprise",fS="NO_RECAPTCHA";class jN{constructor(e){this.type=IN,this.auth=Sa(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,y)=>{lN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const p=new oN(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,d(p.siteKey)}}).catch(g=>{y(g)})})}function o(u,d,y){const g=window.grecaptcha;tE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{d(p)}).catch(()=>{d(fS)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RN().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(y=>{if(!n&&tE(window.grecaptcha))o(y,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=xN();g.length!==0&&(g+=y),dS(g).then(()=>{o(y,u,d)}).catch(p=>{d(p)})}}).catch(y=>{d(y)})})}}async function oE(s,e,n,i=!1,o=!1){const u=new jN(s);let d;if(o)d=fS;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const y={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const g=y.phoneEnrollmentInfo.phoneNumber,p=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const g=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return i?Object.assign(y,{captchaResp:d}):Object.assign(y,{captchaResponse:d}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Gm(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await oE(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await oE(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(s,e){const n=bp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ma(u,e??{}))return o;ms(o,"already-initialized")}return n.initialize({options:e})}function PN(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(lr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function MN(s,e,n){const i=Sa(s);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=mS(e),{host:d,port:y}=ON(e),g=y===null?"":`:${y}`,p={url:`${u}//${d}${g}/`},_=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(ma(p,i.config.emulator)&&ma(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ko(d)?(z0(`${u}//${d}${g}`),B0("Auth",!0)):kN()}function mS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function ON(s){const e=mS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:lE(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:lE(d)}}}function lE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function kN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function VN(s,e){return Sr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(s,e){return Nc(s,"POST","/v1/accounts:signInWithPassword",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(s,e){return Nc(s,"POST","/v1/accounts:signInWithEmailLink",bi(s,e))}async function qN(s,e){return Nc(s,"POST","/v1/accounts:signInWithEmailLink",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Np{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new fc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,n,"signInWithPassword",LN);case"emailLink":return UN(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,i,"signUpPassword",VN);case"emailLink":return qN(e,{idToken:n,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(s,e){return Nc(s,"POST","/v1/accounts:signInWithIdp",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="http://localhost";class ga extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const d=new ga(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return wo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,wo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wo(e,n)}buildRequest(){const e={requestUri:zN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FN(s){const e=Jl(ec(s)).link,n=e?Jl(ec(e)).deep_link_id:null,i=Jl(ec(s)).deep_link_id;return(i?Jl(ec(i)).link:null)||i||n||e||s}class Rp{constructor(e){const n=Jl(ec(e)),i=n.apiKey??null,o=n.oobCode??null,u=BN(n.mode??null);xe(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=FN(e);try{return new Rp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Rp.parseLink(n);return xe(i,"argument-error"),fc._fromEmailAndCode(e,i.code,i.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends pS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Rc{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return oi.credential(n,i)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Rc{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.GITHUB_SIGN_IN_METHOD="github.com";li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Rc{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ci.credential(n,i)}catch{return null}}}ci.TWITTER_SIGN_IN_METHOD="twitter.com";ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(s,e){return Nc(s,"POST","/v1/accounts:signUp",bi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await fs._fromIdTokenResponse(e,i,o),d=cE(i);return new ya({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=cE(i);return new ya({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function cE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Er{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Ah(e,n,i,o)}}function gS(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(s,u,e,i):u})}async function GN(s,e,n=!1){const i=await No(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ya._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(s,e,n=!1){const{auth:i}=s;if(Xn(i.app))return Promise.reject(hr(i));const o="reauthenticate";try{const u=await No(s,gS(i,o,e,s),n);xe(u.idToken,i,"internal-error");const d=xp(u.idToken);xe(d,i,"internal-error");const{sub:y}=d;return xe(s.uid===y,i,"user-mismatch"),ya._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ms(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(s,e,n=!1){if(Xn(s.app))return Promise.reject(hr(s));const i="signIn",o=await gS(s,i,e),u=await ya._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function $N(s,e){return yS(Sa(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(s){const e=Sa(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KN(s,e,n){if(Xn(s.app))return Promise.reject(hr(s));const i=Sa(s),d=await Gm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&vS(s),g}),y=await ya._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(y.user),y}function YN(s,e,n){return Xn(s.app)?Promise.reject(hr(s)):$N(Mt(s),Lo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&vS(s),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(s,e){return Sr(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Mt(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await No(i,XN(i.auth,u));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const y=i.providerData.find(({providerId:g})=>g==="password");y&&(y.displayName=i.displayName,y.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function ZN(s,e,n,i){return Mt(s).onIdTokenChanged(e,n,i)}function JN(s,e,n){return Mt(s).beforeAuthStateChanged(e,n)}function e2(s,e,n,i){return Mt(s).onAuthStateChanged(e,n,i)}function t2(s){return Mt(s).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1e3,s2=10;class ES extends _S{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);vN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,s2):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},n2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ES.type="LOCAL";const r2=ES;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends _S{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SS.type="SESSION";const bS=SS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new $h(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const y=Array.from(d).map(async p=>p(n.origin,u)),g=await i2(y);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,g)=>{const p=Cp("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(b){const x=b;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(x.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function o2(s){Ms().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function l2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c2(){return navigator?.serviceWorker?.controller||null}function u2(){return TS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",h2=1,Rh="firebaseLocalStorage",xS="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kh(s,e){return s.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function d2(){const s=indexedDB.deleteDatabase(wS);return new Cc(s).toPromise()}function Qm(){const s=indexedDB.open(wS,h2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Rh,{keyPath:xS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Rh)?e(i):(i.close(),await d2(),e(await Qm()))})})}async function uE(s,e,n){const i=Kh(s,!0).put({[xS]:e,value:n});return new Cc(i).toPromise()}async function f2(s,e){const n=Kh(s,!1).get(e),i=await new Cc(n).toPromise();return i===void 0?null:i.value}function hE(s,e){const n=Kh(s,!0).delete(e);return new Cc(n).toPromise()}const m2=800,p2=3;class AS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>p2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(u2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await l2(),!this.activeServiceWorker)return;this.sender=new a2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await uE(e,Nh,"1"),await hE(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>uE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>f2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Kh(o,!1).getAll();return new Cc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AS.type="LOCAL";const g2=AS;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(s,e){return e?lr(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function v2(s){return yS(s.auth,new Ip(s),s.bypassAuthState)}function _2(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),QN(n,new Ip(s),s.bypassAuthState)}async function E2(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),GN(n,new Ip(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v2;case"linkViaPopup":case"linkViaRedirect":return E2;case"reauthViaPopup":case"reauthViaRedirect":return _2;default:ms(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Ac(2e3,1e4);class So extends NS{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S2.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="pendingRedirect",dh=new Map;class T2 extends NS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const i=await w2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w2(s,e){const n=N2(e),i=A2(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function x2(s,e){dh.set(s._key(),e)}function A2(s){return lr(s._redirectPersistence)}function N2(s){return hh(b2,s.config.apiKey,s.name)}async function R2(s,e,n=!1){if(Xn(s.app))return Promise.reject(hr(s));const i=Sa(s),o=y2(i,e),d=await new T2(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=600*1e3;class I2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!RS(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ps(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C2&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function RS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function j2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(s,e={}){return Sr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M2=/^https?/;async function O2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await D2(s);for(const n of e)try{if(k2(n))return}catch{}ms(s,"unauthorized-domain")}function k2(s){const e=Fm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!M2.test(n))return!1;if(P2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Ac(3e4,6e4);function fE(){const s=Ms().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function L2(s){return new Promise((e,n)=>{function i(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(Ps(s,"network-request-failed"))},timeout:V2.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)i();else{const o=NN("iframefcb");return Ms()[o]=()=>{gapi.load?i():n(Ps(s,"network-request-failed"))},dS(`${AN()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw fh=null,e})}let fh=null;function U2(s){return fh=fh||L2(s),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Ac(5e3,15e3),z2="__/auth/iframe",B2="emulator/auth/iframe",F2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G2(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?wp(e,B2):`https://${s.config.authDomain}/${z2}`,i={apiKey:e.apiKey,appName:s.name,v:Vo},o=H2.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${xc(i).slice(1)}`}async function Q2(s){const e=await U2(s),n=Ms().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:G2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F2,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ps(s,"network-request-failed"),y=Ms().setTimeout(()=>{u(d)},q2.get());function g(){Ms().clearTimeout(y),o(i)}i.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K2=500,Y2=600,X2="_blank",W2="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z2(s,e,n,i=K2,o=Y2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let y="";const g={...$2,width:i.toString(),height:o.toString(),top:u,left:d},p=fn().toLowerCase();n&&(y=iS(p)?X2:n),sS(p)&&(e=e||W2,g.scrollbars="yes");const _=Object.entries(g).reduce((x,[C,U])=>`${x}${C}=${U},`,"");if(yN(p)&&y!=="_self")return J2(e||"",y),new mE(null);const b=window.open(e||"",y,_);xe(b,s,"popup-blocked");try{b.focus()}catch{}return new mE(b)}function J2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="__/auth/handler",tR="emulator/auth/handler",nR=encodeURIComponent("fac");async function pE(s,e,n,i,o,u){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Vo,eventId:o};if(e instanceof pS){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",Ux(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof Rc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const y=d;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];const g=await s._getAppCheckToken(),p=g?`#${nR}=${encodeURIComponent(g)}`:"";return`${sR(s)}?${xc(y).slice(1)}${p}`}function sR({config:s}){return s.emulator?wp(s,tR):`https://${s.authDomain}/${eR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="webStorageSupport";class rR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bS,this._completeRedirectFn=R2,this._overrideRedirectResult=x2}async _openPopup(e,n,i,o){pr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await pE(e,n,i,Fm(),o);return Z2(e,u,Cp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await pE(e,n,i,Fm(),o);return o2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(pr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Q2(e),i=new I2(e);return n.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Im,{type:Im},o=>{const u=o?.[0]?.[Im];u!==void 0&&n(!!u),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uS()||rS()||Ap()}}const iR=rR;var gE="@firebase/auth",yE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lR(s){Ao(new pa("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=i.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:y,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(s)},p=new TN(i,o,u,g);return PN(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new pa("auth-internal",e=>{const n=Sa(e.getProvider("auth").getImmediate());return(i=>new aR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(gE,yE,oR(s)),fi(gE,yE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=300,uR=q0("authIdTokenMaxAge")||cR;let vE=null;const hR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>uR)return;const o=n?.token;vE!==o&&(vE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function dR(s=Q0()){const e=bp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=DN(s,{popupRedirectResolver:iR,persistence:[g2,r2,bS]}),i=q0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=hR(u.toString());JN(n,d,()=>d(n.currentUser)),ZN(n,y=>d(y))}}const o=L0("auth");return o&&MN(n,`http://${o}`),n}function fR(){return document.getElementsByTagName("head")?.[0]??document}wN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Ps("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",fR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lR("Browser");var mR="firebase",pR="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(mR,pR,"app");var _E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mi,CS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function N(){}N.prototype=w.prototype,R.F=w.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(j,M,q){for(var D=Array(arguments.length-2),he=2;he<arguments.length;he++)D[he-2]=arguments[he];return w.prototype[M].apply(j,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,N){N||(N=0);const j=Array(16);if(typeof w=="string")for(var M=0;M<16;++M)j[M]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(M=0;M<16;++M)j[M]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=R.g[0],N=R.g[1],M=R.g[2];let q=R.g[3],D;D=w+(q^N&(M^q))+j[0]+3614090360&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(M^w&(N^M))+j[1]+3905402710&4294967295,q=w+(D<<12&4294967295|D>>>20),D=M+(N^q&(w^N))+j[2]+606105819&4294967295,M=q+(D<<17&4294967295|D>>>15),D=N+(w^M&(q^w))+j[3]+3250441966&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(q^N&(M^q))+j[4]+4118548399&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(M^w&(N^M))+j[5]+1200080426&4294967295,q=w+(D<<12&4294967295|D>>>20),D=M+(N^q&(w^N))+j[6]+2821735955&4294967295,M=q+(D<<17&4294967295|D>>>15),D=N+(w^M&(q^w))+j[7]+4249261313&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(q^N&(M^q))+j[8]+1770035416&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(M^w&(N^M))+j[9]+2336552879&4294967295,q=w+(D<<12&4294967295|D>>>20),D=M+(N^q&(w^N))+j[10]+4294925233&4294967295,M=q+(D<<17&4294967295|D>>>15),D=N+(w^M&(q^w))+j[11]+2304563134&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(q^N&(M^q))+j[12]+1804603682&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(M^w&(N^M))+j[13]+4254626195&4294967295,q=w+(D<<12&4294967295|D>>>20),D=M+(N^q&(w^N))+j[14]+2792965006&4294967295,M=q+(D<<17&4294967295|D>>>15),D=N+(w^M&(q^w))+j[15]+1236535329&4294967295,N=M+(D<<22&4294967295|D>>>10),D=w+(M^q&(N^M))+j[1]+4129170786&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^M&(w^N))+j[6]+3225465664&4294967295,q=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(q^w))+j[11]+643717713&4294967295,M=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(M^q))+j[0]+3921069994&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(M^q&(N^M))+j[5]+3593408605&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^M&(w^N))+j[10]+38016083&4294967295,q=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(q^w))+j[15]+3634488961&4294967295,M=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(M^q))+j[4]+3889429448&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(M^q&(N^M))+j[9]+568446438&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^M&(w^N))+j[14]+3275163606&4294967295,q=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(q^w))+j[3]+4107603335&4294967295,M=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(M^q))+j[8]+1163531501&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(M^q&(N^M))+j[13]+2850285829&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^M&(w^N))+j[2]+4243563512&4294967295,q=w+(D<<9&4294967295|D>>>23),D=M+(w^N&(q^w))+j[7]+1735328473&4294967295,M=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(M^q))+j[12]+2368359562&4294967295,N=M+(D<<20&4294967295|D>>>12),D=w+(N^M^q)+j[5]+4294588738&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^M)+j[8]+2272392833&4294967295,q=w+(D<<11&4294967295|D>>>21),D=M+(q^w^N)+j[11]+1839030562&4294967295,M=q+(D<<16&4294967295|D>>>16),D=N+(M^q^w)+j[14]+4259657740&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(N^M^q)+j[1]+2763975236&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^M)+j[4]+1272893353&4294967295,q=w+(D<<11&4294967295|D>>>21),D=M+(q^w^N)+j[7]+4139469664&4294967295,M=q+(D<<16&4294967295|D>>>16),D=N+(M^q^w)+j[10]+3200236656&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(N^M^q)+j[13]+681279174&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^M)+j[0]+3936430074&4294967295,q=w+(D<<11&4294967295|D>>>21),D=M+(q^w^N)+j[3]+3572445317&4294967295,M=q+(D<<16&4294967295|D>>>16),D=N+(M^q^w)+j[6]+76029189&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(N^M^q)+j[9]+3654602809&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^M)+j[12]+3873151461&4294967295,q=w+(D<<11&4294967295|D>>>21),D=M+(q^w^N)+j[15]+530742520&4294967295,M=q+(D<<16&4294967295|D>>>16),D=N+(M^q^w)+j[2]+3299628645&4294967295,N=M+(D<<23&4294967295|D>>>9),D=w+(M^(N|~q))+j[0]+4096336452&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~M))+j[7]+1126891415&4294967295,q=w+(D<<10&4294967295|D>>>22),D=M+(w^(q|~N))+j[14]+2878612391&4294967295,M=q+(D<<15&4294967295|D>>>17),D=N+(q^(M|~w))+j[5]+4237533241&4294967295,N=M+(D<<21&4294967295|D>>>11),D=w+(M^(N|~q))+j[12]+1700485571&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~M))+j[3]+2399980690&4294967295,q=w+(D<<10&4294967295|D>>>22),D=M+(w^(q|~N))+j[10]+4293915773&4294967295,M=q+(D<<15&4294967295|D>>>17),D=N+(q^(M|~w))+j[1]+2240044497&4294967295,N=M+(D<<21&4294967295|D>>>11),D=w+(M^(N|~q))+j[8]+1873313359&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~M))+j[15]+4264355552&4294967295,q=w+(D<<10&4294967295|D>>>22),D=M+(w^(q|~N))+j[6]+2734768916&4294967295,M=q+(D<<15&4294967295|D>>>17),D=N+(q^(M|~w))+j[13]+1309151649&4294967295,N=M+(D<<21&4294967295|D>>>11),D=w+(M^(N|~q))+j[4]+4149444226&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~M))+j[11]+3174756917&4294967295,q=w+(D<<10&4294967295|D>>>22),D=M+(w^(q|~N))+j[2]+718787259&4294967295,M=q+(D<<15&4294967295|D>>>17),D=N+(q^(M|~w))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+q&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const N=w-this.blockSize,j=this.C;let M=this.h,q=0;for(;q<w;){if(M==0)for(;q<=N;)o(this,R,q),q+=this.blockSize;if(typeof R=="string"){for(;q<w;)if(j[M++]=R.charCodeAt(q++),M==this.blockSize){o(this,j),M=0;break}}else for(;q<w;)if(j[M++]=R[q++],M==this.blockSize){o(this,j),M=0;break}}this.h=M,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,N=0;N<4;++N)for(let j=0;j<32;j+=8)R[w++]=this.g[N]>>>j&255;return R};function u(R,w){var N=y;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=w(R)}function d(R,w){this.h=w;const N=[];let j=!0;for(let M=R.length-1;M>=0;M--){const q=R[M]|0;j&&q==w||(N[M]=q,j=!1)}this.g=N}var y={};function g(R){return-128<=R&&R<128?u(R,function(w){return new d([w|0],w<0?-1:0)}):new d([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return b;if(R<0)return V(p(-R));const w=[];let N=1;for(let j=0;R>=N;j++)w[j]=R/N|0,N*=4294967296;return new d(w,0)}function _(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return V(_(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(w,8));let j=b;for(let q=0;q<R.length;q+=8){var M=Math.min(8,R.length-q);const D=parseInt(R.substring(q,q+M),w);M<8?(M=p(Math.pow(w,M)),j=j.j(M).add(p(D))):(j=j.j(N),j=j.add(p(D)))}return j}var b=g(0),x=g(1),C=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-V(this).m();let R=0,w=1;for(let N=0;N<this.g.length;N++){const j=this.i(N);R+=(j>=0?j:4294967296+j)*w,w*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(U(this))return"0";if(B(this))return"-"+V(this).toString(R);const w=p(Math.pow(R,6));var N=this;let j="";for(;;){const M=H(N,w).g;N=Y(N,M.j(w));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=M,U(N))return q+j;for(;q.length<6;)q="0"+q;j=q+j}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function U(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function B(R){return R.h==-1}s.l=function(R){return R=Y(this,R),B(R)?-1:U(R)?0:1};function V(R){const w=R.g.length,N=[];for(let j=0;j<w;j++)N[j]=~R.g[j];return new d(N,~R.h).add(x)}s.abs=function(){return B(this)?V(this):this},s.add=function(R){const w=Math.max(this.g.length,R.g.length),N=[];let j=0;for(let M=0;M<=w;M++){let q=j+(this.i(M)&65535)+(R.i(M)&65535),D=(q>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);j=D>>>16,q&=65535,D&=65535,N[M]=D<<16|q}return new d(N,N[N.length-1]&-2147483648?-1:0)};function Y(R,w){return R.add(V(w))}s.j=function(R){if(U(this)||U(R))return b;if(B(this))return B(R)?V(this).j(V(R)):V(V(this).j(R));if(B(R))return V(this.j(V(R)));if(this.l(C)<0&&R.l(C)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,N=[];for(var j=0;j<2*w;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(let M=0;M<R.g.length;M++){const q=this.i(j)>>>16,D=this.i(j)&65535,he=R.i(M)>>>16,De=R.i(M)&65535;N[2*j+2*M]+=D*De,oe(N,2*j+2*M),N[2*j+2*M+1]+=q*De,oe(N,2*j+2*M+1),N[2*j+2*M+1]+=D*he,oe(N,2*j+2*M+1),N[2*j+2*M+2]+=q*he,oe(N,2*j+2*M+2)}for(R=0;R<w;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=w;R<2*w;R++)N[R]=0;return new d(N,0)};function oe(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function $(R,w){this.g=R,this.h=w}function H(R,w){if(U(w))throw Error("division by zero");if(U(R))return new $(b,b);if(B(R))return w=H(V(R),w),new $(V(w.g),V(w.h));if(B(w))return w=H(R,V(w)),new $(V(w.g),w.h);if(R.g.length>30){if(B(R)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var N=x,j=w;j.l(R)<=0;)N=k(N),j=k(j);var M=F(N,1),q=F(j,1);for(j=F(j,2),N=F(N,2);!U(j);){var D=q.add(j);D.l(R)<=0&&(M=M.add(N),q=D),j=F(j,1),N=F(N,1)}return w=Y(R,M.j(w)),new $(M,w)}for(M=b;R.l(w)>=0;){for(N=Math.max(1,Math.floor(R.m()/w.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),q=p(N),D=q.j(w);B(D)||D.l(R)>0;)N-=j,q=p(N),D=q.j(w);U(q)&&(q=x),M=M.add(q),R=Y(R,D)}return new $(M,R)}s.B=function(R){return H(this,R).h},s.and=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)&R.i(j);return new d(N,this.h&R.h)},s.or=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)|R.i(j);return new d(N,this.h|R.h)},s.xor=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)^R.i(j);return new d(N,this.h^R.h)};function k(R){const w=R.g.length+1,N=[];for(let j=0;j<w;j++)N[j]=R.i(j)<<1|R.i(j-1)>>>31;return new d(N,R.h)}function F(R,w){const N=w>>5;w%=32;const j=R.g.length-N,M=[];for(let q=0;q<j;q++)M[q]=w>0?R.i(q+N)>>>w|R.i(q+N+1)<<32-w:R.i(q+N);return new d(M,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,CS=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,mi=d}).apply(typeof _E<"u"?_E:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IS,tc,jS,mh,$m,DS,PS,MS;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var Q=h[A];if(!(Q in E))break e;E=E[Q]}h=h[h.length-1],A=E[h],v=v(A),v!=A&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&E.push([A,v[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,E){return h.call.apply(h.bind,arguments)}function p(h,v,E){return p=g,p.apply(null,arguments)}function _(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function b(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,Q,J){for(var de=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)de[Ce-2]=arguments[Ce];return v.prototype[Q].apply(A,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const v=h.length;if(v>0){const E=Array(v);for(let A=0;A<v;A++)E[A]=h[A];return E}return[]}function U(h,v){for(let A=1;A<arguments.length;A++){const Q=arguments[A];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=h.length||0;const J=Q.length||0;h.length=E+J;for(let de=0;de<J;de++)h[E+de]=Q[de]}else h.push(Q)}}class B{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(h){d.setTimeout(()=>{throw h},0)}function Y(){var h=R;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class oe{constructor(){this.h=this.g=null}add(v,E){const A=$.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new B(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let k,F=!1,R=new oe,w=()=>{const h=Promise.resolve(void 0);k=()=>{h.then(N)}};function N(){for(var h;h=Y();){try{h.h.call(h.g)}catch(E){V(E)}var v=$;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}F=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function he(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(he,M),he.prototype.init=function(h,v){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),te=0;function ue(h,v,E,A,Q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=Q,this.key=++te,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,v,E){for(const A in h)v.call(E,h[A],A,h)}function O(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function ie(h){const v={};for(const E in h)v[E]=h[E];return v}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(h,v){let E,A;for(let Q=1;Q<arguments.length;Q++){A=arguments[Q];for(E in A)h[E]=A[E];for(let J=0;J<fe.length;J++)E=fe[J],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,E,A,Q){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const de=ye(h,v,A,Q);return de>-1?(v=h[de],E||(v.fa=!1)):(v=new ue(v,this.src,J,!!A,Q),v.fa=E,h.push(v)),v};function me(h,v){const E=v.type;if(E in h.g){var A=h.g[E],Q=Array.prototype.indexOf.call(A,v,void 0),J;(J=Q>=0)&&Array.prototype.splice.call(A,Q,1),J&&(X(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ye(h,v,E,A){for(let Q=0;Q<h.length;++Q){const J=h[Q];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==A)return Q}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),$e={};function ns(h,v,E,A,Q){if(Array.isArray(v)){for(let J=0;J<v.length;J++)ns(h,v[J],E,A,Q);return null}return E=kc(E),h&&h[De]?h.J(v,E,y(A)?!!A.capture:!1,Q):Ho(h,v,E,!1,A,Q)}function Ho(h,v,E,A,Q,J){if(!v)throw Error("Invalid event type");const de=y(Q)?!!Q.capture:!!Q;let Ce=Go(h);if(Ce||(h[ht]=Ce=new ce(h)),E=Ce.add(v,E,A,de,J),E.proxy)return E;if(A=wa(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)q||(Q=de),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),A,Q);else if(h.attachEvent)h.attachEvent(Aa(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function wa(){function h(E){return v.call(h.src,h.listener,E)}const v=gd;return h}function xa(h,v,E,A,Q){if(Array.isArray(v))for(var J=0;J<v.length;J++)xa(h,v[J],E,A,Q);else A=y(A)?!!A.capture:!!A,E=kc(E),h&&h[De]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],E=ye(v,E,A,Q),E>-1&&(X(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=Go(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ye(v,E,A,Q)),(E=h>-1?v[h]:null)&&Ai(E))}function Ai(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[De])me(v.i,h);else{var E=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(E,A,h.capture):v.detachEvent?v.detachEvent(Aa(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=Go(v))?(me(E,h),E.h==0&&(E.src=null,v[ht]=null)):X(h)}}}function Aa(h){return h in $e?$e[h]:$e[h]="on"+h}function gd(h,v){if(h.da)h=!0;else{v=new he(v,this);const E=h.listener,A=h.ha||h.src;h.fa&&Ai(h),h=E.call(A,v)}return h}function Go(h){return h=h[ht],h instanceof ce?h:null}var En="__closure_events_fn_"+(Math.random()*1e9>>>0);function kc(h){return typeof h=="function"?h:(h[En]||(h[En]=function(v){return h.handleEvent(v)}),h[En])}function kt(){j.call(this),this.i=new ce(this),this.M=this,this.G=null}b(kt,j),kt.prototype[De]=!0,kt.prototype.removeEventListener=function(h,v,E,A){xa(this,h,v,E,A)};function Bt(h,v){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var Q=v;v=new M(A,h),ee(v,Q)}Q=!0;let J,de;if(E)for(de=E.length-1;de>=0;de--)J=v.g=E[de],Q=qs(J,A,!0,v)&&Q;if(J=v.g=h,Q=qs(J,A,!0,v)&&Q,Q=qs(J,A,!1,v)&&Q,E)for(de=0;de<E.length;de++)J=v.g=E[de],Q=qs(J,A,!1,v)&&Q}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let A=0;A<E.length;A++)X(E[A]);delete h.g[v],h.h--}}this.G=null},kt.prototype.J=function(h,v,E,A){return this.i.add(String(h),v,!1,E,A)},kt.prototype.K=function(h,v,E,A){return this.i.add(String(h),v,!0,E,A)};function qs(h,v,E,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Q=!0;for(let J=0;J<v.length;++J){const de=v[J];if(de&&!de.da&&de.capture==E){const Ce=de.listener,ot=de.ha||de.src;de.fa&&me(h.i,de),Q=Ce.call(ot,A)!==!1&&Q}}return Q&&!A.defaultPrevented}function yd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Qo(h){h.g=yd(()=>{h.g=null,h.i&&(h.i=!1,Qo(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class vd extends j{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(h){j.call(this),this.h=h,this.g={}}b(Ni,j);var br=[];function an(h){Ee(h.g,function(v,E){this.g.hasOwnProperty(E)&&Ai(v)},h),h.g={}}Ni.prototype.N=function(){Ni.Z.N.call(this),an(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=d.JSON.stringify,mn=d.JSON.parse,_d=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Vc(){}function Lc(){}var vs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tr(){M.call(this,"d")}b(Tr,M);function ss(){M.call(this,"c")}b(ss,M);var Un={},wr=null;function Na(){return wr=wr||new kt}Un.Ia="serverreachability";function $o(h){M.call(this,Un.Ia,h)}b($o,M);function xr(h){const v=Na();Bt(v,new $o(v))}Un.STAT_EVENT="statevent";function Ra(h,v){M.call(this,Un.STAT_EVENT,h),this.stat=v}b(Ra,M);function St(h){const v=Na();Bt(v,new Ra(v,h))}Un.Ja="timingevent";function Uc(h,v){M.call(this,Un.Ja,h),this.size=v}b(Uc,M);function Ar(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Nr(){this.g=!0}Nr.prototype.ua=function(){this.g=!1};function Ko(h,v,E,A,Q,J){h.info(function(){if(h.g)if(J){var de="",Ce=J.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var ot=Ce[Ye].split("=");if(ot.length>1){const wt=ot[0];ot=ot[1];const Rn=wt.split("_");de=Rn.length>=2&&Rn[1]=="type"?de+(wt+"="+ot+"&"):de+(wt+"=redacted&")}}}else de=null;else de=J;return"XMLHTTP REQ ("+A+") [attempt "+Q+"]: "+v+`
`+E+`
`+de})}function Yo(h,v,E,A,Q,J,de){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Q+"]: "+v+`
`+E+`
`+J+" "+de})}function zs(h,v,E,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+_s(h,E)+(A?" "+A:"")})}function Ed(h,v){h.info(function(){return"TIMEOUT: "+v})}Nr.prototype.info=function(){};function _s(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var Q=A[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return Ln(J)}catch{return v}}var bt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bs;function Ri(){}b(Ri,Vc),Ri.prototype.g=function(){return new XMLHttpRequest},Bs=new Ri;function Ci(h){return encodeURIComponent(String(h))}function Sd(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function rs(h,v,E,A){this.j=h,this.i=v,this.l=E,this.S=A||1,this.V=new Ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}var Ca={},Es={};function Ss(h,v,E){h.M=1,h.A=Hs(mt(v)),h.u=E,h.R=!0,Cr(h,null)}function Cr(h,v){h.F=Date.now(),Ii(h),h.B=mt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Fc(E.i,"t",A),h.C=0,E=h.j.L,h.h=new Rr,h.g=Ua(h.j,E?v:null,!h.u),h.P>0&&(h.O=new vd(p(h.Y,h,h.g),h.P)),v=h.V,E=h.g,A=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(br[0]=Q.toString()),Q=br);for(let J=0;J<Q.length;J++){const de=ns(E,Q[J],A||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=h.J?ie(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),xr(),Ko(h.i,h.v,h.B,h.l,h.S,h.u)}rs.prototype.ba=function(h){h=h.target;const v=this.O;v&&on(h)==3?v.j():this.Y(h)},rs.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=on(this.g),ot=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||zi(this.g)))){this.K||Ce!=4||ot==7||(ot==8||Ye<=0?xr(3):xr(2)),Ts(this);var v=this.g.ca();this.X=v;var E=Ir(this);if(this.o=v==200,Yo(this.i,this.v,this.B,this.l,this.S,Ce,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,Q=this.g;if((A=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var J=A;break t}}J=null}if(h=J)zs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ia(this,h);else{this.o=!1,this.m=3,St(12),ws(this),ji(this);break e}}if(this.R){h=!0;let wt;for(;!this.K&&this.C<E.length;)if(wt=qc(this,E),wt==Es){Ce==4&&(this.m=4,St(14),h=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==Ca){this.m=4,St(15),zs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else zs(this.i,this.l,wt,null),Ia(this,wt);if(Tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)zs(this.i,this.l,E,"[Invalid Chunked Response]"),ws(this),ji(this);else if(E.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),il(de),de.P=!0,St(11))}}else zs(this.i,this.l,E,null),Ia(this,E);Ce==4&&ws(this),this.o&&!this.K&&(Ce==4?al(this.j,this):(this.o=!1,Ii(this)))}else Bi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),ws(this),ji(this)}}}catch{}finally{}};function Ir(h){if(!Tt(h))return h.g.la();const v=zi(h.g);if(v==="")return"";let E="";const A=v.length,Q=on(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ws(h),ji(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,E+=h.h.i.decode(v[J],{stream:!(Q&&J==A-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function Tt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function qc(h,v){var E=h.C,A=v.indexOf(`
`,E);return A==-1?Es:(E=Number(v.substring(E,A)),isNaN(E)?Ca:(A+=1,A+E>v.length?Es:(v=v.slice(A,A+E),h.C=A+E,v)))}rs.prototype.cancel=function(){this.K=!0,ws(this)};function Ii(h){h.T=Date.now()+h.H,bs(h,h.H)}function bs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ar(p(h.aa,h),v)}function Ts(h){h.D&&(d.clearTimeout(h.D),h.D=null)}rs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ed(this.i,this.B),this.M!=2&&(xr(),St(17)),ws(this),this.m=2,ji(this)):bs(this,this.T-h)};function ji(h){h.j.I==0||h.K||al(h.j,h)}function ws(h){Ts(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,an(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Ia(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||Mi(E.h,h))){if(!h.L&&Mi(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Q=A;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)La(E),xs(E);else break e;rl(E),St(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ar(p(E.Va,E),6e3));qn(E.h)<=1&&E.ta&&(E.ta=void 0)}else $s(E,11)}else if((h.L||E.g==h)&&La(E),!D(v))for(Q=E.Ba.g.parse(v),v=0;v<Q.length;v++){let Ye=Q[v];const wt=Ye[0];if(!(wt<=E.K))if(E.K=wt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Rn=Ye[3];Rn!=null&&(E.ka=Rn,E.j.info("VER="+E.ka));const As=Ye[4];As!=null&&(E.za=As,E.j.info("SVER="+E.za));const os=Ye[5];os!=null&&typeof os=="number"&&os>0&&(A=1.5*os,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ls=h.g;if(ls){const cs=ls.g?ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var J=A.h;J.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ja(J,J.h),J.h=null))}if(A.G){const ll=ls.g?ls.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(A.wa=ll,Ze(A.J,A.G,ll))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var de=h;if(A.na=Zc(A,A.L?A.ba:null,A.W),de.L){Fs(A.h,de);var Ce=de,ot=A.O;ot&&(Ce.H=ot),Ce.D&&(Ts(Ce),Ii(Ce)),A.g=de}else Kc(A);E.i.length>0&&Qi(E)}else Ye[0]!="stop"&&Ye[0]!="close"||$s(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?$s(E,7):Hi(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}xr(4)}catch{}}var bd=class{constructor(h,v){this.g=h,this.map=v}};function Di(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qn(h){return h.h?1:h.g?h.g.size:0}function Mi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function ja(h,v){h.g?h.g.add(v):h.h=v}function Fs(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Di.prototype.cancel=function(){if(this.i=Da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Da(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return C(h.i)}var Pa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Td(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let Q,J=null;A>=0?(Q=h[E].substring(0,A),J=h[E].substring(A+1)):Q=h[E],v(Q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function is(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof is?(this.l=h.l,jr(this,h.j),this.o=h.o,this.g=h.g,Oi(this,h.u),this.h=h.h,Dr(this,Hc(h.i)),this.m=h.m):h&&(v=String(h).match(Pa))?(this.l=!1,jr(this,v[1]||"",!0),this.o=ki(v[2]||""),this.g=ki(v[3]||"",!0),Oi(this,v[4]),this.h=ki(v[5]||"",!0),Dr(this,v[6]||"",!0),this.m=ki(v[7]||"")):(this.l=!1,this.i=new zn(null,this.l))}is.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ft(v,Wo,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ft(v,Wo,!0),"@"),h.push(Ci(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ft(E,E.charAt(0)=="/"?Pr:Zo,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ft(E,Bc)),h.join("")},is.prototype.resolve=function(h){const v=mt(this);let E=!!h.j;E?jr(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var A=h.h;if(E)Oi(v,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Q=v.h.lastIndexOf("/");Q!=-1&&(A=v.h.slice(0,Q+1)+A)}if(Q=A,Q==".."||Q==".")A="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){A=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const J=[];for(let de=0;de<Q.length;){const Ce=Q[de++];Ce=="."?A&&de==Q.length&&J.push(""):Ce==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&de==Q.length&&J.push("")):(J.push(Ce),A=!0)}A=J.join("/")}else A=Q}return E?v.h=A:E=h.i.toString()!=="",E?Dr(v,Hc(h.i)):E=!!h.m,E&&(v.m=h.m),v};function mt(h){return new is(h)}function jr(h,v,E){h.j=E?ki(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Oi(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Dr(h,v,E){v instanceof zn?(h.i=v,tl(h.i,h.l)):(E||(v=Ft(v,zc)),h.i=new zn(v,h.l))}function Ze(h,v,E){h.i.set(v,E)}function Hs(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ki(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ft(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Xo),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xo(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wo=/[#\/\?@]/g,Zo=/[#\?:]/g,Pr=/[#\?]/g,zc=/[#\?@]/g,Bc=/#/g;function zn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Gs(h){h.g||(h.g=new Map,h.h=0,h.i&&Td(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=zn.prototype,s.add=function(h,v){Gs(this),this.i=null,h=as(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Jo(h,v){Gs(h),v=as(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function el(h,v){return Gs(h),v=as(h,v),h.g.has(v)}s.forEach=function(h,v){Gs(this),this.g.forEach(function(E,A){E.forEach(function(Q){h.call(v,Q,A,this)},this)},this)};function Ma(h,v){Gs(h);let E=[];if(typeof v=="string")el(h,v)&&(E=E.concat(h.g.get(as(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}s.set=function(h,v){return Gs(this),this.i=null,h=as(this,h),el(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Ma(this,h),h.length>0?String(h[0]):v):v};function Fc(h,v,E){Jo(h,v),E.length>0&&(h.i=null,h.g.set(as(h,v),C(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var E=v[A];const Q=Ci(E);E=Ma(this,E);for(let J=0;J<E.length;J++){let de=Q;E[J]!==""&&(de+="="+Ci(E[J])),h.push(de)}}return this.i=h.join("&")};function Hc(h){const v=new zn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function as(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function tl(h,v){v&&!h.j&&(Gs(h),h.i=null,h.g.forEach(function(E,A){const Q=A.toLowerCase();A!=Q&&(Jo(this,A),Fc(this,Q,E))},h)),h.j=v}function nl(h,v){const E=new Nr;if(d.Image){const A=new Image;A.onload=_(pn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=_(pn,E,"TestLoadImage: error",!1,v,A),A.onabort=_(pn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=_(pn,E,"TestLoadImage: timeout",!1,v,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function Mr(h,v){const E=new Nr,A=new AbortController,Q=setTimeout(()=>{A.abort(),pn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout(Q),J.ok?pn(E,"TestPingServer: ok",!0,v):pn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),pn(E,"TestPingServer: error",!1,v)})}function pn(h,v,E,A,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),A(E)}catch{}}function Gc(){this.g=new _d}function Vi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Vi,Vc),Vi.prototype.g=function(){return new Li(this.i,this.h)};function Li(h,v){kt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Li,kt),s=Li.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Qs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gn(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Or(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Or(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?gn(this):Qs(this),this.readyState==3&&Or(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,gn(this))},s.Na=function(h){this.g&&(this.response=h,gn(this))},s.ga=function(){this.g&&gn(this)};function gn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Qs(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Qs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kr(h){let v="";return Ee(h,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function Bn(h,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=kr(E),typeof h=="string"?E!=null&&Ci(E):Ze(h,v,E))}function rt(h){kt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(rt,kt);var Oa=/^https?$/i,Qc=["POST","PUT"];s=rt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bs.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Ui(this,J);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Q in A)E.set(Q,A[Q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())E.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qc,v,void 0)>=0)||A||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of E)this.g.setRequestHeader(J,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Ui(this,J)}};function Ui(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,qi(h),Vt(h)}function qi(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Bt(this,"complete"),Bt(this,"abort"),Vt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?sl(this):this.Xa())},s.Xa=function(){sl(this)};function sl(h){if(h.h&&typeof u<"u"){if(h.v&&on(h)==4)setTimeout(h.Ca.bind(h),0);else if(Bt(h,"readystatechange"),on(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=J===0){let de=String(h.D).match(Pa)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),A=!Oa.test(de?de.toLowerCase():"")}E=A}if(E)Bt(h,"complete"),Bt(h,"success");else{h.o=6;try{var Q=on(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",qi(h)}}finally{Vt(h)}}}}function Vt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||Bt(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function on(h){return h.g?h.g.readyState:0}s.ca=function(){try{return on(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),mn(v)}};function zi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(h){const v={};h=(h.g&&on(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(D(h[A]))continue;var E=Sd(h[A]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[Q]||[];v[Q]=J,J.push(E)}O(v,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function ka(h){this.za=0,this.i=[],this.j=new Nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fi("baseRetryDelayMs",5e3,h),this.Za=Fi("retryDelaySeedMs",1e4,h),this.Ta=Fi("forwardChannelMaxRetries",2,h),this.va=Fi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Di(h&&h.concurrentRequestLimit),this.Ba=new Gc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ka.prototype,s.ka=8,s.I=1,s.connect=function(h,v,E,A){St(0),this.W=h,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Zc(this,null,this.W),Qi(this)};function Hi(h){if(Gi(h),h.I==3){var v=h.V++,E=mt(h.J);if(Ze(E,"SID",h.M),Ze(E,"RID",v),Ze(E,"TYPE","terminate"),$i(h,E),v=new rs(h,h.j,v),v.M=2,v.A=Hs(mt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=Ua(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ii(v)}Wc(h)}function xs(h){h.g&&(il(h),h.g.cancel(),h.g=null)}function Gi(h){xs(h),h.v&&(d.clearTimeout(h.v),h.v=null),La(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Qi(h){if(!Pi(h.h)&&!h.m){h.m=!0;var v=h.Ea;k||w(),F||(k(),F=!0),R.add(v,h),h.D=0}}function wd(h,v){return qn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ar(p(h.Ea,h,v),Xc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new rs(this,this.j,h);let J=this.o;if(this.U&&(J?(J=ie(J),ee(J,this.U)):J=this.U),this.u!==null||this.R||(Q.J=J,J=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Va(this,Q,v),E=mt(this.J),Ze(E,"RID",h),Ze(E,"CVER",22),this.G&&Ze(E,"X-HTTP-Session-Id",this.G),$i(this,E),J&&(this.R?v="headers="+Ci(kr(J))+"&"+v:this.u&&Bn(E,this.u,J)),ja(this.h,Q),this.Ra&&Ze(E,"TYPE","init"),this.S?(Ze(E,"$req",v),Ze(E,"SID","null"),Q.U=!0,Ss(Q,E,null)):Ss(Q,E,v),this.I=2}}else this.I==3&&(h?$c(this,h):this.i.length==0||Pi(this.h)||$c(this))};function $c(h,v){var E;v?E=v.l:E=h.V++;const A=mt(h.J);Ze(A,"SID",h.M),Ze(A,"RID",E),Ze(A,"AID",h.K),$i(h,A),h.u&&h.o&&Bn(A,h.u,h.o),E=new rs(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Va(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ja(h.h,E),Ss(E,A,v)}function $i(h,v){h.H&&Ee(h.H,function(E,A){Ze(v,A,E)}),h.l&&Ee({},function(E,A){Ze(v,A,E)})}function Va(h,v,E){E=Math.min(h.i.length,E);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Ce=-1;for(;;){const ot=["count="+E];Ce==-1?E>0?(Ce=Q[0].g,ot.push("ofs="+Ce)):Ce=0:ot.push("ofs="+Ce);let Ye=!0;for(let wt=0;wt<E;wt++){var J=Q[wt].g;const Rn=Q[wt].map;if(J-=Ce,J<0)Ce=Math.max(0,Q[wt].g-100),Ye=!1;else try{J="req"+J+"_"||"";try{var de=Rn instanceof Map?Rn:Object.entries(Rn);for(const[As,os]of de){let ls=os;y(os)&&(ls=Ln(os)),ot.push(J+As+"="+encodeURIComponent(ls))}}catch(As){throw ot.push(J+"type="+encodeURIComponent("_badmap")),As}}catch{A&&A(Rn)}}if(Ye){de=ot.join("&");break e}}de=void 0}return h=h.i.splice(0,E),v.G=h,de}function Kc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;k||w(),F||(k(),F=!0),R.add(v,h),h.A=0}}function rl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ar(p(h.Da,h),Xc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ar(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),xs(this),Yc(this))};function il(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Yc(h){h.g=new rs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=mt(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),$i(h,v),h.u&&h.o&&Bn(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Hs(mt(v)),E.u=null,E.R=!0,Cr(E,h)}s.Va=function(){this.C!=null&&(this.C=null,xs(this),rl(this),St(19))};function La(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function al(h,v){var E=null;if(h.g==v){La(h),il(h),h.g=null;var A=2}else if(Mi(h.h,v))E=v.G,Fs(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var Q=h.D;A=Na(),Bt(A,new Uc(A,E)),Qi(h)}else Kc(h);else if(Q=v.m,Q==3||Q==0&&v.X>0||!(A==1&&wd(h,v)||A==2&&rl(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),Q){case 1:$s(h,5);break;case 4:$s(h,10);break;case 3:$s(h,6);break;default:$s(h,2)}}}function Xc(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function $s(h,v){if(h.j.info("Error code "+v),v==2){var E=p(h.bb,h),A=h.Ua;const Q=!A;A=new is(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||jr(A,"https"),Hs(A),Q?nl(A.toString(),E):Mr(A.toString(),E)}else St(2);h.I=0,h.l&&h.l.pa(v),Wc(h),Gi(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Wc(h){if(h.I=0,h.ja=[],h.l){const v=Da(h.h);(v.length!=0||h.i.length!=0)&&(U(h.ja,v),U(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Zc(h,v,E){var A=E instanceof is?mt(E):new is(E);if(A.g!="")v&&(A.g=v+"."+A.g),Oi(A,A.u);else{var Q=d.location;A=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;const J=new is(null);A&&jr(J,A),v&&(J.g=v),Q&&Oi(J,Q),E&&(J.h=E),A=J}return E=h.G,v=h.wa,E&&v&&Ze(A,E,v),Ze(A,"VER",h.ka),$i(h,A),A}function Ua(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new rt(new Vi({ab:E})):new rt(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}s=Jc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function qa(){}qa.prototype.g=function(h,v){return new yn(h,v)};function yn(h,v){kt.call(this),this.g=new ka(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Vr(this)}b(yn,kt),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Hi(this.g)},yn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Ln(h),h=E);v.i.push(new bd(v.Ya++,h)),v.I==3&&Qi(v)},yn.prototype.N=function(){this.g.l=null,delete this.j,Hi(this.g),delete this.g,yn.Z.N.call(this)};function ol(h){Tr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(ol,Tr);function eu(){ss.call(this),this.status=1}b(eu,ss);function Vr(h){this.g=h}b(Vr,Jc),Vr.prototype.ra=function(){Bt(this.g,"a")},Vr.prototype.qa=function(h){Bt(this.g,new ol(h))},Vr.prototype.pa=function(h){Bt(this.g,new eu)},Vr.prototype.oa=function(){Bt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,MS=function(){return new qa},PS=function(){return Na()},DS=Un,$m={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,mh=bt,Yt.COMPLETE="complete",jS=Yt,Lc.EventType=vs,vs.OPEN="a",vs.CLOSE="b",vs.ERROR="c",vs.MESSAGE="d",kt.prototype.listen=kt.prototype.J,tc=Lc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,IS=rt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const EE="@firebase/firestore",SE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new Ep("@firebase/firestore");function go(){return va.logLevel}function ge(s,...e){if(va.logLevel<=Ue.DEBUG){const n=e.map(jp);va.debug(`Firestore (${Uo}): ${s}`,...n)}}function gr(s,...e){if(va.logLevel<=Ue.ERROR){const n=e.map(jp);va.error(`Firestore (${Uo}): ${s}`,...n)}}function Ro(s,...e){if(va.logLevel<=Ue.WARN){const n=e.map(jp);va.warn(`Firestore (${Uo}): ${s}`,...n)}}function jp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,OS(s,i,n)}function OS(s,e,n){let i=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw gr(i),new Error(i)}function Ke(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||OS(e,o,i)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(hn.UNAUTHENTICATED)))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class vR{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new dr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},y=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>y(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?y(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new dr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new kS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class _R{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ER{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new _R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const i=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=bR(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function qe(s,e){return s<e?-1:s>e?1:0}function Km(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return jm(o)===jm(u)?qe(o,u):jm(o)?1:-1}return qe(s.length,e.length)}const TR=55296,wR=57343;function jm(s){const e=s.charCodeAt(0);return e>=TR&&e<=wR}function Co(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class Ds{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ae(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ds?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=Ds.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return qe(e.length,n.length)}static compareSegments(e,n){const i=Ds.isNumericId(e),o=Ds.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Ds.extractNumericId(e).compare(Ds.extractNumericId(n)):Km(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mi.fromString(e.substring(4,e.length-2))}}class at extends Ds{construct(e,n,i){return new at(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const xR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Ds{construct(e,n,i){return new tn(e,n,i)}static isValidIdentifier(e){return xR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new tn([TE])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(i+=y,o++):(u(),o++)}if(u(),d)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(at.fromString(e))}static fromName(e){return new be(at.fromString(e).popFirst(5))}static empty(){return new be(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(s,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function AR(s,e,n,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function wE(s){if(!be.isDocumentKey(s))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xE(s){if(be.isDocumentKey(s))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function LS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Yh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae(12329,{type:typeof s})}function An(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yh(s);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Ic(s,e){if(!LS(s))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,NE=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*NE);return new ct(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AE)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NE}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Pt("string",ct._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function NR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(n+1,0):new ct(n,i));return new gi(o,be.empty(),e)}function RR(s){return new gi(s.readTime,s.key,mc)}class gi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new gi(Re.min(),be.empty(),mc)}static max(){return new gi(Re.max(),be.empty(),mc)}}function CR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(s.documentKey,e.documentKey),n!==0?n:qe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==IR)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(g=>i(g)))})),d=!0,u===o&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((o=>o?le.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,o)=>{const u=e.length,d=new Array(u);let y=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next((_=>{d[p]=_,++y,y===u&&i(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new le(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function DR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Wh(s){return s==null}function Ch(s){return s===0&&1/s==-1/0}function PR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="";function MR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=RE(e)),e=OR(s.get(n),e);return RE(e)}function OR(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case US:n+="";break;default:n+=u}}return n}function RE(s){return s+US+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ti(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function qS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new en(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new kn([])}unionWith(e){let n=new zt(tn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new zS("Invalid base64 string: "+u):u}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const kR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=kR.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function vi(s){return typeof s=="string"?rn.fromBase64String(s):rn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="server_timestamp",FS="__type__",HS="__previous_value__",GS="__local_write_time__";function Mp(s){return(s?.mapValue?.fields||{})[FS]?.stringValue===BS}function Zh(s){const e=s.mapValue.fields[HS];return Mp(e)?Zh(e):e}function pc(s){const e=yi(s.mapValue.fields[GS].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,i,o,u,d,y,g,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const Ih="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="__type__",LR="__max__",ih={mapValue:{}},$S="__vector__",jh="value";function _i(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Mp(s)?4:qR(s)?9007199254740991:UR(s)?10:11:Ae(28295,{value:s})}function Us(s,e){if(s===e)return!0;const n=_i(s);if(n!==_i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return pc(s).isEqual(pc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=yi(o.timestampValue),y=yi(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return vi(o.bytesValue).isEqual(vi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Rt(o.geoPointValue.latitude)===Rt(u.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Rt(o.integerValue)===Rt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Rt(o.doubleValue),y=Rt(u.doubleValue);return d===y?Ch(d)===Ch(y):isNaN(d)&&isNaN(y)}return!1})(s,e);case 9:return Co(s.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(CE(d)!==CE(y))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(y[g]===void 0||!Us(d[g],y[g])))return!1;return!0})(s,e);default:return Ae(52216,{left:s})}}function yc(s,e){return(s.values||[]).find((n=>Us(n,e)))!==void 0}function Io(s,e){if(s===e)return 0;const n=_i(s),i=_i(e);if(n!==i)return qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=Rt(u.integerValue||u.doubleValue),g=Rt(d.integerValue||d.doubleValue);return y<g?-1:y>g?1:y===g?0:isNaN(y)?isNaN(g)?0:-1:1})(s,e);case 3:return jE(s.timestampValue,e.timestampValue);case 4:return jE(pc(s),pc(e));case 5:return Km(s.stringValue,e.stringValue);case 6:return(function(u,d){const y=vi(u),g=vi(d);return y.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),g=d.split("/");for(let p=0;p<y.length&&p<g.length;p++){const _=qe(y[p],g[p]);if(_!==0)return _}return qe(y.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=qe(Rt(u.latitude),Rt(d.latitude));return y!==0?y:qe(Rt(u.longitude),Rt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return DE(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},g=d.fields||{},p=y[jh]?.arrayValue,_=g[jh]?.arrayValue,b=qe(p?.values?.length||0,_?.values?.length||0);return b!==0?b:DE(p,_)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===ih.mapValue&&d===ih.mapValue)return 0;if(u===ih.mapValue)return 1;if(d===ih.mapValue)return-1;const y=u.fields||{},g=Object.keys(y),p=d.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let b=0;b<g.length&&b<_.length;++b){const x=Km(g[b],_[b]);if(x!==0)return x;const C=Io(y[g[b]],p[_[b]]);if(C!==0)return C}return qe(g.length,_.length)})(s.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function jE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return qe(s,e);const n=yi(s),i=yi(e),o=qe(n.seconds,i.seconds);return o!==0?o:qe(n.nanos,i.nanos)}function DE(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=Io(n[o],i[o]);if(u)return u}return qe(n.length,i.length)}function jo(s){return Ym(s)}function Ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=yi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return vi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return be.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=Ym(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Ym(n.fields[d])}`;return o+"}"})(s.mapValue):Ae(61005,{value:s})}function ph(s){switch(_i(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(s);return e?16+ph(e):16;case 5:return 2*s.stringValue.length;case 6:return vi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+ph(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Ti(i.fields,((u,d)=>{o+=u.length+ph(d)})),o})(s.mapValue);default:throw Ae(13486,{value:s})}}function PE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Xm(s){return!!s&&"integerValue"in s}function Op(s){return!!s&&"arrayValue"in s}function ME(s){return!!s&&"nullValue"in s}function OE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gh(s){return!!s&&"mapValue"in s}function UR(s){return(s?.mapValue?.fields||{})[QS]?.stringValue===$S}function oc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ti(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=oc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(s.arrayValue.values[n]);return e}return{...s}}function qR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===LR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=tn.emptyPath(),i={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=y.popLast()}d?i[y.lastSegment()]=oc(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ti(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new xn(oc(this.value))}}function KS(s){const e=[];return Ti(s.fields,((n,i)=>{const o=new tn([n]);if(gh(i)){const u=KS(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,i,o,u,d,y){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new dn(e,0,Re.min(),Re.min(),Re.min(),xn.empty(),0)}static newFoundDocument(e,n,i,o){return new dn(e,1,n,Re.min(),i,o,0)}static newNoDocument(e,n){return new dn(e,2,n,Re.min(),Re.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,Re.min(),Re.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function kE(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=be.comparator(be.fromName(d.referenceValue),n.key):i=Io(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function VE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Us(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function zR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{}class Dt extends YS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new FR(e,n,i):n==="array-contains"?new QR(e,i):n==="in"?new $R(e,i):n==="not-in"?new KR(e,i):n==="array-contains-any"?new YR(e,i):new Dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new HR(e,i):new GR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Io(n,this.value)):n!==null&&_i(this.value)===_i(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends YS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ps(e,n)}matches(e){return XS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XS(s){return s.op==="and"}function WS(s){return BR(s)&&XS(s)}function BR(s){for(const e of s.filters)if(e instanceof ps)return!1;return!0}function Wm(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+jo(s.value);if(WS(s))return s.filters.map((e=>Wm(e))).join(",");{const e=s.filters.map((n=>Wm(n))).join(",");return`${s.op}(${e})`}}function ZS(s,e){return s instanceof Dt?(function(i,o){return o instanceof Dt&&i.op===o.op&&i.field.isEqual(o.field)&&Us(i.value,o.value)})(s,e):s instanceof ps?(function(i,o){return o instanceof ps&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,y)=>u&&ZS(d,o.filters[y])),!0):!1})(s,e):void Ae(19439)}function JS(s){return s instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${jo(n.value)}`})(s):s instanceof ps?(function(n){return n.op.toString()+" {"+n.getFilters().map(JS).join(" ,")+"}"})(s):"Filter"}class FR extends Dt{constructor(e,n,i){super(e,n,i),this.key=be.fromName(i.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class HR extends Dt{constructor(e,n){super(e,"in",n),this.keys=e1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class GR extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=e1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function e1(s,e){return(e.arrayValue?.values||[]).map((n=>be.fromName(n.referenceValue)))}class QR extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Op(n)&&yc(n.arrayValue,this.value)}}class $R extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class KR extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class YR extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Op(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>yc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n=null,i=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function LE(s,e=null,n=[],i=[],o=null,u=null,d=null){return new XR(s,e,n,i,o,u,d)}function kp(s){const e=Ie(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Wm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=n}return e.Te}function Vp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!zR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!ZS(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!VE(s.startAt,e.startAt)&&VE(s.endAt,e.endAt)}function Zm(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n=null,i=[],o=[],u=null,d="F",y=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WR(s,e,n,i,o,u,d,y){return new Bo(s,e,n,i,o,u,d,y)}function Jh(s){return new Bo(s)}function UE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function t1(s){return s.collectionGroup!==null}function lc(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new zt(tn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(y=y.add(p.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vc(u,i))})),n.has(tn.keyField().canonicalString())||e.Ie.push(new vc(tn.keyField(),i))}return e.Ie}function Os(s){const e=Ie(s);return e.Ee||(e.Ee=ZR(e,lc(s))),e.Ee}function ZR(s,e){if(s.limitType==="F")return LE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vc(o.field,u)}));const n=s.endAt?new Dh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Dh(s.startAt.position,s.startAt.inclusive):null;return LE(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Jm(s,e){const n=s.filters.concat([e]);return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function ep(s,e,n){return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function ed(s,e){return Vp(Os(s),Os(e))&&s.limitType===e.limitType}function n1(s){return`${kp(Os(s))}|lt:${s.limitType}`}function yo(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>JS(o))).join(", ")}]`),Wh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>jo(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>jo(o))).join(",")),`Target(${i})`})(Os(s))}; limitType=${s.limitType})`}function td(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):be.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of lc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,y,g){const p=kE(d,y,g);return d.inclusive?p<=0:p<0})(i.startAt,lc(i),o)||i.endAt&&!(function(d,y,g){const p=kE(d,y,g);return d.inclusive?p>=0:p>0})(i.endAt,lc(i),o))})(s,e)}function JR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function s1(s){return(e,n)=>{let i=!1;for(const o of lc(s)){const u=eC(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function eC(s,e,n){const i=s.field.isKeyField()?be.comparator(e.key,n.key):(function(u,d,y){const g=d.data.field(u),p=y.data.field(u);return g!==null&&p!==null?Io(g,p):Ae(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return qS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new gt(be.comparator);function yr(){return tC}const r1=new gt(be.comparator);function nc(...s){let e=r1;for(const n of s)e=e.insert(n.key,n);return e}function i1(s){let e=r1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ua(){return cc()}function a1(){return cc()}function cc(){return new ba((s=>s.toString()),((s,e)=>s.isEqual(e)))}const nC=new gt(be.comparator),sC=new zt(be.comparator);function ze(...s){let e=sC;for(const n of s)e=e.add(n);return e}const rC=new zt(qe);function iC(){return rC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function o1(s){return{integerValue:""+s}}function aC(s,e){return PR(e)?o1(e):Lp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function oC(s,e,n){return s instanceof Ph?(function(o,u){const d={fields:{[FS]:{stringValue:BS},[GS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Mp(u)&&(u=Zh(u)),u&&(d.fields[HS]=u),{mapValue:d}})(n,e):s instanceof _c?c1(s,e):s instanceof Ec?u1(s,e):(function(o,u){const d=l1(o,u),y=qE(d)+qE(o.Ae);return Xm(d)&&Xm(o.Ae)?o1(y):Lp(o.serializer,y)})(s,e)}function lC(s,e,n){return s instanceof _c?c1(s,e):s instanceof Ec?u1(s,e):n}function l1(s,e){return s instanceof Mh?(function(i){return Xm(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Ph extends nd{}class _c extends nd{constructor(e){super(),this.elements=e}}function c1(s,e){const n=h1(e);for(const i of s.elements)n.some((o=>Us(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Ec extends nd{constructor(e){super(),this.elements=e}}function u1(s,e){let n=h1(e);for(const i of s.elements)n=n.filter((o=>!Us(o,i)));return{arrayValue:{values:n}}}class Mh extends nd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qE(s){return Rt(s.integerValue||s.doubleValue)}function h1(s){return Op(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function cC(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof _c&&o instanceof _c||i instanceof Ec&&o instanceof Ec?Co(i.elements,o.elements,Us):i instanceof Mh&&o instanceof Mh?Us(i.Ae,o.Ae):i instanceof Ph&&o instanceof Ph})(s.transform,e.transform)}class uC{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class sd{}function d1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Up(s.key,Zn.none()):new jc(s.key,s.data,Zn.none());{const n=s.data,i=xn.empty();let o=new zt(tn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new wi(s.key,i,new kn(o.toArray()),Zn.none())}}function hC(s,e,n){s instanceof jc?(function(o,u,d){const y=o.value.clone(),g=BE(o.fieldTransforms,u,d.transformResults);y.setAll(g),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):s instanceof wi?(function(o,u,d){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=BE(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(f1(o)),g.setAll(y),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function uc(s,e,n,i){return s instanceof jc?(function(u,d,y,g){if(!yh(u.precondition,d))return y;const p=u.value.clone(),_=FE(u.fieldTransforms,g,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(s,e,n,i):s instanceof wi?(function(u,d,y,g){if(!yh(u.precondition,d))return y;const p=FE(u.fieldTransforms,g,d),_=d.data;return _.setAll(f1(u)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(s,e,n,i):(function(u,d,y){return yh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(s,e,n)}function dC(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=l1(i.transform,o||null);u!=null&&(n===null&&(n=xn.empty()),n.set(i.field,u))}return n||null}function zE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Co(i,o,((u,d)=>cC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class jc extends sd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wi extends sd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function f1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function BE(s,e,n){const i=new Map;Ke(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,y=e.data.field(u.field);i.set(u.field,lC(d,y,n[o]))}return i}function FE(s,e,n){const i=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);i.set(o.field,oC(u,d,e))}return i}class Up extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fC extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&hC(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=a1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const g=d1(d,y);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,((n,i)=>zE(n,i)))&&Co(this.baseMutations,e.baseMutations,((n,i)=>zE(n,i)))}}class qp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return nC})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new qp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Fe;function yC(s){switch(s){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:s})}}function m1(s){if(s===void 0)return gr("GRPC error has no .code"),re.UNKNOWN;switch(s){case jt.OK:return re.OK;case jt.CANCELLED:return re.CANCELLED;case jt.UNKNOWN:return re.UNKNOWN;case jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case jt.INTERNAL:return re.INTERNAL;case jt.UNAVAILABLE:return re.UNAVAILABLE;case jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case jt.NOT_FOUND:return re.NOT_FOUND;case jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case jt.ABORTED:return re.ABORTED;case jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case jt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:s})}}(Fe=jt||(jt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new mi([4294967295,4294967295],0);function HE(s){const e=vC().encode(s),n=new CS;return n.update(e),new Uint8Array(n.digest())}function GE(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mi([n,i],0),new mi([o,u],0)]}class zp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sc(`Invalid padding: ${n}`);if(i<0)throw new sc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(mi.fromNumber(i)));return o.compare(_C)===1&&(o=new mi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=HE(e),[i,o]=GE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new zp(u,o,n);return i.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=HE(e),[i,o]=GE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new rd(Re.min(),o,new gt(qe),yr(),ze())}}class Dc{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Dc(i,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class p1{constructor(e,n){this.targetId=e,this.Ce=n}}class g1{constructor(e,n,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class QE{constructor(){this.ve=0,this.Fe=$E(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),i=ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ae(38017,{changeType:u})}})),new Dc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=$E()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EC{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=ah(),this.He=ah(),this.Ye=new gt(qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(i===0){const d=new be(u.path);this.et(n,d,dn.newNoDocument(d,Re.min()))}else Ke(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const y=this.ut(e),g=y?this.ct(y,e,d):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=vi(i).toUint8Array()}catch(g){if(g instanceof zS)return Ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{y=new zp(d,o,u)}catch(g){return Ro(g instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return y.ge===0?null:y}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&Zm(y.target)){const g=new be(y.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,dn.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let i=ze();this.He.forEach(((u,d)=>{let y=!0;d.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new rd(e,n,this.Ye,this.je,i);return this.je=yr(),this.Je=ah(),this.He=ah(),this.Ye=new gt(qe),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new QE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zt(qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zt(qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ah(){return new gt(be.comparator)}function $E(){return new gt(be.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},bC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TC={and:"AND",or:"OR"};class wC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tp(s,e){return s.useProto3Json||Wh(e)?e:{value:e}}function Oh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function xC(s,e){return Oh(s,e.toTimestamp())}function ks(s){return Ke(!!s,49232),Re.fromTimestamp((function(n){const i=yi(n);return new ct(i.seconds,i.nanos)})(s))}function Bp(s,e){return np(s,e).canonicalString()}function np(s,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function v1(s){const e=at.fromString(s);return Ke(T1(e),10190,{key:e.toString()}),e}function sp(s,e){return Bp(s.databaseId,e.path)}function Dm(s,e){const n=v1(e);if(n.get(1)!==s.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new be(E1(n))}function _1(s,e){return Bp(s.databaseId,e)}function AC(s){const e=v1(s);return e.length===4?at.emptyPath():E1(e)}function rp(s){return new at(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function E1(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function KE(s,e,n){return{name:sp(s,e),fields:n.value.mapValue.fields}}function NC(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?(Ke(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(p){const _=p.code===void 0?re.UNKNOWN:m1(p.code);return new pe(_,p.message||"")})(d);n=new g1(i,o,u,y||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Dm(s,i.document.name),u=ks(i.document.updateTime),d=i.document.createTime?ks(i.document.createTime):Re.min(),y=new xn({mapValue:{fields:i.document.fields}}),g=dn.newFoundDocument(o,u,d,y),p=i.targetIds||[],_=i.removedTargetIds||[];n=new vh(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Dm(s,i.document),u=i.readTime?ks(i.readTime):Re.min(),d=dn.newNoDocument(o,u),y=i.removedTargetIds||[];n=new vh([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Dm(s,i.document),u=i.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new gC(o,u),y=i.targetId;n=new p1(y,d)}}return n}function RC(s,e){let n;if(e instanceof jc)n={update:KE(s,e.key,e.value)};else if(e instanceof Up)n={delete:sp(s,e.key)};else if(e instanceof wi)n={update:KE(s,e.key,e.data),updateMask:VC(e.fieldMask)};else{if(!(e instanceof fC))return Ae(16599,{Vt:e.type});n={verify:sp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const y=d.transform;if(y instanceof Ph)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof _c)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Mh)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Ae(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:xC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(s,e.precondition)),n}function CC(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?ks(o.updateTime):ks(u);return d.isEqual(Re.min())&&(d=ks(u)),new uC(d,o.transformResults||[])})(n,e)))):[]}function IC(s,e){return{documents:[_1(s,e.path)]}}function jC(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=_1(s,o);const u=(function(p){if(p.length!==0)return b1(ps.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(p){if(p.length!==0)return p.map((_=>(function(x){return{field:vo(x.field),direction:MC(x.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=tp(s,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function DC(s){let e=AC(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(b){const x=S1(b);return x instanceof ps&&WS(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((x=>(function(U){return new vc(_o(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(x)))})(n.orderBy));let y=null;n.limit&&(y=(function(b){let x;return x=typeof b=="object"?b.value:b,Wh(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(b){const x=!!b.before,C=b.values||[];return new Dh(C,x)})(n.startAt));let p=null;return n.endAt&&(p=(function(b){const x=!b.before,C=b.values||[];return new Dh(C,x)})(n.endAt)),WR(e,o,d,u,y,"F",g,p)}function PC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_o(n.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=_o(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=_o(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=_o(n.unaryFilter.field);return Dt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Dt.create(_o(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ps.create(n.compositeFilter.filters.map((i=>S1(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(s):Ae(30097,{filter:s})}function MC(s){return SC[s]}function OC(s){return bC[s]}function kC(s){return TC[s]}function vo(s){return{fieldPath:s.canonicalString()}}function _o(s){return tn.fromServerFormat(s.fieldPath)}function b1(s){return s instanceof Dt?(function(n){if(n.op==="=="){if(OE(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(ME(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OE(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(ME(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:OC(n.op),value:n.value}}})(s):s instanceof ps?(function(n){const i=n.getFilters().map((o=>b1(o)));return i.length===1?i[0]:{compositeFilter:{op:kC(n.op),filters:i}}})(s):Ae(54877,{filter:s})}function VC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function T1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,i,o,u=Re.min(),d=Re.min(),y=rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=g}withSequenceNumber(e){return new ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.yt=e}}function UC(s){const e=DC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ep(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.Cn=new zC}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(gi.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class zC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new zt(at.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new zt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w1=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(w1,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",BC=1048576;function WE([s,e],[n,i]){const o=qe(s,n);return o===0?qe(e,i):o}class FC{constructor(e){this.Ir=e,this.buffer=new zt(WE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();WE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(XE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zo(n)?ge(XE,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Vr(3e5)}))}}class GC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Xh.ce);const i=new FC(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(YE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,u,d,y,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,y=Date.now(),this.removeTargets(e,i,n)))).next((b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(p=Date.now(),go()<=Ue.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(g-y)+`ms
	Removed ${b} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function QC(s,e){return new GC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.changes=new ba((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&uc(i.mutation,o,kn.empty(),ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ze()){const o=ua();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let d=nc();return u.forEach(((y,g)=>{d=d.insert(y,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ua();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ze())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,i,o){let u=yr();const d=cc(),y=(function(){return cc()})();return n.forEach(((g,p)=>{const _=i.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof wi)?u=u.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),uc(_.mutation,p,_.mutation.getFieldMask(),ct.now())):d.set(p.key,kn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,_)=>d.set(p,_))),n.forEach(((p,_)=>y.set(p,new KC(_,d.get(p)??null)))),y)))}recalculateAndSaveOverlays(e,n){const i=cc();let o=new gt(((d,y)=>d-y)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let _=i.get(g)||kn.empty();_=y.applyToLocalView(p,_),i.set(g,_);const b=(o.get(y.batchId)||ze()).add(g);o=o.insert(y.batchId,b)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const g=y.getNext(),p=g.key,_=g.value,b=a1();_.forEach((x=>{if(!u.has(x)){const C=d1(n.get(x),i.get(x));C!==null&&b.set(x,C),u=u.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,b))}return le.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):t1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):le.resolve(ua());let y=mc,g=u;return d.next((p=>le.forEach(p,((_,b)=>(y<b.largestBatchId&&(y=b.largestBatchId),u.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{g=g.insert(_,x)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,ze()))).next((_=>({batchId:y,changes:i1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((i=>{let o=nc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=nc();return this.indexManager.getCollectionParents(e,u).next((y=>le.forEach(y,(g=>{const p=(function(b,x){return new Bo(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next((_=>{_.forEach(((b,x)=>{d=d.insert(b,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((d=>{u.forEach(((g,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,dn.newInvalidDocument(_)))}));let y=nc();return d.forEach(((g,p)=>{const _=u.get(g);_!==void 0&&uc(_.mutation,p,kn.empty(),ct.now()),td(n,p)&&(y=y.insert(g,p))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ks(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:UC(o.bundledQuery),readTime:ks(o.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.overlays=new gt(be.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ua();return le.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.St(e,n,u)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const o=ua(),u=n.length+1,d=new be(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const g=y.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new gt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=u.get(p.largestBatchId);_===null&&(_=ua(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const y=ua(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>y.set(p,_))),!(y.size()>=o)););return le.resolve(y)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new pC(n,i));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Qr=new zt($t.$r),this.Ur=new zt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new $t(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new $t(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new be(new at([])),i=new $t(n,e),o=new $t(n,e+1),u=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new at([])),i=new $t(n,e),o=new $t(n,e+1);let u=ze();return this.Ur.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new $t(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||qe(e.Yr,n.Yr)}static Kr(e,n){return qe(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt($t.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new mC(u,n,i,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new $t(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Pp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new $t(n,0),o=new $t(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(d=>{const y=this.Xr(d.Yr);u.push(y)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new zt(qe);return n.forEach((o=>{const u=new $t(o,0),d=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(y=>{i=i.add(y.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;be.isDocumentKey(u)||(u=u.child(""));const d=new $t(new be(u),0);let y=new zt(qe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(y=y.add(g.Yr)),!0)}),d),le.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,(o=>{const u=new $t(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new $t(n,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.ri=e,this.docs=(function(){return new gt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let i=yr();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=yr();const d=n.path,y=new be(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(y);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||CR(RR(_),i)<=0||(o.has(_.key)||td(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Ae(9500)}ii(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new tI(this)}getSize(e){return le.resolve(this.size)}}class tI extends $C{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.persistence=e,this.si=new ba((n=>kp(n)),Vp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Fp,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&i.get(y.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xh(0),this.li=!1,this.li=!0,this.hi=new ZC,this.referenceDelegate=e(this),this.Pi=new nI(this),this.indexManager=new qC,this.remoteDocumentCache=(function(o){return new eI(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new LC(n),this.Ii=new XC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new JC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const o=new sI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class sI extends jR{constructor(e){super(),this.currentSequenceNumber=e}}class Hp{constructor(e){this.persistence=e,this.Ri=new Fp,this.Vi=null}static mi(e){return new Hp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=be.fromPath(i);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new ba((i=>MR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=QC(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?le.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(i++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=ze(),o=ze();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Px()?8:DR(fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new rI;return this.Ss(e,n,d).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>u.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(go()<=Ue.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(go()<=Ue.DEBUG&&ge("QueryEngine","Query:",yo(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(go()<=Ue.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(n))):le.resolve())}ys(e,n){if(UE(n))return le.resolve(null);let i=Os(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=ep(n,null,"F"),i=Os(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=ze(...u);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.Ds(n,y);return this.Cs(n,p,d,g.readTime)?this.ys(e,ep(n,null,"F")):this.vs(e,p,n,g)}))))})))))}ws(e,n,i,o){return UE(n)||o.isEqual(Re.min())?le.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,i,o)?le.resolve(null):(go()<=Ue.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(n)),this.vs(e,d,n,NR(o,mc)).next((y=>y)))}))}Ds(e,n){let i=new zt(s1(e));return n.forEach(((o,u)=>{td(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return go()<=Ue.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",yo(n)),this.ps.getDocumentsMatchingQuery(e,n,gi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",aI=3e8;class oI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(qe),this.xs=new ba((u=>kp(u)),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function lI(s,e,n,i){return new oI(s,e,n,i)}async function A1(s,e){const n=Ie(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],y=[];let g=ze();for(const p of o){d.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of u){y.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(i,g).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:y})))}))}))}function cI(s,e){const n=Ie(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,g,p,_){const b=p.batch,x=b.keys();let C=le.resolve();return x.forEach((U=>{C=C.next((()=>_.getEntry(g,U))).next((B=>{const V=p.docVersions.get(U);Ke(V!==null,48541),B.version.compareTo(V)<0&&(b.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),_.addEntry(B)))}))})),C.next((()=>y.mutationQueue.removeMutationBatch(g,b)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(y){let g=ze();for(let p=0;p<y.mutationResults.length;++p)y.mutationResults[p].transformResults.length>0&&(g=g.add(y.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function N1(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function uI(s,e){const n=Ie(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((_,b)=>{const x=o.get(b);if(!x)return;y.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,b))));let C=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(rn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(b,C),(function(B,V,Y){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=aI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(x,C,_)&&y.push(n.Pi.updateTargetData(u,C))}));let g=yr(),p=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),y.push(hI(u,d,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!i.isEqual(Re.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((b=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));y.push(_)}return le.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function hI(s,e,n){let i=ze(),o=ze();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=yr();return n.forEach(((y,g)=>{const p=u.get(y);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(y)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(y,g.readTime),d=d.insert(y,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),d=d.insert(y,g)):ge(Qp,"Ignoring outdated watch update for ",y,". Current version:",p.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function dI(s,e){const n=Ie(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Pp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function fI(s,e){const n=Ie(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((u=>u?(o=u,le.resolve(o)):n.Pi.allocateTargetId(i).next((d=>(o=new ui(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function ip(s,e,n){const i=Ie(s),o=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!zo(d))throw d;ge(Qp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function ZE(s,e,n){const i=Ie(s);let o=Re.min(),u=ze();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,p,_){const b=Ie(g),x=b.xs.get(_);return x!==void 0?le.resolve(b.Ms.get(x)):b.Pi.getTargetData(p,_)})(i,d,Os(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,y.targetId).next((g=>{u=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?u:ze()))).next((y=>(mI(i,JR(e),y),{documents:y,Qs:u})))))}function mI(s,e,n){let i=s.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class JE{constructor(){this.activeTargetIds=iC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pI{constructor(){this.Mo=new JE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="ConnectivityMonitor";class t0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(e0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(e0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function ap(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="RestConnection",yI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,u){const d=ap(),y=this.zo(e,n.toUriEncodedString());ge(Pm,`Sending RPC '${e}' ${d}:`,y,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(y),_=ko(p);return this.Jo(e,y,g,i,_).then((b=>(ge(Pm,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Ro(Pm,`RPC '${e}' ${d} failed with error: `,b,"url: ",y,"request:",i),b}))}Ho(e,n,i,o,u,d){return this.Go(e,n,i,o,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const i=yI[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class EI extends vI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const d=ap();return new Promise(((y,g)=>{const p=new IS;p.setWithCredentials(!0),p.listenOnce(jS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case mh.NO_ERROR:const b=p.getResponseJson();ge(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),y(b);break;case mh.TIMEOUT:ge(un,`RPC '${e}' ${d} timed out`),g(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const x=p.getStatus();if(ge(un,`RPC '${e}' ${d} failed with status:`,x,"response text:",p.getResponseText()),x>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C?.error;if(U&&U.status&&U.message){const B=(function(Y){const oe=Y.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(oe)>=0?oe:re.UNKNOWN})(U.status);g(new pe(B,U.message))}else g(new pe(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(un,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ge(un,`RPC '${e}' ${d} sending request:`,o),p.send(n,"POST",_,i,15)}))}T_(e,n,i){const o=ap(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=MS(),y=PS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const _=u.join("");ge(un,`Creating RPC '${e}' stream ${o}: ${_}`,g);const b=d.createWebChannel(_,g);this.I_(b);let x=!1,C=!1;const U=new _I({Yo:V=>{C?ge(un,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(x||(ge(un,`Opening RPC '${e}' stream ${o} transport.`),b.open(),x=!0),ge(un,`RPC '${e}' stream ${o} sending:`,V),b.send(V))},Zo:()=>b.close()}),B=(V,Y,oe)=>{V.listen(Y,($=>{try{oe($)}catch(H){setTimeout((()=>{throw H}),0)}}))};return B(b,tc.EventType.OPEN,(()=>{C||(ge(un,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),B(b,tc.EventType.CLOSE,(()=>{C||(C=!0,ge(un,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(b))})),B(b,tc.EventType.ERROR,(V=>{C||(C=!0,Ro(un,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),U.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),B(b,tc.EventType.MESSAGE,(V=>{if(!C){const Y=V.data[0];Ke(!!Y,16349);const oe=Y,$=oe?.error||oe[0]?.error;if($){ge(un,`RPC '${e}' stream ${o} received error:`,$);const H=$.status;let k=(function(w){const N=jt[w];if(N!==void 0)return m1(N)})(H),F=$.message;k===void 0&&(k=re.INTERNAL,F="Unknown error status: "+H+" with message "+$.message),C=!0,U.a_(new pe(k,F)),b.close()}else ge(un,`RPC '${e}' stream ${o} received:`,Y),U.u_(Y)}})),B(y,DS.STAT_EVENT,(V=>{V.stat===$m.PROXY?ge(un,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===$m.NOPROXY&&ge(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(s){return new wC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="PersistentStream";class C1{constructor(e,n,i,o,u,d,y,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(n0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(n0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SI extends C1{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NC(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?ks(d.readTime):Re.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=rp(this.serializer),n.addTarget=(function(u,d){let y;const g=d.target;if(y=Zm(g)?{documents:IC(u,g)}:{query:jC(u,g).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=y1(u,d.resumeToken);const p=tp(u,d.expectedCount);p!==null&&(y.expectedCount=p)}else if(d.snapshotVersion.compareTo(Re.min())>0){y.readTime=Oh(u,d.snapshotVersion.toTimestamp());const p=tp(u,d.expectedCount);p!==null&&(y.expectedCount=p)}return y})(this.serializer,e);const i=PC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=rp(this.serializer),n.removeTarget=e,this.q_(n)}}class bI extends C1{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CC(e.writeResults,e.commitTime),i=ks(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=rp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>RC(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class wI extends TI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,np(n,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(re.UNKNOWN,u.toString())}))}Ho(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,np(n,i),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class AI{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Ta(this)&&(ge(_a,"Restarting streams for network reachability change."),await(async function(g){const p=Ie(g);p.Ea.add(4),await Pc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ad(p)})(this))}))})),this.Ra=new xI(i,o)}}async function ad(s){if(Ta(s))for(const e of s.da)await e(!0)}async function Pc(s){for(const e of s.da)await e(!1)}function I1(s,e){const n=Ie(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xp(n)?Yp(n):Fo(n).O_()&&Kp(n,e))}function $p(s,e){const n=Ie(s),i=Fo(n);n.Ia.delete(e),i.O_()&&j1(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ta(n)&&n.Ra.set("Unknown"))}function Kp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(s).Y_(e)}function j1(s,e){s.Va.Ue(e),Fo(s).Z_(e)}function Yp(s){s.Va=new EC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Fo(s).start(),s.Ra.ua()}function Xp(s){return Ta(s)&&!Fo(s).x_()&&s.Ia.size>0}function Ta(s){return Ie(s).Ea.size===0}function D1(s){s.Va=void 0}async function NI(s){s.Ra.set("Online")}async function RI(s){s.Ia.forEach(((e,n)=>{Kp(s,e)}))}async function CI(s,e){D1(s),Xp(s)?(s.Ra.ha(e),Yp(s)):s.Ra.set("Unknown")}async function II(s,e,n){if(s.Ra.set("Online"),e instanceof g1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(s,e)}catch(i){ge(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vh(s,i)}else if(e instanceof vh?s.Va.Ze(e):e instanceof p1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const i=await N1(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const y=u.Va.Tt(d);return y.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(g.resumeToken,d))}})),y.targetMismatches.forEach(((g,p)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),j1(u,g);const b=new ui(_.target,g,p,_.sequenceNumber);Kp(u,b)})),u.remoteSyncer.applyRemoteEvent(y)})(s,n)}catch(i){ge(_a,"Failed to raise snapshot:",i),await Vh(s,i)}}async function Vh(s,e,n){if(!zo(e))throw e;s.Ea.add(1),await Pc(s),s.Ra.set("Offline"),n||(n=()=>N1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(_a,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await ad(s)}))}function P1(s,e){return e().catch((n=>Vh(s,n,e)))}async function od(s){const e=Ie(s),n=Ei(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pp;for(;jI(e);)try{const o=await dI(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,DI(e,o)}catch(o){await Vh(e,o)}M1(e)&&O1(e)}function jI(s){return Ta(s)&&s.Ta.length<10}function DI(s,e){s.Ta.push(e);const n=Ei(s);n.O_()&&n.X_&&n.ea(e.mutations)}function M1(s){return Ta(s)&&!Ei(s).x_()&&s.Ta.length>0}function O1(s){Ei(s).start()}async function PI(s){Ei(s).ra()}async function MI(s){const e=Ei(s);for(const n of s.Ta)e.ea(n.mutations)}async function OI(s,e,n){const i=s.Ta.shift(),o=qp.from(i,e,n);await P1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await od(s)}async function kI(s,e){e&&Ei(s).X_&&await(async function(i,o){if((function(d){return yC(d)&&d!==re.ABORTED})(o.code)){const u=i.Ta.shift();Ei(i).B_(),await P1(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await od(i)}})(s,e),M1(s)&&O1(s)}async function s0(s,e){const n=Ie(s);n.asyncQueue.verifyOperationInProgress(),ge(_a,"RemoteStore received new credentials");const i=Ta(n);n.Ea.add(3),await Pc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ad(n)}async function VI(s,e){const n=Ie(s);e?(n.Ea.delete(2),await ad(n)):e||(n.Ea.add(2),await Pc(n),n.Ra.set("Unknown"))}function Fo(s){return s.ma||(s.ma=(function(n,i,o){const u=Ie(n);return u.sa(),new SI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:NI.bind(null,s),t_:RI.bind(null,s),r_:CI.bind(null,s),H_:II.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Xp(s)?Yp(s):s.Ra.set("Unknown")):(await s.ma.stop(),D1(s))}))),s.ma}function Ei(s){return s.fa||(s.fa=(function(n,i,o){const u=Ie(n);return u.sa(),new bI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:PI.bind(null,s),r_:kI.bind(null,s),ta:MI.bind(null,s),na:OI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await od(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(_a,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,y=new Wp(e,n,d,o,u);return y.start(i),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(s,e){if(gr("AsyncQueue",`${e}: ${s}`),zo(s))return new pe(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static emptySet(e){return new xo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||be.comparator(n.key,i.key):(n,i)=>be.comparator(n.key,i.key),this.keyedMap=nc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.ga=new gt(be.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Po{constructor(e,n,i,o,u,d,y,g,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new Po(e,n,xo.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UI{constructor(){this.queries=i0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ie(n),u=o.queries;o.queries=i0(),u.forEach(((d,y)=>{for(const g of y.Sa)g.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function i0(){return new ba((s=>n1(s)),ed)}async function Jp(s,e){const n=Ie(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new LI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=Zp(d,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&tg(n)}async function eg(s,e){const n=Ie(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qI(s,e){const n=Ie(s);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.Sa)y.Fa(o)&&(i=!0);d.wa=o}}i&&tg(n)}function zI(s,e,n){const i=Ie(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function tg(s){s.Ca.forEach((e=>{e.next()}))}var op,a0;(a0=op||(op={})).Ma="default",a0.Cache="cache";class ng{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Po(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.key=e}}class V1{constructor(e){this.key=e}}class BI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=s1(e),this.tu=new xo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new r0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,b)=>{const x=o.get(_),C=td(this.query,b)?b:null,U=!!x&&this.mutatedKeys.has(x.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;x&&C?x.data.isEqual(C.data)?U!==B&&(i.track({type:3,doc:C}),V=!0):this.su(x,C)||(i.track({type:2,doc:C}),V=!0,(g&&this.eu(C,g)>0||p&&this.eu(C,p)<0)&&(y=!0)):!x&&C?(i.track({type:0,doc:C}),V=!0):x&&!C&&(i.track({type:1,doc:x}),V=!0,(g||p)&&(y=!0)),V&&(C?(d=d.add(C),u=B?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,b)=>(function(C,U){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:V})}};return B(C)-B(U)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(i),o=o??!1;const y=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,d.length!==0||p?{snapshot:new Po(this.query,e.tu,u,d,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new V1(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new k1(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sg="SyncEngine";class FI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class HI{constructor(e){this.key=e,this.hu=!1}}class GI{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ba((y=>n1(y)),ed),this.Iu=new Map,this.Eu=new Set,this.du=new gt(be.comparator),this.Au=new Map,this.Ru=new Fp,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QI(s,e,n=!0){const i=F1(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await L1(i,e,n,!0),o}async function $I(s,e){const n=F1(s);await L1(n,e,!0,!1)}async function L1(s,e,n,i){const o=await fI(s.localStore,Os(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let y;return i&&(y=await KI(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&I1(s.remoteStore,o),y}async function KI(s,e,n,i,o){s.pu=(b,x,C)=>(async function(B,V,Y,oe){let $=V.view.ru(Y);$.Cs&&($=await ZE(B.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,$))));const H=oe&&oe.targetChanges.get(V.targetId),k=oe&&oe.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges($,B.isPrimaryClient,H,k);return l0(B,V.targetId,F.au),F.snapshot})(s,b,x,C);const u=await ZE(s.localStore,e,!0),d=new BI(e,u.Qs),y=d.ru(u.documents),g=Dc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),p=d.applyChanges(y,s.isPrimaryClient,g);l0(s,n,p.au);const _=new FI(e,n,d);return s.Tu.set(e,_),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),p.snapshot}async function YI(s,e,n){const i=Ie(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!ed(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&$p(i.remoteStore,o.targetId),lp(i,o.targetId)})).catch(qo)):(lp(i,o.targetId),await ip(i.localStore,o.targetId,!0))}async function XI(s,e){const n=Ie(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$p(n.remoteStore,i.targetId))}async function WI(s,e,n){const i=rj(s);try{const o=await(function(d,y){const g=Ie(d),p=ct.now(),_=y.reduce(((C,U)=>C.add(U.key)),ze());let b,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=yr(),B=ze();return g.Ns.getEntries(C,_).next((V=>{U=V,U.forEach(((Y,oe)=>{oe.isValidDocument()||(B=B.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,U))).next((V=>{b=V;const Y=[];for(const oe of y){const $=dC(oe,b.get(oe.key).overlayedDocument);$!=null&&Y.push(new wi(oe.key,$,KS($.value.mapValue),Zn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,p,Y,y)})).next((V=>{x=V;const Y=V.applyToLocalDocumentSet(b,B);return g.documentOverlayCache.saveOverlays(C,V.batchId,Y)}))})).then((()=>({batchId:x.batchId,changes:i1(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,y,g){let p=d.Vu[d.currentUser.toKey()];p||(p=new gt(qe)),p=p.insert(y,g),d.Vu[d.currentUser.toKey()]=p})(i,o.batchId,n),await Mc(i,o.changes),await od(i.remoteStore)}catch(o){const u=Zp(o,"Failed to persist write");n.reject(u)}}async function U1(s,e){const n=Ie(s);try{const i=await uI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await Mc(n,i,e)}catch(i){await qo(i)}}function o0(s,e,n){const i=Ie(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const g=Ie(d);g.onlineState=y;let p=!1;g.queries.forEach(((_,b)=>{for(const x of b.Sa)x.va(y)&&(p=!0)})),p&&tg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ZI(s,e,n){const i=Ie(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new gt(be.comparator);d=d.insert(u,dn.newNoDocument(u,Re.min()));const y=ze().add(u),g=new rd(Re.min(),new Map,new gt(qe),d,y);await U1(i,g),i.du=i.du.remove(u),i.Au.delete(e),rg(i)}else await ip(i.localStore,e,!1).then((()=>lp(i,e,n))).catch(qo)}async function JI(s,e){const n=Ie(s),i=e.batch.batchId;try{const o=await cI(n.localStore,e);z1(n,i,null),q1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Mc(n,o)}catch(o){await qo(o)}}async function ej(s,e,n){const i=Ie(s);try{const o=await(function(d,y){const g=Ie(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,y).next((b=>(Ke(b!==null,37113),_=b.keys(),g.mutationQueue.removeMutationBatch(p,b)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,y))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);z1(i,e,n),q1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Mc(i,o)}catch(o){await qo(o)}}function q1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function z1(s,e,n){const i=Ie(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function lp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||B1(s,i)}))}function B1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&($p(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),rg(s))}function l0(s,e,n){for(const i of n)i instanceof k1?(s.Ru.addReference(i.key,e),tj(s,i)):i instanceof V1?(ge(sg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||B1(s,i.key)):Ae(19791,{wu:i})}function tj(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(ge(sg,"New document in limbo: "+n),s.Eu.add(i),rg(s))}function rg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new be(at.fromString(e)),i=s.fu.next();s.Au.set(i,new HI(n)),s.du=s.du.insert(n,i),I1(s.remoteStore,new ui(Os(Jh(n.path)),i,"TargetPurposeLimboResolution",Xh.ce))}}async function Mc(s,e,n){const i=Ie(s),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((y,g)=>{d.push(i.pu(g,e,n).then((p=>{if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Gp.As(g.targetId,p);u.push(_)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,p){const _=Ie(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(p,(x=>le.forEach(x.Es,(C=>_.persistence.referenceDelegate.addReference(b,x.targetId,C))).next((()=>le.forEach(x.ds,(C=>_.persistence.referenceDelegate.removeReference(b,x.targetId,C)))))))))}catch(b){if(!zo(b))throw b;ge(Qp,"Failed to update sequence numbers: "+b)}for(const b of p){const x=b.targetId;if(!b.fromCache){const C=_.Ms.get(x),U=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(x,B)}}})(i.localStore,u))}async function nj(s,e){const n=Ie(s);if(!n.currentUser.isEqual(e)){ge(sg,"User change. New user:",e.toKey());const i=await A1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((g=>{g.reject(new pe(re.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Mc(n,i.Ls)}}function sj(s,e){const n=Ie(s),i=n.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let o=ze();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function F1(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=U1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,e),e.Pu.H_=qI.bind(null,e.eventManager),e.Pu.yu=zI.bind(null,e.eventManager),e}function rj(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ej.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lI(this.persistence,new iI,e.initialUser,this.serializer)}Cu(e){return new x1(Hp.mi,this.serializer)}Du(e){return new pI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class ij extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof kh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new HC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new x1((i=>kh.mi(i,n)),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nj.bind(null,this.syncEngine),await VI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=id(e.databaseInfo.databaseId),i=(function(u){return new EI(u)})(e.databaseInfo);return(function(u,d,y,g){return new wI(u,d,y,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,d,y){return new AI(i,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>o0(this.syncEngine,n,0)),(function(){return t0.v()?new t0:new gI})())}createSyncEngine(e,n){return(function(o,u,d,y,g,p,_){const b=new GI(o,u,d,y,g,p);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ie(n);ge(_a,"RemoteStore shutting down."),i.Ea.add(5),await Pc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class aj{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{ge(Si,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Si,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Zp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Om(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Si,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await A1(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function c0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await oj(s);ge(Si,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>s0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>s0(e.remoteStore,o))),s._onlineComponents=e}async function oj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Si,"Using user provided OfflineComponentProvider");try{await Om(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await Om(s,new Lh)}}else ge(Si,"Using default OfflineComponentProvider"),await Om(s,new ij(void 0));return s._offlineComponents}async function H1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Si,"Using user provided OnlineComponentProvider"),await c0(s,s._uninitializedComponentsProvider._online)):(ge(Si,"Using default OnlineComponentProvider"),await c0(s,new cp))),s._onlineComponents}function lj(s){return H1(s).then((e=>e.syncEngine))}async function Uh(s){const e=await H1(s),n=e.eventManager;return n.onListen=QI.bind(null,e.syncEngine),n.onUnlisten=YI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XI.bind(null,e.syncEngine),n}function cj(s,e,n={}){const i=new dr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,g,p){const _=new ig({next:x=>{_.Nu(),d.enqueueAndForget((()=>eg(u,b)));const C=x.docs.has(y);!C&&x.fromCache?p.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&g&&g.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),b=new ng(Jh(y.path),_,{includeMetadataChanges:!0,qa:!0});return Jp(u,b)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}function uj(s,e,n={}){const i=new dr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,g,p){const _=new ig({next:x=>{_.Nu(),d.enqueueAndForget((()=>eg(u,b))),x.fromCache&&g.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),b=new ng(y,_,{includeMetadataChanges:!0,qa:!0});return Jp(u,b)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firestore.googleapis.com",h0=!0;class d0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q1,this.ssl=h0}else this.host=e.host,this.ssl=e.ssl??h0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BC)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ld{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gR;switch(i.type){case"firstParty":return new ER(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=u0.get(n);i&&(ge("ComponentProvider","Removing Datastore"),u0.delete(n),i.terminate())})(this),Promise.resolve()}}function hj(s,e,n,i={}){s=An(s,ld);const o=ko(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},y=`${e}:${n}`;o&&(z0(`https://${y}`),B0("Firestore",!0)),u.host!==Q1&&u.host!==y&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:y,ssl:o,emulatorOptions:i};if(!ma(g,d)&&(s._setSettings(g),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=hn.MOCK_USER;else{p=wx(i.mockUserToken,s._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new hn(b)}s._authCredentials=new yR(new kS(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class _t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ic(n,_t._jsonSchema))return new _t(e,i||null,new be(at.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Pt("string",_t._jsonSchemaVersion),referencePath:Pt("string")};class pi extends xi{constructor(e,n,i){super(e,n,Jh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new be(e))}withConverter(e){return new pi(this.firestore,e,this._path)}}function Me(s,e,...n){if(s=Mt(s),VS("collection","path",e),s instanceof ld){const i=at.fromString(e,...n);return xE(i),new pi(s,null,i)}{if(!(s instanceof _t||s instanceof pi))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(at.fromString(e,...n));return xE(i),new pi(s.firestore,null,i)}}function lt(s,e,...n){if(s=Mt(s),arguments.length===1&&(e=Dp.newId()),VS("doc","path",e),s instanceof ld){const i=at.fromString(e,...n);return wE(i),new _t(s,null,new be(i))}{if(!(s instanceof _t||s instanceof pi))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(at.fromString(e,...n));return wE(i),new _t(s.firestore,s instanceof pi?s.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="AsyncQueue";class m0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R1(this,"async_queue_retry"),this._c=()=>{const i=Mm();i&&ge(f0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new dr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;ge(f0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",p0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Wp.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:p0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function p0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class vr extends ld{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new m0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m0(e),this._firestoreClient=void 0,await e}}}function dj(s,e){const n=typeof s=="object"?s:Q0(),i=typeof s=="string"?s:Ih,o=bp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=bx("firestore");u&&hj(o,...u)}return o}function cd(s){if(s._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fj(s),s._firestoreClient}function fj(s){const e=s._freezeSettings(),n=(function(o,u,d,y){return new VR(o,u,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,G1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new aj(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(rn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Pt("string",Wn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vs._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,Vs._jsonSchema))return new Vs(e.latitude,e.longitude)}}Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:Pt("string",Vs._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ls(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:Pt("string",Ls._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=/^__.*__$/;class pj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new jc(e,this.data,n,this.fieldTransforms)}}class $1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function K1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:s})}}class og{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(K1(this.Ac)&&mj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||id(e)}Cc(e,n,i,o=!1){return new og({Ac:e,methodName:n,Dc:i,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hd(s){const e=s._freezeSettings(),n=id(s._databaseId);return new gj(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Y1(s,e,n,i,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",d,i);const y=X1(i,d);let g,p;if(u.merge)g=new kn(d.fieldMask),p=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const x=up(e,b,n);if(!d.contains(x))throw new pe(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Z1(_,x)||_.push(x)}g=new kn(_),p=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,p=d.fieldTransforms;return new pj(new xn(y),g,p)}class dd extends ag{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}function yj(s,e,n,i){const o=s.Cc(1,e,n);lg("Data must be an object, but it was:",o,i);const u=[],d=xn.empty();Ti(i,((g,p)=>{const _=cg(e,g,n);p=Mt(p);const b=o.yc(_);if(p instanceof dd)u.push(_);else{const x=Oc(p,b);x!=null&&(u.push(_),d.set(_,x))}}));const y=new kn(u);return new $1(d,y,o.fieldTransforms)}function vj(s,e,n,i,o,u){const d=s.Cc(1,e,n),y=[up(e,i,n)],g=[o];if(u.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)y.push(up(e,u[x])),g.push(u[x+1]);const p=[],_=xn.empty();for(let x=y.length-1;x>=0;--x)if(!Z1(p,y[x])){const C=y[x];let U=g[x];U=Mt(U);const B=d.yc(C);if(U instanceof dd)p.push(C);else{const V=Oc(U,B);V!=null&&(p.push(C),_.set(C,V))}}const b=new kn(p);return new $1(_,b,d.fieldTransforms)}function _j(s,e,n,i=!1){return Oc(n,s.Cc(i?4:3,e))}function Oc(s,e){if(W1(s=Mt(s)))return lg("Unsupported field value:",e,s),X1(s,e);if(s instanceof ag)return(function(i,o){if(!K1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const y of i){let g=Oc(y,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return aC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ct.fromDate(i);return{timestampValue:Oh(o.serializer,u)}}if(i instanceof ct){const u=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Oh(o.serializer,u)}}if(i instanceof Vs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wn)return{bytesValue:y1(o.serializer,i._byteString)};if(i instanceof _t){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ls)return(function(d,y){return{mapValue:{fields:{[QS]:{stringValue:$S},[jh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw y.Sc("VectorValues must only contain numeric values.");return Lp(y.serializer,p)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Yh(i)}`)})(s,e)}function X1(s,e){const n={};return qS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(s,((i,o)=>{const u=Oc(o,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function W1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ct||s instanceof Vs||s instanceof Wn||s instanceof _t||s instanceof ag||s instanceof Ls)}function lg(s,e,n){if(!W1(n)||!LS(n)){const i=Yh(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function up(s,e,n){if((e=Mt(e))instanceof ud)return e._internalPath;if(typeof e=="string")return cg(s,e);throw qh("Field path arguments must be of type string or ",s,!1,void 0,n)}const Ej=new RegExp("[~\\*/\\[\\]]");function cg(s,e,n){if(e.search(Ej)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new ud(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function qh(s,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new pe(re.INVALID_ARGUMENT,y+s+g)}function Z1(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Sj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Sj extends J1{data(){return super.data()}}function fd(s,e){return typeof e=="string"?cg(s,e):e instanceof ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class tb extends ug{}function ut(s,e,...n){let i=[];e instanceof ug&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((g=>g instanceof hg)).length,y=u.filter((g=>g instanceof md)).length;if(d>1||d>0&&y>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class md extends tb{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new md(e,n,i)}_apply(e){const n=this._parse(e);return nb(e._query,n),new xi(e.firestore,e.converter,Jm(e._query,n))}_parse(e){const n=hd(e.firestore);return(function(u,d,y,g,p,_,b){let x;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){v0(b,_);const U=[];for(const B of b)U.push(y0(g,u,B));x={arrayValue:{values:U}}}else x=y0(g,u,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||v0(b,_),x=_j(y,d,b,_==="in"||_==="not-in");return Dt.create(p,_,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qe(s,e,n){const i=e,o=fd("where",s);return md._create(o,i,n)}class hg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const y=u.getFlattenedFilters();for(const g of y)nb(d,g),d=Jm(d,g)})(e._query,n),new xi(e.firestore,e.converter,Jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends tb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(u,d)})(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new Bo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function ha(s,e="asc"){const n=e,i=fd("orderBy",s);return dg._create(i,n)}function y0(s,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t1(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(at.fromString(n));if(!be.isDocumentKey(i))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return PE(s,new be(i))}if(n instanceof _t)return PE(s,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(n)}.`)}function v0(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nb(s,e){const n=(function(o,u){for(const d of o)for(const y of d.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bj{convertValue(e,n="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ti(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[jh].arrayValue?.values?.map((i=>Rt(i.doubleValue)));return new Ls(n)}convertGeoPoint(e){return new Vs(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Zh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=yi(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=at.fromString(e);Ke(T1(i),9688,{name:e});const o=new gc(i.get(1),i.get(3)),u=new be(i.popFirst(5));return o.isEqual(n)||gr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends J1{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(fd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:Pt("string",da._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class _h extends da{data(e={}){return super.data(e)}}class fa{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new rc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new _h(this._firestore,this._userDataWriter,i.key,i,new rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const g=new _h(o._firestore,o._userDataWriter,y.doc.key,y.doc,new rc(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const g=new _h(o._firestore,o._userDataWriter,y.doc.key,y.doc,new rc(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return y.type!==0&&(p=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),_=d.indexOf(y.doc.key)),{type:Tj(y.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Tj(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s){s=An(s,_t);const e=An(s.firestore,vr);return cj(cd(e),s._key).then((n=>ib(e,s,n)))}fa._jsonSchemaVersion="firestore/querySnapshot/1.0",fa._jsonSchema={type:Pt("string",fa._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class fg extends bj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function nt(s){s=An(s,xi);const e=An(s.firestore,vr),n=cd(e),i=new fg(e);return eb(s._query),uj(n,s._query).then((o=>new fa(e,i,s,o)))}function wj(s,e,n){s=An(s,_t);const i=An(s.firestore,vr),o=sb(s.converter,e);return pd(i,[Y1(hd(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Zn.none())])}function Vn(s,e,n,...i){s=An(s,_t);const o=An(s.firestore,vr),u=hd(o);let d;return d=typeof(e=Mt(e))=="string"||e instanceof ud?vj(u,"updateDoc",s._key,e,n,i):yj(u,"updateDoc",s._key,e),pd(o,[d.toMutation(s._key,Zn.exists(!0))])}function cr(s){return pd(An(s.firestore,vr),[new Up(s._key,Zn.none())])}function _r(s,e){const n=An(s.firestore,vr),i=lt(s),o=sb(s.converter,e);return pd(n,[Y1(hd(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Zn.exists(!1))]).then((()=>i))}function rb(s,...e){s=Mt(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||g0(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(g0(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let u,d,y;if(s instanceof _t)d=An(s.firestore,vr),y=Jh(s._key.path),u={next:g=>{e[i]&&e[i](ib(d,s,g))},error:e[i+1],complete:e[i+2]};else{const g=An(s,xi);d=An(g.firestore,vr),y=g._query;const p=new fg(d);u={next:_=>{e[i]&&e[i](new fa(d,p,g,_))},error:e[i+1],complete:e[i+2]},eb(s._query)}return(function(p,_,b,x){const C=new ig(x),U=new ng(_,C,b);return p.asyncQueue.enqueueAndForget((async()=>Jp(await Uh(p),U))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>eg(await Uh(p),U)))}})(cd(d),y,o,u)}function pd(s,e){return(function(i,o){const u=new dr;return i.asyncQueue.enqueueAndForget((async()=>WI(await lj(i),o,u))),u.promise})(cd(s),e)}function ib(s,e,n){const i=n.docs.get(e._key),o=new fg(s);return new da(s,o,e._key,i,new rc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Uo=o})(Vo),Ao(new pa("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),y=new vr(new vR(i.getProvider("auth-internal")),new SR(d,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(p.options.projectId,_)})(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),fi(EE,SE,e),fi(EE,SE,"esm2020")})();const Eo={FIREBASE:{API_KEY:"AIzaSyBnil9YV9LpAVA4GLUjoPoq7PSgq3DYYgk",AUTH_DOMAIN:"animals-adoption-app-v2.firebaseapp.com",PROJECT_ID:"animals-adoption-app-v2",MESSAGING_SENDER_ID:"702758490735",APP_ID:"1:702758490735:web:animals-adoption-app-v2"},APP:{NAME:"Expo2025 - Adopción de Mascotas",VERSION:"1.0.0",ENVIRONMENT:"development"},SECURITY:{MAX_SHELTERS_PER_USER:parseInt("3")||3,MAX_PETS_PER_USER:parseInt("10")||10,MAX_DAILY_CREATIONS:parseInt("5")||5,REQUEST_TIMEOUT:parseInt("10000")||1e4},FEATURES:{ENABLE_STORAGE:!1,ENABLE_ANALYTICS:!1,ENABLE_MESSAGING:!1}},xj=()=>{const s=["FIREBASE.API_KEY","FIREBASE.AUTH_DOMAIN","FIREBASE.PROJECT_ID","FIREBASE.MESSAGING_SENDER_ID","FIREBASE.APP_ID"],e=[];return s.forEach(n=>{const i=n.split(".");let o=Eo;for(const u of i)o=o?.[u];o||e.push(n)}),e.length>0&&(console.warn("⚠️ Variables de entorno faltantes:",e),console.warn("💡 Usando valores por defecto. En producción, configura las variables de entorno.")),e.length===0};xj();const Aj={apiKey:Eo.FIREBASE.API_KEY,authDomain:Eo.FIREBASE.AUTH_DOMAIN,projectId:Eo.FIREBASE.PROJECT_ID,messagingSenderId:Eo.FIREBASE.MESSAGING_SENDER_ID,appId:Eo.FIREBASE.APP_ID},mg=G0(Aj),ve=dj(mg),Kt=dR(mg);console.log("Firebase initialized:",mg);console.log("Firestore database:",ve);console.log("Firebase auth:",Kt);const Nj=Object.freeze(Object.defineProperty({__proto__:null,auth:Kt,db:ve},Symbol.toStringTag,{value:"Module"})),zh={getNotifications:async s=>{try{const e=ut(Me(ve,"notifications"),Qe("userId","==",s),ha("timestamp","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting notifications:",e),[]}},createNotification:async s=>{try{console.log("notificationService.createNotification called with:",s);const e={...s,timestamp:new Date().toISOString(),read:!1};console.log("Creating notification document:",e);const n=await _r(Me(ve,"notifications"),e);return console.log("✅ Notification created with ID:",n.id),n.id}catch(e){throw console.error("❌ Error creating notification:",e),e}},markAsRead:async s=>{try{await Vn(lt(ve,"notifications",s),{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),e}},subscribeToNotifications:(s,e)=>{const n=ut(Me(ve,"notifications"),Qe("userId","==",s),ha("timestamp","desc"));return rb(n,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllNotifications:async()=>{try{return(await nt(Me(ve,"notifications"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting all notifications:",s),[]}}},_n={getConversations:async s=>{try{const e=ut(Me(ve,"conversations"),Qe("participants","array-contains",s),ha("lastMessageTime","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting conversations:",e),[]}},createConversation:async(s,e=null)=>{try{const n={participants:s,petId:e,lastMessage:"",lastMessageTime:new Date().toISOString(),createdAt:new Date().toISOString()};return(await _r(Me(ve,"conversations"),n)).id}catch(n){throw console.error("Error creating conversation:",n),n}},getMessages:async s=>{try{const e=ut(Me(ve,"messages"),Qe("conversationId","==",s),ha("timestamp","asc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting messages:",e),[]}},subscribeToMessages:(s,e)=>{console.log("chatService.subscribeToMessages called for:",s);const n=ut(Me(ve,"messages"),Qe("conversationId","==",s),ha("timestamp","asc"));return rb(n,i=>{console.log("chatService.subscribeToMessages: received snapshot with",i.docs.length,"messages");const o=i.docs.map(u=>({id:u.id,...u.data()}));console.log("chatService.subscribeToMessages: processed messages:",o),e(o)},i=>{console.error("chatService.subscribeToMessages error:",i)})},sendMessage:async(s,e,n)=>{try{console.log("chatService.sendMessage called:",{conversationId:s,senderId:e,messageText:n});const o=(await Nn.getUserProfile(e))?.name||"Usuario",u={conversationId:s,senderId:e,senderName:o,message:n,timestamp:new Date().toISOString(),read:!1},d=await _r(Me(ve,"messages"),u);return console.log("✅ Message sent with ID:",d.id),await Vn(lt(ve,"conversations",s),{lastMessage:n,lastMessageTime:new Date().toISOString()}),d.id}catch(i){throw console.error("Error sending message:",i),i}},getOrCreateConversation:async(s,e,n=null)=>{try{console.log("chatService.getOrCreateConversation called:",{userId1:s,userId2:e,petId:n});const i=ut(Me(ve,"conversations"),Qe("participants","array-contains",s)),u=(await nt(i)).docs.find(y=>{const g=y.data();return g.participants.includes(e)&&g.participants.includes(s)});if(u)return console.log("✅ Found existing conversation:",u.id),n&&u.data().petId!==n&&(console.log("Updating conversation with new petId:",n),await Vn(lt(ve,"conversations",u.id),{petId:n,lastMessageTime:new Date().toISOString()})),u.id;const d=await _n.createConversation([s,e],n);return console.log("✅ Created new conversation:",d),d}catch(i){throw console.error("Error getting or creating conversation:",i),i}},markMessagesAsRead:async(s,e)=>{try{const n=ut(Me(ve,"messages"),Qe("conversationId","==",s),Qe("senderId","!=",e),Qe("read","==",!1)),o=(await nt(n)).docs.map(u=>Vn(u.ref,{read:!0}));await Promise.all(o),console.log(`✅ Marked ${o.length} messages as read`)}catch(n){console.error("Error marking messages as read:",n)}},deleteConversation:async s=>{try{console.log("chatService.deleteConversation called for:",s);const e=ut(Me(ve,"messages"),Qe("conversationId","==",s)),n=await nt(e);console.log(`Found ${n.size} messages to delete`);const i=n.docs.map(o=>(console.log("Deleting message:",o.id),cr(o.ref)));return i.length>0&&(await Promise.all(i),console.log("✅ Deleted all messages")),console.log("Deleting conversation:",s),await cr(lt(ve,"conversations",s)),console.log("✅ Conversation deleted successfully"),{success:!0,deletedMessages:n.size}}catch(e){throw console.error("Error deleting conversation:",e),e}}},qt={getPets:async()=>{try{return(await nt(Me(ve,"pets"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting pets:",s),[]}},getPetsByOwner:async s=>{try{console.log("petService.getPetsByOwner called for ownerId:",s);const e=ut(Me(ve,"pets"),Qe("ownerId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for owner:",i),i}catch(e){return console.error("Error getting pets by owner:",e),[]}},getPetsByShelter:async s=>{try{console.log("petService.getPetsByShelter called for shelterId:",s);const e=ut(Me(ve,"pets"),Qe("shelterId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for shelter:",i),i}catch(e){return console.error("Error getting pets by shelter:",e),[]}},getPetById:async s=>{try{const e=lt(ve,"pets",s),n=await Sc(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error getting pet:",e),null}},createPet:async s=>{try{if(console.log("petService.createPet called with data:",s),!s.ownerId)throw new Error("Usuario no autenticado");const e=await _r(Me(ve,"pets"),{...s,createdAt:new Date().toISOString(),status:"available",adoptionRequests:0,ownerId:s.ownerId||"",ownerName:s.ownerName||"",shelterId:s.shelterId||null,shelterName:s.shelterName||null});return console.log("✅ Pet created successfully with ID:",e.id),s.shelterId&&await sn.simulateShelterReview(s.shelterId),e.id}catch(e){throw console.error("❌ Error creating pet:",e),console.error("Error details:",{code:e.code,message:e.message,petData:s}),e}},updatePet:async(s,e)=>{try{await Vn(lt(ve,"pets",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating pet:",n),n}},updatePetStatus:async(s,e)=>{try{console.log("petService.updatePetStatus called for petId:",s,"status:",e),await Vn(lt(ve,"pets",s),{status:e,updatedAt:new Date().toISOString()}),console.log("✅ Pet status updated successfully")}catch(n){throw console.error("Error updating pet status:",n),n}},deletePet:async s=>{try{console.log("petService.deletePet called for petId:",s);const e=await Sc(lt(ve,"pets",s));if(!e.exists())throw new Error("Mascota no encontrada");const i=e.data().name;console.log("Deleting pet:",i),console.log("Deleting adoption requests for pet:",s);const o=ut(Me(ve,"adoptionRequests"),Qe("petId","==",s)),d=(await nt(o)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${d.length} adoption requests to delete`);const y=d.map(H=>(console.log("Deleting adoption request:",H.id),cr(lt(ve,"adoptionRequests",H.id))));y.length>0&&(await Promise.all(y),console.log("✅ Deleted all adoption requests")),console.log("Deleting notifications for pet:",s);const g=ut(Me(ve,"notifications"),Qe("petId","==",s)),_=(await nt(g)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${_.length} notifications to delete`);const b=_.map(H=>(console.log("Deleting notification:",H.id),cr(lt(ve,"notifications",H.id))));b.length>0&&(await Promise.all(b),console.log("✅ Deleted all notifications")),console.log("Updating conversations for pet:",s);const x=ut(Me(ve,"conversations"),Qe("petId","==",s)),U=(await nt(x)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${U.length} conversations to update`);const B=U.map(H=>(console.log("Updating conversation:",H.id),_r(Me(ve,"messages"),{conversationId:H.id,senderId:"system",message:`⚠️ ${i} ya no está disponible para adopción.`,timestamp:new Date().toISOString(),read:!1,isSystemMessage:!0})));B.length>0&&(await Promise.all(B),console.log("✅ Added system messages to conversations")),console.log("Deleting favorites for pet:",s);const V=ut(Me(ve,"favorites"),Qe("petId","==",s)),oe=(await nt(V)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${oe.length} favorites to delete`);const $=oe.map(H=>(console.log("Deleting favorite:",H.id),cr(lt(ve,"favorites",H.id))));return $.length>0&&(await Promise.all($),console.log("✅ Deleted all favorites")),console.log("Deleting pet document:",s),await cr(lt(ve,"pets",s)),console.log("✅ Pet deleted successfully"),{success:!0,deleted:{adoptionRequests:d.length,notifications:_.length,conversations:U.length,favorites:oe.length}}}catch(e){throw console.error("Error deleting pet:",e),e}}},ab={getCategories:async()=>{try{console.log("categoryService.getCategories called");const e=(await nt(Me(ve,"categories"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Categories loaded from Firestore:",e),e}catch(s){return console.error("Error getting categories:",s),[]}},createCategory:async s=>{try{return(await _r(Me(ve,"categories"),{...s,createdAt:new Date().toISOString()})).id}catch(e){throw console.error("Error creating category:",e),e}},updateCategory:async(s,e)=>{try{await Vn(lt(ve,"categories",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating category:",n),n}}},Jn={getFavorites:async s=>{try{console.log("favoriteService.getFavorites called for userId:",s);const e=ut(Me(ve,"favorites"),Qe("userId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Favorites loaded from Firestore:",i),i}catch(e){return console.error("Error getting favorites:",e),[]}},addFavorite:async(s,e)=>{try{if(console.log("favoriteService.addFavorite called for userId:",s,"petId:",e),!s)throw new Error("Usuario no autenticado");const n=await _r(Me(ve,"favorites"),{userId:s,petId:e,createdAt:new Date().toISOString()});return console.log("✅ Favorite added with ID:",n.id),n.id}catch(n){throw console.error("❌ Error adding favorite:",n),console.error("Error details:",{code:n.code,message:n.message,userId:s,petId:e}),n}},removeFavorite:async(s,e)=>{try{console.log("favoriteService.removeFavorite called for userId:",s,"petId:",e);const n=ut(Me(ve,"favorites"),Qe("userId","==",s),Qe("petId","==",e)),i=await nt(n);if(i.empty)return console.log("No favorite found to remove"),!1;const o=i.docs.map(u=>cr(u.ref));return await Promise.all(o),console.log("Favorite removed successfully"),!0}catch(n){throw console.error("Error removing favorite:",n),n}},isFavorite:async(s,e)=>{try{const n=ut(Me(ve,"favorites"),Qe("userId","==",s),Qe("petId","==",e));return!(await nt(n)).empty}catch(n){return console.error("Error checking favorite status:",n),!1}}},nn={createAdoptionRequest:async s=>{try{console.log("adoptionRequestService.createAdoptionRequest called:",s);const e=await _r(Me(ve,"adoptionRequests"),{...s,status:"pending",createdAt:new Date().toISOString()});return console.log("Adoption request created with ID:",e.id),e.id}catch(e){throw console.error("Error creating adoption request:",e),e}},getAdoptionRequests:async s=>{try{console.log("adoptionRequestService.getAdoptionRequests called for userId:",s);const e=ut(Me(ve,"adoptionRequests"),Qe("userId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests loaded from Firestore:",i),i}catch(e){return console.error("Error getting adoption requests:",e),[]}},getAdoptionRequestsForOwner:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestsForOwner called for ownerId:",s);const e=ut(Me(ve,"adoptionRequests"),Qe("ownerId","==",s),ha("createdAt","desc")),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests for owner loaded from Firestore:",i),console.log("Number of requests found:",i.length),i}catch(e){return console.error("Error getting adoption requests for owner:",e),[]}},getAdoptionRequestById:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestById called for requestId:",s);const e=lt(ve,"adoptionRequests",s),n=await Sc(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Adoption request loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting adoption request:",e),null}},updateAdoptionRequestStatus:async(s,e,n="")=>{try{console.log("adoptionRequestService.updateAdoptionRequestStatus called for requestId:",s,"status:",e);const i={status:e,updatedAt:new Date().toISOString()};n&&(i.ownerNotes=n),await Vn(lt(ve,"adoptionRequests",s),i),console.log("Adoption request status updated successfully")}catch(i){throw console.error("Error updating adoption request status:",i),i}},approveAdoptionRequest:async(s,e="")=>{try{console.log("adoptionRequestService.approveAdoptionRequest called for requestId:",s);const n=await nn.getAdoptionRequestById(s);if(!n)throw new Error("Solicitud no encontrada");const i=n.petId;console.log("Approving request for petId:",i),await nn.updateAdoptionRequestStatus(s,"approved",e),console.log("✅ Request approved:",s);const o=ut(Me(ve,"adoptionRequests"),Qe("petId","==",i),Qe("status","==","pending")),d=(await nt(o)).docs.map(g=>({id:g.id,...g.data()}));console.log(`Found ${d.length} pending requests for the same pet`);const y=d.filter(g=>g.id!==s).map(g=>(console.log("Auto-rejecting request:",g.id),nn.updateAdoptionRequestStatus(g.id,"rejected","Esta solicitud fue rechazada automáticamente porque se aprobó otra solicitud para la misma mascota.")));return y.length>0&&(await Promise.all(y),console.log(`✅ Auto-rejected ${y.length} other requests`)),await qt.updatePetStatus(i,"adopted"),console.log("✅ Pet status updated to adopted"),{approved:s,rejected:d.filter(g=>g.id!==s).map(g=>g.id)}}catch(n){throw console.error("Error approving adoption request:",n),n}},getPendingRequestsForPet:async s=>{try{console.log("adoptionRequestService.getPendingRequestsForPet called for petId:",s);const e=ut(Me(ve,"adoptionRequests"),Qe("petId","==",s),Qe("status","==","pending"),ha("createdAt","desc")),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log(`Found ${i.length} pending requests for pet ${s}`),i}catch(e){return console.error("Error getting pending requests for pet:",e),[]}},rejectAdoptionRequest:async(s,e="")=>{try{await nn.updateAdoptionRequestStatus(s,"rejected",e)}catch(n){throw console.error("Error rejecting adoption request:",n),n}}},sn={getShelters:async()=>{try{console.log("shelterService.getShelters called");const e=(await nt(Me(ve,"shelters"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Shelters loaded from Firestore:",e),e}catch(s){return console.error("Error getting shelters:",s),[]}},getShelterById:async s=>{try{console.log("shelterService.getShelterById called for shelterId:",s);const e=lt(ve,"shelters",s),n=await Sc(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Shelter loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting shelter:",e),null}},getSheltersByOwner:async s=>{try{console.log("shelterService.getSheltersByOwner called for ownerId:",s);const e=ut(Me(ve,"shelters"),Qe("ownerId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Shelters for owner loaded from Firestore:",i),i}catch(e){return console.error("Error getting shelters by owner:",e),[]}},createShelter:async s=>{try{if(console.log("shelterService.createShelter called:",s),!s.ownerId)throw new Error("❌ Error: ownerId es requerido para crear un refugio");if(!s.name||s.name.length<3)throw new Error("❌ Error: Nombre del refugio debe tener al menos 3 caracteres");if(s.name&&s.name.length>100)throw new Error("❌ Error: Nombre del refugio no puede exceder 100 caracteres");const e=[/<script/i,/javascript:/i,/on\w+\s*=/i,/eval\(/i],n=JSON.stringify(s);for(const o of e)if(o.test(n))throw new Error("❌ Error: Datos contienen contenido sospechoso");const i=await _r(Me(ve,"shelters"),{...s,createdAt:new Date().toISOString(),verified:!1,rating:0,petsCount:0,isPremium:!1,premiumExpiry:null,status:"pending"});return console.log("✅ Shelter created with ID:",i.id),i.id}catch(e){throw console.error("❌ Error creating shelter:",e),console.error("Error details:",{code:e.code,message:e.message,shelterData:s}),e}},updateShelter:async(s,e)=>{try{console.log("shelterService.updateShelter called for shelterId:",s,"updateData:",e),await Vn(lt(ve,"shelters",s),{...e,updatedAt:new Date().toISOString()}),console.log("Shelter updated successfully")}catch(n){throw console.error("Error updating shelter:",n),n}},updateShelterStatus:async(s,e)=>{try{console.log("shelterService.updateShelterStatus called for shelterId:",s,"status:",e),await Vn(lt(ve,"shelters",s),{status:e,updatedAt:new Date().toISOString()}),console.log("Shelter status updated successfully")}catch(n){throw console.error("Error updating shelter status:",n),n}},activatePremium:async(s,e=1)=>{try{console.log("shelterService.activatePremium called for shelterId:",s,"months:",e);const n=new Date;n.setMonth(n.getMonth()+e),await Vn(lt(ve,"shelters",s),{isPremium:!0,premiumExpiry:n.toISOString(),updatedAt:new Date().toISOString()}),console.log("Premium subscription activated successfully")}catch(n){throw console.error("Error activating premium subscription:",n),n}},deactivatePremium:async s=>{try{console.log("shelterService.deactivatePremium called for shelterId:",s),await Vn(lt(ve,"shelters",s),{isPremium:!1,premiumExpiry:null,updatedAt:new Date().toISOString()}),console.log("Premium subscription deactivated successfully")}catch(e){throw console.error("Error deactivating premium subscription:",e),e}},isPremiumActive:async s=>{try{const e=await sn.getShelterById(s);return!e||!e.isPremium?!1:e.premiumExpiry?new Date(e.premiumExpiry)>new Date:e.isPremium}catch(e){return console.error("Error checking premium status:",e),!1}},getPremiumShelters:async()=>{try{console.log("shelterService.getPremiumShelters called");const s=ut(Me(ve,"shelters"),Qe("isPremium","==",!0)),n=(await nt(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Premium shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting premium shelters:",s),[]}},getRegularShelters:async()=>{try{console.log("shelterService.getRegularShelters called");const s=ut(Me(ve,"shelters"),Qe("isPremium","==",!1)),n=(await nt(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Regular shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting regular shelters:",s),[]}},deleteShelter:async s=>{try{if(console.log("shelterService.deleteShelter called for shelterId:",s),!await sn.getShelterById(s))throw new Error("Refugio no encontrado");const n=ut(Me(ve,"pets"),Qe("shelterId","==",s)),i=await nt(n);console.log(`Found ${i.size} pets to delete for shelter`);const o=i.docs.map(u=>(console.log("Deleting pet:",u.id),cr(u.ref)));return o.length>0&&(await Promise.all(o),console.log("✅ Deleted all shelter pets")),await cr(lt(ve,"shelters",s)),console.log("✅ Shelter deleted successfully"),{success:!0,deletedPets:i.size}}catch(e){throw console.error("Error deleting shelter:",e),e}},simulateShelterReview:async s=>{try{console.log("🔍 Simulando revisión del refugio:",s);const e=await sn.getShelterById(s);if(!e){console.log("❌ Refugio no encontrado para revisión");return}const n=Math.random()*3e3+2e3;await new Promise(d=>setTimeout(d,n));const i=Math.random()>.1,o=i?"active":"pending";await sn.updateShelterStatus(s,o);const u={userId:e.ownerId,type:"shelter_review",title:i?"✅ Refugio Aprobado":"⏳ Refugio en Revisión",message:i?`¡Felicidades! Tu refugio "${e.name}" ha sido aprobado y está activo.`:`Tu refugio "${e.name}" está siendo revisado. Te notificaremos cuando esté listo.`,shelterId:s,shelterName:e.name};await zh.createNotification(u),console.log(`✅ Simulación de revisión completada: ${o}`)}catch(e){console.error("❌ Error en simulación de revisión:",e)}}},Nn={createUserProfile:async(s,e)=>{try{await wj(lt(ve,"users",s),{...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()})}catch(n){throw console.error("Error creating user profile:",n),n}},getUserProfile:async s=>{try{console.log("getUserProfile called with userId:",s);const e=lt(ve,"users",s);console.log("Document reference created:",e.path);const n=await Sc(e);if(console.log("Document snapshot:",n.exists()?"exists":"does not exist"),n.exists()){const i={id:n.id,...n.data()};return console.log("User profile data:",i),i}return console.log("No user profile found"),null}catch(e){return console.error("Error getting user profile:",e),null}},getAllUsers:async()=>{try{console.log("getAllUsers called");const e=(await nt(Me(ve,"users"))).docs.map(n=>({uid:n.id,...n.data()}));return console.log(`Found ${e.length} users`),e}catch(s){return console.error("Error getting all users:",s),[]}},updateUserProfile:async(s,e)=>{try{await Vn(lt(ve,"users",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating user profile:",n),n}}},Rj=Object.freeze(Object.defineProperty({__proto__:null,adoptionRequestService:nn,categoryService:ab,chatService:_n,favoriteService:Jn,notificationService:zh,petService:qt,shelterService:sn,userService:Nn},Symbol.toStringTag,{value:"Module"})),ob=I.createContext(),Ot=()=>{const s=I.useContext(ob);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Cj=({children:s})=>{const[e,n]=I.useState(null),[i,o]=I.useState(!0);I.useEffect(()=>{console.log("AuthProvider: Setting up auth listener");const p=e2(Kt,_=>{console.log("AuthProvider: Auth state changed:",_),_?console.log("AuthProvider: User authenticated:",{uid:_.uid,email:_.email,displayName:_.displayName,emailVerified:_.emailVerified}):console.log("AuthProvider: No user authenticated"),n(_),o(!1)},_=>{console.error("AuthProvider: Auth state error:",_),o(!1)});return()=>{console.log("AuthProvider: Cleaning up auth listener"),p()}},[]);const g={user:e,loading:i,register:async(p,_,b)=>{try{const C=(await KN(Kt,p,_)).user;return await WN(C,{displayName:b.name}),console.log("Creating user profile with data:",{name:b.name,email:C.email,phone:b.phone||"",address:b.address||"",isShelter:b.isShelter||!1,shelterInfo:b.shelterInfo||null}),await Nn.createUserProfile(C.uid,{name:b.name,email:C.email,phone:b.phone||"",address:b.address||"",isShelter:b.isShelter||!1,shelterInfo:b.shelterInfo||null}),console.log("User profile created successfully"),C}catch(x){throw console.error("Error registering user:",x),x}},login:async(p,_)=>{try{return(await YN(Kt,p,_)).user}catch(b){throw console.error("Error logging in:",b),b}},logout:async()=>{try{await t2(Kt)}catch(p){throw console.error("Error logging out:",p),p}}};return c.jsx(ob.Provider,{value:g,children:s})},Ij=({error:s,onClose:e,onRetry:n,autoClose:i=!0,duration:o=5e3})=>{const[u,d]=I.useState(!1),[y,g]=I.useState(!1);I.useEffect(()=>{if(s&&(d(!0),g(!1),i)){const B=setTimeout(()=>{p()},o);return()=>clearTimeout(B)}},[s,i,o]);const p=()=>{g(!0),setTimeout(()=>{d(!1),e?.()},300)},_=()=>{n?.(),p()};if(!u||!s)return null;const{title:b,message:x,action:C,type:U="error"}=s;return c.jsxs("div",{className:`error-notification ${y?"closing":""} ${U}`,children:[c.jsxs("div",{className:"error-notification-content",children:[c.jsxs("div",{className:"error-notification-icon",children:[U==="error"&&"⚠️",U==="warning"&&"⚠️",U==="success"&&"✅",U==="info"&&"ℹ️"]}),c.jsxs("div",{className:"error-notification-text",children:[c.jsx("h4",{className:"error-notification-title",children:b}),c.jsx("p",{className:"error-notification-message",children:x})]}),c.jsxs("div",{className:"error-notification-actions",children:[C==="Reintentar"&&n&&c.jsx("button",{className:"error-notification-retry-btn",onClick:_,children:"Reintentar"}),c.jsx("button",{className:"error-notification-close-btn",onClick:p,"aria-label":"Cerrar notificación",children:"✕"})]})]}),c.jsx("div",{className:"error-notification-progress",children:c.jsx("div",{className:"error-notification-progress-bar",style:{animationDuration:`${o}ms`,animationPlayState:i?"running":"paused"}})})]})},jj="modulepreload",Dj=function(s){return"/Expo2025-v2/"+s},_0={},lb=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){let p=function(_){return Promise.all(_.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var d=p;document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),g=y?.nonce||y?.getAttribute("nonce");o=p(n.map(_=>{if(_=Dj(_),_ in _0)return;_0[_]=!0;const b=_.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${x}`))return;const C=document.createElement("link");if(C.rel=b?"stylesheet":jj,b||(C.as="script"),C.crossOrigin="",C.href=_,g&&C.setAttribute("nonce",g),document.head.appendChild(C),b)return new Promise((U,B)=>{C.addEventListener("load",U),C.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${_}`)))})}))}function u(y){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=y,window.dispatchEvent(g),!g.defaultPrevented)throw y}return o.then(y=>{for(const g of y||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},Pj=()=>{console.log("🔍 Firebase Debug Information:"),console.log("=============================="),console.log("📋 Configuration:"),console.log("- Project ID:","animals-adoption-app-v2"),console.log("- Auth Domain:","animals-adoption-app-v2.firebaseapp.com"),console.log("- API Key:","Present"),console.log("🔐 Authentication State:"),console.log("- Current User:",Kt.currentUser?"Authenticated":"Not authenticated"),Kt.currentUser&&(console.log("  - UID:",Kt.currentUser.uid),console.log("  - Email:",Kt.currentUser.email),console.log("  - Email Verified:",Kt.currentUser.emailVerified)),console.log("🌐 Browser Information:"),console.log("- User Agent:",navigator.userAgent),console.log("- Platform:",navigator.platform),console.log("- Language:",navigator.language),console.log("- Online:",navigator.onLine),console.log("🔗 URL Information:"),console.log("- Protocol:",window.location.protocol),console.log("- Host:",window.location.host),console.log("- Origin:",window.location.origin),window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&console.warn("⚠️ WARNING: App is not running on HTTPS. Firebase Auth may not work properly."),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("✅ Running on localhost - Firebase should work normally"),console.log("==============================")},Mj=async()=>{console.log("🧪 Testing Firebase Operations:"),console.log("==============================");try{console.log("1. Testing Firestore connection...");const{db:s}=await lb(async()=>{const{db:e}=await Promise.resolve().then(()=>Nj);return{db:e}},[]);console.log("✅ Firestore connection: OK"),console.log("2. Testing Authentication..."),Kt.currentUser?console.log("✅ User authenticated:",Kt.currentUser.uid):console.log("❌ No user authenticated"),console.log("3. Testing basic permissions..."),Kt.currentUser?console.log("✅ User has authentication token"):console.log("❌ No authentication token available")}catch(s){console.error("❌ Firebase test failed:",s),console.error("Error details:",{code:s.code,message:s.message,stack:s.stack})}console.log("==============================")},Oj=async()=>{console.log("📋 Checking Firebase Rules:"),console.log("==============================");try{if(Kt.currentUser){console.log("Testing user profile access...");const{userService:s}=await lb(async()=>{const{userService:n}=await Promise.resolve().then(()=>Rj);return{userService:n}},void 0),e=await s.getUserProfile(Kt.currentUser.uid);console.log(e?"✅ User profile access: OK":"❌ User profile access: FAILED")}else console.log("❌ Cannot test rules - no authenticated user")}catch(s){console.error("❌ Rules test failed:",s),console.error("Error details:",{code:s.code,message:s.message})}console.log("==============================")},kj=async()=>{Pj(),await Mj(),await Oj()},Vj=()=>{console.log("🔍 Diagnosing Common Issues:"),console.log("==============================");const s=[];return window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&s.push("App is not running on HTTPS - Firebase Auth may not work"),Kt.currentUser||s.push("No user is currently authenticated"),navigator.onLine||s.push("Device is offline"),s.length===0?console.log("✅ No common issues detected"):(console.log("❌ Issues detected:"),s.forEach((e,n)=>{console.log(`${n+1}. ${e}`)})),console.log("=============================="),s},Lj=()=>{const{user:s,loading:e}=Ot(),[n,i]=I.useState({}),[o,u]=I.useState(!1);return I.useEffect(()=>{const d=()=>{i({user:s?{uid:s.uid,email:s.email,displayName:s.displayName,emailVerified:s.emailVerified,providerData:s.providerData}:null,loading:e,authState:Kt.currentUser?"authenticated":"not authenticated",timestamp:new Date().toISOString()})};d();const y=setInterval(d,5e3);return()=>clearInterval(y)},[s,e]),o?c.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,background:"white",border:"2px solid #333",borderRadius:"10px",padding:"20px",maxWidth:"400px",maxHeight:"500px",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[c.jsx("h3",{style:{margin:0,color:"#333"},children:"🐛 Debug Panel"}),c.jsx("button",{onClick:()=>u(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"✕"})]}),c.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.4"},children:[c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Estado de Autenticación:"}),c.jsx("div",{style:{padding:"5px",background:s?"#d4edda":"#f8d7da",borderRadius:"3px",marginTop:"5px"},children:e?"Cargando...":s?"✅ Autenticado":"❌ No autenticado"})]}),s&&c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Usuario:"}),c.jsxs("div",{style:{padding:"5px",background:"#f8f9fa",borderRadius:"3px",marginTop:"5px",fontFamily:"monospace"},children:[c.jsxs("div",{children:["UID: ",s.uid]}),c.jsxs("div",{children:["Email: ",s.email]}),c.jsxs("div",{children:["Nombre: ",s.displayName||"No definido"]}),c.jsxs("div",{children:["Email verificado: ",s.emailVerified?"Sí":"No"]})]})]}),c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Firebase Auth State:"}),c.jsx("div",{style:{padding:"5px",background:"#f8f9fa",borderRadius:"3px",marginTop:"5px",fontFamily:"monospace"},children:n.authState})]}),c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Timestamp:"}),c.jsx("div",{style:{padding:"5px",background:"#f8f9fa",borderRadius:"3px",marginTop:"5px",fontFamily:"monospace",fontSize:"10px"},children:n.timestamp})]}),c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Configuración Firebase:"}),c.jsxs("div",{style:{padding:"5px",background:"#f8f9fa",borderRadius:"3px",marginTop:"5px",fontFamily:"monospace",fontSize:"10px"},children:[c.jsxs("div",{children:["Project ID: ","animals-adoption-app-v2"]}),c.jsxs("div",{children:["Auth Domain: ","animals-adoption-app-v2.firebaseapp.com"]})]})]}),c.jsxs("div",{style:{marginTop:"15px",padding:"10px",background:"#e9ecef",borderRadius:"5px"},children:[c.jsx("strong",{children:"Acciones de Debug:"}),c.jsxs("div",{style:{marginTop:"10px"},children:[c.jsx("button",{onClick:()=>kj(),style:{background:"#007bff",color:"white",border:"none",padding:"5px 10px",borderRadius:"3px",marginRight:"5px",cursor:"pointer",fontSize:"11px"},children:"🧪 Ejecutar Tests"}),c.jsx("button",{onClick:()=>Vj(),style:{background:"#28a745",color:"white",border:"none",padding:"5px 10px",borderRadius:"3px",cursor:"pointer",fontSize:"11px"},children:"🔍 Diagnosticar"})]})]}),c.jsxs("div",{style:{marginTop:"15px",padding:"10px",background:"#e9ecef",borderRadius:"5px"},children:[c.jsx("strong",{children:"Instrucciones:"}),c.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"15px"},children:[c.jsx("li",{children:"Verifica que el usuario esté autenticado"}),c.jsx("li",{children:"Si no está autenticado, inicia sesión"}),c.jsx("li",{children:"Revisa la consola del navegador para más detalles"}),c.jsx("li",{children:"Comparte esta información si necesitas ayuda"})]})]})]})]}):c.jsx("button",{onClick:()=>u(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,background:"#ff6b6b",color:"white",border:"none",borderRadius:"50%",width:"50px",height:"50px",cursor:"pointer",fontSize:"20px"},title:"Debug Panel",children:"🐛"})},Uj=()=>{const[s,e]=I.useState("dark");return I.useEffect(()=>{const o=localStorage.getItem("theme")||"dark",u="dark";e(u),document.documentElement.setAttribute("data-theme",u),document.body.setAttribute("data-theme",u)},[]),{currentTheme:s,toggleTheme:()=>{const o=s==="dark"?"light":"dark";e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o)},setTheme:o=>{(o==="dark"||o==="light")&&(e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o))},isDark:s==="dark",isLight:s==="light"}};function ke(){const s=Et(),e=ts(),{logout:n}=Ot(),i=()=>{s("/")},o=()=>{s("/profile")};return c.jsxs("nav",{className:"navbar",children:[c.jsx("div",{className:`nav-icon ${e.pathname==="/"?"active":""}`,title:"Inicio",onClick:i,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 3.172l8 7.2V20a1 1 0 01-1 1h-5v-6H10v6H5a1 1 0 01-1-1v-9.628l8-7.2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/upload"?"active":""}`,title:"Subir Mascota",onClick:()=>s("/upload"),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/favorites"?"active":""}`,title:"Favoritos",onClick:()=>s("/favorites"),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/profile"?"active":""}`,title:"Perfil",onClick:o,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]})}function qj(){const{user:s}=Ot(),e=Et(),n=ts(),[i,o]=I.useState([]),[u,d]=I.useState({name:"",address:""}),[y,g]=I.useState(""),[p,_]=I.useState(!0),[b,x]=I.useState([]),[C,U]=I.useState(["all"]),[B,V]=I.useState(!1),[Y,oe]=I.useState([]),[$,H]=I.useState([]),[k,F]=I.useState("user"),{currentTheme:R,toggleTheme:w}=Uj(),N=n.state?.category||"";I.useEffect(()=>{const ee=ce=>{B&&!ce.target.closest(".filter-dropdown")&&V(!1)};return document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}},[B]);const j=async()=>{if(s?.uid)try{console.log("Loading favorites for user:",s.uid);const ee=await Jn.getFavorites(s.uid),ce=await Promise.all(ee.map(async me=>{const ye=await qt.getPetById(me.petId);return{...me,pet:ye}}));x(ce.filter(me=>me.pet)),console.log("Favorites loaded:",ce)}catch(ee){console.error("Error loading favorites:",ee)}},M=async()=>{try{console.log("Loading shelters...");const[ee,ce]=await Promise.all([sn.getPremiumShelters(),sn.getRegularShelters()]),me=[...ee,...ce];oe(me),console.log("Shelters loaded:",me)}catch(ee){console.error("Error loading shelters:",ee)}},q=async()=>{if(s?.uid)try{console.log("Loading user shelters...");const ee=await sn.getSheltersByOwner(s.uid);if(H(ee),ee.length>0){const ce=ee.some(me=>me.isPremium);F(ce?"premium":"shelter")}else F("user");console.log("User shelters loaded:",ee),console.log("User type determined:",k)}catch(ee){console.error("Error loading user shelters:",ee)}};I.useEffect(()=>{(async()=>{if(console.log("Home useEffect - user:",s),console.log("Home useEffect - loading:",p),s)try{console.log("User UID:",s.uid),console.log("User displayName:",s.displayName),console.log("User email:",s.email),console.log("Loading profile for user:",s.uid);const ce=await Nn.getUserProfile(s.uid);console.log("Profile loaded:",ce),ce?d({name:ce.name||"",address:ce.address||""}):(console.log("No profile found, using display name:",s.displayName),d({name:s.displayName||"",address:""})),await j(),await M(),await q();const me=await qt.getPets();if(me.length===0){const ye=[{name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro",status:"available",ownerId:"admin",description:"Bobby es un perro muy cariñoso y juguetón. Le encanta jugar con niños y es muy obediente."},{name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato",status:"available",ownerId:"admin",description:"Luna es una gata muy independiente pero cariñosa. Es perfecta para una familia tranquila."}];for(const ht of ye)await qt.createPet(ht);o(ye)}else o(me)}catch(ce){console.error("Error loading data:",ce)}finally{_(!1)}else try{const ce=await qt.getPets();o(ce),await M()}catch(ce){console.error("Error loading pets:",ce),o([{id:1,name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro"},{id:2,name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato"}])}finally{_(!1)}})()},[s,p]);const D=I.useMemo(()=>{const ee=y.trim().toLowerCase();let ce=i;return C.length===0||C.includes("all")?N&&(ce=i.filter(me=>me.type.toLowerCase()===N.toLowerCase())):ce=i.filter(me=>C.some(ye=>{switch(ye){case"favorites":return s?.uid?b.map($e=>$e.petId).includes(me.id):!1;case"shelters":return me.shelterId&&me.shelterName;case"dogs":return me.type.toLowerCase()==="perro";case"cats":return me.type.toLowerCase()==="gato";case"others":return me.type.toLowerCase()!=="perro"&&me.type.toLowerCase()!=="gato";default:return!1}})),ce.filter(me=>!ee||[me.name,me.breed,me.gender,me.age,me.location,me.shelterName].filter(Boolean).some(ht=>String(ht).toLowerCase().includes(ee)))},[i,y,C,N,b,s]),he=()=>{e("/categories")},De=async(ee,ce)=>{if(ce.stopPropagation(),!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{b.some(ye=>ye.petId===ee.id)?(await Jn.removeFavorite(s.uid,ee.id),x(ye=>ye.filter(ht=>ht.petId!==ee.id)),console.log("Pet removed from favorites")):(await Jn.addFavorite(s.uid,ee.id),x(ye=>[...ye,{petId:ee.id,userId:s.uid,createdAt:new Date().toISOString()}]),console.log("Pet added to favorites"))}catch(me){console.error("Error updating favorites:",me),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},te=ee=>b.some(ce=>ce.petId===ee.id),ue=ee=>{U(ce=>{if(ee==="all")return["all"];if(ce.includes(ee)){const me=ce.filter(ye=>ye!==ee);return me.length===0?["all"]:me}else return[...ce.filter(ye=>ye!=="all"),ee]})},X=()=>C.includes("all")||C.length===0?"Todos los filtros":C.length===1?{favorites:"Favoritas",shelters:"Refugios",dogs:"Perros",cats:"Gatos",others:"Otros"}[C[0]]||"Filtros":`${C.length} filtros`,Ee=ee=>{e("/adopt",{state:{pet:ee}})},O=()=>{e("/tracking")},ie=()=>{e("/shelters")},fe=()=>{e("/users")};return p?c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"18px"},children:"Cargando..."}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("div",{className:"header-top",children:[c.jsxs("div",{className:"greeting-section",children:[c.jsxs("h1",{className:"greeting-title",children:["Hola, ",u.name||"Amigo"," 👋"]}),c.jsx("p",{className:"greeting-subtitle",children:"Encuentra tu compañero perfecto"})]}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"conversations-button",onClick:()=>e("/conversations"),title:"Conversaciones",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})}),c.jsx("div",{className:"user-avatar",onClick:()=>e("/profile"),children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"A").charAt(0).toUpperCase()})})})]})]}),c.jsxs("div",{className:"search-container",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar mascotas...",value:y,onChange:ee=>g(ee.target.value),className:"search-input"}),c.jsx("button",{onClick:w,className:"theme-toggle-btn",title:R==="dark"?"Cambiar a modo claro":"Cambiar a modo oscuro",children:R==="dark"?c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5M17.6859 17.69L18.5 18.5M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsxs("button",{className:"quick-action-btn",onClick:O,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Seguimiento"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:fe,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Usuarios"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:ie,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Refugios"})]})]})]}),c.jsxs("main",{className:"main-content",children:[c.jsx("div",{className:"filter-container",children:c.jsxs("div",{className:"filter-dropdown",children:[c.jsxs("button",{className:"filter-trigger",onClick:()=>V(!B),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"})}),c.jsx("span",{className:"filter-label",children:X()}),c.jsx("svg",{className:`filter-arrow ${B?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),B&&c.jsxs("div",{className:"filter-options",children:[c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("all"),onChange:()=>ue("all")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Todas las mascotas"]})]})}),s?.uid&&b.length>0&&c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("favorites"),onChange:()=>ue("favorites")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"Favoritas (",b.length,")"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("shelters"),onChange:()=>ue("shelters")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),"De refugios"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("dogs"),onChange:()=>ue("dogs")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M18.5 2h-13C4.67 2 4 2.67 4 3.5v17c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5zM12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 14H8v-1.5c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2V20z"})}),"Perros"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("cats"),onChange:()=>ue("cats")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Gatos"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("others"),onChange:()=>ue("others")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Otras mascotas"]})]})})]})]})}),c.jsx("div",{className:"section-header",children:c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:C.includes("all")||C.length===0?"Mascotas disponibles":C.length===1?C.includes("favorites")?"Tus favoritas":C.includes("shelters")?"Mascotas de refugios":C.includes("dogs")?"Perros disponibles":C.includes("cats")?"Gatos disponibles":C.includes("others")?"Otras mascotas":"Mascotas disponibles":"Mascotas filtradas"}),c.jsxs("span",{className:"pets-count",children:[D.length," mascotas"]})]})}),c.jsx("div",{className:`pets-grid ${k==="user"?"single-column":k==="shelter"?"two-columns":"premium-layout"}`,children:D.map((ee,ce)=>c.jsxs("div",{className:`pet-card ${k==="premium"&&ce<2?"featured":""}`,onClick:()=>Ee(ee),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:ee.img,alt:ee.name,className:"pet-image"}),c.jsx("button",{className:`favorite-btn ${te(ee)?"favorited":""}`,onClick:me=>De(ee,me),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:ee.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:ee.name}),c.jsxs("p",{className:"pet-details",children:[ee.breed," • ",ee.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:ee.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",ee.location]})]}),ee.ownerName&&c.jsxs("div",{className:"pet-owner",children:[c.jsx("span",{className:"owner-label",children:"Dueño:"}),c.jsx("span",{className:"owner-name",children:ee.ownerName})]})]})]},ce))}),D.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No se encontraron mascotas"}),c.jsx("p",{children:"Intenta ajustar tu búsqueda o explorar todas las categorías"}),c.jsx("button",{className:"explore-btn",onClick:he,children:"Explorar categorías"})]}),Y.length>0&&c.jsxs("section",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:showOnlyShelters?"Refugios":"Refugios destacados"}),c.jsxs("span",{className:"pets-count",children:[Y.length," refugios"]})]}),c.jsxs("div",{className:"shelters-controls",children:[c.jsxs("button",{className:`shelters-toggle ${showOnlyShelters?"active":""}`,onClick:()=>setShowOnlyShelters(!showOnlyShelters),children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),showOnlyShelters?"Ver mascotas":"Solo refugios"]}),c.jsx("button",{className:"view-all-shelters",onClick:()=>e("/shelters"),children:"Ver todos"})]})]}),c.jsx("div",{className:"shelters-grid",children:(showOnlyShelters?filteredShelters:Y.slice(0,4)).map((ee,ce)=>c.jsxs("div",{className:`shelter-card ${ee.isPremium?"premium":""}`,onClick:()=>e("/shelters"),children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:ee.image||"/default-shelter.jpg",alt:ee.name,className:"shelter-image"}),ee.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:ee.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",ee.location]}),c.jsx("p",{className:"shelter-description",children:ee.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",ee.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",ee.petsCount||0," mascotas"]})]})]})]},ee.id||ce))})]})]}),c.jsx(ke,{})]})}function zj(){const s=Et(),[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{y()},[]);const y=async()=>{try{console.log("Loading categories from Firebase..."),o(!0);const p=await ab.getCategories();p.length===0?(console.log("No categories found in Firebase, using default categories"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])):(console.log("Categories loaded from Firebase:",p),n(p)),d(null)}catch(p){console.error("Error loading categories:",p),d("Error al cargar las categorías"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])}finally{o(!1)}},g=p=>{s("/",{state:{category:p}})};return i?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando categorías..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsxs("main",{children:[u&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:u}),c.jsx("button",{onClick:y,children:"Reintentar"})]}),c.jsx("div",{className:"category-cards",children:e.map((p,_)=>c.jsxs("div",{className:"category-card",style:{backgroundColor:p.bgColor,cursor:"pointer"},onClick:()=>g(p.type),children:[c.jsx("img",{src:p.image,alt:p.name}),c.jsx("div",{className:"category-name",children:p.name})]},p.id||_))})]}),c.jsx(ke,{})]})}function Bj(){const{user:s}=Ot(),e=Et(),[n,i]=I.useState(""),[o,u]=I.useState({name:"",location:"",breed:"",gender:"",age:"",type:"",description:"",size:"",vaccinated:!1,sterilized:!1,specialNeeds:"",shelterId:"",shelterName:""}),[d,y]=I.useState({name:"",address:""}),[g,p]=I.useState([]),[_,b]=I.useState(!1),[x,C]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s)try{const H=await Nn.getUserProfile(s.uid);H&&(y({name:H.name||"",address:H.address||""}),u(F=>({...F,location:H.address||""})));const k=await sn.getSheltersByOwner(s.uid);p(k)}catch(H){console.error("Error loading data:",H)}})()},[s]);const U=$=>{i($)},B=($,H)=>{u(k=>({...k,[$]:H}))},V=$=>{C($),$||u(H=>({...H,shelterId:"",shelterName:""}))},Y=$=>{const H=g.find(k=>k.id===$);u(k=>({...k,shelterId:$,shelterName:H?H.name:""}))},oe=async()=>{if(!o.name.trim()){alert("El nombre de la mascota es obligatorio");return}if(!o.type){alert("Debes seleccionar el tipo de mascota");return}if(!o.location.trim()){alert("La ubicación es obligatoria");return}if(!n.trim()){alert("Debes proporcionar un enlace de imagen");return}b(!0);try{console.log("Starting pet creation process...");const $={...o,img:n.trim(),status:"available",ownerId:s.uid,ownerName:d.name||s.displayName||"Usuario"};x&&o.shelterId&&($.shelterId=o.shelterId,$.shelterName=o.shelterName),console.log("Pet data prepared:",$),console.log("Image URL:",n.trim());const H=await qt.createPet($);console.log("Pet created successfully with ID:",H),alert("Mascota subida correctamente"),e("/")}catch($){console.error("Error saving pet:",$),alert("Error al subir la mascota: "+$.message)}finally{b(!1)}};return c.jsxs("div",{className:"upload-container",children:[c.jsxs("div",{className:"upload-header",children:[c.jsxs("h1",{className:"upload-title",children:[c.jsx("span",{className:"upload-icon",children:"🐾"}),"Subir Mascota"]}),c.jsx("p",{className:"upload-subtitle",children:"Comparte los detalles de tu mascota para encontrarle un hogar"})]}),c.jsxs("div",{className:"upload-content",children:[c.jsx("div",{className:"image-upload-section",children:c.jsxs("div",{className:"url-input-section",children:[c.jsxs("div",{className:"input-with-icon",children:[c.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24zm2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.42l-.47.48a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24z"})}),c.jsx("input",{type:"url",placeholder:"Pega un enlace de imagen (URL)",value:n,onChange:$=>U($.target.value),className:"url-input",required:!0})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐕 Perro"}),c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐱 Gato"}),c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1583337130417-3346a1be7dee?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐰 Conejo"})]})]})}),c.jsxs("div",{className:"form-section",children:[c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Nombre *"}),c.jsx("input",{type:"text",value:o.name,onChange:$=>B("name",$.target.value),placeholder:"Nombre de la mascota",className:"field-input",required:!0})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tipo *"}),c.jsxs("select",{value:o.type,onChange:$=>B("type",$.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona tipo"}),c.jsx("option",{value:"Perro",children:"🐕 Perro"}),c.jsx("option",{value:"Gato",children:"🐱 Gato"}),c.jsx("option",{value:"Conejo",children:"🐰 Conejo"}),c.jsx("option",{value:"Hamster",children:"🐹 Hamster"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Ubicación *"}),c.jsx("input",{type:"text",value:o.location,onChange:$=>B("location",$.target.value),placeholder:"Ciudad, Estado",className:"field-input",required:!0})]}),g.length>0&&c.jsxs("div",{className:"form-field full-width",children:[c.jsx("div",{className:"shelter-toggle",children:c.jsxs("label",{className:"toggle-label",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:$=>V($.target.checked),className:"toggle-checkbox"}),c.jsx("span",{className:"toggle-text",children:"🏠 Esta mascota pertenece a uno de mis refugios"})]})}),x&&c.jsxs("div",{className:"shelter-select",children:[c.jsx("label",{className:"field-label",children:"Seleccionar Refugio *"}),c.jsxs("select",{value:o.shelterId,onChange:$=>Y($.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona un refugio"}),g.map($=>c.jsxs("option",{value:$.id,children:[$.name," - ",$.location]},$.id))]}),o.shelterName&&c.jsxs("p",{className:"shelter-info",children:["✅ Mascota será asociada a: ",c.jsx("strong",{children:o.shelterName})]})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Raza"}),c.jsx("input",{type:"text",value:o.breed,onChange:$=>B("breed",$.target.value),placeholder:"Raza o mezcla",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Género"}),c.jsxs("select",{value:o.gender,onChange:$=>B("gender",$.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Macho",children:"♂️ Macho"}),c.jsx("option",{value:"Hembra",children:"♀️ Hembra"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Edad"}),c.jsx("input",{type:"text",value:o.age,onChange:$=>B("age",$.target.value),placeholder:"Ej: 2 años",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tamaño"}),c.jsxs("select",{value:o.size,onChange:$=>B("size",$.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Pequeño",children:"S Pequeño"}),c.jsx("option",{value:"Mediano",children:"M Mediano"}),c.jsx("option",{value:"Grande",children:"L Grande"})]})]})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Descripción"}),c.jsx("textarea",{value:o.description,onChange:$=>B("description",$.target.value),placeholder:"Cuéntanos sobre su personalidad y comportamiento...",className:"field-textarea",rows:"3"})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Necesidades especiales"}),c.jsx("textarea",{value:o.specialNeeds,onChange:$=>B("specialNeeds",$.target.value),placeholder:"Medicamentos, cuidados especiales, etc.",className:"field-textarea",rows:"2"})]}),c.jsxs("div",{className:"checkbox-section",children:[c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:o.vaccinated,onChange:$=>B("vaccinated",$.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está vacunado"})]}),c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:o.sterilized,onChange:$=>B("sterilized",$.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está esterilizado"})]})]}),c.jsx("button",{className:"submit-button",onClick:oe,disabled:_,children:_?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"loading-spinner"}),"Guardando..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"💾"}),"Guardar mascota"]})})]})]}),c.jsx(ke,{})]})}function Fj(){const s=Et(),{user:e,logout:n}=Ot(),[i,o]=I.useState("my-pets"),[u,d]=I.useState({name:"",address:"",phone:"",email:""}),[y,g]=I.useState([]),[p,_]=I.useState([]),[b,x]=I.useState([]),[C,U]=I.useState(!0),[B,V]=I.useState(!1),[Y,oe]=I.useState(null),[$,H]=I.useState({name:"",address:"",phone:"",email:""}),[k,F]=I.useState({name:"",breed:"",age:"",gender:"",location:"",description:""});I.useEffect(()=>{e?R():U(!1)},[e]);const R=async()=>{try{console.log("Profile: Starting to load user data for user:",e.uid),U(!0),console.log("Profile: Loading user profile...");const X=await Nn.getUserProfile(e.uid);if(X)console.log("Profile: User profile found:",X),d(X),H(X);else{console.log("Profile: No user profile found, using basic profile");const fe={name:e.displayName||"Usuario",address:"",phone:"",email:e.email||""};d(fe),H(fe)}console.log("Profile: Loading pets for owner:",e.uid);const Ee=await qt.getPetsByOwner(e.uid);console.log("Profile: Pets data received:",Ee),g(Ee),console.log("Profile: Loading favorites...");const O=await Jn.getFavorites(e.uid);console.log("Profile: Favorites data received:",O),_(O),console.log("Profile: Loading shelters...");const ie=await sn.getSheltersByOwner(e.uid);console.log("Profile: Shelters data received:",ie),x(ie)}catch(X){console.error("Profile: Error loading user data:",X)}finally{U(!1)}},w=(X,Ee)=>{H(O=>({...O,[X]:Ee}))},N=async()=>{try{await Nn.updateUserProfile(e.uid,$),d($),V(!1),alert("Perfil actualizado correctamente")}catch(X){console.error("Error updating profile:",X),alert("Error al actualizar el perfil")}},j=()=>{H(u),V(!1)},M=X=>{X.ownerId===e.uid?(oe(X),F({name:X.name||"",breed:X.breed||"",age:X.age||"",gender:X.gender||"",location:X.location||"",description:X.description||""})):s("/adopt",{state:{pet:X}})},q=async(X,Ee)=>{if(Ee.stopPropagation(),!!e?.uid)try{p.some(ie=>ie.petId===X.id)?(await Jn.removeFavorite(e.uid,X.id),_(ie=>ie.filter(fe=>fe.petId!==X.id))):(await Jn.addFavorite(e.uid,X.id),_(ie=>[...ie,{petId:X.id,userId:e.uid,createdAt:new Date().toISOString()}]))}catch(O){console.error("Error updating favorites:",O)}},D=async()=>{try{await n(),s("/login")}catch(X){console.error("Error logging out:",X),alert("Error al cerrar sesión")}},he=(X,Ee)=>{F(O=>({...O,[X]:Ee}))},De=async()=>{if(Y)try{await qt.updatePet(Y.id,k),alert("Mascota actualizada correctamente"),oe(null),await R()}catch(X){console.error("Error updating pet:",X),alert("Error al actualizar la mascota")}},te=()=>{oe(null),F({name:"",breed:"",age:"",gender:"",location:"",description:""})},ue=async()=>{if(!Y)return;const X=`¿Estás seguro de que quieres eliminar a ${Y.name}?

Esto también eliminará:
• Todas las solicitudes de adopción
• Todas las notificaciones relacionadas
• Mensajes en chats (se notificará a los usuarios)
• Favoritos de otros usuarios

Esta acción no se puede deshacer.`;if(window.confirm(X))try{const Ee=await qt.deletePet(Y.id);let O=`✅ ${Y.name} eliminado correctamente`;Ee.deleted&&(O+=`

Eliminado:
`,Ee.deleted.adoptionRequests>0&&(O+=`• ${Ee.deleted.adoptionRequests} solicitudes de adopción
`),Ee.deleted.notifications>0&&(O+=`• ${Ee.deleted.notifications} notificaciones
`),Ee.deleted.conversations>0&&(O+=`• Mensajes en ${Ee.deleted.conversations} conversaciones
`),Ee.deleted.favorites>0&&(O+=`• ${Ee.deleted.favorites} favoritos
`)),alert(O),oe(null),await R()}catch(Ee){console.error("Error deleting pet:",Ee),alert("Error al eliminar la mascota: "+Ee.message)}};return C?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando perfil..."})]}),c.jsx(ke,{})]}):e?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"profile-header",children:[c.jsxs("div",{className:"profile-info",children:[c.jsx("div",{className:"profile-avatar",children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"U").charAt(0).toUpperCase()})})}),c.jsxs("div",{className:"profile-details",children:[c.jsx("h2",{className:"profile-name",children:u.name||"Usuario"}),c.jsx("p",{className:"profile-email",children:u.email||e.email})]})]}),c.jsx("button",{className:"settings-button",onClick:()=>V(!B),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})})})]}),c.jsxs("main",{className:"profile-main",children:[c.jsxs("div",{className:"profile-tabs",children:[c.jsx("button",{className:`tab-button ${i==="my-pets"?"active":""}`,onClick:()=>o("my-pets"),children:"Tus mascotas"}),c.jsx("button",{className:`tab-button ${i==="favorites"?"active":""}`,onClick:()=>o("favorites"),children:"Favoritas"}),c.jsx("button",{className:`tab-button ${i==="shelters"?"active":""}`,onClick:()=>o("shelters"),children:"Mis Refugios"})]}),c.jsxs("div",{className:"tab-content",children:[i==="my-pets"&&c.jsxs("div",{className:"pets-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Mascotas (",y.length,")"]}),c.jsx("div",{className:"section-actions",children:c.jsxs("button",{className:"refresh-button",onClick:R,disabled:C,children:[C?"🔄":"↻"," Recargar"]})})]}),y.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:y.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>M(X),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.img,alt:X.name,className:"pet-image"}),c.jsx("div",{className:"pet-type-badge",children:X.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.name}),c.jsxs("p",{className:"pet-details",children:[X.breed," • ",X.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.location]})]})]})]},X.id))})]}),i==="favorites"&&c.jsx("div",{className:"favorites-section",children:p.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"❤️"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Las mascotas que marques como favoritas aparecerán aquí"})]}):c.jsx("div",{className:"pets-grid",children:p.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>M(X.pet),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.pet?.img,alt:X.pet?.name,className:"pet-image"}),c.jsx("button",{className:"favorite-btn favorited",onClick:Ee=>q(X.pet,Ee),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:X.pet?.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.pet?.name}),c.jsxs("p",{className:"pet-details",children:[X.pet?.breed," • ",X.pet?.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.pet?.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.pet?.location]})]})]})]},X.id))})}),i==="shelters"&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Refugios (",b.length,")"]}),c.jsxs("div",{className:"section-actions",children:[c.jsx("button",{className:"refresh-button",onClick:R,disabled:C,children:"🔄 Actualizar"}),c.jsx("button",{className:"add-button",onClick:()=>s("/shelter-register"),children:"➕ Registrar Refugio"})]})]}),b.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu refugio para comenzar a gestionar mascotas"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):c.jsx("div",{className:"shelters-grid",children:b.map(X=>c.jsxs("div",{className:"shelter-card",children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:X.image||"/default-shelter.jpg",alt:X.name,className:"shelter-image"}),X.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"}),c.jsx("div",{className:"status-badge status-{shelter.status}",children:X.status==="active"?"Activo":X.status==="pending"?"Pendiente":"Inactivo"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:X.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",X.location]}),c.jsx("p",{className:"shelter-description",children:X.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",X.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",X.petsCount||0," mascotas"]})]}),c.jsxs("div",{className:"shelter-actions",children:[c.jsx("button",{className:"manage-button",onClick:()=>s("/shelter-admin"),children:"Gestionar"}),!X.isPremium&&c.jsx("button",{className:"upgrade-button",onClick:()=>s("/shelters"),children:"Actualizar a Premium"})]})]})]},X.id))})]})]}),B&&c.jsx("div",{className:"modal-overlay",onClick:()=>V(!1),children:c.jsxs("div",{className:"settings-modal",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"settings-header",children:[c.jsxs("div",{className:"settings-title",children:[c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})}),c.jsx("h3",{children:"Configuración"})]}),c.jsx("button",{className:"close-btn",onClick:()=>V(!1),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"settings-content",children:[c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Información Personal"}),c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Nombre completo"]}),c.jsx("input",{type:"text",value:$.name,onChange:X=>w("name",X.target.value),placeholder:"Tu nombre completo",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Dirección"]}),c.jsx("input",{type:"text",value:$.address,onChange:X=>w("address",X.target.value),placeholder:"Tu dirección",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),"Teléfono"]}),c.jsx("input",{type:"tel",value:$.phone,onChange:X=>w("phone",X.target.value),placeholder:"Tu número de teléfono",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Email"]}),c.jsx("input",{type:"email",value:$.email,onChange:X=>w("email",X.target.value),placeholder:"Tu email",className:"form-input"})]})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Preferencias de Visualización"}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Mostrar mascotas"]}),c.jsxs("div",{className:"select-wrapper",children:[c.jsxs("select",{value:i,onChange:X=>o(X.target.value),className:"form-select",children:[c.jsx("option",{value:"my-pets",children:"Mis mascotas"}),c.jsx("option",{value:"favorites",children:"Favoritas"}),c.jsx("option",{value:"shelters",children:"Mis refugios"})]}),c.jsx("svg",{className:"select-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]})]})]})]}),c.jsxs("div",{className:"settings-footer",children:[c.jsxs("button",{className:"logout-btn",onClick:D,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Cerrar Sesión"]}),c.jsxs("div",{className:"settings-actions",children:[c.jsx("button",{className:"cancel-btn",onClick:j,children:"Cancelar"}),c.jsxs("button",{className:"save-btn",onClick:N,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Guardar"]})]})]})]})}),Y&&c.jsx("div",{className:"modal-overlay",onClick:te,children:c.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Editar Mascota"}),c.jsx("button",{className:"close-btn",onClick:te,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre"}),c.jsx("input",{type:"text",value:k.name,onChange:X=>he("name",X.target.value),placeholder:"Nombre de la mascota"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Raza"}),c.jsx("input",{type:"text",value:k.breed,onChange:X=>he("breed",X.target.value),placeholder:"Raza de la mascota"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Edad"}),c.jsx("input",{type:"text",value:k.age,onChange:X=>he("age",X.target.value),placeholder:"Edad"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Género"}),c.jsxs("select",{value:k.gender,onChange:X=>he("gender",X.target.value),children:[c.jsx("option",{value:"",children:"Seleccionar"}),c.jsx("option",{value:"Macho",children:"Macho"}),c.jsx("option",{value:"Hembra",children:"Hembra"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación"}),c.jsx("input",{type:"text",value:k.location,onChange:X=>he("location",X.target.value),placeholder:"Ubicación"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción"}),c.jsx("textarea",{value:k.description,onChange:X=>he("description",X.target.value),placeholder:"Descripción de la mascota",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"delete-button",onClick:ue,children:"Eliminar Mascota"}),c.jsxs("div",{className:"modal-actions-right",children:[c.jsx("button",{className:"cancel-button",onClick:te,children:"Cancelar"}),c.jsx("button",{className:"save-button",onClick:De,children:"Guardar"})]})]})]})})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu perfil"}),c.jsx("p",{children:"Necesitas iniciar sesión para acceder a tu perfil"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/login"),children:"Iniciar sesión"})]}),c.jsx(ke,{})]})}function Hj(){const s=Et(),{login:e}=Ot(),[n,i]=I.useState(""),[o,u]=I.useState(""),[d,y]=I.useState(""),[g,p]=I.useState(!1),_=async b=>{b.preventDefault(),p(!0),y("");try{await e(n,o),s("/")}catch(x){y("Error al iniciar sesión. Verifica tus credenciales."),console.error("Login error:",x)}finally{p(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Bienvenido de vuelta!"}),c.jsx("p",{className:"auth-subtitle",children:"Inicia sesión para continuar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:_,className:"auth-form",children:[d&&c.jsx("div",{className:"error-message",children:d}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n,onChange:b=>i(b.target.value),placeholder:"tu@correo.com",required:!0,disabled:g})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:o,onChange:b=>u(b.target.value),placeholder:"••••••••",required:!0,disabled:g})]}),c.jsx("button",{className:`auth-button ${g?"loading":""}`,type:"submit",disabled:g,children:g?"Iniciando sesión...":"Iniciar sesión"}),c.jsxs("div",{className:"auth-link",children:["¿No tienes cuenta? ",c.jsx(Hh,{to:"/register",children:"Crear cuenta"})]})]})}),c.jsx(ke,{})]})}function Gj(){const s=Et(),{register:e}=Ot(),[n,i]=I.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",isShelter:!1}),[o,u]=I.useState(""),[d,y]=I.useState(!1),g=(_,b)=>i(x=>({...x,[_]:b})),p=async _=>{if(_.preventDefault(),y(!0),u(""),n.password!==n.confirmPassword){u("Las contraseñas no coinciden"),y(!1);return}if(n.password.length<6){u("La contraseña debe tener al menos 6 caracteres"),y(!1);return}try{await e(n.email,n.password,{name:n.name,phone:n.phone,address:n.address,isShelter:n.isShelter}),s("/")}catch(b){u("Error al crear la cuenta. Intenta de nuevo."),console.error("Register error:",b)}finally{y(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Únete a nosotros!"}),c.jsx("p",{className:"auth-subtitle",children:"Crea tu cuenta para comenzar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:p,className:"auth-form",children:[o&&c.jsx("div",{className:"error-message",children:o}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nombre completo"}),c.jsx("input",{type:"text",className:"form-input",value:n.name,onChange:_=>g("name",_.target.value),placeholder:"Tu nombre completo",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n.email,onChange:_=>g("email",_.target.value),placeholder:"tu@correo.com",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.password,onChange:_=>g("password",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Confirmar contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.confirmPassword,onChange:_=>g("confirmPassword",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Teléfono (opcional)"}),c.jsx("input",{type:"tel",className:"form-input",value:n.phone,onChange:_=>g("phone",_.target.value),placeholder:"+506 0000-0000",disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Dirección (opcional)"}),c.jsx("input",{type:"text",className:"form-input",value:n.address,onChange:_=>g("address",_.target.value),placeholder:"Tu dirección",disabled:d})]}),c.jsxs("div",{className:"checkbox-group",children:[c.jsx("input",{type:"checkbox",className:"checkbox-input",id:"isShelter",checked:n.isShelter,onChange:_=>g("isShelter",_.target.checked),disabled:d}),c.jsx("label",{className:"checkbox-label",htmlFor:"isShelter",children:"¿Eres un refugio de animales?"})]}),c.jsx("button",{className:`auth-button ${d?"loading":""}`,type:"submit",disabled:d,children:d?"Creando cuenta...":"Crear cuenta"}),c.jsxs("div",{className:"auth-link",children:["¿Ya tienes cuenta? ",c.jsx(Hh,{to:"/login",children:"Iniciar sesión"})]})]})}),c.jsx(ke,{})]})}function Qj(){const{user:s}=Ot(),e=ts(),n=Et(),{petId:i}=pp(),o=e.state?.pet,[u,d]=I.useState(o),[y,g]=I.useState(!o),[p,_]=I.useState({name:s?.displayName||"",email:s?.email||"",message:""}),[b,x]=I.useState(!1),[C,U]=I.useState(!1),[B,V]=I.useState(!1),[Y,oe]=I.useState(!1);I.useEffect(()=>{if(o){if(d(o),g(!1),H(o.id),k(o.id),s?.uid&&o.ownerId===s.uid){n("/profile");return}}else if(i)$(i);else{n("/");return}},[o,i,n,s]);const $=async N=>{try{console.log("Loading pet from Firebase with ID:",N),g(!0);const j=await qt.getPetById(N);if(j){if(console.log("Pet loaded from Firebase:",j),s?.uid&&j.ownerId===s.uid){n("/profile");return}d(j),H(j.id),k(j.id)}else console.log("Pet not found in Firebase"),n("/")}catch(j){console.error("Error loading pet from Firebase:",j),n("/")}finally{g(!1)}},H=async N=>{if(s?.uid)try{const M=(await nn.getAdoptionRequests(s.uid)).find(q=>q.petId===N&&(q.status==="pending"||q.status==="approved"));V(!!M)}catch(j){console.error("Error checking existing request:",j)}},k=async N=>{if(s?.uid)try{const j=await Jn.isFavorite(s.uid,N);oe(j)}catch(j){console.error("Error checking favorite status:",j)}},F=async()=>{if(!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{Y?(await Jn.removeFavorite(s.uid,u.id),oe(!1),console.log("Pet removed from favorites")):(await Jn.addFavorite(s.uid,u.id),oe(!0),console.log("Pet added to favorites"))}catch(N){console.error("Error updating favorites:",N),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},R=N=>{_(j=>({...j,[N.target.name]:N.target.value}))},w=async N=>{if(N.preventDefault(),!s?.uid){alert("Debes iniciar sesión para solicitar adopción");return}try{U(!0),console.log("=== STARTING ADOPTION REQUEST ==="),console.log("Pet data:",u),console.log("Form data:",p),console.log("User data:",s),console.log("Pet ownerId:",u.ownerId);const j={userId:s.uid,petId:u.id,ownerId:u.ownerId,pet:u,adopterName:p.name,adopterEmail:p.email,message:p.message||""};console.log("Creating adoption request with data:",j);const M=await nn.createAdoptionRequest(j);if(console.log("✅ Adoption request created with ID:",M),await zh.createNotification({userId:s.uid,type:"adoption",title:"Solicitud de adopción enviada",message:`Tu solicitud para adoptar a ${u.name} ha sido enviada y está siendo revisada.`,adoptionRequestId:M}),u.ownerId){console.log("=== CREATING NOTIFICATION FOR OWNER ==="),console.log("Pet owner ID:",u.ownerId),console.log("Adopter ID:",s.uid),console.log("Pet name:",u.name),console.log("Adopter name:",p.name);try{const q=await zh.createNotification({userId:u.ownerId,type:"adoption_request",title:"Nueva solicitud de adopción",message:`${p.name} quiere adoptar a ${u.name}. Revisa la solicitud en tu perfil.`,adoptionRequestId:M,petId:u.id,adopterId:s.uid});console.log("✅ Notification created successfully for pet owner:",u.ownerId),console.log("Notification ID:",q)}catch(q){console.error("❌ Error creating notification for owner:",q)}}else console.log("❌ No ownerId found for pet:",u);console.log("Notifications created successfully"),x(!0)}catch(j){console.error("Error creating adoption request:",j),alert("Error al procesar la solicitud. Inténtalo de nuevo.")}finally{U(!1)}};return y?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascota..."})]})}),c.jsx(ke,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"adopt-container",children:[c.jsxs("div",{className:"pet-header",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:u.img,alt:u.name,className:"pet-img"}),c.jsx("button",{className:`favorite-button ${Y?"active":""}`,onClick:F,title:Y?"Quitar de favoritos":"Agregar a favoritos",disabled:!s?.uid,children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.name}),c.jsxs("p",{className:"pet-details",children:[u.breed," • ",u.gender," • ",u.age," • ",u.location]})]})]}),b?c.jsxs("div",{className:"adoption-completed",children:[c.jsx("div",{className:"success-icon",children:"✅"}),c.jsx("h2",{children:"¡Solicitud enviada!"}),c.jsx("p",{children:"Tu solicitud de adopción ha sido enviada y está siendo revisada."}),c.jsxs("div",{className:"completion-actions",children:[c.jsx("button",{className:"tracking-button",onClick:()=>n("/tracking"),children:"Ver seguimiento"}),c.jsx("button",{className:"home-button",onClick:()=>n("/"),children:"Volver al inicio"})]})]}):c.jsxs(c.Fragment,{children:[B&&c.jsxs("div",{className:"existing-request-warning",children:[c.jsxs("p",{children:["⚠️ Ya tienes una solicitud pendiente para adoptar a ",u.name]}),c.jsx("p",{children:"Puedes revisar el estado de tu solicitud en tu perfil."})]}),c.jsxs("form",{className:"adopt-form",onSubmit:w,children:[!s?.uid&&c.jsxs("div",{className:"login-required",children:[c.jsx("p",{children:"Debes iniciar sesión para solicitar adopción"}),c.jsx("button",{type:"button",onClick:()=>n("/login"),children:"Iniciar sesión"})]}),c.jsx("label",{children:"Nombre"}),c.jsx("input",{name:"name",value:p.name,onChange:R,placeholder:"Tu nombre",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",name:"email",value:p.email,onChange:R,placeholder:"Tu email",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Mensaje (opcional)"}),c.jsx("textarea",{name:"message",value:p.message,onChange:R,placeholder:"Cuéntanos por qué quieres adoptar esta mascota...",rows:"3",disabled:!s?.uid}),c.jsx("button",{type:"submit",disabled:!s?.uid||C||B,children:C?"Enviando...":B?"Solicitud ya enviada":"Adoptar"})]})]})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la mascota."}),c.jsx("button",{onClick:()=>n("/"),children:"Volver al inicio"})]})}),c.jsx(ke,{})]})}function $j(){const{user:s}=Ot(),e=Et(),[n,i]=I.useState("sent"),[o,u]=I.useState([]),[d,y]=I.useState([]),[g,p]=I.useState(!0),[_,b]=I.useState(null),[x,C]=I.useState(!1);I.useEffect(()=>{s?.uid?U():p(!1)},[s]);const U=async()=>{try{p(!0),b(null);const k=await nn.getAdoptionRequests(s.uid);console.log("Sent requests loaded:",k);const F=await nn.getAdoptionRequestsForOwner(s.uid);console.log("Received requests loaded:",F);const R=await Promise.all(k.map(async N=>{const j=await qt.getPetById(N.petId),M=await Nn.getUserProfile(N.ownerId);return{...N,pet:j,owner:M}})),w=await Promise.all(F.map(async N=>{const j=await qt.getPetById(N.petId),M=await Nn.getUserProfile(N.userId);return{...N,pet:j,requester:M}}));u(R),y(w)}catch(k){console.error("Error loading requests:",k),b("Error al cargar solicitudes de adopción")}finally{p(!1)}},B=async k=>{try{C(!0),await nn.approveAdoptionRequest(k),await U(),alert("Solicitud aprobada exitosamente")}catch(F){console.error("Error approving request:",F),alert("Error al aprobar la solicitud")}finally{C(!1)}},V=async k=>{try{C(!0),await nn.rejectAdoptionRequest(k),await U(),alert("Solicitud rechazada")}catch(F){console.error("Error rejecting request:",F),alert("Error al rechazar la solicitud")}finally{C(!1)}},Y=k=>{switch(k){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},oe=k=>{switch(k){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}},$=k=>{e("/adoption-details",{state:{adoption:k}})};if(g)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]})}),c.jsx(ke,{})]});if(!s?.uid)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu seguimiento"}),c.jsx("p",{children:"Necesitas iniciar sesión para gestionar tus solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(ke,{})]});const H=n==="sent"?o:d;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsxs("main",{className:"main-content",children:[_&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:_}),c.jsx("button",{onClick:U,children:"Reintentar"})]}),c.jsxs("div",{className:"tracking-tabs",children:[c.jsxs("button",{className:`tracking-tab ${n==="sent"?"active":""}`,onClick:()=>i("sent"),children:["Mis solicitudes (",o.length,")"]}),c.jsxs("button",{className:`tracking-tab ${n==="received"?"active":""}`,onClick:()=>i("received"),children:["Solicitudes recibidas (",d.length,")"]})]}),c.jsx("div",{className:"tracking-content",children:H.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:n==="sent"?"📤":"📥"}),c.jsx("h3",{children:n==="sent"?"No has enviado solicitudes":"No tienes solicitudes recibidas"}),c.jsx("p",{children:n==="sent"?"Cuando envíes solicitudes de adopción, aparecerán aquí":"Las solicitudes para tus mascotas aparecerán aquí"}),n==="sent"&&c.jsx("button",{className:"browse-button",onClick:()=>e("/"),children:"Ver mascotas disponibles"})]}):c.jsx("div",{className:"requests-list",children:H.map(k=>c.jsxs("div",{className:"request-card",children:[c.jsx("div",{className:"request-image",children:c.jsx("img",{src:k.pet?.img||"/placeholder-pet.jpg",alt:k.pet?.name})}),c.jsxs("div",{className:"request-info",children:[c.jsx("h3",{children:k.pet?.name}),c.jsxs("p",{className:"pet-details",children:[k.pet?.breed," • ",k.pet?.age," • ",k.pet?.location]}),n==="sent"?c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Dueño:"})," ",k.owner?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.owner?.email||"No disponible"]})]}):c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",k.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.requester?.email||"No disponible"]}),k.message&&c.jsxs("p",{children:[c.jsx("strong",{children:"Mensaje:"}),' "',k.message,'"']})]}),c.jsxs("div",{className:"request-status",children:[c.jsx("span",{className:"status-badge",style:{backgroundColor:Y(k.status)},children:oe(k.status)}),c.jsx("span",{className:"date",children:new Date(k.createdAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"request-actions",children:[n==="received"&&k.status==="pending"&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"approve-btn",onClick:F=>{F.stopPropagation(),B(k.id)},disabled:x,children:"Aprobar"}),c.jsx("button",{className:"reject-btn",onClick:F=>{F.stopPropagation(),V(k.id)},disabled:x,children:"Rechazar"})]}),c.jsx("button",{className:"view-btn",onClick:()=>$(k),children:"Ver detalles"})]})]},k.id))})})]}),c.jsx(ke,{})]})}function Kj(){const{user:s}=Ot(),e=ts(),n=Et(),{requestId:i}=pp(),o=e.state?.adoption,[u,d]=I.useState(o),[y,g]=I.useState(!o),[p,_]=I.useState([]),[b,x]=I.useState(""),[C,U]=I.useState(null);I.useEffect(()=>{if(o)d(o),g(!1),V(o.id);else if(i)B(i);else{n("/tracking");return}},[o,i,n,s]);const B=async F=>{try{console.log("Loading adoption request from Firebase with ID:",F),g(!0);const R=await nn.getAdoptionRequestById(F);R?(console.log("Adoption request loaded from Firebase:",R),d(R),V(R.id)):(console.log("Adoption request not found in Firebase"),n("/tracking"))}catch(R){console.error("Error loading adoption request from Firebase:",R),n("/tracking")}finally{g(!1)}},V=async F=>{try{const w=(await _n.getConversations(s?.uid)).find(N=>N.petId===u.petId||N.adoptionRequestId===F);if(w){U(w.id);const N=await _n.getMessages(w.id);_(N)}else{const N=await _n.createConversation([s.uid,u.pet.ownerId||"admin"],u.petId,F);U(N),_([])}}catch(R){console.error("Error loading messages:",R);try{const w=JSON.parse(localStorage.getItem(`messages_${F}`)||"[]");_(w)}catch(w){console.error("Error loading messages from localStorage:",w)}}},Y=F=>{switch(F){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},oe=F=>{switch(F){case"pending":return"Pendiente de revisión";case"approved":return"Aprobada - Contacta al dueño";case"rejected":return"Rechazada";case"completed":return"Adopción completada";default:return"Desconocido"}},$=async()=>{try{if(!u||!s?.uid)return;const F=u.userId===s.uid?u.pet.ownerId:u.userId;if(!F){alert("No se pudo identificar al otro usuario");return}const R=await _n.getOrCreateConversation(s.uid,F,u.pet.id);n(`/chat/${R}`)}catch(F){console.error("Error starting chat:",F),alert("Error al iniciar el chat")}},H=async F=>{if(F.preventDefault(),!(!b.trim()||!C))try{const R={content:b,senderId:s.uid,senderName:s.displayName||"Usuario",type:"text"};await _n.sendMessage(C,R),x("");const w=await _n.getMessages(C);_(w)}catch(R){console.error("Error sending message:",R);const w={id:Date.now(),content:b,sender:"user",timestamp:new Date().toISOString()},N=[...p,w];_(N),x("");try{localStorage.setItem(`messages_${u.id}`,JSON.stringify(N))}catch(j){console.error("Error saving message to localStorage",j)}}},k=async F=>{if(u.pet.ownerId!==s?.uid){alert("Solo el dueño de la mascota puede aprobar o rechazar solicitudes de adopción");return}if(window.confirm(`¿Cambiar estado a ${F}?`))try{await nn.updateAdoptionRequestStatus(u.id,F),d(R=>({...R,status:F})),alert("Estado actualizado correctamente")}catch(R){console.error("Error updating status:",R),alert("Error al actualizar el estado")}};return y?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando detalles de adopción..."})]})}),c.jsx(ke,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsxs("main",{className:"adoption-details-main",children:[c.jsxs("div",{className:"pet-section",children:[c.jsx("div",{className:"pet-image-container",children:c.jsx("img",{src:u.pet.img,alt:u.pet.name,className:"pet-detail-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.pet.name}),c.jsx("p",{className:"pet-breed",children:u.pet.breed}),c.jsxs("div",{className:"pet-details",children:[c.jsxs("span",{children:["🐾 ",u.pet.age]}),c.jsxs("span",{children:["⚥ ",u.pet.gender]}),c.jsxs("span",{children:["📍 ",u.pet.location]})]})]})]}),c.jsxs("div",{className:"status-section",children:[c.jsxs("div",{className:"status-header",children:[c.jsx("h3",{children:"Estado de la Adopción"}),c.jsx("span",{className:"status-badge",style:{backgroundColor:Y(u.status)},children:oe(u.status)})]}),u.status==="pending"&&u.pet.ownerId===s?.uid&&c.jsxs("div",{className:"status-actions",children:[c.jsx("button",{className:"action-button approve",onClick:()=>k("approved"),children:"Aprobar Adopción"}),c.jsx("button",{className:"action-button reject",onClick:()=>k("rejected"),children:"Rechazar"})]}),u&&s?.uid&&c.jsx("div",{className:"chat-actions",children:c.jsx("button",{className:"action-button chat",onClick:$,children:"💬 Iniciar Chat"})}),u.status==="approved"&&u.pet.ownerId===s?.uid&&c.jsx("div",{className:"status-actions",children:c.jsx("button",{className:"action-button complete",onClick:()=>k("completed"),children:"Marcar como Completada"})}),u.pet.ownerId!==s?.uid&&c.jsx("div",{className:"status-info",children:c.jsx("p",{children:"Esta solicitud está siendo revisada por el dueño de la mascota."})})]}),c.jsxs("div",{className:"adopter-section",children:[c.jsx("h3",{children:"Información del Adoptante"}),c.jsxs("div",{className:"adopter-info",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Nombre:"}),c.jsx("span",{children:u.adopterName})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Email:"}),c.jsx("span",{children:u.adopterEmail})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Teléfono:"}),c.jsx("span",{children:u.adopterPhone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Fecha de solicitud:"}),c.jsx("span",{children:new Date(u.createdAt).toLocaleDateString()})]})]})]}),c.jsxs("div",{className:"messages-section",children:[c.jsx("h3",{children:"Conversación"}),c.jsx("div",{className:"messages-container",children:p.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):p.map(F=>c.jsxs("div",{className:`message ${F.sender==="user"?"user-message":"other-message"}`,children:[c.jsx("div",{className:"message-content",children:F.content}),c.jsx("div",{className:"message-time",children:new Date(F.timestamp).toLocaleTimeString()})]},F.id))}),c.jsxs("form",{onSubmit:H,className:"message-form",children:[c.jsx("input",{type:"text",value:b,onChange:F=>x(F.target.value),placeholder:"Escribe un mensaje...",className:"message-input"}),c.jsx("button",{type:"submit",className:"send-button",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la solicitud de adopción."}),c.jsx("button",{onClick:()=>n("/tracking"),children:"Volver al seguimiento"})]})}),c.jsx(ke,{})]})}function Yj(){const{user:s}=Ot(),{conversationId:e}=pp(),n=Et(),[i,o]=I.useState([]),[u,d]=I.useState(""),[y,g]=I.useState(!0),[p,_]=I.useState(!1),[b,x]=I.useState(null),C=I.useRef(null),U=I.useRef(null);I.useEffect(()=>{if(!s?.uid){n("/login");return}return e&&(B(),V()),()=>{U.current&&U.current()}},[e,s]);const B=async()=>{try{g(!0),console.log("Chat: Loading messages for conversation:",e),U.current=_n.subscribeToMessages(e,k=>{console.log("Chat: Received messages:",k),o(k),oe(),_n.markMessagesAsRead(e,s.uid)})}catch(k){console.error("Error loading messages:",k)}finally{g(!1)}},V=async()=>{try{const F=(await _n.getConversations(s.uid)).find(R=>R.id===e);if(F){const R=F.participants.find(w=>w!==s.uid);if(R){const w=await Nn.getUserProfile(R);x(w||{uid:R,name:"Usuario"})}}}catch(k){console.error("Error loading other user:",k)}},Y=async k=>{if(k.preventDefault(),!(!u.trim()||p))try{_(!0),console.log("Chat: Sending message:",{conversationId:e,message:u.trim()}),await _n.sendMessage(e,s.uid,u.trim()),console.log("Chat: Message sent successfully"),d("")}catch(F){console.error("Error sending message:",F),alert("Error al enviar el mensaje")}finally{_(!1)}},oe=()=>{C.current?.scrollIntoView({behavior:"smooth"})},$=k=>new Date(k).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),H=k=>{const F=new Date(k),R=new Date,w=new Date(R);return w.setDate(w.getDate()-1),F.toDateString()===R.toDateString()?"Hoy":F.toDateString()===w.toDateString()?"Ayer":F.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})};return y?c.jsxs("div",{className:"chat-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"chat-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversación..."})]})]}):c.jsxs("div",{className:"chat-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"chat-header",children:[c.jsx("button",{className:"back-button",onClick:()=>n("/conversations"),children:"← Volver"}),c.jsxs("div",{className:"chat-user-info",children:[c.jsx("div",{className:"user-avatar",children:b?.name?b.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:b?.name||"Usuario"}),c.jsx("p",{children:"En línea"})]})]})]}),c.jsxs("div",{className:"chat-messages",children:[i.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Envía el primero!"})}):i.map((k,F)=>{const R=k.senderId===s.uid,w=k.senderId==="system"||k.isSystemMessage,N=F===0||H(k.timestamp)!==H(i[F-1].timestamp);return w?c.jsxs("div",{children:[N&&c.jsx("div",{className:"message-date",children:H(k.timestamp)}),c.jsx("div",{className:"message system",children:c.jsxs("div",{className:"message-content",children:[c.jsx("p",{children:k.message}),c.jsx("span",{className:"message-time",children:$(k.timestamp)})]})})]},k.id):c.jsxs("div",{children:[N&&c.jsx("div",{className:"message-date",children:H(k.timestamp)}),c.jsxs("div",{className:`message-bubble ${R?"own":"other"}`,children:[!R&&c.jsx("div",{className:"message-sender",children:k.senderName||"Usuario"}),c.jsxs("div",{className:"bubble-content",children:[c.jsx("p",{children:k.message}),c.jsx("span",{className:"bubble-time",children:$(k.timestamp)})]})]})]},k.id)}),c.jsx("div",{ref:C})]}),c.jsxs("form",{className:"chat-input",onSubmit:Y,children:[c.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),placeholder:"Escribe un mensaje...",disabled:p,maxLength:500}),c.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"send-button",children:p?"⏳":"📤"})]})]})}function Xj(){const{user:s}=Ot(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState(!0),[d,y]=I.useState(null),[g,p]=I.useState(!1),[_,b]=I.useState(null),x=I.useRef(0),C=I.useRef(0),U=I.useRef(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}B()},[s]);const B=async()=>{try{u(!0);const w=await _n.getConversations(s.uid),N=await Promise.all(w.map(async j=>{const M=j.participants.find(he=>he!==s.uid),q=M?await Nn.getUserProfile(M):null,D=j.petId?await qt.getPetById(j.petId):null;return{...j,otherUser:q||{uid:M,name:"Usuario"},pet:D}}));i(N)}catch(w){console.error("Error loading conversations:",w)}finally{u(!1)}},V=w=>{const N=new Date(w),M=(new Date-N)/(1e3*60*60);return M<24?N.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):M<168?N.toLocaleDateString("es-ES",{weekday:"short"}):N.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})},Y=w=>{e(`/chat/${w}`)},oe=(w,N)=>{d&&d!==N&&y(null),x.current=w.touches[0].clientX,C.current=w.touches[0].clientX,U.current=!1},$=(w,N)=>{if(!x.current)return;C.current=w.touches[0].clientX;const j=x.current-C.current;Math.abs(j)>10&&(U.current=!0,w.preventDefault())},H=(w,N)=>{if(!U.current)return;x.current-C.current>80?y(N):y(null),x.current=0,C.current=0,U.current=!1},k=(w,N)=>{w.stopPropagation(),b(N),p(!0)},F=async()=>{if(_)try{const w=await _n.deleteConversation(_);i(N=>N.filter(j=>j.id!==_)),p(!1),b(null),y(null),console.log("Conversación eliminada:",_,"Mensajes eliminados:",w.deletedMessages)}catch(w){console.error("Error al eliminar conversación:",w),i(N=>N.filter(j=>j.id!==_)),p(!1),b(null),y(null)}},R=()=>{p(!1),b(null),y(null)};return o?c.jsxs("div",{className:"conversations-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"conversations-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversaciones..."})]})]}):c.jsxs("div",{className:"conversations-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"conversations-header",children:[c.jsx("h1",{children:"Conversaciones"}),c.jsx("p",{children:"Gestiona tus mensajes con otros usuarios"})]}),c.jsx("div",{className:"conversations-list",children:n.length===0?c.jsxs("div",{className:"no-conversations",children:[c.jsx("div",{className:"no-conversations-icon",children:"💬"}),c.jsx("h3",{children:"No tienes conversaciones"}),c.jsx("p",{children:"Las conversaciones aparecerán aquí cuando alguien te envíe un mensaje"})]}):n.map(w=>c.jsxs("div",{className:`conversation-item ${d===w.id?"swiped":""}`,onClick:()=>!U.current&&Y(w.id),onTouchStart:N=>oe(N,w.id),onTouchMove:N=>$(N,w.id),onTouchEnd:N=>H(N,w.id),children:[c.jsx("div",{className:"conversation-avatar",children:w.otherUser.name.charAt(0).toUpperCase()}),c.jsxs("div",{className:"conversation-content",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsx("h3",{children:w.otherUser.name}),c.jsx("span",{className:"conversation-time",children:V(w.lastMessageTime)})]}),w.pet&&c.jsxs("div",{className:"conversation-pet",children:[c.jsx("span",{className:"pet-label",children:"Sobre:"}),c.jsx("span",{className:"pet-name",children:w.pet.name})]}),c.jsx("p",{className:"conversation-preview",children:w.lastMessage||"Sin mensajes"})]}),d===w.id&&c.jsx("div",{className:"conversation-actions",children:c.jsx("button",{className:"delete-button",onClick:N=>k(N,w.id),children:"🗑️"})})]},w.id))}),g&&c.jsx("div",{className:"delete-modal-overlay",children:c.jsxs("div",{className:"delete-modal",children:[c.jsx("div",{className:"delete-modal-header",children:c.jsx("h3",{children:"¿Eliminar conversación?"})}),c.jsx("div",{className:"delete-modal-content",children:c.jsx("p",{children:"Esta acción no se puede deshacer. Se eliminarán todos los mensajes de esta conversación."})}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"cancel-button",onClick:R,children:"Cancelar"}),c.jsx("button",{className:"confirm-delete-button",onClick:F,children:"Eliminar"})]})]})})]})}function Wj(){const{user:s}=Ot(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,y]=I.useState(""),[g,p]=I.useState(!0),[_,b]=I.useState(null),[x,C]=I.useState([]),[U,B]=I.useState(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}V()},[s]),I.useEffect(()=>{if(d.trim()==="")u(n);else{const H=n.filter(k=>k.name?.toLowerCase().includes(d.toLowerCase())||k.email?.toLowerCase().includes(d.toLowerCase()));u(H)}},[d,n]);const V=async()=>{try{p(!0);const k=(await Nn.getAllUsers()).filter(F=>F.uid!==s.uid);i(k),u(k)}catch(H){console.error("Error loading users:",H)}finally{p(!1)}},Y=async H=>{try{b(H),B(!0);const k=await qt.getPetsByOwner(H.uid);C(k)}catch(k){console.error("Error loading user pets:",k)}finally{B(!1)}},oe=async H=>{try{const k=await _n.getOrCreateConversation(s.uid,H.uid);e(`/chat/${k}`)}catch(k){console.error("Error creating conversation:",k),alert("Error al iniciar conversación")}},$=()=>{b(null),C([])};return g?c.jsxs("div",{className:"users-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"users-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando usuarios..."})]})]}):c.jsxs("div",{className:"users-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"users-header",children:[c.jsx("h1",{children:"Usuarios"}),c.jsx("p",{children:"Conecta con otros amantes de las mascotas"})]}),c.jsx("div",{className:"search-container",children:c.jsxs("div",{className:"search-input-wrapper",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:d,onChange:H=>y(H.target.value),className:"search-input"})]})}),c.jsx("div",{className:"users-list",children:o.length===0?c.jsxs("div",{className:"no-users",children:[c.jsx("div",{className:"no-users-icon",children:"👥"}),c.jsx("h3",{children:"No se encontraron usuarios"}),c.jsx("p",{children:"Intenta con un término de búsqueda diferente"})]}):o.map(H=>c.jsxs("div",{className:"user-item",onClick:()=>Y(H),children:[c.jsx("div",{className:"user-avatar",children:H.name?H.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-content",children:[c.jsx("h3",{children:H.name||"Usuario"}),c.jsx("p",{children:H.email})]}),c.jsx("div",{className:"user-actions",children:c.jsx("button",{className:"message-button",onClick:k=>{k.stopPropagation(),oe(H)},children:"💬"})})]},H.uid))}),_&&c.jsx("div",{className:"user-profile-modal-overlay",children:c.jsxs("div",{className:"user-profile-modal",children:[c.jsxs("div",{className:"user-profile-header",children:[c.jsx("button",{className:"close-button",onClick:$,children:"✕"}),c.jsxs("div",{className:"user-profile-info",children:[c.jsx("div",{className:"user-profile-avatar",children:_.name?_.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-profile-details",children:[c.jsx("h2",{children:_.name||"Usuario"}),c.jsx("p",{children:_.email})]})]}),c.jsx("button",{className:"send-message-button",onClick:()=>oe(_),children:"💬 Enviar Mensaje"})]}),c.jsxs("div",{className:"user-profile-content",children:[c.jsxs("h3",{children:["Mascotas de ",_.name]}),U?c.jsxs("div",{className:"pets-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascotas..."})]}):x.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("div",{className:"no-pets-icon",children:"🐾"}),c.jsx("p",{children:"Este usuario no tiene mascotas publicadas"})]}):c.jsx("div",{className:"user-pets-grid",children:x.map(H=>c.jsxs("div",{className:"user-pet-card",children:[c.jsx("div",{className:"pet-image-wrapper",children:c.jsx("img",{src:H.img||"/placeholder-pet.jpg",alt:H.name,className:"pet-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h4",{children:H.name}),c.jsxs("p",{children:[H.breed," • ",H.age," años"]}),c.jsxs("p",{className:"pet-location",children:["📍 ",H.location]})]})]},H.id))})]})]})})]})}function Zj(){const{user:s}=Ot(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState(!0);I.useEffect(()=>{s?d():e("/login")},[s,e]);const d=async()=>{try{u(!0);const p=await Jn.getFavorites(s.uid),_=await Promise.all(p.map(async b=>{const x=await qt.getPetById(b.petId);return{...b,pet:x}}));i(_.filter(b=>b.pet)),console.log("Favorites loaded:",_)}catch(p){console.error("Error loading favorites:",p)}finally{u(!1)}},y=async p=>{try{await Jn.removeFavorite(s.uid,p),i(_=>_.filter(b=>b.petId!==p)),console.log("Favorite removed")}catch(_){console.error("Error removing favorite:",_),alert("Error al quitar de favoritos")}},g=p=>{e("/adopt",{state:{pet:p}})};return o?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Mis Favoritos"})}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando favoritos..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Favoritos"}),c.jsx("p",{className:"page-subtitle",children:"Mascotas que te han gustado"})]}),c.jsx("main",{className:"main-content",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"💔"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Explora las mascotas disponibles y agrega las que te gusten a tus favoritos"}),c.jsx("button",{className:"primary-button",onClick:()=>e("/"),children:"Explorar Mascotas"})]}):c.jsx("div",{className:"favorites-grid",children:n.map(p=>c.jsxs("div",{className:"favorite-card",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:p.pet.img,alt:p.pet.name,onClick:()=>g(p.pet)}),c.jsx("button",{className:"remove-favorite-btn",onClick:()=>y(p.petId),title:"Quitar de favoritos",children:"❌"})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>g(p.pet),children:p.pet.name}),c.jsxs("p",{className:"pet-details",children:[p.pet.breed," • ",p.pet.gender," • ",p.pet.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",p.pet.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-details-btn",onClick:()=>g(p.pet),children:"Ver Detalles"})})]})]},p.id))})}),c.jsx(ke,{})]})}function Jj(){const{user:s}=Ot(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,y]=I.useState(!0),[g,p]=I.useState(null);I.useEffect(()=>{s?.uid?(_(),b()):y(!1)},[s]);const _=async()=>{try{console.log("Loading pets for owner:",s.uid),y(!0),p(null);const Y=(await qt.getPets()).filter(oe=>oe.ownerId===s.uid);console.log("My pets loaded:",Y),i(Y)}catch(V){console.error("Error loading my pets:",V),p("Error al cargar tus mascotas")}finally{y(!1)}},b=async()=>{try{const V=await nn.getAdoptionRequests(s.uid),Y=n.map($=>$.id),oe=V.filter($=>Y.includes($.petId));console.log("Adoption requests for my pets:",oe),u(oe)}catch(V){console.error("Error loading adoption requests:",V)}},x=V=>{e("/adopt",{state:{pet:V}})},C=V=>{e("/adoption-details",{state:{adoption:V}})},U=V=>{switch(V){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},B=V=>{switch(V){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}};return d?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando tus mascotas..."})]})}),c.jsx(ke,{})]}):s?.uid?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsxs("main",{className:"main-content",children:[g&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:g}),c.jsx("button",{onClick:_,children:"Reintentar"})]}),c.jsxs("div",{className:"action-buttons-section",children:[c.jsxs("button",{className:"add-pet-button",onClick:()=>e("/upload"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 5v14m-7-7h14"})}),"Agregar Nueva Mascota"]}),c.jsxs("button",{className:"requests-button",onClick:()=>e("/adoption-requests"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Gestionar Solicitudes"]})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h3",{children:["Mis Mascotas (",n.length,")"]}),n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar a recibir solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:n.map(V=>c.jsxs("div",{className:"pet-card",children:[c.jsxs("div",{className:"pet-image",onClick:()=>x(V),children:[c.jsx("img",{src:V.img,alt:V.name}),c.jsx("div",{className:"pet-status",children:c.jsx("span",{className:`status-badge ${V.status}`,children:V.status==="available"?"Disponible":"Adoptado"})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>x(V),children:V.name}),c.jsxs("p",{className:"pet-details",children:[V.breed," • ",V.gender," • ",V.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",V.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-button",onClick:()=>x(V),children:"Ver Detalles"})})]})]},V.id))})]}),c.jsxs("div",{className:"requests-section",children:[c.jsxs("h3",{children:["Solicitudes de Adopción (",o.length,")"]}),o.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes de adopción"}),c.jsx("p",{children:"Las solicitudes de adopción para tus mascotas aparecerán aquí"})]}):c.jsx("div",{className:"requests-list",children:o.map(V=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsx("h4",{children:V.pet.name}),c.jsx("span",{className:"status-badge",style:{backgroundColor:U(V.status)},children:B(V.status)})]}),c.jsxs("div",{className:"request-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",V.adopterName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",V.adopterEmail]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",V.adopterPhone]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(V.createdAt).toLocaleDateString()]})]}),c.jsx("div",{className:"request-actions",children:c.jsx("button",{className:"view-button",onClick:()=>C(V),children:"Ver Detalles"})})]},V.id))})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para gestionar tus mascotas"}),c.jsx("p",{children:"Necesitas iniciar sesión para ver y gestionar tus mascotas"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(ke,{})]})}function pg({isOpen:s,onClose:e,shelterId:n,shelterName:i,onSuccess:o}){const[u,d]=I.useState(!1),y={name:"Premium",price:"$9.99",duration:"mensual",features:["Mascotas en dos columnas","Mascotas destacadas al inicio","Badge premium visible","Mayor visibilidad en búsquedas"]},g=async()=>{d(!0);try{await new Promise(p=>setTimeout(p,2e3)),await sn.activatePremium(n,1),alert(`¡Felicidades! ${i} ahora tiene suscripción premium.`),o(),e()}catch(p){console.error("Error activating premium:",p),alert("Error al procesar el pago. Inténtalo de nuevo.")}finally{d(!1)}};return s?c.jsx("div",{className:"premium-modal-overlay",children:c.jsxs("div",{className:"premium-modal",children:[c.jsxs("div",{className:"premium-modal-header",children:[c.jsx("h2",{children:"⭐ Actualizar a Premium"}),c.jsx("button",{className:"close-button",onClick:e,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"premium-modal-content",children:[c.jsxs("div",{className:"shelter-info",children:[c.jsx("h3",{children:i}),c.jsx("p",{children:"Mejora la visibilidad de tus mascotas"})]}),c.jsxs("div",{className:"plan-card selected",children:[c.jsx("div",{className:"plan-header",children:c.jsx("h4",{children:y.name})}),c.jsxs("div",{className:"plan-price",children:[c.jsx("span",{className:"price",children:y.price}),c.jsxs("span",{className:"duration",children:["/",y.duration]})]}),c.jsx("ul",{className:"plan-features",children:y.features.map((p,_)=>c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:"✓"}),p]},_))})]}),c.jsx("div",{className:"payment-info",children:c.jsx("p",{className:"payment-note",children:"💳 Simulación de pago - Sin cargo real"})})]}),c.jsxs("div",{className:"premium-modal-footer",children:[c.jsx("button",{className:"cancel-button",onClick:e,disabled:u,children:"Cancelar"}),c.jsx("button",{className:"purchase-button",onClick:g,disabled:u,children:u?"Procesando...":"Activar Premium"})]})]})}):null}function e4(){const s=Et(),{user:e}=Ot(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,y]=I.useState([]),[g,p]=I.useState(""),[_,b]=I.useState(null),[x,C]=I.useState(!1),[U,B]=I.useState(null),[V,Y]=I.useState(!0);I.useEffect(()=>{oe()},[]);const oe=async()=>{try{Y(!0),console.log("Loading shelters from Firebase...");const he=new Promise((X,Ee)=>setTimeout(()=>Ee(new Error("Timeout loading shelters")),1e4)),De=Promise.all([sn.getPremiumShelters(),sn.getRegularShelters()]),[te,ue]=await Promise.race([De,he]);console.log("Premium shelters:",te),console.log("Regular shelters:",ue),u(te),y(ue),i([...te,...ue]),console.log("No se crean refugios de ejemplo automáticamente")}catch(he){console.error("Error loading shelters:",he),$()}finally{Y(!1)}},$=()=>{try{const he=JSON.parse(localStorage.getItem("shelters")||"[]");i(he),u(he.filter(De=>De.isPremium)),y(he.filter(De=>!De.isPremium))}catch(he){console.error("Error loading from localStorage",he)}},H=n.filter(he=>he.name.toLowerCase().includes(g.toLowerCase())||he.location.toLowerCase().includes(g.toLowerCase())||he.description.toLowerCase().includes(g.toLowerCase())),k=o.filter(he=>he.name.toLowerCase().includes(g.toLowerCase())||he.location.toLowerCase().includes(g.toLowerCase())||he.description.toLowerCase().includes(g.toLowerCase())),F=d.filter(he=>he.name.toLowerCase().includes(g.toLowerCase())||he.location.toLowerCase().includes(g.toLowerCase())||he.description.toLowerCase().includes(g.toLowerCase())),R=he=>{b(he)},w=he=>{alert(`Contactando con ${he.name}...
Teléfono: ${he.phone}
Email: ${he.email}`)},N=()=>{b(null)},j=()=>{s("/shelter-register")},M=he=>{B(he),C(!0)},q=()=>{oe()},D=(he,De=!1)=>c.jsxs("div",{className:`shelter-card ${De?"premium":""}`,onClick:()=>R(he),children:[De&&c.jsx("div",{className:"premium-badge",children:c.jsx("span",{children:"⭐ Premium"})}),c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:he.image,alt:he.name})}),c.jsxs("div",{className:"shelter-content",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h3",{children:he.name}),he.verified&&c.jsx("div",{className:"verified-badge",children:c.jsx("span",{children:"✓"})})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",he.location]}),c.jsx("p",{className:"shelter-description",children:he.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsx("div",{className:"rating",children:c.jsxs("span",{children:["⭐ ",he.rating]})}),c.jsx("div",{className:"pets-count",children:c.jsxs("span",{children:["🐾 ",he.petsCount," mascotas"]})})]}),!De&&e&&he.ownerId===e.uid&&c.jsx("button",{className:"upgrade-button",onClick:te=>{te.stopPropagation(),M(he)},children:"🚀 Actualizar a Premium"})]}),c.jsx("div",{className:"shelter-arrow",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})})]},he.id);return _?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("button",{className:"back-button",onClick:N,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"section-title",children:"Detalles del Refugio"})]}),c.jsxs("main",{className:"shelter-details-main",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:_.image,alt:_.name})}),c.jsxs("div",{className:"shelter-info",children:[c.jsx("h1",{children:_.name}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("div",{className:"rating",children:[c.jsx("span",{className:"stars",children:"⭐"}),c.jsx("span",{children:_.rating})]}),c.jsxs("div",{className:"pets-count",children:[c.jsx("span",{children:"🐾"}),c.jsxs("span",{children:[_.petsCount," mascotas"]})]}),_.verified&&c.jsxs("div",{className:"verified-badge",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:"Verificado"})]})]}),c.jsx("p",{className:"shelter-description",children:_.description})]})]}),c.jsxs("div",{className:"shelter-sections",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"contact-info",children:[c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📍"}),c.jsx("span",{children:_.address})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📞"}),c.jsx("span",{children:_.phone})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"✉️"}),c.jsx("span",{children:_.email})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🌐"}),c.jsx("span",{children:_.website})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🕒"}),c.jsx("span",{children:_.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:_.services.map((he,De)=>c.jsxs("div",{className:"service-item",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:he})]},De))})]}),c.jsxs("div",{className:"actions-section",children:[c.jsx("button",{className:"contact-button",onClick:()=>w(_),children:"Contactar Refugio"}),c.jsx("button",{className:"visit-button",onClick:()=>s("/",{state:{shelter:_}}),children:"Ver Mascotas Disponibles"})]})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"section-title",children:"Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"header-actions"})]})}),c.jsxs("main",{className:"main-content",children:[c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box",children:[c.jsx("span",{className:"search-icon",children:"🔍"}),c.jsx("input",{type:"text",placeholder:"Buscar refugios...",value:g,onChange:he=>p(he.target.value)})]}),c.jsx("button",{className:"register-shelter-button",onClick:j,children:"Registrar Refugio"})]}),V?c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]}):c.jsxs("div",{className:"shelters-container",children:[k.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"⭐ Refugios Premium"}),c.jsx("p",{children:"Refugios destacados con mayor visibilidad"})]}),c.jsx("div",{className:"shelters-list premium-grid",children:k.map(he=>D(he,!0))})]}),F.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"🏠 Refugios"}),c.jsx("p",{children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"shelters-list regular-grid",children:F.map(he=>D(he,!1))})]}),H.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No se encontraron refugios"}),c.jsx("p",{children:"Intenta con otros términos de búsqueda"})]})]})]}),c.jsx(ke,{}),x&&U&&c.jsx(pg,{isOpen:x,onClose:()=>C(!1),shelterId:U.id,shelterName:U.name,onSuccess:q})]})}function t4(){const s=Et(),{user:e}=Ot(),[n,i]=I.useState({name:"",description:"",location:"",address:"",phone:"",email:"",website:"",hours:"",services:[],image:""}),[o,u]=I.useState([]),[d,y]=I.useState(!1),[g,p]=I.useState(""),[_,b]=I.useState(!1),[x,C]=I.useState(null);I.useEffect(()=>{e?U():s("/login")},[e,s]);const U=async()=>{try{const k=await Nn.getUserProfile(e.uid);i(k?F=>({...F,name:k.name?`${k.name} - Refugio`:"Mi Refugio",email:k.email||e.email||"",phone:k.phone||"",address:k.address||"",location:k.address||"Costa Rica"}):F=>({...F,name:e.displayName?`${e.displayName} - Refugio`:"Mi Refugio",email:e.email||"",location:"Costa Rica"}))}catch(k){console.error("Error loading user data:",k)}},B=["Adopción","Esterilización","Vacunación","Atención médica","Rescate","Rehabilitación","Entrenamiento","Hospedaje temporal","Donaciones","Voluntariado"],V=(k,F)=>{i(R=>({...R,[k]:F}))},Y=k=>{u(F=>F.includes(k)?F.filter(R=>R!==k):[...F,k])},oe=async k=>{k.preventDefault(),y(!0),p("");try{const F={...n,services:o,ownerId:e?.uid||"anonymous",ownerName:e?.displayName||e?.email||"Usuario Anónimo",rating:0,petsCount:0,verified:!0,isPremium:!1,status:"active"};console.log("Creating shelter with data:",F);const R=await sn.createShelter(F);console.log("Shelter created with ID:",R),b(!0),C(R)}catch(F){console.error("Error creating shelter",F),p("Error al registrar el refugio. Inténtalo de nuevo.")}finally{y(!1)}},$=()=>{b(!1),C(null),alert(`¡Refugio registrado exitosamente! Ahora tienes acceso premium.

¿Te gustaría subir tu primera mascota?`),s("/upload")},H=()=>{b(!1),C(null),alert(`Refugio registrado exitosamente. Puedes actualizar a premium más tarde desde la página de refugios.

¿Te gustaría subir tu primera mascota?`),s("/upload")};return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>s("/shelters"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Registrar Refugio"}),c.jsx("p",{className:"page-subtitle",children:"Únete a nuestra red de organizaciones de rescate"})]}),c.jsxs("main",{className:"shelter-register-main",children:[!e&&c.jsxs("div",{className:"info-message",children:[c.jsx("span",{children:"ℹ️"}),c.jsx("span",{children:"Puedes registrar un refugio sin iniciar sesión. Si tienes cuenta, inicia sesión para gestionar mejor tu refugio."})]}),g&&c.jsxs("div",{className:"error-message",children:[c.jsx("span",{children:"⚠️"}),c.jsx("span",{children:g})]}),c.jsxs("form",{onSubmit:oe,className:"shelter-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información Básica"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre del Refugio *"}),c.jsx("input",{type:"text",value:n.name,onChange:k=>V("name",k.target.value),placeholder:"Ej: Refugio Animal San José",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción *"}),c.jsx("textarea",{value:n.description,onChange:k=>V("description",k.target.value),placeholder:"Describe tu organización, misión y objetivos...",rows:"4",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Imagen del Refugio"}),c.jsx("input",{type:"url",value:n.image,onChange:k=>V("image",k.target.value),placeholder:"https://ejemplo.com/imagen.jpg"}),n.image&&c.jsx("div",{className:"image-preview",children:c.jsx("img",{src:n.image,alt:"Preview"})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación *"}),c.jsx("input",{type:"text",value:n.location,onChange:k=>V("location",k.target.value),placeholder:"Ej: San José, Costa Rica",required:!0})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Teléfono"}),c.jsx("input",{type:"tel",value:n.phone,onChange:k=>V("phone",k.target.value),placeholder:"+506 2222-3333"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:n.email,onChange:k=>V("email",k.target.value),placeholder:"contacto@refugio.com"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Sitio Web"}),c.jsx("input",{type:"url",value:n.website,onChange:k=>V("website",k.target.value),placeholder:"www.refugio.com"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Horarios de Atención *"}),c.jsx("input",{type:"text",value:n.hours,onChange:k=>V("hours",k.target.value),placeholder:"Lunes a Viernes: 8:00 AM - 6:00 PM",required:!0})]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("p",{className:"section-description",children:"Selecciona todos los servicios que ofrece tu refugio:"}),c.jsx("div",{className:"services-grid",children:B.map(k=>c.jsxs("label",{className:"service-checkbox",children:[c.jsx("input",{type:"checkbox",checked:o.includes(k),onChange:()=>Y(k)}),c.jsx("span",{className:"checkmark"}),c.jsx("span",{className:"service-label",children:k})]},k))})]}),c.jsx("div",{className:"form-section",children:c.jsx("div",{className:"terms-section",children:c.jsxs("label",{className:"terms-checkbox",children:[c.jsx("input",{type:"checkbox",required:!0}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{children:["Acepto los ",c.jsx("a",{href:"#",className:"terms-link",children:"términos y condiciones"})," y la ",c.jsx("a",{href:"#",className:"terms-link",children:"política de privacidad"})]})]})})}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>s("/shelters"),children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-button",disabled:d,children:d?"Registrando...":"Registrar Refugio"})]})]})]}),c.jsx(ke,{}),c.jsx(pg,{isOpen:_,onClose:H,shelterId:x,shelterName:n.name,onSuccess:$})]})}function n4(){const s=Et(),{user:e}=Ot(),[n,i]=I.useState([]),[o,u]=I.useState(null),[d,y]=I.useState([]),[g,p]=I.useState(!0),[_,b]=I.useState(!1),[x,C]=I.useState(null);I.useEffect(()=>{e?U():s("/login")},[e,s]);const U=async()=>{try{p(!0);const F=await sn.getSheltersByOwner(e.uid);i(F),console.log("User shelters loaded:",F)}catch(F){console.error("Error loading shelters:",F)}finally{p(!1)}},B=async F=>{try{const R=await qt.getPetsByShelter(F);y(R),console.log("Shelter pets loaded:",R)}catch(R){console.error("Error loading shelter pets:",R)}},V=F=>{u(F),B(F.id)},Y=F=>{C(F),b(!0)},oe=()=>{U(),b(!1)},$=async F=>{if(window.confirm("¿Estás seguro de que quieres eliminar este refugio? Esta acción no se puede deshacer."))try{await sn.deleteShelter(F),alert("Refugio eliminado exitosamente"),U(),o&&o.id===F&&(u(null),y([]))}catch(R){console.error("Error deleting shelter:",R),alert("Error al eliminar el refugio")}},H=F=>{const R={pending:{text:"Pendiente",class:"status-pending"},approved:{text:"Aprobado",class:"status-approved"},rejected:{text:"Rechazado",class:"status-rejected"}},w=R[F]||R.pending;return c.jsx("span",{className:`status-badge ${w.class}`,children:w.text})},k=(F,R)=>{if(!F)return null;const w=R&&new Date(R)<new Date;return c.jsx("span",{className:`premium-badge ${w?"expired":"active"}`,children:w?"⚠️ Premium Expirado":"⭐ Premium"})};return g?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Administrar Refugios"})}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Administrar Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus refugios y suscripciones premium"})]}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"admin-layout",children:[c.jsxs("div",{className:"shelters-panel",children:[c.jsxs("div",{className:"panel-header",children:[c.jsxs("h3",{children:["Mis Refugios (",n.length,")"]}),c.jsx("button",{className:"add-shelter-btn",onClick:()=>s("/shelter-register"),children:"+ Nuevo Refugio"})]}),c.jsx("div",{className:"shelters-list",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h4",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu primer refugio para comenzar"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):n.map(F=>c.jsxs("div",{className:`shelter-item ${o?.id===F.id?"selected":""}`,onClick:()=>V(F),children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h4",{children:F.name}),c.jsxs("div",{className:"shelter-badges",children:[H(F.status),k(F.isPremium,F.premiumExpiry)]})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",F.location]}),c.jsx("p",{className:"shelter-description",children:F.description}),c.jsxs("div",{className:"shelter-stats",children:[c.jsxs("span",{children:["🐾 ",F.petsCount||0," mascotas"]}),c.jsxs("span",{children:["⭐ ",F.rating||0," rating"]})]}),c.jsxs("div",{className:"shelter-actions",children:[!F.isPremium&&c.jsx("button",{className:"upgrade-btn",onClick:R=>{R.stopPropagation(),Y(F)},children:"🚀 Premium"}),c.jsx("button",{className:"delete-btn",onClick:R=>{R.stopPropagation(),$(F.id)},children:"🗑️"})]})]},F.id))})]}),c.jsx("div",{className:"details-panel",children:o?c.jsxs("div",{className:"shelter-details",children:[c.jsxs("div",{className:"details-header",children:[c.jsx("h3",{children:o.name}),c.jsxs("div",{className:"details-badges",children:[H(o.status),k(o.isPremium,o.premiumExpiry)]})]}),c.jsxs("div",{className:"details-content",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h4",{children:"Información General"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Ubicación:"}),c.jsx("span",{children:o.location})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Dirección:"}),c.jsx("span",{children:o.address})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Teléfono:"}),c.jsx("span",{children:o.phone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Email:"}),c.jsx("span",{children:o.email})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Sitio Web:"}),c.jsx("span",{children:o.website||"No especificado"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Horarios:"}),c.jsx("span",{children:o.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h4",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:o.services?.map((F,R)=>c.jsx("span",{className:"service-tag",children:F},R))})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h4",{children:["Mascotas del Refugio (",d.length,")"]}),d.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("p",{children:"No hay mascotas registradas en este refugio"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:d.map(F=>c.jsxs("div",{className:"pet-card",children:[c.jsx("img",{src:F.img,alt:F.name}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h5",{children:F.name}),c.jsxs("p",{children:[F.type," • ",F.breed]}),c.jsx("span",{className:`pet-status ${F.status}`,children:F.status==="available"?"Disponible":F.status==="adopted"?"Adoptado":"Reservado"})]})]},F.id))})]})]})]}):c.jsxs("div",{className:"no-selection",children:[c.jsx("div",{className:"no-selection-icon",children:"🏠"}),c.jsx("h3",{children:"Selecciona un refugio"}),c.jsx("p",{children:"Elige un refugio de la lista para ver sus detalles y gestionar sus mascotas"})]})})]})}),c.jsx(ke,{}),_&&x&&c.jsx(pg,{isOpen:_,onClose:()=>b(!1),shelterId:x.id,shelterName:x.name,onSuccess:oe})]})}function s4(){const s=Et(),[e,n]=I.useState([]),[i,o]=I.useState("all");I.useEffect(()=>{try{const C=JSON.parse(localStorage.getItem("notifications")||"[]");n(C)}catch(C){console.error("Error loading notifications",C)}},[]);const u=C=>{switch(C){case"adoption":return"🐾";case"message":return"💬";case"system":return"🔔";case"approval":return"✅";case"rejection":return"❌";default:return"🔔"}},d=C=>{switch(C){case"adoption":return"#3b82f6";case"message":return"#10b981";case"system":return"#f59e0b";case"approval":return"#10b981";case"rejection":return"#ef4444";default:return"#6b7280"}},y=C=>{const U=e.map(B=>B.id===C?{...B,read:!0}:B);n(U);try{localStorage.setItem("notifications",JSON.stringify(U))}catch(B){console.error("Error updating notification",B)}},g=()=>{const C=e.map(U=>({...U,read:!0}));n(C);try{localStorage.setItem("notifications",JSON.stringify(C))}catch(U){console.error("Error updating notifications",U)}},p=C=>{const U=e.filter(B=>B.id!==C);n(U);try{localStorage.setItem("notifications",JSON.stringify(U))}catch(B){console.error("Error deleting notification",B)}},_=C=>{switch(y(C.id),C.type){case"adoption":s("/tracking");break;case"message":s("/chat");break;case"approval":case"rejection":s("/tracking");break}},b=e.filter(C=>i==="all"?!0:i==="unread"?!C.read:C.type===i),x=e.filter(C=>!C.read).length;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsx("h2",{className:"logo-text",children:"Notificaciones"}),c.jsx("div",{className:"header-actions",children:x>0&&c.jsx("button",{className:"mark-all-read",onClick:g,children:"Marcar todas como leídas"})})]}),c.jsxs("main",{className:"notifications-main",children:[c.jsxs("div",{className:"filter-tabs",children:[c.jsxs("button",{className:`filter-tab ${i==="all"?"active":""}`,onClick:()=>o("all"),children:["Todas (",e.length,")"]}),c.jsxs("button",{className:`filter-tab ${i==="unread"?"active":""}`,onClick:()=>o("unread"),children:["No leídas (",x,")"]}),c.jsx("button",{className:`filter-tab ${i==="adoption"?"active":""}`,onClick:()=>o("adoption"),children:"Adopciones"}),c.jsx("button",{className:`filter-tab ${i==="message"?"active":""}`,onClick:()=>o("message"),children:"Mensajes"})]}),c.jsx("div",{className:"notifications-list",children:b.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔔"}),c.jsx("h3",{children:"No hay notificaciones"}),c.jsx("p",{children:"Cuando tengas notificaciones, aparecerán aquí"})]}):b.map(C=>c.jsxs("div",{className:`notification-item ${C.read?"":"unread"}`,onClick:()=>_(C),children:[c.jsx("div",{className:"notification-icon",children:c.jsx("span",{style:{color:d(C.type)},children:u(C.type)})}),c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-title",children:C.title}),c.jsx("div",{className:"notification-message",children:C.message}),c.jsxs("div",{className:"notification-time",children:[new Date(C.timestamp).toLocaleDateString()," a las"," ",new Date(C.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),c.jsxs("div",{className:"notification-actions",children:[!C.read&&c.jsx("div",{className:"unread-dot"}),c.jsx("button",{className:"delete-button",onClick:U=>{U.stopPropagation(),p(C.id)},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]},C.id))})]}),c.jsx(ke,{})]})}function r4(){const{user:s}=Ot();Et();const[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null),[y,g]=I.useState(!1),[p,_]=I.useState(""),[b,x]=I.useState(!1);I.useEffect(()=>{s&&C()},[s]);const C=async()=>{try{o(!0);const H=await nn.getAdoptionRequestsForOwner(s.uid),k=await Promise.all(H.map(async F=>{const R=await qt.getPetById(F.petId),w=await Nn.getUserProfile(F.userId);return{...F,pet:R,requester:w}}));n(k)}catch(H){console.error("Error loading adoption requests:",H)}finally{o(!1)}},U=async H=>{try{x(!0),await nn.approveAdoptionRequest(H,p),g(!1),_(""),await C(),alert("Solicitud aprobada exitosamente")}catch(k){console.error("Error approving request:",k),alert("Error al aprobar la solicitud")}finally{x(!1)}},B=async H=>{try{x(!0),await nn.rejectAdoptionRequest(H,p),g(!1),_(""),await C(),alert("Solicitud rechazada")}catch(k){console.error("Error rejecting request:",k),alert("Error al rechazar la solicitud")}finally{x(!1)}},V=H=>{d(H),g(!0)},Y=()=>{g(!1),d(null),_("")},oe=H=>{switch(H){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}},$=H=>{switch(H){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";default:return"Desconocido"}};return i?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]}),c.jsx("h1",{className:"page-title",children:"Solicitudes de Adopción"}),c.jsx("p",{className:"page-description",children:"Gestiona las solicitudes de adopción para tus mascotas"})]}),c.jsx("main",{className:"adoption-requests-main",children:e.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes"}),c.jsx("p",{children:"No tienes solicitudes de adopción pendientes"})]}):c.jsx("div",{className:"requests-list",children:e.map(H=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsxs("div",{className:"pet-info",children:[c.jsx("img",{src:H.pet?.img||"/placeholder-pet.jpg",alt:H.pet?.name,className:"pet-image"}),c.jsxs("div",{className:"pet-details",children:[c.jsx("h3",{children:H.pet?.name}),c.jsxs("p",{children:[H.pet?.type," • ",H.pet?.breed]})]})]}),c.jsx("div",{className:"status-badge",style:{backgroundColor:oe(H.status)},children:$(H.status)})]}),c.jsxs("div",{className:"requester-info",children:[c.jsx("h4",{children:"Solicitante:"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nombre:"})," ",H.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",H.requester?.email||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",H.requester?.phone||"No disponible"]})]}),H.message&&c.jsxs("div",{className:"request-message",children:[c.jsx("h4",{children:"Mensaje del solicitante:"}),c.jsxs("p",{children:['"',H.message,'"']})]}),c.jsxs("div",{className:"request-actions",children:[c.jsx("span",{className:"request-date",children:new Date(H.createdAt).toLocaleDateString()}),H.status==="pending"&&c.jsx("div",{className:"action-buttons",children:c.jsx("button",{className:"approve-btn",onClick:()=>V(H),children:"Revisar"})})]})]},H.id))})}),y&&u&&c.jsx("div",{className:"modal-overlay",onClick:Y,children:c.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Gestionar Solicitud"}),c.jsx("button",{className:"close-btn",onClick:Y,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"request-details",children:[c.jsxs("h4",{children:["Mascota: ",u.pet?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",u.requester?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",u.requester?.email]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",u.requester?.phone]}),u.message&&c.jsxs("div",{className:"message-section",children:[c.jsx("h5",{children:"Mensaje:"}),c.jsxs("p",{children:['"',u.message,'"']})]})]}),c.jsxs("div",{className:"notes-section",children:[c.jsx("label",{children:"Notas adicionales (opcional):"}),c.jsx("textarea",{value:p,onChange:H=>_(H.target.value),placeholder:"Agrega cualquier comentario adicional...",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"reject-btn",onClick:()=>B(u.id),disabled:b,children:b?"Procesando...":"Rechazar"}),c.jsx("button",{className:"approve-btn",onClick:()=>U(u.id),disabled:b,children:b?"Procesando...":"Aprobar"})]})]})}),c.jsx(ke,{})]})}const Jt=({element:s,user:e,loading:n})=>n?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"Cargando..."}):e?s:c.jsx(C0,{to:"/login",replace:!0});function i4(){const{user:s,loading:e}=Ot(),[n,i]=I.useState(null);I.useEffect(()=>{const u=d=>{i(d.detail)};return window.addEventListener("error-notification",u),()=>window.removeEventListener("error-notification",u)},[]);const o=()=>{i(null)};return e?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"Cargando..."}):(console.log("App render - user:",s),console.log("App render - loading:",e),c.jsxs(c.Fragment,{children:[c.jsxs(Ow,{children:[c.jsx(Nt,{path:"/login",element:c.jsx(Hj,{})}),c.jsx(Nt,{path:"/register",element:c.jsx(Gj,{})}),c.jsx(Nt,{path:"/",element:c.jsx(Jt,{element:c.jsx(qj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/categories",element:c.jsx(Jt,{element:c.jsx(zj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/upload",element:c.jsx(Jt,{element:c.jsx(Bj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/profile",element:c.jsx(Jt,{element:c.jsx(Fj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adopt",element:c.jsx(Jt,{element:c.jsx(Qj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/tracking",element:c.jsx(Jt,{element:c.jsx($j,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adoption-details",element:c.jsx(Jt,{element:c.jsx(Kj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/chat/:conversationId",element:c.jsx(Jt,{element:c.jsx(Yj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/conversations",element:c.jsx(Jt,{element:c.jsx(Xj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/users",element:c.jsx(Jt,{element:c.jsx(Wj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/favorites",element:c.jsx(Jt,{element:c.jsx(Zj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/my-pets",element:c.jsx(Jt,{element:c.jsx(Jj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelters",element:c.jsx(Jt,{element:c.jsx(e4,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelter-register",element:c.jsx(Jt,{element:c.jsx(t4,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelter-admin",element:c.jsx(Jt,{element:c.jsx(n4,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/notifications",element:c.jsx(Jt,{element:c.jsx(s4,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adoption-requests",element:c.jsx(Jt,{element:c.jsx(r4,{}),user:s,loading:e})}),c.jsx(Nt,{path:"*",element:c.jsx(C0,{to:"/",replace:!0})})]}),c.jsx(Ij,{error:n,onClose:o}),c.jsx(Lj,{})]}))}const a4=localStorage.getItem("theme")||"dark";document.body.setAttribute("data-theme",a4);GT.createRoot(document.getElementById("root")).render(c.jsx(I.StrictMode,{children:c.jsx(rx,{children:c.jsx(Cj,{children:c.jsx(i4,{})})})}));
