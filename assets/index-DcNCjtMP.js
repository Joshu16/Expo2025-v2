(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var pm={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function Mb(){if(R_)return Yl;R_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Yl.Fragment=e,Yl.jsx=n,Yl.jsxs=n,Yl}var C_;function Pb(){return C_||(C_=1,pm.exports=Mb()),pm.exports}var c=Pb(),gm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function Ob(){if(I_)return je;I_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function V(O,ie,fe){this.props=O,this.context=ie,this.refs=B,this.updater=fe||C}V.prototype.isReactComponent={},V.prototype.setState=function(O,ie){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ie,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=V.prototype;function oe(O,ie,fe){this.props=O,this.context=ie,this.refs=B,this.updater=fe||C}var K=oe.prototype=new Y;K.constructor=oe,U(K,V.prototype),K.isPureReactComponent=!0;var H=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function R(O,ie,fe,ee,ce,me){return fe=me.ref,{$$typeof:s,type:O,key:ie,ref:fe!==void 0?fe:null,props:me}}function w(O,ie){return R(O.type,ie,void 0,void 0,void 0,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function j(O){var ie={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return ie[fe]})}var P=/\/+/g;function q(O,ie){return typeof O=="object"&&O!==null&&O.key!=null?j(""+O.key):ie.toString(36)}function D(){}function he(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(ie){O.status==="pending"&&(O.status="fulfilled",O.value=ie)},function(ie){O.status==="pending"&&(O.status="rejected",O.reason=ie)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function De(O,ie,fe,ee,ce){var me=typeof O;(me==="undefined"||me==="boolean")&&(O=null);var ye=!1;if(O===null)ye=!0;else switch(me){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(O.$$typeof){case s:case e:ye=!0;break;case _:return ye=O._init,De(ye(O._payload),ie,fe,ee,ce)}}if(ye)return ce=ce(O),ye=ee===""?"."+q(O,0):ee,H(ce)?(fe="",ye!=null&&(fe=ye.replace(P,"$&/")+"/"),De(ce,ie,fe,"",function(es){return es})):ce!=null&&(N(ce)&&(ce=w(ce,fe+(ce.key==null||O&&O.key===ce.key?"":(""+ce.key).replace(P,"$&/")+"/")+ye)),ie.push(ce)),1;ye=0;var ht=ee===""?".":ee+":";if(H(O))for(var Ke=0;Ke<O.length;Ke++)ee=O[Ke],me=ht+q(ee,Ke),ye+=De(ee,ie,fe,me,ce);else if(Ke=x(O),typeof Ke=="function")for(O=Ke.call(O),Ke=0;!(ee=O.next()).done;)ee=ee.value,me=ht+q(ee,Ke++),ye+=De(ee,ie,fe,me,ce);else if(me==="object"){if(typeof O.then=="function")return De(he(O),ie,fe,ee,ce);throw ie=String(O),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ye}function te(O,ie,fe){if(O==null)return O;var ee=[],ce=0;return De(O,ee,"","",function(me){return ie.call(fe,me,ce++)}),ee}function ue(O){if(O._status===-1){var ie=O._result;ie=ie(),ie.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=ie)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ee(){}return je.Children={map:te,forEach:function(O,ie,fe){te(O,function(){ie.apply(this,arguments)},fe)},count:function(O){var ie=0;return te(O,function(){ie++}),ie},toArray:function(O){return te(O,function(ie){return ie})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},je.Component=V,je.Fragment=n,je.Profiler=o,je.PureComponent=oe,je.StrictMode=i,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,je.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},je.cache=function(O){return function(){return O.apply(null,arguments)}},je.cloneElement=function(O,ie,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=U({},O.props),ce=O.key,me=void 0;if(ie!=null)for(ye in ie.ref!==void 0&&(me=void 0),ie.key!==void 0&&(ce=""+ie.key),ie)!F.call(ie,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ie.ref===void 0||(ee[ye]=ie[ye]);var ye=arguments.length-2;if(ye===1)ee.children=fe;else if(1<ye){for(var ht=Array(ye),Ke=0;Ke<ye;Ke++)ht[Ke]=arguments[Ke+2];ee.children=ht}return R(O.type,ce,void 0,void 0,me,ee)},je.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},je.createElement=function(O,ie,fe){var ee,ce={},me=null;if(ie!=null)for(ee in ie.key!==void 0&&(me=""+ie.key),ie)F.call(ie,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ce[ee]=ie[ee]);var ye=arguments.length-2;if(ye===1)ce.children=fe;else if(1<ye){for(var ht=Array(ye),Ke=0;Ke<ye;Ke++)ht[Ke]=arguments[Ke+2];ce.children=ht}if(O&&O.defaultProps)for(ee in ye=O.defaultProps,ye)ce[ee]===void 0&&(ce[ee]=ye[ee]);return R(O,me,void 0,void 0,null,ce)},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:y,render:O}},je.isValidElement=N,je.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:ue}},je.memo=function(O,ie){return{$$typeof:p,type:O,compare:ie===void 0?null:ie}},je.startTransition=function(O){var ie=k.T,fe={};k.T=fe;try{var ee=O(),ce=k.S;ce!==null&&ce(fe,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Ee,X)}catch(me){X(me)}finally{k.T=ie}},je.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},je.use=function(O){return k.H.use(O)},je.useActionState=function(O,ie,fe){return k.H.useActionState(O,ie,fe)},je.useCallback=function(O,ie){return k.H.useCallback(O,ie)},je.useContext=function(O){return k.H.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O,ie){return k.H.useDeferredValue(O,ie)},je.useEffect=function(O,ie,fe){var ee=k.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(O,ie)},je.useId=function(){return k.H.useId()},je.useImperativeHandle=function(O,ie,fe){return k.H.useImperativeHandle(O,ie,fe)},je.useInsertionEffect=function(O,ie){return k.H.useInsertionEffect(O,ie)},je.useLayoutEffect=function(O,ie){return k.H.useLayoutEffect(O,ie)},je.useMemo=function(O,ie){return k.H.useMemo(O,ie)},je.useOptimistic=function(O,ie){return k.H.useOptimistic(O,ie)},je.useReducer=function(O,ie,fe){return k.H.useReducer(O,ie,fe)},je.useRef=function(O){return k.H.useRef(O)},je.useState=function(O){return k.H.useState(O)},je.useSyncExternalStore=function(O,ie,fe){return k.H.useSyncExternalStore(O,ie,fe)},je.useTransition=function(){return k.H.useTransition()},je.version="19.1.1",je}var j_;function hp(){return j_||(j_=1,gm.exports=Ob()),gm.exports}var I=hp(),ym={exports:{}},Xl={},vm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function kb(){return D_||(D_=1,(function(s){function e(te,ue){var X=te.length;te.push(ue);e:for(;0<X;){var Ee=X-1>>>1,O=te[Ee];if(0<o(O,ue))te[Ee]=ue,te[X]=O,X=Ee;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ue=te[0],X=te.pop();if(X!==ue){te[0]=X;e:for(var Ee=0,O=te.length,ie=O>>>1;Ee<ie;){var fe=2*(Ee+1)-1,ee=te[fe],ce=fe+1,me=te[ce];if(0>o(ee,X))ce<O&&0>o(me,ee)?(te[Ee]=me,te[ce]=X,Ee=ce):(te[Ee]=ee,te[fe]=X,Ee=fe);else if(ce<O&&0>o(me,X))te[Ee]=me,te[ce]=X,Ee=ce;else break e}}return ue}function o(te,ue){var X=te.sortIndex-ue.sortIndex;return X!==0?X:te.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();s.unstable_now=function(){return d.now()-y}}var g=[],p=[],_=1,T=null,x=3,C=!1,U=!1,B=!1,V=!1,Y=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function H(te){for(var ue=n(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=te)i(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=n(p)}}function k(te){if(B=!1,H(te),!U)if(n(g)!==null)U=!0,F||(F=!0,q());else{var ue=n(p);ue!==null&&De(k,ue.startTime-te)}}var F=!1,R=-1,w=5,N=-1;function j(){return V?!0:!(s.unstable_now()-N<w)}function P(){if(V=!1,F){var te=s.unstable_now();N=te;var ue=!0;try{e:{U=!1,B&&(B=!1,oe(R),R=-1),C=!0;var X=x;try{t:{for(H(te),T=n(g);T!==null&&!(T.expirationTime>te&&j());){var Ee=T.callback;if(typeof Ee=="function"){T.callback=null,x=T.priorityLevel;var O=Ee(T.expirationTime<=te);if(te=s.unstable_now(),typeof O=="function"){T.callback=O,H(te),ue=!0;break t}T===n(g)&&i(g),H(te)}else i(g);T=n(g)}if(T!==null)ue=!0;else{var ie=n(p);ie!==null&&De(k,ie.startTime-te),ue=!1}}break e}finally{T=null,x=X,C=!1}ue=void 0}}finally{ue?q():F=!1}}}var q;if(typeof K=="function")q=function(){K(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,he=D.port2;D.port1.onmessage=P,q=function(){he.postMessage(null)}}else q=function(){Y(P,0)};function De(te,ue){R=Y(function(){te(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(te){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var X=x;x=ue;try{return te()}finally{x=X}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var X=x;x=te;try{return ue()}finally{x=X}},s.unstable_scheduleCallback=function(te,ue,X){var Ee=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ee+X:Ee):X=Ee,te){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=X+O,te={id:_++,callback:ue,priorityLevel:te,startTime:X,expirationTime:O,sortIndex:-1},X>Ee?(te.sortIndex=X,e(p,te),n(g)===null&&te===n(p)&&(B?(oe(R),R=-1):B=!0,De(k,X-Ee))):(te.sortIndex=O,e(g,te),U||C||(U=!0,F||(F=!0,q()))),te},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(te){var ue=x;return function(){var X=x;x=ue;try{return te.apply(this,arguments)}finally{x=X}}}})(_m)),_m}var M_;function Vb(){return M_||(M_=1,vm.exports=kb()),vm.exports}var Em={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Lb(){if(P_)return an;P_=1;var s=hp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,_)},an.flushSync=function(g){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=p,i.p=_,i.d.f()}},an.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},an.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},an.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,T=y(_,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:C}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:x,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=y(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},an.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=y(_,p.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=y(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},an.requestFormReset=function(g){i.d.r(g)},an.unstable_batchedUpdates=function(g,p){return g(p)},an.useFormState=function(g,p,_){return d.H.useFormState(g,p,_)},an.useFormStatus=function(){return d.H.useHostTransitionStatus()},an.version="19.1.1",an}var O_;function Ub(){if(O_)return Em.exports;O_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Em.exports=Lb(),Em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function qb(){if(k_)return Xl;k_=1;var s=Vb(),e=hp(),n=Ub();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(i(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return y(f),t;if(m===l)return y(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var S=!1,b=f.child;b;){if(b===a){S=!0,a=f,l=m;break}if(b===l){S=!0,l=f,a=m;break}b=b.sibling}if(!S){for(b=m.child;b;){if(b===a){S=!0,a=m,l=f;break}if(b===l){S=!0,l=m,a=f;break}b=b.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),K=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function he(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case V:return"Profiler";case B:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case K:return(t.displayName||"Context")+".Provider";case oe:return(t._context.displayName||"Context")+".Consumer";case H:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:he(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return he(t(r))}catch{}}return null}var De=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Ee=[],O=-1;function ie(t){return{current:t}}function fe(t){0>O||(t.current=Ee[O],Ee[O]=null,O--)}function ee(t,r){O++,Ee[O]=t.current,t.current=r}var ce=ie(null),me=ie(null),ye=ie(null),ht=ie(null);function Ke(t,r){switch(ee(ye,r),ee(me,t),ee(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?n_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=n_(r),t=s_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(ce),ee(ce,t)}function es(){fe(ce),fe(me),fe(ye)}function Fo(t){t.memoizedState!==null&&ee(ht,t);var r=ce.current,a=s_(r,t.type);r!==a&&(ee(me,t),ee(ce,a))}function ba(t){me.current===t&&(fe(ce),fe(me)),ht.current===t&&(fe(ht),Hl._currentValue=X)}var wa=Object.prototype.hasOwnProperty,xi=s.unstable_scheduleCallback,xa=s.unstable_cancelCallback,pd=s.unstable_shouldYield,Ho=s.unstable_requestPaint,vn=s.unstable_now,kc=s.unstable_getCurrentPriorityLevel,Ot=s.unstable_ImmediatePriority,zt=s.unstable_UserBlockingPriority,Us=s.unstable_NormalPriority,gd=s.unstable_LowPriority,Go=s.unstable_IdlePriority,yd=s.log,Ai=s.unstable_setDisableYieldValue,Sr=null,nn=null;function Vn(t){if(typeof yd=="function"&&Ai(t),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Sr,t)}catch{}}var fn=Math.clz32?Math.clz32:Lc,vd=Math.log,Vc=Math.LN2;function Lc(t){return t>>>=0,t===0?32:31-(vd(t)/Vc|0)|0}var ys=256,Tr=4194304;function ts(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ln(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~m,l!==0?f=ts(l):(S&=b,S!==0?f=ts(S):a||(a=b&~t,a!==0&&(f=ts(a))))):(b=l&~m,b!==0?f=ts(b):S!==0?f=ts(S):a||(a=l&~t,a!==0&&(f=ts(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function br(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Aa(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qo(){var t=ys;return ys<<=1,(ys&4194048)===0&&(ys=256),t}function wr(){var t=Tr;return Tr<<=1,(Tr&62914560)===0&&(Tr=4194304),t}function Na(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function St(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uc(t,r,a,l,f,m){var S=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,M=t.expirationTimes,$=t.hiddenUpdates;for(a=S&~a;0<a;){var ne=31-fn(a),ae=1<<ne;b[ne]=0,M[ne]=-1;var W=$[ne];if(W!==null)for($[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}a&=~ae}l!==0&&xr(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(S&~r))}function xr(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-fn(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Ar(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-fn(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function Ko(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $o(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function qs(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:T_(t.type))}function _d(t,r){var a=ue.p;try{return ue.p=t,r()}finally{ue.p=a}}var vs=Math.random().toString(36).slice(2),Tt="__reactFiber$"+vs,$t="__reactProps$"+vs,zs="__reactContainer$"+vs,Ni="__reactEvents$"+vs,Ri="__reactListeners$"+vs,Ed="__reactHandles$"+vs,ns="__reactResources$"+vs,Nr="__reactMarker$"+vs;function Ra(t){delete t[Tt],delete t[$t],delete t[Ni],delete t[Ri],delete t[Ed]}function _s(t){var r=t[Tt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[zs]||a[Tt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=o_(t);t!==null;){if(a=t[Tt])return a;t=o_(t)}return r}t=a,a=t.parentNode}return null}function Es(t){if(t=t[Tt]||t[zs]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Rr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function Cr(t){var r=t[ns];return r||(r=t[ns]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function bt(t){t[Nr]=!0}var qc=new Set,Ci={};function Ss(t,r){Ts(t,r),Ts(t+"Capture",r)}function Ts(t,r){for(Ci[t]=r,t=0;t<r.length;t++)qc.add(r[t])}var Ii=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bs={},Ca={};function Sd(t){return wa.call(Ca,t)?!0:wa.call(bs,t)?!1:Ii.test(t)?Ca[t]=!0:(bs[t]=!0,!1)}function ji(t,r,a){if(Sd(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Di(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Un(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Mi,Ia;function Bs(t){if(Mi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Mi=r&&r[1]||"",Ia=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mi+t+Ia}var ja=!1;function Da(t,r){if(!t||ja)return"";ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var W=Z}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(Z){W=Z}t.call(ae.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),S=m[0],b=m[1];if(S&&b){var M=S.split(`
`),$=b.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===$.length)for(l=M.length-1,f=$.length-1;1<=l&&0<=f&&M[l]!==$[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==$[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==$[f]){var ne=`
`+M[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=f);break}}}finally{ja=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Bs(a):""}function Td(t){switch(t.tag){case 26:case 27:case 5:return Bs(t.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 15:return Da(t.type,!1);case 11:return Da(t.type.render,!1);case 1:return Da(t.type,!0);case 31:return Bs("Activity");default:return""}}function ss(t){try{var r="";do r+=Td(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Pi(t){var r=Ir(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(S){l=""+S,m.call(this,S)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function jr(t){t._valueTracker||(t._valueTracker=Pi(t))}function Ze(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ir(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Fs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Oi=/[\n"\\]/g;function Bt(t){return t.replace(Oi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Yo(t,r,a,l,f,m,S,b){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),r!=null?S==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mt(r)):t.value!==""+mt(r)&&(t.value=""+mt(r)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),r!=null?Wo(t,S,mt(r)):a!=null?Wo(t,S,mt(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+mt(b):t.removeAttribute("name")}function Xo(t,r,a,l,f,m,S,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+mt(a):"",r=r!=null?""+mt(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S)}function Wo(t,r,a){r==="number"&&Fs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Dr(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function zc(t,r,a){if(r!=null&&(r=""+mt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mt(a):""}function Bc(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(De(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mt(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function qn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Hs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zo(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Hs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Jo(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Zo(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Zo(t,m,r[m])}function Ma(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rs(t){return Hc.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var el=null;function tl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mr=null,mn=null;function Gc(t){var r=Es(t);if(r&&(t=r.stateNode)){var a=t[$t]||null;e:switch(t=r.stateNode,r.type){case"input":if(Yo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Bt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[$t]||null;if(!f)throw Error(i(90));Yo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ze(l)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Dr(t,!!a.multiple,r,!1)}}}var ki=!1;function Vi(t,r,a){if(ki)return t(r,a);ki=!0;try{var l=t(r);return l}finally{if(ki=!1,(Mr!==null||mn!==null)&&(Pu(),Mr&&(r=Mr,t=mn,mn=Mr=null,Gc(r),t)))for(r=0;r<t.length;r++)Gc(t[r])}}function Pr(t,r){var a=t.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gs=!1;if(pn)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Gs=!1}var zn=null,rt=null,Pa=null;function Qc(){if(Pa)return Pa;var t,r=rt,a=r.length,l,f="value"in zn?zn.value:zn.textContent,m=f.length;for(t=0;t<a&&r[t]===f[t];t++);var S=a-t;for(l=1;l<=S&&r[a-l]===f[m-l];l++);return Pa=f.slice(t,1<l?1-l:void 0)}function Li(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ui(){return!0}function nl(){return!1}function kt(t){function r(a,l,f,m,S){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ui:nl,this.isPropagationStopped=nl,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),r}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=kt(sn),zi=_({},sn,{view:0,detail:0}),Bi=kt(zi),Oa,Fi,ws,Hi=_({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ws&&(ws&&t.type==="mousemove"?(Oa=t.screenX-ws.screenX,Fi=t.screenY-ws.screenY):Fi=Oa=0,ws=t),Oa)},movementY:function(t){return"movementY"in t?t.movementY:Fi}}),Gi=kt(Hi),bd=_({},Hi,{dataTransfer:0}),Kc=kt(bd),Qi=_({},zi,{relatedTarget:0}),ka=kt(Qi),$c=_({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),sl=kt($c),rl=_({},sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yc=kt(rl),Va=_({},sn,{data:0}),il=kt(Va),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wc[t])?!!r[t]:!1}function La(){return Zc}var Jc=_({},zi,{key:function(t){if(t.key){var r=Xc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qs[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(t){return t.type==="keypress"?Li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ua=kt(Jc),gn=_({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),al=kt(gn),eu=_({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),kr=kt(eu),h=_({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=kt(h),E=_({},Hi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=kt(E),Q=_({},sn,{newState:0,oldState:0}),J=kt(Q),de=[9,13,27,32],Ce=pn&&"CompositionEvent"in window,ot=null;pn&&"documentMode"in document&&(ot=document.documentMode);var Ye=pn&&"TextEvent"in window&&!ot,wt=pn&&(!Ce||ot&&8<ot&&11>=ot),An=" ",xs=!1;function is(t,r){switch(t){case"keyup":return de.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function as(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function ol(t,r){switch(t){case"compositionend":return as(r);case"keypress":return r.which!==32?null:(xs=!0,An);case"textInput":return t=r.data,t===An&&xs?null:t;default:return null}}function aT(t,r){if(os)return t==="compositionend"||!Ce&&is(t,r)?(t=Qc(),Pa=rt=zn=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return wt&&r.locale!=="ko"?null:r.data;default:return null}}var oT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!oT[t.type]:r==="textarea"}function yg(t,r,a,l){Mr?mn?mn.push(l):mn=[l]:Mr=l,r=qu(r,"onChange"),0<r.length&&(a=new qi("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var ll=null,cl=null;function lT(t){Wv(t,0)}function tu(t){var r=Rr(t);if(Ze(r))return t}function vg(t,r){if(t==="change")return r}var _g=!1;if(pn){var wd;if(pn){var xd="oninput"in document;if(!xd){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),xd=typeof Eg.oninput=="function"}wd=xd}else wd=!1;_g=wd&&(!document.documentMode||9<document.documentMode)}function Sg(){ll&&(ll.detachEvent("onpropertychange",Tg),cl=ll=null)}function Tg(t){if(t.propertyName==="value"&&tu(cl)){var r=[];yg(r,cl,t,tl(t)),Vi(lT,r)}}function cT(t,r,a){t==="focusin"?(Sg(),ll=r,cl=a,ll.attachEvent("onpropertychange",Tg)):t==="focusout"&&Sg()}function uT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(cl)}function hT(t,r){if(t==="click")return tu(r)}function dT(t,r){if(t==="input"||t==="change")return tu(r)}function fT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:fT;function ul(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!wa.call(r,f)||!Nn(t[f],r[f]))return!1}return!0}function bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,r){var a=bg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bg(a)}}function xg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?xg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ag(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Fs(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Fs(t.document)}return r}function Ad(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var mT=pn&&"documentMode"in document&&11>=document.documentMode,qa=null,Nd=null,hl=null,Rd=!1;function Ng(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rd||qa==null||qa!==Fs(l)||(l=qa,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hl&&ul(hl,l)||(hl=l,l=qu(Nd,"onSelect"),0<l.length&&(r=new qi("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=qa)))}function Ki(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var za={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},Cd={},Rg={};pn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function $i(t){if(Cd[t])return Cd[t];if(!za[t])return t;var r=za[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Cd[t]=r[a];return t}var Cg=$i("animationend"),Ig=$i("animationiteration"),jg=$i("animationstart"),pT=$i("transitionrun"),gT=$i("transitionstart"),yT=$i("transitioncancel"),Dg=$i("transitionend"),Mg=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function ls(t,r){Mg.set(t,r),Ss(r,[t])}var Pg=new WeakMap;function Bn(t,r){if(typeof t=="object"&&t!==null){var a=Pg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ss(r)},Pg.set(t,r),r)}return{value:t,source:r,stack:ss(r)}}var Fn=[],Ba=0,jd=0;function nu(){for(var t=Ba,r=jd=Ba=0;r<t;){var a=Fn[r];Fn[r++]=null;var l=Fn[r];Fn[r++]=null;var f=Fn[r];Fn[r++]=null;var m=Fn[r];if(Fn[r++]=null,l!==null&&f!==null){var S=l.pending;S===null?f.next=f:(f.next=S.next,S.next=f),l.pending=f}m!==0&&Og(a,f,m)}}function su(t,r,a,l){Fn[Ba++]=t,Fn[Ba++]=r,Fn[Ba++]=a,Fn[Ba++]=l,jd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Dd(t,r,a,l){return su(t,r,a,l),ru(t)}function Fa(t,r){return su(t,null,null,r),ru(t)}function Og(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-fn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),m):null}function ru(t){if(50<kl)throw kl=0,Uf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ha={};function vT(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,r,a,l){return new vT(t,r,a,l)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,r){var a=t.alternate;return a===null?(a=Rn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function kg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function iu(t,r,a,l,f,m){var S=0;if(l=t,typeof t=="function")Md(t)&&(S=1);else if(typeof t=="string")S=Eb(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Rn(31,a,r,f),t.elementType=N,t.lanes=m,t;case U:return Yi(a.children,f,m,r);case B:S=8,f|=24;break;case V:return t=Rn(12,a,r,f|2),t.elementType=V,t.lanes=m,t;case k:return t=Rn(13,a,r,f),t.elementType=k,t.lanes=m,t;case F:return t=Rn(19,a,r,f),t.elementType=F,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case K:S=10;break e;case oe:S=9;break e;case H:S=11;break e;case R:S=14;break e;case w:S=16,l=null;break e}S=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Rn(S,a,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Yi(t,r,a,l){return t=Rn(7,t,l,r),t.lanes=a,t}function Pd(t,r,a){return t=Rn(6,t,null,r),t.lanes=a,t}function Od(t,r,a){return r=Rn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ga=[],Qa=0,au=null,ou=0,Hn=[],Gn=0,Xi=null,$s=1,Ys="";function Wi(t,r){Ga[Qa++]=ou,Ga[Qa++]=au,au=t,ou=r}function Vg(t,r,a){Hn[Gn++]=$s,Hn[Gn++]=Ys,Hn[Gn++]=Xi,Xi=t;var l=$s;t=Ys;var f=32-fn(l)-1;l&=~(1<<f),a+=1;var m=32-fn(r)+f;if(30<m){var S=f-f%5;m=(l&(1<<S)-1).toString(32),l>>=S,f-=S,$s=1<<32-fn(r)+f|a<<f|l,Ys=m+t}else $s=1<<m|a<<f|l,Ys=t}function kd(t){t.return!==null&&(Wi(t,1),Vg(t,1,0))}function Vd(t){for(;t===au;)au=Ga[--Qa],Ga[Qa]=null,ou=Ga[--Qa],Ga[Qa]=null;for(;t===Xi;)Xi=Hn[--Gn],Hn[Gn]=null,Ys=Hn[--Gn],Hn[Gn]=null,$s=Hn[--Gn],Hn[Gn]=null}var yn=null,yt=null,Ge=!1,Zi=null,As=!1,Ld=Error(i(519));function Ji(t){var r=Error(i(418,""));throw ml(Bn(r,t)),Ld}function Lg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Tt]=t,r[$t]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Le(Ll[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Xo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),jr(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Bc(r,l.value,l.defaultValue,l.children),jr(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||t_(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=zu),r=!0):r=!1,r||Ji(t)}function Ug(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:yn=yn.return}}function dl(t){if(t!==yn)return!1;if(!Ge)return Ug(t),Ge=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tm(t.type,t.memoizedProps)),a=!a),a&&yt&&Ji(t),Ug(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){yt=us(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}yt=null}}else r===27?(r=yt,Zr(t.type)?(t=im,im=null,yt=t):yt=r):yt=yn?us(t.stateNode.nextSibling):null;return!0}function fl(){yt=yn=null,Ge=!1}function qg(){var t=Zi;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Zi=null),t}function ml(t){Zi===null?Zi=[t]:Zi.push(t)}var Ud=ie(null),ea=null,Xs=null;function Vr(t,r,a){ee(Ud,r._currentValue),r._currentValue=a}function Ws(t){t._currentValue=Ud.current,fe(Ud)}function qd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var M=0;M<r.length;M++)if(b.context===r[M]){m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),qd(m.return,a,t),l||(S=null);break e}m=b.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),qd(S,a,t),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===t){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function pl(t,r,a,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var b=f.type;Nn(f.pendingProps.value,S.value)||(t!==null?t.push(b):t=[b])}}else if(f===ht.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}f=f.return}t!==null&&zd(r,t,a,l),r.flags|=262144}function lu(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ta(t){ea=t,Xs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return zg(ea,t)}function cu(t,r){return ea===null&&ta(t),zg(t,r)}function zg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Xs===null){if(t===null)throw Error(i(308));Xs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Xs=Xs.next=r;return a}var _T=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},ET=s.unstable_scheduleCallback,ST=s.unstable_NormalPriority,Vt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new _T,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&ET(ST,function(){t.controller.abort()})}var yl=null,Fd=0,Ka=0,$a=null;function TT(t,r){if(yl===null){var a=yl=[];Fd=0,Ka=Qf(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Fd++,r.then(Bg,Bg),r}function Bg(){if(--Fd===0&&yl!==null){$a!==null&&($a.status="fulfilled");var t=yl;yl=null,Ka=0,$a=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function bT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Fg=te.S;te.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&TT(t,r),Fg!==null&&Fg(t,r)};var na=ie(null);function Hd(){var t=na.current;return t!==null?t:it.pooledCache}function uu(t,r){r===null?ee(na,na.current):ee(na,r.pool)}function Hg(){var t=Hd();return t===null?null:{parent:Vt._currentValue,pool:t}}var vl=Error(i(460)),Gg=Error(i(474)),hu=Error(i(542)),Gd={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function du(){}function Kg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(du,du),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Yg(t),t;default:if(typeof r.status=="string")r.then(du,du);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Yg(t),t}throw _l=r,vl}}var _l=null;function $g(){if(_l===null)throw Error(i(459));var t=_l;return _l=null,t}function Yg(t){if(t===vl||t===hu)throw Error(i(483))}var Lr=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ur(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=ru(t),Og(t,null,a),r}return su(t,l,r,a),ru(t)}function El(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Ar(t,a)}}function $d(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Yd=!1;function Sl(){if(Yd){var t=$a;if(t!==null)throw t}}function Tl(t,r,a,l){Yd=!1;var f=t.updateQueue;Lr=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var M=b,$=M.next;M.next=null,S===null?m=$:S.next=$,S=M;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==S&&(b===null?ne.firstBaseUpdate=$:b.next=$,ne.lastBaseUpdate=M))}if(m!==null){var ae=f.baseState;S=0,ne=$=M=null,b=m;do{var W=b.lane&-536870913,Z=W!==b.lane;if(Z?(Be&W)===W:(l&W)===W){W!==0&&W===Ka&&(Yd=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ne=t,be=b;W=r;var tt=a;switch(be.tag){case 1:if(Ne=be.payload,typeof Ne=="function"){ae=Ne.call(tt,ae,W);break e}ae=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=be.payload,W=typeof Ne=="function"?Ne.call(tt,ae,W):Ne,W==null)break e;ae=_({},ae,W);break e;case 2:Lr=!0}}W=b.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?($=ne=Z,M=ae):ne=ne.next=Z,S|=W;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;Z=b,b=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(M=ae),f.baseState=M,f.firstBaseUpdate=$,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),$r|=S,t.lanes=S,t.memoizedState=ae}}function Xg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Wg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Xg(a[t],r)}var Ya=ie(null),fu=ie(0);function Zg(t,r){t=rr,ee(fu,t),ee(Ya,r),rr=t|r.baseLanes}function Xd(){ee(fu,rr),ee(Ya,Ya.current)}function Wd(){rr=fu.current,fe(Ya),fe(fu)}var zr=0,Me=null,Je=null,Ct=null,mu=!1,Xa=!1,sa=!1,pu=0,bl=0,Wa=null,wT=0;function xt(){throw Error(i(321))}function Zd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function Jd(t,r,a,l,f,m){return zr=m,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=t===null||t.memoizedState===null?Oy:ky,sa=!1,m=a(l,f),sa=!1,Xa&&(m=ey(r,a,l,f)),Jg(t),m}function Jg(t){te.H=Su;var r=Je!==null&&Je.next!==null;if(zr=0,Ct=Je=Me=null,mu=!1,bl=0,Wa=null,r)throw Error(i(300));t===null||Ft||(t=t.dependencies,t!==null&&lu(t)&&(Ft=!0))}function ey(t,r,a,l){Me=t;var f=0;do{if(Xa&&(Wa=null),bl=0,Xa=!1,25<=f)throw Error(i(301));if(f+=1,Ct=Je=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=jT,m=r(a,l)}while(Xa);return m}function xT(){var t=te.H,r=t.useState()[0];return r=typeof r.then=="function"?wl(r):r,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Me.flags|=1024),r}function ef(){var t=pu!==0;return pu=0,t}function tf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function nf(t){if(mu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}mu=!1}zr=0,Ct=Je=Me=null,Xa=!1,bl=pu=0,Wa=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Me.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function It(){if(Je===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var r=Ct===null?Me.memoizedState:Ct.next;if(r!==null)Ct=r,Je=t;else{if(t===null)throw Me.alternate===null?Error(i(467)):Error(i(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ct===null?Me.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var r=bl;return bl+=1,Wa===null&&(Wa=[]),t=Kg(Wa,t,r),r=Me,(Ct===null?r.memoizedState:Ct.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?Oy:ky),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===K)return rn(t)}throw Error(i(438,String(t)))}function rf(t){var r=null,a=Me.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=sf(),Me.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=j;return r.index++,a}function Zs(t,r){return typeof r=="function"?r(t):r}function yu(t){var r=It();return af(r,Je,t)}function af(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var b=S=null,M=null,$=r,ne=!1;do{var ae=$.lane&-536870913;if(ae!==$.lane?(Be&ae)===ae:(zr&ae)===ae){var W=$.revertLane;if(W===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ae===Ka&&(ne=!0);else if((zr&W)===W){$=$.next,W===Ka&&(ne=!0);continue}else ae={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(b=M=ae,S=m):M=M.next=ae,Me.lanes|=W,$r|=W;ae=$.action,sa&&a(m,ae),m=$.hasEagerState?$.eagerState:a(m,ae)}else W={lane:ae,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(b=M=W,S=m):M=M.next=W,Me.lanes|=ae,$r|=ae;$=$.next}while($!==null&&$!==r);if(M===null?S=m:M.next=b,!Nn(m,t.memoizedState)&&(Ft=!0,ne&&(a=$a,a!==null)))throw a;t.memoizedState=m,t.baseState=S,t.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var r=It(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var S=f=f.next;do m=t(m,S.action),S=S.next;while(S!==f);Nn(m,r.memoizedState)||(Ft=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function ty(t,r,a){var l=Me,f=It(),m=Ge;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var S=!Nn((Je||f).memoizedState,a);S&&(f.memoizedState=a,Ft=!0),f=f.queue;var b=ry.bind(null,l,f,t);if(xl(2048,8,b,[t]),f.getSnapshot!==r||S||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Za(9,vu(),sy.bind(null,l,f,a,r),null),it===null)throw Error(i(349));m||(zr&124)!==0||ny(l,r,a)}return a}function ny(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Me.updateQueue,r===null?(r=sf(),Me.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function sy(t,r,a,l){r.value=a,r.getSnapshot=l,iy(r)&&ay(t)}function ry(t,r,a){return a(function(){iy(r)&&ay(t)})}function iy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function ay(t){var r=Fa(t,2);r!==null&&Mn(r,t,2)}function lf(t){var r=_n();if(typeof t=="function"){var a=t;if(t=a(),sa){Vn(!0);try{a()}finally{Vn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:t},r}function oy(t,r,a,l){return t.baseState=a,af(t,Je,typeof l=="function"?l:Zs)}function AT(t,r,a,l,f){if(Eu(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};te.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,ly(r,m)):(m.next=a.next,r.pending=a.next=m)}}function ly(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=te.T,S={};te.T=S;try{var b=a(f,l),M=te.S;M!==null&&M(S,b),cy(t,r,b)}catch($){cf(t,r,$)}finally{te.T=m}}else try{m=a(f,l),cy(t,r,m)}catch($){cf(t,r,$)}}function cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){uy(t,r,l)},function(l){return cf(t,r,l)}):uy(t,r,a)}function uy(t,r,a){r.status="fulfilled",r.value=a,hy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,ly(t,a)))}function cf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,hy(r),r=r.next;while(r!==l)}t.action=null}function hy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function dy(t,r){return r}function fy(t,r){if(Ge){var a=it.formState;if(a!==null){e:{var l=Me;if(Ge){if(yt){t:{for(var f=yt,m=As;f.nodeType!==8;){if(!m){f=null;break t}if(f=us(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){yt=us(f.nextSibling),l=f.data==="F!";break e}}Ji(l)}l=!1}l&&(r=a[0])}}return a=_n(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},a.queue=l,a=Dy.bind(null,Me,l),l.dispatch=a,l=lf(!1),m=mf.bind(null,Me,!1,l.queue),l=_n(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=AT.bind(null,Me,f,m,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function my(t){var r=It();return py(r,Je,t)}function py(t,r,a){if(r=af(t,r,dy)[0],t=yu(Zs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wl(r)}catch(S){throw S===vl?hu:S}else l=r;r=It();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(Me.flags|=2048,Za(9,vu(),NT.bind(null,f,a),null)),[l,m,t]}function NT(t,r){t.action=r}function gy(t){var r=It(),a=Je;if(a!==null)return py(r,a,t);It(),r=r.memoizedState,a=It();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Za(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Me.updateQueue,r===null&&(r=sf(),Me.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vu(){return{destroy:void 0,resource:void 0}}function yy(){return It().memoizedState}function _u(t,r,a,l){var f=_n();l=l===void 0?null:l,Me.flags|=t,f.memoizedState=Za(1|r,vu(),a,l)}function xl(t,r,a,l){var f=It();l=l===void 0?null:l;var m=f.memoizedState.inst;Je!==null&&l!==null&&Zd(l,Je.memoizedState.deps)?f.memoizedState=Za(r,m,a,l):(Me.flags|=t,f.memoizedState=Za(1|r,m,a,l))}function vy(t,r){_u(8390656,8,t,r)}function _y(t,r){xl(2048,8,t,r)}function Ey(t,r){return xl(4,2,t,r)}function Sy(t,r){return xl(4,4,t,r)}function Ty(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function by(t,r,a){a=a!=null?a.concat([t]):null,xl(4,4,Ty.bind(null,r,t),a)}function uf(){}function wy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Zd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function xy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Zd(r,l[1]))return l[0];if(l=t(),sa){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(zr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Rv(),Me.lanes|=t,$r|=t,a)}function Ay(t,r,a,l){return Nn(a,r)?a:Ya.current!==null?(t=hf(t,a,l),Nn(t,r)||(Ft=!0),t):(zr&42)===0?(Ft=!0,t.memoizedState=a):(t=Rv(),Me.lanes|=t,$r|=t,r)}function Ny(t,r,a,l,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var S=te.T,b={};te.T=b,mf(t,!1,r,a);try{var M=f(),$=te.S;if($!==null&&$(b,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=bT(M,l);Al(t,r,ne,Dn(t))}else Al(t,r,l,Dn(t))}catch(ae){Al(t,r,{then:function(){},status:"rejected",reason:ae},Dn())}finally{ue.p=m,te.T=S}}function RT(){}function df(t,r,a,l){if(t.tag!==5)throw Error(i(476));var f=Ry(t).queue;Ny(t,f,r,X,a===null?RT:function(){return Cy(t),a(l)})}function Ry(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:X},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Cy(t){var r=Ry(t).next.queue;Al(t,r,{},Dn())}function ff(){return rn(Hl)}function Iy(){return It().memoizedState}function jy(){return It().memoizedState}function CT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Dn();t=Ur(a);var l=qr(r,t,a);l!==null&&(Mn(l,r,a),El(l,r,a)),r={cache:Bd()},t.payload=r;return}r=r.return}}function IT(t,r,a){var l=Dn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Eu(t)?My(r,a):(a=Dd(t,r,a,l),a!==null&&(Mn(a,t,l),Py(a,r,l)))}function Dy(t,r,a){var l=Dn();Al(t,r,a,l)}function Al(t,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))My(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var S=r.lastRenderedState,b=m(S,a);if(f.hasEagerState=!0,f.eagerState=b,Nn(b,S))return su(t,r,f,0),it===null&&nu(),!1}catch{}finally{}if(a=Dd(t,r,f,l),a!==null)return Mn(a,t,l),Py(a,r,l),!0}return!1}function mf(t,r,a,l){if(l={lane:2,revertLane:Qf(),action:l,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(r)throw Error(i(479))}else r=Dd(t,a,l,2),r!==null&&Mn(r,t,2)}function Eu(t){var r=t.alternate;return t===Me||r!==null&&r===Me}function My(t,r){Xa=mu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Py(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Ar(t,a)}}var Su={readContext:rn,use:gu,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},Oy={readContext:rn,use:gu,useCallback:function(t,r){return _n().memoizedState=[t,r===void 0?null:r],t},useContext:rn,useEffect:vy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,_u(4194308,4,Ty.bind(null,r,t),a)},useLayoutEffect:function(t,r){return _u(4194308,4,t,r)},useInsertionEffect:function(t,r){_u(4,2,t,r)},useMemo:function(t,r){var a=_n();r=r===void 0?null:r;var l=t();if(sa){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=_n();if(a!==void 0){var f=a(r);if(sa){Vn(!0);try{a(r)}finally{Vn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=IT.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var r=_n();return t={current:t},r.memoizedState=t},useState:function(t){t=lf(t);var r=t.queue,a=Dy.bind(null,Me,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:uf,useDeferredValue:function(t,r){var a=_n();return hf(a,t,r)},useTransition:function(){var t=lf(!1);return t=Ny.bind(null,Me,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Me,f=_n();if(Ge){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),it===null)throw Error(i(349));(Be&124)!==0||ny(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,vy(ry.bind(null,l,m,t),[t]),l.flags|=2048,Za(9,vu(),sy.bind(null,l,m,a,r),null),a},useId:function(){var t=_n(),r=it.identifierPrefix;if(Ge){var a=Ys,l=$s;a=(l&~(1<<32-fn(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=pu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=wT++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:ff,useFormState:fy,useActionState:fy,useOptimistic:function(t){var r=_n();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=mf.bind(null,Me,!0,a),a.dispatch=r,[t,r]},useMemoCache:rf,useCacheRefresh:function(){return _n().memoizedState=CT.bind(null,Me)}},ky={readContext:rn,use:gu,useCallback:wy,useContext:rn,useEffect:_y,useImperativeHandle:by,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:xy,useReducer:yu,useRef:yy,useState:function(){return yu(Zs)},useDebugValue:uf,useDeferredValue:function(t,r){var a=It();return Ay(a,Je.memoizedState,t,r)},useTransition:function(){var t=yu(Zs)[0],r=It().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:ff,useFormState:my,useActionState:my,useOptimistic:function(t,r){var a=It();return oy(a,Je,t,r)},useMemoCache:rf,useCacheRefresh:jy},jT={readContext:rn,use:gu,useCallback:wy,useContext:rn,useEffect:_y,useImperativeHandle:by,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:xy,useReducer:of,useRef:yy,useState:function(){return of(Zs)},useDebugValue:uf,useDeferredValue:function(t,r){var a=It();return Je===null?hf(a,t,r):Ay(a,Je.memoizedState,t,r)},useTransition:function(){var t=of(Zs)[0],r=It().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:ff,useFormState:gy,useActionState:gy,useOptimistic:function(t,r){var a=It();return Je!==null?oy(a,Je,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:jy},Ja=null,Nl=0;function Tu(t){var r=Nl;return Nl+=1,Ja===null&&(Ja=[]),Kg(Ja,t,r)}function Rl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function bu(t,r){throw r.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Vy(t){var r=t._init;return r(t._payload)}function Ly(t){function r(z,L){if(t){var G=z.deletions;G===null?(z.deletions=[L],z.flags|=16):G.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Ks(z,L),z.index=0,z.sibling=null,z}function m(z,L,G){return z.index=G,t?(G=z.alternate,G!==null?(G=G.index,G<L?(z.flags|=67108866,L):G):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function S(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,L,G,se){return L===null||L.tag!==6?(L=Pd(G,z.mode,se),L.return=z,L):(L=f(L,G),L.return=z,L)}function M(z,L,G,se){var ve=G.type;return ve===U?ne(z,L,G.props.children,se,G.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&Vy(ve)===L.type)?(L=f(L,G.props),Rl(L,G),L.return=z,L):(L=iu(G.type,G.key,G.props,null,z.mode,se),Rl(L,G),L.return=z,L)}function $(z,L,G,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=Od(G,z.mode,se),L.return=z,L):(L=f(L,G.children||[]),L.return=z,L)}function ne(z,L,G,se,ve){return L===null||L.tag!==7?(L=Yi(G,z.mode,se,ve),L.return=z,L):(L=f(L,G),L.return=z,L)}function ae(z,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Pd(""+L,z.mode,G),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return G=iu(L.type,L.key,L.props,null,z.mode,G),Rl(G,L),G.return=z,G;case C:return L=Od(L,z.mode,G),L.return=z,L;case w:var se=L._init;return L=se(L._payload),ae(z,L,G)}if(De(L)||q(L))return L=Yi(L,z.mode,G,null),L.return=z,L;if(typeof L.then=="function")return ae(z,Tu(L),G);if(L.$$typeof===K)return ae(z,cu(z,L),G);bu(z,L)}return null}function W(z,L,G,se){var ve=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ve!==null?null:b(z,L,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return G.key===ve?M(z,L,G,se):null;case C:return G.key===ve?$(z,L,G,se):null;case w:return ve=G._init,G=ve(G._payload),W(z,L,G,se)}if(De(G)||q(G))return ve!==null?null:ne(z,L,G,se,null);if(typeof G.then=="function")return W(z,L,Tu(G),se);if(G.$$typeof===K)return W(z,L,cu(z,G),se);bu(z,G)}return null}function Z(z,L,G,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get(G)||null,b(L,z,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return z=z.get(se.key===null?G:se.key)||null,M(L,z,se,ve);case C:return z=z.get(se.key===null?G:se.key)||null,$(L,z,se,ve);case w:var Oe=se._init;return se=Oe(se._payload),Z(z,L,G,se,ve)}if(De(se)||q(se))return z=z.get(G)||null,ne(L,z,se,ve,null);if(typeof se.then=="function")return Z(z,L,G,Tu(se),ve);if(se.$$typeof===K)return Z(z,L,G,cu(L,se),ve);bu(L,se)}return null}function Ne(z,L,G,se){for(var ve=null,Oe=null,Se=L,we=L=0,Gt=null;Se!==null&&we<G.length;we++){Se.index>we?(Gt=Se,Se=null):Gt=Se.sibling;var He=W(z,Se,G[we],se);if(He===null){Se===null&&(Se=Gt);break}t&&Se&&He.alternate===null&&r(z,Se),L=m(He,L,we),Oe===null?ve=He:Oe.sibling=He,Oe=He,Se=Gt}if(we===G.length)return a(z,Se),Ge&&Wi(z,we),ve;if(Se===null){for(;we<G.length;we++)Se=ae(z,G[we],se),Se!==null&&(L=m(Se,L,we),Oe===null?ve=Se:Oe.sibling=Se,Oe=Se);return Ge&&Wi(z,we),ve}for(Se=l(Se);we<G.length;we++)Gt=Z(Se,z,we,G[we],se),Gt!==null&&(t&&Gt.alternate!==null&&Se.delete(Gt.key===null?we:Gt.key),L=m(Gt,L,we),Oe===null?ve=Gt:Oe.sibling=Gt,Oe=Gt);return t&&Se.forEach(function(si){return r(z,si)}),Ge&&Wi(z,we),ve}function be(z,L,G,se){if(G==null)throw Error(i(151));for(var ve=null,Oe=null,Se=L,we=L=0,Gt=null,He=G.next();Se!==null&&!He.done;we++,He=G.next()){Se.index>we?(Gt=Se,Se=null):Gt=Se.sibling;var si=W(z,Se,He.value,se);if(si===null){Se===null&&(Se=Gt);break}t&&Se&&si.alternate===null&&r(z,Se),L=m(si,L,we),Oe===null?ve=si:Oe.sibling=si,Oe=si,Se=Gt}if(He.done)return a(z,Se),Ge&&Wi(z,we),ve;if(Se===null){for(;!He.done;we++,He=G.next())He=ae(z,He.value,se),He!==null&&(L=m(He,L,we),Oe===null?ve=He:Oe.sibling=He,Oe=He);return Ge&&Wi(z,we),ve}for(Se=l(Se);!He.done;we++,He=G.next())He=Z(Se,z,we,He.value,se),He!==null&&(t&&He.alternate!==null&&Se.delete(He.key===null?we:He.key),L=m(He,L,we),Oe===null?ve=He:Oe.sibling=He,Oe=He);return t&&Se.forEach(function(Db){return r(z,Db)}),Ge&&Wi(z,we),ve}function tt(z,L,G,se){if(typeof G=="object"&&G!==null&&G.type===U&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case x:e:{for(var ve=G.key;L!==null;){if(L.key===ve){if(ve=G.type,ve===U){if(L.tag===7){a(z,L.sibling),se=f(L,G.props.children),se.return=z,z=se;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&Vy(ve)===L.type){a(z,L.sibling),se=f(L,G.props),Rl(se,G),se.return=z,z=se;break e}a(z,L);break}else r(z,L);L=L.sibling}G.type===U?(se=Yi(G.props.children,z.mode,se,G.key),se.return=z,z=se):(se=iu(G.type,G.key,G.props,null,z.mode,se),Rl(se,G),se.return=z,z=se)}return S(z);case C:e:{for(ve=G.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a(z,L.sibling),se=f(L,G.children||[]),se.return=z,z=se;break e}else{a(z,L);break}else r(z,L);L=L.sibling}se=Od(G,z.mode,se),se.return=z,z=se}return S(z);case w:return ve=G._init,G=ve(G._payload),tt(z,L,G,se)}if(De(G))return Ne(z,L,G,se);if(q(G)){if(ve=q(G),typeof ve!="function")throw Error(i(150));return G=ve.call(G),be(z,L,G,se)}if(typeof G.then=="function")return tt(z,L,Tu(G),se);if(G.$$typeof===K)return tt(z,L,cu(z,G),se);bu(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a(z,L.sibling),se=f(L,G),se.return=z,z=se):(a(z,L),se=Pd(G,z.mode,se),se.return=z,z=se),S(z)):a(z,L)}return function(z,L,G,se){try{Nl=0;var ve=tt(z,L,G,se);return Ja=null,ve}catch(Se){if(Se===vl||Se===hu)throw Se;var Oe=Rn(29,Se,null,z.mode);return Oe.lanes=se,Oe.return=z,Oe}finally{}}}var eo=Ly(!0),Uy=Ly(!1),Qn=ie(null),Ns=null;function Br(t){var r=t.alternate;ee(Lt,Lt.current&1),ee(Qn,t),Ns===null&&(r===null||Ya.current!==null||r.memoizedState!==null)&&(Ns=t)}function qy(t){if(t.tag===22){if(ee(Lt,Lt.current),ee(Qn,t),Ns===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ns=t)}}else Fr()}function Fr(){ee(Lt,Lt.current),ee(Qn,Qn.current)}function Js(t){fe(Qn),Ns===t&&(Ns=null),fe(Lt)}var Lt=ie(0);function wu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||rm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function pf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Dn(),f=Ur(l);f.payload=r,a!=null&&(f.callback=a),r=qr(t,f,l),r!==null&&(Mn(r,t,l),El(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Dn(),f=Ur(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=qr(t,f,l),r!==null&&(Mn(r,t,l),El(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Dn(),l=Ur(a);l.tag=2,r!=null&&(l.callback=r),r=qr(t,l,a),r!==null&&(Mn(r,t,a),El(r,t,a))}};function zy(t,r,a,l,f,m,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,S):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(f,m):!0}function By(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&gf.enqueueReplaceState(r,r.state,null)}function ra(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Fy(t){xu(t)}function Hy(t){console.error(t)}function Gy(t){xu(t)}function Au(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Qy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function yf(t,r,a){return a=Ur(a),a.tag=3,a.payload={element:null},a.callback=function(){Au(t,r)},a}function Ky(t){return t=Ur(t),t.tag=3,t}function $y(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Qy(r,a,l)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Qy(r,a,l),typeof f!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function DT(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&pl(r,a,f,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Ns===null?zf():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Gd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Ff(t,l,f)),!1;case 22:return a.flags|=65536,l===Gd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Ff(t,l,f)),!1}throw Error(i(435,a.tag))}return Ff(t,l,f),zf(),!1}if(Ge)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Ld&&(t=Error(i(422),{cause:l}),ml(Bn(t,a)))):(l!==Ld&&(r=Error(i(423),{cause:l}),ml(Bn(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Bn(l,a),f=yf(t.stateNode,l,f),$d(t,f),vt!==4&&(vt=2)),!1;var m=Error(i(520),{cause:l});if(m=Bn(m,a),Ol===null?Ol=[m]:Ol.push(m),vt!==4&&(vt=2),r===null)return!0;l=Bn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=yf(a.stateNode,l,t),$d(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yr===null||!Yr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ky(f),$y(f,t,a,l),$d(a,f),!1}a=a.return}while(a!==null);return!1}var Yy=Error(i(461)),Ft=!1;function Yt(t,r,a,l){r.child=t===null?Uy(r,null,a,l):eo(r,t.child,a,l)}function Xy(t,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var S={};for(var b in l)b!=="ref"&&(S[b]=l[b])}else S=l;return ta(r),l=Jd(t,r,a,S,m,f),b=ef(),t!==null&&!Ft?(tf(t,r,f),er(t,r,f)):(Ge&&b&&kd(r),r.flags|=1,Yt(t,r,l,f),r.child)}function Wy(t,r,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Md(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,Zy(t,r,m,l,f)):(t=iu(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!xf(t,f)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(S,l)&&t.ref===r.ref)return er(t,r,f)}return r.flags|=1,t=Ks(m,l),t.ref=r.ref,t.return=r,r.child=t}function Zy(t,r,a,l,f){if(t!==null){var m=t.memoizedProps;if(ul(m,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=m,xf(t,f))(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,er(t,r,f)}return vf(t,r,a,l,f)}function Jy(t,r,a){var l=r.pendingProps,f=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(f=r.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return ev(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&uu(r,m!==null?m.cachePool:null),m!==null?Zg(r,m):Xd(),qy(r);else return r.lanes=r.childLanes=536870912,ev(t,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(uu(r,m.cachePool),Zg(r,m),Fr(),r.memoizedState=null):(t!==null&&uu(r,null),Xd(),Fr());return Yt(t,r,f,a),r.child}function ev(t,r,a,l){var f=Hd();return f=f===null?null:{parent:Vt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&uu(r,null),Xd(),qy(r),t!==null&&pl(t,r,l,!0),null}function Nu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function vf(t,r,a,l,f){return ta(r),a=Jd(t,r,a,l,void 0,f),l=ef(),t!==null&&!Ft?(tf(t,r,f),er(t,r,f)):(Ge&&l&&kd(r),r.flags|=1,Yt(t,r,a,f),r.child)}function tv(t,r,a,l,f,m){return ta(r),r.updateQueue=null,a=ey(r,l,a,f),Jg(t),l=ef(),t!==null&&!Ft?(tf(t,r,m),er(t,r,m)):(Ge&&l&&kd(r),r.flags|=1,Yt(t,r,a,m),r.child)}function nv(t,r,a,l,f){if(ta(r),r.stateNode===null){var m=Ha,S=a.contextType;typeof S=="object"&&S!==null&&(m=rn(S)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Qd(r),S=a.contextType,m.context=typeof S=="object"&&S!==null?rn(S):Ha,m.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(pf(r,a,S,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&gf.enqueueReplaceState(m,m.state,null),Tl(r,l,m,f),Sl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var b=r.memoizedProps,M=ra(a,b);m.props=M;var $=m.context,ne=a.contextType;S=Ha,typeof ne=="object"&&ne!==null&&(S=rn(ne));var ae=a.getDerivedStateFromProps;ne=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||$!==S)&&By(r,m,l,S),Lr=!1;var W=r.memoizedState;m.state=W,Tl(r,l,m,f),Sl(),$=r.memoizedState,b||W!==$||Lr?(typeof ae=="function"&&(pf(r,a,ae,l),$=r.memoizedState),(M=Lr||zy(r,a,M,l,W,$,S))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=$),m.props=l,m.state=$,m.context=S,l=M):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Kd(t,r),S=r.memoizedProps,ne=ra(a,S),m.props=ne,ae=r.pendingProps,W=m.context,$=a.contextType,M=Ha,typeof $=="object"&&$!==null&&(M=rn($)),b=a.getDerivedStateFromProps,($=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==ae||W!==M)&&By(r,m,l,M),Lr=!1,W=r.memoizedState,m.state=W,Tl(r,l,m,f),Sl();var Z=r.memoizedState;S!==ae||W!==Z||Lr||t!==null&&t.dependencies!==null&&lu(t.dependencies)?(typeof b=="function"&&(pf(r,a,b,l),Z=r.memoizedState),(ne=Lr||zy(r,a,ne,l,W,Z,M)||t!==null&&t.dependencies!==null&&lu(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,M)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),m.props=l,m.state=Z,m.context=M,l=ne):(typeof m.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,Nu(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=eo(r,t.child,null,f),r.child=eo(r,null,a,f)):Yt(t,r,a,f),r.memoizedState=m.state,t=r.child):t=er(t,r,f),t}function sv(t,r,a,l){return fl(),r.flags|=256,Yt(t,r,a,l),r.child}var _f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ef(t){return{baseLanes:t,cachePool:Hg()}}function Sf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Kn),t}function rv(t,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,S;if((S=m)||(S=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),S&&(f=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ge){if(f?Br(r):Fr(),Ge){var b=yt,M;if(M=b){e:{for(M=b,b=As;M.nodeType!==8;){if(!b){b=null;break e}if(M=us(M.nextSibling),M===null){b=null;break e}}b=M}b!==null?(r.memoizedState={dehydrated:b,treeContext:Xi!==null?{id:$s,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},M=Rn(18,null,null,0),M.stateNode=b,M.return=r,r.child=M,yn=r,yt=null,M=!0):M=!1}M||Ji(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return rm(b)?r.lanes=32:r.lanes=536870912,null;Js(r)}return b=l.children,l=l.fallback,f?(Fr(),f=r.mode,b=Ru({mode:"hidden",children:b},f),l=Yi(l,f,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,f=r.child,f.memoizedState=Ef(a),f.childLanes=Sf(t,S,a),r.memoizedState=_f,l):(Br(r),Tf(r,b))}if(M=t.memoizedState,M!==null&&(b=M.dehydrated,b!==null)){if(m)r.flags&256?(Br(r),r.flags&=-257,r=bf(t,r,a)):r.memoizedState!==null?(Fr(),r.child=t.child,r.flags|=128,r=null):(Fr(),f=l.fallback,b=r.mode,l=Ru({mode:"visible",children:l.children},b),f=Yi(f,b,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,eo(r,t.child,null,a),l=r.child,l.memoizedState=Ef(a),l.childLanes=Sf(t,S,a),r.memoizedState=_f,r=f);else if(Br(r),rm(b)){if(S=b.nextSibling&&b.nextSibling.dataset,S)var $=S.dgst;S=$,l=Error(i(419)),l.stack="",l.digest=S,ml({value:l,source:null,stack:null}),r=bf(t,r,a)}else if(Ft||pl(t,r,a,!1),S=(a&t.childLanes)!==0,Ft||S){if(S=it,S!==null&&(l=a&-a,l=(l&42)!==0?1:Ko(l),l=(l&(S.suspendedLanes|a))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Fa(t,l),Mn(S,t,l),Yy;b.data==="$?"||zf(),r=bf(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,yt=us(b.nextSibling),yn=r,Ge=!0,Zi=null,As=!1,t!==null&&(Hn[Gn++]=$s,Hn[Gn++]=Ys,Hn[Gn++]=Xi,$s=t.id,Ys=t.overflow,Xi=r),r=Tf(r,l.children),r.flags|=4096);return r}return f?(Fr(),f=l.fallback,b=r.mode,M=t.child,$=M.sibling,l=Ks(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,$!==null?f=Ks($,f):(f=Yi(f,b,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,b=t.child.memoizedState,b===null?b=Ef(a):(M=b.cachePool,M!==null?($=Vt._currentValue,M=M.parent!==$?{parent:$,pool:$}:M):M=Hg(),b={baseLanes:b.baseLanes|a,cachePool:M}),f.memoizedState=b,f.childLanes=Sf(t,S,a),r.memoizedState=_f,l):(Br(r),a=t.child,t=a.sibling,a=Ks(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(S=r.deletions,S===null?(r.deletions=[t],r.flags|=16):S.push(t)),r.child=a,r.memoizedState=null,a)}function Tf(t,r){return r=Ru({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ru(t,r){return t=Rn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function bf(t,r,a){return eo(r,t.child,null,a),t=Tf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function iv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),qd(t.return,r,a)}function wf(t,r,a,l,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function av(t,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;if(Yt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iv(t,a,r);else if(t.tag===19)iv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Lt,l),f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&wu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),wf(r,!1,f,a,m);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&wu(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}wf(r,!0,a,null,m);break;case"together":wf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function er(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),$r|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(pl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ks(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ks(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function xf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lu(t)))}function MT(t,r,a){switch(r.tag){case 3:Ke(r,r.stateNode.containerInfo),Vr(r,Vt,t.memoizedState.cache),fl();break;case 27:case 5:Fo(r);break;case 4:Ke(r,r.stateNode.containerInfo);break;case 10:Vr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Br(r),r.flags|=128,null):(a&r.child.childLanes)!==0?rv(t,r,a):(Br(r),t=er(t,r,a),t!==null?t.sibling:null);Br(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(pl(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return av(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,Jy(t,r,a);case 24:Vr(r,Vt,t.memoizedState.cache)}return er(t,r,a)}function ov(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!xf(t,a)&&(r.flags&128)===0)return Ft=!1,MT(t,r,a);Ft=(t.flags&131072)!==0}else Ft=!1,Ge&&(r.flags&1048576)!==0&&Vg(r,ou,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Md(l)?(t=ra(l,t),r.tag=1,r=nv(null,r,l,t,a)):(r.tag=0,r=vf(null,r,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===H){r.tag=11,r=Xy(null,r,l,t,a);break e}else if(f===R){r.tag=14,r=Wy(null,r,l,t,a);break e}}throw r=he(l)||l,Error(i(306,r,""))}}return r;case 0:return vf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ra(l,r.pendingProps),nv(t,r,l,f,a);case 3:e:{if(Ke(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Kd(t,r),Tl(r,l,null,a);var S=r.memoizedState;if(l=S.cache,Vr(r,Vt,l),l!==m.cache&&zd(r,[Vt],a,!0),Sl(),l=S.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=sv(t,r,l,a);break e}else if(l!==f){f=Bn(Error(i(424)),r),ml(f),r=sv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=us(t.firstChild),yn=r,Ge=!0,Zi=null,As=!0,a=Uy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===f){r=er(t,r,a);break e}Yt(t,r,l,a)}r=r.child}return r;case 26:return Nu(t,r),t===null?(a=h_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ge||(a=r.type,t=r.pendingProps,l=Bu(ye.current).createElement(a),l[Tt]=r,l[$t]=t,Wt(l,a,t),bt(l),r.stateNode=l):r.memoizedState=h_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Fo(r),t===null&&Ge&&(l=r.stateNode=l_(r.type,r.pendingProps,ye.current),yn=r,As=!0,f=yt,Zr(r.type)?(im=f,yt=us(l.firstChild)):yt=f),Yt(t,r,r.pendingProps.children,a),Nu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ge&&((f=l=yt)&&(l=ob(l,r.type,r.pendingProps,As),l!==null?(r.stateNode=l,yn=r,yt=us(l.firstChild),As=!1,f=!0):f=!1),f||Ji(r)),Fo(r),f=r.type,m=r.pendingProps,S=t!==null?t.memoizedProps:null,l=m.children,tm(f,m)?l=null:S!==null&&tm(f,S)&&(r.flags|=32),r.memoizedState!==null&&(f=Jd(t,r,xT,null,null,a),Hl._currentValue=f),Nu(t,r),Yt(t,r,l,a),r.child;case 6:return t===null&&Ge&&((t=a=yt)&&(a=lb(a,r.pendingProps,As),a!==null?(r.stateNode=a,yn=r,yt=null,t=!0):t=!1),t||Ji(r)),null;case 13:return rv(t,r,a);case 4:return Ke(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=eo(r,null,l,a):Yt(t,r,l,a),r.child;case 11:return Xy(t,r,r.type,r.pendingProps,a);case 7:return Yt(t,r,r.pendingProps,a),r.child;case 8:return Yt(t,r,r.pendingProps.children,a),r.child;case 12:return Yt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Vr(r,r.type,l.value),Yt(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ta(r),f=rn(f),l=l(f),r.flags|=1,Yt(t,r,l,a),r.child;case 14:return Wy(t,r,r.type,r.pendingProps,a);case 15:return Zy(t,r,r.type,r.pendingProps,a);case 19:return av(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ru(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ks(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Jy(t,r,a);case 24:return ta(r),l=rn(Vt),t===null?(f=Hd(),f===null&&(f=it,m=Bd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},Qd(r),Vr(r,Vt,f)):((t.lanes&a)!==0&&(Kd(t,r),Tl(r,null,null,a),Sl()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Vr(r,Vt,l)):(l=m.cache,Vr(r,Vt,l),l!==f.cache&&zd(r,[Vt],a,!0))),Yt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function tr(t){t.flags|=4}function lv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!g_(r)){if(r=Qn.current,r!==null&&((Be&4194048)===Be?Ns!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==Ns))throw _l=Gd,Gg;t.flags|=8192}}function Cu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?wr():536870912,t.lanes|=r,ro|=r)}function Cl(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function PT(t,r,a){var l=r.pendingProps;switch(Vd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ws(Vt),es(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(dl(r)?tr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qg())),pt(r),null;case 26:return a=r.memoizedState,t===null?(tr(r),a!==null?(pt(r),lv(r,a)):(pt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(tr(r),pt(r),lv(r,a)):(pt(r),r.flags&=-16777217):(t.memoizedProps!==l&&tr(r),pt(r),r.flags&=-16777217),null;case 27:ba(r),a=ye.current;var f=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&tr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}t=ce.current,dl(r)?Lg(r):(t=l_(f,l,a),r.stateNode=t,tr(r))}return pt(r),null;case 5:if(ba(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&tr(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}if(t=ce.current,dl(r))Lg(r);else{switch(f=Bu(ye.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[Tt]=r,t[$t]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=t;e:switch(Wt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&tr(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&tr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=ye.current,dl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=yn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Tt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||t_(t.nodeValue,a)),t||Ji(r)}else t=Bu(t).createTextNode(l),t[Tt]=r,r.stateNode=t}return pt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=dl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Tt]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),f=!1}else f=qg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Js(r),r):(Js(r),null)}if(Js(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Cu(r,r.updateQueue),pt(r),null;case 4:return es(),t===null&&Xf(r.stateNode.containerInfo),pt(r),null;case 10:return Ws(r.type),pt(r),null;case 19:if(fe(Lt),f=r.memoizedState,f===null)return pt(r),null;if(l=(r.flags&128)!==0,m=f.rendering,m===null)if(l)Cl(f,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=wu(t),m!==null){for(r.flags|=128,Cl(f,!1),t=m.updateQueue,r.updateQueue=t,Cu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)kg(a,t),a=a.sibling;return ee(Lt,Lt.current&1|2),r.child}t=t.sibling}f.tail!==null&&vn()>Du&&(r.flags|=128,l=!0,Cl(f,!1),r.lanes=4194304)}else{if(!l)if(t=wu(m),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Cu(r,t),Cl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ge)return pt(r),null}else 2*vn()-f.renderingStartTime>Du&&a!==536870912&&(r.flags|=128,l=!0,Cl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(t=f.last,t!==null?t.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=vn(),r.sibling=null,t=Lt.current,ee(Lt,l?t&1|2:t&1),r):(pt(r),null);case 22:case 23:return Js(r),Wd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Cu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&fe(na),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ws(Vt),pt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function OT(t,r){switch(Vd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ws(Vt),es(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return ba(r),null;case 13:if(Js(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));fl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return fe(Lt),null;case 4:return es(),null;case 10:return Ws(r.type),null;case 22:case 23:return Js(r),Wd(),t!==null&&fe(na),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ws(Vt),null;case 25:return null;default:return null}}function cv(t,r){switch(Vd(r),r.tag){case 3:Ws(Vt),es();break;case 26:case 27:case 5:ba(r);break;case 4:es();break;case 13:Js(r);break;case 19:fe(Lt);break;case 10:Ws(r.type);break;case 22:case 23:Js(r),Wd(),t!==null&&fe(na);break;case 24:Ws(Vt)}}function Il(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,S=a.inst;l=m(),S.destroy=l}a=a.next}while(a!==f)}}catch(b){st(r,r.return,b)}}function Hr(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var S=l.inst,b=S.destroy;if(b!==void 0){S.destroy=void 0,f=r;var M=a,$=b;try{$()}catch(ne){st(f,M,ne)}}}l=l.next}while(l!==m)}}catch(ne){st(r,r.return,ne)}}function uv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Wg(r,a)}catch(l){st(t,t.return,l)}}}function hv(t,r,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,r,l)}}function jl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){st(t,r,f)}}function Rs(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){st(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(t,r,f)}else a.current=null}function dv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){st(t,t.return,f)}}function Af(t,r,a){try{var l=t.stateNode;nb(l,t.type,a,r),l[$t]=r}catch(f){st(t,t.return,f)}}function fv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zr(t.type)||t.tag===4}function Nf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=zu));else if(l!==4&&(l===27&&Zr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Rf(t,r,a),t=t.sibling;t!==null;)Rf(t,r,a),t=t.sibling}function Iu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Zr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,r,a),t=t.sibling;t!==null;)Iu(t,r,a),t=t.sibling}function mv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Wt(r,l,a),r[Tt]=t,r[$t]=a}catch(m){st(t,t.return,m)}}var nr=!1,At=!1,Cf=!1,pv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function kT(t,r){if(t=t.containerInfo,Jf=$u,t=Ag(t),Ad(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,b=-1,M=-1,$=0,ne=0,ae=t,W=null;t:for(;;){for(var Z;ae!==a||f!==0&&ae.nodeType!==3||(b=S+f),ae!==m||l!==0&&ae.nodeType!==3||(M=S+l),ae.nodeType===3&&(S+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)W=ae,ae=Z;for(;;){if(ae===t)break t;if(W===a&&++$===f&&(b=S),W===m&&++ne===l&&(M=S),(Z=ae.nextSibling)!==null)break;ae=W,W=ae.parentNode}ae=Z}a=b===-1||M===-1?null:{start:b,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(em={focusedElem:t,selectionRange:a},$u=!1,Ht=r;Ht!==null;)if(r=Ht,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ht=t;else for(;Ht!==null;){switch(r=Ht,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ne=ra(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){st(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)sm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Ht=t;break}Ht=r.return}}function gv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Gr(t,a),l&4&&Il(5,a);break;case 1:if(Gr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(S){st(a,a.return,S)}else{var f=ra(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(S){st(a,a.return,S)}}l&64&&uv(a),l&512&&jl(a,a.return);break;case 3:if(Gr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wg(t,r)}catch(S){st(a,a.return,S)}}break;case 27:r===null&&l&4&&mv(a);case 26:case 5:Gr(t,a),r===null&&l&4&&dv(a),l&512&&jl(a,a.return);break;case 12:Gr(t,a);break;case 13:Gr(t,a),l&4&&_v(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=GT.bind(null,a),cb(t,a))));break;case 22:if(l=a.memoizedState!==null||nr,!l){r=r!==null&&r.memoizedState!==null||At,f=nr;var m=At;nr=l,(At=r)&&!m?Qr(t,a,(a.subtreeFlags&8772)!==0):Gr(t,a),nr=f,At=m}break;case 30:break;default:Gr(t,a)}}function yv(t){var r=t.alternate;r!==null&&(t.alternate=null,yv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ra(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,En=!1;function sr(t,r,a){for(a=a.child;a!==null;)vv(t,r,a),a=a.sibling}function vv(t,r,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Sr,a)}catch{}switch(a.tag){case 26:At||Rs(a,r),sr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||Rs(a,r);var l=dt,f=En;Zr(a.type)&&(dt=a.stateNode,En=!1),sr(t,r,a),ql(a.stateNode),dt=l,En=f;break;case 5:At||Rs(a,r);case 6:if(l=dt,f=En,dt=null,sr(t,r,a),dt=l,En=f,dt!==null)if(En)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(m){st(a,r,m)}else try{dt.removeChild(a.stateNode)}catch(m){st(a,r,m)}break;case 18:dt!==null&&(En?(t=dt,a_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),$l(t)):a_(dt,a.stateNode));break;case 4:l=dt,f=En,dt=a.stateNode.containerInfo,En=!0,sr(t,r,a),dt=l,En=f;break;case 0:case 11:case 14:case 15:At||Hr(2,a,r),At||Hr(4,a,r),sr(t,r,a);break;case 1:At||(Rs(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&hv(a,r,l)),sr(t,r,a);break;case 21:sr(t,r,a);break;case 22:At=(l=At)||a.memoizedState!==null,sr(t,r,a),At=l;break;default:sr(t,r,a)}}function _v(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(a){st(r,r.return,a)}}function VT(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new pv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new pv),r;default:throw Error(i(435,t.tag))}}function If(t,r){var a=VT(t);r.forEach(function(l){var f=QT.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function Cn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,S=r,b=S;e:for(;b!==null;){switch(b.tag){case 27:if(Zr(b.type)){dt=b.stateNode,En=!1;break e}break;case 5:dt=b.stateNode,En=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,En=!0;break e}b=b.return}if(dt===null)throw Error(i(160));vv(m,S,f),dt=null,En=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ev(r,t),r=r.sibling}var cs=null;function Ev(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(r,t),In(t),l&4&&(Hr(3,t,t.return),Il(3,t),Hr(5,t,t.return));break;case 1:Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),l&64&&nr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=cs;if(Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Nr]||m[Tt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Wt(m,l,a),m[Tt]=t,bt(m),l=m;break e;case"link":var S=m_("link","href",f).get(l+(a.href||""));if(S){for(var b=0;b<S.length;b++)if(m=S[b],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(b,1);break t}}m=f.createElement(l),Wt(m,l,a),f.head.appendChild(m);break;case"meta":if(S=m_("meta","content",f).get(l+(a.content||""))){for(b=0;b<S.length;b++)if(m=S[b],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(b,1);break t}}m=f.createElement(l),Wt(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[Tt]=t,bt(m),l=m}t.stateNode=l}else p_(f,t.type,t.stateNode);else t.stateNode=f_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?p_(f,t.type,t.stateNode):f_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Af(t,t.memoizedProps,a.memoizedProps)}break;case 27:Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),a!==null&&l&4&&Af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Cn(r,t),In(t),l&512&&(At||a===null||Rs(a,a.return)),t.flags&32){f=t.stateNode;try{qn(f,"")}catch(Z){st(t,t.return,Z)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Af(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Cf=!0);break;case 6:if(Cn(r,t),In(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Z){st(t,t.return,Z)}}break;case 3:if(Gu=null,f=cs,cs=Fu(r.containerInfo),Cn(r,t),cs=f,In(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{$l(r.containerInfo)}catch(Z){st(t,t.return,Z)}Cf&&(Cf=!1,Sv(t));break;case 4:l=cs,cs=Fu(t.stateNode.containerInfo),Cn(r,t),In(t),cs=l;break;case 12:Cn(r,t),In(t);break;case 13:Cn(r,t),In(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kf=vn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,If(t,l)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,$=nr,ne=At;if(nr=$||f,At=ne||M,Cn(r,t),At=ne,nr=$,In(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||M||nr||At||ia(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(m=M.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{b=M.stateNode;var ae=M.memoizedProps.style,W=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;b.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){st(M,M.return,Z)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(Z){st(M,M.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,If(t,a))));break;case 19:Cn(r,t),In(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,If(t,l)));break;case 30:break;case 21:break;default:Cn(r,t),In(t)}}function In(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(fv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=Nf(t);Iu(t,m,f);break;case 5:var S=a.stateNode;a.flags&32&&(qn(S,""),a.flags&=-33);var b=Nf(t);Iu(t,b,S);break;case 3:case 4:var M=a.stateNode.containerInfo,$=Nf(t);Rf(t,$,M);break;default:throw Error(i(161))}}catch(ne){st(t,t.return,ne)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Sv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Sv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Gr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)gv(t,r.alternate,r),r=r.sibling}function ia(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Hr(4,r,r.return),ia(r);break;case 1:Rs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&hv(r,r.return,a),ia(r);break;case 27:ql(r.stateNode);case 26:case 5:Rs(r,r.return),ia(r);break;case 22:r.memoizedState===null&&ia(r);break;case 30:ia(r);break;default:ia(r)}t=t.sibling}}function Qr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,S=m.flags;switch(m.tag){case 0:case 11:case 15:Qr(f,m,a),Il(4,m);break;case 1:if(Qr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){st(l,l.return,$)}if(l=m,f=l.updateQueue,f!==null){var b=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Xg(M[f],b)}catch($){st(l,l.return,$)}}a&&S&64&&uv(m),jl(m,m.return);break;case 27:mv(m);case 26:case 5:Qr(f,m,a),a&&l===null&&S&4&&dv(m),jl(m,m.return);break;case 12:Qr(f,m,a);break;case 13:Qr(f,m,a),a&&S&4&&_v(f,m);break;case 22:m.memoizedState===null&&Qr(f,m,a),jl(m,m.return);break;case 30:break;default:Qr(f,m,a)}r=r.sibling}}function jf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gl(a))}function Df(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gl(t))}function Cs(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Tv(t,r,a,l),r=r.sibling}function Tv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Cs(t,r,a,l),f&2048&&Il(9,r);break;case 1:Cs(t,r,a,l);break;case 3:Cs(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gl(t)));break;case 12:if(f&2048){Cs(t,r,a,l),t=r.stateNode;try{var m=r.memoizedProps,S=m.id,b=m.onPostCommit;typeof b=="function"&&b(S,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){st(r,r.return,M)}}else Cs(t,r,a,l);break;case 13:Cs(t,r,a,l);break;case 23:break;case 22:m=r.stateNode,S=r.alternate,r.memoizedState!==null?m._visibility&2?Cs(t,r,a,l):Dl(t,r):m._visibility&2?Cs(t,r,a,l):(m._visibility|=2,to(t,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&jf(S,r);break;case 24:Cs(t,r,a,l),f&2048&&Df(r.alternate,r);break;default:Cs(t,r,a,l)}}function to(t,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,S=r,b=a,M=l,$=S.flags;switch(S.tag){case 0:case 11:case 15:to(m,S,b,M,f),Il(8,S);break;case 23:break;case 22:var ne=S.stateNode;S.memoizedState!==null?ne._visibility&2?to(m,S,b,M,f):Dl(m,S):(ne._visibility|=2,to(m,S,b,M,f)),f&&$&2048&&jf(S.alternate,S);break;case 24:to(m,S,b,M,f),f&&$&2048&&Df(S.alternate,S);break;default:to(m,S,b,M,f)}r=r.sibling}}function Dl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Dl(a,l),f&2048&&jf(l.alternate,l);break;case 24:Dl(a,l),f&2048&&Df(l.alternate,l);break;default:Dl(a,l)}r=r.sibling}}var Ml=8192;function no(t){if(t.subtreeFlags&Ml)for(t=t.child;t!==null;)bv(t),t=t.sibling}function bv(t){switch(t.tag){case 26:no(t),t.flags&Ml&&t.memoizedState!==null&&Tb(cs,t.memoizedState,t.memoizedProps);break;case 5:no(t);break;case 3:case 4:var r=cs;cs=Fu(t.stateNode.containerInfo),no(t),cs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ml,Ml=16777216,no(t),Ml=r):no(t));break;default:no(t)}}function wv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Pl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ht=l,Av(l,t)}wv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 0:case 11:case 15:Pl(t),t.flags&2048&&Hr(9,t,t.return);break;case 3:Pl(t);break;case 12:Pl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ju(t)):Pl(t);break;default:Pl(t)}}function ju(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ht=l,Av(l,t)}wv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Hr(8,r,r.return),ju(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ju(r));break;default:ju(r)}t=t.sibling}}function Av(t,r){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Hr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=t;Ht!==null;){l=Ht;var f=l.sibling,m=l.return;if(yv(l),l===a){Ht=null;break e}if(f!==null){f.return=m,Ht=f;break e}Ht=m}}}var LT={getCacheForType:function(t){var r=rn(Vt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},UT=typeof WeakMap=="function"?WeakMap:Map,Xe=0,it=null,Ve=null,Be=0,We=0,jn=null,Kr=!1,so=!1,Mf=!1,rr=0,vt=0,$r=0,aa=0,Pf=0,Kn=0,ro=0,Ol=null,Sn=null,Of=!1,kf=0,Du=1/0,Mu=null,Yr=null,Xt=0,Xr=null,io=null,ao=0,Vf=0,Lf=null,Nv=null,kl=0,Uf=null;function Dn(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(te.T!==null){var t=Ka;return t!==0?t:Qf()}return qs()}function Rv(){Kn===0&&(Kn=(Be&536870912)===0||Ge?Qo():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Kn}function Mn(t,r,a){(t===it&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(oo(t,0),Wr(t,Be,Kn,!1)),St(t,a),((Xe&2)===0||t!==it)&&(t===it&&((Xe&2)===0&&(aa|=a),vt===4&&Wr(t,Be,Kn,!1)),Is(t))}function Cv(t,r,a){if((Xe&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||br(t,r),f=l?BT(t,r):Bf(t,r,!0),m=l;do{if(f===0){so&&!l&&Wr(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!qT(a)){f=Bf(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var b=t;f=Ol;var M=b.current.memoizedState.isDehydrated;if(M&&(oo(b,S).flags|=256),S=Bf(b,S,!1),S!==2){if(Mf&&!M){b.errorRecoveryDisabledLanes|=m,aa|=m,f=4;break e}m=Sn,Sn=f,m!==null&&(Sn===null?Sn=m:Sn.push.apply(Sn,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){oo(t,0),Wr(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Wr(l,r,Kn,!Kr);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=kf+300-vn(),10<f)){if(Wr(l,r,Kn,!Kr),Ln(l,0,!0)!==0)break e;l.timeoutHandle=r_(Iv.bind(null,l,a,Sn,Mu,Of,r,Kn,aa,ro,Kr,m,2,-0,0),f);break e}Iv(l,a,Sn,Mu,Of,r,Kn,aa,ro,Kr,m,0,-0,0)}}break}while(!0);Is(t)}function Iv(t,r,a,l,f,m,S,b,M,$,ne,ae,W,Z){if(t.timeoutHandle=-1,ae=r.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Fl={stylesheets:null,count:0,unsuspend:Sb},bv(r),ae=bb(),ae!==null)){t.cancelPendingCommit=ae(Vv.bind(null,t,r,m,a,l,f,S,b,M,ne,1,W,Z)),Wr(t,m,S,!$);return}Vv(t,r,m,a,l,f,S,b,M)}function qT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wr(t,r,a,l){r&=~Pf,r&=~aa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-fn(f),S=1<<m;l[m]=-1,f&=~S}a!==0&&xr(t,a,r)}function Pu(){return(Xe&6)===0?(Vl(0),!1):!0}function qf(){if(Ve!==null){if(We===0)var t=Ve.return;else t=Ve,Xs=ea=null,nf(t),Ja=null,Nl=0,t=Ve;for(;t!==null;)cv(t.alternate,t),t=t.return;Ve=null}}function oo(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,rb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),qf(),it=t,Ve=a=Ks(t.current,null),Be=r,We=0,jn=null,Kr=!1,so=br(t,r),Mf=!1,ro=Kn=Pf=aa=$r=vt=0,Sn=Ol=null,Of=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-fn(l),m=1<<f;r|=t[f],l&=~m}return rr=r,nu(),a}function jv(t,r){Me=null,te.H=Su,r===vl||r===hu?(r=$g(),We=3):r===Gg?(r=$g(),We=4):We=r===Yy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jn=r,Ve===null&&(vt=1,Au(t,Bn(r,t.current)))}function Dv(){var t=te.H;return te.H=Su,t===null?Su:t}function Mv(){var t=te.A;return te.A=LT,t}function zf(){vt=4,Kr||(Be&4194048)!==Be&&Qn.current!==null||(so=!0),($r&134217727)===0&&(aa&134217727)===0||it===null||Wr(it,Be,Kn,!1)}function Bf(t,r,a){var l=Xe;Xe|=2;var f=Dv(),m=Mv();(it!==t||Be!==r)&&(Mu=null,oo(t,r)),r=!1;var S=vt;e:do try{if(We!==0&&Ve!==null){var b=Ve,M=jn;switch(We){case 8:qf(),S=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var $=We;if(We=0,jn=null,lo(t,b,M,$),a&&so){S=0;break e}break;default:$=We,We=0,jn=null,lo(t,b,M,$)}}zT(),S=vt;break}catch(ne){jv(t,ne)}while(!0);return r&&t.shellSuspendCounter++,Xs=ea=null,Xe=l,te.H=f,te.A=m,Ve===null&&(it=null,Be=0,nu()),S}function zT(){for(;Ve!==null;)Pv(Ve)}function BT(t,r){var a=Xe;Xe|=2;var l=Dv(),f=Mv();it!==t||Be!==r?(Mu=null,Du=vn()+500,oo(t,r)):so=br(t,r);e:do try{if(We!==0&&Ve!==null){r=Ve;var m=jn;t:switch(We){case 1:We=0,jn=null,lo(t,r,m,1);break;case 2:case 9:if(Qg(m)){We=0,jn=null,Ov(r);break}r=function(){We!==2&&We!==9||it!==t||(We=7),Is(t)},m.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Qg(m)?(We=0,jn=null,Ov(r)):(We=0,jn=null,lo(t,r,m,7));break;case 5:var S=null;switch(Ve.tag){case 26:S=Ve.memoizedState;case 5:case 27:var b=Ve;if(!S||g_(S)){We=0,jn=null;var M=b.sibling;if(M!==null)Ve=M;else{var $=b.return;$!==null?(Ve=$,Ou($)):Ve=null}break t}}We=0,jn=null,lo(t,r,m,5);break;case 6:We=0,jn=null,lo(t,r,m,6);break;case 8:qf(),vt=6;break e;default:throw Error(i(462))}}FT();break}catch(ne){jv(t,ne)}while(!0);return Xs=ea=null,te.H=l,te.A=f,Xe=a,Ve!==null?0:(it=null,Be=0,nu(),vt)}function FT(){for(;Ve!==null&&!pd();)Pv(Ve)}function Pv(t){var r=ov(t.alternate,t,rr);t.memoizedProps=t.pendingProps,r===null?Ou(t):Ve=r}function Ov(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=tv(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=tv(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:nf(r);default:cv(a,r),r=Ve=kg(r,rr),r=ov(a,r,rr)}t.memoizedProps=t.pendingProps,r===null?Ou(t):Ve=r}function lo(t,r,a,l){Xs=ea=null,nf(r),Ja=null,Nl=0;var f=r.return;try{if(DT(t,f,r,a,Be)){vt=1,Au(t,Bn(a,t.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;vt=1,Au(t,Bn(a,t.current)),Ve=null;return}r.flags&32768?(Ge||l===1?t=!0:so||(Be&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),kv(r,t)):Ou(r)}function Ou(t){var r=t;do{if((r.flags&32768)!==0){kv(r,Kr);return}t=r.return;var a=PT(r.alternate,r,rr);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);vt===0&&(vt=5)}function kv(t,r){do{var a=OT(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);vt=6,Ve=null}function Vv(t,r,a,l,f,m,S,b,M){t.cancelPendingCommit=null;do ku();while(Xt!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=jd,Uc(t,a,m,S,b,M),t===it&&(Ve=it=null,Be=0),io=r,Xr=t,ao=a,Vf=m,Lf=f,Nv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,KT(Us,function(){return Bv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,f=ue.p,ue.p=2,S=Xe,Xe|=4;try{kT(t,r,a)}finally{Xe=S,ue.p=f,te.T=l}}Xt=1,Lv(),Uv(),qv()}}function Lv(){if(Xt===1){Xt=0;var t=Xr,r=io,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=ue.p;ue.p=2;var f=Xe;Xe|=4;try{Ev(r,t);var m=em,S=Ag(t.containerInfo),b=m.focusedElem,M=m.selectionRange;if(S!==b&&b&&b.ownerDocument&&xg(b.ownerDocument.documentElement,b)){if(M!==null&&Ad(b)){var $=M.start,ne=M.end;if(ne===void 0&&(ne=$),"selectionStart"in b)b.selectionStart=$,b.selectionEnd=Math.min(ne,b.value.length);else{var ae=b.ownerDocument||document,W=ae&&ae.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ne=b.textContent.length,be=Math.min(M.start,Ne),tt=M.end===void 0?be:Math.min(M.end,Ne);!Z.extend&&be>tt&&(S=tt,tt=be,be=S);var z=wg(b,be),L=wg(b,tt);if(z&&L&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var G=ae.createRange();G.setStart(z.node,z.offset),Z.removeAllRanges(),be>tt?(Z.addRange(G),Z.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),Z.addRange(G))}}}}for(ae=[],Z=b;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ae.length;b++){var se=ae[b];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}$u=!!Jf,em=Jf=null}finally{Xe=f,ue.p=l,te.T=a}}t.current=r,Xt=2}}function Uv(){if(Xt===2){Xt=0;var t=Xr,r=io,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=ue.p;ue.p=2;var f=Xe;Xe|=4;try{gv(t,r.alternate,r)}finally{Xe=f,ue.p=l,te.T=a}}Xt=3}}function qv(){if(Xt===4||Xt===3){Xt=0,Ho();var t=Xr,r=io,a=ao,l=Nv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,io=Xr=null,zv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Yr=null),$o(a),r=r.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Sr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=te.T,f=ue.p,ue.p=2,te.T=null;try{for(var m=t.onRecoverableError,S=0;S<l.length;S++){var b=l[S];m(b.value,{componentStack:b.stack})}}finally{te.T=r,ue.p=f}}(ao&3)!==0&&ku(),Is(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===Uf?kl++:(kl=0,Uf=t):kl=0,Vl(0)}}function zv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gl(r)))}function ku(t){return Lv(),Uv(),qv(),Bv()}function Bv(){if(Xt!==5)return!1;var t=Xr,r=Vf;Vf=0;var a=$o(ao),l=te.T,f=ue.p;try{ue.p=32>a?32:a,te.T=null,a=Lf,Lf=null;var m=Xr,S=ao;if(Xt=0,io=Xr=null,ao=0,(Xe&6)!==0)throw Error(i(331));var b=Xe;if(Xe|=4,xv(m.current),Tv(m,m.current,S,a),Xe=b,Vl(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Sr,m)}catch{}return!0}finally{ue.p=f,te.T=l,zv(t,r)}}function Fv(t,r,a){r=Bn(a,r),r=yf(t.stateNode,r,2),t=qr(t,r,2),t!==null&&(St(t,2),Is(t))}function st(t,r,a){if(t.tag===3)Fv(t,t,a);else for(;r!==null;){if(r.tag===3){Fv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yr===null||!Yr.has(l))){t=Bn(a,t),a=Ky(2),l=qr(r,a,2),l!==null&&($y(a,l,r,t),St(l,2),Is(l));break}}r=r.return}}function Ff(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new UT;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Mf=!0,f.add(a),t=HT.bind(null,t,r,a),r.then(t,t))}function HT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Be&a)===a&&(vt===4||vt===3&&(Be&62914560)===Be&&300>vn()-kf?(Xe&2)===0&&oo(t,0):Pf|=a,ro===Be&&(ro=0)),Is(t)}function Hv(t,r){r===0&&(r=wr()),t=Fa(t,r),t!==null&&(St(t,r),Is(t))}function GT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Hv(t,a)}function QT(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Hv(t,a)}function KT(t,r){return xi(t,r)}var Vu=null,co=null,Hf=!1,Lu=!1,Gf=!1,oa=0;function Is(t){t!==co&&t.next===null&&(co===null?Vu=co=t:co=co.next=t),Lu=!0,Hf||(Hf=!0,YT())}function Vl(t,r){if(!Gf&&Lu){Gf=!0;do for(var a=!1,l=Vu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var S=l.suspendedLanes,b=l.pingedLanes;m=(1<<31-fn(42|t)+1)-1,m&=f&~(S&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,$v(l,m))}else m=Be,m=Ln(l,l===it?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||br(l,m)||(a=!0,$v(l,m));l=l.next}while(a);Gf=!1}}function $T(){Gv()}function Gv(){Lu=Hf=!1;var t=0;oa!==0&&(sb()&&(t=oa),oa=0);for(var r=vn(),a=null,l=Vu;l!==null;){var f=l.next,m=Qv(l,r);m===0?(l.next=null,a===null?Vu=f:a.next=f,f===null&&(co=a)):(a=l,(t!==0||(m&3)!==0)&&(Lu=!0)),l=f}Vl(t)}function Qv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var S=31-fn(m),b=1<<S,M=f[S];M===-1?((b&a)===0||(b&l)!==0)&&(f[S]=Aa(b,r)):M<=r&&(t.expiredLanes|=b),m&=~b}if(r=it,a=Be,a=Ln(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&xa(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||br(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&xa(l),$o(a)){case 2:case 8:a=zt;break;case 32:a=Us;break;case 268435456:a=Go;break;default:a=Us}return l=Kv.bind(null,t),a=xi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&xa(l),t.callbackPriority=2,t.callbackNode=null,2}function Kv(t,r){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=Be;return l=Ln(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Cv(t,l,r),Qv(t,vn()),t.callbackNode!=null&&t.callbackNode===a?Kv.bind(null,t):null)}function $v(t,r){if(ku())return null;Cv(t,r,!0)}function YT(){ib(function(){(Xe&6)!==0?xi(Ot,$T):Gv()})}function Qf(){return oa===0&&(oa=Qo()),oa}function Yv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rs(""+t)}function Xv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function XT(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=Yv((f[$t]||null).action),S=l.submitter;S&&(r=(r=S[$t]||null)?Yv(r.formAction):S.getAttribute("formAction"),r!==null&&(m=r,S=null));var b=new qi("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(oa!==0){var M=S?Xv(f,S):new FormData(f);df(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(b.preventDefault(),M=S?Xv(f,S):new FormData(f),df(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Kf=0;Kf<Id.length;Kf++){var $f=Id[Kf],WT=$f.toLowerCase(),ZT=$f[0].toUpperCase()+$f.slice(1);ls(WT,"on"+ZT)}ls(Cg,"onAnimationEnd"),ls(Ig,"onAnimationIteration"),ls(jg,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(pT,"onTransitionRun"),ls(gT,"onTransitionStart"),ls(yT,"onTransitionCancel"),ls(Dg,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function Wv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var S=l.length-1;0<=S;S--){var b=l[S],M=b.instance,$=b.currentTarget;if(b=b.listener,M!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=$;try{m(f)}catch(ne){xu(ne)}f.currentTarget=null,m=M}else for(S=0;S<l.length;S++){if(b=l[S],M=b.instance,$=b.currentTarget,b=b.listener,M!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=$;try{m(f)}catch(ne){xu(ne)}f.currentTarget=null,m=M}}}}function Le(t,r){var a=r[Ni];a===void 0&&(a=r[Ni]=new Set);var l=t+"__bubble";a.has(l)||(Zv(r,t,2,!1),a.add(l))}function Yf(t,r,a){var l=0;r&&(l|=4),Zv(a,t,l,r)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[Uu]){t[Uu]=!0,qc.forEach(function(a){a!=="selectionchange"&&(JT.has(a)||Yf(a,!1,t),Yf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Uu]||(r[Uu]=!0,Yf("selectionchange",!1,r))}}function Zv(t,r,a,l){switch(T_(r)){case 2:var f=Ab;break;case 8:f=Nb;break;default:f=um}a=f.bind(null,r,a,t),f=void 0,!Gs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Wf(t,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var b=l.stateNode.containerInfo;if(b===f)break;if(S===4)for(S=l.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;b!==null;){if(S=_s(b),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){l=m=S;continue e}b=b.parentNode}}l=l.return}Vi(function(){var $=m,ne=tl(a),ae=[];e:{var W=Mg.get(t);if(W!==void 0){var Z=qi,Ne=t;switch(t){case"keypress":if(Li(a)===0)break e;case"keydown":case"keyup":Z=Ua;break;case"focusin":Ne="focus",Z=ka;break;case"focusout":Ne="blur",Z=ka;break;case"beforeblur":case"afterblur":Z=ka;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Kc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=kr;break;case Cg:case Ig:case jg:Z=sl;break;case Dg:Z=v;break;case"scroll":case"scrollend":Z=Bi;break;case"wheel":Z=A;break;case"copy":case"cut":case"paste":Z=Yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=al;break;case"toggle":case"beforetoggle":Z=J}var be=(r&4)!==0,tt=!be&&(t==="scroll"||t==="scrollend"),z=be?W!==null?W+"Capture":null:W;be=[];for(var L=$,G;L!==null;){var se=L;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||z===null||(se=Pr(L,z),se!=null&&be.push(Ul(L,se,G))),tt)break;L=L.return}0<be.length&&(W=new Z(W,Ne,null,a,ne),ae.push({event:W,listeners:be}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&a!==el&&(Ne=a.relatedTarget||a.fromElement)&&(_s(Ne)||Ne[zs]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ne=a.relatedTarget||a.toElement,Z=$,Ne=Ne?_s(Ne):null,Ne!==null&&(tt=u(Ne),be=Ne.tag,Ne!==tt||be!==5&&be!==27&&be!==6)&&(Ne=null)):(Z=null,Ne=$),Z!==Ne)){if(be=Gi,se="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(be=al,se="onPointerLeave",z="onPointerEnter",L="pointer"),tt=Z==null?W:Rr(Z),G=Ne==null?W:Rr(Ne),W=new be(se,L+"leave",Z,a,ne),W.target=tt,W.relatedTarget=G,se=null,_s(ne)===$&&(be=new be(z,L+"enter",Ne,a,ne),be.target=G,be.relatedTarget=tt,se=be),tt=se,Z&&Ne)t:{for(be=Z,z=Ne,L=0,G=be;G;G=uo(G))L++;for(G=0,se=z;se;se=uo(se))G++;for(;0<L-G;)be=uo(be),L--;for(;0<G-L;)z=uo(z),G--;for(;L--;){if(be===z||z!==null&&be===z.alternate)break t;be=uo(be),z=uo(z)}be=null}else be=null;Z!==null&&Jv(ae,W,Z,be,!1),Ne!==null&&tt!==null&&Jv(ae,tt,Ne,be,!0)}}e:{if(W=$?Rr($):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var ve=vg;else if(gg(W))if(_g)ve=dT;else{ve=uT;var Oe=cT}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?$&&Ma($.elementType)&&(ve=vg):ve=hT;if(ve&&(ve=ve(t,$))){yg(ae,ve,a,ne);break e}Oe&&Oe(t,W,$),t==="focusout"&&$&&W.type==="number"&&$.memoizedProps.value!=null&&Wo(W,"number",W.value)}switch(Oe=$?Rr($):window,t){case"focusin":(gg(Oe)||Oe.contentEditable==="true")&&(qa=Oe,Nd=$,hl=null);break;case"focusout":hl=Nd=qa=null;break;case"mousedown":Rd=!0;break;case"contextmenu":case"mouseup":case"dragend":Rd=!1,Ng(ae,a,ne);break;case"selectionchange":if(mT)break;case"keydown":case"keyup":Ng(ae,a,ne)}var Se;if(Ce)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else os?is(t,a)&&(we="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(wt&&a.locale!=="ko"&&(os||we!=="onCompositionStart"?we==="onCompositionEnd"&&os&&(Se=Qc()):(zn=ne,rt="value"in zn?zn.value:zn.textContent,os=!0)),Oe=qu($,we),0<Oe.length&&(we=new il(we,t,null,a,ne),ae.push({event:we,listeners:Oe}),Se?we.data=Se:(Se=as(a),Se!==null&&(we.data=Se)))),(Se=Ye?ol(t,a):aT(t,a))&&(we=qu($,"onBeforeInput"),0<we.length&&(Oe=new il("onBeforeInput","beforeinput",null,a,ne),ae.push({event:Oe,listeners:we}),Oe.data=Se)),XT(ae,t,$,a,ne)}Wv(ae,r)})}function Ul(t,r,a){return{instance:t,listener:r,currentTarget:a}}function qu(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Pr(t,a),f!=null&&l.unshift(Ul(t,f,m)),f=Pr(t,r),f!=null&&l.push(Ul(t,f,m))),t.tag===3)return l;t=t.return}return[]}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jv(t,r,a,l,f){for(var m=r._reactName,S=[];a!==null&&a!==l;){var b=a,M=b.alternate,$=b.stateNode;if(b=b.tag,M!==null&&M===l)break;b!==5&&b!==26&&b!==27||$===null||(M=$,f?($=Pr(a,m),$!=null&&S.unshift(Ul(a,$,M))):f||($=Pr(a,m),$!=null&&S.push(Ul(a,$,M)))),a=a.return}S.length!==0&&t.push({event:r,listeners:S})}var eb=/\r\n?/g,tb=/\u0000|\uFFFD/g;function e_(t){return(typeof t=="string"?t:""+t).replace(eb,`
`).replace(tb,"")}function t_(t,r){return r=e_(r),e_(t)===r}function zu(){}function et(t,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||qn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&qn(t,""+l);break;case"className":Di(t,"class",l);break;case"tabIndex":Di(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(t,a,l);break;case"style":Jo(t,l,m);break;case"data":if(r!=="object"){Di(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=rs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&et(t,r,"name",f.name,f,null),et(t,r,"formEncType",f.formEncType,f,null),et(t,r,"formMethod",f.formMethod,f,null),et(t,r,"formTarget",f.formTarget,f,null)):(et(t,r,"encType",f.encType,f,null),et(t,r,"method",f.method,f,null),et(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=rs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=zu);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=rs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),ji(t,"popover",l);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ji(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fc.get(a)||a,ji(t,a,l))}}function Zf(t,r,a,l,f,m){switch(a){case"style":Jo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?qn(t,l):(typeof l=="number"||typeof l=="bigint")&&qn(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ci.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=t[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ji(t,a,l)}}}function Wt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,m,S,a,null)}}f&&et(t,r,"srcSet",a.srcSet,a,null),l&&et(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var b=m=S=f=null,M=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":f=ne;break;case"type":S=ne;break;case"checked":M=ne;break;case"defaultChecked":$=ne;break;case"value":m=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:et(t,r,l,ne,a,null)}}Xo(t,m,b,M,$,S,f,!1),jr(t);return;case"select":Le("invalid",t),l=S=m=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":S=b;break;case"multiple":l=b;default:et(t,r,f,b,a,null)}r=m,a=S,t.multiple=!!l,r!=null?Dr(t,!!l,r,!1):a!=null&&Dr(t,!!l,a,!0);return;case"textarea":Le("invalid",t),m=f=l=null;for(S in a)if(a.hasOwnProperty(S)&&(b=a[S],b!=null))switch(S){case"value":l=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:et(t,r,S,b,a,null)}Bc(t,l,f,m),jr(t);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,r,M,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)Le(Ll[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(t,r,$,l,a,null)}return;default:if(Ma(r)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&Zf(t,r,ne,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&et(t,r,b,l,a,null))}function nb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,b=null,M=null,$=null,ne=null;for(Z in a){var ae=a[Z];if(a.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=ae;default:l.hasOwnProperty(Z)||et(t,r,Z,null,l,ae)}}for(var W in l){var Z=l[W];if(ae=a[W],l.hasOwnProperty(W)&&(Z!=null||ae!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":$=Z;break;case"defaultChecked":ne=Z;break;case"value":S=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ae&&et(t,r,W,Z,l,ae)}}Yo(t,S,b,M,$,ne,m,f);return;case"select":Z=S=b=W=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Z=M;default:l.hasOwnProperty(m)||et(t,r,m,null,l,M)}for(f in l)if(m=l[f],M=a[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":W=m;break;case"defaultValue":b=m;break;case"multiple":S=m;default:m!==M&&et(t,r,f,m,l,M)}r=b,a=S,l=Z,W!=null?Dr(t,!!a,W,!1):!!l!=!!a&&(r!=null?Dr(t,!!a,r,!0):Dr(t,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:et(t,r,b,null,l,f)}for(S in l)if(f=l[S],m=a[S],l.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&et(t,r,S,f,l,m)}zc(t,W,Z);return;case"option":for(var Ne in a)if(W=a[Ne],a.hasOwnProperty(Ne)&&W!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:et(t,r,Ne,null,l,W)}for(M in l)if(W=l[M],Z=a[M],l.hasOwnProperty(M)&&W!==Z&&(W!=null||Z!=null))switch(M){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:et(t,r,M,W,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)W=a[be],a.hasOwnProperty(be)&&W!=null&&!l.hasOwnProperty(be)&&et(t,r,be,null,l,W);for($ in l)if(W=l[$],Z=a[$],l.hasOwnProperty($)&&W!==Z&&(W!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:et(t,r,$,W,l,Z)}return;default:if(Ma(r)){for(var tt in a)W=a[tt],a.hasOwnProperty(tt)&&W!==void 0&&!l.hasOwnProperty(tt)&&Zf(t,r,tt,void 0,l,W);for(ne in l)W=l[ne],Z=a[ne],!l.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||Zf(t,r,ne,W,l,Z);return}}for(var z in a)W=a[z],a.hasOwnProperty(z)&&W!=null&&!l.hasOwnProperty(z)&&et(t,r,z,null,l,W);for(ae in l)W=l[ae],Z=a[ae],!l.hasOwnProperty(ae)||W===Z||W==null&&Z==null||et(t,r,ae,W,l,Z)}var Jf=null,em=null;function Bu(t){return t.nodeType===9?t:t.ownerDocument}function n_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function tm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nm=null;function sb(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var r_=typeof setTimeout=="function"?setTimeout:void 0,rb=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,ib=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(ab)}:r_;function ab(t){setTimeout(function(){throw t})}function Zr(t){return t==="head"}function a_(t,r){var a=r,l=0,f=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var S=t.ownerDocument;if(a&1&&ql(S.documentElement),a&2&&ql(S.body),a&4)for(a=S.head,ql(a),S=a.firstChild;S;){var b=S.nextSibling,M=S.nodeName;S[Nr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=b}}if(f===0){t.removeChild(m),$l(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);$l(r)}function sm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sm(a),Ra(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function ob(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Nr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=us(t.nextSibling),t===null)break}return null}function lb(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=us(t.nextSibling),t===null))return null;return t}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function cb(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function us(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var im=null;function o_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function l_(t,r,a){switch(r=Bu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ql(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ra(t)}var $n=new Map,c_=new Set;function Fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ir=ue.d;ue.d={f:ub,r:hb,D:db,C:fb,L:mb,m:pb,X:yb,S:gb,M:vb};function ub(){var t=ir.f(),r=Pu();return t||r}function hb(t){var r=Es(t);r!==null&&r.tag===5&&r.type==="form"?Cy(r):ir.r(t)}var ho=typeof document>"u"?null:document;function u_(t,r,a){var l=ho;if(l&&typeof r=="string"&&r){var f=Bt(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),c_.has(f)||(c_.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Wt(r,"link",t),bt(r),l.head.appendChild(r)))}}function db(t){ir.D(t),u_("dns-prefetch",t,null)}function fb(t,r){ir.C(t,r),u_("preconnect",t,r)}function mb(t,r,a){ir.L(t,r,a);var l=ho;if(l&&t&&r){var f='link[rel="preload"][as="'+Bt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Bt(a.imageSizes)+'"]')):f+='[href="'+Bt(t)+'"]';var m=f;switch(r){case"style":m=fo(t);break;case"script":m=mo(t)}$n.has(m)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),$n.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(zl(m))||r==="script"&&l.querySelector(Bl(m))||(r=l.createElement("link"),Wt(r,"link",t),bt(r),l.head.appendChild(r)))}}function pb(t,r){ir.m(t,r);var a=ho;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Bt(l)+'"][href="'+Bt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=mo(t)}if(!$n.has(m)&&(t=_({rel:"modulepreload",href:t},r),$n.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(m)))return}l=a.createElement("link"),Wt(l,"link",t),bt(l),a.head.appendChild(l)}}}function gb(t,r,a){ir.S(t,r,a);var l=ho;if(l&&t){var f=Cr(l).hoistableStyles,m=fo(t);r=r||"default";var S=f.get(m);if(!S){var b={loading:0,preload:null};if(S=l.querySelector(zl(m)))b.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=$n.get(m))&&am(t,a);var M=S=l.createElement("link");bt(M),Wt(M,"link",t),M._p=new Promise(function($,ne){M.onload=$,M.onerror=ne}),M.addEventListener("load",function(){b.loading|=1}),M.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Hu(S,r,l)}S={type:"stylesheet",instance:S,count:1,state:b},f.set(m,S)}}}function yb(t,r){ir.X(t,r);var a=ho;if(a&&t){var l=Cr(a).hoistableScripts,f=mo(t),m=l.get(f);m||(m=a.querySelector(Bl(f)),m||(t=_({src:t,async:!0},r),(r=$n.get(f))&&om(t,r),m=a.createElement("script"),bt(m),Wt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function vb(t,r){ir.M(t,r);var a=ho;if(a&&t){var l=Cr(a).hoistableScripts,f=mo(t),m=l.get(f);m||(m=a.querySelector(Bl(f)),m||(t=_({src:t,async:!0,type:"module"},r),(r=$n.get(f))&&om(t,r),m=a.createElement("script"),bt(m),Wt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function h_(t,r,a,l){var f=(f=ye.current)?Fu(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=fo(a.href),a=Cr(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=fo(a.href);var m=Cr(f).hoistableStyles,S=m.get(t);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,S),(m=f.querySelector(zl(t)))&&!m._p&&(S.instance=m,S.state.loading=5),$n.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(t,a),m||_b(f,t,a,S.state))),r&&l===null)throw Error(i(528,""));return S}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=mo(a),a=Cr(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function fo(t){return'href="'+Bt(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function d_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function _b(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Wt(r,"link",a),bt(r),t.head.appendChild(r))}function mo(t){return'[src="'+Bt(t)+'"]'}function Bl(t){return"script[async]"+t}function f_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Bt(a.href)+'"]');if(l)return r.instance=l,bt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),bt(l),Wt(l,"style",f),Hu(l,a.precedence,t),r.instance=l;case"stylesheet":f=fo(a.href);var m=t.querySelector(zl(f));if(m)return r.state.loading|=4,r.instance=m,bt(m),m;l=d_(a),(f=$n.get(f))&&am(l,f),m=(t.ownerDocument||t).createElement("link"),bt(m);var S=m;return S._p=new Promise(function(b,M){S.onload=b,S.onerror=M}),Wt(m,"link",l),r.state.loading|=4,Hu(m,a.precedence,t),r.instance=m;case"script":return m=mo(a.src),(f=t.querySelector(Bl(m)))?(r.instance=f,bt(f),f):(l=a,(f=$n.get(m))&&(l=_({},a),om(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),bt(f),Wt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Hu(l,a.precedence,t));return r.instance}function Hu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,S=0;S<l.length;S++){var b=l[S];if(b.dataset.precedence===r)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function am(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function om(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gu=null;function m_(t,r,a){if(Gu===null){var l=new Map,f=Gu=new Map;f.set(a,l)}else f=Gu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Nr]||m[Tt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(r)||"";S=t+S;var b=l.get(S);b?b.push(m):l.set(S,[m])}}return l}function p_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Eb(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function g_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Fl=null;function Sb(){}function Tb(t,r,a){if(Fl===null)throw Error(i(475));var l=Fl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=fo(a.href),m=t.querySelector(zl(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Qu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=m,bt(m);return}m=t.ownerDocument||t,a=d_(a),(f=$n.get(f))&&am(a,f),m=m.createElement("link"),bt(m);var S=m;S._p=new Promise(function(b,M){S.onload=b,S.onerror=M}),Wt(m,"link",a),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Qu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function bb(){if(Fl===null)throw Error(i(475));var t=Fl;return t.stylesheets&&t.count===0&&lm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&lm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)lm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ku=null;function lm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ku=new Map,r.forEach(wb,t),Ku=null,Qu.call(t))}function wb(t,r){if(!(r.state.loading&4)){var a=Ku.get(t);if(a)var l=a.get(null);else{a=new Map,Ku.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),l=S)}l&&a.set(null,l)}f=r.instance,S=f.getAttribute("data-precedence"),m=a.get(S)||l,m===l&&a.set(null,f),a.set(S,f),this.count++,l=Qu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Hl={$$typeof:K,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function xb(t,r,a,l,f,m,S,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.hiddenUpdates=Na(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function y_(t,r,a,l,f,m,S,b,M,$,ne,ae){return t=new xb(t,r,a,S,b,M,$,ae),r=1,m===!0&&(r|=24),m=Rn(3,null,null,r),t.current=m,m.stateNode=t,r=Bd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},Qd(m),t}function v_(t){return t?(t=Ha,t):Ha}function __(t,r,a,l,f,m){f=v_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ur(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=qr(t,l,r),a!==null&&(Mn(a,t,r),El(a,t,r))}function E_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function cm(t,r){E_(t,r),(t=t.alternate)&&E_(t,r)}function S_(t){if(t.tag===13){var r=Fa(t,67108864);r!==null&&Mn(r,t,67108864),cm(t,67108864)}}var $u=!0;function Ab(t,r,a,l){var f=te.T;te.T=null;var m=ue.p;try{ue.p=2,um(t,r,a,l)}finally{ue.p=m,te.T=f}}function Nb(t,r,a,l){var f=te.T;te.T=null;var m=ue.p;try{ue.p=8,um(t,r,a,l)}finally{ue.p=m,te.T=f}}function um(t,r,a,l){if($u){var f=hm(l);if(f===null)Wf(t,r,l,Yu,a),b_(t,l);else if(Cb(f,t,r,a,l))l.stopPropagation();else if(b_(t,l),r&4&&-1<Rb.indexOf(t)){for(;f!==null;){var m=Es(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=ts(m.pendingLanes);if(S!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var M=1<<31-fn(S);b.entanglements[1]|=M,S&=~M}Is(m),(Xe&6)===0&&(Du=vn()+500,Vl(0))}}break;case 13:b=Fa(m,2),b!==null&&Mn(b,m,2),Pu(),cm(m,2)}if(m=hm(l),m===null&&Wf(t,r,l,Yu,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Wf(t,r,l,null,a)}}function hm(t){return t=tl(t),dm(t)}var Yu=null;function dm(t){if(Yu=null,t=_s(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yu=t,null}function T_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kc()){case Ot:return 2;case zt:return 8;case Us:case gd:return 32;case Go:return 268435456;default:return 32}default:return 32}}var fm=!1,Jr=null,ei=null,ti=null,Gl=new Map,Ql=new Map,ni=[],Rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b_(t,r){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Gl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(r.pointerId)}}function Kl(t,r,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Es(r),r!==null&&S_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function Cb(t,r,a,l,f){switch(r){case"focusin":return Jr=Kl(Jr,t,r,a,l,f),!0;case"dragenter":return ei=Kl(ei,t,r,a,l,f),!0;case"mouseover":return ti=Kl(ti,t,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return Gl.set(m,Kl(Gl.get(m)||null,t,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ql.set(m,Kl(Ql.get(m)||null,t,r,a,l,f)),!0}return!1}function w_(t){var r=_s(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,_d(t.priority,function(){if(a.tag===13){var l=Dn();l=Ko(l);var f=Fa(a,l);f!==null&&Mn(f,a,l),cm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);el=l,a.target.dispatchEvent(l),el=null}else return r=Es(a),r!==null&&S_(r),t.blockedOn=a,!1;r.shift()}return!0}function x_(t,r,a){Xu(t)&&a.delete(r)}function Ib(){fm=!1,Jr!==null&&Xu(Jr)&&(Jr=null),ei!==null&&Xu(ei)&&(ei=null),ti!==null&&Xu(ti)&&(ti=null),Gl.forEach(x_),Ql.forEach(x_)}function Wu(t,r){t.blockedOn===r&&(t.blockedOn=null,fm||(fm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ib)))}var Zu=null;function A_(t){Zu!==t&&(Zu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Zu===t&&(Zu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(dm(l||a)===null)continue;break}var m=Es(a);m!==null&&(t.splice(r,3),r-=3,df(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function $l(t){function r(M){return Wu(M,t)}Jr!==null&&Wu(Jr,t),ei!==null&&Wu(ei,t),ti!==null&&Wu(ti,t),Gl.forEach(r),Ql.forEach(r);for(var a=0;a<ni.length;a++){var l=ni[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ni.length&&(a=ni[0],a.blockedOn===null);)w_(a),a.blockedOn===null&&ni.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],S=f[$t]||null;if(typeof m=="function")S||A_(a);else if(S){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[$t]||null)b=S.formAction;else if(dm(f)!==null)continue}else b=S.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),A_(a)}}}function mm(t){this._internalRoot=t}Ju.prototype.render=mm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Dn();__(a,l,t,r,null,null)},Ju.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;__(t.current,2,null,t,null,null),Pu(),r[zs]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var r=qs();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ni.length&&r!==0&&r<ni[a].priority;a++);ni.splice(a,0,t),a===0&&w_(t)}};var N_=e.version;if(N_!=="19.1.1")throw Error(i(527,N_,"19.1.1"));ue.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var jb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Sr=eh.inject(jb),nn=eh}catch{}}return Xl.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",f=Fy,m=Hy,S=Gy,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=y_(t,1,!1,null,null,a,l,f,m,S,b,null),t[zs]=r.current,Xf(t),new mm(r)},Xl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=Fy,S=Hy,b=Gy,M=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),r=y_(t,1,!0,r,a??null,l,f,m,S,b,M,$),r.context=v_(null),a=r.current,l=Dn(),l=Ko(l),f=Ur(l),f.callback=null,qr(a,f,l),a=l,r.current.lanes=a,St(r,a),Is(r),t[zs]=r.current,Xf(t),new Ju(r)},Xl.version="19.1.1",Xl}var V_;function zb(){if(V_)return ym.exports;V_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ym.exports=qb(),ym.exports}var Bb=zb();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var L_="popstate";function Fb(s={}){function e(o,u){let{pathname:d="/",search:y="",hash:g=""}=_a(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Om("",{pathname:d,search:y,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let d=o.document.querySelector("base"),y="";if(d&&d.getAttribute("href")){let g=o.location.href,p=g.indexOf("#");y=p===-1?g:g.slice(0,p)}return y+"#"+(typeof u=="string"?u:hc(u))}function i(o,u){Zn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return Gb(e,n,i,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Zn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hb(){return Math.random().toString(36).substring(2,10)}function U_(s,e){return{usr:s.state,key:s.key,idx:e}}function Om(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?_a(e):e,state:n,key:e&&e.key||i||Hb()}}function hc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function _a(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function Gb(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,y="POP",g=null,p=_();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function _(){return(d.state||{idx:null}).idx}function T(){y="POP";let V=_(),Y=V==null?null:V-p;p=V,g&&g({action:y,location:B.location,delta:Y})}function x(V,Y){y="PUSH";let oe=Om(B.location,V,Y);n&&n(oe,V),p=_()+1;let K=U_(oe,p),H=B.createHref(oe);try{d.pushState(K,"",H)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(H)}u&&g&&g({action:y,location:B.location,delta:1})}function C(V,Y){y="REPLACE";let oe=Om(B.location,V,Y);n&&n(oe,V),p=_();let K=U_(oe,p),H=B.createHref(oe);d.replaceState(K,"",H),u&&g&&g({action:y,location:B.location,delta:0})}function U(V){return Qb(V)}let B={get action(){return y},get location(){return s(o,d)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(L_,T),g=V,()=>{o.removeEventListener(L_,T),g=null}},createHref(V){return e(o,V)},createURL:U,encodeLocation(V){let Y=U(V);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:x,replace:C,go(V){return d.go(V)}};return B}function Qb(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:hc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function _0(s,e,n="/"){return Kb(s,e,n,!1)}function Kb(s,e,n,i){let o=typeof e=="string"?_a(e):e,u=dr(o.pathname||"/",n);if(u==null)return null;let d=E0(s);$b(d);let y=null;for(let g=0;y==null&&g<d.length;++g){let p=iw(u);y=sw(d[g],p,i)}return y}function E0(s,e=[],n=[],i="",o=!1){let u=(d,y,g=o,p)=>{let _={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:y,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&g)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=cr([i,_.relativePath]),x=n.concat(_);d.children&&d.children.length>0&&(ft(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),E0(d.children,e,x,T,g)),!(d.path==null&&!d.index)&&e.push({path:T,score:tw(T,d.index),routesMeta:x})};return s.forEach((d,y)=>{if(d.path===""||!d.path?.includes("?"))u(d,y);else for(let g of S0(d.path))u(d,y,!0,g)}),e}function S0(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=S0(i.join("/")),y=[];return y.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&y.push(...d),y.map(g=>s.startsWith("/")&&g===""?"/":g)}function $b(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:nw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Yb=/^:[\w-]+$/,Xb=3,Wb=2,Zb=1,Jb=10,ew=-2,q_=s=>s==="*";function tw(s,e){let n=s.split("/"),i=n.length;return n.some(q_)&&(i+=ew),e&&(i+=Wb),n.filter(o=>!q_(o)).reduce((o,u)=>o+(Yb.test(u)?Xb:u===""?Zb:Jb),i)}function nw(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function sw(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",d=[];for(let y=0;y<i.length;++y){let g=i[y],p=y===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",T=Eh({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},_),x=g.route;if(!T&&p&&n&&!i[i.length-1].route.index&&(T=Eh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:cr([u,T.pathname]),pathnameBase:cw(cr([u,T.pathnameBase])),route:x}),T.pathnameBase!=="/"&&(u=cr([u,T.pathnameBase]))}return d}function Eh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=rw(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),y=o.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:T},x)=>{if(_==="*"){let U=y[x]||"";d=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const C=y[x];return T&&!C?p[_]=void 0:p[_]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:s}}function rw(s,e=!1,n=!0){Zn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,y,g)=>(i.push({paramName:y,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function iw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function dr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function aw(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?_a(s):s;return{pathname:n?n.startsWith("/")?n:ow(n,e):e,search:uw(i),hash:hw(o)}}function ow(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Sm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lw(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dp(s){let e=lw(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function fp(s,e,n,i=!1){let o;typeof s=="string"?o=_a(s):(o={...s},ft(!o.pathname||!o.pathname.includes("?"),Sm("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Sm("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Sm("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,y;if(d==null)y=n;else{let T=e.length-1;if(!i&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),T-=1;o.pathname=x.join("/")}y=T>=0?e[T]:"/"}let g=aw(o,y),p=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||_)&&(g.pathname+="/"),g}var cr=s=>s.join("/").replace(/\/\/+/g,"/"),cw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),uw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function dw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var T0=["POST","PUT","PATCH","DELETE"];new Set(T0);var fw=["GET",...T0];new Set(fw);var Mo=I.createContext(null);Mo.displayName="DataRouter";var zh=I.createContext(null);zh.displayName="DataRouterState";I.createContext(!1);var b0=I.createContext({isTransitioning:!1});b0.displayName="ViewTransition";var mw=I.createContext(new Map);mw.displayName="Fetchers";var pw=I.createContext(null);pw.displayName="Await";var ps=I.createContext(null);ps.displayName="Navigation";var Tc=I.createContext(null);Tc.displayName="Location";var gs=I.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var mp=I.createContext(null);mp.displayName="RouteError";function gw(s,{relative:e}={}){ft(Po(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(ps),{hash:o,pathname:u,search:d}=bc(s,{relative:e}),y=u;return n!=="/"&&(y=u==="/"?n:cr([n,u])),i.createHref({pathname:y,search:d,hash:o})}function Po(){return I.useContext(Tc)!=null}function Jn(){return ft(Po(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Tc).location}var w0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x0(s){I.useContext(ps).static||I.useLayoutEffect(s)}function Et(){let{isDataRoute:s}=I.useContext(gs);return s?Cw():yw()}function yw(){ft(Po(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(Mo),{basename:e,navigator:n}=I.useContext(ps),{matches:i}=I.useContext(gs),{pathname:o}=Jn(),u=JSON.stringify(dp(i)),d=I.useRef(!1);return x0(()=>{d.current=!0}),I.useCallback((g,p={})=>{if(Zn(d.current,w0),!d.current)return;if(typeof g=="number"){n.go(g);return}let _=fp(g,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:cr([e,_.pathname])),(p.replace?n.replace:n.push)(_,p.state,p)},[e,n,u,o,s])}I.createContext(null);function pp(){let{matches:s}=I.useContext(gs),e=s[s.length-1];return e?e.params:{}}function bc(s,{relative:e}={}){let{matches:n}=I.useContext(gs),{pathname:i}=Jn(),o=JSON.stringify(dp(n));return I.useMemo(()=>fp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function vw(s,e){return A0(s,e)}function A0(s,e,n,i){ft(Po(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(ps),{matches:u}=I.useContext(gs),d=u[u.length-1],y=d?d.params:{},g=d?d.pathname:"/",p=d?d.pathnameBase:"/",_=d&&d.route;{let Y=_&&_.path||"";N0(g,!_||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=Jn(),x;if(e){let Y=typeof e=="string"?_a(e):e;ft(p==="/"||Y.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),x=Y}else x=T;let C=x.pathname||"/",U=C;if(p!=="/"){let Y=p.replace(/^\//,"").split("/");U="/"+C.replace(/^\//,"").split("/").slice(Y.length).join("/")}let B=_0(s,{pathname:U});Zn(_||B!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Zn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=bw(B&&B.map(Y=>Object.assign({},Y,{params:Object.assign({},y,Y.params),pathname:cr([p,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?p:cr([p,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,n,i);return e&&V?I.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},V):V}function _w(){let s=Rw(),e=dw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:u},"ErrorBoundary")," or"," ",I.createElement("code",{style:u},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,d)}var Ew=I.createElement(_w,null),Sw=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?I.createElement(gs.Provider,{value:this.props.routeContext},I.createElement(mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tw({routeContext:s,match:e,children:n}){let i=I.useContext(Mo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(gs.Provider,{value:s},n)}function bw(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,u=n?.errors;if(u!=null){let g=o.findIndex(p=>p.route.id&&u?.[p.route.id]!==void 0);ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,y=-1;if(n)for(let g=0;g<o.length;g++){let p=o[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(y=g),p.route.id){let{loaderData:_,errors:T}=n,x=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||x){d=!0,y>=0?o=o.slice(0,y+1):o=[o[0]];break}}}return o.reduceRight((g,p,_)=>{let T,x=!1,C=null,U=null;n&&(T=u&&p.route.id?u[p.route.id]:void 0,C=p.route.errorElement||Ew,d&&(y<0&&_===0?(N0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,U=null):y===_&&(x=!0,U=p.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,_+1)),V=()=>{let Y;return T?Y=C:x?Y=U:p.route.Component?Y=I.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=g,I.createElement(Tw,{match:p,routeContext:{outlet:g,matches:B,isDataRoute:n!=null},children:Y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?I.createElement(Sw,{location:n.location,revalidation:n.revalidation,component:C,error:T,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}function gp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ww(s){let e=I.useContext(Mo);return ft(e,gp(s)),e}function xw(s){let e=I.useContext(zh);return ft(e,gp(s)),e}function Aw(s){let e=I.useContext(gs);return ft(e,gp(s)),e}function yp(s){let e=Aw(s),n=e.matches[e.matches.length-1];return ft(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Nw(){return yp("useRouteId")}function Rw(){let s=I.useContext(mp),e=xw("useRouteError"),n=yp("useRouteError");return s!==void 0?s:e.errors?.[n]}function Cw(){let{router:s}=ww("useNavigate"),e=yp("useNavigate"),n=I.useRef(!1);return x0(()=>{n.current=!0}),I.useCallback(async(o,u={})=>{Zn(n.current,w0),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var z_={};function N0(s,e,n){!e&&!z_[s]&&(z_[s]=!0,Zn(!1,n))}I.memo(Iw);function Iw({routes:s,future:e,state:n}){return A0(s,void 0,n,e)}function R0({to:s,replace:e,state:n,relative:i}){ft(Po(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(ps);Zn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=I.useContext(gs),{pathname:d}=Jn(),y=Et(),g=fp(s,dp(u),d,i==="path"),p=JSON.stringify(g);return I.useEffect(()=>{y(JSON.parse(p),{replace:e,state:n,relative:i})},[y,p,i,e,n]),null}function Nt(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jw({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){ft(!Po(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),y=I.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=_a(n));let{pathname:g="/",search:p="",hash:_="",state:T=null,key:x="default"}=n,C=I.useMemo(()=>{let U=dr(g,d);return U==null?null:{location:{pathname:U,search:p,hash:_,state:T,key:x},navigationType:i}},[d,g,p,_,T,x,i]);return Zn(C!=null,`<Router basename="${d}"> is not able to match the URL "${g}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:I.createElement(ps.Provider,{value:y},I.createElement(Tc.Provider,{children:e,value:C}))}function Dw({children:s,location:e}){return vw(km(s),e)}function km(s,e=[]){let n=[];return I.Children.forEach(s,(i,o)=>{if(!I.isValidElement(i))return;let u=[...e,o];if(i.type===I.Fragment){n.push.apply(n,km(i.props.children,u));return}ft(i.type===Nt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=km(i.props.children,u)),n.push(d)}),n}var lh="get",ch="application/x-www-form-urlencoded";function Bh(s){return s!=null&&typeof s.tagName=="string"}function Mw(s){return Bh(s)&&s.tagName.toLowerCase()==="button"}function Pw(s){return Bh(s)&&s.tagName.toLowerCase()==="form"}function Ow(s){return Bh(s)&&s.tagName.toLowerCase()==="input"}function kw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Vw(s,e){return s.button===0&&(!e||e==="_self")&&!kw(s)}var th=null;function Lw(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var Uw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(s){return s!=null&&!Uw.has(s)?(Zn(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):s}function qw(s,e){let n,i,o,u,d;if(Pw(s)){let y=s.getAttribute("action");i=y?dr(y,e):null,n=s.getAttribute("method")||lh,o=Tm(s.getAttribute("enctype"))||ch,u=new FormData(s)}else if(Mw(s)||Ow(s)&&(s.type==="submit"||s.type==="image")){let y=s.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||y.getAttribute("action");if(i=g?dr(g,e):null,n=s.getAttribute("formmethod")||y.getAttribute("method")||lh,o=Tm(s.getAttribute("formenctype"))||Tm(y.getAttribute("enctype"))||ch,u=new FormData(y,s),!Lw()){let{name:p,type:_,value:T}=s;if(_==="image"){let x=p?`${p}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else p&&u.append(p,T)}}else{if(Bh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lh,i=null,o=ch,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function zw(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&dr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Bw(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fw(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Hw(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Bw(u,n);return d.links?d.links():[]}return[]}));return $w(i.flat(1).filter(Fw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function B_(s,e,n,i,o,u){let d=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,y=(g,p)=>n[p].pathname!==g.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,p)=>d(g,p)||y(g,p)):u==="data"?e.filter((g,p)=>{let _=i.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,p)||y(g,p))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Gw(s,e,{includeHydrateFallback:n}={}){return Qw(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Qw(s){return[...new Set(s)]}function Kw(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function $w(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(Kw(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function C0(){let s=I.useContext(Mo);return vp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Yw(){let s=I.useContext(zh);return vp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var _p=I.createContext(void 0);_p.displayName="FrameworkContext";function I0(){let s=I.useContext(_p);return vp(s,"You must render this element inside a <HydratedRouter> element"),s}function Xw(s,e){let n=I.useContext(_p),[i,o]=I.useState(!1),[u,d]=I.useState(!1),{onFocus:y,onBlur:g,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,x=I.useRef(null);I.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=Y=>{Y.forEach(oe=>{d(oe.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return x.current&&V.observe(x.current),()=>{V.disconnect()}}},[s]),I.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let C=()=>{o(!0)},U=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,x,{}]:[u,x,{onFocus:Wl(y,C),onBlur:Wl(g,U),onMouseEnter:Wl(p,C),onMouseLeave:Wl(_,U),onTouchStart:Wl(T,C)}]:[!1,x,{}]}function Wl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function Ww({page:s,...e}){let{router:n}=C0(),i=I.useMemo(()=>_0(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?I.createElement(Jw,{page:s,matches:i,...e}):null}function Zw(s){let{manifest:e,routeModules:n}=I0(),[i,o]=I.useState([]);return I.useEffect(()=>{let u=!1;return Hw(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),i}function Jw({page:s,matches:e,...n}){let i=Jn(),{manifest:o,routeModules:u}=I0(),{basename:d}=C0(),{loaderData:y,matches:g}=Yw(),p=I.useMemo(()=>B_(s,e,g,o,i,"data"),[s,e,g,o,i]),_=I.useMemo(()=>B_(s,e,g,o,i,"assets"),[s,e,g,o,i]),T=I.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,B=!1;if(e.forEach(Y=>{let oe=o.routes[Y.route.id];!oe||!oe.hasLoader||(!p.some(K=>K.route.id===Y.route.id)&&Y.route.id in y&&u[Y.route.id]?.shouldRevalidate||oe.hasClientLoader?B=!0:U.add(Y.route.id))}),U.size===0)return[];let V=zw(s,d,"data");return B&&U.size>0&&V.searchParams.set("_routes",e.filter(Y=>U.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[V.pathname+V.search]},[d,y,i,o,p,e,s,u]),x=I.useMemo(()=>Gw(_,o),[_,o]),C=Zw(_);return I.createElement(I.Fragment,null,T.map(U=>I.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),x.map(U=>I.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),C.map(({key:U,link:B})=>I.createElement("link",{key:U,nonce:n.nonce,...B})))}function ex(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var j0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j0&&(window.__reactRouterVersion="7.8.1")}catch{}function tx({basename:s,children:e,window:n}){let i=I.useRef();i.current==null&&(i.current=Fb({window:n,v5Compat:!0}));let o=i.current,[u,d]=I.useState({action:o.action,location:o.location}),y=I.useCallback(g=>{I.startTransition(()=>d(g))},[d]);return I.useLayoutEffect(()=>o.listen(y),[o,y]),I.createElement(jw,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var D0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fh=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:y,target:g,to:p,preventScrollReset:_,viewTransition:T,...x},C){let{basename:U}=I.useContext(ps),B=typeof p=="string"&&D0.test(p),V,Y=!1;if(typeof p=="string"&&B&&(V=p,j0))try{let N=new URL(window.location.href),j=p.startsWith("//")?new URL(N.protocol+p):new URL(p),P=dr(j.pathname,U);j.origin===N.origin&&P!=null?p=P+j.search+j.hash:Y=!0}catch{Zn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let oe=gw(p,{relative:o}),[K,H,k]=Xw(i,x),F=ix(p,{replace:d,state:y,target:g,preventScrollReset:_,relative:o,viewTransition:T});function R(N){e&&e(N),N.defaultPrevented||F(N)}let w=I.createElement("a",{...x,...k,href:V||oe,onClick:Y||u?e:R,ref:ex(C,H),target:g,"data-discover":!B&&n==="render"?"true":void 0});return K&&!B?I.createElement(I.Fragment,null,w,I.createElement(Ww,{page:oe})):w});Fh.displayName="Link";var nx=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:y,children:g,...p},_){let T=bc(d,{relative:p.relative}),x=Jn(),C=I.useContext(zh),{navigator:U,basename:B}=I.useContext(ps),V=C!=null&&ux(T)&&y===!0,Y=U.encodeLocation?U.encodeLocation(T).pathname:T.pathname,oe=x.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(oe=oe.toLowerCase(),K=K?K.toLowerCase():null,Y=Y.toLowerCase()),K&&B&&(K=dr(K,B)||K);const H=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let k=oe===Y||!o&&oe.startsWith(Y)&&oe.charAt(H)==="/",F=K!=null&&(K===Y||!o&&K.startsWith(Y)&&K.charAt(Y.length)==="/"),R={isActive:k,isPending:F,isTransitioning:V},w=k?e:void 0,N;typeof i=="function"?N=i(R):N=[i,k?"active":null,F?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(R):u;return I.createElement(Fh,{...p,"aria-current":w,className:N,ref:_,style:j,to:d,viewTransition:y},typeof g=="function"?g(R):g)});nx.displayName="NavLink";var sx=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=lh,action:y,onSubmit:g,relative:p,preventScrollReset:_,viewTransition:T,...x},C)=>{let U=lx(),B=cx(y,{relative:p}),V=d.toLowerCase()==="get"?"get":"post",Y=typeof y=="string"&&D0.test(y),oe=K=>{if(g&&g(K),K.defaultPrevented)return;K.preventDefault();let H=K.nativeEvent.submitter,k=H?.getAttribute("formmethod")||d;U(H||K.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:o,state:u,relative:p,preventScrollReset:_,viewTransition:T})};return I.createElement("form",{ref:C,method:V,action:B,onSubmit:i?g:oe,...x,"data-discover":!Y&&s==="render"?"true":void 0})});sx.displayName="Form";function rx(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M0(s){let e=I.useContext(Mo);return ft(e,rx(s)),e}function ix(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let y=Et(),g=Jn(),p=bc(s,{relative:u});return I.useCallback(_=>{if(Vw(_,e)){_.preventDefault();let T=n!==void 0?n:hc(g)===hc(p);y(s,{replace:T,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[g,y,p,n,i,e,s,o,u,d])}var ax=0,ox=()=>`__${String(++ax)}__`;function lx(){let{router:s}=M0("useSubmit"),{basename:e}=I.useContext(ps),n=Nw();return I.useCallback(async(i,o={})=>{let{action:u,method:d,encType:y,formData:g,body:p}=qw(i,e);if(o.navigate===!1){let _=o.fetcherKey||ox();await s.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||d,formEncType:o.encType||y,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||d,formEncType:o.encType||y,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function cx(s,{relative:e}={}){let{basename:n}=I.useContext(ps),i=I.useContext(gs);ft(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...bc(s||".",{relative:e})},d=Jn();if(s==null){u.search=d.search;let y=new URLSearchParams(u.search),g=y.getAll("index");if(g.some(_=>_==="")){y.delete("index"),g.filter(T=>T).forEach(T=>y.append("index",T));let _=y.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:cr([n,u.pathname])),hc(u)}function ux(s,{relative:e}={}){let n=I.useContext(b0);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=M0("useViewTransitionState"),o=bc(s,{relative:e});if(!n.isTransitioning)return!1;let u=dr(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=dr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Eh(o.pathname,d)!=null||Eh(o.pathname,u)!=null}const hx=()=>{};var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},dx=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],y=s[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,y=d?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,_=u>>2,T=(u&3)<<4|y>>4;let x=(y&15)<<2|p>>6,C=p&63;g||(C=64,d||(x=64)),i.push(n[_],n[T],n[x],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(P0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):dx(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],y=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||y==null||p==null||T==null)throw new fx;const x=u<<2|y>>4;if(i.push(x),p!==64){const C=y<<4&240|p>>2;if(i.push(C),T!==64){const U=p<<6&192|T;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class fx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mx=function(s){const e=P0(s);return O0.encodeByteArray(e,!0)},Sh=function(s){return mx(s).replace(/\./g,"")},k0=function(s){try{return O0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=()=>px().__FIREBASE_DEFAULTS__,yx=()=>{if(typeof process>"u"||typeof F_>"u")return;const s=F_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},vx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&k0(s[1]);return e&&JSON.parse(e)},Hh=()=>{try{return hx()||gx()||yx()||vx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},V0=s=>Hh()?.emulatorHosts?.[s],_x=s=>{const e=V0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},L0=()=>Hh()?.config,U0=s=>Hh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Sh(JSON.stringify(n)),Sh(JSON.stringify(d)),""].join(".")}const ic={};function Tx(){const s={prod:[],emulator:[]};for(const e of Object.keys(ic))ic[e]?s.emulator.push(e):s.prod.push(e);return s}function bx(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let H_=!1;function z0(s,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||ic[s]===e||ic[s]||H_)return;ic[s]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",u=Tx().prod.length>0;function d(){const x=document.getElementById(i);x&&x.remove()}function y(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{H_=!0,d()},x}function _(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=bx(i),C=n("text"),U=document.getElementById(C)||document.createElement("span"),B=n("learnmore"),V=document.getElementById(B)||document.createElement("a"),Y=n("preprendIcon"),oe=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const K=x.element;y(K),_(V,B);const H=p();g(oe,Y),K.append(oe,U,V,H),document.body.appendChild(K)}u?(U.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function xx(){const s=Hh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nx(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Rx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cx(){const s=dn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Ix(){return!xx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jx(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="FirebaseError";class _r extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Mx,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Px(u,i):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new _r(o,y,i)}}function Px(s,e){return s.replace(Ox,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Ox=/\{\$([^}]+)}/g;function kx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fa(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(G_(u)&&G_(d)){if(!fa(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function G_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Jl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Vx(s,e){const n=new Lx(s,e);return n.subscribe.bind(n)}class Lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Ux(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=bm),o.error===void 0&&(o.error=bm),o.complete===void 0&&(o.complete=bm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ux(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return s&&s._delegate?s._delegate:s}class ma{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ex;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bx(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);i===y&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zx(s){return s===la?void 0:s}function Bx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const Hx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Gx=Ue.INFO,Qx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Kx=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Qx[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=Gx,this._logHandler=Kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const $x=(s,e)=>e.some(n=>s instanceof n);let Q_,K_;function Yx(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xx(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,Vm=new WeakMap,F0=new WeakMap,wm=new WeakMap,Sp=new WeakMap;function Wx(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(ui(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&B0.set(n,s)}).catch(()=>{}),Sp.set(e,s),e}function Zx(s){if(Vm.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Vm.set(s,e)}let Lm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Vm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||F0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Jx(s){Lm=s(Lm)}function eA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(xm(this),e,...n);return F0.set(i,e.sort?e.sort():[e]),ui(i)}:Xx().includes(s)?function(...e){return s.apply(xm(this),e),ui(B0.get(this))}:function(...e){return ui(s.apply(xm(this),e))}}function tA(s){return typeof s=="function"?eA(s):(s instanceof IDBTransaction&&Zx(s),$x(s,Yx())?new Proxy(s,Lm):s)}function ui(s){if(s instanceof IDBRequest)return Wx(s);if(wm.has(s))return wm.get(s);const e=tA(s);return e!==s&&(wm.set(s,e),Sp.set(e,s)),e}const xm=s=>Sp.get(s);function nA(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),y=ui(d);return i&&d.addEventListener("upgradeneeded",g=>{i(ui(d.result),g.oldVersion,g.newVersion,ui(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),y.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),y}const sA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],Am=new Map;function $_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=rA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||sA.includes(n)))return;const u=async function(d,...y){const g=this.transaction(d,o?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(y.shift())),(await Promise.all([p[n](...y),o&&g.done]))[0]};return Am.set(e,u),u}Jx(s=>({...s,get:(e,n,i)=>$_(e,n)||s.get(e,n,i),has:(e,n)=>!!$_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function aA(s){return s.getComponent()?.type==="VERSION"}const Um="@firebase/app",Y_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Ep("@firebase/app"),oA="@firebase/app-compat",lA="@firebase/analytics-compat",cA="@firebase/analytics",uA="@firebase/app-check-compat",hA="@firebase/app-check",dA="@firebase/auth",fA="@firebase/auth-compat",mA="@firebase/database",pA="@firebase/data-connect",gA="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",_A="@firebase/installations",EA="@firebase/installations-compat",SA="@firebase/messaging",TA="@firebase/messaging-compat",bA="@firebase/performance",wA="@firebase/performance-compat",xA="@firebase/remote-config",AA="@firebase/remote-config-compat",NA="@firebase/storage",RA="@firebase/storage-compat",CA="@firebase/firestore",IA="@firebase/ai",jA="@firebase/firestore-compat",DA="firebase",MA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",PA={[Um]:"fire-core",[oA]:"fire-core-compat",[cA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[uA]:"fire-app-check-compat",[dA]:"fire-auth",[fA]:"fire-auth-compat",[mA]:"fire-rtdb",[pA]:"fire-data-connect",[gA]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[_A]:"fire-iid",[EA]:"fire-iid-compat",[SA]:"fire-fcm",[TA]:"fire-fcm-compat",[bA]:"fire-perf",[wA]:"fire-perf-compat",[xA]:"fire-rc",[AA]:"fire-rc-compat",[NA]:"fire-gcs",[RA]:"fire-gcs-compat",[CA]:"fire-fst",[jA]:"fire-fst-compat",[IA]:"fire-vertex","fire-js":"fire-js",[DA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,OA=new Map,zm=new Map;function X_(s,e){try{s.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function xo(s){const e=s.name;if(zm.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,s);for(const n of Th.values())X_(n,s);for(const n of OA.values())X_(n,s);return!0}function Tp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Yn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new wc("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=MA;function H0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:qm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw hi.create("bad-app-name",{appName:String(o)});if(n||(n=L0()),!n)throw hi.create("no-options");const u=Th.get(o);if(u){if(fa(n,u.options)&&fa(i,u.config))return u;throw hi.create("duplicate-app",{appName:o})}const d=new Fx(o);for(const g of zm.values())d.addComponent(g);const y=new VA(n,i,d);return Th.set(o,y),y}function G0(s=qm){const e=Th.get(s);if(!e&&s===qm&&L0())return H0();if(!e)throw hi.create("no-app",{appName:s});return e}function di(s,e,n){let i=PA[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(d.join(" "));return}xo(new ma(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",UA=1,dc="firebase-heartbeat-store";let Nm=null;function Q0(){return Nm||(Nm=nA(LA,UA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(s=>{throw hi.create("idb-open",{originalErrorMessage:s.message})})),Nm}async function qA(s){try{const n=(await Q0()).transaction(dc),i=await n.objectStore(dc).get(K0(s));return await n.done,i}catch(e){if(e instanceof _r)fr.warn(e.message);else{const n=hi.create("idb-get",{originalErrorMessage:e?.message});fr.warn(n.message)}}}async function W_(s,e){try{const i=(await Q0()).transaction(dc,"readwrite");await i.objectStore(dc).put(e,K0(s)),await i.done}catch(n){if(n instanceof _r)fr.warn(n.message);else{const i=hi.create("idb-set",{originalErrorMessage:n?.message});fr.warn(i.message)}}}function K0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1024,BA=30;class FA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>BA){const o=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z_(),{heartbeatsToSend:n,unsentEntries:i}=HA(this._heartbeatsCache.heartbeats),o=Sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fr.warn(e),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function HA(s,e=zA){const n=[];let i=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),J_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),J_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class GA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jx()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function J_(s){return Sh(JSON.stringify({version:2,heartbeats:s})).length}function QA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s){xo(new ma("platform-logger",e=>new iA(e),"PRIVATE")),xo(new ma("heartbeat",e=>new FA(e),"PRIVATE")),di(Um,Y_,s),di(Um,Y_,"esm2020"),di("fire-js","")}KA("");function $0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $A=$0,Y0=new wc("auth","Firebase",$0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Ep("@firebase/auth");function YA(s,...e){bh.logLevel<=Ue.WARN&&bh.warn(`Auth (${ko}): ${s}`,...e)}function uh(s,...e){bh.logLevel<=Ue.ERROR&&bh.error(`Auth (${ko}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(s,...e){throw bp(s,...e)}function Ds(s,...e){return bp(s,...e)}function X0(s,e,n){const i={...$A(),[e]:n};return new wc("auth","Firebase",i).create(e,{appName:s.name})}function ur(s){return X0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bp(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Y0.create(s,...e)}function xe(s,e,...n){if(!s)throw bp(e,...n)}function ar(s){const e="INTERNAL ASSERTION FAILED: "+s;throw uh(e),new Error(e)}function mr(s,e){s||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return typeof self<"u"&&self.location?.href||""}function XA(){return eE()==="http:"||eE()==="https:"}function eE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XA()||Nx()||"connection"in navigator)?navigator.onLine:!0}function ZA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=wx()||Rx()}get(){return WA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(s,e){mr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tN=new Ac(3e4,6e4);function Si(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Er(s,e,n,i,o={}){return Z0(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const y=xc({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return Ax()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Oo(s.emulatorConfig.host)&&(p.credentials="include"),W0.fetch()(await J0(s,s.config.apiHost,n,y),p)})}async function Z0(s,e,n){s._canInitEmulator=!1;const i={...JA,...e};try{const o=new sN(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw nh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[g,p]=y.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw nh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw nh(s,"user-disabled",d);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw X0(s,_,p);fs(s,_)}}catch(o){if(o instanceof _r)throw o;fs(s,"network-request-failed",{message:String(o)})}}async function Nc(s,e,n,i,o={}){const u=await Er(s,e,n,i,o);return"mfaPendingCredential"in u&&fs(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function J0(s,e,n,i){const o=`${e}${n}?${i}`,u=s,d=u.config.emulator?wp(s.config,o):`${s.config.apiScheme}://${o}`;return eN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function nN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ds(this.auth,"network-request-failed")),tN.get())})}}function nh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ds(s,e,i);return o.customData._tokenResponse=n,o}function tE(s){return s!==void 0&&s.enterprise!==void 0}class rN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iN(s,e){return Er(s,"GET","/v2/recaptchaConfig",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(s,e){return Er(s,"POST","/v1/accounts:delete",e)}async function wh(s,e){return Er(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oN(s,e=!1){const n=Pt(s),i=await n.getIdToken(e),o=xp(i);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:ac(Rm(o.auth_time)),issuedAtTime:ac(Rm(o.iat)),expirationTime:ac(Rm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Rm(s){return Number(s)*1e3}function xp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=k0(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function nE(s){const e=xp(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _r&&lN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function lN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(s){const e=s.auth,n=await s.getIdToken(),i=await Ao(s,wh(e,{idToken:n}));xe(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?eS(o.providerUserInfo):[],d=hN(s.providerData,u),y=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,p=y?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,_)}async function uN(s){const e=Pt(s);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hN(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function eS(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(s,e){const n=await Z0(s,{},async()=>{const i=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await J0(s,o,"/v1/token",`key=${u}`),y=await s._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:y,body:i};return s.emulatorConfig&&Oo(s.emulatorConfig.host)&&(g.credentials="include"),W0.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fN(s,e){return Er(s,"POST","/v2/accounts:revokeToken",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=nE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await dN(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new So;return i&&(xe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class hs{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new cN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oN(this,e)}reload(){return uN(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await xh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await Ao(this,aN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:C,providerData:U,stsTokenManager:B}=n;xe(T&&B,e,"internal-error");const V=So.fromJSON(this.name,B);xe(typeof T=="string",e,"internal-error"),ri(i,e.name),ri(o,e.name),xe(typeof x=="boolean",e,"internal-error"),xe(typeof C=="boolean",e,"internal-error"),ri(u,e.name),ri(d,e.name),ri(y,e.name),ri(g,e.name),ri(p,e.name),ri(_,e.name);const Y=new hs({uid:T,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:C,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:V,createdAt:p,lastLoginAt:_});return U&&Array.isArray(U)&&(Y.providerData=U.map(oe=>({...oe}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(e,n,i=!1){const o=new So;o.updateFromServerResponse(n);const u=new hs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?eS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,y=new So;y.updateFromIdToken(i);const g=new hs({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function or(s){mr(s instanceof Function,"Expected a class definition");let e=sE.get(s);return e?(mr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,sE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tS.type="NONE";const rE=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s,e,n){return`firebase:${s}:${e}:${n}`}class To{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=hh(this.userKey,o.apiKey,u),this.fullPersistenceKey=hh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wh(this.auth,{idToken:e}).catch(()=>{});return n?hs._fromGetAccountInfoResponse(this.auth,n,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new To(or(rE),e,i);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||or(rE);const d=hh(i,e.config.apiKey,e.name);let y=null;for(const p of n)try{const _=await p._get(d);if(_){let T;if(typeof _=="string"){const x=await wh(e,{idToken:_}).catch(()=>{});if(!x)break;T=await hs._fromGetAccountInfoResponse(e,x,_)}else T=hs._fromJSON(e,_);p!==u&&(y=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new To(u,e,i):(u=g[0],y&&await u._set(d,y.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new To(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oS(e))return"Blackberry";if(lS(e))return"Webos";if(sS(e))return"Safari";if((e.includes("chrome/")||rS(e))&&!e.includes("edge/"))return"Chrome";if(aS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function nS(s=dn()){return/firefox\//i.test(s)}function sS(s=dn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rS(s=dn()){return/crios\//i.test(s)}function iS(s=dn()){return/iemobile/i.test(s)}function aS(s=dn()){return/android/i.test(s)}function oS(s=dn()){return/blackberry/i.test(s)}function lS(s=dn()){return/webos/i.test(s)}function Ap(s=dn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mN(s=dn()){return Ap(s)&&!!window.navigator?.standalone}function pN(){return Cx()&&document.documentMode===10}function cS(s=dn()){return Ap(s)||aS(s)||lS(s)||oS(s)||/windows phone/i.test(s)||iS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(s,e=[]){let n;switch(s){case"Browser":n=iE(dn());break;case"Worker":n=`${iE(dn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,y)=>{try{const g=e(u);d(g)}catch(g){y(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(s,e={}){return Er(s,"GET","/v2/passwordPolicy",Si(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=6;class _N{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new gN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await To.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wh(this,{idToken:e}),i=await hs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Yn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(ur(this));const n=e?Pt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yN(this),n=new _N(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&or(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ea(s){return Pt(s)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vx(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SN(s){Gh=s}function hS(s){return Gh.loadJS(s)}function TN(){return Gh.recaptchaEnterpriseScript}function bN(){return Gh.gapiScript}function wN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class xN{constructor(){this.enterprise=new AN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NN="recaptcha-enterprise",dS="NO_RECAPTCHA";class RN{constructor(e){this.type=NN,this.auth=Ea(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,y)=>{iN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const p=new rN(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,d(p.siteKey)}}).catch(g=>{y(g)})})}function o(u,d,y){const g=window.grecaptcha;tE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{d(p)}).catch(()=>{d(dS)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xN().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(y=>{if(!n&&tE(window.grecaptcha))o(y,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=TN();g.length!==0&&(g+=y),hS(g).then(()=>{o(y,u,d)}).catch(p=>{d(p)})}}).catch(y=>{d(y)})})}}async function oE(s,e,n,i=!1,o=!1){const u=new RN(s);let d;if(o)d=dS;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const y={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const g=y.phoneEnrollmentInfo.phoneNumber,p=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const g=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return i?Object.assign(y,{captchaResp:d}):Object.assign(y,{captchaResponse:d}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Hm(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await oE(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await oE(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(s,e){const n=Tp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(fa(u,e??{}))return o;fs(o,"already-initialized")}return n.initialize({options:e})}function IN(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(or);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function jN(s,e,n){const i=Ea(s);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=fS(e),{host:d,port:y}=DN(e),g=y===null?"":`:${y}`,p={url:`${u}//${d}${g}/`},_=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(fa(p,i.config.emulator)&&fa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Oo(d)?(q0(`${u}//${d}${g}`),z0("Auth",!0)):MN()}function fS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function DN(s){const e=fS(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:lE(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:lE(d)}}}function lE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function MN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}async function PN(s,e){return Er(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(s,e){return Nc(s,"POST","/v1/accounts:signInWithPassword",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(s,e){return Nc(s,"POST","/v1/accounts:signInWithEmailLink",Si(s,e))}async function VN(s,e){return Nc(s,"POST","/v1/accounts:signInWithEmailLink",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Np{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new fc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,n,"signInWithPassword",ON);case"emailLink":return kN(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,i,"signUpPassword",PN);case"emailLink":return VN(e,{idToken:n,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(s,e){return Nc(s,"POST","/v1/accounts:signInWithIdp",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="http://localhost";class pa extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const d=new pa(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return bo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bo(e,n)}buildRequest(){const e={requestUri:LN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qN(s){const e=Zl(Jl(s)).link,n=e?Zl(Jl(e)).deep_link_id:null,i=Zl(Jl(s)).deep_link_id;return(i?Zl(Jl(i)).link:null)||i||n||e||s}class Rp{constructor(e){const n=Zl(Jl(e)),i=n.apiKey??null,o=n.oobCode??null,u=UN(n.mode??null);xe(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qN(e);try{return new Rp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Rp.parseLink(n);return xe(i,"argument-error"),fc._fromEmailAndCode(e,i.code,i.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends mS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Rc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pa._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ai.credential(n,i)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Rc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Rc{constructor(){super("twitter.com")}static credential(e,n){return pa._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return li.credential(n,i)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(s,e){return Nc(s,"POST","/v1/accounts:signUp",Si(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await hs._fromIdTokenResponse(e,i,o),d=cE(i);return new ga({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=cE(i);return new ga({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function cE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends _r{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Ah(e,n,i,o)}}function pS(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(s,u,e,i):u})}async function BN(s,e,n=!1){const i=await Ao(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ga._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(s,e,n=!1){const{auth:i}=s;if(Yn(i.app))return Promise.reject(ur(i));const o="reauthenticate";try{const u=await Ao(s,pS(i,o,e,s),n);xe(u.idToken,i,"internal-error");const d=xp(u.idToken);xe(d,i,"internal-error");const{sub:y}=d;return xe(s.uid===y,i,"user-mismatch"),ga._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&fs(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(s,e,n=!1){if(Yn(s.app))return Promise.reject(ur(s));const i="signIn",o=await pS(s,i,e),u=await ga._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function HN(s,e){return gS(Ea(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(s){const e=Ea(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GN(s,e,n){if(Yn(s.app))return Promise.reject(ur(s));const i=Ea(s),d=await Hm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&yS(s),g}),y=await ga._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(y.user),y}function QN(s,e,n){return Yn(s.app)?Promise.reject(ur(s)):HN(Pt(s),Vo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&yS(s),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(s,e){return Er(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Pt(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await Ao(i,KN(i.auth,u));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const y=i.providerData.find(({providerId:g})=>g==="password");y&&(y.displayName=i.displayName,y.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function YN(s,e,n,i){return Pt(s).onIdTokenChanged(e,n,i)}function XN(s,e,n){return Pt(s).beforeAuthStateChanged(e,n)}function WN(s,e,n,i){return Pt(s).onAuthStateChanged(e,n,i)}function ZN(s){return Pt(s).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=1e3,e2=10;class _S extends vS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);pN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,e2):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},JN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_S.type="LOCAL";const t2=_S;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends vS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ES.type="SESSION";const SS=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const y=Array.from(d).map(async p=>p(n.origin,u)),g=await n2(y);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((y,g)=>{const p=Cp("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(x.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function r2(s){Ms().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function i2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a2(){return navigator?.serviceWorker?.controller||null}function o2(){return TS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firebaseLocalStorageDb",l2=1,Rh="firebaseLocalStorage",wS="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kh(s,e){return s.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function c2(){const s=indexedDB.deleteDatabase(bS);return new Cc(s).toPromise()}function Gm(){const s=indexedDB.open(bS,l2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Rh,{keyPath:wS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Rh)?e(i):(i.close(),await c2(),e(await Gm()))})})}async function uE(s,e,n){const i=Kh(s,!0).put({[wS]:e,value:n});return new Cc(i).toPromise()}async function u2(s,e){const n=Kh(s,!1).get(e),i=await new Cc(n).toPromise();return i===void 0?null:i.value}function hE(s,e){const n=Kh(s,!0).delete(e);return new Cc(n).toPromise()}const h2=800,d2=3;class xS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>d2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(o2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i2(),!this.activeServiceWorker)return;this.sender=new s2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gm();return await uE(e,Nh,"1"),await hE(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>uE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>u2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Kh(o,!1).getAll();return new Cc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xS.type="LOCAL";const f2=xS;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(s,e){return e?or(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p2(s){return gS(s.auth,new Ip(s),s.bypassAuthState)}function g2(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),FN(n,new Ip(s),s.bypassAuthState)}async function y2(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),BN(n,new Ip(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p2;case"linkViaPopup":case"linkViaRedirect":return y2;case"reauthViaPopup":case"reauthViaRedirect":return g2;default:fs(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Ac(2e3,1e4);class Eo extends AS{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v2.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="pendingRedirect",dh=new Map;class E2 extends AS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const i=await S2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S2(s,e){const n=w2(e),i=b2(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function T2(s,e){dh.set(s._key(),e)}function b2(s){return or(s._redirectPersistence)}function w2(s){return hh(_2,s.config.apiKey,s.name)}async function x2(s,e,n=!1){if(Yn(s.app))return Promise.reject(ur(s));const i=Ea(s),o=m2(i,e),d=await new E2(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=600*1e3;class N2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!NS(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ds(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A2&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function NS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function R2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(s,e={}){return Er(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j2=/^https?/;async function D2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await C2(s);for(const n of e)try{if(M2(n))return}catch{}fs(s,"unauthorized-domain")}function M2(s){const e=Bm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!j2.test(n))return!1;if(I2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new Ac(3e4,6e4);function fE(){const s=Ms().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function O2(s){return new Promise((e,n)=>{function i(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(Ds(s,"network-request-failed"))},timeout:P2.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)i();else{const o=wN("iframefcb");return Ms()[o]=()=>{gapi.load?i():n(Ds(s,"network-request-failed"))},hS(`${bN()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw fh=null,e})}let fh=null;function k2(s){return fh=fh||O2(s),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Ac(5e3,15e3),L2="__/auth/iframe",U2="emulator/auth/iframe",q2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B2(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?wp(e,U2):`https://${s.config.authDomain}/${L2}`,i={apiKey:e.apiKey,appName:s.name,v:ko},o=z2.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${xc(i).slice(1)}`}async function F2(s){const e=await k2(s),n=Ms().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:B2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q2,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ds(s,"network-request-failed"),y=Ms().setTimeout(()=>{u(d)},V2.get());function g(){Ms().clearTimeout(y),o(i)}i.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G2=500,Q2=600,K2="_blank",$2="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y2(s,e,n,i=G2,o=Q2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let y="";const g={...H2,width:i.toString(),height:o.toString(),top:u,left:d},p=dn().toLowerCase();n&&(y=rS(p)?K2:n),nS(p)&&(e=e||$2,g.scrollbars="yes");const _=Object.entries(g).reduce((x,[C,U])=>`${x}${C}=${U},`,"");if(mN(p)&&y!=="_self")return X2(e||"",y),new mE(null);const T=window.open(e||"",y,_);xe(T,s,"popup-blocked");try{T.focus()}catch{}return new mE(T)}function X2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="__/auth/handler",Z2="emulator/auth/handler",J2=encodeURIComponent("fac");async function pE(s,e,n,i,o,u){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:ko,eventId:o};if(e instanceof mS){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",kx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))d[_]=T}if(e instanceof Rc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const y=d;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];const g=await s._getAppCheckToken(),p=g?`#${J2}=${encodeURIComponent(g)}`:"";return`${eR(s)}?${xc(y).slice(1)}${p}`}function eR({config:s}){return s.emulator?wp(s,Z2):`https://${s.authDomain}/${W2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class tR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SS,this._completeRedirectFn=x2,this._overrideRedirectResult=T2}async _openPopup(e,n,i,o){mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await pE(e,n,i,Bm(),o);return Y2(e,u,Cp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await pE(e,n,i,Bm(),o);return r2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await F2(e),i=new N2(e);return n.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cm,{type:Cm},o=>{const u=o?.[0]?.[Cm];u!==void 0&&n(!!u),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cS()||sS()||Ap()}}const nR=tR;var gE="@firebase/auth",yE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iR(s){xo(new ma("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=i.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:y,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uS(s)},p=new EN(i,o,u,g);return IN(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xo(new ma("auth-internal",e=>{const n=Ea(e.getProvider("auth").getImmediate());return(i=>new sR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(gE,yE,rR(s)),di(gE,yE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=300,oR=U0("authIdTokenMaxAge")||aR;let vE=null;const lR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>oR)return;const o=n?.token;vE!==o&&(vE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cR(s=G0()){const e=Tp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=CN(s,{popupRedirectResolver:nR,persistence:[f2,t2,SS]}),i=U0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=lR(u.toString());XN(n,d,()=>d(n.currentUser)),YN(n,y=>d(y))}}const o=V0("auth");return o&&jN(n,`http://${o}`),n}function uR(){return document.getElementsByTagName("head")?.[0]??document}SN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Ds("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",uR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iR("Browser");var hR="firebase",dR="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(hR,dR,"app");var _E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,RS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function N(){}N.prototype=w.prototype,R.F=w.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(j,P,q){for(var D=Array(arguments.length-2),he=2;he<arguments.length;he++)D[he-2]=arguments[he];return w.prototype[P].apply(j,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,N){N||(N=0);const j=Array(16);if(typeof w=="string")for(var P=0;P<16;++P)j[P]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(P=0;P<16;++P)j[P]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=R.g[0],N=R.g[1],P=R.g[2];let q=R.g[3],D;D=w+(q^N&(P^q))+j[0]+3614090360&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(P^w&(N^P))+j[1]+3905402710&4294967295,q=w+(D<<12&4294967295|D>>>20),D=P+(N^q&(w^N))+j[2]+606105819&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(w^P&(q^w))+j[3]+3250441966&4294967295,N=P+(D<<22&4294967295|D>>>10),D=w+(q^N&(P^q))+j[4]+4118548399&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(P^w&(N^P))+j[5]+1200080426&4294967295,q=w+(D<<12&4294967295|D>>>20),D=P+(N^q&(w^N))+j[6]+2821735955&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(w^P&(q^w))+j[7]+4249261313&4294967295,N=P+(D<<22&4294967295|D>>>10),D=w+(q^N&(P^q))+j[8]+1770035416&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(P^w&(N^P))+j[9]+2336552879&4294967295,q=w+(D<<12&4294967295|D>>>20),D=P+(N^q&(w^N))+j[10]+4294925233&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(w^P&(q^w))+j[11]+2304563134&4294967295,N=P+(D<<22&4294967295|D>>>10),D=w+(q^N&(P^q))+j[12]+1804603682&4294967295,w=N+(D<<7&4294967295|D>>>25),D=q+(P^w&(N^P))+j[13]+4254626195&4294967295,q=w+(D<<12&4294967295|D>>>20),D=P+(N^q&(w^N))+j[14]+2792965006&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(w^P&(q^w))+j[15]+1236535329&4294967295,N=P+(D<<22&4294967295|D>>>10),D=w+(P^q&(N^P))+j[1]+4129170786&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(w^N))+j[6]+3225465664&4294967295,q=w+(D<<9&4294967295|D>>>23),D=P+(w^N&(q^w))+j[11]+643717713&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(P^q))+j[0]+3921069994&4294967295,N=P+(D<<20&4294967295|D>>>12),D=w+(P^q&(N^P))+j[5]+3593408605&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(w^N))+j[10]+38016083&4294967295,q=w+(D<<9&4294967295|D>>>23),D=P+(w^N&(q^w))+j[15]+3634488961&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(P^q))+j[4]+3889429448&4294967295,N=P+(D<<20&4294967295|D>>>12),D=w+(P^q&(N^P))+j[9]+568446438&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(w^N))+j[14]+3275163606&4294967295,q=w+(D<<9&4294967295|D>>>23),D=P+(w^N&(q^w))+j[3]+4107603335&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(P^q))+j[8]+1163531501&4294967295,N=P+(D<<20&4294967295|D>>>12),D=w+(P^q&(N^P))+j[13]+2850285829&4294967295,w=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(w^N))+j[2]+4243563512&4294967295,q=w+(D<<9&4294967295|D>>>23),D=P+(w^N&(q^w))+j[7]+1735328473&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^w&(P^q))+j[12]+2368359562&4294967295,N=P+(D<<20&4294967295|D>>>12),D=w+(N^P^q)+j[5]+4294588738&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^P)+j[8]+2272392833&4294967295,q=w+(D<<11&4294967295|D>>>21),D=P+(q^w^N)+j[11]+1839030562&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^w)+j[14]+4259657740&4294967295,N=P+(D<<23&4294967295|D>>>9),D=w+(N^P^q)+j[1]+2763975236&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^P)+j[4]+1272893353&4294967295,q=w+(D<<11&4294967295|D>>>21),D=P+(q^w^N)+j[7]+4139469664&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^w)+j[10]+3200236656&4294967295,N=P+(D<<23&4294967295|D>>>9),D=w+(N^P^q)+j[13]+681279174&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^P)+j[0]+3936430074&4294967295,q=w+(D<<11&4294967295|D>>>21),D=P+(q^w^N)+j[3]+3572445317&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^w)+j[6]+76029189&4294967295,N=P+(D<<23&4294967295|D>>>9),D=w+(N^P^q)+j[9]+3654602809&4294967295,w=N+(D<<4&4294967295|D>>>28),D=q+(w^N^P)+j[12]+3873151461&4294967295,q=w+(D<<11&4294967295|D>>>21),D=P+(q^w^N)+j[15]+530742520&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^w)+j[2]+3299628645&4294967295,N=P+(D<<23&4294967295|D>>>9),D=w+(P^(N|~q))+j[0]+4096336452&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~P))+j[7]+1126891415&4294967295,q=w+(D<<10&4294967295|D>>>22),D=P+(w^(q|~N))+j[14]+2878612391&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~w))+j[5]+4237533241&4294967295,N=P+(D<<21&4294967295|D>>>11),D=w+(P^(N|~q))+j[12]+1700485571&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~P))+j[3]+2399980690&4294967295,q=w+(D<<10&4294967295|D>>>22),D=P+(w^(q|~N))+j[10]+4293915773&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~w))+j[1]+2240044497&4294967295,N=P+(D<<21&4294967295|D>>>11),D=w+(P^(N|~q))+j[8]+1873313359&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~P))+j[15]+4264355552&4294967295,q=w+(D<<10&4294967295|D>>>22),D=P+(w^(q|~N))+j[6]+2734768916&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~w))+j[13]+1309151649&4294967295,N=P+(D<<21&4294967295|D>>>11),D=w+(P^(N|~q))+j[4]+4149444226&4294967295,w=N+(D<<6&4294967295|D>>>26),D=q+(N^(w|~P))+j[11]+3174756917&4294967295,q=w+(D<<10&4294967295|D>>>22),D=P+(w^(q|~N))+j[2]+718787259&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~w))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+P&4294967295,R.g[3]=R.g[3]+q&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const N=w-this.blockSize,j=this.C;let P=this.h,q=0;for(;q<w;){if(P==0)for(;q<=N;)o(this,R,q),q+=this.blockSize;if(typeof R=="string"){for(;q<w;)if(j[P++]=R.charCodeAt(q++),P==this.blockSize){o(this,j),P=0;break}}else for(;q<w;)if(j[P++]=R[q++],P==this.blockSize){o(this,j),P=0;break}}this.h=P,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,N=0;N<4;++N)for(let j=0;j<32;j+=8)R[w++]=this.g[N]>>>j&255;return R};function u(R,w){var N=y;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=w(R)}function d(R,w){this.h=w;const N=[];let j=!0;for(let P=R.length-1;P>=0;P--){const q=R[P]|0;j&&q==w||(N[P]=q,j=!1)}this.g=N}var y={};function g(R){return-128<=R&&R<128?u(R,function(w){return new d([w|0],w<0?-1:0)}):new d([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return V(p(-R));const w=[];let N=1;for(let j=0;R>=N;j++)w[j]=R/N|0,N*=4294967296;return new d(w,0)}function _(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return V(_(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(w,8));let j=T;for(let q=0;q<R.length;q+=8){var P=Math.min(8,R.length-q);const D=parseInt(R.substring(q,q+P),w);P<8?(P=p(Math.pow(w,P)),j=j.j(P).add(p(D))):(j=j.j(N),j=j.add(p(D)))}return j}var T=g(0),x=g(1),C=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-V(this).m();let R=0,w=1;for(let N=0;N<this.g.length;N++){const j=this.i(N);R+=(j>=0?j:4294967296+j)*w,w*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(U(this))return"0";if(B(this))return"-"+V(this).toString(R);const w=p(Math.pow(R,6));var N=this;let j="";for(;;){const P=H(N,w).g;N=Y(N,P.j(w));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=P,U(N))return q+j;for(;q.length<6;)q="0"+q;j=q+j}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function U(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function B(R){return R.h==-1}s.l=function(R){return R=Y(this,R),B(R)?-1:U(R)?0:1};function V(R){const w=R.g.length,N=[];for(let j=0;j<w;j++)N[j]=~R.g[j];return new d(N,~R.h).add(x)}s.abs=function(){return B(this)?V(this):this},s.add=function(R){const w=Math.max(this.g.length,R.g.length),N=[];let j=0;for(let P=0;P<=w;P++){let q=j+(this.i(P)&65535)+(R.i(P)&65535),D=(q>>>16)+(this.i(P)>>>16)+(R.i(P)>>>16);j=D>>>16,q&=65535,D&=65535,N[P]=D<<16|q}return new d(N,N[N.length-1]&-2147483648?-1:0)};function Y(R,w){return R.add(V(w))}s.j=function(R){if(U(this)||U(R))return T;if(B(this))return B(R)?V(this).j(V(R)):V(V(this).j(R));if(B(R))return V(this.j(V(R)));if(this.l(C)<0&&R.l(C)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,N=[];for(var j=0;j<2*w;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(let P=0;P<R.g.length;P++){const q=this.i(j)>>>16,D=this.i(j)&65535,he=R.i(P)>>>16,De=R.i(P)&65535;N[2*j+2*P]+=D*De,oe(N,2*j+2*P),N[2*j+2*P+1]+=q*De,oe(N,2*j+2*P+1),N[2*j+2*P+1]+=D*he,oe(N,2*j+2*P+1),N[2*j+2*P+2]+=q*he,oe(N,2*j+2*P+2)}for(R=0;R<w;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=w;R<2*w;R++)N[R]=0;return new d(N,0)};function oe(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function K(R,w){this.g=R,this.h=w}function H(R,w){if(U(w))throw Error("division by zero");if(U(R))return new K(T,T);if(B(R))return w=H(V(R),w),new K(V(w.g),V(w.h));if(B(w))return w=H(R,V(w)),new K(V(w.g),w.h);if(R.g.length>30){if(B(R)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var N=x,j=w;j.l(R)<=0;)N=k(N),j=k(j);var P=F(N,1),q=F(j,1);for(j=F(j,2),N=F(N,2);!U(j);){var D=q.add(j);D.l(R)<=0&&(P=P.add(N),q=D),j=F(j,1),N=F(N,1)}return w=Y(R,P.j(w)),new K(P,w)}for(P=T;R.l(w)>=0;){for(N=Math.max(1,Math.floor(R.m()/w.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),q=p(N),D=q.j(w);B(D)||D.l(R)>0;)N-=j,q=p(N),D=q.j(w);U(q)&&(q=x),P=P.add(q),R=Y(R,D)}return new K(P,R)}s.B=function(R){return H(this,R).h},s.and=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)&R.i(j);return new d(N,this.h&R.h)},s.or=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)|R.i(j);return new d(N,this.h|R.h)},s.xor=function(R){const w=Math.max(this.g.length,R.g.length),N=[];for(let j=0;j<w;j++)N[j]=this.i(j)^R.i(j);return new d(N,this.h^R.h)};function k(R){const w=R.g.length+1,N=[];for(let j=0;j<w;j++)N[j]=R.i(j)<<1|R.i(j-1)>>>31;return new d(N,R.h)}function F(R,w){const N=w>>5;w%=32;const j=R.g.length-N,P=[];for(let q=0;q<j;q++)P[q]=w>0?R.i(q+N)>>>w|R.i(q+N+1)<<32-w:R.i(q+N);return new d(P,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,RS=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,fi=d}).apply(typeof _E<"u"?_E:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CS,ec,IS,mh,Qm,jS,DS,MS;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var Q=h[A];if(!(Q in E))break e;E=E[Q]}h=h[h.length-1],A=E[h],v=v(A),v!=A&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&E.push([A,v[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,E){return h.call.apply(h.bind,arguments)}function p(h,v,E){return p=g,p.apply(null,arguments)}function _(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,Q,J){for(var de=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)de[Ce-2]=arguments[Ce];return v.prototype[Q].apply(A,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const v=h.length;if(v>0){const E=Array(v);for(let A=0;A<v;A++)E[A]=h[A];return E}return[]}function U(h,v){for(let A=1;A<arguments.length;A++){const Q=arguments[A];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=h.length||0;const J=Q.length||0;h.length=E+J;for(let de=0;de<J;de++)h[E+de]=Q[de]}else h.push(Q)}}class B{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(h){d.setTimeout(()=>{throw h},0)}function Y(){var h=R;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class oe{constructor(){this.h=this.g=null}add(v,E){const A=K.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var K=new B(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let k,F=!1,R=new oe,w=()=>{const h=Promise.resolve(void 0);k=()=>{h.then(N)}};function N(){for(var h;h=Y();){try{h.h.call(h.g)}catch(E){V(E)}var v=K;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}F=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function he(h,v){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(he,P),he.prototype.init=function(h,v){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),te=0;function ue(h,v,E,A,Q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=Q,this.key=++te,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,v,E){for(const A in h)v.call(E,h[A],A,h)}function O(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function ie(h){const v={};for(const E in h)v[E]=h[E];return v}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(h,v){let E,A;for(let Q=1;Q<arguments.length;Q++){A=arguments[Q];for(E in A)h[E]=A[E];for(let J=0;J<fe.length;J++)E=fe[J],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,E,A,Q){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const de=ye(h,v,A,Q);return de>-1?(v=h[de],E||(v.fa=!1)):(v=new ue(v,this.src,J,!!A,Q),v.fa=E,h.push(v)),v};function me(h,v){const E=v.type;if(E in h.g){var A=h.g[E],Q=Array.prototype.indexOf.call(A,v,void 0),J;(J=Q>=0)&&Array.prototype.splice.call(A,Q,1),J&&(X(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ye(h,v,E,A){for(let Q=0;Q<h.length;++Q){const J=h[Q];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==A)return Q}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),Ke={};function es(h,v,E,A,Q){if(Array.isArray(v)){for(let J=0;J<v.length;J++)es(h,v[J],E,A,Q);return null}return E=kc(E),h&&h[De]?h.J(v,E,y(A)?!!A.capture:!1,Q):Fo(h,v,E,!1,A,Q)}function Fo(h,v,E,A,Q,J){if(!v)throw Error("Invalid event type");const de=y(Q)?!!Q.capture:!!Q;let Ce=Ho(h);if(Ce||(h[ht]=Ce=new ce(h)),E=Ce.add(v,E,A,de,J),E.proxy)return E;if(A=ba(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)q||(Q=de),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),A,Q);else if(h.attachEvent)h.attachEvent(xa(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ba(){function h(E){return v.call(h.src,h.listener,E)}const v=pd;return h}function wa(h,v,E,A,Q){if(Array.isArray(v))for(var J=0;J<v.length;J++)wa(h,v[J],E,A,Q);else A=y(A)?!!A.capture:!!A,E=kc(E),h&&h[De]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],E=ye(v,E,A,Q),E>-1&&(X(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=Ho(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ye(v,E,A,Q)),(E=h>-1?v[h]:null)&&xi(E))}function xi(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[De])me(v.i,h);else{var E=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(E,A,h.capture):v.detachEvent?v.detachEvent(xa(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=Ho(v))?(me(E,h),E.h==0&&(E.src=null,v[ht]=null)):X(h)}}}function xa(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function pd(h,v){if(h.da)h=!0;else{v=new he(v,this);const E=h.listener,A=h.ha||h.src;h.fa&&xi(h),h=E.call(A,v)}return h}function Ho(h){return h=h[ht],h instanceof ce?h:null}var vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function kc(h){return typeof h=="function"?h:(h[vn]||(h[vn]=function(v){return h.handleEvent(v)}),h[vn])}function Ot(){j.call(this),this.i=new ce(this),this.M=this,this.G=null}T(Ot,j),Ot.prototype[De]=!0,Ot.prototype.removeEventListener=function(h,v,E,A){wa(this,h,v,E,A)};function zt(h,v){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new P(v,h);else if(v instanceof P)v.target=v.target||h;else{var Q=v;v=new P(A,h),ee(v,Q)}Q=!0;let J,de;if(E)for(de=E.length-1;de>=0;de--)J=v.g=E[de],Q=Us(J,A,!0,v)&&Q;if(J=v.g=h,Q=Us(J,A,!0,v)&&Q,Q=Us(J,A,!1,v)&&Q,E)for(de=0;de<E.length;de++)J=v.g=E[de],Q=Us(J,A,!1,v)&&Q}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let A=0;A<E.length;A++)X(E[A]);delete h.g[v],h.h--}}this.G=null},Ot.prototype.J=function(h,v,E,A){return this.i.add(String(h),v,!1,E,A)},Ot.prototype.K=function(h,v,E,A){return this.i.add(String(h),v,!0,E,A)};function Us(h,v,E,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Q=!0;for(let J=0;J<v.length;++J){const de=v[J];if(de&&!de.da&&de.capture==E){const Ce=de.listener,ot=de.ha||de.src;de.fa&&me(h.i,de),Q=Ce.call(ot,A)!==!1&&Q}}return Q&&!A.defaultPrevented}function gd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Go(h){h.g=gd(()=>{h.g=null,h.i&&(h.i=!1,Go(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class yd extends j{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(h){j.call(this),this.h=h,this.g={}}T(Ai,j);var Sr=[];function nn(h){Ee(h.g,function(v,E){this.g.hasOwnProperty(E)&&xi(v)},h),h.g={}}Ai.prototype.N=function(){Ai.Z.N.call(this),nn(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=d.JSON.stringify,fn=d.JSON.parse,vd=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Vc(){}function Lc(){}var ys={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tr(){P.call(this,"d")}T(Tr,P);function ts(){P.call(this,"c")}T(ts,P);var Ln={},br=null;function Aa(){return br=br||new Ot}Ln.Ia="serverreachability";function Qo(h){P.call(this,Ln.Ia,h)}T(Qo,P);function wr(h){const v=Aa();zt(v,new Qo(v))}Ln.STAT_EVENT="statevent";function Na(h,v){P.call(this,Ln.STAT_EVENT,h),this.stat=v}T(Na,P);function St(h){const v=Aa();zt(v,new Na(v,h))}Ln.Ja="timingevent";function Uc(h,v){P.call(this,Ln.Ja,h),this.size=v}T(Uc,P);function xr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Ar(){this.g=!0}Ar.prototype.ua=function(){this.g=!1};function Ko(h,v,E,A,Q,J){h.info(function(){if(h.g)if(J){var de="",Ce=J.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var ot=Ce[Ye].split("=");if(ot.length>1){const wt=ot[0];ot=ot[1];const An=wt.split("_");de=An.length>=2&&An[1]=="type"?de+(wt+"="+ot+"&"):de+(wt+"=redacted&")}}}else de=null;else de=J;return"XMLHTTP REQ ("+A+") [attempt "+Q+"]: "+v+`
`+E+`
`+de})}function $o(h,v,E,A,Q,J,de){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Q+"]: "+v+`
`+E+`
`+J+" "+de})}function qs(h,v,E,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+vs(h,E)+(A?" "+A:"")})}function _d(h,v){h.info(function(){return"TIMEOUT: "+v})}Ar.prototype.info=function(){};function vs(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var Q=A[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return Vn(J)}catch{return v}}var Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$t={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zs;function Ni(){}T(Ni,Vc),Ni.prototype.g=function(){return new XMLHttpRequest},zs=new Ni;function Ri(h){return encodeURIComponent(String(h))}function Ed(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function ns(h,v,E,A){this.j=h,this.i=v,this.l=E,this.S=A||1,this.V=new Ai(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nr}function Nr(){this.i=null,this.g="",this.h=!1}var Ra={},_s={};function Es(h,v,E){h.M=1,h.A=Fs(mt(v)),h.u=E,h.R=!0,Rr(h,null)}function Rr(h,v){h.F=Date.now(),Ci(h),h.B=mt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Fc(E.i,"t",A),h.C=0,E=h.j.L,h.h=new Nr,h.g=La(h.j,E?v:null,!h.u),h.P>0&&(h.O=new yd(p(h.Y,h,h.g),h.P)),v=h.V,E=h.g,A=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Sr[0]=Q.toString()),Q=Sr);for(let J=0;J<Q.length;J++){const de=es(E,Q[J],A||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=h.J?ie(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),wr(),Ko(h.i,h.v,h.B,h.l,h.S,h.u)}ns.prototype.ba=function(h){h=h.target;const v=this.O;v&&sn(h)==3?v.j():this.Y(h)},ns.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=sn(this.g),ot=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||qi(this.g)))){this.K||Ce!=4||ot==7||(ot==8||Ye<=0?wr(3):wr(2)),Ts(this);var v=this.g.ca();this.X=v;var E=Cr(this);if(this.o=v==200,$o(this.i,this.v,this.B,this.l,this.S,Ce,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,Q=this.g;if((A=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var J=A;break t}}J=null}if(h=J)qs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ca(this,h);else{this.o=!1,this.m=3,St(12),bs(this),Ii(this);break e}}if(this.R){h=!0;let wt;for(;!this.K&&this.C<E.length;)if(wt=qc(this,E),wt==_s){Ce==4&&(this.m=4,St(14),h=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==Ra){this.m=4,St(15),qs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else qs(this.i,this.l,wt,null),Ca(this,wt);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)qs(this.i,this.l,E,"[Invalid Chunked Response]"),bs(this),Ii(this);else if(E.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),rl(de),de.P=!0,St(11))}}else qs(this.i,this.l,E,null),Ca(this,E);Ce==4&&bs(this),this.o&&!this.K&&(Ce==4?il(this.j,this):(this.o=!1,Ci(this)))}else zi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),bs(this),Ii(this)}}}catch{}finally{}};function Cr(h){if(!bt(h))return h.g.la();const v=qi(h.g);if(v==="")return"";let E="";const A=v.length,Q=sn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bs(h),Ii(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,E+=h.h.i.decode(v[J],{stream:!(Q&&J==A-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function bt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function qc(h,v){var E=h.C,A=v.indexOf(`
`,E);return A==-1?_s:(E=Number(v.substring(E,A)),isNaN(E)?Ra:(A+=1,A+E>v.length?_s:(v=v.slice(A,A+E),h.C=A+E,v)))}ns.prototype.cancel=function(){this.K=!0,bs(this)};function Ci(h){h.T=Date.now()+h.H,Ss(h,h.H)}function Ss(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xr(p(h.aa,h),v)}function Ts(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ns.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(_d(this.i,this.B),this.M!=2&&(wr(),St(17)),bs(this),this.m=2,Ii(this)):Ss(this,this.T-h)};function Ii(h){h.j.I==0||h.K||il(h.j,h)}function bs(h){Ts(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,nn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Ca(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||Mi(E.h,h))){if(!h.L&&Mi(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Q=A;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Va(E),ws(E);else break e;sl(E),St(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=xr(p(E.Va,E),6e3));Un(E.h)<=1&&E.ta&&(E.ta=void 0)}else Qs(E,11)}else if((h.L||E.g==h)&&Va(E),!D(v))for(Q=E.Ba.g.parse(v),v=0;v<Q.length;v++){let Ye=Q[v];const wt=Ye[0];if(!(wt<=E.K))if(E.K=wt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const An=Ye[3];An!=null&&(E.ka=An,E.j.info("VER="+E.ka));const xs=Ye[4];xs!=null&&(E.za=xs,E.j.info("SVER="+E.za));const is=Ye[5];is!=null&&typeof is=="number"&&is>0&&(A=1.5*is,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const as=h.g;if(as){const os=as.g?as.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var J=A.h;J.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ia(J,J.h),J.h=null))}if(A.G){const ol=as.g?as.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(A.wa=ol,Ze(A.J,A.G,ol))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var de=h;if(A.na=Zc(A,A.L?A.ba:null,A.W),de.L){Bs(A.h,de);var Ce=de,ot=A.O;ot&&(Ce.H=ot),Ce.D&&(Ts(Ce),Ci(Ce)),A.g=de}else $c(A);E.i.length>0&&Gi(E)}else Ye[0]!="stop"&&Ye[0]!="close"||Qs(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Qs(E,7):Fi(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}wr(4)}catch{}}var Sd=class{constructor(h,v){this.g=h,this.map=v}};function ji(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Di(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Un(h){return h.h?1:h.g?h.g.size:0}function Mi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ia(h,v){h.g?h.g.add(v):h.h=v}function Bs(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ji.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ja(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return C(h.i)}var Da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Td(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let Q,J=null;A>=0?(Q=h[E].substring(0,A),J=h[E].substring(A+1)):Q=h[E],v(Q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function ss(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ss?(this.l=h.l,Ir(this,h.j),this.o=h.o,this.g=h.g,Pi(this,h.u),this.h=h.h,jr(this,Hc(h.i)),this.m=h.m):h&&(v=String(h).match(Da))?(this.l=!1,Ir(this,v[1]||"",!0),this.o=Oi(v[2]||""),this.g=Oi(v[3]||"",!0),Pi(this,v[4]),this.h=Oi(v[5]||"",!0),jr(this,v[6]||"",!0),this.m=Oi(v[7]||"")):(this.l=!1,this.i=new qn(null,this.l))}ss.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Bt(v,Xo,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Bt(v,Xo,!0),"@"),h.push(Ri(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Bt(E,E.charAt(0)=="/"?Dr:Wo,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Bt(E,Bc)),h.join("")},ss.prototype.resolve=function(h){const v=mt(this);let E=!!h.j;E?Ir(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var A=h.h;if(E)Pi(v,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Q=v.h.lastIndexOf("/");Q!=-1&&(A=v.h.slice(0,Q+1)+A)}if(Q=A,Q==".."||Q==".")A="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){A=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const J=[];for(let de=0;de<Q.length;){const Ce=Q[de++];Ce=="."?A&&de==Q.length&&J.push(""):Ce==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&de==Q.length&&J.push("")):(J.push(Ce),A=!0)}A=J.join("/")}else A=Q}return E?v.h=A:E=h.i.toString()!=="",E?jr(v,Hc(h.i)):E=!!h.m,E&&(v.m=h.m),v};function mt(h){return new ss(h)}function Ir(h,v,E){h.j=E?Oi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Pi(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function jr(h,v,E){v instanceof qn?(h.i=v,el(h.i,h.l)):(E||(v=Bt(v,zc)),h.i=new qn(v,h.l))}function Ze(h,v,E){h.i.set(v,E)}function Fs(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Oi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bt(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Yo),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yo(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xo=/[#\/\?@]/g,Wo=/[#\?:]/g,Dr=/[#\?]/g,zc=/[#\?@]/g,Bc=/#/g;function qn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Hs(h){h.g||(h.g=new Map,h.h=0,h.i&&Td(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=qn.prototype,s.add=function(h,v){Hs(this),this.i=null,h=rs(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Zo(h,v){Hs(h),v=rs(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Jo(h,v){return Hs(h),v=rs(h,v),h.g.has(v)}s.forEach=function(h,v){Hs(this),this.g.forEach(function(E,A){E.forEach(function(Q){h.call(v,Q,A,this)},this)},this)};function Ma(h,v){Hs(h);let E=[];if(typeof v=="string")Jo(h,v)&&(E=E.concat(h.g.get(rs(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}s.set=function(h,v){return Hs(this),this.i=null,h=rs(this,h),Jo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Ma(this,h),h.length>0?String(h[0]):v):v};function Fc(h,v,E){Zo(h,v),E.length>0&&(h.i=null,h.g.set(rs(h,v),C(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var E=v[A];const Q=Ri(E);E=Ma(this,E);for(let J=0;J<E.length;J++){let de=Q;E[J]!==""&&(de+="="+Ri(E[J])),h.push(de)}}return this.i=h.join("&")};function Hc(h){const v=new qn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function rs(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function el(h,v){v&&!h.j&&(Hs(h),h.i=null,h.g.forEach(function(E,A){const Q=A.toLowerCase();A!=Q&&(Zo(this,A),Fc(this,Q,E))},h)),h.j=v}function tl(h,v){const E=new Ar;if(d.Image){const A=new Image;A.onload=_(mn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=_(mn,E,"TestLoadImage: error",!1,v,A),A.onabort=_(mn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=_(mn,E,"TestLoadImage: timeout",!1,v,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function Mr(h,v){const E=new Ar,A=new AbortController,Q=setTimeout(()=>{A.abort(),mn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout(Q),J.ok?mn(E,"TestPingServer: ok",!0,v):mn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),mn(E,"TestPingServer: error",!1,v)})}function mn(h,v,E,A,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),A(E)}catch{}}function Gc(){this.g=new vd}function ki(h){this.i=h.Sb||null,this.h=h.ab||!1}T(ki,Vc),ki.prototype.g=function(){return new Vi(this.i,this.h)};function Vi(h,v){Ot.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Vi,Ot),s=Vi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Gs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pn(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?pn(this):Gs(this),this.readyState==3&&Pr(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,pn(this))},s.Na=function(h){this.g&&(this.response=h,pn(this))},s.ga=function(){this.g&&pn(this)};function pn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Gs(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Gs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Or(h){let v="";return Ee(h,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function zn(h,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Or(E),typeof h=="string"?E!=null&&Ri(E):Ze(h,v,E))}function rt(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,Ot);var Pa=/^https?$/i,Qc=["POST","PUT"];s=rt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zs.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Li(this,J);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Q in A)E.set(Q,A[Q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())E.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qc,v,void 0)>=0)||A||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of E)this.g.setRequestHeader(J,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Li(this,J)}};function Li(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Ui(h),kt(h)}function Ui(h){h.A||(h.A=!0,zt(h,"complete"),zt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,zt(this,"complete"),zt(this,"abort"),kt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kt(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?nl(this):this.Xa())},s.Xa=function(){nl(this)};function nl(h){if(h.h&&typeof u<"u"){if(h.v&&sn(h)==4)setTimeout(h.Ca.bind(h),0);else if(zt(h,"readystatechange"),sn(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=J===0){let de=String(h.D).match(Da)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),A=!Pa.test(de?de.toLowerCase():"")}E=A}if(E)zt(h,"complete"),zt(h,"success");else{h.o=6;try{var Q=sn(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",Ui(h)}}finally{kt(h)}}}}function kt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||zt(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function sn(h){return h.g?h.g.readyState:0}s.ca=function(){try{return sn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),fn(v)}};function qi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(h){const v={};h=(h.g&&sn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(D(h[A]))continue;var E=Ed(h[A]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[Q]||[];v[Q]=J,J.push(E)}O(v,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Oa(h){this.za=0,this.i=[],this.j=new Ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,h),this.Za=Bi("retryDelaySeedMs",1e4,h),this.Ta=Bi("forwardChannelMaxRetries",2,h),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ji(h&&h.concurrentRequestLimit),this.Ba=new Gc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Oa.prototype,s.ka=8,s.I=1,s.connect=function(h,v,E,A){St(0),this.W=h,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Zc(this,null,this.W),Gi(this)};function Fi(h){if(Hi(h),h.I==3){var v=h.V++,E=mt(h.J);if(Ze(E,"SID",h.M),Ze(E,"RID",v),Ze(E,"TYPE","terminate"),Qi(h,E),v=new ns(h,h.j,v),v.M=2,v.A=Fs(mt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=La(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ci(v)}Wc(h)}function ws(h){h.g&&(rl(h),h.g.cancel(),h.g=null)}function Hi(h){ws(h),h.v&&(d.clearTimeout(h.v),h.v=null),Va(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Gi(h){if(!Di(h.h)&&!h.m){h.m=!0;var v=h.Ea;k||w(),F||(k(),F=!0),R.add(v,h),h.D=0}}function bd(h,v){return Un(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xr(p(h.Ea,h,v),Xc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new ns(this,this.j,h);let J=this.o;if(this.U&&(J?(J=ie(J),ee(J,this.U)):J=this.U),this.u!==null||this.R||(Q.J=J,J=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=ka(this,Q,v),E=mt(this.J),Ze(E,"RID",h),Ze(E,"CVER",22),this.G&&Ze(E,"X-HTTP-Session-Id",this.G),Qi(this,E),J&&(this.R?v="headers="+Ri(Or(J))+"&"+v:this.u&&zn(E,this.u,J)),Ia(this.h,Q),this.Ra&&Ze(E,"TYPE","init"),this.S?(Ze(E,"$req",v),Ze(E,"SID","null"),Q.U=!0,Es(Q,E,null)):Es(Q,E,v),this.I=2}}else this.I==3&&(h?Kc(this,h):this.i.length==0||Di(this.h)||Kc(this))};function Kc(h,v){var E;v?E=v.l:E=h.V++;const A=mt(h.J);Ze(A,"SID",h.M),Ze(A,"RID",E),Ze(A,"AID",h.K),Qi(h,A),h.u&&h.o&&zn(A,h.u,h.o),E=new ns(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=ka(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ia(h.h,E),Es(E,A,v)}function Qi(h,v){h.H&&Ee(h.H,function(E,A){Ze(v,A,E)}),h.l&&Ee({},function(E,A){Ze(v,A,E)})}function ka(h,v,E){E=Math.min(h.i.length,E);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Ce=-1;for(;;){const ot=["count="+E];Ce==-1?E>0?(Ce=Q[0].g,ot.push("ofs="+Ce)):Ce=0:ot.push("ofs="+Ce);let Ye=!0;for(let wt=0;wt<E;wt++){var J=Q[wt].g;const An=Q[wt].map;if(J-=Ce,J<0)Ce=Math.max(0,Q[wt].g-100),Ye=!1;else try{J="req"+J+"_"||"";try{var de=An instanceof Map?An:Object.entries(An);for(const[xs,is]of de){let as=is;y(is)&&(as=Vn(is)),ot.push(J+xs+"="+encodeURIComponent(as))}}catch(xs){throw ot.push(J+"type="+encodeURIComponent("_badmap")),xs}}catch{A&&A(An)}}if(Ye){de=ot.join("&");break e}}de=void 0}return h=h.i.splice(0,E),v.G=h,de}function $c(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;k||w(),F||(k(),F=!0),R.add(v,h),h.A=0}}function sl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xr(p(h.Da,h),Xc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xr(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),ws(this),Yc(this))};function rl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Yc(h){h.g=new ns(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=mt(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),Qi(h,v),h.u&&h.o&&zn(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Fs(mt(v)),E.u=null,E.R=!0,Rr(E,h)}s.Va=function(){this.C!=null&&(this.C=null,ws(this),sl(this),St(19))};function Va(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function il(h,v){var E=null;if(h.g==v){Va(h),rl(h),h.g=null;var A=2}else if(Mi(h.h,v))E=v.G,Bs(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var Q=h.D;A=Aa(),zt(A,new Uc(A,E)),Gi(h)}else $c(h);else if(Q=v.m,Q==3||Q==0&&v.X>0||!(A==1&&bd(h,v)||A==2&&sl(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),Q){case 1:Qs(h,5);break;case 4:Qs(h,10);break;case 3:Qs(h,6);break;default:Qs(h,2)}}}function Xc(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function Qs(h,v){if(h.j.info("Error code "+v),v==2){var E=p(h.bb,h),A=h.Ua;const Q=!A;A=new ss(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ir(A,"https"),Fs(A),Q?tl(A.toString(),E):Mr(A.toString(),E)}else St(2);h.I=0,h.l&&h.l.pa(v),Wc(h),Hi(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Wc(h){if(h.I=0,h.ja=[],h.l){const v=ja(h.h);(v.length!=0||h.i.length!=0)&&(U(h.ja,v),U(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Zc(h,v,E){var A=E instanceof ss?mt(E):new ss(E);if(A.g!="")v&&(A.g=v+"."+A.g),Pi(A,A.u);else{var Q=d.location;A=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;const J=new ss(null);A&&Ir(J,A),v&&(J.g=v),Q&&Pi(J,Q),E&&(J.h=E),A=J}return E=h.G,v=h.wa,E&&v&&Ze(A,E,v),Ze(A,"VER",h.ka),Qi(h,A),A}function La(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new rt(new ki({ab:E})):new rt(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}s=Jc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ua(){}Ua.prototype.g=function(h,v){return new gn(h,v)};function gn(h,v){Ot.call(this),this.g=new Oa(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new kr(this)}T(gn,Ot),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Fi(this.g)},gn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Vn(h),h=E);v.i.push(new Sd(v.Ya++,h)),v.I==3&&Gi(v)},gn.prototype.N=function(){this.g.l=null,delete this.j,Fi(this.g),delete this.g,gn.Z.N.call(this)};function al(h){Tr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(al,Tr);function eu(){ts.call(this),this.status=1}T(eu,ts);function kr(h){this.g=h}T(kr,Jc),kr.prototype.ra=function(){zt(this.g,"a")},kr.prototype.qa=function(h){zt(this.g,new al(h))},kr.prototype.pa=function(h){zt(this.g,new eu)},kr.prototype.oa=function(){zt(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,MS=function(){return new Ua},DS=function(){return Aa()},jS=Ln,Qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,mh=Tt,$t.COMPLETE="complete",IS=$t,Lc.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,ec=Lc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,CS=rt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const EE="@firebase/firestore",SE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Ep("@firebase/firestore");function po(){return ya.logLevel}function ge(s,...e){if(ya.logLevel<=Ue.DEBUG){const n=e.map(jp);ya.debug(`Firestore (${Lo}): ${s}`,...n)}}function pr(s,...e){if(ya.logLevel<=Ue.ERROR){const n=e.map(jp);ya.error(`Firestore (${Lo}): ${s}`,...n)}}function No(s,...e){if(ya.logLevel<=Ue.WARN){const n=e.map(jp);ya.warn(`Firestore (${Lo}): ${s}`,...n)}}function jp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,PS(s,i,n)}function PS(s,e,n){let i=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw pr(i),new Error(i)}function $e(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||PS(e,o,i)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pR{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},y=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>y(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?y(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($e(typeof i.accessToken=="string",31837,{l:i}),new OS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class gR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new gR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const i=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new TE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=_R(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function qe(s,e){return s<e?-1:s>e?1:0}function Km(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return Im(o)===Im(u)?qe(o,u):Im(o)?1:-1}return qe(s.length,e.length)}const ER=55296,SR=57343;function Im(s){const e=s.charCodeAt(0);return e>=ER&&e<=SR}function Ro(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__name__";class js{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ae(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof js?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=js.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return qe(e.length,n.length)}static compareSegments(e,n){const i=js.isNumericId(e),o=js.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?js.extractNumericId(e).compare(js.extractNumericId(n)):Km(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fi.fromString(e.substring(4,e.length-2))}}class at extends js{construct(e,n,i){return new at(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends js{construct(e,n,i){return new en(e,n,i)}static isValidIdentifier(e){return TR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bE}static keyField(){return new en([bE])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(i+=y,o++):(u(),o++)}if(u(),d)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(at.fromString(e))}static fromName(e){return new Te(at.fromString(e).popFirst(5))}static empty(){return new Te(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(s,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function bR(s,e,n,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function wE(s){if(!Te.isDocumentKey(s))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xE(s){if(Te.isDocumentKey(s))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function VS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function $h(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae(12329,{type:typeof s})}function xn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(s);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Ic(s,e){if(!VS(s))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,NE=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*NE);return new ct(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AE)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NE}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Mt("string",ct._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function wR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(n+1,0):new ct(n,i));return new pi(o,Te.empty(),e)}function xR(s){return new pi(s.readTime,s.key,mc)}class pi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new pi(Re.min(),Te.empty(),mc)}static max(){return new pi(Re.max(),Te.empty(),mc)}}function AR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(s.documentKey,e.documentKey),n!==0?n:qe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==NR)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let o=0,u=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++u,d&&u===o&&n()}),(g=>i(g)))})),d=!0,u===o&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((o=>o?le.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,o)=>{const u=e.length,d=new Array(u);let y=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next((_=>{d[p]=_,++y,y===u&&i(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new le(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function CR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function Xh(s){return s==null}function Ch(s){return s===0&&1/s==-1/0}function IR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="";function jR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=RE(e)),e=DR(s.get(n),e);return RE(e)}function DR(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case LS:n+="";break;default:n+=u}}return n}function RE(s){return s+LS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ti(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function US(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new Jt(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new Ut(en.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qS("Invalid base64 string: "+u):u}})(e);return new tn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(s){if($e(!!s,39018),typeof s=="string"){let e=0;const n=MR.exec(s);if($e(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yi(s){return typeof s=="string"?tn.fromBase64String(s):tn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="server_timestamp",BS="__type__",FS="__previous_value__",HS="__local_write_time__";function Pp(s){return(s?.mapValue?.fields||{})[BS]?.stringValue===zS}function Wh(s){const e=s.mapValue.fields[FS];return Pp(e)?Wh(e):e}function pc(s){const e=gi(s.mapValue.fields[HS].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,i,o,u,d,y,g,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const Ih="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="__type__",OR="__max__",ih={mapValue:{}},QS="__vector__",jh="value";function vi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Pp(s)?4:VR(s)?9007199254740991:kR(s)?10:11:Ae(28295,{value:s})}function Ls(s,e){if(s===e)return!0;const n=vi(s);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return pc(s).isEqual(pc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=gi(o.timestampValue),y=gi(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return yi(o.bytesValue).isEqual(yi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Rt(o.geoPointValue.latitude)===Rt(u.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Rt(o.integerValue)===Rt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Rt(o.doubleValue),y=Rt(u.doubleValue);return d===y?Ch(d)===Ch(y):isNaN(d)&&isNaN(y)}return!1})(s,e);case 9:return Ro(s.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},y=u.mapValue.fields||{};if(CE(d)!==CE(y))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(y[g]===void 0||!Ls(d[g],y[g])))return!1;return!0})(s,e);default:return Ae(52216,{left:s})}}function yc(s,e){return(s.values||[]).find((n=>Ls(n,e)))!==void 0}function Co(s,e){if(s===e)return 0;const n=vi(s),i=vi(e);if(n!==i)return qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=Rt(u.integerValue||u.doubleValue),g=Rt(d.integerValue||d.doubleValue);return y<g?-1:y>g?1:y===g?0:isNaN(y)?isNaN(g)?0:-1:1})(s,e);case 3:return jE(s.timestampValue,e.timestampValue);case 4:return jE(pc(s),pc(e));case 5:return Km(s.stringValue,e.stringValue);case 6:return(function(u,d){const y=yi(u),g=yi(d);return y.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),g=d.split("/");for(let p=0;p<y.length&&p<g.length;p++){const _=qe(y[p],g[p]);if(_!==0)return _}return qe(y.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=qe(Rt(u.latitude),Rt(d.latitude));return y!==0?y:qe(Rt(u.longitude),Rt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return DE(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},g=d.fields||{},p=y[jh]?.arrayValue,_=g[jh]?.arrayValue,T=qe(p?.values?.length||0,_?.values?.length||0);return T!==0?T:DE(p,_)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===ih.mapValue&&d===ih.mapValue)return 0;if(u===ih.mapValue)return 1;if(d===ih.mapValue)return-1;const y=u.fields||{},g=Object.keys(y),p=d.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const x=Km(g[T],_[T]);if(x!==0)return x;const C=Co(y[g[T]],p[_[T]]);if(C!==0)return C}return qe(g.length,_.length)})(s.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function jE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return qe(s,e);const n=gi(s),i=gi(e),o=qe(n.seconds,i.seconds);return o!==0?o:qe(n.nanos,i.nanos)}function DE(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=Co(n[o],i[o]);if(u)return u}return qe(n.length,i.length)}function Io(s){return $m(s)}function $m(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=gi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Te.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=$m(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${$m(n.fields[d])}`;return o+"}"})(s.mapValue):Ae(61005,{value:s})}function ph(s){switch(vi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wh(s);return e?16+ph(e):16;case 5:return 2*s.stringValue.length;case 6:return yi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+ph(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Ti(i.fields,((u,d)=>{o+=u.length+ph(d)})),o})(s.mapValue);default:throw Ae(13486,{value:s})}}function ME(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ym(s){return!!s&&"integerValue"in s}function Op(s){return!!s&&"arrayValue"in s}function PE(s){return!!s&&"nullValue"in s}function OE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gh(s){return!!s&&"mapValue"in s}function kR(s){return(s?.mapValue?.fields||{})[GS]?.stringValue===QS}function oc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ti(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=oc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(s.arrayValue.values[n]);return e}return{...s}}function VR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===OR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=en.emptyPath(),i={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=y.popLast()}d?i[y.lastSegment()]=oc(d):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ti(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new wn(oc(this.value))}}function KS(s){const e=[];return Ti(s.fields,((n,i)=>{const o=new en([n]);if(gh(i)){const u=KS(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,i,o,u,d,y){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new cn(e,0,Re.min(),Re.min(),Re.min(),wn.empty(),0)}static newFoundDocument(e,n,i,o){return new cn(e,1,n,Re.min(),i,o,0)}static newNoDocument(e,n){return new cn(e,2,n,Re.min(),Re.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Re.min(),Re.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function kE(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=Te.comparator(Te.fromName(d.referenceValue),n.key):i=Co(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function VE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ls(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function LR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{}class Dt extends $S{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new qR(e,n,i):n==="array-contains"?new FR(e,i):n==="in"?new HR(e,i):n==="not-in"?new GR(e,i):n==="array-contains-any"?new QR(e,i):new Dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new zR(e,i):new BR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Co(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends $S{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ms(e,n)}matches(e){return YS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YS(s){return s.op==="and"}function XS(s){return UR(s)&&YS(s)}function UR(s){for(const e of s.filters)if(e instanceof ms)return!1;return!0}function Xm(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+Io(s.value);if(XS(s))return s.filters.map((e=>Xm(e))).join(",");{const e=s.filters.map((n=>Xm(n))).join(",");return`${s.op}(${e})`}}function WS(s,e){return s instanceof Dt?(function(i,o){return o instanceof Dt&&i.op===o.op&&i.field.isEqual(o.field)&&Ls(i.value,o.value)})(s,e):s instanceof ms?(function(i,o){return o instanceof ms&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,y)=>u&&WS(d,o.filters[y])),!0):!1})(s,e):void Ae(19439)}function ZS(s){return s instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`})(s):s instanceof ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(ZS).join(" ,")+"}"})(s):"Filter"}class qR extends Dt{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class zR extends Dt{constructor(e,n){super(e,"in",n),this.keys=JS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class BR extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=JS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function JS(s,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class FR extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Op(n)&&yc(n.arrayValue,this.value)}}class HR extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class GR extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class QR extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Op(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>yc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n=null,i=[],o=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function LE(s,e=null,n=[],i=[],o=null,u=null,d=null){return new KR(s,e,n,i,o,u,d)}function kp(s){const e=Ie(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Xm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Io(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Io(i))).join(",")),e.Te=n}return e.Te}function Vp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!LR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!WS(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!VE(s.startAt,e.startAt)&&VE(s.endAt,e.endAt)}function Wm(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n=null,i=[],o=[],u=null,d="F",y=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $R(s,e,n,i,o,u,d,y){return new zo(s,e,n,i,o,u,d,y)}function Zh(s){return new zo(s)}function UE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function e1(s){return s.collectionGroup!==null}function lc(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Ut(en.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(y=y.add(p.field))}))})),y})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vc(u,i))})),n.has(en.keyField().canonicalString())||e.Ie.push(new vc(en.keyField(),i))}return e.Ie}function Ps(s){const e=Ie(s);return e.Ee||(e.Ee=YR(e,lc(s))),e.Ee}function YR(s,e){if(s.limitType==="F")return LE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vc(o.field,u)}));const n=s.endAt?new Dh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Dh(s.startAt.position,s.startAt.inclusive):null;return LE(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Zm(s,e){const n=s.filters.concat([e]);return new zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Jm(s,e,n){return new zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Jh(s,e){return Vp(Ps(s),Ps(e))&&s.limitType===e.limitType}function t1(s){return`${kp(Ps(s))}|lt:${s.limitType}`}function go(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>ZS(o))).join(", ")}]`),Xh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Io(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Io(o))).join(",")),`Target(${i})`})(Ps(s))}; limitType=${s.limitType})`}function ed(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Te.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of lc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,y,g){const p=kE(d,y,g);return d.inclusive?p<=0:p<0})(i.startAt,lc(i),o)||i.endAt&&!(function(d,y,g){const p=kE(d,y,g);return d.inclusive?p>=0:p>0})(i.endAt,lc(i),o))})(s,e)}function XR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function n1(s){return(e,n)=>{let i=!1;for(const o of lc(s)){const u=WR(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function WR(s,e,n){const i=s.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,d,y){const g=d.data.field(u),p=y.data.field(u);return g!==null&&p!==null?Co(g,p):Ae(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return US(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new gt(Te.comparator);function gr(){return ZR}const s1=new gt(Te.comparator);function tc(...s){let e=s1;for(const n of s)e=e.insert(n.key,n);return e}function r1(s){let e=s1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ca(){return cc()}function i1(){return cc()}function cc(){return new Sa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const JR=new gt(Te.comparator),eC=new Ut(Te.comparator);function ze(...s){let e=eC;for(const n of s)e=e.add(n);return e}const tC=new Ut(qe);function nC(){return tC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function a1(s){return{integerValue:""+s}}function sC(s,e){return IR(e)?a1(e):Lp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function rC(s,e,n){return s instanceof Mh?(function(o,u){const d={fields:{[BS]:{stringValue:zS},[HS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Pp(u)&&(u=Wh(u)),u&&(d.fields[FS]=u),{mapValue:d}})(n,e):s instanceof _c?l1(s,e):s instanceof Ec?c1(s,e):(function(o,u){const d=o1(o,u),y=qE(d)+qE(o.Ae);return Ym(d)&&Ym(o.Ae)?a1(y):Lp(o.serializer,y)})(s,e)}function iC(s,e,n){return s instanceof _c?l1(s,e):s instanceof Ec?c1(s,e):n}function o1(s,e){return s instanceof Ph?(function(i){return Ym(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Mh extends td{}class _c extends td{constructor(e){super(),this.elements=e}}function l1(s,e){const n=u1(e);for(const i of s.elements)n.some((o=>Ls(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Ec extends td{constructor(e){super(),this.elements=e}}function c1(s,e){let n=u1(e);for(const i of s.elements)n=n.filter((o=>!Ls(o,i)));return{arrayValue:{values:n}}}class Ph extends td{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qE(s){return Rt(s.integerValue||s.doubleValue)}function u1(s){return Op(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function aC(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof _c&&o instanceof _c||i instanceof Ec&&o instanceof Ec?Ro(i.elements,o.elements,Ls):i instanceof Ph&&o instanceof Ph?Ls(i.Ae,o.Ae):i instanceof Mh&&o instanceof Mh})(s.transform,e.transform)}class oC{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class nd{}function h1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Up(s.key,Wn.none()):new jc(s.key,s.data,Wn.none());{const n=s.data,i=wn.empty();let o=new Ut(en.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new bi(s.key,i,new Pn(o.toArray()),Wn.none())}}function lC(s,e,n){s instanceof jc?(function(o,u,d){const y=o.value.clone(),g=BE(o.fieldTransforms,u,d.transformResults);y.setAll(g),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):s instanceof bi?(function(o,u,d){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const y=BE(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(d1(o)),g.setAll(y),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function uc(s,e,n,i){return s instanceof jc?(function(u,d,y,g){if(!yh(u.precondition,d))return y;const p=u.value.clone(),_=FE(u.fieldTransforms,g,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(s,e,n,i):s instanceof bi?(function(u,d,y,g){if(!yh(u.precondition,d))return y;const p=FE(u.fieldTransforms,g,d),_=d.data;return _.setAll(d1(u)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,i):(function(u,d,y){return yh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(s,e,n)}function cC(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=o1(i.transform,o||null);u!=null&&(n===null&&(n=wn.empty()),n.set(i.field,u))}return n||null}function zE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ro(i,o,((u,d)=>aC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class jc extends nd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bi extends nd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function d1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function BE(s,e,n){const i=new Map;$e(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,y=e.data.field(u.field);i.set(u.field,iC(d,y,n[o]))}return i}function FE(s,e,n){const i=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);i.set(o.field,rC(u,d,e))}return i}class Up extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uC extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&lC(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=i1();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=n.has(o.key)?null:y;const g=h1(d,y);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((n,i)=>zE(n,i)))&&Ro(this.baseMutations,e.baseMutations,((n,i)=>zE(n,i)))}}class qp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){$e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return JR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new qp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Fe;function mC(s){switch(s){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:s})}}function f1(s){if(s===void 0)return pr("GRPC error has no .code"),re.UNKNOWN;switch(s){case jt.OK:return re.OK;case jt.CANCELLED:return re.CANCELLED;case jt.UNKNOWN:return re.UNKNOWN;case jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case jt.INTERNAL:return re.INTERNAL;case jt.UNAVAILABLE:return re.UNAVAILABLE;case jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case jt.NOT_FOUND:return re.NOT_FOUND;case jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case jt.ABORTED:return re.ABORTED;case jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case jt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:s})}}(Fe=jt||(jt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new fi([4294967295,4294967295],0);function HE(s){const e=pC().encode(s),n=new RS;return n.update(e),new Uint8Array(n.digest())}function GE(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fi([n,i],0),new fi([o,u],0)]}class zp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(i<0)throw new nc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(fi.fromNumber(i)));return o.compare(gC)===1&&(o=new fi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=HE(e),[i,o]=GE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new zp(u,o,n);return i.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=HE(e),[i,o]=GE(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new sd(Re.min(),o,new gt(qe),gr(),ze())}}class Dc{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Dc(i,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class m1{constructor(e,n){this.targetId=e,this.Ce=n}}class p1{constructor(e,n,i=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class QE{constructor(){this.ve=0,this.Fe=KE(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),i=ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ae(38017,{changeType:u})}})),new Dc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=KE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yC{constructor(e){this.Ge=e,this.ze=new Map,this.je=gr(),this.Je=ah(),this.He=ah(),this.Ye=new gt(qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Wm(u))if(i===0){const d=new Te(u.path);this.et(n,d,cn.newNoDocument(d,Re.min()))}else $e(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const y=this.ut(e),g=y?this.ct(y,e,d):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,y;try{d=yi(i).toUint8Array()}catch(g){if(g instanceof qS)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{y=new zp(d,o,u)}catch(g){return No(g instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return y.ge===0?null:y}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&Wm(y.target)){const g=new Te(y.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,cn.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let i=ze();this.He.forEach(((u,d)=>{let y=!0;d.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new sd(e,n,this.Ye,this.je,i);return this.je=gr(),this.Je=ah(),this.He=ah(),this.Ye=new gt(qe),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new QE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ah(){return new gt(Te.comparator)}function KE(){return new gt(Te.comparator)}const vC={asc:"ASCENDING",desc:"DESCENDING"},_C={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EC={and:"AND",or:"OR"};class SC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(s,e){return s.useProto3Json||Xh(e)?e:{value:e}}function Oh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function TC(s,e){return Oh(s,e.toTimestamp())}function Os(s){return $e(!!s,49232),Re.fromTimestamp((function(n){const i=gi(n);return new ct(i.seconds,i.nanos)})(s))}function Bp(s,e){return tp(s,e).canonicalString()}function tp(s,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function y1(s){const e=at.fromString(s);return $e(T1(e),10190,{key:e.toString()}),e}function np(s,e){return Bp(s.databaseId,e.path)}function jm(s,e){const n=y1(e);if(n.get(1)!==s.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Te(_1(n))}function v1(s,e){return Bp(s.databaseId,e)}function bC(s){const e=y1(s);return e.length===4?at.emptyPath():_1(e)}function sp(s){return new at(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function _1(s){return $e(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function $E(s,e,n){return{name:np(s,e),fields:n.value.mapValue.fields}}function wC(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?($e(_===void 0||typeof _=="string",58123),tn.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),tn.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(p){const _=p.code===void 0?re.UNKNOWN:f1(p.code);return new pe(_,p.message||"")})(d);n=new p1(i,o,u,y||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=jm(s,i.document.name),u=Os(i.document.updateTime),d=i.document.createTime?Os(i.document.createTime):Re.min(),y=new wn({mapValue:{fields:i.document.fields}}),g=cn.newFoundDocument(o,u,d,y),p=i.targetIds||[],_=i.removedTargetIds||[];n=new vh(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=jm(s,i.document),u=i.readTime?Os(i.readTime):Re.min(),d=cn.newNoDocument(o,u),y=i.removedTargetIds||[];n=new vh([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=jm(s,i.document),u=i.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new fC(o,u),y=i.targetId;n=new m1(y,d)}}return n}function xC(s,e){let n;if(e instanceof jc)n={update:$E(s,e.key,e.value)};else if(e instanceof Up)n={delete:np(s,e.key)};else if(e instanceof bi)n={update:$E(s,e.key,e.data),updateMask:PC(e.fieldMask)};else{if(!(e instanceof uC))return Ae(16599,{Vt:e.type});n={verify:np(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const y=d.transform;if(y instanceof Mh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof _c)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Ph)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Ae(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:TC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(s,e.precondition)),n}function AC(s,e){return s&&s.length>0?($e(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?Os(o.updateTime):Os(u);return d.isEqual(Re.min())&&(d=Os(u)),new oC(d,o.transformResults||[])})(n,e)))):[]}function NC(s,e){return{documents:[v1(s,e.path)]}}function RC(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=v1(s,o);const u=(function(p){if(p.length!==0)return S1(ms.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(p){if(p.length!==0)return p.map((_=>(function(x){return{field:yo(x.field),direction:jC(x.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=ep(s,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function CC(s){let e=bC(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){$e(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const x=E1(T);return x instanceof ms&&XS(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((x=>(function(U){return new vc(vo(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(x)))})(n.orderBy));let y=null;n.limit&&(y=(function(T){let x;return x=typeof T=="object"?T.value:T,Xh(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(T){const x=!!T.before,C=T.values||[];return new Dh(C,x)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const x=!T.before,C=T.values||[];return new Dh(C,x)})(n.endAt)),$R(e,o,d,u,y,"F",g,p)}function IC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=vo(n.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vo(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=vo(n.unaryFilter.field);return Dt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Dt.create(vo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ms.create(n.compositeFilter.filters.map((i=>E1(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(s):Ae(30097,{filter:s})}function jC(s){return vC[s]}function DC(s){return _C[s]}function MC(s){return EC[s]}function yo(s){return{fieldPath:s.canonicalString()}}function vo(s){return en.fromServerFormat(s.fieldPath)}function S1(s){return s instanceof Dt?(function(n){if(n.op==="=="){if(OE(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NAN"}};if(PE(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OE(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NAN"}};if(PE(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(n.field),op:DC(n.op),value:n.value}}})(s):s instanceof ms?(function(n){const i=n.getFilters().map((o=>S1(o)));return i.length===1?i[0]:{compositeFilter:{op:MC(n.op),filters:i}}})(s):Ae(54877,{filter:s})}function PC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function T1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,i,o,u=Re.min(),d=Re.min(),y=tn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=g}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.yt=e}}function kC(s){const e=CC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.Cn=new LC}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(pi.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class LC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Ut(at.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ut(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},b1=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(b1,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",UC=1048576;function WE([s,e],[n,i]){const o=qe(s,n);return o===0?qe(e,i):o}class qC{constructor(e){this.Ir=e,this.buffer=new Ut(WE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();WE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(XE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qo(n)?ge(XE,"Ignoring IndexedDB error during garbage collection: ",n):await Uo(n)}await this.Vr(3e5)}))}}class BC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Yh.ce);const i=new qC(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(YE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,u,d,y,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,y=Date.now(),this.removeTargets(e,i,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(p=Date.now(),po()<=Ue.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${u} targets in `+(g-y)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function FC(s,e){return new BC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.changes=new Sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&uc(i.mutation,o,Pn.empty(),ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ze()){const o=ca();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let d=tc();return u.forEach(((y,g)=>{d=d.insert(y,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=ca();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ze())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,i,o){let u=gr();const d=cc(),y=(function(){return cc()})();return n.forEach(((g,p)=>{const _=i.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof bi)?u=u.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),uc(_.mutation,p,_.mutation.getFieldMask(),ct.now())):d.set(p.key,Pn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,_)=>d.set(p,_))),n.forEach(((p,_)=>y.set(p,new GC(_,d.get(p)??null)))),y)))}recalculateAndSaveOverlays(e,n){const i=cc();let o=new gt(((d,y)=>d-y)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let _=i.get(g)||Pn.empty();_=y.applyToLocalView(p,_),i.set(g,_);const T=(o.get(y.batchId)||ze()).add(g);o=o.insert(y.batchId,T)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const g=y.getNext(),p=g.key,_=g.value,T=i1();_.forEach((x=>{if(!u.has(x)){const C=h1(n.get(x),i.get(x));C!==null&&T.set(x,C),u=u.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,T))}return le.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):e1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):le.resolve(ca());let y=mc,g=u;return d.next((p=>le.forEach(p,((_,T)=>(y<T.largestBatchId&&(y=T.largestBatchId),u.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{g=g.insert(_,x)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,ze()))).next((_=>({batchId:y,changes:r1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((i=>{let o=tc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=tc();return this.indexManager.getCollectionParents(e,u).next((y=>le.forEach(y,(g=>{const p=(function(T,x){return new zo(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next((_=>{_.forEach(((T,x)=>{d=d.insert(T,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((d=>{u.forEach(((g,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,cn.newInvalidDocument(_)))}));let y=tc();return d.forEach(((g,p)=>{const _=u.get(g);_!==void 0&&uc(_.mutation,p,Pn.empty(),ct.now()),ed(n,p)&&(y=y.insert(g,p))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Os(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:kC(o.bundledQuery),readTime:Os(o.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ca();return le.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.St(e,n,u)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const o=ca(),u=n.length+1,d=new Te(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const g=y.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new gt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=u.get(p.largestBatchId);_===null&&(_=ca(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const y=ca(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>y.set(p,_))),!(y.size()>=o)););return le.resolve(y)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new dC(n,i));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Qr=new Ut(Qt.$r),this.Ur=new Ut(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Qt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Te(new at([])),i=new Qt(n,e),o=new Qt(n,e+1),u=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new at([])),i=new Qt(n,e),o=new Qt(n,e+1);let u=ze();return this.Ur.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Qt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||qe(e.Yr,n.Yr)}static Kr(e,n){return qe(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Qt.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new hC(u,n,i,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Qt(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(d=>{const y=this.Xr(d.Yr);u.push(y)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ut(qe);return n.forEach((o=>{const u=new Qt(o,0),d=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(y=>{i=i.add(y.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;Te.isDocumentKey(u)||(u=u.child(""));const d=new Qt(new Te(u),0);let y=new Ut(qe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(y=y.add(g.Yr)),!0)}),d),le.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,(o=>{const u=new Qt(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Qt(n,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.ri=e,this.docs=(function(){return new gt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let i=gr();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():cn.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=gr();const d=n.path,y=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(y);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||AR(xR(_),i)<=0||(o.has(_.key)||ed(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Ae(9500)}ii(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new ZC(this)}getSize(e){return le.resolve(this.size)}}class ZC extends HC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.persistence=e,this.si=new Sa((n=>kp(n)),Vp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Fp,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&i.get(y.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yh(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=e(this),this.Pi=new JC(this),this.indexManager=new VC,this.remoteDocumentCache=(function(o){return new WC(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new OC(n),this.Ii=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $C,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new XC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const o=new eI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class eI extends RR{constructor(e){super(),this.currentSequenceNumber=e}}class Hp{constructor(e){this.persistence=e,this.Ri=new Fp,this.Vi=null}static mi(e){return new Hp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new Sa((i=>jR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=FC(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?le.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(i++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=ze(),o=ze();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ix()?8:CR(dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new tI;return this.Ss(e,n,d).next((y=>{if(u.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>u.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(po()<=Ue.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(po()<=Ue.DEBUG&&ge("QueryEngine","Query:",go(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(po()<=Ue.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(n))):le.resolve())}ys(e,n){if(UE(n))return le.resolve(null);let i=Ps(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Jm(n,null,"F"),i=Ps(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=ze(...u);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.Ds(n,y);return this.Cs(n,p,d,g.readTime)?this.ys(e,Jm(n,null,"F")):this.vs(e,p,n,g)}))))})))))}ws(e,n,i,o){return UE(n)||o.isEqual(Re.min())?le.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,i,o)?le.resolve(null):(po()<=Ue.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(n)),this.vs(e,d,n,wR(o,mc)).next((y=>y)))}))}Ds(e,n){let i=new Ut(n1(e));return n.forEach(((o,u)=>{ed(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return po()<=Ue.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,pi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",sI=3e8;class rI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(qe),this.xs=new Sa((u=>kp(u)),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function iI(s,e,n,i){return new rI(s,e,n,i)}async function x1(s,e){const n=Ie(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],y=[];let g=ze();for(const p of o){d.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of u){y.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(i,g).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:y})))}))}))}function aI(s,e){const n=Ie(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,g,p,_){const T=p.batch,x=T.keys();let C=le.resolve();return x.forEach((U=>{C=C.next((()=>_.getEntry(g,U))).next((B=>{const V=p.docVersions.get(U);$e(V!==null,48541),B.version.compareTo(V)<0&&(T.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),_.addEntry(B)))}))})),C.next((()=>y.mutationQueue.removeMutationBatch(g,T)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(y){let g=ze();for(let p=0;p<y.mutationResults.length;++p)y.mutationResults[p].transformResults.length>0&&(g=g.add(y.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function A1(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function oI(s,e){const n=Ie(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((_,T)=>{const x=o.get(T);if(!x)return;y.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,T))));let C=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(tn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(T,C),(function(B,V,Y){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=sI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(x,C,_)&&y.push(n.Pi.updateTargetData(u,C))}));let g=gr(),p=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),y.push(lI(u,d,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!i.isEqual(Re.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));y.push(_)}return le.waitFor(y).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function lI(s,e,n){let i=ze(),o=ze();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=gr();return n.forEach(((y,g)=>{const p=u.get(y);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(y)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(y,g.readTime),d=d.insert(y,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),d=d.insert(y,g)):ge(Qp,"Ignoring outdated watch update for ",y,". Current version:",p.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function cI(s,e){const n=Ie(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function uI(s,e){const n=Ie(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((u=>u?(o=u,le.resolve(o)):n.Pi.allocateTargetId(i).next((d=>(o=new ci(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function rp(s,e,n){const i=Ie(s),o=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!qo(d))throw d;ge(Qp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function ZE(s,e,n){const i=Ie(s);let o=Re.min(),u=ze();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,p,_){const T=Ie(g),x=T.xs.get(_);return x!==void 0?le.resolve(T.Ms.get(x)):T.Pi.getTargetData(p,_)})(i,d,Ps(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,y.targetId).next((g=>{u=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?u:ze()))).next((y=>(hI(i,XR(e),y),{documents:y,Qs:u})))))}function hI(s,e,n){let i=s.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class JE{constructor(){this.activeTargetIds=nC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dI{constructor(){this.Mo=new JE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="ConnectivityMonitor";class t0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(e0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(e0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function ip(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",mI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,u){const d=ip(),y=this.zo(e,n.toUriEncodedString());ge(Dm,`Sending RPC '${e}' ${d}:`,y,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(y),_=Oo(p);return this.Jo(e,y,g,i,_).then((T=>(ge(Dm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw No(Dm,`RPC '${e}' ${d} failed with error: `,T,"url: ",y,"request:",i),T}))}Ho(e,n,i,o,u,d){return this.Go(e,n,i,o,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const i=mI[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class yI extends pI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const d=ip();return new Promise(((y,g)=>{const p=new CS;p.setWithCredentials(!0),p.listenOnce(IS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case mh.NO_ERROR:const T=p.getResponseJson();ge(on,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),y(T);break;case mh.TIMEOUT:ge(on,`RPC '${e}' ${d} timed out`),g(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const x=p.getStatus();if(ge(on,`RPC '${e}' ${d} failed with status:`,x,"response text:",p.getResponseText()),x>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C?.error;if(U&&U.status&&U.message){const B=(function(Y){const oe=Y.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(oe)>=0?oe:re.UNKNOWN})(U.status);g(new pe(B,U.message))}else g(new pe(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(on,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ge(on,`RPC '${e}' ${d} sending request:`,o),p.send(n,"POST",_,i,15)}))}T_(e,n,i){const o=ip(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=MS(),y=DS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const _=u.join("");ge(on,`Creating RPC '${e}' stream ${o}: ${_}`,g);const T=d.createWebChannel(_,g);this.I_(T);let x=!1,C=!1;const U=new gI({Yo:V=>{C?ge(on,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(x||(ge(on,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),ge(on,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Zo:()=>T.close()}),B=(V,Y,oe)=>{V.listen(Y,(K=>{try{oe(K)}catch(H){setTimeout((()=>{throw H}),0)}}))};return B(T,ec.EventType.OPEN,(()=>{C||(ge(on,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),B(T,ec.EventType.CLOSE,(()=>{C||(C=!0,ge(on,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(T))})),B(T,ec.EventType.ERROR,(V=>{C||(C=!0,No(on,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),U.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),B(T,ec.EventType.MESSAGE,(V=>{if(!C){const Y=V.data[0];$e(!!Y,16349);const oe=Y,K=oe?.error||oe[0]?.error;if(K){ge(on,`RPC '${e}' stream ${o} received error:`,K);const H=K.status;let k=(function(w){const N=jt[w];if(N!==void 0)return f1(N)})(H),F=K.message;k===void 0&&(k=re.INTERNAL,F="Unknown error status: "+H+" with message "+K.message),C=!0,U.a_(new pe(k,F)),T.close()}else ge(on,`RPC '${e}' stream ${o} received:`,Y),U.u_(Y)}})),B(y,jS.STAT_EVENT,(V=>{V.stat===Qm.PROXY?ge(on,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Qm.NOPROXY&&ge(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){return new SC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="PersistentStream";class R1{constructor(e,n,i,o,u,d,y,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new N1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(n0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(n0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends R1{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wC(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Os(d.readTime):Re.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(u,d){let y;const g=d.target;if(y=Wm(g)?{documents:NC(u,g)}:{query:RC(u,g).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=g1(u,d.resumeToken);const p=ep(u,d.expectedCount);p!==null&&(y.expectedCount=p)}else if(d.snapshotVersion.compareTo(Re.min())>0){y.readTime=Oh(u,d.snapshotVersion.toTimestamp());const p=ep(u,d.expectedCount);p!==null&&(y.expectedCount=p)}return y})(this.serializer,e);const i=IC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class _I extends R1{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=AC(e.writeResults,e.commitTime),i=Os(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>xC(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{}class SI extends EI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,tp(n,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(re.UNKNOWN,u.toString())}))}Ho(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,tp(n,i),o,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pr(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class bI{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Ta(this)&&(ge(va,"Restarting streams for network reachability change."),await(async function(g){const p=Ie(g);p.Ea.add(4),await Mc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await id(p)})(this))}))})),this.Ra=new TI(i,o)}}async function id(s){if(Ta(s))for(const e of s.da)await e(!0)}async function Mc(s){for(const e of s.da)await e(!1)}function C1(s,e){const n=Ie(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xp(n)?Yp(n):Bo(n).O_()&&$p(n,e))}function Kp(s,e){const n=Ie(s),i=Bo(n);n.Ia.delete(e),i.O_()&&I1(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ta(n)&&n.Ra.set("Unknown"))}function $p(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bo(s).Y_(e)}function I1(s,e){s.Va.Ue(e),Bo(s).Z_(e)}function Yp(s){s.Va=new yC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Bo(s).start(),s.Ra.ua()}function Xp(s){return Ta(s)&&!Bo(s).x_()&&s.Ia.size>0}function Ta(s){return Ie(s).Ea.size===0}function j1(s){s.Va=void 0}async function wI(s){s.Ra.set("Online")}async function xI(s){s.Ia.forEach(((e,n)=>{$p(s,e)}))}async function AI(s,e){j1(s),Xp(s)?(s.Ra.ha(e),Yp(s)):s.Ra.set("Unknown")}async function NI(s,e,n){if(s.Ra.set("Online"),e instanceof p1&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(s,e)}catch(i){ge(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vh(s,i)}else if(e instanceof vh?s.Va.Ze(e):e instanceof m1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const i=await A1(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const y=u.Va.Tt(d);return y.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(g.resumeToken,d))}})),y.targetMismatches.forEach(((g,p)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(tn.EMPTY_BYTE_STRING,_.snapshotVersion)),I1(u,g);const T=new ci(_.target,g,p,_.sequenceNumber);$p(u,T)})),u.remoteSyncer.applyRemoteEvent(y)})(s,n)}catch(i){ge(va,"Failed to raise snapshot:",i),await Vh(s,i)}}async function Vh(s,e,n){if(!qo(e))throw e;s.Ea.add(1),await Mc(s),s.Ra.set("Offline"),n||(n=()=>A1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(va,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await id(s)}))}function D1(s,e){return e().catch((n=>Vh(s,n,e)))}async function ad(s){const e=Ie(s),n=_i(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;RI(e);)try{const o=await cI(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,CI(e,o)}catch(o){await Vh(e,o)}M1(e)&&P1(e)}function RI(s){return Ta(s)&&s.Ta.length<10}function CI(s,e){s.Ta.push(e);const n=_i(s);n.O_()&&n.X_&&n.ea(e.mutations)}function M1(s){return Ta(s)&&!_i(s).x_()&&s.Ta.length>0}function P1(s){_i(s).start()}async function II(s){_i(s).ra()}async function jI(s){const e=_i(s);for(const n of s.Ta)e.ea(n.mutations)}async function DI(s,e,n){const i=s.Ta.shift(),o=qp.from(i,e,n);await D1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ad(s)}async function MI(s,e){e&&_i(s).X_&&await(async function(i,o){if((function(d){return mC(d)&&d!==re.ABORTED})(o.code)){const u=i.Ta.shift();_i(i).B_(),await D1(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ad(i)}})(s,e),M1(s)&&P1(s)}async function s0(s,e){const n=Ie(s);n.asyncQueue.verifyOperationInProgress(),ge(va,"RemoteStore received new credentials");const i=Ta(n);n.Ea.add(3),await Mc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await id(n)}async function PI(s,e){const n=Ie(s);e?(n.Ea.delete(2),await id(n)):e||(n.Ea.add(2),await Mc(n),n.Ra.set("Unknown"))}function Bo(s){return s.ma||(s.ma=(function(n,i,o){const u=Ie(n);return u.sa(),new vI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:wI.bind(null,s),t_:xI.bind(null,s),r_:AI.bind(null,s),H_:NI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Xp(s)?Yp(s):s.Ra.set("Unknown")):(await s.ma.stop(),j1(s))}))),s.ma}function _i(s){return s.fa||(s.fa=(function(n,i,o){const u=Ie(n);return u.sa(),new _I(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:II.bind(null,s),r_:MI.bind(null,s),ta:jI.bind(null,s),na:DI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ad(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(va,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,y=new Wp(e,n,d,o,u);return y.start(i),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(s,e){if(pr("AsyncQueue",`${e}: ${s}`),qo(s))return new pe(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=tc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.ga=new gt(Te.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Do{constructor(e,n,i,o,u,d,y,g,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new Do(e,n,wo.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kI{constructor(){this.queries=i0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ie(n),u=o.queries;o.queries=i0(),u.forEach(((d,y)=>{for(const g of y.Sa)g.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function i0(){return new Sa((s=>t1(s)),Jh)}async function Jp(s,e){const n=Ie(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new OI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=Zp(d,`Initialization of query '${go(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&tg(n)}async function eg(s,e){const n=Ie(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function VI(s,e){const n=Ie(s);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const y of d.Sa)y.Fa(o)&&(i=!0);d.wa=o}}i&&tg(n)}function LI(s,e,n){const i=Ie(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function tg(s){s.Ca.forEach((e=>{e.next()}))}var ap,a0;(a0=ap||(ap={})).Ma="default",a0.Cache="cache";class ng{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Do(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.key=e}}class k1{constructor(e){this.key=e}}class UI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=n1(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new r0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const x=o.get(_),C=ed(this.query,T)?T:null,U=!!x&&this.mutatedKeys.has(x.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;x&&C?x.data.isEqual(C.data)?U!==B&&(i.track({type:3,doc:C}),V=!0):this.su(x,C)||(i.track({type:2,doc:C}),V=!0,(g&&this.eu(C,g)>0||p&&this.eu(C,p)<0)&&(y=!0)):!x&&C?(i.track({type:0,doc:C}),V=!0):x&&!C&&(i.track({type:1,doc:x}),V=!0,(g||p)&&(y=!0)),V&&(C?(d=d.add(C),u=B?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:y,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,T)=>(function(C,U){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:V})}};return B(C)-B(U)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const y=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,d.length!==0||p?{snapshot:new Do(this.query,e.tu,u,d,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new k1(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new O1(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Do.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sg="SyncEngine";class qI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class zI{constructor(e){this.key=e,this.hu=!1}}class BI{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Sa((y=>t1(y)),Jh),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new Fp,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FI(s,e,n=!0){const i=B1(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await V1(i,e,n,!0),o}async function HI(s,e){const n=B1(s);await V1(n,e,!0,!1)}async function V1(s,e,n,i){const o=await uI(s.localStore,Ps(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let y;return i&&(y=await GI(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&C1(s.remoteStore,o),y}async function GI(s,e,n,i,o){s.pu=(T,x,C)=>(async function(B,V,Y,oe){let K=V.view.ru(Y);K.Cs&&(K=await ZE(B.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,K))));const H=oe&&oe.targetChanges.get(V.targetId),k=oe&&oe.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(K,B.isPrimaryClient,H,k);return l0(B,V.targetId,F.au),F.snapshot})(s,T,x,C);const u=await ZE(s.localStore,e,!0),d=new UI(e,u.Qs),y=d.ru(u.documents),g=Dc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),p=d.applyChanges(y,s.isPrimaryClient,g);l0(s,n,p.au);const _=new qI(e,n,d);return s.Tu.set(e,_),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),p.snapshot}async function QI(s,e,n){const i=Ie(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!Jh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await rp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Kp(i.remoteStore,o.targetId),op(i,o.targetId)})).catch(Uo)):(op(i,o.targetId),await rp(i.localStore,o.targetId,!0))}async function KI(s,e){const n=Ie(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Kp(n.remoteStore,i.targetId))}async function $I(s,e,n){const i=tj(s);try{const o=await(function(d,y){const g=Ie(d),p=ct.now(),_=y.reduce(((C,U)=>C.add(U.key)),ze());let T,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=gr(),B=ze();return g.Ns.getEntries(C,_).next((V=>{U=V,U.forEach(((Y,oe)=>{oe.isValidDocument()||(B=B.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,U))).next((V=>{T=V;const Y=[];for(const oe of y){const K=cC(oe,T.get(oe.key).overlayedDocument);K!=null&&Y.push(new bi(oe.key,K,KS(K.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,p,Y,y)})).next((V=>{x=V;const Y=V.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(C,V.batchId,Y)}))})).then((()=>({batchId:x.batchId,changes:r1(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,y,g){let p=d.Vu[d.currentUser.toKey()];p||(p=new gt(qe)),p=p.insert(y,g),d.Vu[d.currentUser.toKey()]=p})(i,o.batchId,n),await Pc(i,o.changes),await ad(i.remoteStore)}catch(o){const u=Zp(o,"Failed to persist write");n.reject(u)}}async function L1(s,e){const n=Ie(s);try{const i=await oI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?$e(d.hu,14607):o.removedDocuments.size>0&&($e(d.hu,42227),d.hu=!1))})),await Pc(n,i,e)}catch(i){await Uo(i)}}function o0(s,e,n){const i=Ie(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const g=Ie(d);g.onlineState=y;let p=!1;g.queries.forEach(((_,T)=>{for(const x of T.Sa)x.va(y)&&(p=!0)})),p&&tg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YI(s,e,n){const i=Ie(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new gt(Te.comparator);d=d.insert(u,cn.newNoDocument(u,Re.min()));const y=ze().add(u),g=new sd(Re.min(),new Map,new gt(qe),d,y);await L1(i,g),i.du=i.du.remove(u),i.Au.delete(e),rg(i)}else await rp(i.localStore,e,!1).then((()=>op(i,e,n))).catch(Uo)}async function XI(s,e){const n=Ie(s),i=e.batch.batchId;try{const o=await aI(n.localStore,e);q1(n,i,null),U1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Pc(n,o)}catch(o){await Uo(o)}}async function WI(s,e,n){const i=Ie(s);try{const o=await(function(d,y){const g=Ie(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,y).next((T=>($e(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,y))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);q1(i,e,n),U1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Pc(i,o)}catch(o){await Uo(o)}}function U1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function q1(s,e,n){const i=Ie(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function op(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||z1(s,i)}))}function z1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Kp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),rg(s))}function l0(s,e,n){for(const i of n)i instanceof O1?(s.Ru.addReference(i.key,e),ZI(s,i)):i instanceof k1?(ge(sg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||z1(s,i.key)):Ae(19791,{wu:i})}function ZI(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(ge(sg,"New document in limbo: "+n),s.Eu.add(i),rg(s))}function rg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Te(at.fromString(e)),i=s.fu.next();s.Au.set(i,new zI(n)),s.du=s.du.insert(n,i),C1(s.remoteStore,new ci(Ps(Zh(n.path)),i,"TargetPurposeLimboResolution",Yh.ce))}}async function Pc(s,e,n){const i=Ie(s),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((y,g)=>{d.push(i.pu(g,e,n).then((p=>{if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Gp.As(g.targetId,p);u.push(_)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,p){const _=Ie(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>le.forEach(p,(x=>le.forEach(x.Es,(C=>_.persistence.referenceDelegate.addReference(T,x.targetId,C))).next((()=>le.forEach(x.ds,(C=>_.persistence.referenceDelegate.removeReference(T,x.targetId,C)))))))))}catch(T){if(!qo(T))throw T;ge(Qp,"Failed to update sequence numbers: "+T)}for(const T of p){const x=T.targetId;if(!T.fromCache){const C=_.Ms.get(x),U=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(x,B)}}})(i.localStore,u))}async function JI(s,e){const n=Ie(s);if(!n.currentUser.isEqual(e)){ge(sg,"User change. New user:",e.toKey());const i=await x1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((g=>{g.reject(new pe(re.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pc(n,i.Ls)}}function ej(s,e){const n=Ie(s),i=n.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let o=ze();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function B1(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=L1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YI.bind(null,e),e.Pu.H_=VI.bind(null,e.eventManager),e.Pu.yu=LI.bind(null,e.eventManager),e}function tj(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WI.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iI(this.persistence,new nI,e.initialUser,this.serializer)}Cu(e){return new w1(Hp.mi,this.serializer)}Du(e){return new dI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class nj extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof kh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new w1((i=>kh.mi(i,n)),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JI.bind(null,this.syncEngine),await PI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),i=(function(u){return new yI(u)})(e.databaseInfo);return(function(u,d,y,g){return new SI(u,d,y,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,d,y){return new bI(i,o,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>o0(this.syncEngine,n,0)),(function(){return t0.v()?new t0:new fI})())}createSyncEngine(e,n){return(function(o,u,d,y,g,p,_){const T=new BI(o,u,d,y,g,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ie(n);ge(va,"RemoteStore shutting down."),i.Ea.add(5),await Mc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="FirestoreClient";class sj{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{ge(Ei,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Ei,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Zp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Pm(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Ei,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await x1(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function c0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await rj(s);ge(Ei,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>s0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>s0(e.remoteStore,o))),s._onlineComponents=e}async function rj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Ei,"Using user provided OfflineComponentProvider");try{await Pm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await Pm(s,new Lh)}}else ge(Ei,"Using default OfflineComponentProvider"),await Pm(s,new nj(void 0));return s._offlineComponents}async function F1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Ei,"Using user provided OnlineComponentProvider"),await c0(s,s._uninitializedComponentsProvider._online)):(ge(Ei,"Using default OnlineComponentProvider"),await c0(s,new lp))),s._onlineComponents}function ij(s){return F1(s).then((e=>e.syncEngine))}async function Uh(s){const e=await F1(s),n=e.eventManager;return n.onListen=FI.bind(null,e.syncEngine),n.onUnlisten=QI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KI.bind(null,e.syncEngine),n}function aj(s,e,n={}){const i=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,g,p){const _=new ig({next:x=>{_.Nu(),d.enqueueAndForget((()=>eg(u,T)));const C=x.docs.has(y);!C&&x.fromCache?p.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&g&&g.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),T=new ng(Zh(y.path),_,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}function oj(s,e,n={}){const i=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,g,p){const _=new ig({next:x=>{_.Nu(),d.enqueueAndForget((()=>eg(u,T))),x.fromCache&&g.source==="server"?p.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),T=new ng(y,_,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Uh(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firestore.googleapis.com",h0=!0;class d0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G1,this.ssl=h0}else this.host=e.host,this.ssl=e.ssl??h0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=b1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UC)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new fR;switch(i.type){case"firstParty":return new yR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=u0.get(n);i&&(ge("ComponentProvider","Removing Datastore"),u0.delete(n),i.terminate())})(this),Promise.resolve()}}function lj(s,e,n,i={}){s=xn(s,od);const o=Oo(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},y=`${e}:${n}`;o&&(q0(`https://${y}`),z0("Firestore",!0)),u.host!==G1&&u.host!==y&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:y,ssl:o,emulatorOptions:i};if(!fa(g,d)&&(s._setSettings(g),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=ln.MOCK_USER;else{p=Sx(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ln(T)}s._authCredentials=new mR(new OS(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class _t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ic(n,_t._jsonSchema))return new _t(e,i||null,new Te(at.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Mt("string",_t._jsonSchemaVersion),referencePath:Mt("string")};class mi extends wi{constructor(e,n,i){super(e,n,Zh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Te(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function Pe(s,e,...n){if(s=Pt(s),kS("collection","path",e),s instanceof od){const i=at.fromString(e,...n);return xE(i),new mi(s,null,i)}{if(!(s instanceof _t||s instanceof mi))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(at.fromString(e,...n));return xE(i),new mi(s.firestore,null,i)}}function lt(s,e,...n){if(s=Pt(s),arguments.length===1&&(e=Dp.newId()),kS("doc","path",e),s instanceof od){const i=at.fromString(e,...n);return wE(i),new _t(s,null,new Te(i))}{if(!(s instanceof _t||s instanceof mi))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(at.fromString(e,...n));return wE(i),new _t(s.firestore,s instanceof mi?s.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="AsyncQueue";class m0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new N1(this,"async_queue_retry"),this._c=()=>{const i=Mm();i&&ge(f0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;ge(f0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,pr("INTERNAL UNHANDLED ERROR: ",p0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Wp.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:p0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function p0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class yr extends od{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new m0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m0(e),this._firestoreClient=void 0,await e}}}function cj(s,e){const n=typeof s=="object"?s:G0(),i=typeof s=="string"?s:Ih,o=Tp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=_x("firestore");u&&lj(o,...u)}return o}function ld(s){if(s._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||uj(s),s._firestoreClient}function uj(s){const e=s._freezeSettings(),n=(function(o,u,d,y){return new PR(o,u,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,H1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new sj(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(tn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Mt("string",Xn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ks._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,ks._jsonSchema))return new ks(e.latitude,e.longitude)}}ks._jsonSchemaVersion="firestore/geoPoint/1.0",ks._jsonSchema={type:Mt("string",ks._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,Vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Vs(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:Mt("string",Vs._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=/^__.*__$/;class dj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new jc(e,this.data,n,this.fieldTransforms)}}class Q1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function K1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:s})}}class og{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(K1(this.Ac)&&hj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rd(e)}Cc(e,n,i,o=!1){return new og({Ac:e,methodName:n,Dc:i,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(s){const e=s._freezeSettings(),n=rd(s._databaseId);return new fj(s._databaseId,!!e.ignoreUndefinedProperties,n)}function $1(s,e,n,i,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",d,i);const y=Y1(i,d);let g,p;if(u.merge)g=new Pn(d.fieldMask),p=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const x=cp(e,T,n);if(!d.contains(x))throw new pe(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);W1(_,x)||_.push(x)}g=new Pn(_),p=d.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=d.fieldTransforms;return new dj(new wn(y),g,p)}class hd extends ag{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}function mj(s,e,n,i){const o=s.Cc(1,e,n);lg("Data must be an object, but it was:",o,i);const u=[],d=wn.empty();Ti(i,((g,p)=>{const _=cg(e,g,n);p=Pt(p);const T=o.yc(_);if(p instanceof hd)u.push(_);else{const x=Oc(p,T);x!=null&&(u.push(_),d.set(_,x))}}));const y=new Pn(u);return new Q1(d,y,o.fieldTransforms)}function pj(s,e,n,i,o,u){const d=s.Cc(1,e,n),y=[cp(e,i,n)],g=[o];if(u.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)y.push(cp(e,u[x])),g.push(u[x+1]);const p=[],_=wn.empty();for(let x=y.length-1;x>=0;--x)if(!W1(p,y[x])){const C=y[x];let U=g[x];U=Pt(U);const B=d.yc(C);if(U instanceof hd)p.push(C);else{const V=Oc(U,B);V!=null&&(p.push(C),_.set(C,V))}}const T=new Pn(p);return new Q1(_,T,d.fieldTransforms)}function gj(s,e,n,i=!1){return Oc(n,s.Cc(i?4:3,e))}function Oc(s,e){if(X1(s=Pt(s)))return lg("Unsupported field value:",e,s),Y1(s,e);if(s instanceof ag)return(function(i,o){if(!K1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const y of i){let g=Oc(y,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ct.fromDate(i);return{timestampValue:Oh(o.serializer,u)}}if(i instanceof ct){const u=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Oh(o.serializer,u)}}if(i instanceof ks)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:g1(o.serializer,i._byteString)};if(i instanceof _t){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vs)return(function(d,y){return{mapValue:{fields:{[GS]:{stringValue:QS},[jh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw y.Sc("VectorValues must only contain numeric values.");return Lp(y.serializer,p)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${$h(i)}`)})(s,e)}function Y1(s,e){const n={};return US(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(s,((i,o)=>{const u=Oc(o,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function X1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ct||s instanceof ks||s instanceof Xn||s instanceof _t||s instanceof ag||s instanceof Vs)}function lg(s,e,n){if(!X1(n)||!VS(n)){const i=$h(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function cp(s,e,n){if((e=Pt(e))instanceof cd)return e._internalPath;if(typeof e=="string")return cg(s,e);throw qh("Field path arguments must be of type string or ",s,!1,void 0,n)}const yj=new RegExp("[~\\*/\\[\\]]");function cg(s,e,n){if(e.search(yj)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new cd(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function qh(s,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new pe(re.INVALID_ARGUMENT,y+s+g)}function W1(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vj extends Z1{data(){return super.data()}}function dd(s,e){return typeof e=="string"?cg(s,e):e instanceof cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class eT extends ug{}function ut(s,e,...n){let i=[];e instanceof ug&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((g=>g instanceof hg)).length,y=u.filter((g=>g instanceof fd)).length;if(d>1||d>0&&y>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class fd extends eT{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new fd(e,n,i)}_apply(e){const n=this._parse(e);return tT(e._query,n),new wi(e.firestore,e.converter,Zm(e._query,n))}_parse(e){const n=ud(e.firestore);return(function(u,d,y,g,p,_,T){let x;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){v0(T,_);const U=[];for(const B of T)U.push(y0(g,u,B));x={arrayValue:{values:U}}}else x=y0(g,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||v0(T,_),x=gj(y,d,T,_==="in"||_==="not-in");return Dt.create(p,_,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qe(s,e,n){const i=e,o=dd("where",s);return fd._create(o,i,n)}class hg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const y=u.getFlattenedFilters();for(const g of y)tT(d,g),d=Zm(d,g)})(e._query,n),new wi(e.firestore,e.converter,Zm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends eT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(u,d)})(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new zo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function ua(s,e="asc"){const n=e,i=dd("orderBy",s);return dg._create(i,n)}function y0(s,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e1(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(at.fromString(n));if(!Te.isDocumentKey(i))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ME(s,new Te(i))}if(n instanceof _t)return ME(s,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function v0(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tT(s,e){const n=(function(o,u){for(const d of o)for(const y of d.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _j{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ti(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[jh].arrayValue?.values?.map((i=>Rt(i.doubleValue)));return new Vs(n)}convertGeoPoint(e){return new ks(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Wh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=gi(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=at.fromString(e);$e(T1(i),9688,{name:e});const o=new gc(i.get(1),i.get(3)),u=new Te(i.popFirst(5));return o.isEqual(n)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends Z1{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(dd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Mt("string",ha._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class _h extends ha{data(e={}){return super.data(e)}}class da{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new sc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new _h(this._firestore,this._userDataWriter,i.key,i,new sc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const g=new _h(o._firestore,o._userDataWriter,y.doc.key,y.doc,new sc(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const g=new _h(o._firestore,o._userDataWriter,y.doc.key,y.doc,new sc(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return y.type!==0&&(p=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),_=d.indexOf(y.doc.key)),{type:Ej(y.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ej(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s){s=xn(s,_t);const e=xn(s.firestore,yr);return aj(ld(e),s._key).then((n=>rT(e,s,n)))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:Mt("string",da._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class fg extends _j{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function nt(s){s=xn(s,wi);const e=xn(s.firestore,yr),n=ld(e),i=new fg(e);return J1(s._query),oj(n,s._query).then((o=>new da(e,i,s,o)))}function Sj(s,e,n){s=xn(s,_t);const i=xn(s.firestore,yr),o=nT(s.converter,e);return md(i,[$1(ud(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Wn.none())])}function On(s,e,n,...i){s=xn(s,_t);const o=xn(s.firestore,yr),u=ud(o);let d;return d=typeof(e=Pt(e))=="string"||e instanceof cd?pj(u,"updateDoc",s._key,e,n,i):mj(u,"updateDoc",s._key,e),md(o,[d.toMutation(s._key,Wn.exists(!0))])}function lr(s){return md(xn(s.firestore,yr),[new Up(s._key,Wn.none())])}function vr(s,e){const n=xn(s.firestore,yr),i=lt(s),o=nT(s.converter,e);return md(n,[$1(ud(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then((()=>i))}function sT(s,...e){s=Pt(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||g0(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(g0(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let u,d,y;if(s instanceof _t)d=xn(s.firestore,yr),y=Zh(s._key.path),u={next:g=>{e[i]&&e[i](rT(d,s,g))},error:e[i+1],complete:e[i+2]};else{const g=xn(s,wi);d=xn(g.firestore,yr),y=g._query;const p=new fg(d);u={next:_=>{e[i]&&e[i](new da(d,p,g,_))},error:e[i+1],complete:e[i+2]},J1(s._query)}return(function(p,_,T,x){const C=new ig(x),U=new ng(_,C,T);return p.asyncQueue.enqueueAndForget((async()=>Jp(await Uh(p),U))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>eg(await Uh(p),U)))}})(ld(d),y,o,u)}function md(s,e){return(function(i,o){const u=new hr;return i.asyncQueue.enqueueAndForget((async()=>$I(await ij(i),o,u))),u.promise})(ld(s),e)}function rT(s,e,n){const i=n.docs.get(e._key),o=new fg(s);return new ha(s,o,e._key,i,new sc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Lo=o})(ko),xo(new ma("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),y=new yr(new pR(i.getProvider("auth-internal")),new vR(d,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(p.options.projectId,_)})(d,o),d);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),di(EE,SE,e),di(EE,SE,"esm2020")})();const _o={FIREBASE:{API_KEY:"AIzaSyBnil9YV9LpAVA4GLUjoPoq7PSgq3DYYgk",AUTH_DOMAIN:"animals-adoption-app-v2.firebaseapp.com",PROJECT_ID:"animals-adoption-app-v2",MESSAGING_SENDER_ID:"702758490735",APP_ID:"1:702758490735:web:animals-adoption-app-v2"},APP:{NAME:"Expo2025 - Adopción de Mascotas",VERSION:"1.0.0",ENVIRONMENT:"development"},SECURITY:{MAX_SHELTERS_PER_USER:parseInt("3")||3,MAX_PETS_PER_USER:parseInt("10")||10,MAX_DAILY_CREATIONS:parseInt("5")||5,REQUEST_TIMEOUT:parseInt("10000")||1e4},FEATURES:{ENABLE_STORAGE:!1,ENABLE_ANALYTICS:!1,ENABLE_MESSAGING:!1}},Tj=()=>{const s=["FIREBASE.API_KEY","FIREBASE.AUTH_DOMAIN","FIREBASE.PROJECT_ID","FIREBASE.MESSAGING_SENDER_ID","FIREBASE.APP_ID"],e=[];return s.forEach(n=>{const i=n.split(".");let o=_o;for(const u of i)o=o?.[u];o||e.push(n)}),e.length>0&&(console.warn("⚠️ Variables de entorno faltantes:",e),console.warn("💡 Usando valores por defecto. En producción, configura las variables de entorno.")),e.length===0};Tj();const bj={apiKey:_o.FIREBASE.API_KEY,authDomain:_o.FIREBASE.AUTH_DOMAIN,projectId:_o.FIREBASE.PROJECT_ID,messagingSenderId:_o.FIREBASE.MESSAGING_SENDER_ID,appId:_o.FIREBASE.APP_ID},mg=H0(bj),_e=cj(mg),rc=cR(mg);console.log("Firebase initialized:",mg);console.log("Firestore database:",_e);console.log("Firebase auth:",rc);const up={getNotifications:async s=>{try{const e=ut(Pe(_e,"notifications"),Qe("userId","==",s),ua("timestamp","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting notifications:",e),[]}},createNotification:async s=>{try{console.log("notificationService.createNotification called with:",s);const e={...s,timestamp:new Date().toISOString(),read:!1};console.log("Creating notification document:",e);const n=await vr(Pe(_e,"notifications"),e);return console.log("✅ Notification created with ID:",n.id),n.id}catch(e){throw console.error("❌ Error creating notification:",e),e}},markAsRead:async s=>{try{await On(lt(_e,"notifications",s),{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),e}},subscribeToNotifications:(s,e)=>{const n=ut(Pe(_e,"notifications"),Qe("userId","==",s),ua("timestamp","desc"));return sT(n,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllNotifications:async()=>{try{return(await nt(Pe(_e,"notifications"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting all notifications:",s),[]}}},bn={getConversations:async s=>{try{const e=ut(Pe(_e,"conversations"),Qe("participants","array-contains",s),ua("lastMessageTime","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting conversations:",e),[]}},createConversation:async(s,e=null)=>{try{const n={participants:s,petId:e,lastMessage:"",lastMessageTime:new Date().toISOString(),createdAt:new Date().toISOString()};return(await vr(Pe(_e,"conversations"),n)).id}catch(n){throw console.error("Error creating conversation:",n),n}},getMessages:async s=>{try{const e=ut(Pe(_e,"messages"),Qe("conversationId","==",s),ua("timestamp","asc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting messages:",e),[]}},subscribeToMessages:(s,e)=>{console.log("chatService.subscribeToMessages called for:",s);const n=ut(Pe(_e,"messages"),Qe("conversationId","==",s),ua("timestamp","asc"));return sT(n,i=>{console.log("chatService.subscribeToMessages: received snapshot with",i.docs.length,"messages");const o=i.docs.map(u=>({id:u.id,...u.data()}));console.log("chatService.subscribeToMessages: processed messages:",o),e(o)},i=>{console.error("chatService.subscribeToMessages error:",i)})},sendMessage:async(s,e,n)=>{try{console.log("chatService.sendMessage called:",{conversationId:s,senderId:e,messageText:n});const o=(await kn.getUserProfile(e))?.name||"Usuario",u={conversationId:s,senderId:e,senderName:o,message:n,timestamp:new Date().toISOString(),read:!1},d=await vr(Pe(_e,"messages"),u);return console.log("✅ Message sent with ID:",d.id),await On(lt(_e,"conversations",s),{lastMessage:n,lastMessageTime:new Date().toISOString()}),d.id}catch(i){throw console.error("Error sending message:",i),i}},getOrCreateConversation:async(s,e,n=null)=>{try{console.log("chatService.getOrCreateConversation called:",{userId1:s,userId2:e,petId:n});const i=ut(Pe(_e,"conversations"),Qe("participants","array-contains",s)),u=(await nt(i)).docs.find(y=>{const g=y.data();return g.participants.includes(e)&&g.participants.includes(s)});if(u)return console.log("✅ Found existing conversation:",u.id),n&&u.data().petId!==n&&(console.log("Updating conversation with new petId:",n),await On(lt(_e,"conversations",u.id),{petId:n,lastMessageTime:new Date().toISOString()})),u.id;const d=await bn.createConversation([s,e],n);return console.log("✅ Created new conversation:",d),d}catch(i){throw console.error("Error getting or creating conversation:",i),i}},markMessagesAsRead:async(s,e)=>{try{const n=ut(Pe(_e,"messages"),Qe("conversationId","==",s),Qe("senderId","!=",e),Qe("read","==",!1)),o=(await nt(n)).docs.map(u=>On(u.ref,{read:!0}));await Promise.all(o),console.log(`✅ Marked ${o.length} messages as read`)}catch(n){console.error("Error marking messages as read:",n)}},deleteConversation:async s=>{try{console.log("chatService.deleteConversation called for:",s);const e=ut(Pe(_e,"messages"),Qe("conversationId","==",s)),n=await nt(e);console.log(`Found ${n.size} messages to delete`);const i=n.docs.map(o=>(console.log("Deleting message:",o.id),lr(o.ref)));return i.length>0&&(await Promise.all(i),console.log("✅ Deleted all messages")),console.log("Deleting conversation:",s),await lr(lt(_e,"conversations",s)),console.log("✅ Conversation deleted successfully"),{success:!0,deletedMessages:n.size}}catch(e){throw console.error("Error deleting conversation:",e),e}}},Kt={getPets:async()=>{try{return(await nt(Pe(_e,"pets"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting pets:",s),[]}},getPetsByOwner:async s=>{try{console.log("petService.getPetsByOwner called for ownerId:",s);const e=ut(Pe(_e,"pets"),Qe("ownerId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for owner:",i),i}catch(e){return console.error("Error getting pets by owner:",e),[]}},getPetsByShelter:async s=>{try{console.log("petService.getPetsByShelter called for shelterId:",s);const e=ut(Pe(_e,"pets"),Qe("shelterId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for shelter:",i),i}catch(e){return console.error("Error getting pets by shelter:",e),[]}},getPetById:async s=>{try{const e=lt(_e,"pets",s),n=await Sc(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error getting pet:",e),null}},createPet:async s=>{try{const e=await vr(Pe(_e,"pets"),{...s,createdAt:new Date().toISOString(),status:"available",adoptionRequests:0,ownerId:s.ownerId||"",ownerName:s.ownerName||"",shelterId:s.shelterId||null,shelterName:s.shelterName||null});return console.log("Pet created successfully with ID:",e.id),s.shelterId&&await hn.simulateShelterReview(s.shelterId),e.id}catch(e){throw console.error("Error creating pet:",e),e}},updatePet:async(s,e)=>{try{await On(lt(_e,"pets",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating pet:",n),n}},updatePetStatus:async(s,e)=>{try{console.log("petService.updatePetStatus called for petId:",s,"status:",e),await On(lt(_e,"pets",s),{status:e,updatedAt:new Date().toISOString()}),console.log("✅ Pet status updated successfully")}catch(n){throw console.error("Error updating pet status:",n),n}},deletePet:async s=>{try{console.log("petService.deletePet called for petId:",s);const e=await Sc(lt(_e,"pets",s));if(!e.exists())throw new Error("Mascota no encontrada");const i=e.data().name;console.log("Deleting pet:",i),console.log("Deleting adoption requests for pet:",s);const o=ut(Pe(_e,"adoptionRequests"),Qe("petId","==",s)),d=(await nt(o)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${d.length} adoption requests to delete`);const y=d.map(H=>(console.log("Deleting adoption request:",H.id),lr(lt(_e,"adoptionRequests",H.id))));y.length>0&&(await Promise.all(y),console.log("✅ Deleted all adoption requests")),console.log("Deleting notifications for pet:",s);const g=ut(Pe(_e,"notifications"),Qe("petId","==",s)),_=(await nt(g)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${_.length} notifications to delete`);const T=_.map(H=>(console.log("Deleting notification:",H.id),lr(lt(_e,"notifications",H.id))));T.length>0&&(await Promise.all(T),console.log("✅ Deleted all notifications")),console.log("Updating conversations for pet:",s);const x=ut(Pe(_e,"conversations"),Qe("petId","==",s)),U=(await nt(x)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${U.length} conversations to update`);const B=U.map(H=>(console.log("Updating conversation:",H.id),vr(Pe(_e,"messages"),{conversationId:H.id,senderId:"system",message:`⚠️ ${i} ya no está disponible para adopción.`,timestamp:new Date().toISOString(),read:!1,isSystemMessage:!0})));B.length>0&&(await Promise.all(B),console.log("✅ Added system messages to conversations")),console.log("Deleting favorites for pet:",s);const V=ut(Pe(_e,"favorites"),Qe("petId","==",s)),oe=(await nt(V)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${oe.length} favorites to delete`);const K=oe.map(H=>(console.log("Deleting favorite:",H.id),lr(lt(_e,"favorites",H.id))));return K.length>0&&(await Promise.all(K),console.log("✅ Deleted all favorites")),console.log("Deleting pet document:",s),await lr(lt(_e,"pets",s)),console.log("✅ Pet deleted successfully"),{success:!0,deleted:{adoptionRequests:d.length,notifications:_.length,conversations:U.length,favorites:oe.length}}}catch(e){throw console.error("Error deleting pet:",e),e}}},wj={getCategories:async()=>{try{console.log("categoryService.getCategories called");const e=(await nt(Pe(_e,"categories"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Categories loaded from Firestore:",e),e}catch(s){return console.error("Error getting categories:",s),[]}},createCategory:async s=>{try{return(await vr(Pe(_e,"categories"),{...s,createdAt:new Date().toISOString()})).id}catch(e){throw console.error("Error creating category:",e),e}},updateCategory:async(s,e)=>{try{await On(lt(_e,"categories",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating category:",n),n}}},ds={getFavorites:async s=>{try{console.log("favoriteService.getFavorites called for userId:",s);const e=ut(Pe(_e,"favorites"),Qe("userId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Favorites loaded from Firestore:",i),i}catch(e){return console.error("Error getting favorites:",e),[]}},addFavorite:async(s,e)=>{try{console.log("favoriteService.addFavorite called for userId:",s,"petId:",e);const n=await vr(Pe(_e,"favorites"),{userId:s,petId:e,createdAt:new Date().toISOString()});return console.log("Favorite added with ID:",n.id),n.id}catch(n){throw console.error("Error adding favorite:",n),n}},removeFavorite:async(s,e)=>{try{console.log("favoriteService.removeFavorite called for userId:",s,"petId:",e);const n=ut(Pe(_e,"favorites"),Qe("userId","==",s),Qe("petId","==",e)),i=await nt(n);if(i.empty)return console.log("No favorite found to remove"),!1;const o=i.docs.map(u=>lr(u.ref));return await Promise.all(o),console.log("Favorite removed successfully"),!0}catch(n){throw console.error("Error removing favorite:",n),n}},isFavorite:async(s,e)=>{try{const n=ut(Pe(_e,"favorites"),Qe("userId","==",s),Qe("petId","==",e));return!(await nt(n)).empty}catch(n){return console.error("Error checking favorite status:",n),!1}}},un={createAdoptionRequest:async s=>{try{console.log("adoptionRequestService.createAdoptionRequest called:",s);const e=await vr(Pe(_e,"adoptionRequests"),{...s,status:"pending",createdAt:new Date().toISOString()});return console.log("Adoption request created with ID:",e.id),e.id}catch(e){throw console.error("Error creating adoption request:",e),e}},getAdoptionRequests:async s=>{try{console.log("adoptionRequestService.getAdoptionRequests called for userId:",s);const e=ut(Pe(_e,"adoptionRequests"),Qe("userId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests loaded from Firestore:",i),i}catch(e){return console.error("Error getting adoption requests:",e),[]}},getAdoptionRequestsForOwner:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestsForOwner called for ownerId:",s);const e=ut(Pe(_e,"adoptionRequests"),Qe("ownerId","==",s),ua("createdAt","desc")),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests for owner loaded from Firestore:",i),console.log("Number of requests found:",i.length),i}catch(e){return console.error("Error getting adoption requests for owner:",e),[]}},getAdoptionRequestById:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestById called for requestId:",s);const e=lt(_e,"adoptionRequests",s),n=await Sc(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Adoption request loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting adoption request:",e),null}},updateAdoptionRequestStatus:async(s,e,n="")=>{try{console.log("adoptionRequestService.updateAdoptionRequestStatus called for requestId:",s,"status:",e);const i={status:e,updatedAt:new Date().toISOString()};n&&(i.ownerNotes=n),await On(lt(_e,"adoptionRequests",s),i),console.log("Adoption request status updated successfully")}catch(i){throw console.error("Error updating adoption request status:",i),i}},approveAdoptionRequest:async(s,e="")=>{try{console.log("adoptionRequestService.approveAdoptionRequest called for requestId:",s);const n=await un.getAdoptionRequestById(s);if(!n)throw new Error("Solicitud no encontrada");const i=n.petId;console.log("Approving request for petId:",i),await un.updateAdoptionRequestStatus(s,"approved",e),console.log("✅ Request approved:",s);const o=ut(Pe(_e,"adoptionRequests"),Qe("petId","==",i),Qe("status","==","pending")),d=(await nt(o)).docs.map(g=>({id:g.id,...g.data()}));console.log(`Found ${d.length} pending requests for the same pet`);const y=d.filter(g=>g.id!==s).map(g=>(console.log("Auto-rejecting request:",g.id),un.updateAdoptionRequestStatus(g.id,"rejected","Esta solicitud fue rechazada automáticamente porque se aprobó otra solicitud para la misma mascota.")));return y.length>0&&(await Promise.all(y),console.log(`✅ Auto-rejected ${y.length} other requests`)),await Kt.updatePetStatus(i,"adopted"),console.log("✅ Pet status updated to adopted"),{approved:s,rejected:d.filter(g=>g.id!==s).map(g=>g.id)}}catch(n){throw console.error("Error approving adoption request:",n),n}},getPendingRequestsForPet:async s=>{try{console.log("adoptionRequestService.getPendingRequestsForPet called for petId:",s);const e=ut(Pe(_e,"adoptionRequests"),Qe("petId","==",s),Qe("status","==","pending"),ua("createdAt","desc")),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log(`Found ${i.length} pending requests for pet ${s}`),i}catch(e){return console.error("Error getting pending requests for pet:",e),[]}},rejectAdoptionRequest:async(s,e="")=>{try{await un.updateAdoptionRequestStatus(s,"rejected",e)}catch(n){throw console.error("Error rejecting adoption request:",n),n}}},hn={getShelters:async()=>{try{console.log("shelterService.getShelters called");const e=(await nt(Pe(_e,"shelters"))).docs.map(n=>({id:n.id,...n.data()}));return console.log("Shelters loaded from Firestore:",e),e}catch(s){return console.error("Error getting shelters:",s),[]}},getShelterById:async s=>{try{console.log("shelterService.getShelterById called for shelterId:",s);const e=lt(_e,"shelters",s),n=await Sc(e);if(n.exists()){const i={id:n.id,...n.data()};return console.log("Shelter loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting shelter:",e),null}},getSheltersByOwner:async s=>{try{console.log("shelterService.getSheltersByOwner called for ownerId:",s);const e=ut(Pe(_e,"shelters"),Qe("ownerId","==",s)),i=(await nt(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Shelters for owner loaded from Firestore:",i),i}catch(e){return console.error("Error getting shelters by owner:",e),[]}},createShelter:async s=>{try{if(console.log("shelterService.createShelter called:",s),!s.ownerId)throw new Error("❌ Error: ownerId es requerido para crear un refugio");if(!s.name||s.name.length<3)throw new Error("❌ Error: Nombre del refugio debe tener al menos 3 caracteres");if(s.name&&s.name.length>100)throw new Error("❌ Error: Nombre del refugio no puede exceder 100 caracteres");const e=[/<script/i,/javascript:/i,/on\w+\s*=/i,/eval\(/i],n=JSON.stringify(s);for(const o of e)if(o.test(n))throw new Error("❌ Error: Datos contienen contenido sospechoso");const i=await vr(Pe(_e,"shelters"),{...s,createdAt:new Date().toISOString(),verified:!1,rating:0,petsCount:0,isPremium:!1,premiumExpiry:null,status:"pending"});return console.log("✅ Shelter created with ID:",i.id),i.id}catch(e){throw console.error("❌ Error creating shelter:",e),e}},updateShelter:async(s,e)=>{try{console.log("shelterService.updateShelter called for shelterId:",s,"updateData:",e),await On(lt(_e,"shelters",s),{...e,updatedAt:new Date().toISOString()}),console.log("Shelter updated successfully")}catch(n){throw console.error("Error updating shelter:",n),n}},updateShelterStatus:async(s,e)=>{try{console.log("shelterService.updateShelterStatus called for shelterId:",s,"status:",e),await On(lt(_e,"shelters",s),{status:e,updatedAt:new Date().toISOString()}),console.log("Shelter status updated successfully")}catch(n){throw console.error("Error updating shelter status:",n),n}},activatePremium:async(s,e=1)=>{try{console.log("shelterService.activatePremium called for shelterId:",s,"months:",e);const n=new Date;n.setMonth(n.getMonth()+e),await On(lt(_e,"shelters",s),{isPremium:!0,premiumExpiry:n.toISOString(),updatedAt:new Date().toISOString()}),console.log("Premium subscription activated successfully")}catch(n){throw console.error("Error activating premium subscription:",n),n}},deactivatePremium:async s=>{try{console.log("shelterService.deactivatePremium called for shelterId:",s),await On(lt(_e,"shelters",s),{isPremium:!1,premiumExpiry:null,updatedAt:new Date().toISOString()}),console.log("Premium subscription deactivated successfully")}catch(e){throw console.error("Error deactivating premium subscription:",e),e}},isPremiumActive:async s=>{try{const e=await hn.getShelterById(s);return!e||!e.isPremium?!1:e.premiumExpiry?new Date(e.premiumExpiry)>new Date:e.isPremium}catch(e){return console.error("Error checking premium status:",e),!1}},getPremiumShelters:async()=>{try{console.log("shelterService.getPremiumShelters called");const s=ut(Pe(_e,"shelters"),Qe("isPremium","==",!0)),n=(await nt(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Premium shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting premium shelters:",s),[]}},getRegularShelters:async()=>{try{console.log("shelterService.getRegularShelters called");const s=ut(Pe(_e,"shelters"),Qe("isPremium","==",!1)),n=(await nt(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Regular shelters loaded from Firestore:",n),n}catch(s){return console.error("Error getting regular shelters:",s),[]}},deleteShelter:async s=>{try{if(console.log("shelterService.deleteShelter called for shelterId:",s),!await hn.getShelterById(s))throw new Error("Refugio no encontrado");const n=ut(Pe(_e,"pets"),Qe("shelterId","==",s)),i=await nt(n);console.log(`Found ${i.size} pets to delete for shelter`);const o=i.docs.map(u=>(console.log("Deleting pet:",u.id),lr(u.ref)));return o.length>0&&(await Promise.all(o),console.log("✅ Deleted all shelter pets")),await lr(lt(_e,"shelters",s)),console.log("✅ Shelter deleted successfully"),{success:!0,deletedPets:i.size}}catch(e){throw console.error("Error deleting shelter:",e),e}},simulateShelterReview:async s=>{try{console.log("🔍 Simulando revisión del refugio:",s);const e=await hn.getShelterById(s);if(!e){console.log("❌ Refugio no encontrado para revisión");return}const n=Math.random()*3e3+2e3;await new Promise(d=>setTimeout(d,n));const i=Math.random()>.1,o=i?"active":"pending";await hn.updateShelterStatus(s,o);const u={userId:e.ownerId,type:"shelter_review",title:i?"✅ Refugio Aprobado":"⏳ Refugio en Revisión",message:i?`¡Felicidades! Tu refugio "${e.name}" ha sido aprobado y está activo.`:`Tu refugio "${e.name}" está siendo revisado. Te notificaremos cuando esté listo.`,shelterId:s,shelterName:e.name};await up.createNotification(u),console.log(`✅ Simulación de revisión completada: ${o}`)}catch(e){console.error("❌ Error en simulación de revisión:",e)}}},kn={createUserProfile:async(s,e)=>{try{await Sj(lt(_e,"users",s),{...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()})}catch(n){throw console.error("Error creating user profile:",n),n}},getUserProfile:async s=>{try{console.log("getUserProfile called with userId:",s);const e=lt(_e,"users",s);console.log("Document reference created:",e.path);const n=await Sc(e);if(console.log("Document snapshot:",n.exists()?"exists":"does not exist"),n.exists()){const i={id:n.id,...n.data()};return console.log("User profile data:",i),i}return console.log("No user profile found"),null}catch(e){return console.error("Error getting user profile:",e),null}},getAllUsers:async()=>{try{console.log("getAllUsers called");const e=(await nt(Pe(_e,"users"))).docs.map(n=>({uid:n.id,...n.data()}));return console.log(`Found ${e.length} users`),e}catch(s){return console.error("Error getting all users:",s),[]}},updateUserProfile:async(s,e)=>{try{await On(lt(_e,"users",s),{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating user profile:",n),n}}},iT=I.createContext(),qt=()=>{const s=I.useContext(iT);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},xj=({children:s})=>{const[e,n]=I.useState(null),[i,o]=I.useState(!0);I.useEffect(()=>{console.log("AuthProvider: Setting up auth listener");const p=WN(rc,_=>{console.log("AuthProvider: Auth state changed:",_),n(_),o(!1)});return()=>{console.log("AuthProvider: Cleaning up auth listener"),p()}},[]);const g={user:e,loading:i,register:async(p,_,T)=>{try{const C=(await GN(rc,p,_)).user;return await $N(C,{displayName:T.name}),console.log("Creating user profile with data:",{name:T.name,email:C.email,phone:T.phone||"",address:T.address||"",isShelter:T.isShelter||!1,shelterInfo:T.shelterInfo||null}),await kn.createUserProfile(C.uid,{name:T.name,email:C.email,phone:T.phone||"",address:T.address||"",isShelter:T.isShelter||!1,shelterInfo:T.shelterInfo||null}),console.log("User profile created successfully"),C}catch(x){throw console.error("Error registering user:",x),x}},login:async(p,_)=>{try{return(await QN(rc,p,_)).user}catch(T){throw console.error("Error logging in:",T),T}},logout:async()=>{try{await ZN(rc)}catch(p){throw console.error("Error logging out:",p),p}}};return c.jsx(iT.Provider,{value:g,children:s})},Aj=({error:s,onClose:e,onRetry:n,autoClose:i=!0,duration:o=5e3})=>{const[u,d]=I.useState(!1),[y,g]=I.useState(!1);I.useEffect(()=>{if(s&&(d(!0),g(!1),i)){const B=setTimeout(()=>{p()},o);return()=>clearTimeout(B)}},[s,i,o]);const p=()=>{g(!0),setTimeout(()=>{d(!1),e?.()},300)},_=()=>{n?.(),p()};if(!u||!s)return null;const{title:T,message:x,action:C,type:U="error"}=s;return c.jsxs("div",{className:`error-notification ${y?"closing":""} ${U}`,children:[c.jsxs("div",{className:"error-notification-content",children:[c.jsxs("div",{className:"error-notification-icon",children:[U==="error"&&"⚠️",U==="warning"&&"⚠️",U==="success"&&"✅",U==="info"&&"ℹ️"]}),c.jsxs("div",{className:"error-notification-text",children:[c.jsx("h4",{className:"error-notification-title",children:T}),c.jsx("p",{className:"error-notification-message",children:x})]}),c.jsxs("div",{className:"error-notification-actions",children:[C==="Reintentar"&&n&&c.jsx("button",{className:"error-notification-retry-btn",onClick:_,children:"Reintentar"}),c.jsx("button",{className:"error-notification-close-btn",onClick:p,"aria-label":"Cerrar notificación",children:"✕"})]})]}),c.jsx("div",{className:"error-notification-progress",children:c.jsx("div",{className:"error-notification-progress-bar",style:{animationDuration:`${o}ms`,animationPlayState:i?"running":"paused"}})})]})},Nj=()=>{const[s,e]=I.useState("dark");return I.useEffect(()=>{const o=localStorage.getItem("theme")||"dark",u="dark";e(u),document.documentElement.setAttribute("data-theme",u),document.body.setAttribute("data-theme",u)},[]),{currentTheme:s,toggleTheme:()=>{const o=s==="dark"?"light":"dark";e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o)},setTheme:o=>{(o==="dark"||o==="light")&&(e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o))},isDark:s==="dark",isLight:s==="light"}};function ke(){const s=Et(),e=Jn(),{logout:n}=qt(),i=()=>{s("/")},o=()=>{s("/profile")};return c.jsxs("nav",{className:"navbar",children:[c.jsx("div",{className:`nav-icon ${e.pathname==="/"?"active":""}`,title:"Inicio",onClick:i,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 3.172l8 7.2V20a1 1 0 01-1 1h-5v-6H10v6H5a1 1 0 01-1-1v-9.628l8-7.2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/upload"?"active":""}`,title:"Subir Mascota",onClick:()=>s("/upload"),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/favorites"?"active":""}`,title:"Favoritos",onClick:()=>s("/favorites"),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:`nav-icon ${e.pathname==="/profile"?"active":""}`,title:"Perfil",onClick:o,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]})}function Rj(){const{user:s}=qt(),e=Et(),n=Jn(),[i,o]=I.useState([]),[u,d]=I.useState({name:"",address:""}),[y,g]=I.useState(""),[p,_]=I.useState(!0),[T,x]=I.useState([]),[C,U]=I.useState(["all"]),[B,V]=I.useState(!1),[Y,oe]=I.useState([]),[K,H]=I.useState([]),[k,F]=I.useState("user"),{currentTheme:R,toggleTheme:w}=Nj(),N=n.state?.category||"";I.useEffect(()=>{const ee=ce=>{B&&!ce.target.closest(".filter-dropdown")&&V(!1)};return document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}},[B]);const j=async()=>{if(s?.uid)try{console.log("Loading favorites for user:",s.uid);const ee=await ds.getFavorites(s.uid),ce=await Promise.all(ee.map(async me=>{const ye=await Kt.getPetById(me.petId);return{...me,pet:ye}}));x(ce.filter(me=>me.pet)),console.log("Favorites loaded:",ce)}catch(ee){console.error("Error loading favorites:",ee)}},P=async()=>{try{console.log("Loading shelters...");const[ee,ce]=await Promise.all([hn.getPremiumShelters(),hn.getRegularShelters()]),me=[...ee,...ce];oe(me),console.log("Shelters loaded:",me)}catch(ee){console.error("Error loading shelters:",ee)}},q=async()=>{if(s?.uid)try{console.log("Loading user shelters...");const ee=await hn.getSheltersByOwner(s.uid);if(H(ee),ee.length>0){const ce=ee.some(me=>me.isPremium);F(ce?"premium":"shelter")}else F("user");console.log("User shelters loaded:",ee),console.log("User type determined:",k)}catch(ee){console.error("Error loading user shelters:",ee)}};I.useEffect(()=>{(async()=>{if(console.log("Home useEffect - user:",s),console.log("Home useEffect - loading:",p),s)try{console.log("User UID:",s.uid),console.log("User displayName:",s.displayName),console.log("User email:",s.email),console.log("Loading profile for user:",s.uid);const ce=await kn.getUserProfile(s.uid);console.log("Profile loaded:",ce),ce?d({name:ce.name||"",address:ce.address||""}):(console.log("No profile found, using display name:",s.displayName),d({name:s.displayName||"",address:""})),await j(),await P(),await q();const me=await Kt.getPets();if(me.length===0){const ye=[{name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro",status:"available",ownerId:"admin",description:"Bobby es un perro muy cariñoso y juguetón. Le encanta jugar con niños y es muy obediente."},{name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato",status:"available",ownerId:"admin",description:"Luna es una gata muy independiente pero cariñosa. Es perfecta para una familia tranquila."}];for(const ht of ye)await Kt.createPet(ht);o(ye)}else o(me)}catch(ce){console.error("Error loading data:",ce)}finally{_(!1)}else try{const ce=await Kt.getPets();o(ce),await P()}catch(ce){console.error("Error loading pets:",ce),o([{id:1,name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro"},{id:2,name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato"}])}finally{_(!1)}})()},[s,p]);const D=I.useMemo(()=>{const ee=y.trim().toLowerCase();let ce=i;return C.length===0||C.includes("all")?N&&(ce=i.filter(me=>me.type.toLowerCase()===N.toLowerCase())):ce=i.filter(me=>C.some(ye=>{switch(ye){case"favorites":return s?.uid?T.map(Ke=>Ke.petId).includes(me.id):!1;case"shelters":return me.shelterId&&me.shelterName;case"dogs":return me.type.toLowerCase()==="perro";case"cats":return me.type.toLowerCase()==="gato";case"others":return me.type.toLowerCase()!=="perro"&&me.type.toLowerCase()!=="gato";default:return!1}})),ce.filter(me=>!ee||[me.name,me.breed,me.gender,me.age,me.location,me.shelterName].filter(Boolean).some(ht=>String(ht).toLowerCase().includes(ee)))},[i,y,C,N,T,s]),he=()=>{e("/categories")},De=async(ee,ce)=>{if(ce.stopPropagation(),!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{T.some(ye=>ye.petId===ee.id)?(await ds.removeFavorite(s.uid,ee.id),x(ye=>ye.filter(ht=>ht.petId!==ee.id)),console.log("Pet removed from favorites")):(await ds.addFavorite(s.uid,ee.id),x(ye=>[...ye,{petId:ee.id,userId:s.uid,createdAt:new Date().toISOString()}]),console.log("Pet added to favorites"))}catch(me){console.error("Error updating favorites:",me),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},te=ee=>T.some(ce=>ce.petId===ee.id),ue=ee=>{U(ce=>{if(ee==="all")return["all"];if(ce.includes(ee)){const me=ce.filter(ye=>ye!==ee);return me.length===0?["all"]:me}else return[...ce.filter(ye=>ye!=="all"),ee]})},X=()=>C.includes("all")||C.length===0?"Todos los filtros":C.length===1?{favorites:"Favoritas",shelters:"Refugios",dogs:"Perros",cats:"Gatos",others:"Otros"}[C[0]]||"Filtros":`${C.length} filtros`,Ee=ee=>{e("/adopt",{state:{pet:ee}})},O=()=>{e("/tracking")},ie=()=>{e("/shelters")},fe=()=>{e("/users")};return p?c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"18px"},children:"Cargando..."}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("div",{className:"header-top",children:[c.jsxs("div",{className:"greeting-section",children:[c.jsxs("h1",{className:"greeting-title",children:["Hola, ",u.name||"Amigo"," 👋"]}),c.jsx("p",{className:"greeting-subtitle",children:"Encuentra tu compañero perfecto"})]}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"conversations-button",onClick:()=>e("/conversations"),title:"Conversaciones",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})}),c.jsx("div",{className:"user-avatar",onClick:()=>e("/profile"),children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"A").charAt(0).toUpperCase()})})})]})]}),c.jsxs("div",{className:"search-container",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar mascotas...",value:y,onChange:ee=>g(ee.target.value),className:"search-input"}),c.jsx("button",{onClick:w,className:"theme-toggle-btn",title:R==="dark"?"Cambiar a modo claro":"Cambiar a modo oscuro",children:R==="dark"?c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5M17.6859 17.69L18.5 18.5M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsxs("button",{className:"quick-action-btn",onClick:O,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Seguimiento"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:fe,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Usuarios"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:ie,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"Refugios"})]})]})]}),c.jsxs("main",{className:"main-content",children:[c.jsx("div",{className:"filter-container",children:c.jsxs("div",{className:"filter-dropdown",children:[c.jsxs("button",{className:"filter-trigger",onClick:()=>V(!B),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"})}),c.jsx("span",{className:"filter-label",children:X()}),c.jsx("svg",{className:`filter-arrow ${B?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),B&&c.jsxs("div",{className:"filter-options",children:[c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("all"),onChange:()=>ue("all")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Todas las mascotas"]})]})}),s?.uid&&T.length>0&&c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("favorites"),onChange:()=>ue("favorites")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"Favoritas (",T.length,")"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("shelters"),onChange:()=>ue("shelters")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),"De refugios"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("dogs"),onChange:()=>ue("dogs")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M18.5 2h-13C4.67 2 4 2.67 4 3.5v17c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5zM12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 14H8v-1.5c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2V20z"})}),"Perros"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("cats"),onChange:()=>ue("cats")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Gatos"]})]})}),c.jsx("div",{className:"filter-option",children:c.jsxs("label",{className:"filter-checkbox",children:[c.jsx("input",{type:"checkbox",checked:C.includes("others"),onChange:()=>ue("others")}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{className:"option-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Otras mascotas"]})]})})]})]})}),c.jsx("div",{className:"section-header",children:c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:C.includes("all")||C.length===0?"Mascotas disponibles":C.length===1?C.includes("favorites")?"Tus favoritas":C.includes("shelters")?"Mascotas de refugios":C.includes("dogs")?"Perros disponibles":C.includes("cats")?"Gatos disponibles":C.includes("others")?"Otras mascotas":"Mascotas disponibles":"Mascotas filtradas"}),c.jsxs("span",{className:"pets-count",children:[D.length," mascotas"]})]})}),c.jsx("div",{className:`pets-grid ${k==="user"?"single-column":k==="shelter"?"two-columns":"premium-layout"}`,children:D.map((ee,ce)=>c.jsxs("div",{className:`pet-card ${k==="premium"&&ce<2?"featured":""}`,onClick:()=>Ee(ee),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:ee.img,alt:ee.name,className:"pet-image"}),c.jsx("button",{className:`favorite-btn ${te(ee)?"favorited":""}`,onClick:me=>De(ee,me),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:ee.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:ee.name}),c.jsxs("p",{className:"pet-details",children:[ee.breed," • ",ee.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:ee.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",ee.location]})]}),ee.ownerName&&c.jsxs("div",{className:"pet-owner",children:[c.jsx("span",{className:"owner-label",children:"Dueño:"}),c.jsx("span",{className:"owner-name",children:ee.ownerName})]})]})]},ce))}),D.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No se encontraron mascotas"}),c.jsx("p",{children:"Intenta ajustar tu búsqueda o explorar todas las categorías"}),c.jsx("button",{className:"explore-btn",onClick:he,children:"Explorar categorías"})]}),Y.length>0&&c.jsxs("section",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("div",{className:"section-title-row",children:[c.jsx("h2",{className:"section-title",children:showOnlyShelters?"Refugios":"Refugios destacados"}),c.jsxs("span",{className:"pets-count",children:[Y.length," refugios"]})]}),c.jsxs("div",{className:"shelters-controls",children:[c.jsxs("button",{className:`shelters-toggle ${showOnlyShelters?"active":""}`,onClick:()=>setShowOnlyShelters(!showOnlyShelters),children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),showOnlyShelters?"Ver mascotas":"Solo refugios"]}),c.jsx("button",{className:"view-all-shelters",onClick:()=>e("/shelters"),children:"Ver todos"})]})]}),c.jsx("div",{className:"shelters-grid",children:(showOnlyShelters?filteredShelters:Y.slice(0,4)).map((ee,ce)=>c.jsxs("div",{className:`shelter-card ${ee.isPremium?"premium":""}`,onClick:()=>e("/shelters"),children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:ee.image||"/default-shelter.jpg",alt:ee.name,className:"shelter-image"}),ee.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:ee.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",ee.location]}),c.jsx("p",{className:"shelter-description",children:ee.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",ee.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",ee.petsCount||0," mascotas"]})]})]})]},ee.id||ce))})]})]}),c.jsx(ke,{})]})}function Cj(){const s=Et(),[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{y()},[]);const y=async()=>{try{console.log("Loading categories from Firebase..."),o(!0);const p=await wj.getCategories();p.length===0?(console.log("No categories found in Firebase, using default categories"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])):(console.log("Categories loaded from Firebase:",p),n(p)),d(null)}catch(p){console.error("Error loading categories:",p),d("Error al cargar las categorías"),n([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])}finally{o(!1)}},g=p=>{s("/",{state:{category:p}})};return i?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando categorías..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),c.jsxs("main",{children:[u&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:u}),c.jsx("button",{onClick:y,children:"Reintentar"})]}),c.jsx("div",{className:"category-cards",children:e.map((p,_)=>c.jsxs("div",{className:"category-card",style:{backgroundColor:p.bgColor,cursor:"pointer"},onClick:()=>g(p.type),children:[c.jsx("img",{src:p.image,alt:p.name}),c.jsx("div",{className:"category-name",children:p.name})]},p.id||_))})]}),c.jsx(ke,{})]})}function Ij(){const{user:s}=qt(),e=Et(),[n,i]=I.useState(""),[o,u]=I.useState({name:"",location:"",breed:"",gender:"",age:"",type:"",description:"",size:"",vaccinated:!1,sterilized:!1,specialNeeds:"",shelterId:"",shelterName:""}),[d,y]=I.useState({name:"",address:""}),[g,p]=I.useState([]),[_,T]=I.useState(!1),[x,C]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s)try{const H=await kn.getUserProfile(s.uid);H&&(y({name:H.name||"",address:H.address||""}),u(F=>({...F,location:H.address||""})));const k=await hn.getSheltersByOwner(s.uid);p(k)}catch(H){console.error("Error loading data:",H)}})()},[s]);const U=K=>{i(K)},B=(K,H)=>{u(k=>({...k,[K]:H}))},V=K=>{C(K),K||u(H=>({...H,shelterId:"",shelterName:""}))},Y=K=>{const H=g.find(k=>k.id===K);u(k=>({...k,shelterId:K,shelterName:H?H.name:""}))},oe=async()=>{if(!o.name.trim()){alert("El nombre de la mascota es obligatorio");return}if(!o.type){alert("Debes seleccionar el tipo de mascota");return}if(!o.location.trim()){alert("La ubicación es obligatoria");return}if(!n.trim()){alert("Debes proporcionar un enlace de imagen");return}T(!0);try{console.log("Starting pet creation process...");const K={...o,img:n.trim(),status:"available",ownerId:s.uid,ownerName:d.name||s.displayName||"Usuario"};x&&o.shelterId&&(K.shelterId=o.shelterId,K.shelterName=o.shelterName),console.log("Pet data prepared:",K),console.log("Image URL:",n.trim());const H=await Kt.createPet(K);console.log("Pet created successfully with ID:",H),alert("Mascota subida correctamente"),e("/")}catch(K){console.error("Error saving pet:",K),alert("Error al subir la mascota: "+K.message)}finally{T(!1)}};return c.jsxs("div",{className:"upload-container",children:[c.jsxs("div",{className:"upload-header",children:[c.jsxs("h1",{className:"upload-title",children:[c.jsx("span",{className:"upload-icon",children:"🐾"}),"Subir Mascota"]}),c.jsx("p",{className:"upload-subtitle",children:"Comparte los detalles de tu mascota para encontrarle un hogar"})]}),c.jsxs("div",{className:"upload-content",children:[c.jsx("div",{className:"image-upload-section",children:c.jsxs("div",{className:"url-input-section",children:[c.jsxs("div",{className:"input-with-icon",children:[c.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24zm2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.42l-.47.48a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24z"})}),c.jsx("input",{type:"url",placeholder:"Pega un enlace de imagen (URL)",value:n,onChange:K=>U(K.target.value),className:"url-input",required:!0})]}),c.jsxs("div",{className:"quick-actions",children:[c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐕 Perro"}),c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐱 Gato"}),c.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1583337130417-3346a1be7dee?q=80&w=400&auto=format&fit=crop"),className:"quick-btn",children:"🐰 Conejo"})]})]})}),c.jsxs("div",{className:"form-section",children:[c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Nombre *"}),c.jsx("input",{type:"text",value:o.name,onChange:K=>B("name",K.target.value),placeholder:"Nombre de la mascota",className:"field-input",required:!0})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tipo *"}),c.jsxs("select",{value:o.type,onChange:K=>B("type",K.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona tipo"}),c.jsx("option",{value:"Perro",children:"🐕 Perro"}),c.jsx("option",{value:"Gato",children:"🐱 Gato"}),c.jsx("option",{value:"Conejo",children:"🐰 Conejo"}),c.jsx("option",{value:"Hamster",children:"🐹 Hamster"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Ubicación *"}),c.jsx("input",{type:"text",value:o.location,onChange:K=>B("location",K.target.value),placeholder:"Ciudad, Estado",className:"field-input",required:!0})]}),g.length>0&&c.jsxs("div",{className:"form-field full-width",children:[c.jsx("div",{className:"shelter-toggle",children:c.jsxs("label",{className:"toggle-label",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:K=>V(K.target.checked),className:"toggle-checkbox"}),c.jsx("span",{className:"toggle-text",children:"🏠 Esta mascota pertenece a uno de mis refugios"})]})}),x&&c.jsxs("div",{className:"shelter-select",children:[c.jsx("label",{className:"field-label",children:"Seleccionar Refugio *"}),c.jsxs("select",{value:o.shelterId,onChange:K=>Y(K.target.value),className:"field-select",required:!0,children:[c.jsx("option",{value:"",children:"Selecciona un refugio"}),g.map(K=>c.jsxs("option",{value:K.id,children:[K.name," - ",K.location]},K.id))]}),o.shelterName&&c.jsxs("p",{className:"shelter-info",children:["✅ Mascota será asociada a: ",c.jsx("strong",{children:o.shelterName})]})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Raza"}),c.jsx("input",{type:"text",value:o.breed,onChange:K=>B("breed",K.target.value),placeholder:"Raza o mezcla",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Género"}),c.jsxs("select",{value:o.gender,onChange:K=>B("gender",K.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Macho",children:"♂️ Macho"}),c.jsx("option",{value:"Hembra",children:"♀️ Hembra"})]})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Edad"}),c.jsx("input",{type:"text",value:o.age,onChange:K=>B("age",K.target.value),placeholder:"Ej: 2 años",className:"field-input"})]}),c.jsxs("div",{className:"form-field",children:[c.jsx("label",{className:"field-label",children:"Tamaño"}),c.jsxs("select",{value:o.size,onChange:K=>B("size",K.target.value),className:"field-select",children:[c.jsx("option",{value:"",children:"Selecciona"}),c.jsx("option",{value:"Pequeño",children:"S Pequeño"}),c.jsx("option",{value:"Mediano",children:"M Mediano"}),c.jsx("option",{value:"Grande",children:"L Grande"})]})]})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Descripción"}),c.jsx("textarea",{value:o.description,onChange:K=>B("description",K.target.value),placeholder:"Cuéntanos sobre su personalidad y comportamiento...",className:"field-textarea",rows:"3"})]}),c.jsxs("div",{className:"form-field full-width",children:[c.jsx("label",{className:"field-label",children:"Necesidades especiales"}),c.jsx("textarea",{value:o.specialNeeds,onChange:K=>B("specialNeeds",K.target.value),placeholder:"Medicamentos, cuidados especiales, etc.",className:"field-textarea",rows:"2"})]}),c.jsxs("div",{className:"checkbox-section",children:[c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:o.vaccinated,onChange:K=>B("vaccinated",K.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está vacunado"})]}),c.jsxs("label",{className:"checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:o.sterilized,onChange:K=>B("sterilized",K.target.checked),className:"checkbox-input"}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"checkbox-text",children:"Está esterilizado"})]})]}),c.jsx("button",{className:"submit-button",onClick:oe,disabled:_,children:_?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"loading-spinner"}),"Guardando..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"💾"}),"Guardar mascota"]})})]})]}),c.jsx(ke,{})]})}function jj(){const s=Et(),{user:e,logout:n}=qt(),[i,o]=I.useState("my-pets"),[u,d]=I.useState({name:"",address:"",phone:"",email:""}),[y,g]=I.useState([]),[p,_]=I.useState([]),[T,x]=I.useState([]),[C,U]=I.useState(!0),[B,V]=I.useState(!1),[Y,oe]=I.useState(null),[K,H]=I.useState({name:"",address:"",phone:"",email:""}),[k,F]=I.useState({name:"",breed:"",age:"",gender:"",location:"",description:""});I.useEffect(()=>{e?R():U(!1)},[e]);const R=async()=>{try{console.log("Profile: Starting to load user data for user:",e.uid),U(!0),console.log("Profile: Loading user profile...");const X=await kn.getUserProfile(e.uid);if(X)console.log("Profile: User profile found:",X),d(X),H(X);else{console.log("Profile: No user profile found, using basic profile");const fe={name:e.displayName||"Usuario",address:"",phone:"",email:e.email||""};d(fe),H(fe)}console.log("Profile: Loading pets for owner:",e.uid);const Ee=await Kt.getPetsByOwner(e.uid);console.log("Profile: Pets data received:",Ee),g(Ee),console.log("Profile: Loading favorites...");const O=await ds.getFavorites(e.uid);console.log("Profile: Favorites data received:",O),_(O),console.log("Profile: Loading shelters...");const ie=await hn.getSheltersByOwner(e.uid);console.log("Profile: Shelters data received:",ie),x(ie)}catch(X){console.error("Profile: Error loading user data:",X)}finally{U(!1)}},w=(X,Ee)=>{H(O=>({...O,[X]:Ee}))},N=async()=>{try{await kn.updateUserProfile(e.uid,K),d(K),V(!1),alert("Perfil actualizado correctamente")}catch(X){console.error("Error updating profile:",X),alert("Error al actualizar el perfil")}},j=()=>{H(u),V(!1)},P=X=>{X.ownerId===e.uid?(oe(X),F({name:X.name||"",breed:X.breed||"",age:X.age||"",gender:X.gender||"",location:X.location||"",description:X.description||""})):s("/adopt",{state:{pet:X}})},q=async(X,Ee)=>{if(Ee.stopPropagation(),!!e?.uid)try{p.some(ie=>ie.petId===X.id)?(await ds.removeFavorite(e.uid,X.id),_(ie=>ie.filter(fe=>fe.petId!==X.id))):(await ds.addFavorite(e.uid,X.id),_(ie=>[...ie,{petId:X.id,userId:e.uid,createdAt:new Date().toISOString()}]))}catch(O){console.error("Error updating favorites:",O)}},D=async()=>{try{await n(),s("/login")}catch(X){console.error("Error logging out:",X),alert("Error al cerrar sesión")}},he=(X,Ee)=>{F(O=>({...O,[X]:Ee}))},De=async()=>{if(Y)try{await Kt.updatePet(Y.id,k),alert("Mascota actualizada correctamente"),oe(null),await R()}catch(X){console.error("Error updating pet:",X),alert("Error al actualizar la mascota")}},te=()=>{oe(null),F({name:"",breed:"",age:"",gender:"",location:"",description:""})},ue=async()=>{if(!Y)return;const X=`¿Estás seguro de que quieres eliminar a ${Y.name}?

Esto también eliminará:
• Todas las solicitudes de adopción
• Todas las notificaciones relacionadas
• Mensajes en chats (se notificará a los usuarios)
• Favoritos de otros usuarios

Esta acción no se puede deshacer.`;if(window.confirm(X))try{const Ee=await Kt.deletePet(Y.id);let O=`✅ ${Y.name} eliminado correctamente`;Ee.deleted&&(O+=`

Eliminado:
`,Ee.deleted.adoptionRequests>0&&(O+=`• ${Ee.deleted.adoptionRequests} solicitudes de adopción
`),Ee.deleted.notifications>0&&(O+=`• ${Ee.deleted.notifications} notificaciones
`),Ee.deleted.conversations>0&&(O+=`• Mensajes en ${Ee.deleted.conversations} conversaciones
`),Ee.deleted.favorites>0&&(O+=`• ${Ee.deleted.favorites} favoritos
`)),alert(O),oe(null),await R()}catch(Ee){console.error("Error deleting pet:",Ee),alert("Error al eliminar la mascota: "+Ee.message)}};return C?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando perfil..."})]}),c.jsx(ke,{})]}):e?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"profile-header",children:[c.jsxs("div",{className:"profile-info",children:[c.jsx("div",{className:"profile-avatar",children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"avatar-text",children:(u.name||"U").charAt(0).toUpperCase()})})}),c.jsxs("div",{className:"profile-details",children:[c.jsx("h2",{className:"profile-name",children:u.name||"Usuario"}),c.jsx("p",{className:"profile-email",children:u.email||e.email})]})]}),c.jsx("button",{className:"settings-button",onClick:()=>V(!B),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})})})]}),c.jsxs("main",{className:"profile-main",children:[c.jsxs("div",{className:"profile-tabs",children:[c.jsx("button",{className:`tab-button ${i==="my-pets"?"active":""}`,onClick:()=>o("my-pets"),children:"Tus mascotas"}),c.jsx("button",{className:`tab-button ${i==="favorites"?"active":""}`,onClick:()=>o("favorites"),children:"Favoritas"}),c.jsx("button",{className:`tab-button ${i==="shelters"?"active":""}`,onClick:()=>o("shelters"),children:"Mis Refugios"})]}),c.jsxs("div",{className:"tab-content",children:[i==="my-pets"&&c.jsxs("div",{className:"pets-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Mascotas (",y.length,")"]}),c.jsx("div",{className:"section-actions",children:c.jsxs("button",{className:"refresh-button",onClick:R,disabled:C,children:[C?"🔄":"↻"," Recargar"]})})]}),y.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:y.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>P(X),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.img,alt:X.name,className:"pet-image"}),c.jsx("div",{className:"pet-type-badge",children:X.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.name}),c.jsxs("p",{className:"pet-details",children:[X.breed," • ",X.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.location]})]})]})]},X.id))})]}),i==="favorites"&&c.jsx("div",{className:"favorites-section",children:p.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"❤️"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Las mascotas que marques como favoritas aparecerán aquí"})]}):c.jsx("div",{className:"pets-grid",children:p.map(X=>c.jsxs("div",{className:"pet-card",onClick:()=>P(X.pet),children:[c.jsxs("div",{className:"pet-image-wrapper",children:[c.jsx("img",{src:X.pet?.img,alt:X.pet?.name,className:"pet-image"}),c.jsx("button",{className:"favorite-btn favorited",onClick:Ee=>q(X.pet,Ee),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),c.jsx("div",{className:"pet-type-badge",children:X.pet?.type})]}),c.jsxs("div",{className:"pet-content",children:[c.jsx("h3",{className:"pet-name",children:X.pet?.name}),c.jsxs("p",{className:"pet-details",children:[X.pet?.breed," • ",X.pet?.gender]}),c.jsxs("div",{className:"pet-meta",children:[c.jsx("span",{className:"pet-age",children:X.pet?.age}),c.jsxs("span",{className:"pet-location",children:["📍 ",X.pet?.location]})]})]})]},X.id))})}),i==="shelters"&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h3",{children:["Mis Refugios (",T.length,")"]}),c.jsxs("div",{className:"section-actions",children:[c.jsx("button",{className:"refresh-button",onClick:R,disabled:C,children:"🔄 Actualizar"}),c.jsx("button",{className:"add-button",onClick:()=>s("/shelter-register"),children:"➕ Registrar Refugio"})]})]}),T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu refugio para comenzar a gestionar mascotas"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):c.jsx("div",{className:"shelters-grid",children:T.map(X=>c.jsxs("div",{className:"shelter-card",children:[c.jsxs("div",{className:"shelter-image-wrapper",children:[c.jsx("img",{src:X.image||"/default-shelter.jpg",alt:X.name,className:"shelter-image"}),X.isPremium&&c.jsx("div",{className:"premium-badge",children:"⭐ Premium"}),c.jsx("div",{className:"status-badge status-{shelter.status}",children:X.status==="active"?"Activo":X.status==="pending"?"Pendiente":"Inactivo"})]}),c.jsxs("div",{className:"shelter-content",children:[c.jsx("h3",{className:"shelter-name",children:X.name}),c.jsxs("p",{className:"shelter-location",children:["📍 ",X.location]}),c.jsx("p",{className:"shelter-description",children:X.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("span",{className:"rating",children:["⭐ ",X.rating||"N/A"]}),c.jsxs("span",{className:"pets-count",children:["🐾 ",X.petsCount||0," mascotas"]})]}),c.jsxs("div",{className:"shelter-actions",children:[c.jsx("button",{className:"manage-button",onClick:()=>s("/shelter-admin"),children:"Gestionar"}),!X.isPremium&&c.jsx("button",{className:"upgrade-button",onClick:()=>s("/shelters"),children:"Actualizar a Premium"})]})]})]},X.id))})]})]}),B&&c.jsx("div",{className:"modal-overlay",onClick:()=>V(!1),children:c.jsxs("div",{className:"settings-modal",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"settings-header",children:[c.jsxs("div",{className:"settings-title",children:[c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})}),c.jsx("h3",{children:"Configuración"})]}),c.jsx("button",{className:"close-btn",onClick:()=>V(!1),children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"settings-content",children:[c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Información Personal"}),c.jsxs("div",{className:"form-grid",children:[c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Nombre completo"]}),c.jsx("input",{type:"text",value:K.name,onChange:X=>w("name",X.target.value),placeholder:"Tu nombre completo",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Dirección"]}),c.jsx("input",{type:"text",value:K.address,onChange:X=>w("address",X.target.value),placeholder:"Tu dirección",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),"Teléfono"]}),c.jsx("input",{type:"tel",value:K.phone,onChange:X=>w("phone",X.target.value),placeholder:"Tu número de teléfono",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Email"]}),c.jsx("input",{type:"email",value:K.email,onChange:X=>w("email",X.target.value),placeholder:"Tu email",className:"form-input"})]})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h4",{className:"section-title",children:"Preferencias de Visualización"}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Mostrar mascotas"]}),c.jsxs("div",{className:"select-wrapper",children:[c.jsxs("select",{value:i,onChange:X=>o(X.target.value),className:"form-select",children:[c.jsx("option",{value:"my-pets",children:"Mis mascotas"}),c.jsx("option",{value:"favorites",children:"Favoritas"}),c.jsx("option",{value:"shelters",children:"Mis refugios"})]}),c.jsx("svg",{className:"select-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M7 10l5 5 5-5z"})})]})]})]})]}),c.jsxs("div",{className:"settings-footer",children:[c.jsxs("button",{className:"logout-btn",onClick:D,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Cerrar Sesión"]}),c.jsxs("div",{className:"settings-actions",children:[c.jsx("button",{className:"cancel-btn",onClick:j,children:"Cancelar"}),c.jsxs("button",{className:"save-btn",onClick:N,children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Guardar"]})]})]})]})}),Y&&c.jsx("div",{className:"modal-overlay",onClick:te,children:c.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Editar Mascota"}),c.jsx("button",{className:"close-btn",onClick:te,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre"}),c.jsx("input",{type:"text",value:k.name,onChange:X=>he("name",X.target.value),placeholder:"Nombre de la mascota"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Raza"}),c.jsx("input",{type:"text",value:k.breed,onChange:X=>he("breed",X.target.value),placeholder:"Raza de la mascota"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Edad"}),c.jsx("input",{type:"text",value:k.age,onChange:X=>he("age",X.target.value),placeholder:"Edad"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Género"}),c.jsxs("select",{value:k.gender,onChange:X=>he("gender",X.target.value),children:[c.jsx("option",{value:"",children:"Seleccionar"}),c.jsx("option",{value:"Macho",children:"Macho"}),c.jsx("option",{value:"Hembra",children:"Hembra"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación"}),c.jsx("input",{type:"text",value:k.location,onChange:X=>he("location",X.target.value),placeholder:"Ubicación"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción"}),c.jsx("textarea",{value:k.description,onChange:X=>he("description",X.target.value),placeholder:"Descripción de la mascota",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"delete-button",onClick:ue,children:"Eliminar Mascota"}),c.jsxs("div",{className:"modal-actions-right",children:[c.jsx("button",{className:"cancel-button",onClick:te,children:"Cancelar"}),c.jsx("button",{className:"save-button",onClick:De,children:"Guardar"})]})]})]})})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu perfil"}),c.jsx("p",{children:"Necesitas iniciar sesión para acceder a tu perfil"}),c.jsx("button",{className:"browse-button",onClick:()=>s("/login"),children:"Iniciar sesión"})]}),c.jsx(ke,{})]})}function Dj(){const s=Et(),{login:e}=qt(),[n,i]=I.useState(""),[o,u]=I.useState(""),[d,y]=I.useState(""),[g,p]=I.useState(!1),_=async T=>{T.preventDefault(),p(!0),y("");try{await e(n,o),s("/")}catch(x){y("Error al iniciar sesión. Verifica tus credenciales."),console.error("Login error:",x)}finally{p(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Bienvenido de vuelta!"}),c.jsx("p",{className:"auth-subtitle",children:"Inicia sesión para continuar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:_,className:"auth-form",children:[d&&c.jsx("div",{className:"error-message",children:d}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n,onChange:T=>i(T.target.value),placeholder:"tu@correo.com",required:!0,disabled:g})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:o,onChange:T=>u(T.target.value),placeholder:"••••••••",required:!0,disabled:g})]}),c.jsx("button",{className:`auth-button ${g?"loading":""}`,type:"submit",disabled:g,children:g?"Iniciando sesión...":"Iniciar sesión"}),c.jsxs("div",{className:"auth-link",children:["¿No tienes cuenta? ",c.jsx(Fh,{to:"/register",children:"Crear cuenta"})]})]})}),c.jsx(ke,{})]})}function Mj(){const s=Et(),{register:e}=qt(),[n,i]=I.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",isShelter:!1}),[o,u]=I.useState(""),[d,y]=I.useState(!1),g=(_,T)=>i(x=>({...x,[_]:T})),p=async _=>{if(_.preventDefault(),y(!0),u(""),n.password!==n.confirmPassword){u("Las contraseñas no coinciden"),y(!1);return}if(n.password.length<6){u("La contraseña debe tener al menos 6 caracteres"),y(!1);return}try{await e(n.email,n.password,{name:n.name,phone:n.phone,address:n.address,isShelter:n.isShelter}),s("/")}catch(T){u("Error al crear la cuenta. Intenta de nuevo."),console.error("Register error:",T)}finally{y(!1)}};return c.jsxs("div",{className:"auth-container",children:[c.jsxs("header",{className:"auth-header",children:[c.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),c.jsx("h1",{className:"auth-title",children:"¡Únete a nosotros!"}),c.jsx("p",{className:"auth-subtitle",children:"Crea tu cuenta para comenzar"})]}),c.jsx("div",{className:"auth-form-container",children:c.jsxs("form",{onSubmit:p,className:"auth-form",children:[o&&c.jsx("div",{className:"error-message",children:o}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nombre completo"}),c.jsx("input",{type:"text",className:"form-input",value:n.name,onChange:_=>g("name",_.target.value),placeholder:"Tu nombre completo",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Correo electrónico"}),c.jsx("input",{type:"email",className:"form-input",value:n.email,onChange:_=>g("email",_.target.value),placeholder:"tu@correo.com",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.password,onChange:_=>g("password",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Confirmar contraseña"}),c.jsx("input",{type:"password",className:"form-input",value:n.confirmPassword,onChange:_=>g("confirmPassword",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Teléfono (opcional)"}),c.jsx("input",{type:"tel",className:"form-input",value:n.phone,onChange:_=>g("phone",_.target.value),placeholder:"+506 0000-0000",disabled:d})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Dirección (opcional)"}),c.jsx("input",{type:"text",className:"form-input",value:n.address,onChange:_=>g("address",_.target.value),placeholder:"Tu dirección",disabled:d})]}),c.jsxs("div",{className:"checkbox-group",children:[c.jsx("input",{type:"checkbox",className:"checkbox-input",id:"isShelter",checked:n.isShelter,onChange:_=>g("isShelter",_.target.checked),disabled:d}),c.jsx("label",{className:"checkbox-label",htmlFor:"isShelter",children:"¿Eres un refugio de animales?"})]}),c.jsx("button",{className:`auth-button ${d?"loading":""}`,type:"submit",disabled:d,children:d?"Creando cuenta...":"Crear cuenta"}),c.jsxs("div",{className:"auth-link",children:["¿Ya tienes cuenta? ",c.jsx(Fh,{to:"/login",children:"Iniciar sesión"})]})]})}),c.jsx(ke,{})]})}function Pj(){const{user:s}=qt(),e=Jn(),n=Et(),{petId:i}=pp(),o=e.state?.pet,[u,d]=I.useState(o),[y,g]=I.useState(!o),[p,_]=I.useState({name:s?.displayName||"",email:s?.email||"",message:""}),[T,x]=I.useState(!1),[C,U]=I.useState(!1),[B,V]=I.useState(!1),[Y,oe]=I.useState(!1);I.useEffect(()=>{if(o){if(d(o),g(!1),H(o.id),k(o.id),s?.uid&&o.ownerId===s.uid){n("/profile");return}}else if(i)K(i);else{n("/");return}},[o,i,n,s]);const K=async N=>{try{console.log("Loading pet from Firebase with ID:",N),g(!0);const j=await Kt.getPetById(N);if(j){if(console.log("Pet loaded from Firebase:",j),s?.uid&&j.ownerId===s.uid){n("/profile");return}d(j),H(j.id),k(j.id)}else console.log("Pet not found in Firebase"),n("/")}catch(j){console.error("Error loading pet from Firebase:",j),n("/")}finally{g(!1)}},H=async N=>{if(s?.uid)try{const P=(await un.getAdoptionRequests(s.uid)).find(q=>q.petId===N&&(q.status==="pending"||q.status==="approved"));V(!!P)}catch(j){console.error("Error checking existing request:",j)}},k=async N=>{if(s?.uid)try{const j=await ds.isFavorite(s.uid,N);oe(j)}catch(j){console.error("Error checking favorite status:",j)}},F=async()=>{if(!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{Y?(await ds.removeFavorite(s.uid,u.id),oe(!1),console.log("Pet removed from favorites")):(await ds.addFavorite(s.uid,u.id),oe(!0),console.log("Pet added to favorites"))}catch(N){console.error("Error updating favorites:",N),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},R=N=>{_(j=>({...j,[N.target.name]:N.target.value}))},w=async N=>{if(N.preventDefault(),!s?.uid){alert("Debes iniciar sesión para solicitar adopción");return}try{U(!0),console.log("=== STARTING ADOPTION REQUEST ==="),console.log("Pet data:",u),console.log("Form data:",p),console.log("User data:",s),console.log("Pet ownerId:",u.ownerId);const j={userId:s.uid,petId:u.id,ownerId:u.ownerId,pet:u,adopterName:p.name,adopterEmail:p.email,message:p.message||""};console.log("Creating adoption request with data:",j);const P=await un.createAdoptionRequest(j);if(console.log("✅ Adoption request created with ID:",P),await up.createNotification({userId:s.uid,type:"adoption",title:"Solicitud de adopción enviada",message:`Tu solicitud para adoptar a ${u.name} ha sido enviada y está siendo revisada.`,adoptionRequestId:P}),u.ownerId){console.log("=== CREATING NOTIFICATION FOR OWNER ==="),console.log("Pet owner ID:",u.ownerId),console.log("Adopter ID:",s.uid),console.log("Pet name:",u.name),console.log("Adopter name:",p.name);try{const q=await up.createNotification({userId:u.ownerId,type:"adoption_request",title:"Nueva solicitud de adopción",message:`${p.name} quiere adoptar a ${u.name}. Revisa la solicitud en tu perfil.`,adoptionRequestId:P,petId:u.id,adopterId:s.uid});console.log("✅ Notification created successfully for pet owner:",u.ownerId),console.log("Notification ID:",q)}catch(q){console.error("❌ Error creating notification for owner:",q)}}else console.log("❌ No ownerId found for pet:",u);console.log("Notifications created successfully"),x(!0)}catch(j){console.error("Error creating adoption request:",j),alert("Error al procesar la solicitud. Inténtalo de nuevo.")}finally{U(!1)}};return y?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascota..."})]})}),c.jsx(ke,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"adopt-container",children:[c.jsxs("div",{className:"pet-header",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:u.img,alt:u.name,className:"pet-img"}),c.jsx("button",{className:`favorite-button ${Y?"active":""}`,onClick:F,title:Y?"Quitar de favoritos":"Agregar a favoritos",disabled:!s?.uid,children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.name}),c.jsxs("p",{className:"pet-details",children:[u.breed," • ",u.gender," • ",u.age," • ",u.location]})]})]}),T?c.jsxs("div",{className:"adoption-completed",children:[c.jsx("div",{className:"success-icon",children:"✅"}),c.jsx("h2",{children:"¡Solicitud enviada!"}),c.jsx("p",{children:"Tu solicitud de adopción ha sido enviada y está siendo revisada."}),c.jsxs("div",{className:"completion-actions",children:[c.jsx("button",{className:"tracking-button",onClick:()=>n("/tracking"),children:"Ver seguimiento"}),c.jsx("button",{className:"home-button",onClick:()=>n("/"),children:"Volver al inicio"})]})]}):c.jsxs(c.Fragment,{children:[B&&c.jsxs("div",{className:"existing-request-warning",children:[c.jsxs("p",{children:["⚠️ Ya tienes una solicitud pendiente para adoptar a ",u.name]}),c.jsx("p",{children:"Puedes revisar el estado de tu solicitud en tu perfil."})]}),c.jsxs("form",{className:"adopt-form",onSubmit:w,children:[!s?.uid&&c.jsxs("div",{className:"login-required",children:[c.jsx("p",{children:"Debes iniciar sesión para solicitar adopción"}),c.jsx("button",{type:"button",onClick:()=>n("/login"),children:"Iniciar sesión"})]}),c.jsx("label",{children:"Nombre"}),c.jsx("input",{name:"name",value:p.name,onChange:R,placeholder:"Tu nombre",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",name:"email",value:p.email,onChange:R,placeholder:"Tu email",required:!0,disabled:!s?.uid}),c.jsx("label",{children:"Mensaje (opcional)"}),c.jsx("textarea",{name:"message",value:p.message,onChange:R,placeholder:"Cuéntanos por qué quieres adoptar esta mascota...",rows:"3",disabled:!s?.uid}),c.jsx("button",{type:"submit",disabled:!s?.uid||C||B,children:C?"Enviando...":B?"Solicitud ya enviada":"Adoptar"})]})]})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{children:c.jsx("h2",{className:"logo-text",children:"Adoptar"})}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la mascota."}),c.jsx("button",{onClick:()=>n("/"),children:"Volver al inicio"})]})}),c.jsx(ke,{})]})}function Oj(){const{user:s}=qt(),e=Et(),[n,i]=I.useState("sent"),[o,u]=I.useState([]),[d,y]=I.useState([]),[g,p]=I.useState(!0),[_,T]=I.useState(null),[x,C]=I.useState(!1);I.useEffect(()=>{s?.uid?U():p(!1)},[s]);const U=async()=>{try{p(!0),T(null);const k=await un.getAdoptionRequests(s.uid);console.log("Sent requests loaded:",k);const F=await un.getAdoptionRequestsForOwner(s.uid);console.log("Received requests loaded:",F);const R=await Promise.all(k.map(async N=>{const j=await Kt.getPetById(N.petId),P=await kn.getUserProfile(N.ownerId);return{...N,pet:j,owner:P}})),w=await Promise.all(F.map(async N=>{const j=await Kt.getPetById(N.petId),P=await kn.getUserProfile(N.userId);return{...N,pet:j,requester:P}}));u(R),y(w)}catch(k){console.error("Error loading requests:",k),T("Error al cargar solicitudes de adopción")}finally{p(!1)}},B=async k=>{try{C(!0),await un.approveAdoptionRequest(k),await U(),alert("Solicitud aprobada exitosamente")}catch(F){console.error("Error approving request:",F),alert("Error al aprobar la solicitud")}finally{C(!1)}},V=async k=>{try{C(!0),await un.rejectAdoptionRequest(k),await U(),alert("Solicitud rechazada")}catch(F){console.error("Error rejecting request:",F),alert("Error al rechazar la solicitud")}finally{C(!1)}},Y=k=>{switch(k){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},oe=k=>{switch(k){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}},K=k=>{e("/adoption-details",{state:{adoption:k}})};if(g)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]})}),c.jsx(ke,{})]});if(!s?.uid)return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para ver tu seguimiento"}),c.jsx("p",{children:"Necesitas iniciar sesión para gestionar tus solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(ke,{})]});const H=n==="sent"?o:d;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Seguimiento"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),c.jsxs("main",{className:"main-content",children:[_&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:_}),c.jsx("button",{onClick:U,children:"Reintentar"})]}),c.jsxs("div",{className:"tracking-tabs",children:[c.jsxs("button",{className:`tracking-tab ${n==="sent"?"active":""}`,onClick:()=>i("sent"),children:["Mis solicitudes (",o.length,")"]}),c.jsxs("button",{className:`tracking-tab ${n==="received"?"active":""}`,onClick:()=>i("received"),children:["Solicitudes recibidas (",d.length,")"]})]}),c.jsx("div",{className:"tracking-content",children:H.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:n==="sent"?"📤":"📥"}),c.jsx("h3",{children:n==="sent"?"No has enviado solicitudes":"No tienes solicitudes recibidas"}),c.jsx("p",{children:n==="sent"?"Cuando envíes solicitudes de adopción, aparecerán aquí":"Las solicitudes para tus mascotas aparecerán aquí"}),n==="sent"&&c.jsx("button",{className:"browse-button",onClick:()=>e("/"),children:"Ver mascotas disponibles"})]}):c.jsx("div",{className:"requests-list",children:H.map(k=>c.jsxs("div",{className:"request-card",children:[c.jsx("div",{className:"request-image",children:c.jsx("img",{src:k.pet?.img||"/placeholder-pet.jpg",alt:k.pet?.name})}),c.jsxs("div",{className:"request-info",children:[c.jsx("h3",{children:k.pet?.name}),c.jsxs("p",{className:"pet-details",children:[k.pet?.breed," • ",k.pet?.age," • ",k.pet?.location]}),n==="sent"?c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Dueño:"})," ",k.owner?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.owner?.email||"No disponible"]})]}):c.jsxs("div",{className:"request-meta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",k.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",k.requester?.email||"No disponible"]}),k.message&&c.jsxs("p",{children:[c.jsx("strong",{children:"Mensaje:"}),' "',k.message,'"']})]}),c.jsxs("div",{className:"request-status",children:[c.jsx("span",{className:"status-badge",style:{backgroundColor:Y(k.status)},children:oe(k.status)}),c.jsx("span",{className:"date",children:new Date(k.createdAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"request-actions",children:[n==="received"&&k.status==="pending"&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"approve-btn",onClick:F=>{F.stopPropagation(),B(k.id)},disabled:x,children:"Aprobar"}),c.jsx("button",{className:"reject-btn",onClick:F=>{F.stopPropagation(),V(k.id)},disabled:x,children:"Rechazar"})]}),c.jsx("button",{className:"view-btn",onClick:()=>K(k),children:"Ver detalles"})]})]},k.id))})})]}),c.jsx(ke,{})]})}function kj(){const{user:s}=qt(),e=Jn(),n=Et(),{requestId:i}=pp(),o=e.state?.adoption,[u,d]=I.useState(o),[y,g]=I.useState(!o),[p,_]=I.useState([]),[T,x]=I.useState(""),[C,U]=I.useState(null);I.useEffect(()=>{if(o)d(o),g(!1),V(o.id);else if(i)B(i);else{n("/tracking");return}},[o,i,n,s]);const B=async F=>{try{console.log("Loading adoption request from Firebase with ID:",F),g(!0);const R=await un.getAdoptionRequestById(F);R?(console.log("Adoption request loaded from Firebase:",R),d(R),V(R.id)):(console.log("Adoption request not found in Firebase"),n("/tracking"))}catch(R){console.error("Error loading adoption request from Firebase:",R),n("/tracking")}finally{g(!1)}},V=async F=>{try{const w=(await bn.getConversations(s?.uid)).find(N=>N.petId===u.petId||N.adoptionRequestId===F);if(w){U(w.id);const N=await bn.getMessages(w.id);_(N)}else{const N=await bn.createConversation([s.uid,u.pet.ownerId||"admin"],u.petId,F);U(N),_([])}}catch(R){console.error("Error loading messages:",R);try{const w=JSON.parse(localStorage.getItem(`messages_${F}`)||"[]");_(w)}catch(w){console.error("Error loading messages from localStorage:",w)}}},Y=F=>{switch(F){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},oe=F=>{switch(F){case"pending":return"Pendiente de revisión";case"approved":return"Aprobada - Contacta al dueño";case"rejected":return"Rechazada";case"completed":return"Adopción completada";default:return"Desconocido"}},K=async()=>{try{if(!u||!s?.uid)return;const F=u.userId===s.uid?u.pet.ownerId:u.userId;if(!F){alert("No se pudo identificar al otro usuario");return}const R=await bn.getOrCreateConversation(s.uid,F,u.pet.id);n(`/chat/${R}`)}catch(F){console.error("Error starting chat:",F),alert("Error al iniciar el chat")}},H=async F=>{if(F.preventDefault(),!(!T.trim()||!C))try{const R={content:T,senderId:s.uid,senderName:s.displayName||"Usuario",type:"text"};await bn.sendMessage(C,R),x("");const w=await bn.getMessages(C);_(w)}catch(R){console.error("Error sending message:",R);const w={id:Date.now(),content:T,sender:"user",timestamp:new Date().toISOString()},N=[...p,w];_(N),x("");try{localStorage.setItem(`messages_${u.id}`,JSON.stringify(N))}catch(j){console.error("Error saving message to localStorage",j)}}},k=async F=>{if(u.pet.ownerId!==s?.uid){alert("Solo el dueño de la mascota puede aprobar o rechazar solicitudes de adopción");return}if(window.confirm(`¿Cambiar estado a ${F}?`))try{await un.updateAdoptionRequestStatus(u.id,F),d(R=>({...R,status:F})),alert("Estado actualizado correctamente")}catch(R){console.error("Error updating status:",R),alert("Error al actualizar el estado")}};return y?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando detalles de adopción..."})]})}),c.jsx(ke,{})]}):u?c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsxs("main",{className:"adoption-details-main",children:[c.jsxs("div",{className:"pet-section",children:[c.jsx("div",{className:"pet-image-container",children:c.jsx("img",{src:u.pet.img,alt:u.pet.name,className:"pet-detail-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h1",{children:u.pet.name}),c.jsx("p",{className:"pet-breed",children:u.pet.breed}),c.jsxs("div",{className:"pet-details",children:[c.jsxs("span",{children:["🐾 ",u.pet.age]}),c.jsxs("span",{children:["⚥ ",u.pet.gender]}),c.jsxs("span",{children:["📍 ",u.pet.location]})]})]})]}),c.jsxs("div",{className:"status-section",children:[c.jsxs("div",{className:"status-header",children:[c.jsx("h3",{children:"Estado de la Adopción"}),c.jsx("span",{className:"status-badge",style:{backgroundColor:Y(u.status)},children:oe(u.status)})]}),u.status==="pending"&&u.pet.ownerId===s?.uid&&c.jsxs("div",{className:"status-actions",children:[c.jsx("button",{className:"action-button approve",onClick:()=>k("approved"),children:"Aprobar Adopción"}),c.jsx("button",{className:"action-button reject",onClick:()=>k("rejected"),children:"Rechazar"})]}),u&&s?.uid&&c.jsx("div",{className:"chat-actions",children:c.jsx("button",{className:"action-button chat",onClick:K,children:"💬 Iniciar Chat"})}),u.status==="approved"&&u.pet.ownerId===s?.uid&&c.jsx("div",{className:"status-actions",children:c.jsx("button",{className:"action-button complete",onClick:()=>k("completed"),children:"Marcar como Completada"})}),u.pet.ownerId!==s?.uid&&c.jsx("div",{className:"status-info",children:c.jsx("p",{children:"Esta solicitud está siendo revisada por el dueño de la mascota."})})]}),c.jsxs("div",{className:"adopter-section",children:[c.jsx("h3",{children:"Información del Adoptante"}),c.jsxs("div",{className:"adopter-info",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Nombre:"}),c.jsx("span",{children:u.adopterName})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Email:"}),c.jsx("span",{children:u.adopterEmail})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Teléfono:"}),c.jsx("span",{children:u.adopterPhone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Fecha de solicitud:"}),c.jsx("span",{children:new Date(u.createdAt).toLocaleDateString()})]})]})]}),c.jsxs("div",{className:"messages-section",children:[c.jsx("h3",{children:"Conversación"}),c.jsx("div",{className:"messages-container",children:p.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):p.map(F=>c.jsxs("div",{className:`message ${F.sender==="user"?"user-message":"other-message"}`,children:[c.jsx("div",{className:"message-content",children:F.content}),c.jsx("div",{className:"message-time",children:new Date(F.timestamp).toLocaleTimeString()})]},F.id))}),c.jsxs("form",{onSubmit:H,className:"message-form",children:[c.jsx("input",{type:"text",value:T,onChange:F=>x(F.target.value),placeholder:"Escribe un mensaje...",className:"message-input"}),c.jsx("button",{type:"submit",className:"send-button",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>n("/tracking"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),c.jsx("main",{children:c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:"No se encontró la solicitud de adopción."}),c.jsx("button",{onClick:()=>n("/tracking"),children:"Volver al seguimiento"})]})}),c.jsx(ke,{})]})}function Vj(){const{user:s}=qt(),{conversationId:e}=pp(),n=Et(),[i,o]=I.useState([]),[u,d]=I.useState(""),[y,g]=I.useState(!0),[p,_]=I.useState(!1),[T,x]=I.useState(null),C=I.useRef(null),U=I.useRef(null);I.useEffect(()=>{if(!s?.uid){n("/login");return}return e&&(B(),V()),()=>{U.current&&U.current()}},[e,s]);const B=async()=>{try{g(!0),console.log("Chat: Loading messages for conversation:",e),U.current=bn.subscribeToMessages(e,k=>{console.log("Chat: Received messages:",k),o(k),oe(),bn.markMessagesAsRead(e,s.uid)})}catch(k){console.error("Error loading messages:",k)}finally{g(!1)}},V=async()=>{try{const F=(await bn.getConversations(s.uid)).find(R=>R.id===e);if(F){const R=F.participants.find(w=>w!==s.uid);if(R){const w=await kn.getUserProfile(R);x(w||{uid:R,name:"Usuario"})}}}catch(k){console.error("Error loading other user:",k)}},Y=async k=>{if(k.preventDefault(),!(!u.trim()||p))try{_(!0),console.log("Chat: Sending message:",{conversationId:e,message:u.trim()}),await bn.sendMessage(e,s.uid,u.trim()),console.log("Chat: Message sent successfully"),d("")}catch(F){console.error("Error sending message:",F),alert("Error al enviar el mensaje")}finally{_(!1)}},oe=()=>{C.current?.scrollIntoView({behavior:"smooth"})},K=k=>new Date(k).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),H=k=>{const F=new Date(k),R=new Date,w=new Date(R);return w.setDate(w.getDate()-1),F.toDateString()===R.toDateString()?"Hoy":F.toDateString()===w.toDateString()?"Ayer":F.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})};return y?c.jsxs("div",{className:"chat-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"chat-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversación..."})]})]}):c.jsxs("div",{className:"chat-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"chat-header",children:[c.jsx("button",{className:"back-button",onClick:()=>n("/conversations"),children:"← Volver"}),c.jsxs("div",{className:"chat-user-info",children:[c.jsx("div",{className:"user-avatar",children:T?.name?T.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:T?.name||"Usuario"}),c.jsx("p",{children:"En línea"})]})]})]}),c.jsxs("div",{className:"chat-messages",children:[i.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:"No hay mensajes aún. ¡Envía el primero!"})}):i.map((k,F)=>{const R=k.senderId===s.uid,w=k.senderId==="system"||k.isSystemMessage,N=F===0||H(k.timestamp)!==H(i[F-1].timestamp);return w?c.jsxs("div",{children:[N&&c.jsx("div",{className:"message-date",children:H(k.timestamp)}),c.jsx("div",{className:"message system",children:c.jsxs("div",{className:"message-content",children:[c.jsx("p",{children:k.message}),c.jsx("span",{className:"message-time",children:K(k.timestamp)})]})})]},k.id):c.jsxs("div",{children:[N&&c.jsx("div",{className:"message-date",children:H(k.timestamp)}),c.jsxs("div",{className:`message-bubble ${R?"own":"other"}`,children:[!R&&c.jsx("div",{className:"message-sender",children:k.senderName||"Usuario"}),c.jsxs("div",{className:"bubble-content",children:[c.jsx("p",{children:k.message}),c.jsx("span",{className:"bubble-time",children:K(k.timestamp)})]})]})]},k.id)}),c.jsx("div",{ref:C})]}),c.jsxs("form",{className:"chat-input",onSubmit:Y,children:[c.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),placeholder:"Escribe un mensaje...",disabled:p,maxLength:500}),c.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"send-button",children:p?"⏳":"📤"})]})]})}function Lj(){const{user:s}=qt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState(!0),[d,y]=I.useState(null),[g,p]=I.useState(!1),[_,T]=I.useState(null),x=I.useRef(0),C=I.useRef(0),U=I.useRef(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}B()},[s]);const B=async()=>{try{u(!0);const w=await bn.getConversations(s.uid),N=await Promise.all(w.map(async j=>{const P=j.participants.find(he=>he!==s.uid),q=P?await kn.getUserProfile(P):null,D=j.petId?await Kt.getPetById(j.petId):null;return{...j,otherUser:q||{uid:P,name:"Usuario"},pet:D}}));i(N)}catch(w){console.error("Error loading conversations:",w)}finally{u(!1)}},V=w=>{const N=new Date(w),P=(new Date-N)/(1e3*60*60);return P<24?N.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):P<168?N.toLocaleDateString("es-ES",{weekday:"short"}):N.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})},Y=w=>{e(`/chat/${w}`)},oe=(w,N)=>{d&&d!==N&&y(null),x.current=w.touches[0].clientX,C.current=w.touches[0].clientX,U.current=!1},K=(w,N)=>{if(!x.current)return;C.current=w.touches[0].clientX;const j=x.current-C.current;Math.abs(j)>10&&(U.current=!0,w.preventDefault())},H=(w,N)=>{if(!U.current)return;x.current-C.current>80?y(N):y(null),x.current=0,C.current=0,U.current=!1},k=(w,N)=>{w.stopPropagation(),T(N),p(!0)},F=async()=>{if(_)try{const w=await bn.deleteConversation(_);i(N=>N.filter(j=>j.id!==_)),p(!1),T(null),y(null),console.log("Conversación eliminada:",_,"Mensajes eliminados:",w.deletedMessages)}catch(w){console.error("Error al eliminar conversación:",w),i(N=>N.filter(j=>j.id!==_)),p(!1),T(null),y(null)}},R=()=>{p(!1),T(null),y(null)};return o?c.jsxs("div",{className:"conversations-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"conversations-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando conversaciones..."})]})]}):c.jsxs("div",{className:"conversations-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"conversations-header",children:[c.jsx("h1",{children:"Conversaciones"}),c.jsx("p",{children:"Gestiona tus mensajes con otros usuarios"})]}),c.jsx("div",{className:"conversations-list",children:n.length===0?c.jsxs("div",{className:"no-conversations",children:[c.jsx("div",{className:"no-conversations-icon",children:"💬"}),c.jsx("h3",{children:"No tienes conversaciones"}),c.jsx("p",{children:"Las conversaciones aparecerán aquí cuando alguien te envíe un mensaje"})]}):n.map(w=>c.jsxs("div",{className:`conversation-item ${d===w.id?"swiped":""}`,onClick:()=>!U.current&&Y(w.id),onTouchStart:N=>oe(N,w.id),onTouchMove:N=>K(N,w.id),onTouchEnd:N=>H(N,w.id),children:[c.jsx("div",{className:"conversation-avatar",children:w.otherUser.name.charAt(0).toUpperCase()}),c.jsxs("div",{className:"conversation-content",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsx("h3",{children:w.otherUser.name}),c.jsx("span",{className:"conversation-time",children:V(w.lastMessageTime)})]}),w.pet&&c.jsxs("div",{className:"conversation-pet",children:[c.jsx("span",{className:"pet-label",children:"Sobre:"}),c.jsx("span",{className:"pet-name",children:w.pet.name})]}),c.jsx("p",{className:"conversation-preview",children:w.lastMessage||"Sin mensajes"})]}),d===w.id&&c.jsx("div",{className:"conversation-actions",children:c.jsx("button",{className:"delete-button",onClick:N=>k(N,w.id),children:"🗑️"})})]},w.id))}),g&&c.jsx("div",{className:"delete-modal-overlay",children:c.jsxs("div",{className:"delete-modal",children:[c.jsx("div",{className:"delete-modal-header",children:c.jsx("h3",{children:"¿Eliminar conversación?"})}),c.jsx("div",{className:"delete-modal-content",children:c.jsx("p",{children:"Esta acción no se puede deshacer. Se eliminarán todos los mensajes de esta conversación."})}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"cancel-button",onClick:R,children:"Cancelar"}),c.jsx("button",{className:"confirm-delete-button",onClick:F,children:"Eliminar"})]})]})})]})}function Uj(){const{user:s}=qt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,y]=I.useState(""),[g,p]=I.useState(!0),[_,T]=I.useState(null),[x,C]=I.useState([]),[U,B]=I.useState(!1);I.useEffect(()=>{if(!s?.uid){e("/login");return}V()},[s]),I.useEffect(()=>{if(d.trim()==="")u(n);else{const H=n.filter(k=>k.name?.toLowerCase().includes(d.toLowerCase())||k.email?.toLowerCase().includes(d.toLowerCase()));u(H)}},[d,n]);const V=async()=>{try{p(!0);const k=(await kn.getAllUsers()).filter(F=>F.uid!==s.uid);i(k),u(k)}catch(H){console.error("Error loading users:",H)}finally{p(!1)}},Y=async H=>{try{T(H),B(!0);const k=await Kt.getPetsByOwner(H.uid);C(k)}catch(k){console.error("Error loading user pets:",k)}finally{B(!1)}},oe=async H=>{try{const k=await bn.getOrCreateConversation(s.uid,H.uid);e(`/chat/${k}`)}catch(k){console.error("Error creating conversation:",k),alert("Error al iniciar conversación")}},K=()=>{T(null),C([])};return g?c.jsxs("div",{className:"users-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"users-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando usuarios..."})]})]}):c.jsxs("div",{className:"users-container",children:[c.jsx(ke,{}),c.jsxs("div",{className:"users-header",children:[c.jsx("h1",{children:"Usuarios"}),c.jsx("p",{children:"Conecta con otros amantes de las mascotas"})]}),c.jsx("div",{className:"search-container",children:c.jsxs("div",{className:"search-input-wrapper",children:[c.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:d,onChange:H=>y(H.target.value),className:"search-input"})]})}),c.jsx("div",{className:"users-list",children:o.length===0?c.jsxs("div",{className:"no-users",children:[c.jsx("div",{className:"no-users-icon",children:"👥"}),c.jsx("h3",{children:"No se encontraron usuarios"}),c.jsx("p",{children:"Intenta con un término de búsqueda diferente"})]}):o.map(H=>c.jsxs("div",{className:"user-item",onClick:()=>Y(H),children:[c.jsx("div",{className:"user-avatar",children:H.name?H.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-content",children:[c.jsx("h3",{children:H.name||"Usuario"}),c.jsx("p",{children:H.email})]}),c.jsx("div",{className:"user-actions",children:c.jsx("button",{className:"message-button",onClick:k=>{k.stopPropagation(),oe(H)},children:"💬"})})]},H.uid))}),_&&c.jsx("div",{className:"user-profile-modal-overlay",children:c.jsxs("div",{className:"user-profile-modal",children:[c.jsxs("div",{className:"user-profile-header",children:[c.jsx("button",{className:"close-button",onClick:K,children:"✕"}),c.jsxs("div",{className:"user-profile-info",children:[c.jsx("div",{className:"user-profile-avatar",children:_.name?_.name.charAt(0).toUpperCase():"U"}),c.jsxs("div",{className:"user-profile-details",children:[c.jsx("h2",{children:_.name||"Usuario"}),c.jsx("p",{children:_.email})]})]}),c.jsx("button",{className:"send-message-button",onClick:()=>oe(_),children:"💬 Enviar Mensaje"})]}),c.jsxs("div",{className:"user-profile-content",children:[c.jsxs("h3",{children:["Mascotas de ",_.name]}),U?c.jsxs("div",{className:"pets-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando mascotas..."})]}):x.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("div",{className:"no-pets-icon",children:"🐾"}),c.jsx("p",{children:"Este usuario no tiene mascotas publicadas"})]}):c.jsx("div",{className:"user-pets-grid",children:x.map(H=>c.jsxs("div",{className:"user-pet-card",children:[c.jsx("div",{className:"pet-image-wrapper",children:c.jsx("img",{src:H.img||"/placeholder-pet.jpg",alt:H.name,className:"pet-image"})}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h4",{children:H.name}),c.jsxs("p",{children:[H.breed," • ",H.age," años"]}),c.jsxs("p",{className:"pet-location",children:["📍 ",H.location]})]})]},H.id))})]})]})})]})}function qj(){const{user:s}=qt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState(!0);I.useEffect(()=>{s?d():e("/login")},[s,e]);const d=async()=>{try{u(!0);const p=await ds.getFavorites(s.uid),_=await Promise.all(p.map(async T=>{const x=await Kt.getPetById(T.petId);return{...T,pet:x}}));i(_.filter(T=>T.pet)),console.log("Favorites loaded:",_)}catch(p){console.error("Error loading favorites:",p)}finally{u(!1)}},y=async p=>{try{await ds.removeFavorite(s.uid,p),i(_=>_.filter(T=>T.petId!==p)),console.log("Favorite removed")}catch(_){console.error("Error removing favorite:",_),alert("Error al quitar de favoritos")}},g=p=>{e("/adopt",{state:{pet:p}})};return o?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Mis Favoritos"})}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando favoritos..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Favoritos"}),c.jsx("p",{className:"page-subtitle",children:"Mascotas que te han gustado"})]}),c.jsx("main",{className:"main-content",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"💔"}),c.jsx("h3",{children:"No tienes favoritos"}),c.jsx("p",{children:"Explora las mascotas disponibles y agrega las que te gusten a tus favoritos"}),c.jsx("button",{className:"primary-button",onClick:()=>e("/"),children:"Explorar Mascotas"})]}):c.jsx("div",{className:"favorites-grid",children:n.map(p=>c.jsxs("div",{className:"favorite-card",children:[c.jsxs("div",{className:"pet-image-container",children:[c.jsx("img",{src:p.pet.img,alt:p.pet.name,onClick:()=>g(p.pet)}),c.jsx("button",{className:"remove-favorite-btn",onClick:()=>y(p.petId),title:"Quitar de favoritos",children:"❌"})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>g(p.pet),children:p.pet.name}),c.jsxs("p",{className:"pet-details",children:[p.pet.breed," • ",p.pet.gender," • ",p.pet.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",p.pet.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-details-btn",onClick:()=>g(p.pet),children:"Ver Detalles"})})]})]},p.id))})}),c.jsx(ke,{})]})}function zj(){const{user:s}=qt(),e=Et(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,y]=I.useState(!0),[g,p]=I.useState(null);I.useEffect(()=>{s?.uid?(_(),T()):y(!1)},[s]);const _=async()=>{try{console.log("Loading pets for owner:",s.uid),y(!0),p(null);const Y=(await Kt.getPets()).filter(oe=>oe.ownerId===s.uid);console.log("My pets loaded:",Y),i(Y)}catch(V){console.error("Error loading my pets:",V),p("Error al cargar tus mascotas")}finally{y(!1)}},T=async()=>{try{const V=await un.getAdoptionRequests(s.uid),Y=n.map(K=>K.id),oe=V.filter(K=>Y.includes(K.petId));console.log("Adoption requests for my pets:",oe),u(oe)}catch(V){console.error("Error loading adoption requests:",V)}},x=V=>{e("/adopt",{state:{pet:V}})},C=V=>{e("/adoption-details",{state:{adoption:V}})},U=V=>{switch(V){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},B=V=>{switch(V){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}};return d?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando tus mascotas..."})]})}),c.jsx(ke,{})]}):s?.uid?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsxs("main",{className:"main-content",children:[g&&c.jsxs("div",{className:"error-message",children:[c.jsx("p",{children:g}),c.jsx("button",{onClick:_,children:"Reintentar"})]}),c.jsxs("div",{className:"action-buttons-section",children:[c.jsxs("button",{className:"add-pet-button",onClick:()=>e("/upload"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 5v14m-7-7h14"})}),"Agregar Nueva Mascota"]}),c.jsxs("button",{className:"requests-button",onClick:()=>e("/adoption-requests"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Gestionar Solicitudes"]})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h3",{children:["Mis Mascotas (",n.length,")"]}),n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🐾"}),c.jsx("h3",{children:"No tienes mascotas registradas"}),c.jsx("p",{children:"Agrega tu primera mascota para comenzar a recibir solicitudes de adopción"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:n.map(V=>c.jsxs("div",{className:"pet-card",children:[c.jsxs("div",{className:"pet-image",onClick:()=>x(V),children:[c.jsx("img",{src:V.img,alt:V.name}),c.jsx("div",{className:"pet-status",children:c.jsx("span",{className:`status-badge ${V.status}`,children:V.status==="available"?"Disponible":"Adoptado"})})]}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h3",{onClick:()=>x(V),children:V.name}),c.jsxs("p",{className:"pet-details",children:[V.breed," • ",V.gender," • ",V.age]}),c.jsxs("p",{className:"pet-location",children:["📍 ",V.location]}),c.jsx("div",{className:"pet-actions",children:c.jsx("button",{className:"view-button",onClick:()=>x(V),children:"Ver Detalles"})})]})]},V.id))})]}),c.jsxs("div",{className:"requests-section",children:[c.jsxs("h3",{children:["Solicitudes de Adopción (",o.length,")"]}),o.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes de adopción"}),c.jsx("p",{children:"Las solicitudes de adopción para tus mascotas aparecerán aquí"})]}):c.jsx("div",{className:"requests-list",children:o.map(V=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsx("h4",{children:V.pet.name}),c.jsx("span",{className:"status-badge",style:{backgroundColor:U(V.status)},children:B(V.status)})]}),c.jsxs("div",{className:"request-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",V.adopterName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",V.adopterEmail]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",V.adopterPhone]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(V.createdAt).toLocaleDateString()]})]}),c.jsx("div",{className:"request-actions",children:c.jsx("button",{className:"view-button",onClick:()=>C(V),children:"Ver Detalles"})})]},V.id))})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),c.jsx("main",{className:"main-content",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔒"}),c.jsx("h3",{children:"Inicia sesión para gestionar tus mascotas"}),c.jsx("p",{children:"Necesitas iniciar sesión para ver y gestionar tus mascotas"}),c.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),c.jsx(ke,{})]})}function pg({isOpen:s,onClose:e,shelterId:n,shelterName:i,onSuccess:o}){const[u,d]=I.useState(!1),y={name:"Premium",price:"$9.99",duration:"mensual",features:["Mascotas en dos columnas","Mascotas destacadas al inicio","Badge premium visible","Mayor visibilidad en búsquedas"]},g=async()=>{d(!0);try{await new Promise(p=>setTimeout(p,2e3)),await hn.activatePremium(n,1),alert(`¡Felicidades! ${i} ahora tiene suscripción premium.`),o(),e()}catch(p){console.error("Error activating premium:",p),alert("Error al procesar el pago. Inténtalo de nuevo.")}finally{d(!1)}};return s?c.jsx("div",{className:"premium-modal-overlay",children:c.jsxs("div",{className:"premium-modal",children:[c.jsxs("div",{className:"premium-modal-header",children:[c.jsx("h2",{children:"⭐ Actualizar a Premium"}),c.jsx("button",{className:"close-button",onClick:e,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"premium-modal-content",children:[c.jsxs("div",{className:"shelter-info",children:[c.jsx("h3",{children:i}),c.jsx("p",{children:"Mejora la visibilidad de tus mascotas"})]}),c.jsxs("div",{className:"plan-card selected",children:[c.jsx("div",{className:"plan-header",children:c.jsx("h4",{children:y.name})}),c.jsxs("div",{className:"plan-price",children:[c.jsx("span",{className:"price",children:y.price}),c.jsxs("span",{className:"duration",children:["/",y.duration]})]}),c.jsx("ul",{className:"plan-features",children:y.features.map((p,_)=>c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:"✓"}),p]},_))})]}),c.jsx("div",{className:"payment-info",children:c.jsx("p",{className:"payment-note",children:"💳 Simulación de pago - Sin cargo real"})})]}),c.jsxs("div",{className:"premium-modal-footer",children:[c.jsx("button",{className:"cancel-button",onClick:e,disabled:u,children:"Cancelar"}),c.jsx("button",{className:"purchase-button",onClick:g,disabled:u,children:u?"Procesando...":"Activar Premium"})]})]})}):null}function Bj(){const s=Et(),{user:e}=qt(),[n,i]=I.useState([]),[o,u]=I.useState([]),[d,y]=I.useState([]),[g,p]=I.useState(""),[_,T]=I.useState(null),[x,C]=I.useState(!1),[U,B]=I.useState(null),[V,Y]=I.useState(!0);I.useEffect(()=>{oe()},[]);const oe=async()=>{try{Y(!0),console.log("Loading shelters from Firebase...");const he=new Promise((X,Ee)=>setTimeout(()=>Ee(new Error("Timeout loading shelters")),1e4)),De=Promise.all([hn.getPremiumShelters(),hn.getRegularShelters()]),[te,ue]=await Promise.race([De,he]);console.log("Premium shelters:",te),console.log("Regular shelters:",ue),u(te),y(ue),i([...te,...ue]),console.log("No se crean refugios de ejemplo automáticamente")}catch(he){console.error("Error loading shelters:",he),K()}finally{Y(!1)}},K=()=>{try{const he=JSON.parse(localStorage.getItem("shelters")||"[]");i(he),u(he.filter(De=>De.isPremium)),y(he.filter(De=>!De.isPremium))}catch(he){console.error("Error loading from localStorage",he)}},H=n.filter(he=>he.name.toLowerCase().includes(g.toLowerCase())||he.location.toLowerCase().includes(g.toLowerCase())||he.description.toLowerCase().includes(g.toLowerCase())),k=o.filter(he=>he.name.toLowerCase().includes(g.toLowerCase())||he.location.toLowerCase().includes(g.toLowerCase())||he.description.toLowerCase().includes(g.toLowerCase())),F=d.filter(he=>he.name.toLowerCase().includes(g.toLowerCase())||he.location.toLowerCase().includes(g.toLowerCase())||he.description.toLowerCase().includes(g.toLowerCase())),R=he=>{T(he)},w=he=>{alert(`Contactando con ${he.name}...
Teléfono: ${he.phone}
Email: ${he.email}`)},N=()=>{T(null)},j=()=>{s("/shelter-register")},P=he=>{B(he),C(!0)},q=()=>{oe()},D=(he,De=!1)=>c.jsxs("div",{className:`shelter-card ${De?"premium":""}`,onClick:()=>R(he),children:[De&&c.jsx("div",{className:"premium-badge",children:c.jsx("span",{children:"⭐ Premium"})}),c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:he.image,alt:he.name})}),c.jsxs("div",{className:"shelter-content",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h3",{children:he.name}),he.verified&&c.jsx("div",{className:"verified-badge",children:c.jsx("span",{children:"✓"})})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",he.location]}),c.jsx("p",{className:"shelter-description",children:he.description}),c.jsxs("div",{className:"shelter-meta",children:[c.jsx("div",{className:"rating",children:c.jsxs("span",{children:["⭐ ",he.rating]})}),c.jsx("div",{className:"pets-count",children:c.jsxs("span",{children:["🐾 ",he.petsCount," mascotas"]})})]}),!De&&e&&he.ownerId===e.uid&&c.jsx("button",{className:"upgrade-button",onClick:te=>{te.stopPropagation(),P(he)},children:"🚀 Actualizar a Premium"})]}),c.jsx("div",{className:"shelter-arrow",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})})]},he.id);return _?c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsxs("button",{className:"back-button",onClick:N,children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"section-title",children:"Detalles del Refugio"})]}),c.jsxs("main",{className:"shelter-details-main",children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("div",{className:"shelter-image",children:c.jsx("img",{src:_.image,alt:_.name})}),c.jsxs("div",{className:"shelter-info",children:[c.jsx("h1",{children:_.name}),c.jsxs("div",{className:"shelter-meta",children:[c.jsxs("div",{className:"rating",children:[c.jsx("span",{className:"stars",children:"⭐"}),c.jsx("span",{children:_.rating})]}),c.jsxs("div",{className:"pets-count",children:[c.jsx("span",{children:"🐾"}),c.jsxs("span",{children:[_.petsCount," mascotas"]})]}),_.verified&&c.jsxs("div",{className:"verified-badge",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:"Verificado"})]})]}),c.jsx("p",{className:"shelter-description",children:_.description})]})]}),c.jsxs("div",{className:"shelter-sections",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"contact-info",children:[c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📍"}),c.jsx("span",{children:_.address})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"📞"}),c.jsx("span",{children:_.phone})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"✉️"}),c.jsx("span",{children:_.email})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🌐"}),c.jsx("span",{children:_.website})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-icon",children:"🕒"}),c.jsx("span",{children:_.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:_.services.map((he,De)=>c.jsxs("div",{className:"service-item",children:[c.jsx("span",{children:"✓"}),c.jsx("span",{children:he})]},De))})]}),c.jsxs("div",{className:"actions-section",children:[c.jsx("button",{className:"contact-button",onClick:()=>w(_),children:"Contactar Refugio"}),c.jsx("button",{className:"visit-button",onClick:()=>s("/",{state:{shelter:_}}),children:"Ver Mascotas Disponibles"})]})]})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"section-title",children:"Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"header-actions"})]})}),c.jsxs("main",{className:"main-content",children:[c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box",children:[c.jsx("span",{className:"search-icon",children:"🔍"}),c.jsx("input",{type:"text",placeholder:"Buscar refugios...",value:g,onChange:he=>p(he.target.value)})]}),c.jsx("button",{className:"register-shelter-button",onClick:j,children:"Registrar Refugio"})]}),V?c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]}):c.jsxs("div",{className:"shelters-container",children:[k.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"⭐ Refugios Premium"}),c.jsx("p",{children:"Refugios destacados con mayor visibilidad"})]}),c.jsx("div",{className:"shelters-list premium-grid",children:k.map(he=>D(he,!0))})]}),F.length>0&&c.jsxs("div",{className:"shelters-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"🏠 Refugios"}),c.jsx("p",{children:"Conecta con organizaciones de rescate animal"})]}),c.jsx("div",{className:"shelters-list regular-grid",children:F.map(he=>D(he,!1))})]}),H.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h3",{children:"No se encontraron refugios"}),c.jsx("p",{children:"Intenta con otros términos de búsqueda"})]})]})]}),c.jsx(ke,{}),x&&U&&c.jsx(pg,{isOpen:x,onClose:()=>C(!1),shelterId:U.id,shelterName:U.name,onSuccess:q})]})}function Fj(){const s=Et(),{user:e}=qt(),[n,i]=I.useState({name:"",description:"",location:"",address:"",phone:"",email:"",website:"",hours:"",services:[],image:""}),[o,u]=I.useState([]),[d,y]=I.useState(!1),[g,p]=I.useState(""),[_,T]=I.useState(!1),[x,C]=I.useState(null);I.useEffect(()=>{e?U():s("/login")},[e,s]);const U=async()=>{try{const k=await kn.getUserProfile(e.uid);i(k?F=>({...F,name:k.name?`${k.name} - Refugio`:"Mi Refugio",email:k.email||e.email||"",phone:k.phone||"",address:k.address||"",location:k.address||"Costa Rica"}):F=>({...F,name:e.displayName?`${e.displayName} - Refugio`:"Mi Refugio",email:e.email||"",location:"Costa Rica"}))}catch(k){console.error("Error loading user data:",k)}},B=["Adopción","Esterilización","Vacunación","Atención médica","Rescate","Rehabilitación","Entrenamiento","Hospedaje temporal","Donaciones","Voluntariado"],V=(k,F)=>{i(R=>({...R,[k]:F}))},Y=k=>{u(F=>F.includes(k)?F.filter(R=>R!==k):[...F,k])},oe=async k=>{k.preventDefault(),y(!0),p("");try{const F={...n,services:o,ownerId:e?.uid||"anonymous",ownerName:e?.displayName||e?.email||"Usuario Anónimo",rating:0,petsCount:0,verified:!0,isPremium:!1,status:"active"};console.log("Creating shelter with data:",F);const R=await hn.createShelter(F);console.log("Shelter created with ID:",R),T(!0),C(R)}catch(F){console.error("Error creating shelter",F),p("Error al registrar el refugio. Inténtalo de nuevo.")}finally{y(!1)}},K=()=>{T(!1),C(null),alert(`¡Refugio registrado exitosamente! Ahora tienes acceso premium.

¿Te gustaría subir tu primera mascota?`),s("/upload")},H=()=>{T(!1),C(null),alert(`Refugio registrado exitosamente. Puedes actualizar a premium más tarde desde la página de refugios.

¿Te gustaría subir tu primera mascota?`),s("/upload")};return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("button",{className:"back-button",onClick:()=>s("/shelters"),children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),c.jsx("h2",{className:"logo-text",children:"Registrar Refugio"}),c.jsx("p",{className:"page-subtitle",children:"Únete a nuestra red de organizaciones de rescate"})]}),c.jsxs("main",{className:"shelter-register-main",children:[!e&&c.jsxs("div",{className:"info-message",children:[c.jsx("span",{children:"ℹ️"}),c.jsx("span",{children:"Puedes registrar un refugio sin iniciar sesión. Si tienes cuenta, inicia sesión para gestionar mejor tu refugio."})]}),g&&c.jsxs("div",{className:"error-message",children:[c.jsx("span",{children:"⚠️"}),c.jsx("span",{children:g})]}),c.jsxs("form",{onSubmit:oe,className:"shelter-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información Básica"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Nombre del Refugio *"}),c.jsx("input",{type:"text",value:n.name,onChange:k=>V("name",k.target.value),placeholder:"Ej: Refugio Animal San José",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Descripción *"}),c.jsx("textarea",{value:n.description,onChange:k=>V("description",k.target.value),placeholder:"Describe tu organización, misión y objetivos...",rows:"4",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Imagen del Refugio"}),c.jsx("input",{type:"url",value:n.image,onChange:k=>V("image",k.target.value),placeholder:"https://ejemplo.com/imagen.jpg"}),n.image&&c.jsx("div",{className:"image-preview",children:c.jsx("img",{src:n.image,alt:"Preview"})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Información de Contacto"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Ubicación *"}),c.jsx("input",{type:"text",value:n.location,onChange:k=>V("location",k.target.value),placeholder:"Ej: San José, Costa Rica",required:!0})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Teléfono"}),c.jsx("input",{type:"tel",value:n.phone,onChange:k=>V("phone",k.target.value),placeholder:"+506 2222-3333"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:n.email,onChange:k=>V("email",k.target.value),placeholder:"contacto@refugio.com"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Sitio Web"}),c.jsx("input",{type:"url",value:n.website,onChange:k=>V("website",k.target.value),placeholder:"www.refugio.com"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Horarios de Atención *"}),c.jsx("input",{type:"text",value:n.hours,onChange:k=>V("hours",k.target.value),placeholder:"Lunes a Viernes: 8:00 AM - 6:00 PM",required:!0})]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Servicios Ofrecidos"}),c.jsx("p",{className:"section-description",children:"Selecciona todos los servicios que ofrece tu refugio:"}),c.jsx("div",{className:"services-grid",children:B.map(k=>c.jsxs("label",{className:"service-checkbox",children:[c.jsx("input",{type:"checkbox",checked:o.includes(k),onChange:()=>Y(k)}),c.jsx("span",{className:"checkmark"}),c.jsx("span",{className:"service-label",children:k})]},k))})]}),c.jsx("div",{className:"form-section",children:c.jsx("div",{className:"terms-section",children:c.jsxs("label",{className:"terms-checkbox",children:[c.jsx("input",{type:"checkbox",required:!0}),c.jsx("span",{className:"checkmark"}),c.jsxs("span",{children:["Acepto los ",c.jsx("a",{href:"#",className:"terms-link",children:"términos y condiciones"})," y la ",c.jsx("a",{href:"#",className:"terms-link",children:"política de privacidad"})]})]})})}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>s("/shelters"),children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-button",disabled:d,children:d?"Registrando...":"Registrar Refugio"})]})]})]}),c.jsx(ke,{}),c.jsx(pg,{isOpen:_,onClose:H,shelterId:x,shelterName:n.name,onSuccess:K})]})}function Hj(){const s=Et(),{user:e}=qt(),[n,i]=I.useState([]),[o,u]=I.useState(null),[d,y]=I.useState([]),[g,p]=I.useState(!0),[_,T]=I.useState(!1),[x,C]=I.useState(null);I.useEffect(()=>{e?U():s("/login")},[e,s]);const U=async()=>{try{p(!0);const F=await hn.getSheltersByOwner(e.uid);i(F),console.log("User shelters loaded:",F)}catch(F){console.error("Error loading shelters:",F)}finally{p(!1)}},B=async F=>{try{const R=await Kt.getPetsByShelter(F);y(R),console.log("Shelter pets loaded:",R)}catch(R){console.error("Error loading shelter pets:",R)}},V=F=>{u(F),B(F.id)},Y=F=>{C(F),T(!0)},oe=()=>{U(),T(!1)},K=async F=>{if(window.confirm("¿Estás seguro de que quieres eliminar este refugio? Esta acción no se puede deshacer."))try{await hn.deleteShelter(F),alert("Refugio eliminado exitosamente"),U(),o&&o.id===F&&(u(null),y([]))}catch(R){console.error("Error deleting shelter:",R),alert("Error al eliminar el refugio")}},H=F=>{const R={pending:{text:"Pendiente",class:"status-pending"},approved:{text:"Aprobado",class:"status-approved"},rejected:{text:"Rechazado",class:"status-rejected"}},w=R[F]||R.pending;return c.jsx("span",{className:`status-badge ${w.class}`,children:w.text})},k=(F,R)=>{if(!F)return null;const w=R&&new Date(R)<new Date;return c.jsx("span",{className:`premium-badge ${w?"expired":"active"}`,children:w?"⚠️ Premium Expirado":"⭐ Premium"})};return g?c.jsxs("div",{className:"container",children:[c.jsx("header",{className:"modern-header",children:c.jsx("h2",{className:"section-title",children:"Administrar Refugios"})}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando refugios..."})]})}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{className:"modern-header",children:[c.jsx("h2",{className:"section-title",children:"Administrar Refugios"}),c.jsx("p",{className:"page-subtitle",children:"Gestiona tus refugios y suscripciones premium"})]}),c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"admin-layout",children:[c.jsxs("div",{className:"shelters-panel",children:[c.jsxs("div",{className:"panel-header",children:[c.jsxs("h3",{children:["Mis Refugios (",n.length,")"]}),c.jsx("button",{className:"add-shelter-btn",onClick:()=>s("/shelter-register"),children:"+ Nuevo Refugio"})]}),c.jsx("div",{className:"shelters-list",children:n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🏠"}),c.jsx("h4",{children:"No tienes refugios registrados"}),c.jsx("p",{children:"Registra tu primer refugio para comenzar"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):n.map(F=>c.jsxs("div",{className:`shelter-item ${o?.id===F.id?"selected":""}`,onClick:()=>V(F),children:[c.jsxs("div",{className:"shelter-header",children:[c.jsx("h4",{children:F.name}),c.jsxs("div",{className:"shelter-badges",children:[H(F.status),k(F.isPremium,F.premiumExpiry)]})]}),c.jsxs("p",{className:"shelter-location",children:["📍 ",F.location]}),c.jsx("p",{className:"shelter-description",children:F.description}),c.jsxs("div",{className:"shelter-stats",children:[c.jsxs("span",{children:["🐾 ",F.petsCount||0," mascotas"]}),c.jsxs("span",{children:["⭐ ",F.rating||0," rating"]})]}),c.jsxs("div",{className:"shelter-actions",children:[!F.isPremium&&c.jsx("button",{className:"upgrade-btn",onClick:R=>{R.stopPropagation(),Y(F)},children:"🚀 Premium"}),c.jsx("button",{className:"delete-btn",onClick:R=>{R.stopPropagation(),K(F.id)},children:"🗑️"})]})]},F.id))})]}),c.jsx("div",{className:"details-panel",children:o?c.jsxs("div",{className:"shelter-details",children:[c.jsxs("div",{className:"details-header",children:[c.jsx("h3",{children:o.name}),c.jsxs("div",{className:"details-badges",children:[H(o.status),k(o.isPremium,o.premiumExpiry)]})]}),c.jsxs("div",{className:"details-content",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h4",{children:"Información General"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Ubicación:"}),c.jsx("span",{children:o.location})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Dirección:"}),c.jsx("span",{children:o.address})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Teléfono:"}),c.jsx("span",{children:o.phone})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Email:"}),c.jsx("span",{children:o.email})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Sitio Web:"}),c.jsx("span",{children:o.website||"No especificado"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Horarios:"}),c.jsx("span",{children:o.hours})]})]})]}),c.jsxs("div",{className:"services-section",children:[c.jsx("h4",{children:"Servicios Ofrecidos"}),c.jsx("div",{className:"services-list",children:o.services?.map((F,R)=>c.jsx("span",{className:"service-tag",children:F},R))})]}),c.jsxs("div",{className:"pets-section",children:[c.jsxs("h4",{children:["Mascotas del Refugio (",d.length,")"]}),d.length===0?c.jsxs("div",{className:"no-pets",children:[c.jsx("p",{children:"No hay mascotas registradas en este refugio"}),c.jsx("button",{className:"primary-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):c.jsx("div",{className:"pets-grid",children:d.map(F=>c.jsxs("div",{className:"pet-card",children:[c.jsx("img",{src:F.img,alt:F.name}),c.jsxs("div",{className:"pet-info",children:[c.jsx("h5",{children:F.name}),c.jsxs("p",{children:[F.type," • ",F.breed]}),c.jsx("span",{className:`pet-status ${F.status}`,children:F.status==="available"?"Disponible":F.status==="adopted"?"Adoptado":"Reservado"})]})]},F.id))})]})]})]}):c.jsxs("div",{className:"no-selection",children:[c.jsx("div",{className:"no-selection-icon",children:"🏠"}),c.jsx("h3",{children:"Selecciona un refugio"}),c.jsx("p",{children:"Elige un refugio de la lista para ver sus detalles y gestionar sus mascotas"})]})})]})}),c.jsx(ke,{}),_&&x&&c.jsx(pg,{isOpen:_,onClose:()=>T(!1),shelterId:x.id,shelterName:x.name,onSuccess:oe})]})}function Gj(){const s=Et(),[e,n]=I.useState([]),[i,o]=I.useState("all");I.useEffect(()=>{try{const C=JSON.parse(localStorage.getItem("notifications")||"[]");n(C)}catch(C){console.error("Error loading notifications",C)}},[]);const u=C=>{switch(C){case"adoption":return"🐾";case"message":return"💬";case"system":return"🔔";case"approval":return"✅";case"rejection":return"❌";default:return"🔔"}},d=C=>{switch(C){case"adoption":return"#3b82f6";case"message":return"#10b981";case"system":return"#f59e0b";case"approval":return"#10b981";case"rejection":return"#ef4444";default:return"#6b7280"}},y=C=>{const U=e.map(B=>B.id===C?{...B,read:!0}:B);n(U);try{localStorage.setItem("notifications",JSON.stringify(U))}catch(B){console.error("Error updating notification",B)}},g=()=>{const C=e.map(U=>({...U,read:!0}));n(C);try{localStorage.setItem("notifications",JSON.stringify(C))}catch(U){console.error("Error updating notifications",U)}},p=C=>{const U=e.filter(B=>B.id!==C);n(U);try{localStorage.setItem("notifications",JSON.stringify(U))}catch(B){console.error("Error deleting notification",B)}},_=C=>{switch(y(C.id),C.type){case"adoption":s("/tracking");break;case"message":s("/chat");break;case"approval":case"rejection":s("/tracking");break}},T=e.filter(C=>i==="all"?!0:i==="unread"?!C.read:C.type===i),x=e.filter(C=>!C.read).length;return c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsx("h2",{className:"logo-text",children:"Notificaciones"}),c.jsx("div",{className:"header-actions",children:x>0&&c.jsx("button",{className:"mark-all-read",onClick:g,children:"Marcar todas como leídas"})})]}),c.jsxs("main",{className:"notifications-main",children:[c.jsxs("div",{className:"filter-tabs",children:[c.jsxs("button",{className:`filter-tab ${i==="all"?"active":""}`,onClick:()=>o("all"),children:["Todas (",e.length,")"]}),c.jsxs("button",{className:`filter-tab ${i==="unread"?"active":""}`,onClick:()=>o("unread"),children:["No leídas (",x,")"]}),c.jsx("button",{className:`filter-tab ${i==="adoption"?"active":""}`,onClick:()=>o("adoption"),children:"Adopciones"}),c.jsx("button",{className:`filter-tab ${i==="message"?"active":""}`,onClick:()=>o("message"),children:"Mensajes"})]}),c.jsx("div",{className:"notifications-list",children:T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"🔔"}),c.jsx("h3",{children:"No hay notificaciones"}),c.jsx("p",{children:"Cuando tengas notificaciones, aparecerán aquí"})]}):T.map(C=>c.jsxs("div",{className:`notification-item ${C.read?"":"unread"}`,onClick:()=>_(C),children:[c.jsx("div",{className:"notification-icon",children:c.jsx("span",{style:{color:d(C.type)},children:u(C.type)})}),c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-title",children:C.title}),c.jsx("div",{className:"notification-message",children:C.message}),c.jsxs("div",{className:"notification-time",children:[new Date(C.timestamp).toLocaleDateString()," a las"," ",new Date(C.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),c.jsxs("div",{className:"notification-actions",children:[!C.read&&c.jsx("div",{className:"unread-dot"}),c.jsx("button",{className:"delete-button",onClick:U=>{U.stopPropagation(),p(C.id)},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]},C.id))})]}),c.jsx(ke,{})]})}function Qj(){const{user:s}=qt();Et();const[e,n]=I.useState([]),[i,o]=I.useState(!0),[u,d]=I.useState(null),[y,g]=I.useState(!1),[p,_]=I.useState(""),[T,x]=I.useState(!1);I.useEffect(()=>{s&&C()},[s]);const C=async()=>{try{o(!0);const H=await un.getAdoptionRequestsForOwner(s.uid),k=await Promise.all(H.map(async F=>{const R=await Kt.getPetById(F.petId),w=await kn.getUserProfile(F.userId);return{...F,pet:R,requester:w}}));n(k)}catch(H){console.error("Error loading adoption requests:",H)}finally{o(!1)}},U=async H=>{try{x(!0),await un.approveAdoptionRequest(H,p),g(!1),_(""),await C(),alert("Solicitud aprobada exitosamente")}catch(k){console.error("Error approving request:",k),alert("Error al aprobar la solicitud")}finally{x(!1)}},B=async H=>{try{x(!0),await un.rejectAdoptionRequest(H,p),g(!1),_(""),await C(),alert("Solicitud rechazada")}catch(k){console.error("Error rejecting request:",k),alert("Error al rechazar la solicitud")}finally{x(!1)}},V=H=>{d(H),g(!0)},Y=()=>{g(!1),d(null),_("")},oe=H=>{switch(H){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}},K=H=>{switch(H){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";default:return"Desconocido"}};return i?c.jsxs("div",{className:"container",children:[c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Cargando solicitudes..."})]}),c.jsx(ke,{})]}):c.jsxs("div",{className:"container",children:[c.jsxs("header",{children:[c.jsxs("div",{className:"header-content",children:[c.jsx("span",{className:"bone-icon",children:"🦴"}),c.jsx("h2",{className:"logo-text",children:"ANIMALS"})]}),c.jsx("h1",{className:"page-title",children:"Solicitudes de Adopción"}),c.jsx("p",{className:"page-description",children:"Gestiona las solicitudes de adopción para tus mascotas"})]}),c.jsx("main",{className:"adoption-requests-main",children:e.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:"📋"}),c.jsx("h3",{children:"No hay solicitudes"}),c.jsx("p",{children:"No tienes solicitudes de adopción pendientes"})]}):c.jsx("div",{className:"requests-list",children:e.map(H=>c.jsxs("div",{className:"request-card",children:[c.jsxs("div",{className:"request-header",children:[c.jsxs("div",{className:"pet-info",children:[c.jsx("img",{src:H.pet?.img||"/placeholder-pet.jpg",alt:H.pet?.name,className:"pet-image"}),c.jsxs("div",{className:"pet-details",children:[c.jsx("h3",{children:H.pet?.name}),c.jsxs("p",{children:[H.pet?.type," • ",H.pet?.breed]})]})]}),c.jsx("div",{className:"status-badge",style:{backgroundColor:oe(H.status)},children:K(H.status)})]}),c.jsxs("div",{className:"requester-info",children:[c.jsx("h4",{children:"Solicitante:"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nombre:"})," ",H.requester?.name||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",H.requester?.email||"No disponible"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",H.requester?.phone||"No disponible"]})]}),H.message&&c.jsxs("div",{className:"request-message",children:[c.jsx("h4",{children:"Mensaje del solicitante:"}),c.jsxs("p",{children:['"',H.message,'"']})]}),c.jsxs("div",{className:"request-actions",children:[c.jsx("span",{className:"request-date",children:new Date(H.createdAt).toLocaleDateString()}),H.status==="pending"&&c.jsx("div",{className:"action-buttons",children:c.jsx("button",{className:"approve-btn",onClick:()=>V(H),children:"Revisar"})})]})]},H.id))})}),y&&u&&c.jsx("div",{className:"modal-overlay",onClick:Y,children:c.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Gestionar Solicitud"}),c.jsx("button",{className:"close-btn",onClick:Y,children:"×"})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"request-details",children:[c.jsxs("h4",{children:["Mascota: ",u.pet?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Solicitante:"})," ",u.requester?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",u.requester?.email]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",u.requester?.phone]}),u.message&&c.jsxs("div",{className:"message-section",children:[c.jsx("h5",{children:"Mensaje:"}),c.jsxs("p",{children:['"',u.message,'"']})]})]}),c.jsxs("div",{className:"notes-section",children:[c.jsx("label",{children:"Notas adicionales (opcional):"}),c.jsx("textarea",{value:p,onChange:H=>_(H.target.value),placeholder:"Agrega cualquier comentario adicional...",rows:"3"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"reject-btn",onClick:()=>B(u.id),disabled:T,children:T?"Procesando...":"Rechazar"}),c.jsx("button",{className:"approve-btn",onClick:()=>U(u.id),disabled:T,children:T?"Procesando...":"Aprobar"})]})]})}),c.jsx(ke,{})]})}const Zt=({element:s,user:e,loading:n})=>n?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"Cargando..."}):e?s:c.jsx(R0,{to:"/login",replace:!0});function Kj(){const{user:s,loading:e}=qt(),[n,i]=I.useState(null);I.useEffect(()=>{const u=d=>{i(d.detail)};return window.addEventListener("error-notification",u),()=>window.removeEventListener("error-notification",u)},[]);const o=()=>{i(null)};return e?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"Cargando..."}):(console.log("App render - user:",s),console.log("App render - loading:",e),c.jsxs(c.Fragment,{children:[c.jsxs(Dw,{children:[c.jsx(Nt,{path:"/login",element:c.jsx(Dj,{})}),c.jsx(Nt,{path:"/register",element:c.jsx(Mj,{})}),c.jsx(Nt,{path:"/",element:c.jsx(Zt,{element:c.jsx(Rj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/categories",element:c.jsx(Zt,{element:c.jsx(Cj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/upload",element:c.jsx(Zt,{element:c.jsx(Ij,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/profile",element:c.jsx(Zt,{element:c.jsx(jj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adopt",element:c.jsx(Zt,{element:c.jsx(Pj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/tracking",element:c.jsx(Zt,{element:c.jsx(Oj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adoption-details",element:c.jsx(Zt,{element:c.jsx(kj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/chat/:conversationId",element:c.jsx(Zt,{element:c.jsx(Vj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/conversations",element:c.jsx(Zt,{element:c.jsx(Lj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/users",element:c.jsx(Zt,{element:c.jsx(Uj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/favorites",element:c.jsx(Zt,{element:c.jsx(qj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/my-pets",element:c.jsx(Zt,{element:c.jsx(zj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelters",element:c.jsx(Zt,{element:c.jsx(Bj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelter-register",element:c.jsx(Zt,{element:c.jsx(Fj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/shelter-admin",element:c.jsx(Zt,{element:c.jsx(Hj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/notifications",element:c.jsx(Zt,{element:c.jsx(Gj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"/adoption-requests",element:c.jsx(Zt,{element:c.jsx(Qj,{}),user:s,loading:e})}),c.jsx(Nt,{path:"*",element:c.jsx(R0,{to:"/",replace:!0})})]}),c.jsx(Aj,{error:n,onClose:o})]}))}const $j=localStorage.getItem("theme")||"dark";document.body.setAttribute("data-theme",$j);Bb.createRoot(document.getElementById("root")).render(c.jsx(I.StrictMode,{children:c.jsx(tx,{children:c.jsx(xj,{children:c.jsx(Kj,{})})})}));
