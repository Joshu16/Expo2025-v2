(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var ym={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function Ux(){if(I_)return Zl;I_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=e,Zl.jsx=t,Zl.jsxs=t,Zl}var D_;function qx(){return D_||(D_=1,ym.exports=Ux()),ym.exports}var l=qx(),vm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function zx(){if(P_)return Ie;P_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,F={};function L(k,ie,fe){this.props=k,this.context=ie,this.refs=F,this.updater=fe||C}L.prototype.isReactComponent={},L.prototype.setState=function(k,ie){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ie,"setState")},L.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Q(){}Q.prototype=L.prototype;function ae(k,ie,fe){this.props=k,this.context=ie,this.refs=F,this.updater=fe||C}var $=ae.prototype=new Q;$.constructor=ae,z($,L.prototype),$.isPureReactComponent=!0;var H=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function R(k,ie,fe,me,te,pe){return fe=pe.ref,{$$typeof:s,type:k,key:ie,ref:fe!==void 0?fe:null,props:pe}}function T(k,ie){return R(k.type,ie,void 0,void 0,void 0,k.props)}function A(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function I(k){var ie={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(fe){return ie[fe]})}var O=/\/+/g;function U(k,ie){return typeof k=="object"&&k!==null&&k.key!=null?I(""+k.key):ie.toString(36)}function D(){}function ue(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(D,D):(k.status="pending",k.then(function(ie){k.status==="pending"&&(k.status="fulfilled",k.value=ie)},function(ie){k.status==="pending"&&(k.status="rejected",k.reason=ie)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function De(k,ie,fe,me,te){var pe=typeof k;(pe==="undefined"||pe==="boolean")&&(k=null);var ce=!1;if(k===null)ce=!0;else switch(pe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(k.$$typeof){case s:case e:ce=!0;break;case _:return ce=k._init,De(ce(k._payload),ie,fe,me,te)}}if(ce)return te=te(k),ce=me===""?"."+U(k,0):me,H(te)?(fe="",ce!=null&&(fe=ce.replace(O,"$&/")+"/"),De(te,ie,fe,"",function(gn){return gn})):te!=null&&(A(te)&&(te=T(te,fe+(te.key==null||k&&k.key===te.key?"":(""+te.key).replace(O,"$&/")+"/")+ce)),ie.push(te)),1;ce=0;var Me=me===""?".":me+":";if(H(k))for(var Pe=0;Pe<k.length;Pe++)me=k[Pe],pe=Me+U(me,Pe),ce+=De(me,ie,fe,pe,te);else if(Pe=w(k),typeof Pe=="function")for(k=Pe.call(k),Pe=0;!(me=k.next()).done;)me=me.value,pe=Me+U(me,Pe++),ce+=De(me,ie,fe,pe,te);else if(pe==="object"){if(typeof k.then=="function")return De(ue(k),ie,fe,me,te);throw ie=String(k),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ce}function ee(k,ie,fe){if(k==null)return k;var me=[],te=0;return De(k,me,"","",function(pe){return ie.call(fe,pe,te++)}),me}function de(k){if(k._status===-1){var ie=k._result;ie=ie(),ie.then(function(fe){(k._status===0||k._status===-1)&&(k._status=1,k._result=fe)},function(fe){(k._status===0||k._status===-1)&&(k._status=2,k._result=fe)}),k._status===-1&&(k._status=0,k._result=ie)}if(k._status===1)return k._result.default;throw k._result}var X=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ee(){}return Ie.Children={map:ee,forEach:function(k,ie,fe){ee(k,function(){ie.apply(this,arguments)},fe)},count:function(k){var ie=0;return ee(k,function(){ie++}),ie},toArray:function(k){return ee(k,function(ie){return ie})||[]},only:function(k){if(!A(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ie.Component=L,Ie.Fragment=t,Ie.Profiler=o,Ie.PureComponent=ae,Ie.StrictMode=i,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(k){return M.H.useMemoCache(k)}},Ie.cache=function(k){return function(){return k.apply(null,arguments)}},Ie.cloneElement=function(k,ie,fe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var me=z({},k.props),te=k.key,pe=void 0;if(ie!=null)for(ce in ie.ref!==void 0&&(pe=void 0),ie.key!==void 0&&(te=""+ie.key),ie)!V.call(ie,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ie.ref===void 0||(me[ce]=ie[ce]);var ce=arguments.length-2;if(ce===1)me.children=fe;else if(1<ce){for(var Me=Array(ce),Pe=0;Pe<ce;Pe++)Me[Pe]=arguments[Pe+2];me.children=Me}return R(k.type,te,void 0,void 0,pe,me)},Ie.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ie.createElement=function(k,ie,fe){var me,te={},pe=null;if(ie!=null)for(me in ie.key!==void 0&&(pe=""+ie.key),ie)V.call(ie,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(te[me]=ie[me]);var ce=arguments.length-2;if(ce===1)te.children=fe;else if(1<ce){for(var Me=Array(ce),Pe=0;Pe<ce;Pe++)Me[Pe]=arguments[Pe+2];te.children=Me}if(k&&k.defaultProps)for(me in ce=k.defaultProps,ce)te[me]===void 0&&(te[me]=ce[me]);return R(k,pe,void 0,void 0,null,te)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:g,render:k}},Ie.isValidElement=A,Ie.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:de}},Ie.memo=function(k,ie){return{$$typeof:p,type:k,compare:ie===void 0?null:ie}},Ie.startTransition=function(k){var ie=M.T,fe={};M.T=fe;try{var me=k(),te=M.S;te!==null&&te(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(Ee,X)}catch(pe){X(pe)}finally{M.T=ie}},Ie.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ie.use=function(k){return M.H.use(k)},Ie.useActionState=function(k,ie,fe){return M.H.useActionState(k,ie,fe)},Ie.useCallback=function(k,ie){return M.H.useCallback(k,ie)},Ie.useContext=function(k){return M.H.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k,ie){return M.H.useDeferredValue(k,ie)},Ie.useEffect=function(k,ie,fe){var me=M.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(k,ie)},Ie.useId=function(){return M.H.useId()},Ie.useImperativeHandle=function(k,ie,fe){return M.H.useImperativeHandle(k,ie,fe)},Ie.useInsertionEffect=function(k,ie){return M.H.useInsertionEffect(k,ie)},Ie.useLayoutEffect=function(k,ie){return M.H.useLayoutEffect(k,ie)},Ie.useMemo=function(k,ie){return M.H.useMemo(k,ie)},Ie.useOptimistic=function(k,ie){return M.H.useOptimistic(k,ie)},Ie.useReducer=function(k,ie,fe){return M.H.useReducer(k,ie,fe)},Ie.useRef=function(k){return M.H.useRef(k)},Ie.useState=function(k){return M.H.useState(k)},Ie.useSyncExternalStore=function(k,ie,fe){return M.H.useSyncExternalStore(k,ie,fe)},Ie.useTransition=function(){return M.H.useTransition()},Ie.version="19.1.1",Ie}var O_;function fp(){return O_||(O_=1,vm.exports=zx()),vm.exports}var j=fp(),_m={exports:{}},Jl={},Em={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function Bx(){return M_||(M_=1,(function(s){function e(ee,de){var X=ee.length;ee.push(de);e:for(;0<X;){var Ee=X-1>>>1,k=ee[Ee];if(0<o(k,de))ee[Ee]=de,ee[X]=k,X=Ee;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var de=ee[0],X=ee.pop();if(X!==de){ee[0]=X;e:for(var Ee=0,k=ee.length,ie=k>>>1;Ee<ie;){var fe=2*(Ee+1)-1,me=ee[fe],te=fe+1,pe=ee[te];if(0>o(me,X))te<k&&0>o(pe,me)?(ee[Ee]=pe,ee[te]=X,Ee=te):(ee[Ee]=me,ee[fe]=X,Ee=fe);else if(te<k&&0>o(pe,X))ee[Ee]=pe,ee[te]=X,Ee=te;else break e}}return de}function o(ee,de){var X=ee.sortIndex-de.sortIndex;return X!==0?X:ee.id-de.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var y=[],p=[],_=1,b=null,w=3,C=!1,z=!1,F=!1,L=!1,Q=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function H(ee){for(var de=t(p);de!==null;){if(de.callback===null)i(p);else if(de.startTime<=ee)i(p),de.sortIndex=de.expirationTime,e(y,de);else break;de=t(p)}}function M(ee){if(F=!1,H(ee),!z)if(t(y)!==null)z=!0,V||(V=!0,U());else{var de=t(p);de!==null&&De(M,de.startTime-ee)}}var V=!1,R=-1,T=5,A=-1;function I(){return L?!0:!(s.unstable_now()-A<T)}function O(){if(L=!1,V){var ee=s.unstable_now();A=ee;var de=!0;try{e:{z=!1,F&&(F=!1,ae(R),R=-1),C=!0;var X=w;try{t:{for(H(ee),b=t(y);b!==null&&!(b.expirationTime>ee&&I());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,w=b.priorityLevel;var k=Ee(b.expirationTime<=ee);if(ee=s.unstable_now(),typeof k=="function"){b.callback=k,H(ee),de=!0;break t}b===t(y)&&i(y),H(ee)}else i(y);b=t(y)}if(b!==null)de=!0;else{var ie=t(p);ie!==null&&De(M,ie.startTime-ee),de=!1}}break e}finally{b=null,w=X,C=!1}de=void 0}}finally{de?U():V=!1}}}var U;if(typeof $=="function")U=function(){$(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ue=D.port2;D.port1.onmessage=O,U=function(){ue.postMessage(null)}}else U=function(){Q(O,0)};function De(ee,de){R=Q(function(){ee(s.unstable_now())},de)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var de=3;break;default:de=w}var X=w;w=de;try{return ee()}finally{w=X}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var X=w;w=ee;try{return de()}finally{w=X}},s.unstable_scheduleCallback=function(ee,de,X){var Ee=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ee+X:Ee):X=Ee,ee){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=X+k,ee={id:_++,callback:de,priorityLevel:ee,startTime:X,expirationTime:k,sortIndex:-1},X>Ee?(ee.sortIndex=X,e(p,ee),t(y)===null&&ee===t(p)&&(F?(ae(R),R=-1):F=!0,De(M,X-Ee))):(ee.sortIndex=k,e(y,ee),z||C||(z=!0,V||(V=!0,U()))),ee},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(ee){var de=w;return function(){var X=w;w=de;try{return ee.apply(this,arguments)}finally{w=X}}}})(Sm)),Sm}var k_;function Fx(){return k_||(k_=1,Em.exports=Bx()),Em.exports}var bm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function Hx(){if(V_)return cn;V_=1;var s=fp();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:p,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(y,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,_)},cn.flushSync=function(y){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,y)return y()}finally{d.T=p,i.p=_,i.d.f()}},cn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(y,p))},cn.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},cn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var _=p.as,b=g(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:C}):_==="script"&&i.d.X(y,{crossOrigin:b,integrity:w,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=g(p.as,p.crossOrigin);i.d.M(y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(y)},cn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=g(_,p.crossOrigin);i.d.L(y,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cn.preloadModule=function(y,p){if(typeof y=="string")if(p){var _=g(p.as,p.crossOrigin);i.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(y)},cn.requestFormReset=function(y){i.d.r(y)},cn.unstable_batchedUpdates=function(y,p){return y(p)},cn.useFormState=function(y,p,_){return d.H.useFormState(y,p,_)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var L_;function Gx(){if(L_)return bm.exports;L_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bm.exports=Hx(),bm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function $x(){if(U_)return Jl;U_=1;var s=Fx(),e=fp(),t=Gx();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var a=n,c=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==c.return)a=f,c=m;else{for(var S=!1,x=f.child;x;){if(x===a){S=!0,a=f,c=m;break}if(x===c){S=!0,c=f,a=m;break}x=x.sibling}if(!S){for(x=m.child;x;){if(x===a){S=!0,a=m,c=f;break}if(x===c){S=!0,c=m,a=f;break}x=x.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:r}function p(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=p(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),$=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case L:return"Profiler";case F:return"StrictMode";case M:return"Suspense";case V:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case $:return(n.displayName||"Context")+".Provider";case ae:return(n._context.displayName||"Context")+".Consumer";case H:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:ue(n.type)||"Memo";case T:r=n._payload,n=n._init;try{return ue(n(r))}catch{}}return null}var De=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Ee=[],k=-1;function ie(n){return{current:n}}function fe(n){0>k||(n.current=Ee[k],Ee[k]=null,k--)}function me(n,r){k++,Ee[k]=n.current,n.current=r}var te=ie(null),pe=ie(null),ce=ie(null),Me=ie(null);function Pe(n,r){switch(me(ce,r),me(pe,n),me(te,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?i_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=i_(r),n=a_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}fe(te),me(te,n)}function gn(){fe(te),fe(pe),fe(ce)}function $o(n){n.memoizedState!==null&&me(Me,n);var r=te.current,a=a_(r,n.type);r!==a&&(me(pe,n),me(te,a))}function wa(n){pe.current===n&&(fe(te),fe(pe)),Me.current===n&&(fe(Me),Kl._currentValue=X)}var Na=Object.prototype.hasOwnProperty,Ai=s.unstable_scheduleCallback,Aa=s.unstable_cancelCallback,yd=s.unstable_shouldYield,Ko=s.unstable_requestPaint,xn=s.unstable_now,Lc=s.unstable_getCurrentPriorityLevel,Lt=s.unstable_ImmediatePriority,Ht=s.unstable_UserBlockingPriority,zs=s.unstable_NormalPriority,vd=s.unstable_LowPriority,Qo=s.unstable_IdlePriority,_d=s.log,Ri=s.unstable_setDisableYieldValue,xr=null,an=null;function qn(n){if(typeof _d=="function"&&Ri(n),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(xr,n)}catch{}}var yn=Math.clz32?Math.clz32:qc,Ed=Math.log,Uc=Math.LN2;function qc(n){return n>>>=0,n===0?32:31-(Ed(n)/Uc|0)|0}var _s=256,Tr=4194304;function ss(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function zn(n,r,a){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var x=c&134217727;return x!==0?(c=x&~m,c!==0?f=ss(c):(S&=x,S!==0?f=ss(S):a||(a=x&~n,a!==0&&(f=ss(a))))):(x=c&~m,x!==0?f=ss(x):S!==0?f=ss(S):a||(a=c&~n,a!==0&&(f=ss(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function wr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Ra(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var n=_s;return _s<<=1,(_s&4194048)===0&&(_s=256),n}function Nr(){var n=Tr;return Tr<<=1,(Tr&62914560)===0&&(Tr=4194304),n}function Ca(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function xt(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zc(n,r,a,c,f,m){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var x=n.entanglements,P=n.expirationTimes,Y=n.hiddenUpdates;for(a=S&~a;0<a;){var ne=31-yn(a),oe=1<<ne;x[ne]=0,P[ne]=-1;var W=Y[ne];if(W!==null)for(Y[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}a&=~oe}c!==0&&Ar(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(S&~r))}function Ar(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-yn(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function Rr(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-yn(a),f=1<<c;f&r|n[c]&r&&(n[c]|=r),a&=~f}}function Xo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Wo(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bs(){var n=de.p;return n!==0?n:(n=window.event,n===void 0?32:w_(n.type))}function Sd(n,r){var a=de.p;try{return de.p=n,r()}finally{de.p=a}}var Es=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Es,Wt="__reactProps$"+Es,Fs="__reactContainer$"+Es,Ci="__reactEvents$"+Es,ji="__reactListeners$"+Es,bd="__reactHandles$"+Es,rs="__reactResources$"+Es,Cr="__reactMarker$"+Es;function ja(n){delete n[Tt],delete n[Wt],delete n[Ci],delete n[ji],delete n[bd]}function Ss(n){var r=n[Tt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Fs]||a[Tt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=u_(n);n!==null;){if(a=n[Tt])return a;n=u_(n)}return r}n=a,a=n.parentNode}return null}function bs(n){if(n=n[Tt]||n[Fs]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function jr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Ir(n){var r=n[rs];return r||(r=n[rs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function wt(n){n[Cr]=!0}var Bc=new Set,Ii={};function xs(n,r){Ts(n,r),Ts(n+"Capture",r)}function Ts(n,r){for(Ii[n]=r,n=0;n<r.length;n++)Bc.add(r[n])}var Di=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},Ia={};function xd(n){return Na.call(Ia,n)?!0:Na.call(ws,n)?!1:Di.test(n)?Ia[n]=!0:(ws[n]=!0,!1)}function Pi(n,r,a){if(xd(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Oi(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Bn(n,r,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+c)}}var Mi,Da;function Hs(n){if(Mi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Mi=r&&r[1]||"",Da=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mi+n+Da}var Pa=!1;function Oa(n,r){if(!n||Pa)return"";Pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var W=Z}Reflect.construct(n,[],oe)}else{try{oe.call()}catch(Z){W=Z}n.call(oe.prototype)}}else{try{throw Error()}catch(Z){W=Z}(oe=n())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),S=m[0],x=m[1];if(S&&x){var P=S.split(`
`),Y=x.split(`
`);for(f=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(c===P.length||f===Y.length)for(c=P.length-1,f=Y.length-1;1<=c&&0<=f&&P[c]!==Y[f];)f--;for(;1<=c&&0<=f;c--,f--)if(P[c]!==Y[f]){if(c!==1||f!==1)do if(c--,f--,0>f||P[c]!==Y[f]){var ne=`
`+P[c].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=c&&0<=f);break}}}finally{Pa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Hs(a):""}function Td(n){switch(n.tag){case 26:case 27:case 5:return Hs(n.type);case 16:return Hs("Lazy");case 13:return Hs("Suspense");case 19:return Hs("SuspenseList");case 0:case 15:return Oa(n.type,!1);case 11:return Oa(n.type.render,!1);case 1:return Oa(n.type,!0);case 31:return Hs("Activity");default:return""}}function is(n){try{var r="";do r+=Td(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ki(n){var r=Dr(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(S){c=""+S,m.call(this,S)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Pr(n){n._valueTracker||(n._valueTracker=ki(n))}function Je(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Dr(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Gs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vi=/[\n"\\]/g;function Gt(n){return n.replace(Vi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zo(n,r,a,c,f,m,S,x){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),r!=null?S==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+mt(r)):n.value!==""+mt(r)&&(n.value=""+mt(r)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),r!=null?el(n,S,mt(r)):a!=null?el(n,S,mt(a)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+mt(x):n.removeAttribute("name")}function Jo(n,r,a,c,f,m,S,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+mt(a):"",r=r!=null?""+mt(r):a,x||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=x?n.checked:!!c,n.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function el(n,r,a){r==="number"&&Gs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Or(n,r,a,c){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+mt(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Fc(n,r,a){if(r!=null&&(r=""+mt(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+mt(a):""}function Hc(n,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(i(92));if(De(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=mt(r),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Fn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var $s=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(n,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,a):typeof a!="number"||a===0||$s.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function nl(n,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&a[f]!==c&&tl(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&tl(n,m,r[m])}function Ma(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$c=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(n){return $c.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var sl=null;function rl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mr=null,vn=null;function Kc(n){var r=bs(n);if(r&&(n=r.stateNode)){var a=n[Wt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Zo(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var f=c[Wt]||null;if(!f)throw Error(i(90));Zo(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===n.form&&Je(c)}break e;case"textarea":Fc(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Or(n,!!a.multiple,r,!1)}}}var Li=!1;function Ui(n,r,a){if(Li)return n(r,a);Li=!0;try{var c=n(r);return c}finally{if(Li=!1,(Mr!==null||vn!==null)&&(ku(),Mr&&(r=Mr,n=vn,vn=Mr=null,Kc(r),n)))for(r=0;r<n.length;r++)Kc(n[r])}}function kr(n,r){var a=n.stateNode;if(a===null)return null;var c=a[Wt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=!1;if(_n)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Ks=!1}var Hn=null,it=null,ka=null;function Qc(){if(ka)return ka;var n,r=it,a=r.length,c,f="value"in Hn?Hn.value:Hn.textContent,m=f.length;for(n=0;n<a&&r[n]===f[n];n++);var S=a-n;for(c=1;c<=S&&r[a-c]===f[m-c];c++);return ka=f.slice(n,1<c?1-c:void 0)}function qi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function zi(){return!0}function il(){return!1}function Ut(n){function r(a,c,f,m,S){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zi:il,this.isPropagationStopped=il,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),r}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=Ut(on),Fi=_({},on,{view:0,detail:0}),Hi=Ut(Fi),Va,Gi,Ns,$i=_({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ns&&(Ns&&n.type==="mousemove"?(Va=n.screenX-Ns.screenX,Gi=n.screenY-Ns.screenY):Gi=Va=0,Ns=n),Va)},movementY:function(n){return"movementY"in n?n.movementY:Gi}}),Ki=Ut($i),wd=_({},$i,{dataTransfer:0}),Yc=Ut(wd),Qi=_({},Fi,{relatedTarget:0}),La=Ut(Qi),Xc=_({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),al=Ut(Xc),ol=_({},on,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wc=Ut(ol),Ua=_({},on,{data:0}),ll=Ut(Ua),Zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Jc[n])?!!r[n]:!1}function qa(){return eu}var tu=_({},Fi,{key:function(n){if(n.key){var r=Zc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=qi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qs[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(n){return n.type==="keypress"?qi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),za=Ut(tu),En=_({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Ut(En),nu=_({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),Lr=Ut(nu),h=_({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=Ut(h),E=_({},$i,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),N=Ut(E),K=_({},on,{newState:0,oldState:0}),J=Ut(K),he=[9,13,27,32],Ce=_n&&"CompositionEvent"in window,ct=null;_n&&"documentMode"in document&&(ct=document.documentMode);var Xe=_n&&"TextEvent"in window&&!ct,Nt=_n&&(!Ce||ct&&8<ct&&11>=ct),jn=" ",As=!1;function os(n,r){switch(n){case"keyup":return he.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ls(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var cs=!1;function ul(n,r){switch(n){case"compositionend":return ls(r);case"keypress":return r.which!==32?null:(As=!0,jn);case"textInput":return n=r.data,n===jn&&As?null:n;default:return null}}function db(n,r){if(cs)return n==="compositionend"||!Ce&&os(n,r)?(n=Qc(),ka=it=Hn=null,cs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Nt&&r.locale!=="ko"?null:r.data;default:return null}}var fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!fb[n.type]:r==="textarea"}function Eg(n,r,a,c){Mr?vn?vn.push(c):vn=[c]:Mr=c,r=Bu(r,"onChange"),0<r.length&&(a=new Bi("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var hl=null,dl=null;function mb(n){e_(n,0)}function su(n){var r=jr(n);if(Je(r))return n}function Sg(n,r){if(n==="change")return r}var bg=!1;if(_n){var Nd;if(_n){var Ad="oninput"in document;if(!Ad){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),Ad=typeof xg.oninput=="function"}Nd=Ad}else Nd=!1;bg=Nd&&(!document.documentMode||9<document.documentMode)}function Tg(){hl&&(hl.detachEvent("onpropertychange",wg),dl=hl=null)}function wg(n){if(n.propertyName==="value"&&su(dl)){var r=[];Eg(r,dl,n,rl(n)),Ui(mb,r)}}function pb(n,r,a){n==="focusin"?(Tg(),hl=r,dl=a,hl.attachEvent("onpropertychange",wg)):n==="focusout"&&Tg()}function gb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return su(dl)}function yb(n,r){if(n==="click")return su(r)}function vb(n,r){if(n==="input"||n==="change")return su(r)}function _b(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var In=typeof Object.is=="function"?Object.is:_b;function fl(n,r){if(In(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Na.call(r,f)||!In(n[f],r[f]))return!1}return!0}function Ng(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ag(n,r){var a=Ng(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function Rg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Rg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Cg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Gs(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Gs(n.document)}return r}function Rd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Eb=_n&&"documentMode"in document&&11>=document.documentMode,Ba=null,Cd=null,ml=null,jd=!1;function jg(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jd||Ba==null||Ba!==Gs(c)||(c=Ba,"selectionStart"in c&&Rd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ml&&fl(ml,c)||(ml=c,c=Bu(Cd,"onSelect"),0<c.length&&(r=new Bi("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Ba)))}function Yi(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Fa={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},Id={},Ig={};_n&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Xi(n){if(Id[n])return Id[n];if(!Fa[n])return n;var r=Fa[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ig)return Id[n]=r[a];return n}var Dg=Xi("animationend"),Pg=Xi("animationiteration"),Og=Xi("animationstart"),Sb=Xi("transitionrun"),bb=Xi("transitionstart"),xb=Xi("transitioncancel"),Mg=Xi("transitionend"),kg=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function us(n,r){kg.set(n,r),xs(r,[n])}var Vg=new WeakMap;function Gn(n,r){if(typeof n=="object"&&n!==null){var a=Vg.get(n);return a!==void 0?a:(r={value:n,source:r,stack:is(r)},Vg.set(n,r),r)}return{value:n,source:r,stack:is(r)}}var $n=[],Ha=0,Pd=0;function ru(){for(var n=Ha,r=Pd=Ha=0;r<n;){var a=$n[r];$n[r++]=null;var c=$n[r];$n[r++]=null;var f=$n[r];$n[r++]=null;var m=$n[r];if($n[r++]=null,c!==null&&f!==null){var S=c.pending;S===null?f.next=f:(f.next=S.next,S.next=f),c.pending=f}m!==0&&Lg(a,f,m)}}function iu(n,r,a,c){$n[Ha++]=n,$n[Ha++]=r,$n[Ha++]=a,$n[Ha++]=c,Pd|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Od(n,r,a,c){return iu(n,r,a,c),au(n)}function Ga(n,r){return iu(n,null,null,r),au(n)}function Lg(n,r,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-yn(a),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=a|536870912),m):null}function au(n){if(50<Ul)throw Ul=0,zf=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var $a={};function Tb(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(n,r,a,c){return new Tb(n,r,a,c)}function Md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ys(n,r){var a=n.alternate;return a===null?(a=Dn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Ug(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function ou(n,r,a,c,f,m){var S=0;if(c=n,typeof n=="function")Md(n)&&(S=1);else if(typeof n=="string")S=Nx(n,a,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=Dn(31,a,r,f),n.elementType=A,n.lanes=m,n;case z:return Wi(a.children,f,m,r);case F:S=8,f|=24;break;case L:return n=Dn(12,a,r,f|2),n.elementType=L,n.lanes=m,n;case M:return n=Dn(13,a,r,f),n.elementType=M,n.lanes=m,n;case V:return n=Dn(19,a,r,f),n.elementType=V,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:case $:S=10;break e;case ae:S=9;break e;case H:S=11;break e;case R:S=14;break e;case T:S=16,c=null;break e}S=29,a=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=Dn(S,a,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function Wi(n,r,a,c){return n=Dn(7,n,c,r),n.lanes=a,n}function kd(n,r,a){return n=Dn(6,n,null,r),n.lanes=a,n}function Vd(n,r,a){return r=Dn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Ka=[],Qa=0,lu=null,cu=0,Kn=[],Qn=0,Zi=null,Xs=1,Ws="";function Ji(n,r){Ka[Qa++]=cu,Ka[Qa++]=lu,lu=n,cu=r}function qg(n,r,a){Kn[Qn++]=Xs,Kn[Qn++]=Ws,Kn[Qn++]=Zi,Zi=n;var c=Xs;n=Ws;var f=32-yn(c)-1;c&=~(1<<f),a+=1;var m=32-yn(r)+f;if(30<m){var S=f-f%5;m=(c&(1<<S)-1).toString(32),c>>=S,f-=S,Xs=1<<32-yn(r)+f|a<<f|c,Ws=m+n}else Xs=1<<m|a<<f|c,Ws=n}function Ld(n){n.return!==null&&(Ji(n,1),qg(n,1,0))}function Ud(n){for(;n===lu;)lu=Ka[--Qa],Ka[Qa]=null,cu=Ka[--Qa],Ka[Qa]=null;for(;n===Zi;)Zi=Kn[--Qn],Kn[Qn]=null,Ws=Kn[--Qn],Kn[Qn]=null,Xs=Kn[--Qn],Kn[Qn]=null}var Sn=null,_t=null,Ke=!1,ea=null,Rs=!1,qd=Error(i(519));function ta(n){var r=Error(i(418,""));throw yl(Gn(r,n)),qd}function zg(n){var r=n.stateNode,a=n.type,c=n.memoizedProps;switch(r[Tt]=n,r[Wt]=c,a){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(a=0;a<zl.length;a++)qe(zl[a],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":qe("invalid",r),Jo(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Pr(r);break;case"select":qe("invalid",r);break;case"textarea":qe("invalid",r),Hc(r,c.value,c.defaultValue,c.children),Pr(r)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||r_(r.textContent,a)?(c.popover!=null&&(qe("beforetoggle",r),qe("toggle",r)),c.onScroll!=null&&qe("scroll",r),c.onScrollEnd!=null&&qe("scrollend",r),c.onClick!=null&&(r.onclick=Fu),r=!0):r=!1,r||ta(n)}function Bg(n){for(Sn=n.return;Sn;)switch(Sn.tag){case 5:case 13:Rs=!1;return;case 27:case 3:Rs=!0;return;default:Sn=Sn.return}}function pl(n){if(n!==Sn)return!1;if(!Ke)return Bg(n),Ke=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||sm(n.type,n.memoizedProps)),a=!a),a&&_t&&ta(n),Bg(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){_t=ds(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}_t=null}}else r===27?(r=_t,ei(n.type)?(n=om,om=null,_t=n):_t=r):_t=Sn?ds(n.stateNode.nextSibling):null;return!0}function gl(){_t=Sn=null,Ke=!1}function Fg(){var n=ea;return n!==null&&(Nn===null?Nn=n:Nn.push.apply(Nn,n),ea=null),n}function yl(n){ea===null?ea=[n]:ea.push(n)}var zd=ie(null),na=null,Zs=null;function Ur(n,r,a){me(zd,r._currentValue),r._currentValue=a}function Js(n){n._currentValue=zd.current,fe(zd)}function Bd(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Fd(n,r,a,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;e:for(;m!==null;){var x=m;m=f;for(var P=0;P<r.length;P++)if(x.context===r[P]){m.lanes|=a,x=m.alternate,x!==null&&(x.lanes|=a),Bd(m.return,a,n),c||(S=null);break e}m=x.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),Bd(S,a,n),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===n){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function vl(n,r,a,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var x=f.type;In(f.pendingProps.value,S.value)||(n!==null?n.push(x):n=[x])}}else if(f===Me.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Kl):n=[Kl])}f=f.return}n!==null&&Fd(r,n,a,c),r.flags|=262144}function uu(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function sa(n){na=n,Zs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return Hg(na,n)}function hu(n,r){return na===null&&sa(n),Hg(n,r)}function Hg(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Zs===null){if(n===null)throw Error(i(308));Zs=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Zs=Zs.next=r;return a}var wb=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},Nb=s.unstable_scheduleCallback,Ab=s.unstable_NormalPriority,qt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hd(){return{controller:new wb,data:new Map,refCount:0}}function _l(n){n.refCount--,n.refCount===0&&Nb(Ab,function(){n.controller.abort()})}var El=null,Gd=0,Ya=0,Xa=null;function Rb(n,r){if(El===null){var a=El=[];Gd=0,Ya=Qf(),Xa={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Gd++,r.then(Gg,Gg),r}function Gg(){if(--Gd===0&&El!==null){Xa!==null&&(Xa.status="fulfilled");var n=El;El=null,Ya=0,Xa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Cb(n,r){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var $g=ee.S;ee.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Rb(n,r),$g!==null&&$g(n,r)};var ra=ie(null);function $d(){var n=ra.current;return n!==null?n:at.pooledCache}function du(n,r){r===null?me(ra,ra.current):me(ra,r.pool)}function Kg(){var n=$d();return n===null?null:{parent:qt._currentValue,pool:n}}var Sl=Error(i(460)),Qg=Error(i(474)),fu=Error(i(542)),Kd={then:function(){}};function Yg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function mu(){}function Xg(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(mu,mu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Zg(n),n;default:if(typeof r.status=="string")r.then(mu,mu);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Zg(n),n}throw bl=r,Sl}}var bl=null;function Wg(){if(bl===null)throw Error(i(459));var n=bl;return bl=null,n}function Zg(n){if(n===Sl||n===fu)throw Error(i(483))}var qr=!1;function Qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Br(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=au(n),Lg(n,null,a),r}return iu(n,c,r,a),au(n)}function xl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Rr(n,a)}}function Xd(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Wd=!1;function Tl(){if(Wd){var n=Xa;if(n!==null)throw n}}function wl(n,r,a,c){Wd=!1;var f=n.updateQueue;qr=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var P=x,Y=P.next;P.next=null,S===null?m=Y:S.next=Y,S=P;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,x=ne.lastBaseUpdate,x!==S&&(x===null?ne.firstBaseUpdate=Y:x.next=Y,ne.lastBaseUpdate=P))}if(m!==null){var oe=f.baseState;S=0,ne=Y=P=null,x=m;do{var W=x.lane&-536870913,Z=W!==x.lane;if(Z?(He&W)===W:(c&W)===W){W!==0&&W===Ya&&(Wd=!0),ne!==null&&(ne=ne.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ae=n,xe=x;W=r;var nt=a;switch(xe.tag){case 1:if(Ae=xe.payload,typeof Ae=="function"){oe=Ae.call(nt,oe,W);break e}oe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=xe.payload,W=typeof Ae=="function"?Ae.call(nt,oe,W):Ae,W==null)break e;oe=_({},oe,W);break e;case 2:qr=!0}}W=x.callback,W!==null&&(n.flags|=64,Z&&(n.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ne===null?(Y=ne=Z,P=oe):ne=ne.next=Z,S|=W;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;Z=x,x=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(P=oe),f.baseState=P,f.firstBaseUpdate=Y,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),Xr|=S,n.lanes=S,n.memoizedState=oe}}function Jg(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function ey(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Jg(a[n],r)}var Wa=ie(null),pu=ie(0);function ty(n,r){n=ar,me(pu,n),me(Wa,r),ar=n|r.baseLanes}function Zd(){me(pu,ar),me(Wa,Wa.current)}function Jd(){ar=pu.current,fe(Wa),fe(pu)}var Fr=0,ke=null,et=null,It=null,gu=!1,Za=!1,ia=!1,yu=0,Nl=0,Ja=null,jb=0;function At(){throw Error(i(321))}function ef(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!In(n[a],r[a]))return!1;return!0}function tf(n,r,a,c,f,m){return Fr=m,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=n===null||n.memoizedState===null?Ly:Uy,ia=!1,m=a(c,f),ia=!1,Za&&(m=sy(r,a,c,f)),ny(n),m}function ny(n){ee.H=xu;var r=et!==null&&et.next!==null;if(Fr=0,It=et=ke=null,gu=!1,Nl=0,Ja=null,r)throw Error(i(300));n===null||$t||(n=n.dependencies,n!==null&&uu(n)&&($t=!0))}function sy(n,r,a,c){ke=n;var f=0;do{if(Za&&(Ja=null),Nl=0,Za=!1,25<=f)throw Error(i(301));if(f+=1,It=et=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ee.H=Vb,m=r(a,c)}while(Za);return m}function Ib(){var n=ee.H,r=n.useState()[0];return r=typeof r.then=="function"?Al(r):r,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(ke.flags|=1024),r}function nf(){var n=yu!==0;return yu=0,n}function sf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function rf(n){if(gu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}gu=!1}Fr=0,It=et=ke=null,Za=!1,Nl=yu=0,Ja=null}function Tn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ke.memoizedState=It=n:It=It.next=n,It}function Dt(){if(et===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var r=It===null?ke.memoizedState:It.next;if(r!==null)It=r,et=n;else{if(n===null)throw ke.alternate===null?Error(i(467)):Error(i(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},It===null?ke.memoizedState=It=n:It=It.next=n}return It}function af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(n){var r=Nl;return Nl+=1,Ja===null&&(Ja=[]),n=Xg(Ja,n,r),r=ke,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Ly:Uy),n}function vu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Al(n);if(n.$$typeof===$)return ln(n)}throw Error(i(438,String(n)))}function of(n){var r=null,a=ke.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=af(),ke.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),c=0;c<n;c++)a[c]=I;return r.index++,a}function er(n,r){return typeof r=="function"?r(n):r}function _u(n){var r=Dt();return lf(r,et,n)}function lf(n,r,a){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var x=S=null,P=null,Y=r,ne=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(He&oe)===oe:(Fr&oe)===oe){var W=Y.revertLane;if(W===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===Ya&&(ne=!0);else if((Fr&W)===W){Y=Y.next,W===Ya&&(ne=!0);continue}else oe={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(x=P=oe,S=m):P=P.next=oe,ke.lanes|=W,Xr|=W;oe=Y.action,ia&&a(m,oe),m=Y.hasEagerState?Y.eagerState:a(m,oe)}else W={lane:oe,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(x=P=W,S=m):P=P.next=W,ke.lanes|=oe,Xr|=oe;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?S=m:P.next=x,!In(m,n.memoizedState)&&($t=!0,ne&&(a=Xa,a!==null)))throw a;n.memoizedState=m,n.baseState=S,n.baseQueue=P,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function cf(n){var r=Dt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var S=f=f.next;do m=n(m,S.action),S=S.next;while(S!==f);In(m,r.memoizedState)||($t=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function ry(n,r,a){var c=ke,f=Dt(),m=Ke;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var S=!In((et||f).memoizedState,a);S&&(f.memoizedState=a,$t=!0),f=f.queue;var x=oy.bind(null,c,f,n);if(Rl(2048,8,x,[n]),f.getSnapshot!==r||S||It!==null&&It.memoizedState.tag&1){if(c.flags|=2048,eo(9,Eu(),ay.bind(null,c,f,a,r),null),at===null)throw Error(i(349));m||(Fr&124)!==0||iy(c,r,a)}return a}function iy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ke.updateQueue,r===null?(r=af(),ke.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ay(n,r,a,c){r.value=a,r.getSnapshot=c,ly(r)&&cy(n)}function oy(n,r,a){return a(function(){ly(r)&&cy(n)})}function ly(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!In(n,a)}catch{return!0}}function cy(n){var r=Ga(n,2);r!==null&&Vn(r,n,2)}function uf(n){var r=Tn();if(typeof n=="function"){var a=n;if(n=a(),ia){qn(!0);try{a()}finally{qn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:n},r}function uy(n,r,a,c){return n.baseState=a,lf(n,et,typeof c=="function"?c:er)}function Db(n,r,a,c,f){if(bu(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};ee.T!==null?a(!0):m.isTransition=!1,c(m),a=r.pending,a===null?(m.next=r.pending=m,hy(r,m)):(m.next=a.next,r.pending=a.next=m)}}function hy(n,r){var a=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=ee.T,S={};ee.T=S;try{var x=a(f,c),P=ee.S;P!==null&&P(S,x),dy(n,r,x)}catch(Y){hf(n,r,Y)}finally{ee.T=m}}else try{m=a(f,c),dy(n,r,m)}catch(Y){hf(n,r,Y)}}function dy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){fy(n,r,c)},function(c){return hf(n,r,c)}):fy(n,r,a)}function fy(n,r,a){r.status="fulfilled",r.value=a,my(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,hy(n,a)))}function hf(n,r,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,my(r),r=r.next;while(r!==c)}n.action=null}function my(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function py(n,r){return r}function gy(n,r){if(Ke){var a=at.formState;if(a!==null){e:{var c=ke;if(Ke){if(_t){t:{for(var f=_t,m=Rs;f.nodeType!==8;){if(!m){f=null;break t}if(f=ds(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){_t=ds(f.nextSibling),c=f.data==="F!";break e}}ta(c)}c=!1}c&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:r},a.queue=c,a=My.bind(null,ke,c),c.dispatch=a,c=uf(!1),m=gf.bind(null,ke,!1,c.queue),c=Tn(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,a=Db.bind(null,ke,f,m,a),f.dispatch=a,c.memoizedState=n,[r,a,!1]}function yy(n){var r=Dt();return vy(r,et,n)}function vy(n,r,a){if(r=lf(n,r,py)[0],n=_u(er)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Al(r)}catch(S){throw S===Sl?fu:S}else c=r;r=Dt();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(ke.flags|=2048,eo(9,Eu(),Pb.bind(null,f,a),null)),[c,m,n]}function Pb(n,r){n.action=r}function _y(n){var r=Dt(),a=et;if(a!==null)return vy(r,a,n);Dt(),r=r.memoizedState,a=Dt();var c=a.queue.dispatch;return a.memoizedState=n,[r,c,!1]}function eo(n,r,a,c){return n={tag:n,create:a,deps:c,inst:r,next:null},r=ke.updateQueue,r===null&&(r=af(),ke.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n),n}function Eu(){return{destroy:void 0,resource:void 0}}function Ey(){return Dt().memoizedState}function Su(n,r,a,c){var f=Tn();c=c===void 0?null:c,ke.flags|=n,f.memoizedState=eo(1|r,Eu(),a,c)}function Rl(n,r,a,c){var f=Dt();c=c===void 0?null:c;var m=f.memoizedState.inst;et!==null&&c!==null&&ef(c,et.memoizedState.deps)?f.memoizedState=eo(r,m,a,c):(ke.flags|=n,f.memoizedState=eo(1|r,m,a,c))}function Sy(n,r){Su(8390656,8,n,r)}function by(n,r){Rl(2048,8,n,r)}function xy(n,r){return Rl(4,2,n,r)}function Ty(n,r){return Rl(4,4,n,r)}function wy(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ny(n,r,a){a=a!=null?a.concat([n]):null,Rl(4,4,wy.bind(null,r,n),a)}function df(){}function Ay(n,r){var a=Dt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&ef(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Ry(n,r){var a=Dt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&ef(r,c[1]))return c[0];if(c=n(),ia){qn(!0);try{n()}finally{qn(!1)}}return a.memoizedState=[c,r],c}function ff(n,r,a){return a===void 0||(Fr&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=Iv(),ke.lanes|=n,Xr|=n,a)}function Cy(n,r,a,c){return In(a,r)?a:Wa.current!==null?(n=ff(n,a,c),In(n,r)||($t=!0),n):(Fr&42)===0?($t=!0,n.memoizedState=a):(n=Iv(),ke.lanes|=n,Xr|=n,r)}function jy(n,r,a,c,f){var m=de.p;de.p=m!==0&&8>m?m:8;var S=ee.T,x={};ee.T=x,gf(n,!1,r,a);try{var P=f(),Y=ee.S;if(Y!==null&&Y(x,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ne=Cb(P,c);Cl(n,r,ne,kn(n))}else Cl(n,r,c,kn(n))}catch(oe){Cl(n,r,{then:function(){},status:"rejected",reason:oe},kn())}finally{de.p=m,ee.T=S}}function Ob(){}function mf(n,r,a,c){if(n.tag!==5)throw Error(i(476));var f=Iy(n).queue;jy(n,f,r,X,a===null?Ob:function(){return Dy(n),a(c)})}function Iy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:X},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Dy(n){var r=Iy(n).next.queue;Cl(n,r,{},kn())}function pf(){return ln(Kl)}function Py(){return Dt().memoizedState}function Oy(){return Dt().memoizedState}function Mb(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();n=zr(a);var c=Br(r,n,a);c!==null&&(Vn(c,r,a),xl(c,r,a)),r={cache:Hd()},n.payload=r;return}r=r.return}}function kb(n,r,a){var c=kn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},bu(n)?ky(r,a):(a=Od(n,r,a,c),a!==null&&(Vn(a,n,c),Vy(a,r,c)))}function My(n,r,a){var c=kn();Cl(n,r,a,c)}function Cl(n,r,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(bu(n))ky(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var S=r.lastRenderedState,x=m(S,a);if(f.hasEagerState=!0,f.eagerState=x,In(x,S))return iu(n,r,f,0),at===null&&ru(),!1}catch{}finally{}if(a=Od(n,r,f,c),a!==null)return Vn(a,n,c),Vy(a,r,c),!0}return!1}function gf(n,r,a,c){if(c={lane:2,revertLane:Qf(),action:c,hasEagerState:!1,eagerState:null,next:null},bu(n)){if(r)throw Error(i(479))}else r=Od(n,a,c,2),r!==null&&Vn(r,n,2)}function bu(n){var r=n.alternate;return n===ke||r!==null&&r===ke}function ky(n,r){Za=gu=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Vy(n,r,a){if((a&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Rr(n,a)}}var xu={readContext:ln,use:vu,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Ly={readContext:ln,use:vu,useCallback:function(n,r){return Tn().memoizedState=[n,r===void 0?null:r],n},useContext:ln,useEffect:Sy,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Su(4194308,4,wy.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Su(4194308,4,n,r)},useInsertionEffect:function(n,r){Su(4,2,n,r)},useMemo:function(n,r){var a=Tn();r=r===void 0?null:r;var c=n();if(ia){qn(!0);try{n()}finally{qn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(n,r,a){var c=Tn();if(a!==void 0){var f=a(r);if(ia){qn(!0);try{a(r)}finally{qn(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=kb.bind(null,ke,n),[c.memoizedState,n]},useRef:function(n){var r=Tn();return n={current:n},r.memoizedState=n},useState:function(n){n=uf(n);var r=n.queue,a=My.bind(null,ke,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:df,useDeferredValue:function(n,r){var a=Tn();return ff(a,n,r)},useTransition:function(){var n=uf(!1);return n=jy.bind(null,ke,n.queue,!0,!1),Tn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var c=ke,f=Tn();if(Ke){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),at===null)throw Error(i(349));(He&124)!==0||iy(c,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,Sy(oy.bind(null,c,m,n),[n]),c.flags|=2048,eo(9,Eu(),ay.bind(null,c,m,a,r),null),a},useId:function(){var n=Tn(),r=at.identifierPrefix;if(Ke){var a=Ws,c=Xs;a=(c&~(1<<32-yn(c)-1)).toString(32)+a,r="«"+r+"R"+a,a=yu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=jb++,r="«"+r+"r"+a.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:pf,useFormState:gy,useActionState:gy,useOptimistic:function(n){var r=Tn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=gf.bind(null,ke,!0,a),a.dispatch=r,[n,r]},useMemoCache:of,useCacheRefresh:function(){return Tn().memoizedState=Mb.bind(null,ke)}},Uy={readContext:ln,use:vu,useCallback:Ay,useContext:ln,useEffect:by,useImperativeHandle:Ny,useInsertionEffect:xy,useLayoutEffect:Ty,useMemo:Ry,useReducer:_u,useRef:Ey,useState:function(){return _u(er)},useDebugValue:df,useDeferredValue:function(n,r){var a=Dt();return Cy(a,et.memoizedState,n,r)},useTransition:function(){var n=_u(er)[0],r=Dt().memoizedState;return[typeof n=="boolean"?n:Al(n),r]},useSyncExternalStore:ry,useId:Py,useHostTransitionStatus:pf,useFormState:yy,useActionState:yy,useOptimistic:function(n,r){var a=Dt();return uy(a,et,n,r)},useMemoCache:of,useCacheRefresh:Oy},Vb={readContext:ln,use:vu,useCallback:Ay,useContext:ln,useEffect:by,useImperativeHandle:Ny,useInsertionEffect:xy,useLayoutEffect:Ty,useMemo:Ry,useReducer:cf,useRef:Ey,useState:function(){return cf(er)},useDebugValue:df,useDeferredValue:function(n,r){var a=Dt();return et===null?ff(a,n,r):Cy(a,et.memoizedState,n,r)},useTransition:function(){var n=cf(er)[0],r=Dt().memoizedState;return[typeof n=="boolean"?n:Al(n),r]},useSyncExternalStore:ry,useId:Py,useHostTransitionStatus:pf,useFormState:_y,useActionState:_y,useOptimistic:function(n,r){var a=Dt();return et!==null?uy(a,et,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:of,useCacheRefresh:Oy},to=null,jl=0;function Tu(n){var r=jl;return jl+=1,to===null&&(to=[]),Xg(to,n,r)}function Il(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function wu(n,r){throw r.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function qy(n){var r=n._init;return r(n._payload)}function zy(n){function r(B,q){if(n){var G=B.deletions;G===null?(B.deletions=[q],B.flags|=16):G.push(q)}}function a(B,q){if(!n)return null;for(;q!==null;)r(B,q),q=q.sibling;return null}function c(B){for(var q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function f(B,q){return B=Ys(B,q),B.index=0,B.sibling=null,B}function m(B,q,G){return B.index=G,n?(G=B.alternate,G!==null?(G=G.index,G<q?(B.flags|=67108866,q):G):(B.flags|=67108866,q)):(B.flags|=1048576,q)}function S(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function x(B,q,G,se){return q===null||q.tag!==6?(q=kd(G,B.mode,se),q.return=B,q):(q=f(q,G),q.return=B,q)}function P(B,q,G,se){var _e=G.type;return _e===z?ne(B,q,G.props.children,se,G.key):q!==null&&(q.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===T&&qy(_e)===q.type)?(q=f(q,G.props),Il(q,G),q.return=B,q):(q=ou(G.type,G.key,G.props,null,B.mode,se),Il(q,G),q.return=B,q)}function Y(B,q,G,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=Vd(G,B.mode,se),q.return=B,q):(q=f(q,G.children||[]),q.return=B,q)}function ne(B,q,G,se,_e){return q===null||q.tag!==7?(q=Wi(G,B.mode,se,_e),q.return=B,q):(q=f(q,G),q.return=B,q)}function oe(B,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=kd(""+q,B.mode,G),q.return=B,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return G=ou(q.type,q.key,q.props,null,B.mode,G),Il(G,q),G.return=B,G;case C:return q=Vd(q,B.mode,G),q.return=B,q;case T:var se=q._init;return q=se(q._payload),oe(B,q,G)}if(De(q)||U(q))return q=Wi(q,B.mode,G,null),q.return=B,q;if(typeof q.then=="function")return oe(B,Tu(q),G);if(q.$$typeof===$)return oe(B,hu(B,q),G);wu(B,q)}return null}function W(B,q,G,se){var _e=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:x(B,q,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===_e?P(B,q,G,se):null;case C:return G.key===_e?Y(B,q,G,se):null;case T:return _e=G._init,G=_e(G._payload),W(B,q,G,se)}if(De(G)||U(G))return _e!==null?null:ne(B,q,G,se,null);if(typeof G.then=="function")return W(B,q,Tu(G),se);if(G.$$typeof===$)return W(B,q,hu(B,G),se);wu(B,G)}return null}function Z(B,q,G,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(G)||null,x(q,B,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return B=B.get(se.key===null?G:se.key)||null,P(q,B,se,_e);case C:return B=B.get(se.key===null?G:se.key)||null,Y(q,B,se,_e);case T:var Le=se._init;return se=Le(se._payload),Z(B,q,G,se,_e)}if(De(se)||U(se))return B=B.get(G)||null,ne(q,B,se,_e,null);if(typeof se.then=="function")return Z(B,q,G,Tu(se),_e);if(se.$$typeof===$)return Z(B,q,G,hu(q,se),_e);wu(q,se)}return null}function Ae(B,q,G,se){for(var _e=null,Le=null,Se=q,Te=q=0,Qt=null;Se!==null&&Te<G.length;Te++){Se.index>Te?(Qt=Se,Se=null):Qt=Se.sibling;var $e=W(B,Se,G[Te],se);if($e===null){Se===null&&(Se=Qt);break}n&&Se&&$e.alternate===null&&r(B,Se),q=m($e,q,Te),Le===null?_e=$e:Le.sibling=$e,Le=$e,Se=Qt}if(Te===G.length)return a(B,Se),Ke&&Ji(B,Te),_e;if(Se===null){for(;Te<G.length;Te++)Se=oe(B,G[Te],se),Se!==null&&(q=m(Se,q,Te),Le===null?_e=Se:Le.sibling=Se,Le=Se);return Ke&&Ji(B,Te),_e}for(Se=c(Se);Te<G.length;Te++)Qt=Z(Se,B,Te,G[Te],se),Qt!==null&&(n&&Qt.alternate!==null&&Se.delete(Qt.key===null?Te:Qt.key),q=m(Qt,q,Te),Le===null?_e=Qt:Le.sibling=Qt,Le=Qt);return n&&Se.forEach(function(ii){return r(B,ii)}),Ke&&Ji(B,Te),_e}function xe(B,q,G,se){if(G==null)throw Error(i(151));for(var _e=null,Le=null,Se=q,Te=q=0,Qt=null,$e=G.next();Se!==null&&!$e.done;Te++,$e=G.next()){Se.index>Te?(Qt=Se,Se=null):Qt=Se.sibling;var ii=W(B,Se,$e.value,se);if(ii===null){Se===null&&(Se=Qt);break}n&&Se&&ii.alternate===null&&r(B,Se),q=m(ii,q,Te),Le===null?_e=ii:Le.sibling=ii,Le=ii,Se=Qt}if($e.done)return a(B,Se),Ke&&Ji(B,Te),_e;if(Se===null){for(;!$e.done;Te++,$e=G.next())$e=oe(B,$e.value,se),$e!==null&&(q=m($e,q,Te),Le===null?_e=$e:Le.sibling=$e,Le=$e);return Ke&&Ji(B,Te),_e}for(Se=c(Se);!$e.done;Te++,$e=G.next())$e=Z(Se,B,Te,$e.value,se),$e!==null&&(n&&$e.alternate!==null&&Se.delete($e.key===null?Te:$e.key),q=m($e,q,Te),Le===null?_e=$e:Le.sibling=$e,Le=$e);return n&&Se.forEach(function(Lx){return r(B,Lx)}),Ke&&Ji(B,Te),_e}function nt(B,q,G,se){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var _e=G.key;q!==null;){if(q.key===_e){if(_e=G.type,_e===z){if(q.tag===7){a(B,q.sibling),se=f(q,G.props.children),se.return=B,B=se;break e}}else if(q.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===T&&qy(_e)===q.type){a(B,q.sibling),se=f(q,G.props),Il(se,G),se.return=B,B=se;break e}a(B,q);break}else r(B,q);q=q.sibling}G.type===z?(se=Wi(G.props.children,B.mode,se,G.key),se.return=B,B=se):(se=ou(G.type,G.key,G.props,null,B.mode,se),Il(se,G),se.return=B,B=se)}return S(B);case C:e:{for(_e=G.key;q!==null;){if(q.key===_e)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){a(B,q.sibling),se=f(q,G.children||[]),se.return=B,B=se;break e}else{a(B,q);break}else r(B,q);q=q.sibling}se=Vd(G,B.mode,se),se.return=B,B=se}return S(B);case T:return _e=G._init,G=_e(G._payload),nt(B,q,G,se)}if(De(G))return Ae(B,q,G,se);if(U(G)){if(_e=U(G),typeof _e!="function")throw Error(i(150));return G=_e.call(G),xe(B,q,G,se)}if(typeof G.then=="function")return nt(B,q,Tu(G),se);if(G.$$typeof===$)return nt(B,q,hu(B,G),se);wu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(a(B,q.sibling),se=f(q,G),se.return=B,B=se):(a(B,q),se=kd(G,B.mode,se),se.return=B,B=se),S(B)):a(B,q)}return function(B,q,G,se){try{jl=0;var _e=nt(B,q,G,se);return to=null,_e}catch(Se){if(Se===Sl||Se===fu)throw Se;var Le=Dn(29,Se,null,B.mode);return Le.lanes=se,Le.return=B,Le}finally{}}}var no=zy(!0),By=zy(!1),Yn=ie(null),Cs=null;function Hr(n){var r=n.alternate;me(zt,zt.current&1),me(Yn,n),Cs===null&&(r===null||Wa.current!==null||r.memoizedState!==null)&&(Cs=n)}function Fy(n){if(n.tag===22){if(me(zt,zt.current),me(Yn,n),Cs===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Cs=n)}}else Gr()}function Gr(){me(zt,zt.current),me(Yn,Yn.current)}function tr(n){fe(Yn),Cs===n&&(Cs=null),fe(zt)}var zt=ie(0);function Nu(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||am(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function yf(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:_({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var vf={enqueueSetState:function(n,r,a){n=n._reactInternals;var c=kn(),f=zr(c);f.payload=r,a!=null&&(f.callback=a),r=Br(n,f,c),r!==null&&(Vn(r,n,c),xl(r,n,c))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=kn(),f=zr(c);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Br(n,f,c),r!==null&&(Vn(r,n,c),xl(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=kn(),c=zr(a);c.tag=2,r!=null&&(c.callback=r),r=Br(n,c,a),r!==null&&(Vn(r,n,a),xl(r,n,a))}};function Hy(n,r,a,c,f,m,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,S):r.prototype&&r.prototype.isPureReactComponent?!fl(a,c)||!fl(f,m):!0}function Gy(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&vf.enqueueReplaceState(r,r.state,null)}function aa(n,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(n=n.defaultProps){a===r&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Au=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function $y(n){Au(n)}function Ky(n){console.error(n)}function Qy(n){Au(n)}function Ru(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Yy(n,r,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _f(n,r,a){return a=zr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ru(n,r)},a}function Xy(n){return n=zr(n),n.tag=3,n}function Wy(n,r,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Yy(r,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Yy(r,a,c),typeof f!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Lb(n,r,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&vl(r,a,f,!0),a=Yn.current,a!==null){switch(a.tag){case 13:return Cs===null?Ff():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===Kd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Gf(n,c,f)),!1;case 22:return a.flags|=65536,c===Kd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Gf(n,c,f)),!1}throw Error(i(435,a.tag))}return Gf(n,c,f),Ff(),!1}if(Ke)return r=Yn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==qd&&(n=Error(i(422),{cause:c}),yl(Gn(n,a)))):(c!==qd&&(r=Error(i(423),{cause:c}),yl(Gn(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Gn(c,a),f=_f(n.stateNode,c,f),Xd(n,f),Et!==4&&(Et=2)),!1;var m=Error(i(520),{cause:c});if(m=Gn(m,a),Ll===null?Ll=[m]:Ll.push(m),Et!==4&&(Et=2),r===null)return!0;c=Gn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=_f(a.stateNode,c,n),Xd(a,n),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Wr===null||!Wr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Xy(f),Wy(f,n,a,c),Xd(a,f),!1}a=a.return}while(a!==null);return!1}var Zy=Error(i(461)),$t=!1;function Zt(n,r,a,c){r.child=n===null?By(r,null,a,c):no(r,n.child,a,c)}function Jy(n,r,a,c,f){a=a.render;var m=r.ref;if("ref"in c){var S={};for(var x in c)x!=="ref"&&(S[x]=c[x])}else S=c;return sa(r),c=tf(n,r,a,S,m,f),x=nf(),n!==null&&!$t?(sf(n,r,f),nr(n,r,f)):(Ke&&x&&Ld(r),r.flags|=1,Zt(n,r,c,f),r.child)}function ev(n,r,a,c,f){if(n===null){var m=a.type;return typeof m=="function"&&!Md(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,tv(n,r,m,c,f)):(n=ou(a.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Af(n,f)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(S,c)&&n.ref===r.ref)return nr(n,r,f)}return r.flags|=1,n=Ys(m,c),n.ref=r.ref,n.return=r,r.child=n}function tv(n,r,a,c,f){if(n!==null){var m=n.memoizedProps;if(fl(m,c)&&n.ref===r.ref)if($t=!1,r.pendingProps=c=m,Af(n,f))(n.flags&131072)!==0&&($t=!0);else return r.lanes=n.lanes,nr(n,r,f)}return Ef(n,r,a,c,f)}function nv(n,r,a){var c=r.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=m!==null?m.baseLanes|a:a,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~c}else r.childLanes=0,r.child=null;return sv(n,r,c,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&du(r,m!==null?m.cachePool:null),m!==null?ty(r,m):Zd(),Fy(r);else return r.lanes=r.childLanes=536870912,sv(n,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(du(r,m.cachePool),ty(r,m),Gr(),r.memoizedState=null):(n!==null&&du(r,null),Zd(),Gr());return Zt(n,r,f,a),r.child}function sv(n,r,a,c){var f=$d();return f=f===null?null:{parent:qt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},n!==null&&du(r,null),Zd(),Fy(r),n!==null&&vl(n,r,c,!0),null}function Cu(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Ef(n,r,a,c,f){return sa(r),a=tf(n,r,a,c,void 0,f),c=nf(),n!==null&&!$t?(sf(n,r,f),nr(n,r,f)):(Ke&&c&&Ld(r),r.flags|=1,Zt(n,r,a,f),r.child)}function rv(n,r,a,c,f,m){return sa(r),r.updateQueue=null,a=sy(r,c,a,f),ny(n),c=nf(),n!==null&&!$t?(sf(n,r,m),nr(n,r,m)):(Ke&&c&&Ld(r),r.flags|=1,Zt(n,r,a,m),r.child)}function iv(n,r,a,c,f){if(sa(r),r.stateNode===null){var m=$a,S=a.contextType;typeof S=="object"&&S!==null&&(m=ln(S)),m=new a(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=vf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Qd(r),S=a.contextType,m.context=typeof S=="object"&&S!==null?ln(S):$a,m.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(yf(r,a,S,c),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&vf.enqueueReplaceState(m,m.state,null),wl(r,c,m,f),Tl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var x=r.memoizedProps,P=aa(a,x);m.props=P;var Y=m.context,ne=a.contextType;S=$a,typeof ne=="object"&&ne!==null&&(S=ln(ne));var oe=a.getDerivedStateFromProps;ne=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||Y!==S)&&Gy(r,m,c,S),qr=!1;var W=r.memoizedState;m.state=W,wl(r,c,m,f),Tl(),Y=r.memoizedState,x||W!==Y||qr?(typeof oe=="function"&&(yf(r,a,oe,c),Y=r.memoizedState),(P=qr||Hy(r,a,P,c,W,Y,S))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),m.props=c,m.state=Y,m.context=S,c=P):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Yd(n,r),S=r.memoizedProps,ne=aa(a,S),m.props=ne,oe=r.pendingProps,W=m.context,Y=a.contextType,P=$a,typeof Y=="object"&&Y!==null&&(P=ln(Y)),x=a.getDerivedStateFromProps,(Y=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==oe||W!==P)&&Gy(r,m,c,P),qr=!1,W=r.memoizedState,m.state=W,wl(r,c,m,f),Tl();var Z=r.memoizedState;S!==oe||W!==Z||qr||n!==null&&n.dependencies!==null&&uu(n.dependencies)?(typeof x=="function"&&(yf(r,a,x,c),Z=r.memoizedState),(ne=qr||Hy(r,a,ne,c,W,Z,P)||n!==null&&n.dependencies!==null&&uu(n.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Z,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Z,P)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),m.props=c,m.state=Z,m.context=P,c=ne):(typeof m.componentDidUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Cu(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=no(r,n.child,null,f),r.child=no(r,null,a,f)):Zt(n,r,a,f),r.memoizedState=m.state,n=r.child):n=nr(n,r,f),n}function av(n,r,a,c){return gl(),r.flags|=256,Zt(n,r,a,c),r.child}var Sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(n){return{baseLanes:n,cachePool:Kg()}}function xf(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Xn),n}function ov(n,r,a){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,S;if((S=m)||(S=n!==null&&n.memoizedState===null?!1:(zt.current&2)!==0),S&&(f=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ke){if(f?Hr(r):Gr(),Ke){var x=_t,P;if(P=x){e:{for(P=x,x=Rs;P.nodeType!==8;){if(!x){x=null;break e}if(P=ds(P.nextSibling),P===null){x=null;break e}}x=P}x!==null?(r.memoizedState={dehydrated:x,treeContext:Zi!==null?{id:Xs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},P=Dn(18,null,null,0),P.stateNode=x,P.return=r,r.child=P,Sn=r,_t=null,P=!0):P=!1}P||ta(r)}if(x=r.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return am(x)?r.lanes=32:r.lanes=536870912,null;tr(r)}return x=c.children,c=c.fallback,f?(Gr(),f=r.mode,x=ju({mode:"hidden",children:x},f),c=Wi(c,f,a,null),x.return=r,c.return=r,x.sibling=c,r.child=x,f=r.child,f.memoizedState=bf(a),f.childLanes=xf(n,S,a),r.memoizedState=Sf,c):(Hr(r),Tf(r,x))}if(P=n.memoizedState,P!==null&&(x=P.dehydrated,x!==null)){if(m)r.flags&256?(Hr(r),r.flags&=-257,r=wf(n,r,a)):r.memoizedState!==null?(Gr(),r.child=n.child,r.flags|=128,r=null):(Gr(),f=c.fallback,x=r.mode,c=ju({mode:"visible",children:c.children},x),f=Wi(f,x,a,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,no(r,n.child,null,a),c=r.child,c.memoizedState=bf(a),c.childLanes=xf(n,S,a),r.memoizedState=Sf,r=f);else if(Hr(r),am(x)){if(S=x.nextSibling&&x.nextSibling.dataset,S)var Y=S.dgst;S=Y,c=Error(i(419)),c.stack="",c.digest=S,yl({value:c,source:null,stack:null}),r=wf(n,r,a)}else if($t||vl(n,r,a,!1),S=(a&n.childLanes)!==0,$t||S){if(S=at,S!==null&&(c=a&-a,c=(c&42)!==0?1:Xo(c),c=(c&(S.suspendedLanes|a))!==0?0:c,c!==0&&c!==P.retryLane))throw P.retryLane=c,Ga(n,c),Vn(S,n,c),Zy;x.data==="$?"||Ff(),r=wf(n,r,a)}else x.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=P.treeContext,_t=ds(x.nextSibling),Sn=r,Ke=!0,ea=null,Rs=!1,n!==null&&(Kn[Qn++]=Xs,Kn[Qn++]=Ws,Kn[Qn++]=Zi,Xs=n.id,Ws=n.overflow,Zi=r),r=Tf(r,c.children),r.flags|=4096);return r}return f?(Gr(),f=c.fallback,x=r.mode,P=n.child,Y=P.sibling,c=Ys(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,Y!==null?f=Ys(Y,f):(f=Wi(f,x,a,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,x=n.child.memoizedState,x===null?x=bf(a):(P=x.cachePool,P!==null?(Y=qt._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=Kg(),x={baseLanes:x.baseLanes|a,cachePool:P}),f.memoizedState=x,f.childLanes=xf(n,S,a),r.memoizedState=Sf,c):(Hr(r),a=n.child,n=a.sibling,a=Ys(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,n!==null&&(S=r.deletions,S===null?(r.deletions=[n],r.flags|=16):S.push(n)),r.child=a,r.memoizedState=null,a)}function Tf(n,r){return r=ju({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function ju(n,r){return n=Dn(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function wf(n,r,a){return no(r,n.child,null,a),n=Tf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function lv(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Bd(n.return,r,a)}function Nf(n,r,a,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=f)}function cv(n,r,a){var c=r.pendingProps,f=c.revealOrder,m=c.tail;if(Zt(n,r,c.children,a),c=zt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lv(n,a,r);else if(n.tag===19)lv(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(me(zt,c),f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Nu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Nf(r,!1,f,a,m);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Nu(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Nf(r,!0,a,null,m);break;case"together":Nf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function nr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Xr|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(vl(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,a=Ys(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Ys(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Af(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&uu(n)))}function Ub(n,r,a){switch(r.tag){case 3:Pe(r,r.stateNode.containerInfo),Ur(r,qt,n.memoizedState.cache),gl();break;case 27:case 5:$o(r);break;case 4:Pe(r,r.stateNode.containerInfo);break;case 10:Ur(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Hr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ov(n,r,a):(Hr(r),n=nr(n,r,a),n!==null?n.sibling:null);Hr(r);break;case 19:var f=(n.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(vl(n,r,a,!1),c=(a&r.childLanes)!==0),f){if(c)return cv(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(zt,zt.current),c)break;return null;case 22:case 23:return r.lanes=0,nv(n,r,a);case 24:Ur(r,qt,n.memoizedState.cache)}return nr(n,r,a)}function uv(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)$t=!0;else{if(!Af(n,a)&&(r.flags&128)===0)return $t=!1,Ub(n,r,a);$t=(n.flags&131072)!==0}else $t=!1,Ke&&(r.flags&1048576)!==0&&qg(r,cu,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var c=r.elementType,f=c._init;if(c=f(c._payload),r.type=c,typeof c=="function")Md(c)?(n=aa(c,n),r.tag=1,r=iv(null,r,c,n,a)):(r.tag=0,r=Ef(null,r,c,n,a));else{if(c!=null){if(f=c.$$typeof,f===H){r.tag=11,r=Jy(null,r,c,n,a);break e}else if(f===R){r.tag=14,r=ev(null,r,c,n,a);break e}}throw r=ue(c)||c,Error(i(306,r,""))}}return r;case 0:return Ef(n,r,r.type,r.pendingProps,a);case 1:return c=r.type,f=aa(c,r.pendingProps),iv(n,r,c,f,a);case 3:e:{if(Pe(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Yd(n,r),wl(r,c,null,a);var S=r.memoizedState;if(c=S.cache,Ur(r,qt,c),c!==m.cache&&Fd(r,[qt],a,!0),Tl(),c=S.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=av(n,r,c,a);break e}else if(c!==f){f=Gn(Error(i(424)),r),yl(f),r=av(n,r,c,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(_t=ds(n.firstChild),Sn=r,Ke=!0,ea=null,Rs=!0,a=By(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gl(),c===f){r=nr(n,r,a);break e}Zt(n,r,c,a)}r=r.child}return r;case 26:return Cu(n,r),n===null?(a=m_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ke||(a=r.type,n=r.pendingProps,c=Hu(ce.current).createElement(a),c[Tt]=r,c[Wt]=n,en(c,a,n),wt(c),r.stateNode=c):r.memoizedState=m_(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return $o(r),n===null&&Ke&&(c=r.stateNode=h_(r.type,r.pendingProps,ce.current),Sn=r,Rs=!0,f=_t,ei(r.type)?(om=f,_t=ds(c.firstChild)):_t=f),Zt(n,r,r.pendingProps.children,a),Cu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ke&&((f=c=_t)&&(c=fx(c,r.type,r.pendingProps,Rs),c!==null?(r.stateNode=c,Sn=r,_t=ds(c.firstChild),Rs=!1,f=!0):f=!1),f||ta(r)),$o(r),f=r.type,m=r.pendingProps,S=n!==null?n.memoizedProps:null,c=m.children,sm(f,m)?c=null:S!==null&&sm(f,S)&&(r.flags|=32),r.memoizedState!==null&&(f=tf(n,r,Ib,null,null,a),Kl._currentValue=f),Cu(n,r),Zt(n,r,c,a),r.child;case 6:return n===null&&Ke&&((n=a=_t)&&(a=mx(a,r.pendingProps,Rs),a!==null?(r.stateNode=a,Sn=r,_t=null,n=!0):n=!1),n||ta(r)),null;case 13:return ov(n,r,a);case 4:return Pe(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=no(r,null,c,a):Zt(n,r,c,a),r.child;case 11:return Jy(n,r,r.type,r.pendingProps,a);case 7:return Zt(n,r,r.pendingProps,a),r.child;case 8:return Zt(n,r,r.pendingProps.children,a),r.child;case 12:return Zt(n,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Ur(r,r.type,c.value),Zt(n,r,c.children,a),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,sa(r),f=ln(f),c=c(f),r.flags|=1,Zt(n,r,c,a),r.child;case 14:return ev(n,r,r.type,r.pendingProps,a);case 15:return tv(n,r,r.type,r.pendingProps,a);case 19:return cv(n,r,a);case 31:return c=r.pendingProps,a=r.mode,c={mode:c.mode,children:c.children},n===null?(a=ju(c,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ys(n.child,c),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return nv(n,r,a);case 24:return sa(r),c=ln(qt),n===null?(f=$d(),f===null&&(f=at,m=Hd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:c,cache:f},Qd(r),Ur(r,qt,f)):((n.lanes&a)!==0&&(Yd(n,r),wl(r,null,null,a),Tl()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ur(r,qt,c)):(c=m.cache,Ur(r,qt,c),c!==f.cache&&Fd(r,[qt],a,!0))),Zt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function sr(n){n.flags|=4}function hv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!__(r)){if(r=Yn.current,r!==null&&((He&4194048)===He?Cs!==null:(He&62914560)!==He&&(He&536870912)===0||r!==Cs))throw bl=Kd,Qg;n.flags|=8192}}function Iu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Nr():536870912,n.lanes|=r,ao|=r)}function Dl(n,r){if(!Ke)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function pt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function qb(n,r,a){var c=r.pendingProps;switch(Ud(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Js(qt),gn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(pl(r)?sr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fg())),pt(r),null;case 26:return a=r.memoizedState,n===null?(sr(r),a!==null?(pt(r),hv(r,a)):(pt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(sr(r),pt(r),hv(r,a)):(pt(r),r.flags&=-16777217):(n.memoizedProps!==c&&sr(r),pt(r),r.flags&=-16777217),null;case 27:wa(r),a=ce.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==c&&sr(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return pt(r),null}n=te.current,pl(r)?zg(r):(n=h_(f,c,a),r.stateNode=n,sr(r))}return pt(r),null;case 5:if(wa(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&sr(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return pt(r),null}if(n=te.current,pl(r))zg(r);else{switch(f=Hu(ce.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}n[Tt]=r,n[Wt]=c;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(en(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&sr(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&sr(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=ce.current,pl(r)){if(n=r.stateNode,a=r.memoizedProps,c=null,f=Sn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Tt]=r,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||r_(n.nodeValue,a)),n||ta(r)}else n=Hu(n).createTextNode(c),n[Tt]=r,r.stateNode=n}return pt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=pl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Tt]=r}else gl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),f=!1}else f=Fg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(tr(r),r):(tr(r),null)}if(tr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),Iu(r,r.updateQueue),pt(r),null;case 4:return gn(),n===null&&Zf(r.stateNode.containerInfo),pt(r),null;case 10:return Js(r.type),pt(r),null;case 19:if(fe(zt),f=r.memoizedState,f===null)return pt(r),null;if(c=(r.flags&128)!==0,m=f.rendering,m===null)if(c)Dl(f,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=Nu(n),m!==null){for(r.flags|=128,Dl(f,!1),n=m.updateQueue,r.updateQueue=n,Iu(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Ug(a,n),a=a.sibling;return me(zt,zt.current&1|2),r.child}n=n.sibling}f.tail!==null&&xn()>Ou&&(r.flags|=128,c=!0,Dl(f,!1),r.lanes=4194304)}else{if(!c)if(n=Nu(m),n!==null){if(r.flags|=128,c=!0,n=n.updateQueue,r.updateQueue=n,Iu(r,n),Dl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ke)return pt(r),null}else 2*xn()-f.renderingStartTime>Ou&&a!==536870912&&(r.flags|=128,c=!0,Dl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=xn(),r.sibling=null,n=zt.current,me(zt,c?n&1|2:n&1),r):(pt(r),null);case 22:case 23:return tr(r),Jd(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Iu(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),n!==null&&fe(ra),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Js(qt),pt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function zb(n,r){switch(Ud(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Js(qt),gn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return wa(r),null;case 13:if(tr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));gl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return fe(zt),null;case 4:return gn(),null;case 10:return Js(r.type),null;case 22:case 23:return tr(r),Jd(),n!==null&&fe(ra),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Js(qt),null;case 25:return null;default:return null}}function dv(n,r){switch(Ud(r),r.tag){case 3:Js(qt),gn();break;case 26:case 27:case 5:wa(r);break;case 4:gn();break;case 13:tr(r);break;case 19:fe(zt);break;case 10:Js(r.type);break;case 22:case 23:tr(r),Jd(),n!==null&&fe(ra);break;case 24:Js(qt)}}function Pl(n,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&n)===n){c=void 0;var m=a.create,S=a.inst;c=m(),S.destroy=c}a=a.next}while(a!==f)}}catch(x){rt(r,r.return,x)}}function $r(n,r,a){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var S=c.inst,x=S.destroy;if(x!==void 0){S.destroy=void 0,f=r;var P=a,Y=x;try{Y()}catch(ne){rt(f,P,ne)}}}c=c.next}while(c!==m)}}catch(ne){rt(r,r.return,ne)}}function fv(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{ey(r,a)}catch(c){rt(n,n.return,c)}}}function mv(n,r,a){a.props=aa(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){rt(n,r,c)}}function Ol(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(f){rt(n,r,f)}}function js(n,r){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){rt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){rt(n,r,f)}else a.current=null}function pv(n){var r=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){rt(n,n.return,f)}}function Rf(n,r,a){try{var c=n.stateNode;lx(c,n.type,a,r),c[Wt]=r}catch(f){rt(n,n.return,f)}}function gv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ei(n.type)||n.tag===4}function Cf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ei(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jf(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Fu));else if(c!==4&&(c===27&&ei(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(jf(n,r,a),n=n.sibling;n!==null;)jf(n,r,a),n=n.sibling}function Du(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(c===27&&ei(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Du(n,r,a),n=n.sibling;n!==null;)Du(n,r,a),n=n.sibling}function yv(n){var r=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);en(r,c,a),r[Tt]=n,r[Wt]=a}catch(m){rt(n,n.return,m)}}var rr=!1,Rt=!1,If=!1,vv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Bb(n,r){if(n=n.containerInfo,tm=Xu,n=Cg(n),Rd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,x=-1,P=-1,Y=0,ne=0,oe=n,W=null;t:for(;;){for(var Z;oe!==a||f!==0&&oe.nodeType!==3||(x=S+f),oe!==m||c!==0&&oe.nodeType!==3||(P=S+c),oe.nodeType===3&&(S+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)W=oe,oe=Z;for(;;){if(oe===n)break t;if(W===a&&++Y===f&&(x=S),W===m&&++ne===c&&(P=S),(Z=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=Z}a=x===-1||P===-1?null:{start:x,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(nm={focusedElem:n,selectionRange:a},Xu=!1,Kt=r;Kt!==null;)if(r=Kt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Kt=n;else for(;Kt!==null;){switch(r=Kt,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var Ae=aa(a.type,f,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(Ae,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(xe){rt(a,a.return,xe)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)im(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":im(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Kt=n;break}Kt=r.return}}function _v(n,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Kr(n,a),c&4&&Pl(5,a);break;case 1:if(Kr(n,a),c&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(S){rt(a,a.return,S)}else{var f=aa(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(S){rt(a,a.return,S)}}c&64&&fv(a),c&512&&Ol(a,a.return);break;case 3:if(Kr(n,a),c&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ey(n,r)}catch(S){rt(a,a.return,S)}}break;case 27:r===null&&c&4&&yv(a);case 26:case 5:Kr(n,a),r===null&&c&4&&pv(a),c&512&&Ol(a,a.return);break;case 12:Kr(n,a);break;case 13:Kr(n,a),c&4&&bv(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Wb.bind(null,a),px(n,a))));break;case 22:if(c=a.memoizedState!==null||rr,!c){r=r!==null&&r.memoizedState!==null||Rt,f=rr;var m=Rt;rr=c,(Rt=r)&&!m?Qr(n,a,(a.subtreeFlags&8772)!==0):Kr(n,a),rr=f,Rt=m}break;case 30:break;default:Kr(n,a)}}function Ev(n){var r=n.alternate;r!==null&&(n.alternate=null,Ev(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ja(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,wn=!1;function ir(n,r,a){for(a=a.child;a!==null;)Sv(n,r,a),a=a.sibling}function Sv(n,r,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(xr,a)}catch{}switch(a.tag){case 26:Rt||js(a,r),ir(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||js(a,r);var c=dt,f=wn;ei(a.type)&&(dt=a.stateNode,wn=!1),ir(n,r,a),Fl(a.stateNode),dt=c,wn=f;break;case 5:Rt||js(a,r);case 6:if(c=dt,f=wn,dt=null,ir(n,r,a),dt=c,wn=f,dt!==null)if(wn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(m){rt(a,r,m)}else try{dt.removeChild(a.stateNode)}catch(m){rt(a,r,m)}break;case 18:dt!==null&&(wn?(n=dt,c_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wl(n)):c_(dt,a.stateNode));break;case 4:c=dt,f=wn,dt=a.stateNode.containerInfo,wn=!0,ir(n,r,a),dt=c,wn=f;break;case 0:case 11:case 14:case 15:Rt||$r(2,a,r),Rt||$r(4,a,r),ir(n,r,a);break;case 1:Rt||(js(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&mv(a,r,c)),ir(n,r,a);break;case 21:ir(n,r,a);break;case 22:Rt=(c=Rt)||a.memoizedState!==null,ir(n,r,a),Rt=c;break;default:ir(n,r,a)}}function bv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wl(n)}catch(a){rt(r,r.return,a)}}function Fb(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new vv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new vv),r;default:throw Error(i(435,n.tag))}}function Df(n,r){var a=Fb(n);r.forEach(function(c){var f=Zb.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}function Pn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],m=n,S=r,x=S;e:for(;x!==null;){switch(x.tag){case 27:if(ei(x.type)){dt=x.stateNode,wn=!1;break e}break;case 5:dt=x.stateNode,wn=!1;break e;case 3:case 4:dt=x.stateNode.containerInfo,wn=!0;break e}x=x.return}if(dt===null)throw Error(i(160));Sv(m,S,f),dt=null,wn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)xv(r,n),r=r.sibling}var hs=null;function xv(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pn(r,n),On(n),c&4&&($r(3,n,n.return),Pl(3,n),$r(5,n,n.return));break;case 1:Pn(r,n),On(n),c&512&&(Rt||a===null||js(a,a.return)),c&64&&rr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=hs;if(Pn(r,n),On(n),c&512&&(Rt||a===null||js(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Cr]||m[Tt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),en(m,c,a),m[Tt]=n,wt(m),c=m;break e;case"link":var S=y_("link","href",f).get(c+(a.href||""));if(S){for(var x=0;x<S.length;x++)if(m=S[x],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(x,1);break t}}m=f.createElement(c),en(m,c,a),f.head.appendChild(m);break;case"meta":if(S=y_("meta","content",f).get(c+(a.content||""))){for(x=0;x<S.length;x++)if(m=S[x],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(x,1);break t}}m=f.createElement(c),en(m,c,a),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[Tt]=n,wt(m),c=m}n.stateNode=c}else v_(f,n.type,n.stateNode);else n.stateNode=g_(f,c,n.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?v_(f,n.type,n.stateNode):g_(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Rf(n,n.memoizedProps,a.memoizedProps)}break;case 27:Pn(r,n),On(n),c&512&&(Rt||a===null||js(a,a.return)),a!==null&&c&4&&Rf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Pn(r,n),On(n),c&512&&(Rt||a===null||js(a,a.return)),n.flags&32){f=n.stateNode;try{Fn(f,"")}catch(Z){rt(n,n.return,Z)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Rf(n,f,a!==null?a.memoizedProps:f)),c&1024&&(If=!0);break;case 6:if(Pn(r,n),On(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(Z){rt(n,n.return,Z)}}break;case 3:if(Ku=null,f=hs,hs=Gu(r.containerInfo),Pn(r,n),hs=f,On(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(r.containerInfo)}catch(Z){rt(n,n.return,Z)}If&&(If=!1,Tv(n));break;case 4:c=hs,hs=Gu(n.stateNode.containerInfo),Pn(r,n),On(n),hs=c;break;case 12:Pn(r,n),On(n);break;case 13:Pn(r,n),On(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lf=xn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Df(n,c)));break;case 22:f=n.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=rr,ne=Rt;if(rr=Y||f,Rt=ne||P,Pn(r,n),Rt=ne,rr=Y,On(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||P||rr||Rt||oa(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(m=P.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{x=P.stateNode;var oe=P.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;x.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){rt(P,P.return,Z)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Z){rt(P,P.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Df(n,a))));break;case 19:Pn(r,n),On(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Df(n,c)));break;case 30:break;case 21:break;default:Pn(r,n),On(n)}}function On(n){var r=n.flags;if(r&2){try{for(var a,c=n.return;c!==null;){if(gv(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=Cf(n);Du(n,m,f);break;case 5:var S=a.stateNode;a.flags&32&&(Fn(S,""),a.flags&=-33);var x=Cf(n);Du(n,x,S);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=Cf(n);jf(n,Y,P);break;default:throw Error(i(161))}}catch(ne){rt(n,n.return,ne)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Tv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Tv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Kr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(n,r.alternate,r),r=r.sibling}function oa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:$r(4,r,r.return),oa(r);break;case 1:js(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&mv(r,r.return,a),oa(r);break;case 27:Fl(r.stateNode);case 26:case 5:js(r,r.return),oa(r);break;case 22:r.memoizedState===null&&oa(r);break;case 30:oa(r);break;default:oa(r)}n=n.sibling}}function Qr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,S=m.flags;switch(m.tag){case 0:case 11:case 15:Qr(f,m,a),Pl(4,m);break;case 1:if(Qr(f,m,a),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){rt(c,c.return,Y)}if(c=m,f=c.updateQueue,f!==null){var x=c.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)Jg(P[f],x)}catch(Y){rt(c,c.return,Y)}}a&&S&64&&fv(m),Ol(m,m.return);break;case 27:yv(m);case 26:case 5:Qr(f,m,a),a&&c===null&&S&4&&pv(m),Ol(m,m.return);break;case 12:Qr(f,m,a);break;case 13:Qr(f,m,a),a&&S&4&&bv(f,m);break;case 22:m.memoizedState===null&&Qr(f,m,a),Ol(m,m.return);break;case 30:break;default:Qr(f,m,a)}r=r.sibling}}function Pf(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&_l(a))}function Of(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&_l(n))}function Is(n,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)wv(n,r,a,c),r=r.sibling}function wv(n,r,a,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Is(n,r,a,c),f&2048&&Pl(9,r);break;case 1:Is(n,r,a,c);break;case 3:Is(n,r,a,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&_l(n)));break;case 12:if(f&2048){Is(n,r,a,c),n=r.stateNode;try{var m=r.memoizedProps,S=m.id,x=m.onPostCommit;typeof x=="function"&&x(S,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){rt(r,r.return,P)}}else Is(n,r,a,c);break;case 13:Is(n,r,a,c);break;case 23:break;case 22:m=r.stateNode,S=r.alternate,r.memoizedState!==null?m._visibility&2?Is(n,r,a,c):Ml(n,r):m._visibility&2?Is(n,r,a,c):(m._visibility|=2,so(n,r,a,c,(r.subtreeFlags&10256)!==0)),f&2048&&Pf(S,r);break;case 24:Is(n,r,a,c),f&2048&&Of(r.alternate,r);break;default:Is(n,r,a,c)}}function so(n,r,a,c,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,S=r,x=a,P=c,Y=S.flags;switch(S.tag){case 0:case 11:case 15:so(m,S,x,P,f),Pl(8,S);break;case 23:break;case 22:var ne=S.stateNode;S.memoizedState!==null?ne._visibility&2?so(m,S,x,P,f):Ml(m,S):(ne._visibility|=2,so(m,S,x,P,f)),f&&Y&2048&&Pf(S.alternate,S);break;case 24:so(m,S,x,P,f),f&&Y&2048&&Of(S.alternate,S);break;default:so(m,S,x,P,f)}r=r.sibling}}function Ml(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,c=r,f=c.flags;switch(c.tag){case 22:Ml(a,c),f&2048&&Pf(c.alternate,c);break;case 24:Ml(a,c),f&2048&&Of(c.alternate,c);break;default:Ml(a,c)}r=r.sibling}}var kl=8192;function ro(n){if(n.subtreeFlags&kl)for(n=n.child;n!==null;)Nv(n),n=n.sibling}function Nv(n){switch(n.tag){case 26:ro(n),n.flags&kl&&n.memoizedState!==null&&Rx(hs,n.memoizedState,n.memoizedProps);break;case 5:ro(n);break;case 3:case 4:var r=hs;hs=Gu(n.stateNode.containerInfo),ro(n),hs=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,ro(n),kl=r):ro(n));break;default:ro(n)}}function Av(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Vl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Kt=c,Cv(c,n)}Av(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rv(n),n=n.sibling}function Rv(n){switch(n.tag){case 0:case 11:case 15:Vl(n),n.flags&2048&&$r(9,n,n.return);break;case 3:Vl(n);break;case 12:Vl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Pu(n)):Vl(n);break;default:Vl(n)}}function Pu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Kt=c,Cv(c,n)}Av(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:$r(8,r,r.return),Pu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pu(r));break;default:Pu(r)}n=n.sibling}}function Cv(n,r){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:$r(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_l(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Kt=c;else e:for(a=n;Kt!==null;){c=Kt;var f=c.sibling,m=c.return;if(Ev(c),c===a){Kt=null;break e}if(f!==null){f.return=m,Kt=f;break e}Kt=m}}}var Hb={getCacheForType:function(n){var r=ln(qt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},Gb=typeof WeakMap=="function"?WeakMap:Map,We=0,at=null,Ue=null,He=0,Ze=0,Mn=null,Yr=!1,io=!1,Mf=!1,ar=0,Et=0,Xr=0,la=0,kf=0,Xn=0,ao=0,Ll=null,Nn=null,Vf=!1,Lf=0,Ou=1/0,Mu=null,Wr=null,Jt=0,Zr=null,oo=null,lo=0,Uf=0,qf=null,jv=null,Ul=0,zf=null;function kn(){if((We&2)!==0&&He!==0)return He&-He;if(ee.T!==null){var n=Ya;return n!==0?n:Qf()}return Bs()}function Iv(){Xn===0&&(Xn=(He&536870912)===0||Ke?Yo():536870912);var n=Yn.current;return n!==null&&(n.flags|=32),Xn}function Vn(n,r,a){(n===at&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(co(n,0),Jr(n,He,Xn,!1)),xt(n,a),((We&2)===0||n!==at)&&(n===at&&((We&2)===0&&(la|=a),Et===4&&Jr(n,He,Xn,!1)),Ds(n))}function Dv(n,r,a){if((We&6)!==0)throw Error(i(327));var c=!a&&(r&124)===0&&(r&n.expiredLanes)===0||wr(n,r),f=c?Qb(n,r):Hf(n,r,!0),m=c;do{if(f===0){io&&!c&&Jr(n,r,0,!1);break}else{if(a=n.current.alternate,m&&!$b(a)){f=Hf(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var x=n;f=Ll;var P=x.current.memoizedState.isDehydrated;if(P&&(co(x,S).flags|=256),S=Hf(x,S,!1),S!==2){if(Mf&&!P){x.errorRecoveryDisabledLanes|=m,la|=m,f=4;break e}m=Nn,Nn=f,m!==null&&(Nn===null?Nn=m:Nn.push.apply(Nn,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){co(n,0),Jr(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Jr(c,r,Xn,!Yr);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Lf+300-xn(),10<f)){if(Jr(c,r,Xn,!Yr),zn(c,0,!0)!==0)break e;c.timeoutHandle=o_(Pv.bind(null,c,a,Nn,Mu,Vf,r,Xn,la,ao,Yr,m,2,-0,0),f);break e}Pv(c,a,Nn,Mu,Vf,r,Xn,la,ao,Yr,m,0,-0,0)}}break}while(!0);Ds(n)}function Pv(n,r,a,c,f,m,S,x,P,Y,ne,oe,W,Z){if(n.timeoutHandle=-1,oe=r.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&($l={stylesheets:null,count:0,unsuspend:Ax},Nv(r),oe=Cx(),oe!==null)){n.cancelPendingCommit=oe(qv.bind(null,n,r,m,a,c,f,S,x,P,ne,1,W,Z)),Jr(n,m,S,!Y);return}qv(n,r,m,a,c,f,S,x,P)}function $b(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!In(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Jr(n,r,a,c){r&=~kf,r&=~la,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-yn(f),S=1<<m;c[m]=-1,f&=~S}a!==0&&Ar(n,a,r)}function ku(){return(We&6)===0?(ql(0),!1):!0}function Bf(){if(Ue!==null){if(Ze===0)var n=Ue.return;else n=Ue,Zs=na=null,rf(n),to=null,jl=0,n=Ue;for(;n!==null;)dv(n.alternate,n),n=n.return;Ue=null}}function co(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,ux(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Bf(),at=n,Ue=a=Ys(n.current,null),He=r,Ze=0,Mn=null,Yr=!1,io=wr(n,r),Mf=!1,ao=Xn=kf=la=Xr=Et=0,Nn=Ll=null,Vf=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-yn(c),m=1<<f;r|=n[f],c&=~m}return ar=r,ru(),a}function Ov(n,r){ke=null,ee.H=xu,r===Sl||r===fu?(r=Wg(),Ze=3):r===Qg?(r=Wg(),Ze=4):Ze=r===Zy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,Ue===null&&(Et=1,Ru(n,Gn(r,n.current)))}function Mv(){var n=ee.H;return ee.H=xu,n===null?xu:n}function kv(){var n=ee.A;return ee.A=Hb,n}function Ff(){Et=4,Yr||(He&4194048)!==He&&Yn.current!==null||(io=!0),(Xr&134217727)===0&&(la&134217727)===0||at===null||Jr(at,He,Xn,!1)}function Hf(n,r,a){var c=We;We|=2;var f=Mv(),m=kv();(at!==n||He!==r)&&(Mu=null,co(n,r)),r=!1;var S=Et;e:do try{if(Ze!==0&&Ue!==null){var x=Ue,P=Mn;switch(Ze){case 8:Bf(),S=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(r=!0);var Y=Ze;if(Ze=0,Mn=null,uo(n,x,P,Y),a&&io){S=0;break e}break;default:Y=Ze,Ze=0,Mn=null,uo(n,x,P,Y)}}Kb(),S=Et;break}catch(ne){Ov(n,ne)}while(!0);return r&&n.shellSuspendCounter++,Zs=na=null,We=c,ee.H=f,ee.A=m,Ue===null&&(at=null,He=0,ru()),S}function Kb(){for(;Ue!==null;)Vv(Ue)}function Qb(n,r){var a=We;We|=2;var c=Mv(),f=kv();at!==n||He!==r?(Mu=null,Ou=xn()+500,co(n,r)):io=wr(n,r);e:do try{if(Ze!==0&&Ue!==null){r=Ue;var m=Mn;t:switch(Ze){case 1:Ze=0,Mn=null,uo(n,r,m,1);break;case 2:case 9:if(Yg(m)){Ze=0,Mn=null,Lv(r);break}r=function(){Ze!==2&&Ze!==9||at!==n||(Ze=7),Ds(n)},m.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Yg(m)?(Ze=0,Mn=null,Lv(r)):(Ze=0,Mn=null,uo(n,r,m,7));break;case 5:var S=null;switch(Ue.tag){case 26:S=Ue.memoizedState;case 5:case 27:var x=Ue;if(!S||__(S)){Ze=0,Mn=null;var P=x.sibling;if(P!==null)Ue=P;else{var Y=x.return;Y!==null?(Ue=Y,Vu(Y)):Ue=null}break t}}Ze=0,Mn=null,uo(n,r,m,5);break;case 6:Ze=0,Mn=null,uo(n,r,m,6);break;case 8:Bf(),Et=6;break e;default:throw Error(i(462))}}Yb();break}catch(ne){Ov(n,ne)}while(!0);return Zs=na=null,ee.H=c,ee.A=f,We=a,Ue!==null?0:(at=null,He=0,ru(),Et)}function Yb(){for(;Ue!==null&&!yd();)Vv(Ue)}function Vv(n){var r=uv(n.alternate,n,ar);n.memoizedProps=n.pendingProps,r===null?Vu(n):Ue=r}function Lv(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=rv(a,r,r.pendingProps,r.type,void 0,He);break;case 11:r=rv(a,r,r.pendingProps,r.type.render,r.ref,He);break;case 5:rf(r);default:dv(a,r),r=Ue=Ug(r,ar),r=uv(a,r,ar)}n.memoizedProps=n.pendingProps,r===null?Vu(n):Ue=r}function uo(n,r,a,c){Zs=na=null,rf(r),to=null,jl=0;var f=r.return;try{if(Lb(n,f,r,a,He)){Et=1,Ru(n,Gn(a,n.current)),Ue=null;return}}catch(m){if(f!==null)throw Ue=f,m;Et=1,Ru(n,Gn(a,n.current)),Ue=null;return}r.flags&32768?(Ke||c===1?n=!0:io||(He&536870912)!==0?n=!1:(Yr=n=!0,(c===2||c===9||c===3||c===6)&&(c=Yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Uv(r,n)):Vu(r)}function Vu(n){var r=n;do{if((r.flags&32768)!==0){Uv(r,Yr);return}n=r.return;var a=qb(r.alternate,r,ar);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=n}while(r!==null);Et===0&&(Et=5)}function Uv(n,r){do{var a=zb(n.alternate,n);if(a!==null){a.flags&=32767,Ue=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=a}while(n!==null);Et=6,Ue=null}function qv(n,r,a,c,f,m,S,x,P){n.cancelPendingCommit=null;do Lu();while(Jt!==0);if((We&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Pd,zc(n,a,m,S,x,P),n===at&&(Ue=at=null,He=0),oo=r,Zr=n,lo=a,Uf=m,qf=f,jv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Jb(zs,function(){return Gv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,f=de.p,de.p=2,S=We,We|=4;try{Bb(n,r,a)}finally{We=S,de.p=f,ee.T=c}}Jt=1,zv(),Bv(),Fv()}}function zv(){if(Jt===1){Jt=0;var n=Zr,r=oo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var c=de.p;de.p=2;var f=We;We|=4;try{xv(r,n);var m=nm,S=Cg(n.containerInfo),x=m.focusedElem,P=m.selectionRange;if(S!==x&&x&&x.ownerDocument&&Rg(x.ownerDocument.documentElement,x)){if(P!==null&&Rd(x)){var Y=P.start,ne=P.end;if(ne===void 0&&(ne=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(ne,x.value.length);else{var oe=x.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ae=x.textContent.length,xe=Math.min(P.start,Ae),nt=P.end===void 0?xe:Math.min(P.end,Ae);!Z.extend&&xe>nt&&(S=nt,nt=xe,xe=S);var B=Ag(x,xe),q=Ag(x,nt);if(B&&q&&(Z.rangeCount!==1||Z.anchorNode!==B.node||Z.anchorOffset!==B.offset||Z.focusNode!==q.node||Z.focusOffset!==q.offset)){var G=oe.createRange();G.setStart(B.node,B.offset),Z.removeAllRanges(),xe>nt?(Z.addRange(G),Z.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),Z.addRange(G))}}}}for(oe=[],Z=x;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<oe.length;x++){var se=oe[x];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Xu=!!tm,nm=tm=null}finally{We=f,de.p=c,ee.T=a}}n.current=r,Jt=2}}function Bv(){if(Jt===2){Jt=0;var n=Zr,r=oo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var c=de.p;de.p=2;var f=We;We|=4;try{_v(n,r.alternate,r)}finally{We=f,de.p=c,ee.T=a}}Jt=3}}function Fv(){if(Jt===4||Jt===3){Jt=0,Ko();var n=Zr,r=oo,a=lo,c=jv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Jt=5:(Jt=0,oo=Zr=null,Hv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Wr=null),Wo(a),r=r.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(xr,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,f=de.p,de.p=2,ee.T=null;try{for(var m=n.onRecoverableError,S=0;S<c.length;S++){var x=c[S];m(x.value,{componentStack:x.stack})}}finally{ee.T=r,de.p=f}}(lo&3)!==0&&Lu(),Ds(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===zf?Ul++:(Ul=0,zf=n):Ul=0,ql(0)}}function Hv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,_l(r)))}function Lu(n){return zv(),Bv(),Fv(),Gv()}function Gv(){if(Jt!==5)return!1;var n=Zr,r=Uf;Uf=0;var a=Wo(lo),c=ee.T,f=de.p;try{de.p=32>a?32:a,ee.T=null,a=qf,qf=null;var m=Zr,S=lo;if(Jt=0,oo=Zr=null,lo=0,(We&6)!==0)throw Error(i(331));var x=We;if(We|=4,Rv(m.current),wv(m,m.current,S,a),We=x,ql(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(xr,m)}catch{}return!0}finally{de.p=f,ee.T=c,Hv(n,r)}}function $v(n,r,a){r=Gn(a,r),r=_f(n.stateNode,r,2),n=Br(n,r,2),n!==null&&(xt(n,2),Ds(n))}function rt(n,r,a){if(n.tag===3)$v(n,n,a);else for(;r!==null;){if(r.tag===3){$v(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wr===null||!Wr.has(c))){n=Gn(a,n),a=Xy(2),c=Br(r,a,2),c!==null&&(Wy(a,c,r,n),xt(c,2),Ds(c));break}}r=r.return}}function Gf(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Gb;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(Mf=!0,f.add(a),n=Xb.bind(null,n,r,a),r.then(n,n))}function Xb(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,at===n&&(He&a)===a&&(Et===4||Et===3&&(He&62914560)===He&&300>xn()-Lf?(We&2)===0&&co(n,0):kf|=a,ao===He&&(ao=0)),Ds(n)}function Kv(n,r){r===0&&(r=Nr()),n=Ga(n,r),n!==null&&(xt(n,r),Ds(n))}function Wb(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Kv(n,a)}function Zb(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Kv(n,a)}function Jb(n,r){return Ai(n,r)}var Uu=null,ho=null,$f=!1,qu=!1,Kf=!1,ca=0;function Ds(n){n!==ho&&n.next===null&&(ho===null?Uu=ho=n:ho=ho.next=n),qu=!0,$f||($f=!0,tx())}function ql(n,r){if(!Kf&&qu){Kf=!0;do for(var a=!1,c=Uu;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var S=c.suspendedLanes,x=c.pingedLanes;m=(1<<31-yn(42|n)+1)-1,m&=f&~(S&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Wv(c,m))}else m=He,m=zn(c,c===at?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||wr(c,m)||(a=!0,Wv(c,m));c=c.next}while(a);Kf=!1}}function ex(){Qv()}function Qv(){qu=$f=!1;var n=0;ca!==0&&(cx()&&(n=ca),ca=0);for(var r=xn(),a=null,c=Uu;c!==null;){var f=c.next,m=Yv(c,r);m===0?(c.next=null,a===null?Uu=f:a.next=f,f===null&&(ho=a)):(a=c,(n!==0||(m&3)!==0)&&(qu=!0)),c=f}ql(n)}function Yv(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var S=31-yn(m),x=1<<S,P=f[S];P===-1?((x&a)===0||(x&c)!==0)&&(f[S]=Ra(x,r)):P<=r&&(n.expiredLanes|=x),m&=~x}if(r=at,a=He,a=zn(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===r&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Aa(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||wr(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(c!==null&&Aa(c),Wo(a)){case 2:case 8:a=Ht;break;case 32:a=zs;break;case 268435456:a=Qo;break;default:a=zs}return c=Xv.bind(null,n),a=Ai(a,c),n.callbackPriority=r,n.callbackNode=a,r}return c!==null&&c!==null&&Aa(c),n.callbackPriority=2,n.callbackNode=null,2}function Xv(n,r){if(Jt!==0&&Jt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Lu()&&n.callbackNode!==a)return null;var c=He;return c=zn(n,n===at?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Dv(n,c,r),Yv(n,xn()),n.callbackNode!=null&&n.callbackNode===a?Xv.bind(null,n):null)}function Wv(n,r){if(Lu())return null;Dv(n,r,!0)}function tx(){hx(function(){(We&6)!==0?Ai(Lt,ex):Qv()})}function Qf(){return ca===0&&(ca=Yo()),ca}function Zv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:as(""+n)}function Jv(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function nx(n,r,a,c,f){if(r==="submit"&&a&&a.stateNode===f){var m=Zv((f[Wt]||null).action),S=c.submitter;S&&(r=(r=S[Wt]||null)?Zv(r.formAction):S.getAttribute("formAction"),r!==null&&(m=r,S=null));var x=new Bi("action","action",null,c,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ca!==0){var P=S?Jv(f,S):new FormData(f);mf(a,{pending:!0,data:P,method:f.method,action:m},null,P)}}else typeof m=="function"&&(x.preventDefault(),P=S?Jv(f,S):new FormData(f),mf(a,{pending:!0,data:P,method:f.method,action:m},m,P))},currentTarget:f}]})}}for(var Yf=0;Yf<Dd.length;Yf++){var Xf=Dd[Yf],sx=Xf.toLowerCase(),rx=Xf[0].toUpperCase()+Xf.slice(1);us(sx,"on"+rx)}us(Dg,"onAnimationEnd"),us(Pg,"onAnimationIteration"),us(Og,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(Sb,"onTransitionRun"),us(bb,"onTransitionStart"),us(xb,"onTransitionCancel"),us(Mg,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function e_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var S=c.length-1;0<=S;S--){var x=c[S],P=x.instance,Y=x.currentTarget;if(x=x.listener,P!==m&&f.isPropagationStopped())break e;m=x,f.currentTarget=Y;try{m(f)}catch(ne){Au(ne)}f.currentTarget=null,m=P}else for(S=0;S<c.length;S++){if(x=c[S],P=x.instance,Y=x.currentTarget,x=x.listener,P!==m&&f.isPropagationStopped())break e;m=x,f.currentTarget=Y;try{m(f)}catch(ne){Au(ne)}f.currentTarget=null,m=P}}}}function qe(n,r){var a=r[Ci];a===void 0&&(a=r[Ci]=new Set);var c=n+"__bubble";a.has(c)||(t_(r,n,2,!1),a.add(c))}function Wf(n,r,a){var c=0;r&&(c|=4),t_(a,n,c,r)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Zf(n){if(!n[zu]){n[zu]=!0,Bc.forEach(function(a){a!=="selectionchange"&&(ix.has(a)||Wf(a,!1,n),Wf(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[zu]||(r[zu]=!0,Wf("selectionchange",!1,r))}}function t_(n,r,a,c){switch(w_(r)){case 2:var f=Dx;break;case 8:f=Px;break;default:f=dm}a=f.bind(null,r,a,n),f=void 0,!Ks||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Jf(n,r,a,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var x=c.stateNode.containerInfo;if(x===f)break;if(S===4)for(S=c.return;S!==null;){var P=S.tag;if((P===3||P===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;x!==null;){if(S=Ss(x),S===null)return;if(P=S.tag,P===5||P===6||P===26||P===27){c=m=S;continue e}x=x.parentNode}}c=c.return}Ui(function(){var Y=m,ne=rl(a),oe=[];e:{var W=kg.get(n);if(W!==void 0){var Z=Bi,Ae=n;switch(n){case"keypress":if(qi(a)===0)break e;case"keydown":case"keyup":Z=za;break;case"focusin":Ae="focus",Z=La;break;case"focusout":Ae="blur",Z=La;break;case"beforeblur":case"afterblur":Z=La;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Lr;break;case Dg:case Pg:case Og:Z=al;break;case Mg:Z=v;break;case"scroll":case"scrollend":Z=Hi;break;case"wheel":Z=N;break;case"copy":case"cut":case"paste":Z=Wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=cl;break;case"toggle":case"beforetoggle":Z=J}var xe=(r&4)!==0,nt=!xe&&(n==="scroll"||n==="scrollend"),B=xe?W!==null?W+"Capture":null:W;xe=[];for(var q=Y,G;q!==null;){var se=q;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||B===null||(se=kr(q,B),se!=null&&xe.push(Bl(q,se,G))),nt)break;q=q.return}0<xe.length&&(W=new Z(W,Ae,null,a,ne),oe.push({event:W,listeners:xe}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",W&&a!==sl&&(Ae=a.relatedTarget||a.fromElement)&&(Ss(Ae)||Ae[Fs]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ae=a.relatedTarget||a.toElement,Z=Y,Ae=Ae?Ss(Ae):null,Ae!==null&&(nt=u(Ae),xe=Ae.tag,Ae!==nt||xe!==5&&xe!==27&&xe!==6)&&(Ae=null)):(Z=null,Ae=Y),Z!==Ae)){if(xe=Ki,se="onMouseLeave",B="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(xe=cl,se="onPointerLeave",B="onPointerEnter",q="pointer"),nt=Z==null?W:jr(Z),G=Ae==null?W:jr(Ae),W=new xe(se,q+"leave",Z,a,ne),W.target=nt,W.relatedTarget=G,se=null,Ss(ne)===Y&&(xe=new xe(B,q+"enter",Ae,a,ne),xe.target=G,xe.relatedTarget=nt,se=xe),nt=se,Z&&Ae)t:{for(xe=Z,B=Ae,q=0,G=xe;G;G=fo(G))q++;for(G=0,se=B;se;se=fo(se))G++;for(;0<q-G;)xe=fo(xe),q--;for(;0<G-q;)B=fo(B),G--;for(;q--;){if(xe===B||B!==null&&xe===B.alternate)break t;xe=fo(xe),B=fo(B)}xe=null}else xe=null;Z!==null&&n_(oe,W,Z,xe,!1),Ae!==null&&nt!==null&&n_(oe,nt,Ae,xe,!0)}}e:{if(W=Y?jr(Y):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var _e=Sg;else if(_g(W))if(bg)_e=vb;else{_e=gb;var Le=pb}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Ma(Y.elementType)&&(_e=Sg):_e=yb;if(_e&&(_e=_e(n,Y))){Eg(oe,_e,a,ne);break e}Le&&Le(n,W,Y),n==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&el(W,"number",W.value)}switch(Le=Y?jr(Y):window,n){case"focusin":(_g(Le)||Le.contentEditable==="true")&&(Ba=Le,Cd=Y,ml=null);break;case"focusout":ml=Cd=Ba=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,jg(oe,a,ne);break;case"selectionchange":if(Eb)break;case"keydown":case"keyup":jg(oe,a,ne)}var Se;if(Ce)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else cs?os(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Nt&&a.locale!=="ko"&&(cs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&cs&&(Se=Qc()):(Hn=ne,it="value"in Hn?Hn.value:Hn.textContent,cs=!0)),Le=Bu(Y,Te),0<Le.length&&(Te=new ll(Te,n,null,a,ne),oe.push({event:Te,listeners:Le}),Se?Te.data=Se:(Se=ls(a),Se!==null&&(Te.data=Se)))),(Se=Xe?ul(n,a):db(n,a))&&(Te=Bu(Y,"onBeforeInput"),0<Te.length&&(Le=new ll("onBeforeInput","beforeinput",null,a,ne),oe.push({event:Le,listeners:Te}),Le.data=Se)),nx(oe,n,Y,a,ne)}e_(oe,r)})}function Bl(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Bu(n,r){for(var a=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=kr(n,a),f!=null&&c.unshift(Bl(n,f,m)),f=kr(n,r),f!=null&&c.push(Bl(n,f,m))),n.tag===3)return c;n=n.return}return[]}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function n_(n,r,a,c,f){for(var m=r._reactName,S=[];a!==null&&a!==c;){var x=a,P=x.alternate,Y=x.stateNode;if(x=x.tag,P!==null&&P===c)break;x!==5&&x!==26&&x!==27||Y===null||(P=Y,f?(Y=kr(a,m),Y!=null&&S.unshift(Bl(a,Y,P))):f||(Y=kr(a,m),Y!=null&&S.push(Bl(a,Y,P)))),a=a.return}S.length!==0&&n.push({event:r,listeners:S})}var ax=/\r\n?/g,ox=/\u0000|\uFFFD/g;function s_(n){return(typeof n=="string"?n:""+n).replace(ax,`
`).replace(ox,"")}function r_(n,r){return r=s_(r),s_(n)===r}function Fu(){}function tt(n,r,a,c,f,m){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Fn(n,""+c);break;case"className":Oi(n,"class",c);break;case"tabIndex":Oi(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Oi(n,a,c);break;case"style":nl(n,c,m);break;case"data":if(r!=="object"){Oi(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=as(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&tt(n,r,"name",f.name,f,null),tt(n,r,"formEncType",f.formEncType,f,null),tt(n,r,"formMethod",f.formMethod,f,null),tt(n,r,"formTarget",f.formTarget,f,null)):(tt(n,r,"encType",f.encType,f,null),tt(n,r,"method",f.method,f,null),tt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=as(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=Fu);break;case"onScroll":c!=null&&qe("scroll",n);break;case"onScrollEnd":c!=null&&qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=as(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":qe("beforetoggle",n),qe("toggle",n),Pi(n,"popover",c);break;case"xlinkActuate":Bn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Bn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Bn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Bn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Bn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Bn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Bn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Bn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Bn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Pi(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gc.get(a)||a,Pi(n,a,c))}}function em(n,r,a,c,f,m){switch(a){case"style":nl(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&Fn(n,""+c);break;case"onScroll":c!=null&&qe("scroll",n);break;case"onScrollEnd":c!=null&&qe("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ii.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=n[Wt]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,c,f);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Pi(n,a,c)}}}function en(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",n),qe("load",n);var c=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:tt(n,r,m,S,a,null)}}f&&tt(n,r,"srcSet",a.srcSet,a,null),c&&tt(n,r,"src",a.src,a,null);return;case"input":qe("invalid",n);var x=m=S=f=null,P=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var ne=a[c];if(ne!=null)switch(c){case"name":f=ne;break;case"type":S=ne;break;case"checked":P=ne;break;case"defaultChecked":Y=ne;break;case"value":m=ne;break;case"defaultValue":x=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:tt(n,r,c,ne,a,null)}}Jo(n,m,x,P,Y,S,f,!1),Pr(n);return;case"select":qe("invalid",n),c=S=m=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":m=x;break;case"defaultValue":S=x;break;case"multiple":c=x;default:tt(n,r,f,x,a,null)}r=m,a=S,n.multiple=!!c,r!=null?Or(n,!!c,r,!1):a!=null&&Or(n,!!c,a,!0);return;case"textarea":qe("invalid",n),m=f=c=null;for(S in a)if(a.hasOwnProperty(S)&&(x=a[S],x!=null))switch(S){case"value":c=x;break;case"defaultValue":f=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:tt(n,r,S,x,a,null)}Hc(n,c,f,m),Pr(n);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:tt(n,r,P,c,a,null)}return;case"dialog":qe("beforetoggle",n),qe("toggle",n),qe("cancel",n),qe("close",n);break;case"iframe":case"object":qe("load",n);break;case"video":case"audio":for(c=0;c<zl.length;c++)qe(zl[c],n);break;case"image":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"embed":case"source":case"link":qe("error",n),qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:tt(n,r,Y,c,a,null)}return;default:if(Ma(r)){for(ne in a)a.hasOwnProperty(ne)&&(c=a[ne],c!==void 0&&em(n,r,ne,c,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(c=a[x],c!=null&&tt(n,r,x,c,a,null))}function lx(n,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,x=null,P=null,Y=null,ne=null;for(Z in a){var oe=a[Z];if(a.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":P=oe;default:c.hasOwnProperty(Z)||tt(n,r,Z,null,c,oe)}}for(var W in c){var Z=c[W];if(oe=a[W],c.hasOwnProperty(W)&&(Z!=null||oe!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":Y=Z;break;case"defaultChecked":ne=Z;break;case"value":S=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==oe&&tt(n,r,W,Z,c,oe)}}Zo(n,S,x,P,Y,ne,m,f);return;case"select":Z=S=x=W=null;for(m in a)if(P=a[m],a.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":Z=P;default:c.hasOwnProperty(m)||tt(n,r,m,null,c,P)}for(f in c)if(m=c[f],P=a[f],c.hasOwnProperty(f)&&(m!=null||P!=null))switch(f){case"value":W=m;break;case"defaultValue":x=m;break;case"multiple":S=m;default:m!==P&&tt(n,r,f,m,c,P)}r=x,a=S,c=Z,W!=null?Or(n,!!a,W,!1):!!c!=!!a&&(r!=null?Or(n,!!a,r,!0):Or(n,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:tt(n,r,x,null,c,f)}for(S in c)if(f=c[S],m=a[S],c.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&tt(n,r,S,f,c,m)}Fc(n,W,Z);return;case"option":for(var Ae in a)if(W=a[Ae],a.hasOwnProperty(Ae)&&W!=null&&!c.hasOwnProperty(Ae))switch(Ae){case"selected":n.selected=!1;break;default:tt(n,r,Ae,null,c,W)}for(P in c)if(W=c[P],Z=a[P],c.hasOwnProperty(P)&&W!==Z&&(W!=null||Z!=null))switch(P){case"selected":n.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:tt(n,r,P,W,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)W=a[xe],a.hasOwnProperty(xe)&&W!=null&&!c.hasOwnProperty(xe)&&tt(n,r,xe,null,c,W);for(Y in c)if(W=c[Y],Z=a[Y],c.hasOwnProperty(Y)&&W!==Z&&(W!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:tt(n,r,Y,W,c,Z)}return;default:if(Ma(r)){for(var nt in a)W=a[nt],a.hasOwnProperty(nt)&&W!==void 0&&!c.hasOwnProperty(nt)&&em(n,r,nt,void 0,c,W);for(ne in c)W=c[ne],Z=a[ne],!c.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||em(n,r,ne,W,c,Z);return}}for(var B in a)W=a[B],a.hasOwnProperty(B)&&W!=null&&!c.hasOwnProperty(B)&&tt(n,r,B,null,c,W);for(oe in c)W=c[oe],Z=a[oe],!c.hasOwnProperty(oe)||W===Z||W==null&&Z==null||tt(n,r,oe,W,c,Z)}var tm=null,nm=null;function Hu(n){return n.nodeType===9?n:n.ownerDocument}function i_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function sm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function cx(){var n=window.event;return n&&n.type==="popstate"?n===rm?!1:(rm=n,!0):(rm=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,ux=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(n){return l_.resolve(null).then(n).catch(dx)}:o_;function dx(n){setTimeout(function(){throw n})}function ei(n){return n==="head"}function c_(n,r){var a=r,c=0,f=0;do{var m=a.nextSibling;if(n.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<c&&8>c){a=c;var S=n.ownerDocument;if(a&1&&Fl(S.documentElement),a&2&&Fl(S.body),a&4)for(a=S.head,Fl(a),S=a.firstChild;S;){var x=S.nextSibling,P=S.nodeName;S[Cr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=x}}if(f===0){n.removeChild(m),Wl(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=m}while(a);Wl(r)}function im(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":im(a),ja(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function fx(n,r,a,c){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Cr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ds(n.nextSibling),n===null)break}return null}function mx(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ds(n.nextSibling),n===null))return null;return n}function am(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function px(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function ds(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var om=null;function u_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function h_(n,r,a){switch(r=Hu(a),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Fl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ja(n)}var Wn=new Map,d_=new Set;function Gu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var or=de.d;de.d={f:gx,r:yx,D:vx,C:_x,L:Ex,m:Sx,X:xx,S:bx,M:Tx};function gx(){var n=or.f(),r=ku();return n||r}function yx(n){var r=bs(n);r!==null&&r.tag===5&&r.type==="form"?Dy(r):or.r(n)}var mo=typeof document>"u"?null:document;function f_(n,r,a){var c=mo;if(c&&typeof r=="string"&&r){var f=Gt(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),d_.has(f)||(d_.add(f),n={rel:n,crossOrigin:a,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),en(r,"link",n),wt(r),c.head.appendChild(r)))}}function vx(n){or.D(n),f_("dns-prefetch",n,null)}function _x(n,r){or.C(n,r),f_("preconnect",n,r)}function Ex(n,r,a){or.L(n,r,a);var c=mo;if(c&&n&&r){var f='link[rel="preload"][as="'+Gt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Gt(a.imageSizes)+'"]')):f+='[href="'+Gt(n)+'"]';var m=f;switch(r){case"style":m=po(n);break;case"script":m=go(n)}Wn.has(m)||(n=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Wn.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Hl(m))||r==="script"&&c.querySelector(Gl(m))||(r=c.createElement("link"),en(r,"link",n),wt(r),c.head.appendChild(r)))}}function Sx(n,r){or.m(n,r);var a=mo;if(a&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Gt(c)+'"][href="'+Gt(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=go(n)}if(!Wn.has(m)&&(n=_({rel:"modulepreload",href:n},r),Wn.set(m,n),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(m)))return}c=a.createElement("link"),en(c,"link",n),wt(c),a.head.appendChild(c)}}}function bx(n,r,a){or.S(n,r,a);var c=mo;if(c&&n){var f=Ir(c).hoistableStyles,m=po(n);r=r||"default";var S=f.get(m);if(!S){var x={loading:0,preload:null};if(S=c.querySelector(Hl(m)))x.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Wn.get(m))&&lm(n,a);var P=S=c.createElement("link");wt(P),en(P,"link",n),P._p=new Promise(function(Y,ne){P.onload=Y,P.onerror=ne}),P.addEventListener("load",function(){x.loading|=1}),P.addEventListener("error",function(){x.loading|=2}),x.loading|=4,$u(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:x},f.set(m,S)}}}function xx(n,r){or.X(n,r);var a=mo;if(a&&n){var c=Ir(a).hoistableScripts,f=go(n),m=c.get(f);m||(m=a.querySelector(Gl(f)),m||(n=_({src:n,async:!0},r),(r=Wn.get(f))&&cm(n,r),m=a.createElement("script"),wt(m),en(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Tx(n,r){or.M(n,r);var a=mo;if(a&&n){var c=Ir(a).hoistableScripts,f=go(n),m=c.get(f);m||(m=a.querySelector(Gl(f)),m||(n=_({src:n,async:!0,type:"module"},r),(r=Wn.get(f))&&cm(n,r),m=a.createElement("script"),wt(m),en(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function m_(n,r,a,c){var f=(f=ce.current)?Gu(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=po(a.href),a=Ir(f).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=po(a.href);var m=Ir(f).hoistableStyles,S=m.get(n);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,S),(m=f.querySelector(Hl(n)))&&!m._p&&(S.instance=m,S.state.loading=5),Wn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(n,a),m||wx(f,n,a,S.state))),r&&c===null)throw Error(i(528,""));return S}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(a),a=Ir(f).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function po(n){return'href="'+Gt(n)+'"'}function Hl(n){return'link[rel="stylesheet"]['+n+"]"}function p_(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function wx(n,r,a,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),en(r,"link",a),wt(r),n.head.appendChild(r))}function go(n){return'[src="'+Gt(n)+'"]'}function Gl(n){return"script[async]"+n}function g_(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(c)return r.instance=c,wt(c),c;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),wt(c),en(c,"style",f),$u(c,a.precedence,n),r.instance=c;case"stylesheet":f=po(a.href);var m=n.querySelector(Hl(f));if(m)return r.state.loading|=4,r.instance=m,wt(m),m;c=p_(a),(f=Wn.get(f))&&lm(c,f),m=(n.ownerDocument||n).createElement("link"),wt(m);var S=m;return S._p=new Promise(function(x,P){S.onload=x,S.onerror=P}),en(m,"link",c),r.state.loading|=4,$u(m,a.precedence,n),r.instance=m;case"script":return m=go(a.src),(f=n.querySelector(Gl(m)))?(r.instance=f,wt(f),f):(c=a,(f=Wn.get(m))&&(c=_({},a),cm(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),wt(f),en(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,$u(c,a.precedence,n));return r.instance}function $u(n,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,S=0;S<c.length;S++){var x=c[S];if(x.dataset.precedence===r)m=x;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function lm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function cm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ku=null;function y_(n,r,a){if(Ku===null){var c=new Map,f=Ku=new Map;f.set(a,c)}else f=Ku,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Cr]||m[Tt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(r)||"";S=n+S;var x=c.get(S);x?x.push(m):c.set(S,[m])}}return c}function v_(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function Nx(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function __(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var $l=null;function Ax(){}function Rx(n,r,a){if($l===null)throw Error(i(475));var c=$l;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=po(a.href),m=n.querySelector(Hl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Qu.bind(c),n.then(c,c)),r.state.loading|=4,r.instance=m,wt(m);return}m=n.ownerDocument||n,a=p_(a),(f=Wn.get(f))&&lm(a,f),m=m.createElement("link"),wt(m);var S=m;S._p=new Promise(function(x,P){S.onload=x,S.onerror=P}),en(m,"link",a),r.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=Qu.bind(c),n.addEventListener("load",r),n.addEventListener("error",r))}}function Cx(){if($l===null)throw Error(i(475));var n=$l;return n.stylesheets&&n.count===0&&um(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&um(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)um(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yu=null;function um(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yu=new Map,r.forEach(jx,n),Yu=null,Qu.call(n))}function jx(n,r){if(!(r.state.loading&4)){var a=Yu.get(n);if(a)var c=a.get(null);else{a=new Map,Yu.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}f=r.instance,S=f.getAttribute("data-precedence"),m=a.get(S)||c,m===c&&a.set(null,f),a.set(S,f),this.count++,c=Qu.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Kl={$$typeof:$,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Ix(n,r,a,c,f,m,S,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ca(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.hiddenUpdates=Ca(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function E_(n,r,a,c,f,m,S,x,P,Y,ne,oe){return n=new Ix(n,r,a,S,x,P,Y,oe),r=1,m===!0&&(r|=24),m=Dn(3,null,null,r),n.current=m,m.stateNode=n,r=Hd(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:r},Qd(m),n}function S_(n){return n?(n=$a,n):$a}function b_(n,r,a,c,f,m){f=S_(f),c.context===null?c.context=f:c.pendingContext=f,c=zr(r),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=Br(n,c,r),a!==null&&(Vn(a,n,r),xl(a,n,r))}function x_(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function hm(n,r){x_(n,r),(n=n.alternate)&&x_(n,r)}function T_(n){if(n.tag===13){var r=Ga(n,67108864);r!==null&&Vn(r,n,67108864),hm(n,67108864)}}var Xu=!0;function Dx(n,r,a,c){var f=ee.T;ee.T=null;var m=de.p;try{de.p=2,dm(n,r,a,c)}finally{de.p=m,ee.T=f}}function Px(n,r,a,c){var f=ee.T;ee.T=null;var m=de.p;try{de.p=8,dm(n,r,a,c)}finally{de.p=m,ee.T=f}}function dm(n,r,a,c){if(Xu){var f=fm(c);if(f===null)Jf(n,r,c,Wu,a),N_(n,c);else if(Mx(f,n,r,a,c))c.stopPropagation();else if(N_(n,c),r&4&&-1<Ox.indexOf(n)){for(;f!==null;){var m=bs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=ss(m.pendingLanes);if(S!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;S;){var P=1<<31-yn(S);x.entanglements[1]|=P,S&=~P}Ds(m),(We&6)===0&&(Ou=xn()+500,ql(0))}}break;case 13:x=Ga(m,2),x!==null&&Vn(x,m,2),ku(),hm(m,2)}if(m=fm(c),m===null&&Jf(n,r,c,Wu,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else Jf(n,r,c,null,a)}}function fm(n){return n=rl(n),mm(n)}var Wu=null;function mm(n){if(Wu=null,n=Ss(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=d(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Wu=n,null}function w_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lc()){case Lt:return 2;case Ht:return 8;case zs:case vd:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var pm=!1,ti=null,ni=null,si=null,Ql=new Map,Yl=new Map,ri=[],Ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N_(n,r){switch(n){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(r.pointerId)}}function Xl(n,r,a,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=bs(r),r!==null&&T_(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function Mx(n,r,a,c,f){switch(r){case"focusin":return ti=Xl(ti,n,r,a,c,f),!0;case"dragenter":return ni=Xl(ni,n,r,a,c,f),!0;case"mouseover":return si=Xl(si,n,r,a,c,f),!0;case"pointerover":var m=f.pointerId;return Ql.set(m,Xl(Ql.get(m)||null,n,r,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Yl.set(m,Xl(Yl.get(m)||null,n,r,a,c,f)),!0}return!1}function A_(n){var r=Ss(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){n.blockedOn=r,Sd(n.priority,function(){if(a.tag===13){var c=kn();c=Xo(c);var f=Ga(a,c);f!==null&&Vn(f,a,c),hm(a,c)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zu(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=fm(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);sl=c,a.target.dispatchEvent(c),sl=null}else return r=bs(a),r!==null&&T_(r),n.blockedOn=a,!1;r.shift()}return!0}function R_(n,r,a){Zu(n)&&a.delete(r)}function kx(){pm=!1,ti!==null&&Zu(ti)&&(ti=null),ni!==null&&Zu(ni)&&(ni=null),si!==null&&Zu(si)&&(si=null),Ql.forEach(R_),Yl.forEach(R_)}function Ju(n,r){n.blockedOn===r&&(n.blockedOn=null,pm||(pm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kx)))}var eh=null;function C_(n){eh!==n&&(eh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){eh===n&&(eh=null);for(var r=0;r<n.length;r+=3){var a=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(mm(c||a)===null)continue;break}var m=bs(a);m!==null&&(n.splice(r,3),r-=3,mf(m,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function Wl(n){function r(P){return Ju(P,n)}ti!==null&&Ju(ti,n),ni!==null&&Ju(ni,n),si!==null&&Ju(si,n),Ql.forEach(r),Yl.forEach(r);for(var a=0;a<ri.length;a++){var c=ri[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ri.length&&(a=ri[0],a.blockedOn===null);)A_(a),a.blockedOn===null&&ri.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],S=f[Wt]||null;if(typeof m=="function")S||C_(a);else if(S){var x=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[Wt]||null)x=S.formAction;else if(mm(f)!==null)continue}else x=S.action;typeof x=="function"?a[c+1]=x:(a.splice(c,3),c-=3),C_(a)}}}function gm(n){this._internalRoot=n}th.prototype.render=gm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,c=kn();b_(a,c,n,r,null,null)},th.prototype.unmount=gm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;b_(n.current,2,null,n,null,null),ku(),r[Fs]=null}};function th(n){this._internalRoot=n}th.prototype.unstable_scheduleHydration=function(n){if(n){var r=Bs();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ri.length&&r!==0&&r<ri[a].priority;a++);ri.splice(a,0,n),a===0&&A_(n)}};var j_=e.version;if(j_!=="19.1.1")throw Error(i(527,j_,"19.1.1"));de.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var Vx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{xr=nh.inject(Vx),an=nh}catch{}}return Jl.createRoot=function(n,r){if(!o(n))throw Error(i(299));var a=!1,c="",f=$y,m=Ky,S=Qy,x=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(x=r.unstable_transitionCallbacks)),r=E_(n,1,!1,null,null,a,c,f,m,S,x,null),n[Fs]=r.current,Zf(n),new gm(r)},Jl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(i(299));var c=!1,f="",m=$y,S=Ky,x=Qy,P=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=E_(n,1,!0,r,a??null,c,f,m,S,x,P,Y),r.context=S_(null),a=r.current,c=kn(),c=Xo(c),f=zr(c),f.callback=null,Br(a,f,c),a=c,r.current.lanes=a,xt(r,a),Ds(r),n[Fs]=r.current,Zf(n),new th(r)},Jl.version="19.1.1",Jl}var q_;function Kx(){if(q_)return _m.exports;q_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_m.exports=$x(),_m.exports}var Qx=Kx();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var z_="popstate";function Yx(s={}){function e(o,u){let{pathname:d="/",search:g="",hash:y=""}=Sa(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Vm("",{pathname:d,search:g,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let d=o.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let y=o.location.href,p=y.indexOf("#");g=p===-1?y:y.slice(0,p)}return g+"#"+(typeof u=="string"?u:mc(u))}function i(o,u){ts(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return Wx(e,t,i,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ts(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xx(){return Math.random().toString(36).substring(2,10)}function B_(s,e){return{usr:s.state,key:s.key,idx:e}}function Vm(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Sa(e):e,state:t,key:e&&e.key||i||Xx()}}function mc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Sa(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function Wx(s,e,t,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,g="POP",y=null,p=_();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function _(){return(d.state||{idx:null}).idx}function b(){g="POP";let L=_(),Q=L==null?null:L-p;p=L,y&&y({action:g,location:F.location,delta:Q})}function w(L,Q){g="PUSH";let ae=Vm(F.location,L,Q);t&&t(ae,L),p=_()+1;let $=B_(ae,p),H=F.createHref(ae);try{d.pushState($,"",H)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(H)}u&&y&&y({action:g,location:F.location,delta:1})}function C(L,Q){g="REPLACE";let ae=Vm(F.location,L,Q);t&&t(ae,L),p=_();let $=B_(ae,p),H=F.createHref(ae);d.replaceState($,"",H),u&&y&&y({action:g,location:F.location,delta:0})}function z(L){return Zx(L)}let F={get action(){return g},get location(){return s(o,d)},listen(L){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(z_,b),y=L,()=>{o.removeEventListener(z_,b),y=null}},createHref(L){return e(o,L)},createURL:z,encodeLocation(L){let Q=z(L);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:w,replace:C,go(L){return d.go(L)}};return F}function Zx(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ft(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:mc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function T0(s,e,t="/"){return Jx(s,e,t,!1)}function Jx(s,e,t,i){let o=typeof e=="string"?Sa(e):e,u=mr(o.pathname||"/",t);if(u==null)return null;let d=w0(s);eT(d);let g=null;for(let y=0;g==null&&y<d.length;++y){let p=hT(u);g=cT(d[y],p,i)}return g}function w0(s,e=[],t=[],i="",o=!1){let u=(d,g,y=o,p)=>{let _={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&y)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let b=hr([i,_.relativePath]),w=t.concat(_);d.children&&d.children.length>0&&(ft(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),w0(d.children,e,w,b,y)),!(d.path==null&&!d.index)&&e.push({path:b,score:oT(b,d.index),routesMeta:w})};return s.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))u(d,g);else for(let y of N0(d.path))u(d,g,!0,y)}),e}function N0(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=N0(i.join("/")),g=[];return g.push(...d.map(y=>y===""?u:[u,y].join("/"))),o&&g.push(...d),g.map(y=>s.startsWith("/")&&y===""?"/":y)}function eT(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:lT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var tT=/^:[\w-]+$/,nT=3,sT=2,rT=1,iT=10,aT=-2,F_=s=>s==="*";function oT(s,e){let t=s.split("/"),i=t.length;return t.some(F_)&&(i+=aT),e&&(i+=sT),t.filter(o=>!F_(o)).reduce((o,u)=>o+(tT.test(u)?nT:u===""?rT:iT),i)}function lT(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function cT(s,e,t=!1){let{routesMeta:i}=s,o={},u="/",d=[];for(let g=0;g<i.length;++g){let y=i[g],p=g===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",b=bh({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},_),w=y.route;if(!b&&p&&t&&!i[i.length-1].route.index&&(b=bh({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:hr([u,b.pathname]),pathnameBase:pT(hr([u,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(u=hr([u,b.pathnameBase]))}return d}function bh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=uT(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:b},w)=>{if(_==="*"){let z=g[w]||"";d=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const C=g[w];return b&&!C?p[_]=void 0:p[_]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:s}}function uT(s,e=!1,t=!0){ts(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,y)=>(i.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function hT(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ts(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function mr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function dT(s,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof s=="string"?Sa(s):s;return{pathname:t?t.startsWith("/")?t:fT(t,e):e,search:gT(i),hash:yT(o)}}function fT(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function xm(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mT(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mp(s){let e=mT(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function pp(s,e,t,i=!1){let o;typeof s=="string"?o=Sa(s):(o={...s},ft(!o.pathname||!o.pathname.includes("?"),xm("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),xm("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),xm("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,g;if(d==null)g=t;else{let b=e.length-1;if(!i&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}g=b>=0?e[b]:"/"}let y=dT(o,g),p=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(p||_)&&(y.pathname+="/"),y}var hr=s=>s.join("/").replace(/\/\/+/g,"/"),pT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),gT=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,yT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function vT(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var A0=["POST","PUT","PATCH","DELETE"];new Set(A0);var _T=["GET",...A0];new Set(_T);var ko=j.createContext(null);ko.displayName="DataRouter";var Fh=j.createContext(null);Fh.displayName="DataRouterState";j.createContext(!1);var R0=j.createContext({isTransitioning:!1});R0.displayName="ViewTransition";var ET=j.createContext(new Map);ET.displayName="Fetchers";var ST=j.createContext(null);ST.displayName="Await";var ys=j.createContext(null);ys.displayName="Navigation";var Tc=j.createContext(null);Tc.displayName="Location";var vs=j.createContext({outlet:null,matches:[],isDataRoute:!1});vs.displayName="Route";var gp=j.createContext(null);gp.displayName="RouteError";function bT(s,{relative:e}={}){ft(Vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=j.useContext(ys),{hash:o,pathname:u,search:d}=wc(s,{relative:e}),g=u;return t!=="/"&&(g=u==="/"?t:hr([t,u])),i.createHref({pathname:g,search:d,hash:o})}function Vo(){return j.useContext(Tc)!=null}function ns(){return ft(Vo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Tc).location}var C0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j0(s){j.useContext(ys).static||j.useLayoutEffect(s)}function vt(){let{isDataRoute:s}=j.useContext(vs);return s?MT():xT()}function xT(){ft(Vo(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(ko),{basename:e,navigator:t}=j.useContext(ys),{matches:i}=j.useContext(vs),{pathname:o}=ns(),u=JSON.stringify(mp(i)),d=j.useRef(!1);return j0(()=>{d.current=!0}),j.useCallback((y,p={})=>{if(ts(d.current,C0),!d.current)return;if(typeof y=="number"){t.go(y);return}let _=pp(y,JSON.parse(u),o,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:hr([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,u,o,s])}j.createContext(null);function yp(){let{matches:s}=j.useContext(vs),e=s[s.length-1];return e?e.params:{}}function wc(s,{relative:e}={}){let{matches:t}=j.useContext(vs),{pathname:i}=ns(),o=JSON.stringify(mp(t));return j.useMemo(()=>pp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function TT(s,e){return I0(s,e)}function I0(s,e,t,i){ft(Vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(ys),{matches:u}=j.useContext(vs),d=u[u.length-1],g=d?d.params:{},y=d?d.pathname:"/",p=d?d.pathnameBase:"/",_=d&&d.route;{let Q=_&&_.path||"";D0(y,!_||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let b=ns(),w;if(e){let Q=typeof e=="string"?Sa(e):e;ft(p==="/"||Q.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),w=Q}else w=b;let C=w.pathname||"/",z=C;if(p!=="/"){let Q=p.replace(/^\//,"").split("/");z="/"+C.replace(/^\//,"").split("/").slice(Q.length).join("/")}let F=T0(s,{pathname:z});ts(_||F!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ts(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=CT(F&&F.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:hr([p,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?p:hr([p,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),u,t,i);return e&&L?j.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function wT(){let s=OT(),e=vT(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,d)}var NT=j.createElement(wT,null),AT=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?j.createElement(vs.Provider,{value:this.props.routeContext},j.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RT({routeContext:s,match:e,children:t}){let i=j.useContext(ko);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(vs.Provider,{value:s},t)}function CT(s,e=[],t=null,i=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,u=t?.errors;if(u!=null){let y=o.findIndex(p=>p.route.id&&u?.[p.route.id]!==void 0);ft(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let d=!1,g=-1;if(t)for(let y=0;y<o.length;y++){let p=o[y];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(g=y),p.route.id){let{loaderData:_,errors:b}=t,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||w){d=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}return o.reduceRight((y,p,_)=>{let b,w=!1,C=null,z=null;t&&(b=u&&p.route.id?u[p.route.id]:void 0,C=p.route.errorElement||NT,d&&(g<0&&_===0?(D0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,z=null):g===_&&(w=!0,z=p.route.hydrateFallbackElement||null)));let F=e.concat(o.slice(0,_+1)),L=()=>{let Q;return b?Q=C:w?Q=z:p.route.Component?Q=j.createElement(p.route.Component,null):p.route.element?Q=p.route.element:Q=y,j.createElement(RT,{match:p,routeContext:{outlet:y,matches:F,isDataRoute:t!=null},children:Q})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?j.createElement(AT,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:L(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):L()},null)}function vp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jT(s){let e=j.useContext(ko);return ft(e,vp(s)),e}function IT(s){let e=j.useContext(Fh);return ft(e,vp(s)),e}function DT(s){let e=j.useContext(vs);return ft(e,vp(s)),e}function _p(s){let e=DT(s),t=e.matches[e.matches.length-1];return ft(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function PT(){return _p("useRouteId")}function OT(){let s=j.useContext(gp),e=IT("useRouteError"),t=_p("useRouteError");return s!==void 0?s:e.errors?.[t]}function MT(){let{router:s}=jT("useNavigate"),e=_p("useNavigate"),t=j.useRef(!1);return j0(()=>{t.current=!0}),j.useCallback(async(o,u={})=>{ts(t.current,C0),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var H_={};function D0(s,e,t){!e&&!H_[s]&&(H_[s]=!0,ts(!1,t))}j.memo(kT);function kT({routes:s,future:e,state:t}){return I0(s,void 0,t,e)}function P0({to:s,replace:e,state:t,relative:i}){ft(Vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(ys);ts(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(vs),{pathname:d}=ns(),g=vt(),y=pp(s,mp(u),d,i==="path"),p=JSON.stringify(y);return j.useEffect(()=>{g(JSON.parse(p),{replace:e,state:t,relative:i})},[g,p,i,e,t]),null}function St(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VT({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:u=!1}){ft(!Vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof t=="string"&&(t=Sa(t));let{pathname:y="/",search:p="",hash:_="",state:b=null,key:w="default"}=t,C=j.useMemo(()=>{let z=mr(y,d);return z==null?null:{location:{pathname:z,search:p,hash:_,state:b,key:w},navigationType:i}},[d,y,p,_,b,w,i]);return ts(C!=null,`<Router basename="${d}"> is not able to match the URL "${y}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:j.createElement(ys.Provider,{value:g},j.createElement(Tc.Provider,{children:e,value:C}))}function LT({children:s,location:e}){return TT(Lm(s),e)}function Lm(s,e=[]){let t=[];return j.Children.forEach(s,(i,o)=>{if(!j.isValidElement(i))return;let u=[...e,o];if(i.type===j.Fragment){t.push.apply(t,Lm(i.props.children,u));return}ft(i.type===St,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Lm(i.props.children,u)),t.push(d)}),t}var uh="get",hh="application/x-www-form-urlencoded";function Hh(s){return s!=null&&typeof s.tagName=="string"}function UT(s){return Hh(s)&&s.tagName.toLowerCase()==="button"}function qT(s){return Hh(s)&&s.tagName.toLowerCase()==="form"}function zT(s){return Hh(s)&&s.tagName.toLowerCase()==="input"}function BT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function FT(s,e){return s.button===0&&(!e||e==="_self")&&!BT(s)}var sh=null;function HT(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var GT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(s){return s!=null&&!GT.has(s)?(ts(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):s}function $T(s,e){let t,i,o,u,d;if(qT(s)){let g=s.getAttribute("action");i=g?mr(g,e):null,t=s.getAttribute("method")||uh,o=Tm(s.getAttribute("enctype"))||hh,u=new FormData(s)}else if(UT(s)||zT(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=s.getAttribute("formaction")||g.getAttribute("action");if(i=y?mr(y,e):null,t=s.getAttribute("formmethod")||g.getAttribute("method")||uh,o=Tm(s.getAttribute("formenctype"))||Tm(g.getAttribute("enctype"))||hh,u=new FormData(g,s),!HT()){let{name:p,type:_,value:b}=s;if(_==="image"){let w=p?`${p}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else p&&u.append(p,b)}}else{if(Hh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uh,i=null,o=hh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ep(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function KT(s,e,t){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function QT(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function XT(s,e,t){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await QT(u,t);return d.links?d.links():[]}return[]}));return ew(i.flat(1).filter(YT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function G_(s,e,t,i,o,u){let d=(y,p)=>t[p]?y.route.id!==t[p].route.id:!0,g=(y,p)=>t[p].pathname!==y.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==y.params["*"];return u==="assets"?e.filter((y,p)=>d(y,p)||g(y,p)):u==="data"?e.filter((y,p)=>{let _=i.routes[y.route.id];if(!_||!_.hasLoader)return!1;if(d(y,p)||g(y,p))return!0;if(y.route.shouldRevalidate){let b=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function WT(s,e,{includeHydrateFallback:t}={}){return ZT(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function ZT(s){return[...new Set(s)]}function JT(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function ew(s,e){let t=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(JT(o));return t.has(u)||(t.add(u),i.push({key:u,link:o})),i},[])}function O0(){let s=j.useContext(ko);return Ep(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function tw(){let s=j.useContext(Fh);return Ep(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Sp=j.createContext(void 0);Sp.displayName="FrameworkContext";function M0(){let s=j.useContext(Sp);return Ep(s,"You must render this element inside a <HydratedRouter> element"),s}function nw(s,e){let t=j.useContext(Sp),[i,o]=j.useState(!1),[u,d]=j.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:p,onMouseLeave:_,onTouchStart:b}=e,w=j.useRef(null);j.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let F=Q=>{Q.forEach(ae=>{d(ae.isIntersecting)})},L=new IntersectionObserver(F,{threshold:.5});return w.current&&L.observe(w.current),()=>{L.disconnect()}}},[s]),j.useEffect(()=>{if(i){let F=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(F)}}},[i]);let C=()=>{o(!0)},z=()=>{o(!1),d(!1)};return t?s!=="intent"?[u,w,{}]:[u,w,{onFocus:ec(g,C),onBlur:ec(y,z),onMouseEnter:ec(p,C),onMouseLeave:ec(_,z),onTouchStart:ec(b,C)}]:[!1,w,{}]}function ec(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function sw({page:s,...e}){let{router:t}=O0(),i=j.useMemo(()=>T0(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?j.createElement(iw,{page:s,matches:i,...e}):null}function rw(s){let{manifest:e,routeModules:t}=M0(),[i,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return XT(s,e,t).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,t]),i}function iw({page:s,matches:e,...t}){let i=ns(),{manifest:o,routeModules:u}=M0(),{basename:d}=O0(),{loaderData:g,matches:y}=tw(),p=j.useMemo(()=>G_(s,e,y,o,i,"data"),[s,e,y,o,i]),_=j.useMemo(()=>G_(s,e,y,o,i,"assets"),[s,e,y,o,i]),b=j.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let z=new Set,F=!1;if(e.forEach(Q=>{let ae=o.routes[Q.route.id];!ae||!ae.hasLoader||(!p.some($=>$.route.id===Q.route.id)&&Q.route.id in g&&u[Q.route.id]?.shouldRevalidate||ae.hasClientLoader?F=!0:z.add(Q.route.id))}),z.size===0)return[];let L=KT(s,d,"data");return F&&z.size>0&&L.searchParams.set("_routes",e.filter(Q=>z.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[L.pathname+L.search]},[d,g,i,o,p,e,s,u]),w=j.useMemo(()=>WT(_,o),[_,o]),C=rw(_);return j.createElement(j.Fragment,null,b.map(z=>j.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),w.map(z=>j.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),C.map(({key:z,link:F})=>j.createElement("link",{key:z,nonce:t.nonce,...F})))}function aw(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var k0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k0&&(window.__reactRouterVersion="7.8.1")}catch{}function ow({basename:s,children:e,window:t}){let i=j.useRef();i.current==null&&(i.current=Yx({window:t,v5Compat:!0}));let o=i.current,[u,d]=j.useState({action:o.action,location:o.location}),g=j.useCallback(y=>{j.startTransition(()=>d(y))},[d]);return j.useLayoutEffect(()=>o.listen(g),[o,g]),j.createElement(VT,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var V0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gh=j.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:g,target:y,to:p,preventScrollReset:_,viewTransition:b,...w},C){let{basename:z}=j.useContext(ys),F=typeof p=="string"&&V0.test(p),L,Q=!1;if(typeof p=="string"&&F&&(L=p,k0))try{let A=new URL(window.location.href),I=p.startsWith("//")?new URL(A.protocol+p):new URL(p),O=mr(I.pathname,z);I.origin===A.origin&&O!=null?p=O+I.search+I.hash:Q=!0}catch{ts(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=bT(p,{relative:o}),[$,H,M]=nw(i,w),V=hw(p,{replace:d,state:g,target:y,preventScrollReset:_,relative:o,viewTransition:b});function R(A){e&&e(A),A.defaultPrevented||V(A)}let T=j.createElement("a",{...w,...M,href:L||ae,onClick:Q||u?e:R,ref:aw(C,H),target:y,"data-discover":!F&&t==="render"?"true":void 0});return $&&!F?j.createElement(j.Fragment,null,T,j.createElement(sw,{page:ae})):T});Gh.displayName="Link";var lw=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:g,children:y,...p},_){let b=wc(d,{relative:p.relative}),w=ns(),C=j.useContext(Fh),{navigator:z,basename:F}=j.useContext(ys),L=C!=null&&gw(b)&&g===!0,Q=z.encodeLocation?z.encodeLocation(b).pathname:b.pathname,ae=w.pathname,$=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),$=$?$.toLowerCase():null,Q=Q.toLowerCase()),$&&F&&($=mr($,F)||$);const H=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let M=ae===Q||!o&&ae.startsWith(Q)&&ae.charAt(H)==="/",V=$!=null&&($===Q||!o&&$.startsWith(Q)&&$.charAt(Q.length)==="/"),R={isActive:M,isPending:V,isTransitioning:L},T=M?e:void 0,A;typeof i=="function"?A=i(R):A=[i,M?"active":null,V?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(R):u;return j.createElement(Gh,{...p,"aria-current":T,className:A,ref:_,style:I,to:d,viewTransition:g},typeof y=="function"?y(R):y)});lw.displayName="NavLink";var cw=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:u,method:d=uh,action:g,onSubmit:y,relative:p,preventScrollReset:_,viewTransition:b,...w},C)=>{let z=mw(),F=pw(g,{relative:p}),L=d.toLowerCase()==="get"?"get":"post",Q=typeof g=="string"&&V0.test(g),ae=$=>{if(y&&y($),$.defaultPrevented)return;$.preventDefault();let H=$.nativeEvent.submitter,M=H?.getAttribute("formmethod")||d;z(H||$.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:o,state:u,relative:p,preventScrollReset:_,viewTransition:b})};return j.createElement("form",{ref:C,method:L,action:F,onSubmit:i?y:ae,...w,"data-discover":!Q&&s==="render"?"true":void 0})});cw.displayName="Form";function uw(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function L0(s){let e=j.useContext(ko);return ft(e,uw(s)),e}function hw(s,{target:e,replace:t,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let g=vt(),y=ns(),p=wc(s,{relative:u});return j.useCallback(_=>{if(FT(_,e)){_.preventDefault();let b=t!==void 0?t:mc(y)===mc(p);g(s,{replace:b,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[y,g,p,t,i,e,s,o,u,d])}var dw=0,fw=()=>`__${String(++dw)}__`;function mw(){let{router:s}=L0("useSubmit"),{basename:e}=j.useContext(ys),t=PT();return j.useCallback(async(i,o={})=>{let{action:u,method:d,encType:g,formData:y,body:p}=$T(i,e);if(o.navigate===!1){let _=o.fetcherKey||fw();await s.fetch(_,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function pw(s,{relative:e}={}){let{basename:t}=j.useContext(ys),i=j.useContext(vs);ft(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...wc(s||".",{relative:e})},d=ns();if(s==null){u.search=d.search;let g=new URLSearchParams(u.search),y=g.getAll("index");if(y.some(_=>_==="")){g.delete("index"),y.filter(b=>b).forEach(b=>g.append("index",b));let _=g.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:hr([t,u.pathname])),mc(u)}function gw(s,{relative:e}={}){let t=j.useContext(R0);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=L0("useViewTransitionState"),o=wc(s,{relative:e});if(!t.isTransitioning)return!1;let u=mr(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=mr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return bh(o.pathname,d)!=null||bh(o.pathname,u)!=null}const yw=()=>{};var $_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vw=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],g=s[t++],y=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const u=s[t++],d=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,g=d?s[o+1]:0,y=o+2<s.length,p=y?s[o+2]:0,_=u>>2,b=(u&3)<<4|g>>4;let w=(g&15)<<2|p>>6,C=p&63;y||(C=64,d||(w=64)),i.push(t[_],t[b],t[w],t[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(U0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):vw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],g=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||b==null)throw new _w;const w=u<<2|g>>4;if(i.push(w),p!==64){const C=g<<4&240|p>>2;if(i.push(C),b!==64){const z=p<<6&192|b;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class _w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ew=function(s){const e=U0(s);return q0.encodeByteArray(e,!0)},xh=function(s){return Ew(s).replace(/\./g,"")},z0=function(s){try{return q0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=()=>Sw().__FIREBASE_DEFAULTS__,xw=()=>{if(typeof process>"u"||typeof $_>"u")return;const s=$_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Tw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&z0(s[1]);return e&&JSON.parse(e)},$h=()=>{try{return yw()||bw()||xw()||Tw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},B0=s=>$h()?.emulatorHosts?.[s],ww=s=>{const e=B0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},F0=()=>$h()?.config,H0=s=>$h()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[xh(JSON.stringify(t)),xh(JSON.stringify(d)),""].join(".")}const lc={};function Rw(){const s={prod:[],emulator:[]};for(const e of Object.keys(lc))lc[e]?s.emulator.push(e):s.prod.push(e);return s}function Cw(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let K_=!1;function $0(s,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||lc[s]===e||lc[s]||K_)return;lc[s]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",u=Rw().prod.length>0;function d(){const w=document.getElementById(i);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function y(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{K_=!0,d()},w}function _(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=Cw(i),C=t("text"),z=document.getElementById(C)||document.createElement("span"),F=t("learnmore"),L=document.getElementById(F)||document.createElement("a"),Q=t("preprendIcon"),ae=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const $=w.element;g($),_(L,F);const H=p();y(ae,Q),$.append(ae,z,L,H),document.body.appendChild($)}u?(z.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function Iw(){const s=$h()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Ow(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mw(){const s=pn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function kw(){return!Iw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vw(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="FirebaseError";class Sr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Uw,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?qw(u,i):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Sr(o,g,i)}}function qw(s,e){return s.replace(zw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const zw=/\{\$([^}]+)}/g;function Bw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function pa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(Q_(u)&&Q_(d)){if(!pa(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Q_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function nc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Fw(s,e){const t=new Hw(s,e);return t.subscribe.bind(t)}class Hw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Gw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=wm),o.error===void 0&&(o.error=wm),o.complete===void 0&&(o.complete=wm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gw(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(s){return s&&s._delegate?s._delegate:s}class ga{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Nw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qw(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);i===g&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Kw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kw(s){return s===ua?void 0:s}function Qw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $w(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const Xw={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},Ww=ze.INFO,Zw={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},Jw=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Zw[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=Ww,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const eN=(s,e)=>e.some(t=>s instanceof t);let Y_,X_;function tN(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nN(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,Um=new WeakMap,Q0=new WeakMap,Nm=new WeakMap,xp=new WeakMap;function sN(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(di(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&K0.set(t,s)}).catch(()=>{}),xp.set(e,s),e}function rN(s){if(Um.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Um.set(s,e)}let qm={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Um.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Q0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return di(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function iN(s){qm=s(qm)}function aN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Am(this),e,...t);return Q0.set(i,e.sort?e.sort():[e]),di(i)}:nN().includes(s)?function(...e){return s.apply(Am(this),e),di(K0.get(this))}:function(...e){return di(s.apply(Am(this),e))}}function oN(s){return typeof s=="function"?aN(s):(s instanceof IDBTransaction&&rN(s),eN(s,tN())?new Proxy(s,qm):s)}function di(s){if(s instanceof IDBRequest)return sN(s);if(Nm.has(s))return Nm.get(s);const e=oN(s);return e!==s&&(Nm.set(s,e),xp.set(e,s)),e}const Am=s=>xp.get(s);function lN(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),g=di(d);return i&&d.addEventListener("upgradeneeded",y=>{i(di(d.result),y.oldVersion,y.newVersion,di(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const cN=["get","getKey","getAll","getAllKeys","count"],uN=["put","add","delete","clear"],Rm=new Map;function W_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=uN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||cN.includes(t)))return;const u=async function(d,...g){const y=this.transaction(d,o?"readwrite":"readonly");let p=y.store;return i&&(p=p.index(g.shift())),(await Promise.all([p[t](...g),o&&y.done]))[0]};return Rm.set(e,u),u}iN(s=>({...s,get:(e,t,i)=>W_(e,t)||s.get(e,t,i),has:(e,t)=>!!W_(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dN(s){return s.getComponent()?.type==="VERSION"}const zm="@firebase/app",Z_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new bp("@firebase/app"),fN="@firebase/app-compat",mN="@firebase/analytics-compat",pN="@firebase/analytics",gN="@firebase/app-check-compat",yN="@firebase/app-check",vN="@firebase/auth",_N="@firebase/auth-compat",EN="@firebase/database",SN="@firebase/data-connect",bN="@firebase/database-compat",xN="@firebase/functions",TN="@firebase/functions-compat",wN="@firebase/installations",NN="@firebase/installations-compat",AN="@firebase/messaging",RN="@firebase/messaging-compat",CN="@firebase/performance",jN="@firebase/performance-compat",IN="@firebase/remote-config",DN="@firebase/remote-config-compat",PN="@firebase/storage",ON="@firebase/storage-compat",MN="@firebase/firestore",kN="@firebase/ai",VN="@firebase/firestore-compat",LN="firebase",UN="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",qN={[zm]:"fire-core",[fN]:"fire-core-compat",[pN]:"fire-analytics",[mN]:"fire-analytics-compat",[yN]:"fire-app-check",[gN]:"fire-app-check-compat",[vN]:"fire-auth",[_N]:"fire-auth-compat",[EN]:"fire-rtdb",[SN]:"fire-data-connect",[bN]:"fire-rtdb-compat",[xN]:"fire-fn",[TN]:"fire-fn-compat",[wN]:"fire-iid",[NN]:"fire-iid-compat",[AN]:"fire-fcm",[RN]:"fire-fcm-compat",[CN]:"fire-perf",[jN]:"fire-perf-compat",[IN]:"fire-rc",[DN]:"fire-rc-compat",[PN]:"fire-gcs",[ON]:"fire-gcs-compat",[MN]:"fire-fst",[VN]:"fire-fst-compat",[kN]:"fire-vertex","fire-js":"fire-js",[LN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,zN=new Map,Fm=new Map;function J_(s,e){try{s.container.addComponent(e)}catch(t){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ao(s){const e=s.name;if(Fm.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,s);for(const t of Th.values())J_(t,s);for(const t of zN.values())J_(t,s);return!0}function Tp(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Zn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new Nc("app","Firebase",BN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=UN;function Y0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Bm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw fi.create("bad-app-name",{appName:String(o)});if(t||(t=F0()),!t)throw fi.create("no-options");const u=Th.get(o);if(u){if(pa(t,u.options)&&pa(i,u.config))return u;throw fi.create("duplicate-app",{appName:o})}const d=new Yw(o);for(const y of Fm.values())d.addComponent(y);const g=new FN(t,i,d);return Th.set(o,g),g}function X0(s=Bm){const e=Th.get(s);if(!e&&s===Bm&&F0())return Y0();if(!e)throw fi.create("no-app",{appName:s});return e}function mi(s,e,t){let i=qN[s]??s;t&&(i+=`-${t}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(d.join(" "));return}Ao(new ga(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebase-heartbeat-database",GN=1,pc="firebase-heartbeat-store";let Cm=null;function W0(){return Cm||(Cm=lN(HN,GN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(pc)}catch(t){console.warn(t)}}}}).catch(s=>{throw fi.create("idb-open",{originalErrorMessage:s.message})})),Cm}async function $N(s){try{const t=(await W0()).transaction(pc),i=await t.objectStore(pc).get(Z0(s));return await t.done,i}catch(e){if(e instanceof Sr)pr.warn(e.message);else{const t=fi.create("idb-get",{originalErrorMessage:e?.message});pr.warn(t.message)}}}async function eE(s,e){try{const i=(await W0()).transaction(pc,"readwrite");await i.objectStore(pc).put(e,Z0(s)),await i.done}catch(t){if(t instanceof Sr)pr.warn(t.message);else{const i=fi.create("idb-set",{originalErrorMessage:t?.message});pr.warn(i.message)}}}function Z0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1024,QN=30;class YN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>QN){const o=ZN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tE(),{heartbeatsToSend:t,unsentEntries:i}=XN(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return pr.warn(e),""}}}function tE(){return new Date().toISOString().substring(0,10)}function XN(s,e=KN){const t=[];let i=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),nE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),nE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class WN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vw()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $N(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(s){return xh(JSON.stringify({version:2,heartbeats:s})).length}function ZN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(s){Ao(new ga("platform-logger",e=>new hN(e),"PRIVATE")),Ao(new ga("heartbeat",e=>new YN(e),"PRIVATE")),mi(zm,Z_,s),mi(zm,Z_,"esm2020"),mi("fire-js","")}JN("");function J0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eA=J0,e1=new Nc("auth","Firebase",J0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new bp("@firebase/auth");function tA(s,...e){wh.logLevel<=ze.WARN&&wh.warn(`Auth (${Uo}): ${s}`,...e)}function dh(s,...e){wh.logLevel<=ze.ERROR&&wh.error(`Auth (${Uo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(s,...e){throw wp(s,...e)}function Os(s,...e){return wp(s,...e)}function t1(s,e,t){const i={...eA(),[e]:t};return new Nc("auth","Firebase",i).create(e,{appName:s.name})}function dr(s){return t1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wp(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return e1.create(s,...e)}function we(s,e,...t){if(!s)throw wp(e,...t)}function lr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw dh(e),new Error(e)}function gr(s,e){s||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){return typeof self<"u"&&self.location?.href||""}function nA(){return sE()==="http:"||sE()==="https:"}function sE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nA()||Pw()||"connection"in navigator)?navigator.onLine:!0}function rA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.shortDelay=e,this.longDelay=t,gr(t>e,"Short delay should be less than long delay!"),this.isMobile=jw()||Ow()}get(){return sA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(s,e){gr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oA=new Rc(3e4,6e4);function xi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function br(s,e,t,i,o={}){return s1(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const g=Ac({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:y,...u};return Dw()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(p.credentials="include"),n1.fetch()(await r1(s,s.config.apiHost,t,g),p)})}async function s1(s,e,t){s._canInitEmulator=!1;const i={...iA,...e};try{const o=new cA(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw rh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[y,p]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw rh(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw rh(s,"user-disabled",d);const _=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw t1(s,_,p);ps(s,_)}}catch(o){if(o instanceof Sr)throw o;ps(s,"network-request-failed",{message:String(o)})}}async function Cc(s,e,t,i,o={}){const u=await br(s,e,t,i,o);return"mfaPendingCredential"in u&&ps(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function r1(s,e,t,i){const o=`${e}${t}?${i}`,u=s,d=u.config.emulator?Np(s.config,o):`${s.config.apiScheme}://${o}`;return aA.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function lA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Os(this.auth,"network-request-failed")),oA.get())})}}function rh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Os(s,e,i);return o.customData._tokenResponse=t,o}function rE(s){return s!==void 0&&s.enterprise!==void 0}class uA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hA(s,e){return br(s,"GET","/v2/recaptchaConfig",xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(s,e){return br(s,"POST","/v1/accounts:delete",e)}async function Nh(s,e){return br(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fA(s,e=!1){const t=kt(s),i=await t.getIdToken(e),o=Ap(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:cc(jm(o.auth_time)),issuedAtTime:cc(jm(o.iat)),expirationTime:cc(jm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function jm(s){return Number(s)*1e3}function Ap(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=z0(t);return o?JSON.parse(o):(dh("Failed to decode base64 JWT payload"),null)}catch(o){return dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function iE(s){const e=Ap(s);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Sr&&mA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function mA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(s){const e=s.auth,t=await s.getIdToken(),i=await Ro(s,Nh(e,{idToken:t}));we(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?i1(o.providerUserInfo):[],d=yA(s.providerData,u),g=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!d?.length,p=g?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,_)}async function gA(s){const e=kt(s);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yA(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function i1(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(s,e){const t=await s1(s,{},async()=>{const i=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await r1(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:i};return s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(y.credentials="include"),n1.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _A(s,e){return br(s,"POST","/v2/accounts:revokeToken",xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=iE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await vA(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,d=new xo;return i&&(we(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(s,e){we(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new pA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ro(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fA(this,e)}reload(){return gA(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ah(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(dr(this.auth));const e=await this.getIdToken();return await Ro(this,dA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,g=t.tenantId??void 0,y=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:C,providerData:z,stsTokenManager:F}=t;we(b&&F,e,"internal-error");const L=xo.fromJSON(this.name,F);we(typeof b=="string",e,"internal-error"),ai(i,e.name),ai(o,e.name),we(typeof w=="boolean",e,"internal-error"),we(typeof C=="boolean",e,"internal-error"),ai(u,e.name),ai(d,e.name),ai(g,e.name),ai(y,e.name),ai(p,e.name),ai(_,e.name);const Q=new fs({uid:b,auth:e,email:o,emailVerified:w,displayName:i,isAnonymous:C,photoURL:d,phoneNumber:u,tenantId:g,stsTokenManager:L,createdAt:p,lastLoginAt:_});return z&&Array.isArray(z)&&(Q.providerData=z.map(ae=>({...ae}))),y&&(Q._redirectEventId=y),Q}static async _fromIdTokenResponse(e,t,i=!1){const o=new xo;o.updateFromServerResponse(t);const u=new fs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ah(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?i1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,g=new xo;g.updateFromIdToken(i);const y=new fs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function cr(s){gr(s instanceof Function,"Expected a class definition");let e=aE.get(s);return e?(gr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,aE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}a1.type="NONE";const oE=a1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s,e,t){return`firebase:${s}:${e}:${t}`}class To{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=fh(this.userKey,o.apiKey,u),this.fullPersistenceKey=fh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nh(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new To(cr(oE),e,i);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||cr(oE);const d=fh(i,e.config.apiKey,e.name);let g=null;for(const p of t)try{const _=await p._get(d);if(_){let b;if(typeof _=="string"){const w=await Nh(e,{idToken:_}).catch(()=>{});if(!w)break;b=await fs._fromGetAccountInfoResponse(e,w,_)}else b=fs._fromJSON(e,_);p!==u&&(g=b),u=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new To(u,e,i):(u=y[0],g&&await u._set(d,g.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(d)}catch{}})),new To(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d1(e))return"Blackberry";if(f1(e))return"Webos";if(l1(e))return"Safari";if((e.includes("chrome/")||c1(e))&&!e.includes("edge/"))return"Chrome";if(h1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function o1(s=pn()){return/firefox\//i.test(s)}function l1(s=pn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c1(s=pn()){return/crios\//i.test(s)}function u1(s=pn()){return/iemobile/i.test(s)}function h1(s=pn()){return/android/i.test(s)}function d1(s=pn()){return/blackberry/i.test(s)}function f1(s=pn()){return/webos/i.test(s)}function Rp(s=pn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EA(s=pn()){return Rp(s)&&!!window.navigator?.standalone}function SA(){return Mw()&&document.documentMode===10}function m1(s=pn()){return Rp(s)||h1(s)||f1(s)||d1(s)||/windows phone/i.test(s)||u1(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s,e=[]){let t;switch(s){case"Browser":t=lE(pn());break;case"Worker":t=`${lE(pn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((d,g)=>{try{const y=e(u);d(y)}catch(y){g(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(s,e={}){return br(s,"GET","/v2/passwordPolicy",xi(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=6;class wA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??TA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new bA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await To.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nh(this,{idToken:e}),i=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&g?.user&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(dr(this));const t=e?kt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xA(this),t=new wA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await _A(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ba(s){return kt(s)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fw(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AA(s){Kh=s}function g1(s){return Kh.loadJS(s)}function RA(){return Kh.recaptchaEnterpriseScript}function CA(){return Kh.gapiScript}function jA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class IA{constructor(){this.enterprise=new DA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class DA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const PA="recaptcha-enterprise",y1="NO_RECAPTCHA";class OA{constructor(e){this.type=PA,this.auth=ba(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{hA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new uA(y);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,d(p.siteKey)}}).catch(y=>{g(y)})})}function o(u,d,g){const y=window.grecaptcha;rE(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(p=>{d(p)}).catch(()=>{d(y1)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IA().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(g=>{if(!t&&rE(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=RA();y.length!==0&&(y+=g),g1(y).then(()=>{o(g,u,d)}).catch(p=>{d(p)})}}).catch(g=>{d(g)})})}}async function uE(s,e,t,i=!1,o=!1){const u=new OA(s);let d;if(o)d=y1;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function $m(s,e,t,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await uE(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await uE(s,e,t,t==="getOobCode");return i(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(s,e){const t=Tp(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(pa(u,e??{}))return o;ps(o,"already-initialized")}return t.initialize({options:e})}function kA(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(cr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function VA(s,e,t){const i=ba(s);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=v1(e),{host:d,port:g}=LA(e),y=g===null?"":`:${g}`,p={url:`${u}//${d}${y}/`},_=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(pa(p,i.config.emulator)&&pa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Lo(d)?(G0(`${u}//${d}${y}`),$0("Auth",!0)):UA()}function v1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function LA(s){const e=v1(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:hE(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:hE(d)}}}function hE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function UA(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function qA(s,e){return br(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(s,e){return Cc(s,"POST","/v1/accounts:signInWithPassword",xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(s,e){return Cc(s,"POST","/v1/accounts:signInWithEmailLink",xi(s,e))}async function FA(s,e){return Cc(s,"POST","/v1/accounts:signInWithEmailLink",xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Cp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new gc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new gc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,t,"signInWithPassword",zA);case"emailLink":return BA(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,i,"signUpPassword",qA);case"emailLink":return FA(e,{idToken:t,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(s,e){return Cc(s,"POST","/v1/accounts:signInWithIdp",xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="http://localhost";class ya extends Cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=t;if(!i||!o)return null;const d=new ya(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,wo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:HA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ac(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $A(s){const e=tc(nc(s)).link,t=e?tc(nc(e)).deep_link_id:null,i=tc(nc(s)).deep_link_id;return(i?tc(nc(i)).link:null)||i||t||e||s}class jp{constructor(e){const t=tc(nc(e)),i=t.apiKey??null,o=t.oobCode??null,u=GA(t.mode??null);we(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$A(e);try{return new jp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return gc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=jp.parseLink(t);return we(i,"argument-error"),gc._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends _1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends jc{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ya._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return li.credential(t,i)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends jc{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends jc{constructor(){super("twitter.com")}static credential(e,t){return ya._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ui.credential(t,i)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(s,e){return Cc(s,"POST","/v1/accounts:signUp",xi(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await fs._fromIdTokenResponse(e,i,o),d=dE(i);return new va({user:u,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=dE(i);return new va({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function dE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Sr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Rh(e,t,i,o)}}function E1(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(s,u,e,i):u})}async function QA(s,e,t=!1){const i=await Ro(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return va._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(s,e,t=!1){const{auth:i}=s;if(Zn(i.app))return Promise.reject(dr(i));const o="reauthenticate";try{const u=await Ro(s,E1(i,o,e,s),t);we(u.idToken,i,"internal-error");const d=Ap(u.idToken);we(d,i,"internal-error");const{sub:g}=d;return we(s.uid===g,i,"user-mismatch"),va._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ps(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(s,e,t=!1){if(Zn(s.app))return Promise.reject(dr(s));const i="signIn",o=await E1(s,i,e),u=await va._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}async function XA(s,e){return S1(ba(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(s){const e=ba(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WA(s,e,t){if(Zn(s.app))return Promise.reject(dr(s));const i=ba(s),d=await $m(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KA).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&b1(s),y}),g=await va._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(g.user),g}function ZA(s,e,t){return Zn(s.app)?Promise.reject(dr(s)):XA(kt(s),qo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&b1(s),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(s,e){return br(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=kt(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Ro(i,JA(i.auth,u));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const g=i.providerData.find(({providerId:y})=>y==="password");g&&(g.displayName=i.displayName,g.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function t2(s,e,t,i){return kt(s).onIdTokenChanged(e,t,i)}function n2(s,e,t){return kt(s).beforeAuthStateChanged(e,t)}function s2(s,e,t,i){return kt(s).onAuthStateChanged(e,t,i)}function r2(s){return kt(s).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1e3,a2=10;class T1 extends x1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);SA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,a2):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}T1.type="LOCAL";const o2=T1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends x1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}w1.type="SESSION";const N1=w1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(d).map(async p=>p(t.origin,u)),y=await l2(g);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,y)=>{const p=Ip("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(w.data.response);break;default:clearTimeout(_),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function u2(s){Ms().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function h2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d2(){return navigator?.serviceWorker?.controller||null}function f2(){return A1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="firebaseLocalStorageDb",m2=1,jh="firebaseLocalStorage",C1="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yh(s,e){return s.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function p2(){const s=indexedDB.deleteDatabase(R1);return new Ic(s).toPromise()}function Km(){const s=indexedDB.open(R1,m2);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(jh,{keyPath:C1})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(jh)?e(i):(i.close(),await p2(),e(await Km()))})})}async function fE(s,e,t){const i=Yh(s,!0).put({[C1]:e,value:t});return new Ic(i).toPromise()}async function g2(s,e){const t=Yh(s,!1).get(e),i=await new Ic(t).toPromise();return i===void 0?null:i.value}function mE(s,e){const t=Yh(s,!0).delete(e);return new Ic(t).toPromise()}const y2=800,v2=3;class j1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Km(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>v2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(f2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h2(),!this.activeServiceWorker)return;this.sender=new c2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Km();return await fE(e,Ch,"1"),await mE(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>fE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>g2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Yh(o,!1).getAll();return new Ic(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j1.type="LOCAL";const _2=j1;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(s,e){return e?cr(e):(we(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function S2(s){return S1(s.auth,new Dp(s),s.bypassAuthState)}function b2(s){const{auth:e,user:t}=s;return we(t,e,"internal-error"),YA(t,new Dp(s),s.bypassAuthState)}async function x2(s){const{auth:e,user:t}=s;return we(t,e,"internal-error"),QA(t,new Dp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S2;case"linkViaPopup":case"linkViaRedirect":return x2;case"reauthViaPopup":case"reauthViaRedirect":return b2;default:ps(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Rc(2e3,1e4);class bo extends I1{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Os(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Os(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Os(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T2.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="pendingRedirect",mh=new Map;class N2 extends I1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const i=await A2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A2(s,e){const t=j2(e),i=C2(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function R2(s,e){mh.set(s._key(),e)}function C2(s){return cr(s._redirectPersistence)}function j2(s){return fh(w2,s.config.apiKey,s.name)}async function I2(s,e,t=!1){if(Zn(s.app))return Promise.reject(dr(s));const i=ba(s),o=E2(i,e),d=await new N2(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=600*1e3;class P2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!D1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Os(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D2&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(e))}saveEventToCache(e){this.cachedEventUids.add(pE(e)),this.lastProcessedEventTime=Date.now()}}function pE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function D1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function O2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D1(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(s,e={}){return br(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V2=/^https?/;async function L2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await M2(s);for(const t of e)try{if(U2(t))return}catch{}ps(s,"unauthorized-domain")}function U2(s){const e=Hm(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!V2.test(t))return!1;if(k2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Rc(3e4,6e4);function gE(){const s=Ms().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function z2(s){return new Promise((e,t)=>{function i(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),t(Os(s,"network-request-failed"))},timeout:q2.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)i();else{const o=jA("iframefcb");return Ms()[o]=()=>{gapi.load?i():t(Os(s,"network-request-failed"))},g1(`${CA()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw ph=null,e})}let ph=null;function B2(s){return ph=ph||z2(s),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Rc(5e3,15e3),H2="__/auth/iframe",G2="emulator/auth/iframe",$2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q2(s){const e=s.config;we(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Np(e,G2):`https://${s.config.authDomain}/${H2}`,i={apiKey:e.apiKey,appName:s.name,v:Uo},o=K2.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${Ac(i).slice(1)}`}async function Y2(s){const e=await B2(s),t=Ms().gapi;return we(t,s,"internal-error"),e.open({where:document.body,url:Q2(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$2,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Os(s,"network-request-failed"),g=Ms().setTimeout(()=>{u(d)},F2.get());function y(){Ms().clearTimeout(g),o(i)}i.ping(y).then(y,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W2=500,Z2=600,J2="_blank",eR="http://localhost";class yE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(s,e,t,i=W2,o=Z2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const y={...X2,width:i.toString(),height:o.toString(),top:u,left:d},p=pn().toLowerCase();t&&(g=c1(p)?J2:t),o1(p)&&(e=e||eR,y.scrollbars="yes");const _=Object.entries(y).reduce((w,[C,z])=>`${w}${C}=${z},`,"");if(EA(p)&&g!=="_self")return nR(e||"",g),new yE(null);const b=window.open(e||"",g,_);we(b,s,"popup-blocked");try{b.focus()}catch{}return new yE(b)}function nR(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="__/auth/handler",rR="emulator/auth/handler",iR=encodeURIComponent("fac");async function vE(s,e,t,i,o,u){we(s.config.authDomain,s,"auth-domain-config-required"),we(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Uo,eventId:o};if(e instanceof _1){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",Bw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof jc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const y=await s._getAppCheckToken(),p=y?`#${iR}=${encodeURIComponent(y)}`:"";return`${aR(s)}?${Ac(g).slice(1)}${p}`}function aR({config:s}){return s.emulator?Np(s,rR):`https://${s.authDomain}/${sR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="webStorageSupport";class oR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N1,this._completeRedirectFn=I2,this._overrideRedirectResult=R2}async _openPopup(e,t,i,o){gr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await vE(e,t,i,Hm(),o);return tR(e,u,Ip())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await vE(e,t,i,Hm(),o);return u2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(gr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Y2(e),i=new P2(e);return t.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Im,{type:Im},o=>{const u=o?.[0]?.[Im];u!==void 0&&t(!!u),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return m1()||l1()||Rp()}}const lR=oR;var _E="@firebase/auth",EE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hR(s){Ao(new ga("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=i.options;we(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p1(s)},p=new NA(i,o,u,y);return kA(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new ga("auth-internal",e=>{const t=ba(e.getProvider("auth").getImmediate());return(i=>new cR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(_E,EE,uR(s)),mi(_E,EE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=300,fR=H0("authIdTokenMaxAge")||dR;let SE=null;const mR=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>fR)return;const o=t?.token;SE!==o&&(SE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pR(s=X0()){const e=Tp(s,"auth");if(e.isInitialized())return e.getImmediate();const t=MA(s,{popupRedirectResolver:lR,persistence:[_2,o2,N1]}),i=H0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=mR(u.toString());n2(t,d,()=>d(t.currentUser)),t2(t,g=>d(g))}}const o=B0("auth");return o&&VA(t,`http://${o}`),t}function gR(){return document.getElementsByTagName("head")?.[0]??document}AA({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Os("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",gR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hR("Browser");var yR="firebase",vR="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(yR,vR,"app");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pi,P1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function A(){}A.prototype=T.prototype,R.F=T.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(I,O,U){for(var D=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)D[ue-2]=arguments[ue];return T.prototype[O].apply(I,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,T,A){A||(A=0);const I=Array(16);if(typeof T=="string")for(var O=0;O<16;++O)I[O]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(O=0;O<16;++O)I[O]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=R.g[0],A=R.g[1],O=R.g[2];let U=R.g[3],D;D=T+(U^A&(O^U))+I[0]+3614090360&4294967295,T=A+(D<<7&4294967295|D>>>25),D=U+(O^T&(A^O))+I[1]+3905402710&4294967295,U=T+(D<<12&4294967295|D>>>20),D=O+(A^U&(T^A))+I[2]+606105819&4294967295,O=U+(D<<17&4294967295|D>>>15),D=A+(T^O&(U^T))+I[3]+3250441966&4294967295,A=O+(D<<22&4294967295|D>>>10),D=T+(U^A&(O^U))+I[4]+4118548399&4294967295,T=A+(D<<7&4294967295|D>>>25),D=U+(O^T&(A^O))+I[5]+1200080426&4294967295,U=T+(D<<12&4294967295|D>>>20),D=O+(A^U&(T^A))+I[6]+2821735955&4294967295,O=U+(D<<17&4294967295|D>>>15),D=A+(T^O&(U^T))+I[7]+4249261313&4294967295,A=O+(D<<22&4294967295|D>>>10),D=T+(U^A&(O^U))+I[8]+1770035416&4294967295,T=A+(D<<7&4294967295|D>>>25),D=U+(O^T&(A^O))+I[9]+2336552879&4294967295,U=T+(D<<12&4294967295|D>>>20),D=O+(A^U&(T^A))+I[10]+4294925233&4294967295,O=U+(D<<17&4294967295|D>>>15),D=A+(T^O&(U^T))+I[11]+2304563134&4294967295,A=O+(D<<22&4294967295|D>>>10),D=T+(U^A&(O^U))+I[12]+1804603682&4294967295,T=A+(D<<7&4294967295|D>>>25),D=U+(O^T&(A^O))+I[13]+4254626195&4294967295,U=T+(D<<12&4294967295|D>>>20),D=O+(A^U&(T^A))+I[14]+2792965006&4294967295,O=U+(D<<17&4294967295|D>>>15),D=A+(T^O&(U^T))+I[15]+1236535329&4294967295,A=O+(D<<22&4294967295|D>>>10),D=T+(O^U&(A^O))+I[1]+4129170786&4294967295,T=A+(D<<5&4294967295|D>>>27),D=U+(A^O&(T^A))+I[6]+3225465664&4294967295,U=T+(D<<9&4294967295|D>>>23),D=O+(T^A&(U^T))+I[11]+643717713&4294967295,O=U+(D<<14&4294967295|D>>>18),D=A+(U^T&(O^U))+I[0]+3921069994&4294967295,A=O+(D<<20&4294967295|D>>>12),D=T+(O^U&(A^O))+I[5]+3593408605&4294967295,T=A+(D<<5&4294967295|D>>>27),D=U+(A^O&(T^A))+I[10]+38016083&4294967295,U=T+(D<<9&4294967295|D>>>23),D=O+(T^A&(U^T))+I[15]+3634488961&4294967295,O=U+(D<<14&4294967295|D>>>18),D=A+(U^T&(O^U))+I[4]+3889429448&4294967295,A=O+(D<<20&4294967295|D>>>12),D=T+(O^U&(A^O))+I[9]+568446438&4294967295,T=A+(D<<5&4294967295|D>>>27),D=U+(A^O&(T^A))+I[14]+3275163606&4294967295,U=T+(D<<9&4294967295|D>>>23),D=O+(T^A&(U^T))+I[3]+4107603335&4294967295,O=U+(D<<14&4294967295|D>>>18),D=A+(U^T&(O^U))+I[8]+1163531501&4294967295,A=O+(D<<20&4294967295|D>>>12),D=T+(O^U&(A^O))+I[13]+2850285829&4294967295,T=A+(D<<5&4294967295|D>>>27),D=U+(A^O&(T^A))+I[2]+4243563512&4294967295,U=T+(D<<9&4294967295|D>>>23),D=O+(T^A&(U^T))+I[7]+1735328473&4294967295,O=U+(D<<14&4294967295|D>>>18),D=A+(U^T&(O^U))+I[12]+2368359562&4294967295,A=O+(D<<20&4294967295|D>>>12),D=T+(A^O^U)+I[5]+4294588738&4294967295,T=A+(D<<4&4294967295|D>>>28),D=U+(T^A^O)+I[8]+2272392833&4294967295,U=T+(D<<11&4294967295|D>>>21),D=O+(U^T^A)+I[11]+1839030562&4294967295,O=U+(D<<16&4294967295|D>>>16),D=A+(O^U^T)+I[14]+4259657740&4294967295,A=O+(D<<23&4294967295|D>>>9),D=T+(A^O^U)+I[1]+2763975236&4294967295,T=A+(D<<4&4294967295|D>>>28),D=U+(T^A^O)+I[4]+1272893353&4294967295,U=T+(D<<11&4294967295|D>>>21),D=O+(U^T^A)+I[7]+4139469664&4294967295,O=U+(D<<16&4294967295|D>>>16),D=A+(O^U^T)+I[10]+3200236656&4294967295,A=O+(D<<23&4294967295|D>>>9),D=T+(A^O^U)+I[13]+681279174&4294967295,T=A+(D<<4&4294967295|D>>>28),D=U+(T^A^O)+I[0]+3936430074&4294967295,U=T+(D<<11&4294967295|D>>>21),D=O+(U^T^A)+I[3]+3572445317&4294967295,O=U+(D<<16&4294967295|D>>>16),D=A+(O^U^T)+I[6]+76029189&4294967295,A=O+(D<<23&4294967295|D>>>9),D=T+(A^O^U)+I[9]+3654602809&4294967295,T=A+(D<<4&4294967295|D>>>28),D=U+(T^A^O)+I[12]+3873151461&4294967295,U=T+(D<<11&4294967295|D>>>21),D=O+(U^T^A)+I[15]+530742520&4294967295,O=U+(D<<16&4294967295|D>>>16),D=A+(O^U^T)+I[2]+3299628645&4294967295,A=O+(D<<23&4294967295|D>>>9),D=T+(O^(A|~U))+I[0]+4096336452&4294967295,T=A+(D<<6&4294967295|D>>>26),D=U+(A^(T|~O))+I[7]+1126891415&4294967295,U=T+(D<<10&4294967295|D>>>22),D=O+(T^(U|~A))+I[14]+2878612391&4294967295,O=U+(D<<15&4294967295|D>>>17),D=A+(U^(O|~T))+I[5]+4237533241&4294967295,A=O+(D<<21&4294967295|D>>>11),D=T+(O^(A|~U))+I[12]+1700485571&4294967295,T=A+(D<<6&4294967295|D>>>26),D=U+(A^(T|~O))+I[3]+2399980690&4294967295,U=T+(D<<10&4294967295|D>>>22),D=O+(T^(U|~A))+I[10]+4293915773&4294967295,O=U+(D<<15&4294967295|D>>>17),D=A+(U^(O|~T))+I[1]+2240044497&4294967295,A=O+(D<<21&4294967295|D>>>11),D=T+(O^(A|~U))+I[8]+1873313359&4294967295,T=A+(D<<6&4294967295|D>>>26),D=U+(A^(T|~O))+I[15]+4264355552&4294967295,U=T+(D<<10&4294967295|D>>>22),D=O+(T^(U|~A))+I[6]+2734768916&4294967295,O=U+(D<<15&4294967295|D>>>17),D=A+(U^(O|~T))+I[13]+1309151649&4294967295,A=O+(D<<21&4294967295|D>>>11),D=T+(O^(A|~U))+I[4]+4149444226&4294967295,T=A+(D<<6&4294967295|D>>>26),D=U+(A^(T|~O))+I[11]+3174756917&4294967295,U=T+(D<<10&4294967295|D>>>22),D=O+(T^(U|~A))+I[2]+718787259&4294967295,O=U+(D<<15&4294967295|D>>>17),D=A+(U^(O|~T))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+U&4294967295}i.prototype.v=function(R,T){T===void 0&&(T=R.length);const A=T-this.blockSize,I=this.C;let O=this.h,U=0;for(;U<T;){if(O==0)for(;U<=A;)o(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<T;)if(I[O++]=R.charCodeAt(U++),O==this.blockSize){o(this,I),O=0;break}}else for(;U<T;)if(I[O++]=R[U++],O==this.blockSize){o(this,I),O=0;break}}this.h=O,this.o+=T},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,A=0;A<4;++A)for(let I=0;I<32;I+=8)R[T++]=this.g[A]>>>I&255;return R};function u(R,T){var A=g;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=T(R)}function d(R,T){this.h=T;const A=[];let I=!0;for(let O=R.length-1;O>=0;O--){const U=R[O]|0;I&&U==T||(A[O]=U,I=!1)}this.g=A}var g={};function y(R){return-128<=R&&R<128?u(R,function(T){return new d([T|0],T<0?-1:0)}):new d([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return b;if(R<0)return L(p(-R));const T=[];let A=1;for(let I=0;R>=A;I++)T[I]=R/A|0,A*=4294967296;return new d(T,0)}function _(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return L(_(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(T,8));let I=b;for(let U=0;U<R.length;U+=8){var O=Math.min(8,R.length-U);const D=parseInt(R.substring(U,U+O),T);O<8?(O=p(Math.pow(T,O)),I=I.j(O).add(p(D))):(I=I.j(A),I=I.add(p(D)))}return I}var b=y(0),w=y(1),C=y(16777216);s=d.prototype,s.m=function(){if(F(this))return-L(this).m();let R=0,T=1;for(let A=0;A<this.g.length;A++){const I=this.i(A);R+=(I>=0?I:4294967296+I)*T,T*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(z(this))return"0";if(F(this))return"-"+L(this).toString(R);const T=p(Math.pow(R,6));var A=this;let I="";for(;;){const O=H(A,T).g;A=Q(A,O.j(T));let U=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=O,z(A))return U+I;for(;U.length<6;)U="0"+U;I=U+I}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function z(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function F(R){return R.h==-1}s.l=function(R){return R=Q(this,R),F(R)?-1:z(R)?0:1};function L(R){const T=R.g.length,A=[];for(let I=0;I<T;I++)A[I]=~R.g[I];return new d(A,~R.h).add(w)}s.abs=function(){return F(this)?L(this):this},s.add=function(R){const T=Math.max(this.g.length,R.g.length),A=[];let I=0;for(let O=0;O<=T;O++){let U=I+(this.i(O)&65535)+(R.i(O)&65535),D=(U>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);I=D>>>16,U&=65535,D&=65535,A[O]=D<<16|U}return new d(A,A[A.length-1]&-2147483648?-1:0)};function Q(R,T){return R.add(L(T))}s.j=function(R){if(z(this)||z(R))return b;if(F(this))return F(R)?L(this).j(L(R)):L(L(this).j(R));if(F(R))return L(this.j(L(R)));if(this.l(C)<0&&R.l(C)<0)return p(this.m()*R.m());const T=this.g.length+R.g.length,A=[];for(var I=0;I<2*T;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(let O=0;O<R.g.length;O++){const U=this.i(I)>>>16,D=this.i(I)&65535,ue=R.i(O)>>>16,De=R.i(O)&65535;A[2*I+2*O]+=D*De,ae(A,2*I+2*O),A[2*I+2*O+1]+=U*De,ae(A,2*I+2*O+1),A[2*I+2*O+1]+=D*ue,ae(A,2*I+2*O+1),A[2*I+2*O+2]+=U*ue,ae(A,2*I+2*O+2)}for(R=0;R<T;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=T;R<2*T;R++)A[R]=0;return new d(A,0)};function ae(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function $(R,T){this.g=R,this.h=T}function H(R,T){if(z(T))throw Error("division by zero");if(z(R))return new $(b,b);if(F(R))return T=H(L(R),T),new $(L(T.g),L(T.h));if(F(T))return T=H(R,L(T)),new $(L(T.g),T.h);if(R.g.length>30){if(F(R)||F(T))throw Error("slowDivide_ only works with positive integers.");for(var A=w,I=T;I.l(R)<=0;)A=M(A),I=M(I);var O=V(A,1),U=V(I,1);for(I=V(I,2),A=V(A,2);!z(I);){var D=U.add(I);D.l(R)<=0&&(O=O.add(A),U=D),I=V(I,1),A=V(A,1)}return T=Q(R,O.j(T)),new $(O,T)}for(O=b;R.l(T)>=0;){for(A=Math.max(1,Math.floor(R.m()/T.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),U=p(A),D=U.j(T);F(D)||D.l(R)>0;)A-=I,U=p(A),D=U.j(T);z(U)&&(U=w),O=O.add(U),R=Q(R,D)}return new $(O,R)}s.B=function(R){return H(this,R).h},s.and=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let I=0;I<T;I++)A[I]=this.i(I)&R.i(I);return new d(A,this.h&R.h)},s.or=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let I=0;I<T;I++)A[I]=this.i(I)|R.i(I);return new d(A,this.h|R.h)},s.xor=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let I=0;I<T;I++)A[I]=this.i(I)^R.i(I);return new d(A,this.h^R.h)};function M(R){const T=R.g.length+1,A=[];for(let I=0;I<T;I++)A[I]=R.i(I)<<1|R.i(I-1)>>>31;return new d(A,R.h)}function V(R,T){const A=T>>5;T%=32;const I=R.g.length-A,O=[];for(let U=0;U<I;U++)O[U]=T>0?R.i(U+A)>>>T|R.i(U+A+1)<<32-T:R.i(U+A);return new d(O,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,P1=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,pi=d}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O1,sc,M1,gh,Qm,k1,V1,L1;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function o(h,v){if(v)e:{var E=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var K=h[N];if(!(K in E))break e;E=E[K]}h=h[h.length-1],N=E[h],v=v(N),v!=N&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&E.push([N,v[N]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,E){return h.call.apply(h.bind,arguments)}function p(h,v,E){return p=y,p.apply(null,arguments)}function _(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function b(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(N,K,J){for(var he=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)he[Ce-2]=arguments[Ce];return v.prototype[K].apply(N,he)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const v=h.length;if(v>0){const E=Array(v);for(let N=0;N<v;N++)E[N]=h[N];return E}return[]}function z(h,v){for(let N=1;N<arguments.length;N++){const K=arguments[N];var E=typeof K;if(E=E!="object"?E:K?Array.isArray(K)?"array":E:"null",E=="array"||E=="object"&&typeof K.length=="number"){E=h.length||0;const J=K.length||0;h.length=E+J;for(let he=0;he<J;he++)h[E+he]=K[he]}else h.push(K)}}class F{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){d.setTimeout(()=>{throw h},0)}function Q(){var h=R;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ae{constructor(){this.h=this.g=null}add(v,E){const N=$.get();N.set(v,E),this.h?this.h.next=N:this.g=N,this.h=N}}var $=new F(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let M,V=!1,R=new ae,T=()=>{const h=Promise.resolve(void 0);M=()=>{h.then(A)}};function A(){for(var h;h=Q();){try{h.h.call(h.g)}catch(E){L(E)}var v=$;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}V=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ue(h,v){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(ue,O),ue.prototype.init=function(h,v){const E=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),ee=0;function de(h,v,E,N,K){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!N,this.ha=K,this.key=++ee,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,v,E){for(const N in h)v.call(E,h[N],N,h)}function k(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function ie(h){const v={};for(const E in h)v[E]=h[E];return v}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,v){let E,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(E in N)h[E]=N[E];for(let J=0;J<fe.length;J++)E=fe[J],Object.prototype.hasOwnProperty.call(N,E)&&(h[E]=N[E])}}function te(h){this.src=h,this.g={},this.h=0}te.prototype.add=function(h,v,E,N,K){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const he=ce(h,v,N,K);return he>-1?(v=h[he],E||(v.fa=!1)):(v=new de(v,this.src,J,!!N,K),v.fa=E,h.push(v)),v};function pe(h,v){const E=v.type;if(E in h.g){var N=h.g[E],K=Array.prototype.indexOf.call(N,v,void 0),J;(J=K>=0)&&Array.prototype.splice.call(N,K,1),J&&(X(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ce(h,v,E,N){for(let K=0;K<h.length;++K){const J=h[K];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==N)return K}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Pe={};function gn(h,v,E,N,K){if(Array.isArray(v)){for(let J=0;J<v.length;J++)gn(h,v[J],E,N,K);return null}return E=Lc(E),h&&h[De]?h.J(v,E,g(N)?!!N.capture:!1,K):$o(h,v,E,!1,N,K)}function $o(h,v,E,N,K,J){if(!v)throw Error("Invalid event type");const he=g(K)?!!K.capture:!!K;let Ce=Ko(h);if(Ce||(h[Me]=Ce=new te(h)),E=Ce.add(v,E,N,he,J),E.proxy)return E;if(N=wa(),E.proxy=N,N.src=h,N.listener=E,h.addEventListener)U||(K=he),K===void 0&&(K=!1),h.addEventListener(v.toString(),N,K);else if(h.attachEvent)h.attachEvent(Aa(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function wa(){function h(E){return v.call(h.src,h.listener,E)}const v=yd;return h}function Na(h,v,E,N,K){if(Array.isArray(v))for(var J=0;J<v.length;J++)Na(h,v[J],E,N,K);else N=g(N)?!!N.capture:!!N,E=Lc(E),h&&h[De]?(h=h.i,J=String(v).toString(),J in h.g&&(v=h.g[J],E=ce(v,E,N,K),E>-1&&(X(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[J],h.h--)))):h&&(h=Ko(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ce(v,E,N,K)),(E=h>-1?v[h]:null)&&Ai(E))}function Ai(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[De])pe(v.i,h);else{var E=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(E,N,h.capture):v.detachEvent?v.detachEvent(Aa(E),N):v.addListener&&v.removeListener&&v.removeListener(N),(E=Ko(v))?(pe(E,h),E.h==0&&(E.src=null,v[Me]=null)):X(h)}}}function Aa(h){return h in Pe?Pe[h]:Pe[h]="on"+h}function yd(h,v){if(h.da)h=!0;else{v=new ue(v,this);const E=h.listener,N=h.ha||h.src;h.fa&&Ai(h),h=E.call(N,v)}return h}function Ko(h){return h=h[Me],h instanceof te?h:null}var xn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lc(h){return typeof h=="function"?h:(h[xn]||(h[xn]=function(v){return h.handleEvent(v)}),h[xn])}function Lt(){I.call(this),this.i=new te(this),this.M=this,this.G=null}b(Lt,I),Lt.prototype[De]=!0,Lt.prototype.removeEventListener=function(h,v,E,N){Na(this,h,v,E,N)};function Ht(h,v){var E,N=h.G;if(N)for(E=[];N;N=N.G)E.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new O(v,h);else if(v instanceof O)v.target=v.target||h;else{var K=v;v=new O(N,h),me(v,K)}K=!0;let J,he;if(E)for(he=E.length-1;he>=0;he--)J=v.g=E[he],K=zs(J,N,!0,v)&&K;if(J=v.g=h,K=zs(J,N,!0,v)&&K,K=zs(J,N,!1,v)&&K,E)for(he=0;he<E.length;he++)J=v.g=E[he],K=zs(J,N,!1,v)&&K}Lt.prototype.N=function(){if(Lt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let N=0;N<E.length;N++)X(E[N]);delete h.g[v],h.h--}}this.G=null},Lt.prototype.J=function(h,v,E,N){return this.i.add(String(h),v,!1,E,N)},Lt.prototype.K=function(h,v,E,N){return this.i.add(String(h),v,!0,E,N)};function zs(h,v,E,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let K=!0;for(let J=0;J<v.length;++J){const he=v[J];if(he&&!he.da&&he.capture==E){const Ce=he.listener,ct=he.ha||he.src;he.fa&&pe(h.i,he),K=Ce.call(ct,N)!==!1&&K}}return K&&!N.defaultPrevented}function vd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Qo(h){h.g=vd(()=>{h.g=null,h.i&&(h.i=!1,Qo(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class _d extends I{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(h){I.call(this),this.h=h,this.g={}}b(Ri,I);var xr=[];function an(h){Ee(h.g,function(v,E){this.g.hasOwnProperty(E)&&Ai(v)},h),h.g={}}Ri.prototype.N=function(){Ri.Z.N.call(this),an(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=d.JSON.stringify,yn=d.JSON.parse,Ed=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Uc(){}function qc(){}var _s={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tr(){O.call(this,"d")}b(Tr,O);function ss(){O.call(this,"c")}b(ss,O);var zn={},wr=null;function Ra(){return wr=wr||new Lt}zn.Ia="serverreachability";function Yo(h){O.call(this,zn.Ia,h)}b(Yo,O);function Nr(h){const v=Ra();Ht(v,new Yo(v))}zn.STAT_EVENT="statevent";function Ca(h,v){O.call(this,zn.STAT_EVENT,h),this.stat=v}b(Ca,O);function xt(h){const v=Ra();Ht(v,new Ca(v,h))}zn.Ja="timingevent";function zc(h,v){O.call(this,zn.Ja,h),this.size=v}b(zc,O);function Ar(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Rr(){this.g=!0}Rr.prototype.ua=function(){this.g=!1};function Xo(h,v,E,N,K,J){h.info(function(){if(h.g)if(J){var he="",Ce=J.split("&");for(let Xe=0;Xe<Ce.length;Xe++){var ct=Ce[Xe].split("=");if(ct.length>1){const Nt=ct[0];ct=ct[1];const jn=Nt.split("_");he=jn.length>=2&&jn[1]=="type"?he+(Nt+"="+ct+"&"):he+(Nt+"=redacted&")}}}else he=null;else he=J;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+v+`
`+E+`
`+he})}function Wo(h,v,E,N,K,J,he){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+v+`
`+E+`
`+J+" "+he})}function Bs(h,v,E,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Es(h,E)+(N?" "+N:"")})}function Sd(h,v){h.info(function(){return"TIMEOUT: "+v})}Rr.prototype.info=function(){};function Es(h,v){if(!h.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var N=E[1];if(Array.isArray(N)&&!(N.length<1)){var K=N[0];if(K!="noop"&&K!="stop"&&K!="close")for(let he=1;he<N.length;he++)N[he]=""}}}}return qn(J)}catch{return v}}var Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fs;function Ci(){}b(Ci,Uc),Ci.prototype.g=function(){return new XMLHttpRequest},Fs=new Ci;function ji(h){return encodeURIComponent(String(h))}function bd(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function rs(h,v,E,N){this.j=h,this.i=v,this.l=E,this.S=N||1,this.V=new Ri(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cr}function Cr(){this.i=null,this.g="",this.h=!1}var ja={},Ss={};function bs(h,v,E){h.M=1,h.A=Gs(mt(v)),h.u=E,h.R=!0,jr(h,null)}function jr(h,v){h.F=Date.now(),Ii(h),h.B=mt(h.A);var E=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Gc(E.i,"t",N),h.C=0,E=h.j.L,h.h=new Cr,h.g=qa(h.j,E?v:null,!h.u),h.P>0&&(h.O=new _d(p(h.Y,h,h.g),h.P)),v=h.V,E=h.g,N=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(xr[0]=K.toString()),K=xr);for(let J=0;J<K.length;J++){const he=gn(E,K[J],N||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=h.J?ie(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Nr(),Xo(h.i,h.v,h.B,h.l,h.S,h.u)}rs.prototype.ba=function(h){h=h.target;const v=this.O;v&&on(h)==3?v.j():this.Y(h)},rs.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=on(this.g),ct=this.g.ya(),Xe=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Bi(this.g)))){this.K||Ce!=4||ct==7||(ct==8||Xe<=0?Nr(3):Nr(2)),Ts(this);var v=this.g.ca();this.X=v;var E=Ir(this);if(this.o=v==200,Wo(this.i,this.v,this.B,this.l,this.S,Ce,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,K=this.g;if((N=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var J=N;break t}}J=null}if(h=J)Bs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ia(this,h);else{this.o=!1,this.m=3,xt(12),ws(this),Di(this);break e}}if(this.R){h=!0;let Nt;for(;!this.K&&this.C<E.length;)if(Nt=Bc(this,E),Nt==Ss){Ce==4&&(this.m=4,xt(14),h=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==ja){this.m=4,xt(15),Bs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Bs(this.i,this.l,Nt,null),Ia(this,Nt);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)Bs(this.i,this.l,E,"[Invalid Chunked Response]"),ws(this),Di(this);else if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ol(he),he.P=!0,xt(11))}}else Bs(this.i,this.l,E,null),Ia(this,E);Ce==4&&ws(this),this.o&&!this.K&&(Ce==4?ll(this.j,this):(this.o=!1,Ii(this)))}else Fi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),ws(this),Di(this)}}}catch{}finally{}};function Ir(h){if(!wt(h))return h.g.la();const v=Bi(h.g);if(v==="")return"";let E="";const N=v.length,K=on(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ws(h),Di(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<N;J++)h.h.h=!0,E+=h.h.i.decode(v[J],{stream:!(K&&J==N-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function wt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bc(h,v){var E=h.C,N=v.indexOf(`
`,E);return N==-1?Ss:(E=Number(v.substring(E,N)),isNaN(E)?ja:(N+=1,N+E>v.length?Ss:(v=v.slice(N,N+E),h.C=N+E,v)))}rs.prototype.cancel=function(){this.K=!0,ws(this)};function Ii(h){h.T=Date.now()+h.H,xs(h,h.H)}function xs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ar(p(h.aa,h),v)}function Ts(h){h.D&&(d.clearTimeout(h.D),h.D=null)}rs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sd(this.i,this.B),this.M!=2&&(Nr(),xt(17)),ws(this),this.m=2,Di(this)):xs(this,this.T-h)};function Di(h){h.j.I==0||h.K||ll(h.j,h)}function ws(h){Ts(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,an(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Ia(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||Mi(E.h,h))){if(!h.L&&Mi(E.h,h)&&E.I==3){try{var N=E.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Ua(E),Ns(E);else break e;al(E),xt(18)}}else E.xa=K[1],0<E.xa-E.K&&K[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ar(p(E.Va,E),6e3));Bn(E.h)<=1&&E.ta&&(E.ta=void 0)}else Qs(E,11)}else if((h.L||E.g==h)&&Ua(E),!D(v))for(K=E.Ba.g.parse(v),v=0;v<K.length;v++){let Xe=K[v];const Nt=Xe[0];if(!(Nt<=E.K))if(E.K=Nt,Xe=Xe[1],E.I==2)if(Xe[0]=="c"){E.M=Xe[1],E.ba=Xe[2];const jn=Xe[3];jn!=null&&(E.ka=jn,E.j.info("VER="+E.ka));const As=Xe[4];As!=null&&(E.za=As,E.j.info("SVER="+E.za));const os=Xe[5];os!=null&&typeof os=="number"&&os>0&&(N=1.5*os,E.O=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const ls=h.g;if(ls){const cs=ls.g?ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var J=N.h;J.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Da(J,J.h),J.h=null))}if(N.G){const ul=ls.g?ls.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(N.wa=ul,Je(N.J,N.G,ul))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),N=E;var he=h;if(N.na=eu(N,N.L?N.ba:null,N.W),he.L){Hs(N.h,he);var Ce=he,ct=N.O;ct&&(Ce.H=ct),Ce.D&&(Ts(Ce),Ii(Ce)),N.g=he}else Xc(N);E.i.length>0&&Ki(E)}else Xe[0]!="stop"&&Xe[0]!="close"||Qs(E,7);else E.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Qs(E,7):Gi(E):Xe[0]!="noop"&&E.l&&E.l.qa(Xe),E.A=0)}}Nr(4)}catch{}}var xd=class{constructor(h,v){this.g=h,this.map=v}};function Pi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Bn(h){return h.h?1:h.g?h.g.size:0}function Mi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Da(h,v){h.g?h.g.add(v):h.h=v}function Hs(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Pi.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return C(h.i)}var Oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Td(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const N=h[E].indexOf("=");let K,J=null;N>=0?(K=h[E].substring(0,N),J=h[E].substring(N+1)):K=h[E],v(K,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function is(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof is?(this.l=h.l,Dr(this,h.j),this.o=h.o,this.g=h.g,ki(this,h.u),this.h=h.h,Pr(this,$c(h.i)),this.m=h.m):h&&(v=String(h).match(Oa))?(this.l=!1,Dr(this,v[1]||"",!0),this.o=Vi(v[2]||""),this.g=Vi(v[3]||"",!0),ki(this,v[4]),this.h=Vi(v[5]||"",!0),Pr(this,v[6]||"",!0),this.m=Vi(v[7]||"")):(this.l=!1,this.i=new Fn(null,this.l))}is.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Gt(v,Jo,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Gt(v,Jo,!0),"@"),h.push(ji(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Gt(E,E.charAt(0)=="/"?Or:el,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Gt(E,Hc)),h.join("")},is.prototype.resolve=function(h){const v=mt(this);let E=!!h.j;E?Dr(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var N=h.h;if(E)ki(v,h.u);else if(E=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var K=v.h.lastIndexOf("/");K!=-1&&(N=v.h.slice(0,K+1)+N)}if(K=N,K==".."||K==".")N="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){N=K.lastIndexOf("/",0)==0,K=K.split("/");const J=[];for(let he=0;he<K.length;){const Ce=K[he++];Ce=="."?N&&he==K.length&&J.push(""):Ce==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),N&&he==K.length&&J.push("")):(J.push(Ce),N=!0)}N=J.join("/")}else N=K}return E?v.h=N:E=h.i.toString()!=="",E?Pr(v,$c(h.i)):E=!!h.m,E&&(v.m=h.m),v};function mt(h){return new is(h)}function Dr(h,v,E){h.j=E?Vi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ki(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Pr(h,v,E){v instanceof Fn?(h.i=v,sl(h.i,h.l)):(E||(v=Gt(v,Fc)),h.i=new Fn(v,h.l))}function Je(h,v,E){h.i.set(v,E)}function Gs(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Vi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gt(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Zo),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zo(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,Or=/[#\?]/g,Fc=/[#\?@]/g,Hc=/#/g;function Fn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function $s(h){h.g||(h.g=new Map,h.h=0,h.i&&Td(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}s=Fn.prototype,s.add=function(h,v){$s(this),this.i=null,h=as(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function tl(h,v){$s(h),v=as(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function nl(h,v){return $s(h),v=as(h,v),h.g.has(v)}s.forEach=function(h,v){$s(this),this.g.forEach(function(E,N){E.forEach(function(K){h.call(v,K,N,this)},this)},this)};function Ma(h,v){$s(h);let E=[];if(typeof v=="string")nl(h,v)&&(E=E.concat(h.g.get(as(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}s.set=function(h,v){return $s(this),this.i=null,h=as(this,h),nl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Ma(this,h),h.length>0?String(h[0]):v):v};function Gc(h,v,E){tl(h,v),E.length>0&&(h.i=null,h.g.set(as(h,v),C(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var E=v[N];const K=ji(E);E=Ma(this,E);for(let J=0;J<E.length;J++){let he=K;E[J]!==""&&(he+="="+ji(E[J])),h.push(he)}}return this.i=h.join("&")};function $c(h){const v=new Fn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function as(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function sl(h,v){v&&!h.j&&($s(h),h.i=null,h.g.forEach(function(E,N){const K=N.toLowerCase();N!=K&&(tl(this,N),Gc(this,K,E))},h)),h.j=v}function rl(h,v){const E=new Rr;if(d.Image){const N=new Image;N.onload=_(vn,E,"TestLoadImage: loaded",!0,v,N),N.onerror=_(vn,E,"TestLoadImage: error",!1,v,N),N.onabort=_(vn,E,"TestLoadImage: abort",!1,v,N),N.ontimeout=_(vn,E,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function Mr(h,v){const E=new Rr,N=new AbortController,K=setTimeout(()=>{N.abort(),vn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(J=>{clearTimeout(K),J.ok?vn(E,"TestPingServer: ok",!0,v):vn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),vn(E,"TestPingServer: error",!1,v)})}function vn(h,v,E,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(E)}catch{}}function Kc(){this.g=new Ed}function Li(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Li,Uc),Li.prototype.g=function(){return new Ui(this.i,this.h)};function Ui(h,v){Lt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ui,Lt),s=Ui.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ks(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_n(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function kr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?_n(this):Ks(this),this.readyState==3&&kr(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,_n(this))},s.Na=function(h){this.g&&(this.response=h,_n(this))},s.ga=function(){this.g&&_n(this)};function _n(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ks(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Ks(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vr(h){let v="";return Ee(h,function(E,N){v+=N,v+=":",v+=E,v+=`\r
`}),v}function Hn(h,v,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=Vr(E),typeof h=="string"?E!=null&&ji(E):Je(h,v,E))}function it(h){Lt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(it,Lt);var ka=/^https?$/i,Qc=["POST","PUT"];s=it.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fs.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){qi(this,J);return}if(h=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)E.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const J of N.keys())E.set(J,N.get(J));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),K=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qc,v,void 0)>=0)||N||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of E)this.g.setRequestHeader(J,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){qi(this,J)}};function qi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,zi(h),Ut(h)}function zi(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ht(this,"complete"),Ht(this,"abort"),Ut(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),it.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?il(this):this.Xa())},s.Xa=function(){il(this)};function il(h){if(h.h&&typeof u<"u"){if(h.v&&on(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ht(h,"readystatechange"),on(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var N;if(N=J===0){let he=String(h.D).match(Oa)[1]||null;!he&&d.self&&d.self.location&&(he=d.self.location.protocol.slice(0,-1)),N=!ka.test(he?he.toLowerCase():"")}E=N}if(E)Ht(h,"complete"),Ht(h,"success");else{h.o=6;try{var K=on(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",zi(h)}}finally{Ut(h)}}}}function Ut(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||Ht(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function on(h){return h.g?h.g.readyState:0}s.ca=function(){try{return on(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),yn(v)}};function Bi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(h){const v={};h=(h.g&&on(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(D(h[N]))continue;var E=bd(h[N]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[K]||[];v[K]=J,J.push(E)}k(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Va(h){this.za=0,this.i=[],this.j=new Rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hi("baseRetryDelayMs",5e3,h),this.Za=Hi("retryDelaySeedMs",1e4,h),this.Ta=Hi("forwardChannelMaxRetries",2,h),this.va=Hi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Pi(h&&h.concurrentRequestLimit),this.Ba=new Kc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Va.prototype,s.ka=8,s.I=1,s.connect=function(h,v,E,N){xt(0),this.W=h,this.H=v||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.J=eu(this,null,this.W),Ki(this)};function Gi(h){if($i(h),h.I==3){var v=h.V++,E=mt(h.J);if(Je(E,"SID",h.M),Je(E,"RID",v),Je(E,"TYPE","terminate"),Qi(h,E),v=new rs(h,h.j,v),v.M=2,v.A=Gs(mt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=qa(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ii(v)}Jc(h)}function Ns(h){h.g&&(ol(h),h.g.cancel(),h.g=null)}function $i(h){Ns(h),h.v&&(d.clearTimeout(h.v),h.v=null),Ua(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ki(h){if(!Oi(h.h)&&!h.m){h.m=!0;var v=h.Ea;M||T(),V||(M(),V=!0),R.add(v,h),h.D=0}}function wd(h,v){return Bn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ar(p(h.Ea,h,v),Zc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new rs(this,this.j,h);let J=this.o;if(this.U&&(J?(J=ie(J),me(J,this.U)):J=this.U),this.u!==null||this.R||(K.J=J,J=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=La(this,K,v),E=mt(this.J),Je(E,"RID",h),Je(E,"CVER",22),this.G&&Je(E,"X-HTTP-Session-Id",this.G),Qi(this,E),J&&(this.R?v="headers="+ji(Vr(J))+"&"+v:this.u&&Hn(E,this.u,J)),Da(this.h,K),this.Ra&&Je(E,"TYPE","init"),this.S?(Je(E,"$req",v),Je(E,"SID","null"),K.U=!0,bs(K,E,null)):bs(K,E,v),this.I=2}}else this.I==3&&(h?Yc(this,h):this.i.length==0||Oi(this.h)||Yc(this))};function Yc(h,v){var E;v?E=v.l:E=h.V++;const N=mt(h.J);Je(N,"SID",h.M),Je(N,"RID",E),Je(N,"AID",h.K),Qi(h,N),h.u&&h.o&&Hn(N,h.u,h.o),E=new rs(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=La(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Da(h.h,E),bs(E,N,v)}function Qi(h,v){h.H&&Ee(h.H,function(E,N){Je(v,N,E)}),h.l&&Ee({},function(E,N){Je(v,N,E)})}function La(h,v,E){E=Math.min(h.i.length,E);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var K=h.i;let Ce=-1;for(;;){const ct=["count="+E];Ce==-1?E>0?(Ce=K[0].g,ct.push("ofs="+Ce)):Ce=0:ct.push("ofs="+Ce);let Xe=!0;for(let Nt=0;Nt<E;Nt++){var J=K[Nt].g;const jn=K[Nt].map;if(J-=Ce,J<0)Ce=Math.max(0,K[Nt].g-100),Xe=!1;else try{J="req"+J+"_"||"";try{var he=jn instanceof Map?jn:Object.entries(jn);for(const[As,os]of he){let ls=os;g(os)&&(ls=qn(os)),ct.push(J+As+"="+encodeURIComponent(ls))}}catch(As){throw ct.push(J+"type="+encodeURIComponent("_badmap")),As}}catch{N&&N(jn)}}if(Xe){he=ct.join("&");break e}}he=void 0}return h=h.i.splice(0,E),v.G=h,he}function Xc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;M||T(),V||(M(),V=!0),R.add(v,h),h.A=0}}function al(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ar(p(h.Da,h),Zc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ar(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ns(this),Wc(this))};function ol(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Wc(h){h.g=new rs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=mt(h.na);Je(v,"RID","rpc"),Je(v,"SID",h.M),Je(v,"AID",h.K),Je(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(v,"TO",h.ia),Je(v,"TYPE","xmlhttp"),Qi(h,v),h.u&&h.o&&Hn(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Gs(mt(v)),E.u=null,E.R=!0,jr(E,h)}s.Va=function(){this.C!=null&&(this.C=null,Ns(this),al(this),xt(19))};function Ua(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ll(h,v){var E=null;if(h.g==v){Ua(h),ol(h),h.g=null;var N=2}else if(Mi(h.h,v))E=v.G,Hs(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var K=h.D;N=Ra(),Ht(N,new zc(N,E)),Ki(h)}else Xc(h);else if(K=v.m,K==3||K==0&&v.X>0||!(N==1&&wd(h,v)||N==2&&al(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),K){case 1:Qs(h,5);break;case 4:Qs(h,10);break;case 3:Qs(h,6);break;default:Qs(h,2)}}}function Zc(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function Qs(h,v){if(h.j.info("Error code "+v),v==2){var E=p(h.bb,h),N=h.Ua;const K=!N;N=new is(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Dr(N,"https"),Gs(N),K?rl(N.toString(),E):Mr(N.toString(),E)}else xt(2);h.I=0,h.l&&h.l.pa(v),Jc(h),$i(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Jc(h){if(h.I=0,h.ja=[],h.l){const v=Pa(h.h);(v.length!=0||h.i.length!=0)&&(z(h.ja,v),z(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function eu(h,v,E){var N=E instanceof is?mt(E):new is(E);if(N.g!="")v&&(N.g=v+"."+N.g),ki(N,N.u);else{var K=d.location;N=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;const J=new is(null);N&&Dr(J,N),v&&(J.g=v),K&&ki(J,K),E&&(J.h=E),N=J}return E=h.G,v=h.wa,E&&v&&Je(N,E,v),Je(N,"VER",h.ka),Qi(h,N),N}function qa(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new it(new Li({ab:E})):new it(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}s=tu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function za(){}za.prototype.g=function(h,v){return new En(h,v)};function En(h,v){Lt.call(this),this.g=new Va(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Lr(this)}b(En,Lt),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Gi(this.g)},En.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=qn(h),h=E);v.i.push(new xd(v.Ya++,h)),v.I==3&&Ki(v)},En.prototype.N=function(){this.g.l=null,delete this.j,Gi(this.g),delete this.g,En.Z.N.call(this)};function cl(h){Tr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(cl,Tr);function nu(){ss.call(this),this.status=1}b(nu,ss);function Lr(h){this.g=h}b(Lr,tu),Lr.prototype.ra=function(){Ht(this.g,"a")},Lr.prototype.qa=function(h){Ht(this.g,new cl(h))},Lr.prototype.pa=function(h){Ht(this.g,new nu)},Lr.prototype.oa=function(){Ht(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,L1=function(){return new za},V1=function(){return Ra()},k1=zn,Qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,gh=Tt,Wt.COMPLETE="complete",M1=Wt,qc.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",Lt.prototype.listen=Lt.prototype.J,sc=qc,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,O1=it}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const xE="@firebase/firestore",TE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new bp("@firebase/firestore");function yo(){return _a.logLevel}function ye(s,...e){if(_a.logLevel<=ze.DEBUG){const t=e.map(Pp);_a.debug(`Firestore (${zo}): ${s}`,...t)}}function yr(s,...e){if(_a.logLevel<=ze.ERROR){const t=e.map(Pp);_a.error(`Firestore (${zo}): ${s}`,...t)}}function Co(s,...e){if(_a.logLevel<=ze.WARN){const t=e.map(Pp);_a.warn(`Firestore (${zo}): ${s}`,...t)}}function Pp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,U1(s,i,t)}function U1(s,e,t){let i=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw yr(i),new Error(i)}function Ye(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||U1(e,o,i)}function je(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hn.UNAUTHENTICATED)))}shutdown(){}}class ER{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class SR{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new q1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class bR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new bR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const i=u=>{u.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=wR(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%62))}return i}}function Be(s,e){return s<e?-1:s>e?1:0}function Ym(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return Dm(o)===Dm(u)?Be(o,u):Dm(o)?1:-1}return Be(s.length,e.length)}const NR=55296,AR=57343;function Dm(s){const e=s.charCodeAt(0);return e>=NR&&e<=AR}function jo(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="__name__";class Ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ne(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=Ps.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Be(e.length,t.length)}static compareSegments(e,t){const i=Ps.isNumericId(e),o=Ps.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ps.extractNumericId(e).compare(Ps.extractNumericId(t)):Ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pi.fromString(e.substring(4,e.length-2))}}class lt extends Ps{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const RR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Ps{construct(e,t,i){return new nn(e,t,i)}static isValidIdentifier(e){return RR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NE}static keyField(){return new nn([NE])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(i+=g,o++):(u(),o++)}if(u(),d)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(lt.fromString(e))}static fromName(e){return new be(lt.fromString(e).popFirst(5))}static empty(){return new be(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(s,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function CR(s,e,t,i){if(e===!0&&i===!0)throw new ge(re.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function AE(s){if(!be.isDocumentKey(s))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function RE(s){if(be.isDocumentKey(s))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function B1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Xh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ne(12329,{type:typeof s})}function Cn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(s);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(s,e){const t={typeString:s};return e&&(t.value=e),t}function Dc(s,e){if(!B1(s))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new ge(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=-62135596800,jE=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jE);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<CE)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dc(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Mt("string",ut._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;function jR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new yi(o,be.empty(),e)}function IR(s){return new yi(s.readTime,s.key,yc)}class yi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new yi(Re.min(),be.empty(),yc)}static max(){return new yi(Re.max(),be.empty(),yc)}}function DR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(s.documentKey,e.documentKey),t!==0?t:Be(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==PR)throw s;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,i)=>{t(e)}))}static reject(e){return new le(((t,i)=>{i(e)}))}static waitFor(e){return new le(((t,i)=>{let o=0,u=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++u,d&&u===o&&t()}),(y=>i(y)))})),d=!0,u===o&&t()}))}static or(e){let t=le.resolve(!1);for(const i of e)t=t.next((o=>o?le.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,u)=>{i.push(t.call(this,o,u))})),this.waitFor(i)}static mapArray(e,t){return new le(((i,o)=>{const u=e.length,d=new Array(u);let g=0;for(let y=0;y<u;y++){const p=y;t(e[p]).next((_=>{d[p]=_,++g,g===u&&i(d)}),(_=>o(_)))}}))}static doWhile(e,t){return new le(((i,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):i()};u()}))}}function MR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function Zh(s){return s==null}function Ih(s){return s===0&&1/s==-1/0}function kR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ih(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="";function VR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=IE(e)),e=LR(s.get(t),e);return IE(e)}function LR(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case F1:t+="";break;default:t+=u}}return t}function IE(s){return s+F1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ti(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function H1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new tn(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,i,o,u){return this}insert(e,t,i){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Ft(nn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new G1("Invalid base64 string: "+u):u}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const UR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(s){if(Ye(!!s,39018),typeof s=="string"){let e=0;const t=UR.exec(s);if(Ye(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(s.seconds),nanos:Ct(s.nanos)}}function Ct(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function _i(s){return typeof s=="string"?rn.fromBase64String(s):rn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="server_timestamp",K1="__type__",Q1="__previous_value__",Y1="__local_write_time__";function kp(s){return(s?.mapValue?.fields||{})[K1]?.stringValue===$1}function Jh(s){const e=s.mapValue.fields[Q1];return kp(e)?Jh(e):e}function vc(s){const e=vi(s.mapValue.fields[Y1].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,i,o,u,d,g,y,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=_}}const Dh="(default)";class _c{constructor(e,t){this.projectId=e,this.database=t||Dh}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof _c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="__type__",zR="__max__",oh={mapValue:{}},W1="__vector__",Ph="value";function Ei(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?kp(s)?4:FR(s)?9007199254740991:BR(s)?10:11:Ne(28295,{value:s})}function qs(s,e){if(s===e)return!0;const t=Ei(s);if(t!==Ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return vc(s).isEqual(vc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=vi(o.timestampValue),g=vi(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return _i(o.bytesValue).isEqual(_i(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Ct(o.geoPointValue.latitude)===Ct(u.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Ct(o.integerValue)===Ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ct(o.doubleValue),g=Ct(u.doubleValue);return d===g?Ih(d)===Ih(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(DE(d)!==DE(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!qs(d[y],g[y])))return!1;return!0})(s,e);default:return Ne(52216,{left:s})}}function Ec(s,e){return(s.values||[]).find((t=>qs(t,e)))!==void 0}function Io(s,e){if(s===e)return 0;const t=Ei(s),i=Ei(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=Ct(u.integerValue||u.doubleValue),y=Ct(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,e);case 3:return OE(s.timestampValue,e.timestampValue);case 4:return OE(vc(s),vc(e));case 5:return Ym(s.stringValue,e.stringValue);case 6:return(function(u,d){const g=_i(u),y=_i(d);return g.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),y=d.split("/");for(let p=0;p<g.length&&p<y.length;p++){const _=Be(g[p],y[p]);if(_!==0)return _}return Be(g.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=Be(Ct(u.latitude),Ct(d.latitude));return g!==0?g:Be(Ct(u.longitude),Ct(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return ME(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const g=u.fields||{},y=d.fields||{},p=g[Ph]?.arrayValue,_=y[Ph]?.arrayValue,b=Be(p?.values?.length||0,_?.values?.length||0);return b!==0?b:ME(p,_)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===oh.mapValue&&d===oh.mapValue)return 0;if(u===oh.mapValue)return 1;if(d===oh.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),p=d.fields||{},_=Object.keys(p);y.sort(),_.sort();for(let b=0;b<y.length&&b<_.length;++b){const w=Ym(y[b],_[b]);if(w!==0)return w;const C=Io(g[y[b]],p[_[b]]);if(C!==0)return C}return Be(y.length,_.length)})(s.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function OE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Be(s,e);const t=vi(s),i=vi(e),o=Be(t.seconds,i.seconds);return o!==0?o:Be(t.nanos,i.nanos)}function ME(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=Io(t[o],i[o]);if(u)return u}return Be(t.length,i.length)}function Do(s){return Xm(s)}function Xm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=vi(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return _i(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return be.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=Xm(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Xm(t.fields[d])}`;return o+"}"})(s.mapValue):Ne(61005,{value:s})}function yh(s){switch(Ei(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(s);return e?16+yh(e):16;case 5:return 2*s.stringValue.length;case 6:return _i(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+yh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Ti(i.fields,((u,d)=>{o+=u.length+yh(d)})),o})(s.mapValue);default:throw Ne(13486,{value:s})}}function kE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Wm(s){return!!s&&"integerValue"in s}function Vp(s){return!!s&&"arrayValue"in s}function VE(s){return!!s&&"nullValue"in s}function LE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vh(s){return!!s&&"mapValue"in s}function BR(s){return(s?.mapValue?.fields||{})[X1]?.stringValue===W1}function uc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ti(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=uc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(s.arrayValue.values[t]);return e}return{...s}}function FR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===zR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=nn.emptyPath(),i={},o=[];e.forEach(((d,g)=>{if(!t.isImmediateParentOf(g)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=g.popLast()}d?i[g.lastSegment()]=uc(d):o.push(g.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ti(t,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new Rn(uc(this.value))}}function Z1(s){const e=[];return Ti(s.fields,((t,i)=>{const o=new nn([t]);if(vh(i)){const u=Z1(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,i,o,u,d,g){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new dn(e,0,Re.min(),Re.min(),Re.min(),Rn.empty(),0)}static newFoundDocument(e,t,i,o){return new dn(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new dn(e,2,t,Re.min(),Re.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Re.min(),Re.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this.position=e,this.inclusive=t}}function UE(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=be.comparator(be.fromName(d.referenceValue),t.key):i=Io(d,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function qE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!qs(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function HR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{}class Ot extends J1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $R(e,t,i):t==="array-contains"?new YR(e,i):t==="in"?new XR(e,i):t==="not-in"?new WR(e,i):t==="array-contains-any"?new ZR(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new KR(e,i):new QR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Io(t,this.value)):t!==null&&Ei(this.value)===Ei(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends J1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gs(e,t)}matches(e){return eS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eS(s){return s.op==="and"}function tS(s){return GR(s)&&eS(s)}function GR(s){for(const e of s.filters)if(e instanceof gs)return!1;return!0}function Zm(s){if(s instanceof Ot)return s.field.canonicalString()+s.op.toString()+Do(s.value);if(tS(s))return s.filters.map((e=>Zm(e))).join(",");{const e=s.filters.map((t=>Zm(t))).join(",");return`${s.op}(${e})`}}function nS(s,e){return s instanceof Ot?(function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&qs(i.value,o.value)})(s,e):s instanceof gs?(function(i,o){return o instanceof gs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,g)=>u&&nS(d,o.filters[g])),!0):!1})(s,e):void Ne(19439)}function sS(s){return s instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(s):s instanceof gs?(function(t){return t.op.toString()+" {"+t.getFilters().map(sS).join(" ,")+"}"})(s):"Filter"}class $R extends Ot{constructor(e,t,i){super(e,t,i),this.key=be.fromName(i.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class KR extends Ot{constructor(e,t){super(e,"in",t),this.keys=rS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class QR extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=rS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rS(s,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class YR extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Ec(t.arrayValue,this.value)}}class XR extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ec(this.value.arrayValue,t)}}class WR extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ec(this.value.arrayValue,t)}}class ZR extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ec(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t=null,i=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Te=null}}function zE(s,e=null,t=[],i=[],o=null,u=null,d=null){return new JR(s,e,t,i,o,u,d)}function Lp(s){const e=je(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Zm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Do(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Do(i))).join(",")),e.Te=t}return e.Te}function Up(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!HR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!nS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!qE(s.startAt,e.startAt)&&qE(s.endAt,e.endAt)}function Jm(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t=null,i=[],o=[],u=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eC(s,e,t,i,o,u,d,g){return new Ho(s,e,t,i,o,u,d,g)}function ed(s){return new Ho(s)}function BE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function iS(s){return s.collectionGroup!==null}function hc(s){const e=je(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ft(nn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Sc(u,i))})),t.has(nn.keyField().canonicalString())||e.Ie.push(new Sc(nn.keyField(),i))}return e.Ie}function ks(s){const e=je(s);return e.Ee||(e.Ee=tC(e,hc(s))),e.Ee}function tC(s,e){if(s.limitType==="F")return zE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sc(o.field,u)}));const t=s.endAt?new Oh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Oh(s.startAt.position,s.startAt.inclusive):null;return zE(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function ep(s,e){const t=s.filters.concat([e]);return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function tp(s,e,t){return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function td(s,e){return Up(ks(s),ks(e))&&s.limitType===e.limitType}function aS(s){return`${Lp(ks(s))}|lt:${s.limitType}`}function vo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>sS(o))).join(", ")}]`),Zh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${i})`})(ks(s))}; limitType=${s.limitType})`}function nd(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):be.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of hc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,g,y){const p=UE(d,g,y);return d.inclusive?p<=0:p<0})(i.startAt,hc(i),o)||i.endAt&&!(function(d,g,y){const p=UE(d,g,y);return d.inclusive?p>=0:p>0})(i.endAt,hc(i),o))})(s,e)}function nC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function oS(s){return(e,t)=>{let i=!1;for(const o of hc(s)){const u=sC(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function sC(s,e,t){const i=s.field.isKeyField()?be.comparator(e.key,t.key):(function(u,d,g){const y=d.data.field(u),p=g.data.field(u);return y!==null&&p!==null?Io(y,p):Ne(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,((t,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return H1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new yt(be.comparator);function vr(){return rC}const lS=new yt(be.comparator);function rc(...s){let e=lS;for(const t of s)e=e.insert(t.key,t);return e}function cS(s){let e=lS;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ha(){return dc()}function uS(){return dc()}function dc(){return new xa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const iC=new yt(be.comparator),aC=new Ft(be.comparator);function Fe(...s){let e=aC;for(const t of s)e=e.add(t);return e}const oC=new Ft(Be);function lC(){return oC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function hS(s){return{integerValue:""+s}}function cC(s,e){return kR(e)?hS(e):qp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function uC(s,e,t){return s instanceof Mh?(function(o,u){const d={fields:{[K1]:{stringValue:$1},[Y1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kp(u)&&(u=Jh(u)),u&&(d.fields[Q1]=u),{mapValue:d}})(t,e):s instanceof bc?fS(s,e):s instanceof xc?mS(s,e):(function(o,u){const d=dS(o,u),g=FE(d)+FE(o.Ae);return Wm(d)&&Wm(o.Ae)?hS(g):qp(o.serializer,g)})(s,e)}function hC(s,e,t){return s instanceof bc?fS(s,e):s instanceof xc?mS(s,e):t}function dS(s,e){return s instanceof kh?(function(i){return Wm(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Mh extends sd{}class bc extends sd{constructor(e){super(),this.elements=e}}function fS(s,e){const t=pS(e);for(const i of s.elements)t.some((o=>qs(o,i)))||t.push(i);return{arrayValue:{values:t}}}class xc extends sd{constructor(e){super(),this.elements=e}}function mS(s,e){let t=pS(e);for(const i of s.elements)t=t.filter((o=>!qs(o,i)));return{arrayValue:{values:t}}}class kh extends sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function FE(s){return Ct(s.integerValue||s.doubleValue)}function pS(s){return Vp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function dC(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof bc&&o instanceof bc||i instanceof xc&&o instanceof xc?jo(i.elements,o.elements,qs):i instanceof kh&&o instanceof kh?qs(i.Ae,o.Ae):i instanceof Mh&&o instanceof Mh})(s.transform,e.transform)}class fC{constructor(e,t){this.version=e,this.transformResults=t}}class es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class rd{}function gS(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new zp(s.key,es.none()):new Pc(s.key,s.data,es.none());{const t=s.data,i=Rn.empty();let o=new Ft(nn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new wi(s.key,i,new Ln(o.toArray()),es.none())}}function mC(s,e,t){s instanceof Pc?(function(o,u,d){const g=o.value.clone(),y=GE(o.fieldTransforms,u,d.transformResults);g.setAll(y),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):s instanceof wi?(function(o,u,d){if(!_h(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=GE(o.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(yS(o)),y.setAll(g),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function fc(s,e,t,i){return s instanceof Pc?(function(u,d,g,y){if(!_h(u.precondition,d))return g;const p=u.value.clone(),_=$E(u.fieldTransforms,y,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(s,e,t,i):s instanceof wi?(function(u,d,g,y){if(!_h(u.precondition,d))return g;const p=$E(u.fieldTransforms,y,d),_=d.data;return _.setAll(yS(u)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(s,e,t,i):(function(u,d,g){return _h(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,t)}function pC(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=dS(i.transform,o||null);u!=null&&(t===null&&(t=Rn.empty()),t.set(i.field,u))}return t||null}function HE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&jo(i,o,((u,d)=>dC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Pc extends rd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wi extends rd{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function yS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function GE(s,e,t){const i=new Map;Ye(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,g=e.data.field(u.field);i.set(u.field,hC(d,g,t[o]))}return i}function $E(s,e,t){const i=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);i.set(o.field,uC(u,d,e))}return i}class zp extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gC extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&mC(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=uS();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const y=gS(d,g);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((t,i)=>HE(t,i)))&&jo(this.baseMutations,e.baseMutations,((t,i)=>HE(t,i)))}}class Bp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return iC})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new Bp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ge;function EC(s){switch(s){case re.OK:return Ne(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ne(15467,{code:s})}}function vS(s){if(s===void 0)return yr("GRPC error has no .code"),re.UNKNOWN;switch(s){case Pt.OK:return re.OK;case Pt.CANCELLED:return re.CANCELLED;case Pt.UNKNOWN:return re.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return re.INTERNAL;case Pt.UNAVAILABLE:return re.UNAVAILABLE;case Pt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Pt.NOT_FOUND:return re.NOT_FOUND;case Pt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Pt.ABORTED:return re.ABORTED;case Pt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Pt.DATA_LOSS:return re.DATA_LOSS;default:return Ne(39323,{code:s})}}(Ge=Pt||(Pt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new pi([4294967295,4294967295],0);function KE(s){const e=SC().encode(s),t=new P1;return t.update(e),new Uint8Array(t.digest())}function QE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new pi([t,i],0),new pi([o,u],0)]}class Fp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ic(`Invalid padding: ${t}`);if(i<0)throw new ic(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ic(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pi.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(pi.fromNumber(i)));return o.compare(bC)===1&&(o=new pi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=KE(e),[i,o]=QE(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Fp(u,o,t);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const t=KE(e),[i,o]=QE(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new id(Re.min(),o,new yt(Be),vr(),Fe())}}class Oc{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Oc(i,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class _S{constructor(e,t){this.targetId=e,this.Ce=t}}class ES{constructor(e,t,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class YE{constructor(){this.ve=0,this.Fe=XE(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),i=Fe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:u})}})),new Oc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=XE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xC{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=lh(),this.He=lh(),this.Ye=new yt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Jm(u))if(i===0){const d=new be(u.path);this.et(t,d,dn.newNoDocument(d,Re.min()))}else Ye(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const g=this.ut(e),y=g?this.ct(g,e,d):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let d,g;try{d=_i(i).toUint8Array()}catch(y){if(y instanceof G1)return Co("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Fp(d,o,u)}catch(y){return Co(y instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const g=this.ot(d);if(g){if(u.current&&Jm(g.target)){const y=new be(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,dn.newNoDocument(y,e))}u.Be&&(t.set(d,u.ke()),u.qe())}}));let i=Fe();this.He.forEach(((u,d)=>{let g=!0;d.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new id(e,t,this.Ye,this.je,i);return this.je=vr(),this.Je=lh(),this.He=lh(),this.Ye=new yt(Be),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new YE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lh(){return new yt(be.comparator)}function XE(){return new yt(be.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},wC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NC={and:"AND",or:"OR"};class AC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function np(s,e){return s.useProto3Json||Zh(e)?e:{value:e}}function Vh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function RC(s,e){return Vh(s,e.toTimestamp())}function Vs(s){return Ye(!!s,49232),Re.fromTimestamp((function(t){const i=vi(t);return new ut(i.seconds,i.nanos)})(s))}function Hp(s,e){return sp(s,e).canonicalString()}function sp(s,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function bS(s){const e=lt.fromString(s);return Ye(AS(e),10190,{key:e.toString()}),e}function rp(s,e){return Hp(s.databaseId,e.path)}function Pm(s,e){const t=bS(e);if(t.get(1)!==s.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new be(TS(t))}function xS(s,e){return Hp(s.databaseId,e)}function CC(s){const e=bS(s);return e.length===4?lt.emptyPath():TS(e)}function ip(s){return new lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function TS(s){return Ye(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function WE(s,e,t){return{name:rp(s,e),fields:t.value.mapValue.fields}}function jC(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ne(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?(Ye(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(Ye(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(p){const _=p.code===void 0?re.UNKNOWN:vS(p.code);return new ge(_,p.message||"")})(d);t=new ES(i,o,u,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Pm(s,i.document.name),u=Vs(i.document.updateTime),d=i.document.createTime?Vs(i.document.createTime):Re.min(),g=new Rn({mapValue:{fields:i.document.fields}}),y=dn.newFoundDocument(o,u,d,g),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Eh(p,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Pm(s,i.document),u=i.readTime?Vs(i.readTime):Re.min(),d=dn.newNoDocument(o,u),g=i.removedTargetIds||[];t=new Eh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Pm(s,i.document),u=i.removedTargetIds||[];t=new Eh([],u,o,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new _C(o,u),g=i.targetId;t=new _S(g,d)}}return t}function IC(s,e){let t;if(e instanceof Pc)t={update:WE(s,e.key,e.value)};else if(e instanceof zp)t={delete:rp(s,e.key)};else if(e instanceof wi)t={update:WE(s,e.key,e.data),updateMask:qC(e.fieldMask)};else{if(!(e instanceof gC))return Ne(16599,{Vt:e.type});t={verify:rp(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const g=d.transform;if(g instanceof Mh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof bc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof xc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof kh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ne(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:RC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne(27497)})(s,e.precondition)),t}function DC(s,e){return s&&s.length>0?(Ye(e!==void 0,14353),s.map((t=>(function(o,u){let d=o.updateTime?Vs(o.updateTime):Vs(u);return d.isEqual(Re.min())&&(d=Vs(u)),new fC(d,o.transformResults||[])})(t,e)))):[]}function PC(s,e){return{documents:[xS(s,e.path)]}}function OC(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=xS(s,o);const u=(function(p){if(p.length!==0)return NS(gs.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(p){if(p.length!==0)return p.map((_=>(function(w){return{field:_o(w.field),direction:VC(w.dir)}})(_)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=np(s,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function MC(s){let e=CC(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ye(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];t.where&&(u=(function(b){const w=wS(b);return w instanceof gs&&tS(w)?w.getFilters():[w]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((w=>(function(z){return new Sc(Eo(z.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(w)))})(t.orderBy));let g=null;t.limit&&(g=(function(b){let w;return w=typeof b=="object"?b.value:b,Zh(w)?null:w})(t.limit));let y=null;t.startAt&&(y=(function(b){const w=!!b.before,C=b.values||[];return new Oh(C,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const w=!b.before,C=b.values||[];return new Oh(C,w)})(t.endAt)),eC(e,o,d,u,g,"F",y,p)}function kC(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Eo(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Eo(t.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Eo(t.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ot.create(Eo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return gs.create(t.compositeFilter.filters.map((i=>wS(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(s):Ne(30097,{filter:s})}function VC(s){return TC[s]}function LC(s){return wC[s]}function UC(s){return NC[s]}function _o(s){return{fieldPath:s.canonicalString()}}function Eo(s){return nn.fromServerFormat(s.fieldPath)}function NS(s){return s instanceof Ot?(function(t){if(t.op==="=="){if(LE(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(VE(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LE(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(VE(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:LC(t.op),value:t.value}}})(s):s instanceof gs?(function(t){const i=t.getFilters().map((o=>NS(o)));return i.length===1?i[0]:{compositeFilter:{op:UC(t.op),filters:i}}})(s):Ne(54877,{filter:s})}function qC(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t,i,o,u=Re.min(),d=Re.min(),g=rn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.yt=e}}function BC(s){const e=MC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.Cn=new HC}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(yi.min())}updateCollectionGroup(e,t,i){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class HC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ft(lt.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RS=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(RS,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="LruGarbageCollector",GC=1048576;function e0([s,e],[t,i]){const o=Be(s,t);return o===0?Be(e,i):o}class $C{constructor(e){this.Ir=e,this.buffer=new Ft(e0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();e0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(JE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?ye(JE,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)}))}}class QC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(Wh.ce);const i=new $C(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ZE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,u,d,g,y,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,g=Date.now(),this.removeTargets(e,i,t)))).next((b=>(u=b,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(p=Date.now(),yo()<=ze.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${b} documents in `+(p-y)+`ms
Total Duration: ${p-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function YC(s,e){return new QC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.changes=new xa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?le.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&fc(i.mutation,o,Ln.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Fe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Fe()){const o=ha();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((u=>{let d=rc();return u.forEach(((g,y)=>{d=d.insert(g,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=ha();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Fe())))}populateOverlays(e,t,i){const o=[];return i.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,g)=>{t.set(d,g)}))}))}computeViews(e,t,i,o){let u=vr();const d=dc(),g=(function(){return dc()})();return t.forEach(((y,p)=>{const _=i.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof wi)?u=u.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),fc(_.mutation,p,_.mutation.getFieldMask(),ut.now())):d.set(p.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((p,_)=>d.set(p,_))),t.forEach(((p,_)=>g.set(p,new WC(_,d.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,t){const i=dc();let o=new yt(((d,g)=>d-g)),u=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const g of d)g.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let _=i.get(y)||Ln.empty();_=g.applyToLocalView(p,_),i.set(y,_);const b=(o.get(g.batchId)||Fe()).add(y);o=o.insert(g.batchId,b)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),p=y.key,_=y.value,b=uS();_.forEach((w=>{if(!u.has(w)){const C=gS(t.get(w),i.get(w));C!==null&&b.set(w,C),u=u.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,b))}return le.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):le.resolve(ha());let g=yc,y=u;return d.next((p=>le.forEach(p,((_,b)=>(g<b.largestBatchId&&(g=b.largestBatchId),u.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{y=y.insert(_,w)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,y,p,Fe()))).next((_=>({batchId:g,changes:cS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((i=>{let o=rc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let d=rc();return this.indexManager.getCollectionParents(e,u).next((g=>le.forEach(g,(y=>{const p=(function(b,w){return new Ho(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next((_=>{_.forEach(((b,w)=>{d=d.insert(b,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o)))).next((d=>{u.forEach(((y,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,dn.newInvalidDocument(_)))}));let g=rc();return d.forEach(((y,p)=>{const _=u.get(y);_!==void 0&&fc(_.mutation,p,Ln.empty(),ut.now()),nd(t,p)&&(g=g.insert(y,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Vs(o.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:BC(o.bundledQuery),readTime:Vs(o.readTime)}})(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.overlays=new yt(be.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ha();return le.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,u)=>{this.St(e,t,u)})),le.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,t,i){const o=ha(),u=t.length+1,d=new be(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>i&&o.set(y.getKey(),y)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new yt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=u.get(p.largestBatchId);_===null&&(_=ha(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const g=ha(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,_)=>g.set(p,_))),!(g.size()>=o)););return le.resolve(g)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new vC(t,i));let u=this.qr.get(t);u===void 0&&(u=Fe(),this.qr.set(t,u)),this.qr.set(t,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.Qr=new Ft(Xt.$r),this.Ur=new Ft(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new be(new lt([])),i=new Xt(t,e),o=new Xt(t,e+1),u=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new lt([])),i=new Xt(t,e),o=new Xt(t,e+1);let u=Fe();return this.Ur.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Xt.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new yC(u,t,i,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Xt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(d=>{const g=this.Xr(d.Yr);u.push(g)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(Be);return t.forEach((o=>{const u=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(g=>{i=i.add(g.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;be.isDocumentKey(u)||(u=u.child(""));const d=new Xt(new be(u),0);let g=new Ft(Be);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(g=g.add(y.Yr)),!0)}),d),le.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(t.mutations,(o=>{const u=new Xt(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.ri=e,this.docs=(function(){return new yt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return le.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let i=vr();return t.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=vr();const d=t.path,g=new be(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:p,value:{document:_}}=y.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||DR(IR(_),i)<=0||(o.has(_.key)||nd(t,_))&&(u=u.insert(_.key,_.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Ne(9500)}ii(e,t){return le.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new rj(this)}getSize(e){return le.resolve(this.size)}}class rj extends XC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.persistence=e,this.si=new xa((t=>Lp(t)),Up),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=t&&i.get(g.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),le.waitFor(u).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return le.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),le.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return le.resolve(i)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wh(0),this.li=!1,this.li=!0,this.hi=new tj,this.referenceDelegate=e(this),this.Pi=new ij(this),this.indexManager=new FC,this.remoteDocumentCache=(function(o){return new sj(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new zC(t),this.Ii=new JC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ej,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new nj(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new aj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class aj extends OR{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new $p(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),le.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=be.fromPath(i);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lh{constructor(e,t){this.persistence=e,this.pi=new xa((i=>VR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=YC(this,t)}static mi(e,t){return new Lh(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?le.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((g=>{g||(i++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yh(e.data.value)),t}br(e,t,i){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Fe(),o=Fe();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Kp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kw()?8:MR(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.ys(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,t,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new oj;return this.Ss(e,t,d).next((g=>{if(u.result=g,this.Vs)return this.bs(e,t,d,g.size)}))})).next((()=>u.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(yo()<=ze.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(yo()<=ze.DEBUG&&ye("QueryEngine","Query:",vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(yo()<=ze.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ks(t))):le.resolve())}ys(e,t){if(BE(t))return le.resolve(null);let i=ks(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=tp(t,null,"F"),i=ks(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Fe(...u);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((y=>{const p=this.Ds(t,g);return this.Cs(t,p,d,y.readTime)?this.ys(e,tp(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,i,o){return BE(t)||o.isEqual(Re.min())?le.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(t,u);return this.Cs(t,d,i,o)?le.resolve(null):(yo()<=ze.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.vs(e,d,t,jR(o,yc)).next((g=>g)))}))}Ds(e,t){let i=new Ft(oS(e));return t.forEach(((o,u)=>{nd(e,u)&&(i=i.add(u))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,i){return yo()<=ze.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",vo(t)),this.ps.getDocumentsMatchingQuery(e,t,yi.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",cj=3e8;class uj{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new yt(Be),this.xs=new xa((u=>Lp(u)),Up),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function hj(s,e,t,i){return new uj(s,e,t,i)}async function jS(s,e){const t=je(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],g=[];let y=Fe();for(const p of o){d.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}for(const p of u){g.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(i,y).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:g})))}))}))}function dj(s,e){const t=je(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,p,_){const b=p.batch,w=b.keys();let C=le.resolve();return w.forEach((z=>{C=C.next((()=>_.getEntry(y,z))).next((F=>{const L=p.docVersions.get(z);Ye(L!==null,48541),F.version.compareTo(L)<0&&(b.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(y,b)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let y=Fe();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(y=y.add(g.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function IS(s){const e=je(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fj(s,e){const t=je(s),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((_,b)=>{const w=o.get(b);if(!w)return;g.push(t.Pi.removeMatchingKeys(u,_.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(u,_.addedDocuments,b))));let C=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(rn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),o=o.insert(b,C),(function(F,L,Q){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=cj?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(w,C,_)&&g.push(t.Pi.updateTargetData(u,C))}));let y=vr(),p=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(mj(u,d,e.documentUpdates).next((_=>{y=_.ks,p=_.qs}))),!i.isEqual(Re.min())){const _=t.Pi.getLastRemoteSnapshotVersion(u).next((b=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));g.push(_)}return le.waitFor(g).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,y,p))).next((()=>y))})).then((u=>(t.Ms=o,u)))}function mj(s,e,t){let i=Fe(),o=Fe();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=vr();return t.forEach(((g,y)=>{const p=u.get(g);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):ye(Qp,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function pj(s,e){const t=je(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Mp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function gj(s,e){const t=je(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((u=>u?(o=u,le.resolve(o)):t.Pi.allocateTargetId(i).next((d=>(o=new hi(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ap(s,e,t){const i=je(s),o=i.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Fo(d))throw d;ye(Qp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function t0(s,e,t){const i=je(s);let o=Re.min(),u=Fe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,p,_){const b=je(y),w=b.xs.get(_);return w!==void 0?le.resolve(b.Ms.get(w)):b.Pi.getTargetData(p,_)})(i,d,ks(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,g.targetId).next((y=>{u=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:Re.min(),t?u:Fe()))).next((g=>(yj(i,nC(e),g),{documents:g,Qs:u})))))}function yj(s,e,t){let i=s.Os.get(e)||Re.min();t.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class n0{constructor(){this.activeTargetIds=lC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vj{constructor(){this.Mo=new n0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="ConnectivityMonitor";class r0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(s0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(s0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function op(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",Ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Dh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,u){const d=op(),g=this.zo(e,t.toUriEncodedString());ye(Om,`Sending RPC '${e}' ${d}:`,g,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:p}=new URL(g),_=Lo(p);return this.Jo(e,g,y,i,_).then((b=>(ye(Om,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Co(Om,`RPC '${e}' ${d} failed with error: `,b,"url: ",g,"request:",i),b}))}Ho(e,t,i,o,u,d){return this.Go(e,t,i,o,u)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const i=Ej[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class xj extends Sj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,u){const d=op();return new Promise(((g,y)=>{const p=new O1;p.setWithCredentials(!0),p.listenOnce(M1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case gh.NO_ERROR:const b=p.getResponseJson();ye(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),g(b);break;case gh.TIMEOUT:ye(un,`RPC '${e}' ${d} timed out`),y(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const w=p.getStatus();if(ye(un,`RPC '${e}' ${d} failed with status:`,w,"response text:",p.getResponseText()),w>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const z=C?.error;if(z&&z.status&&z.message){const F=(function(Q){const ae=Q.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ae)>=0?ae:re.UNKNOWN})(z.status);y(new ge(F,z.message))}else y(new ge(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ye(un,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ye(un,`RPC '${e}' ${d} sending request:`,o),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=op(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=L1(),g=V1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const _=u.join("");ye(un,`Creating RPC '${e}' stream ${o}: ${_}`,y);const b=d.createWebChannel(_,y);this.I_(b);let w=!1,C=!1;const z=new bj({Yo:L=>{C?ye(un,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(w||(ye(un,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),ye(un,`RPC '${e}' stream ${o} sending:`,L),b.send(L))},Zo:()=>b.close()}),F=(L,Q,ae)=>{L.listen(Q,($=>{try{ae($)}catch(H){setTimeout((()=>{throw H}),0)}}))};return F(b,sc.EventType.OPEN,(()=>{C||(ye(un,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),F(b,sc.EventType.CLOSE,(()=>{C||(C=!0,ye(un,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(b))})),F(b,sc.EventType.ERROR,(L=>{C||(C=!0,Co(un,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),z.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),F(b,sc.EventType.MESSAGE,(L=>{if(!C){const Q=L.data[0];Ye(!!Q,16349);const ae=Q,$=ae?.error||ae[0]?.error;if($){ye(un,`RPC '${e}' stream ${o} received error:`,$);const H=$.status;let M=(function(T){const A=Pt[T];if(A!==void 0)return vS(A)})(H),V=$.message;M===void 0&&(M=re.INTERNAL,V="Unknown error status: "+H+" with message "+$.message),C=!0,z.a_(new ge(M,V)),b.close()}else ye(un,`RPC '${e}' stream ${o} received:`,Q),z.u_(Q)}})),F(g,k1.STAT_EVENT,(L=>{L.stat===Qm.PROXY?ye(un,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Qm.NOPROXY&&ye(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(s){return new AC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="PersistentStream";class PS{constructor(e,t,i,o,u,d,g,y){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(i0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(i0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tj extends PS{constructor(e,t,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jC(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Vs(d.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ip(this.serializer),t.addTarget=(function(u,d){let g;const y=d.target;if(g=Jm(y)?{documents:PC(u,y)}:{query:OC(u,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=SS(u,d.resumeToken);const p=np(u,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(Re.min())>0){g.readTime=Vh(u,d.snapshotVersion.toTimestamp());const p=np(u,d.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const i=kC(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ip(this.serializer),t.removeTarget=e,this.q_(t)}}class wj extends PS{constructor(e,t,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DC(e.writeResults,e.commitTime),i=Vs(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ip(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>IC(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{}class Aj extends Nj{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,sp(t,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(re.UNKNOWN,u.toString())}))}Ho(e,t,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,sp(t,i),o,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Rj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class Cj{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Ta(this)&&(ye(Ea,"Restarting streams for network reachability change."),await(async function(y){const p=je(y);p.Ea.add(4),await Mc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await od(p)})(this))}))})),this.Ra=new Rj(i,o)}}async function od(s){if(Ta(s))for(const e of s.da)await e(!0)}async function Mc(s){for(const e of s.da)await e(!1)}function OS(s,e){const t=je(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zp(t)?Wp(t):Go(t).O_()&&Xp(t,e))}function Yp(s,e){const t=je(s),i=Go(t);t.Ia.delete(e),i.O_()&&MS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ta(t)&&t.Ra.set("Unknown"))}function Xp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(s).Y_(e)}function MS(s,e){s.Va.Ue(e),Go(s).Z_(e)}function Wp(s){s.Va=new xC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Ra.ua()}function Zp(s){return Ta(s)&&!Go(s).x_()&&s.Ia.size>0}function Ta(s){return je(s).Ea.size===0}function kS(s){s.Va=void 0}async function jj(s){s.Ra.set("Online")}async function Ij(s){s.Ia.forEach(((e,t)=>{Xp(s,e)}))}async function Dj(s,e){kS(s),Zp(s)?(s.Ra.ha(e),Wp(s)):s.Ra.set("Unknown")}async function Pj(s,e,t){if(s.Ra.set("Online"),e instanceof ES&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(i){ye(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uh(s,i)}else if(e instanceof Eh?s.Va.Ze(e):e instanceof _S?s.Va.st(e):s.Va.tt(e),!t.isEqual(Re.min()))try{const i=await IS(s.localStore);t.compareTo(i)>=0&&await(function(u,d){const g=u.Va.Tt(d);return g.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(y.resumeToken,d))}})),g.targetMismatches.forEach(((y,p)=>{const _=u.Ia.get(y);if(!_)return;u.Ia.set(y,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),MS(u,y);const b=new hi(_.target,y,p,_.sequenceNumber);Xp(u,b)})),u.remoteSyncer.applyRemoteEvent(g)})(s,t)}catch(i){ye(Ea,"Failed to raise snapshot:",i),await Uh(s,i)}}async function Uh(s,e,t){if(!Fo(e))throw e;s.Ea.add(1),await Mc(s),s.Ra.set("Offline"),t||(t=()=>IS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ye(Ea,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await od(s)}))}function VS(s,e){return e().catch((t=>Uh(s,t,e)))}async function ld(s){const e=je(s),t=Si(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;Oj(e);)try{const o=await pj(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,Mj(e,o)}catch(o){await Uh(e,o)}LS(e)&&US(e)}function Oj(s){return Ta(s)&&s.Ta.length<10}function Mj(s,e){s.Ta.push(e);const t=Si(s);t.O_()&&t.X_&&t.ea(e.mutations)}function LS(s){return Ta(s)&&!Si(s).x_()&&s.Ta.length>0}function US(s){Si(s).start()}async function kj(s){Si(s).ra()}async function Vj(s){const e=Si(s);for(const t of s.Ta)e.ea(t.mutations)}async function Lj(s,e,t){const i=s.Ta.shift(),o=Bp.from(i,e,t);await VS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ld(s)}async function Uj(s,e){e&&Si(s).X_&&await(async function(i,o){if((function(d){return EC(d)&&d!==re.ABORTED})(o.code)){const u=i.Ta.shift();Si(i).B_(),await VS(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ld(i)}})(s,e),LS(s)&&US(s)}async function a0(s,e){const t=je(s);t.asyncQueue.verifyOperationInProgress(),ye(Ea,"RemoteStore received new credentials");const i=Ta(t);t.Ea.add(3),await Mc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await od(t)}async function qj(s,e){const t=je(s);e?(t.Ea.delete(2),await od(t)):e||(t.Ea.add(2),await Mc(t),t.Ra.set("Unknown"))}function Go(s){return s.ma||(s.ma=(function(t,i,o){const u=je(t);return u.sa(),new Tj(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:jj.bind(null,s),t_:Ij.bind(null,s),r_:Dj.bind(null,s),H_:Pj.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Zp(s)?Wp(s):s.Ra.set("Unknown")):(await s.ma.stop(),kS(s))}))),s.ma}function Si(s){return s.fa||(s.fa=(function(t,i,o){const u=je(t);return u.sa(),new wj(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:kj.bind(null,s),r_:Uj.bind(null,s),ta:Vj.bind(null,s),na:Lj.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ld(s)):(await s.fa.stop(),s.Ta.length>0&&(ye(Ea,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const d=Date.now()+i,g=new Jp(e,t,d,o,u);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(s,e){if(yr("AsyncQueue",`${e}: ${s}`),Fo(s))return new ge(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||be.comparator(t.key,i.key):(t,i)=>be.comparator(t.key,i.key),this.keyedMap=rc(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new No;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.ga=new yt(be.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Oo{constructor(e,t,i,o,u,d,g,y,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,o,u){const d=[];return t.forEach((g=>{d.push({type:0,doc:g})})),new Oo(e,t,No.emptySet(t),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Bj{constructor(){this.queries=l0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=je(t),u=o.queries;o.queries=l0(),u.forEach(((d,g)=>{for(const y of g.Sa)y.onError(i)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function l0(){return new xa((s=>aS(s)),td)}async function tg(s,e){const t=je(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new zj,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const g=eg(d,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&sg(t)}async function ng(s,e){const t=je(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Fj(s,e){const t=je(s);let i=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const g of d.Sa)g.Fa(o)&&(i=!0);d.wa=o}}i&&sg(t)}function Hj(s,e,t){const i=je(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);i.queries.delete(e)}function sg(s){s.Ca.forEach((e=>{e.next()}))}var lp,c0;(c0=lp||(lp={})).Ma="default",c0.Cache="cache";class rg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Oo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.key=e}}class zS{constructor(e){this.key=e}}class Gj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=oS(e),this.tu=new No(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new o0,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,b)=>{const w=o.get(_),C=nd(this.query,b)?b:null,z=!!w&&this.mutatedKeys.has(w.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;w&&C?w.data.isEqual(C.data)?z!==F&&(i.track({type:3,doc:C}),L=!0):this.su(w,C)||(i.track({type:2,doc:C}),L=!0,(y&&this.eu(C,y)>0||p&&this.eu(C,p)<0)&&(g=!0)):!w&&C?(i.track({type:0,doc:C}),L=!0):w&&!C&&(i.track({type:1,doc:w}),L=!0,(y||p)&&(g=!0)),L&&(C?(d=d.add(C),u=F?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:g,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,b)=>(function(C,z){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:L})}};return F(C)-F(z)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(i),o=o??!1;const g=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,d.length!==0||p?{snapshot:new Oo(this.query,e.tu,u,d,e.mutatedKeys,y===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new zS(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new qS(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ig="SyncEngine";class $j{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Kj{constructor(e){this.key=e,this.hu=!1}}class Qj{constructor(e,t,i,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new xa((g=>aS(g)),td),this.Iu=new Map,this.Eu=new Set,this.du=new yt(be.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Yj(s,e,t=!0){const i=KS(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await BS(i,e,t,!0),o}async function Xj(s,e){const t=KS(s);await BS(t,e,!0,!1)}async function BS(s,e,t,i){const o=await gj(s.localStore,ks(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let g;return i&&(g=await Wj(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&OS(s.remoteStore,o),g}async function Wj(s,e,t,i,o){s.pu=(b,w,C)=>(async function(F,L,Q,ae){let $=L.view.ru(Q);$.Cs&&($=await t0(F.localStore,L.query,!1).then((({documents:R})=>L.view.ru(R,$))));const H=ae&&ae.targetChanges.get(L.targetId),M=ae&&ae.targetMismatches.get(L.targetId)!=null,V=L.view.applyChanges($,F.isPrimaryClient,H,M);return h0(F,L.targetId,V.au),V.snapshot})(s,b,w,C);const u=await t0(s.localStore,e,!0),d=new Gj(e,u.Qs),g=d.ru(u.documents),y=Oc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),p=d.applyChanges(g,s.isPrimaryClient,y);h0(s,t,p.au);const _=new $j(e,t,d);return s.Tu.set(e,_),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function Zj(s,e,t){const i=je(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!td(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Yp(i.remoteStore,o.targetId),cp(i,o.targetId)})).catch(Bo)):(cp(i,o.targetId),await ap(i.localStore,o.targetId,!0))}async function Jj(s,e){const t=je(s),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Yp(t.remoteStore,i.targetId))}async function eI(s,e,t){const i=oI(s);try{const o=await(function(d,g){const y=je(d),p=ut.now(),_=g.reduce(((C,z)=>C.add(z.key)),Fe());let b,w;return y.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let z=vr(),F=Fe();return y.Ns.getEntries(C,_).next((L=>{z=L,z.forEach(((Q,ae)=>{ae.isValidDocument()||(F=F.add(Q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(C,z))).next((L=>{b=L;const Q=[];for(const ae of g){const $=pC(ae,b.get(ae.key).overlayedDocument);$!=null&&Q.push(new wi(ae.key,$,Z1($.value.mapValue),es.exists(!0)))}return y.mutationQueue.addMutationBatch(C,p,Q,g)})).next((L=>{w=L;const Q=L.applyToLocalDocumentSet(b,F);return y.documentOverlayCache.saveOverlays(C,L.batchId,Q)}))})).then((()=>({batchId:w.batchId,changes:cS(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,g,y){let p=d.Vu[d.currentUser.toKey()];p||(p=new yt(Be)),p=p.insert(g,y),d.Vu[d.currentUser.toKey()]=p})(i,o.batchId,t),await kc(i,o.changes),await ld(i.remoteStore)}catch(o){const u=eg(o,"Failed to persist write");t.reject(u)}}async function FS(s,e){const t=je(s);try{const i=await fj(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Au.get(u);d&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ye(d.hu,14607):o.removedDocuments.size>0&&(Ye(d.hu,42227),d.hu=!1))})),await kc(t,i,e)}catch(i){await Bo(i)}}function u0(s,e,t){const i=je(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const y=je(d);y.onlineState=g;let p=!1;y.queries.forEach(((_,b)=>{for(const w of b.Sa)w.va(g)&&(p=!0)})),p&&sg(y)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tI(s,e,t){const i=je(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new yt(be.comparator);d=d.insert(u,dn.newNoDocument(u,Re.min()));const g=Fe().add(u),y=new id(Re.min(),new Map,new yt(Be),d,g);await FS(i,y),i.du=i.du.remove(u),i.Au.delete(e),ag(i)}else await ap(i.localStore,e,!1).then((()=>cp(i,e,t))).catch(Bo)}async function nI(s,e){const t=je(s),i=e.batch.batchId;try{const o=await dj(t.localStore,e);GS(t,i,null),HS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await kc(t,o)}catch(o){await Bo(o)}}async function sI(s,e,t){const i=je(s);try{const o=await(function(d,g){const y=je(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return y.mutationQueue.lookupMutationBatch(p,g).next((b=>(Ye(b!==null,37113),_=b.keys(),y.mutationQueue.removeMutationBatch(p,b)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,_,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>y.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);GS(i,e,t),HS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await kc(i,o)}catch(o){await Bo(o)}}function HS(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function GS(s,e,t){const i=je(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function cp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||$S(s,i)}))}function $S(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Yp(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),ag(s))}function h0(s,e,t){for(const i of t)i instanceof qS?(s.Ru.addReference(i.key,e),rI(s,i)):i instanceof zS?(ye(ig,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||$S(s,i.key)):Ne(19791,{wu:i})}function rI(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(ye(ig,"New document in limbo: "+t),s.Eu.add(i),ag(s))}function ag(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new be(lt.fromString(e)),i=s.fu.next();s.Au.set(i,new Kj(t)),s.du=s.du.insert(t,i),OS(s.remoteStore,new hi(ks(ed(t.path)),i,"TargetPurposeLimboResolution",Wh.ce))}}async function kc(s,e,t){const i=je(s),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,y)=>{d.push(i.pu(y,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(y.targetId)?.current;i.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Kp.As(y.targetId,p);u.push(_)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(y,p){const _=je(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(p,(w=>le.forEach(w.Es,(C=>_.persistence.referenceDelegate.addReference(b,w.targetId,C))).next((()=>le.forEach(w.ds,(C=>_.persistence.referenceDelegate.removeReference(b,w.targetId,C)))))))))}catch(b){if(!Fo(b))throw b;ye(Qp,"Failed to update sequence numbers: "+b)}for(const b of p){const w=b.targetId;if(!b.fromCache){const C=_.Ms.get(w),z=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(w,F)}}})(i.localStore,u))}async function iI(s,e){const t=je(s);if(!t.currentUser.isEqual(e)){ye(ig,"User change. New user:",e.toKey());const i=await jS(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new ge(re.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kc(t,i.Ls)}}function aI(s,e){const t=je(s),i=t.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let o=Fe();const u=t.Iu.get(e);if(!u)return o;for(const d of u){const g=t.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function KS(s){const e=je(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=FS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tI.bind(null,e),e.Pu.H_=Fj.bind(null,e.eventManager),e.Pu.yu=Hj.bind(null,e.eventManager),e}function oI(s){const e=je(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hj(this.persistence,new lj,e.initialUser,this.serializer)}Cu(e){return new CS($p.mi,this.serializer)}Du(e){return new vj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class lI extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ye(this.persistence.referenceDelegate instanceof Lh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new CS((i=>Lh.mi(i,t)),this.serializer)}}class up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>u0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iI.bind(null,this.syncEngine),await qj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Bj})()}createDatastore(e){const t=ad(e.databaseInfo.databaseId),i=(function(u){return new xj(u)})(e.databaseInfo);return(function(u,d,g,y){return new Aj(u,d,g,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,u,d,g){return new Cj(i,o,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>u0(this.syncEngine,t,0)),(function(){return r0.v()?new r0:new _j})())}createSyncEngine(e,t){return(function(o,u,d,g,y,p,_){const b=new Qj(o,u,d,g,y,p);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=je(t);ye(Ea,"RemoteStore shutting down."),i.Ea.add(5),await Mc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class cI{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{ye(bi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ye(bi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=eg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function km(s,e){s.asyncQueue.verifyOperationInProgress(),ye(bi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await jS(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function d0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await uI(s);ye(bi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>a0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>a0(e.remoteStore,o))),s._onlineComponents=e}async function uI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ye(bi,"Using user provided OfflineComponentProvider");try{await km(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),await km(s,new qh)}}else ye(bi,"Using default OfflineComponentProvider"),await km(s,new lI(void 0));return s._offlineComponents}async function QS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ye(bi,"Using user provided OnlineComponentProvider"),await d0(s,s._uninitializedComponentsProvider._online)):(ye(bi,"Using default OnlineComponentProvider"),await d0(s,new up))),s._onlineComponents}function hI(s){return QS(s).then((e=>e.syncEngine))}async function zh(s){const e=await QS(s),t=e.eventManager;return t.onListen=Yj.bind(null,e.syncEngine),t.onUnlisten=Zj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Xj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Jj.bind(null,e.syncEngine),t}function dI(s,e,t={}){const i=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,y,p){const _=new og({next:w=>{_.Nu(),d.enqueueAndForget((()=>ng(u,b)));const C=w.docs.has(g);!C&&w.fromCache?p.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&y&&y.source==="server"?p.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new rg(ed(g.path),_,{includeMetadataChanges:!0,qa:!0});return tg(u,b)})(await zh(s),s.asyncQueue,e,t,i))),i.promise}function fI(s,e,t={}){const i=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,y,p){const _=new og({next:w=>{_.Nu(),d.enqueueAndForget((()=>ng(u,b))),w.fromCache&&y.source==="server"?p.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new rg(g,_,{includeMetadataChanges:!0,qa:!0});return tg(u,b)})(await zh(s),s.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firestore.googleapis.com",m0=!0;class p0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XS,this.ssl=m0}else this.host=e.host,this.ssl=e.ssl??m0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GC)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YS(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _R;switch(i.type){case"firstParty":return new xR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=f0.get(t);i&&(ye("ComponentProvider","Removing Datastore"),f0.delete(t),i.terminate())})(this),Promise.resolve()}}function mI(s,e,t,i={}){s=Cn(s,cd);const o=Lo(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${t}`;o&&(G0(`https://${g}`),$0("Firestore",!0)),u.host!==XS&&u.host!==g&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:i};if(!pa(y,d)&&(s._setSettings(y),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=hn.MOCK_USER;else{p=Aw(i.mockUserToken,s._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new hn(b)}s._authCredentials=new ER(new q1(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ni(this.firestore,e,this._query)}}class bt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Dc(t,bt._jsonSchema))return new bt(e,i||null,new be(lt.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Mt("string",bt._jsonSchemaVersion),referencePath:Mt("string")};class gi extends Ni{constructor(e,t,i){super(e,t,ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new be(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function Ve(s,e,...t){if(s=kt(s),z1("collection","path",e),s instanceof cd){const i=lt.fromString(e,...t);return RE(i),new gi(s,null,i)}{if(!(s instanceof bt||s instanceof gi))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...t));return RE(i),new gi(s.firestore,null,i)}}function ot(s,e,...t){if(s=kt(s),arguments.length===1&&(e=Op.newId()),z1("doc","path",e),s instanceof cd){const i=lt.fromString(e,...t);return AE(i),new bt(s,null,new be(i))}{if(!(s instanceof bt||s instanceof gi))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...t));return AE(i),new bt(s.firestore,s instanceof gi?s.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="AsyncQueue";class y0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DS(this,"async_queue_retry"),this._c=()=>{const i=Mm();i&&ye(g0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Mm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fo(e))throw e;ye(g0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",v0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Jp.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:v0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function v0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class _r extends cd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new y0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}}function pI(s,e){const t=typeof s=="object"?s:X0(),i=typeof s=="string"?s:Dh,o=Tp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=ww("firestore");u&&mI(o,...u)}return o}function ud(s){if(s._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||gI(s),s._firestoreClient}function gI(s){const e=s._freezeSettings(),t=(function(o,u,d,g){return new qR(o,u,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,YS(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new cI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(rn.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dc(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Mt("string",Jn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ls._jsonSchemaVersion}}static fromJSON(e){if(Dc(e,Ls._jsonSchema))return new Ls(e.latitude,e.longitude)}}Ls._jsonSchemaVersion="firestore/geoPoint/1.0",Ls._jsonSchema={type:Mt("string",Ls._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dc(e,Us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Us(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Us._jsonSchemaVersion="firestore/vectorValue/1.0",Us._jsonSchema={type:Mt("string",Us._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=/^__.*__$/;class vI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class WS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:s})}}class cg{constructor(e,t,i,o,u,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZS(this.Ac)&&yI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _I{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ad(e)}Cc(e,t,i,o=!1){return new cg({Ac:e,methodName:t,Dc:i,path:nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(s){const e=s._freezeSettings(),t=ad(s._databaseId);return new _I(s._databaseId,!!e.ignoreUndefinedProperties,t)}function JS(s,e,t,i,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);ug("Data must be an object, but it was:",d,i);const g=eb(i,d);let y,p;if(u.merge)y=new Ln(d.fieldMask),p=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const w=hp(e,b,t);if(!d.contains(w))throw new ge(re.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nb(_,w)||_.push(w)}y=new Ln(_),p=d.fieldTransforms.filter((b=>y.covers(b.field)))}else y=null,p=d.fieldTransforms;return new vI(new Rn(g),y,p)}class fd extends lg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function EI(s,e,t,i){const o=s.Cc(1,e,t);ug("Data must be an object, but it was:",o,i);const u=[],d=Rn.empty();Ti(i,((y,p)=>{const _=hg(e,y,t);p=kt(p);const b=o.yc(_);if(p instanceof fd)u.push(_);else{const w=Vc(p,b);w!=null&&(u.push(_),d.set(_,w))}}));const g=new Ln(u);return new WS(d,g,o.fieldTransforms)}function SI(s,e,t,i,o,u){const d=s.Cc(1,e,t),g=[hp(e,i,t)],y=[o];if(u.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)g.push(hp(e,u[w])),y.push(u[w+1]);const p=[],_=Rn.empty();for(let w=g.length-1;w>=0;--w)if(!nb(p,g[w])){const C=g[w];let z=y[w];z=kt(z);const F=d.yc(C);if(z instanceof fd)p.push(C);else{const L=Vc(z,F);L!=null&&(p.push(C),_.set(C,L))}}const b=new Ln(p);return new WS(_,b,d.fieldTransforms)}function bI(s,e,t,i=!1){return Vc(t,s.Cc(i?4:3,e))}function Vc(s,e){if(tb(s=kt(s)))return ug("Unsupported field value:",e,s),eb(s,e);if(s instanceof lg)return(function(i,o){if(!ZS(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const g of i){let y=Vc(g,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ut.fromDate(i);return{timestampValue:Vh(o.serializer,u)}}if(i instanceof ut){const u=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vh(o.serializer,u)}}if(i instanceof Ls)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Jn)return{bytesValue:SS(o.serializer,i._byteString)};if(i instanceof bt){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Hp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Us)return(function(d,g){return{mapValue:{fields:{[X1]:{stringValue:W1},[Ph]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return qp(g.serializer,p)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Xh(i)}`)})(s,e)}function eb(s,e){const t={};return H1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(s,((i,o)=>{const u=Vc(o,e.mc(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function tb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ut||s instanceof Ls||s instanceof Jn||s instanceof bt||s instanceof lg||s instanceof Us)}function ug(s,e,t){if(!tb(t)||!B1(t)){const i=Xh(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function hp(s,e,t){if((e=kt(e))instanceof hd)return e._internalPath;if(typeof e=="string")return hg(s,e);throw Bh("Field path arguments must be of type string or ",s,!1,void 0,t)}const xI=new RegExp("[~\\*/\\[\\]]");function hg(s,e,t){if(e.search(xI)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Bh(s,e,t,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new ge(re.INVALID_ARGUMENT,g+s+y)}function nb(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(md("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TI extends sb{data(){return super.data()}}function md(s,e){return typeof e=="string"?hg(s,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dg{}class ib extends dg{}function ht(s,e,...t){let i=[];e instanceof dg&&i.push(e),i=i.concat(t),(function(u){const d=u.filter((y=>y instanceof fg)).length,g=u.filter((y=>y instanceof pd)).length;if(d>1||d>0&&g>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class pd extends ib{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new pd(e,t,i)}_apply(e){const t=this._parse(e);return ab(e._query,t),new Ni(e.firestore,e.converter,ep(e._query,t))}_parse(e){const t=dd(e.firestore);return(function(u,d,g,y,p,_,b){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){S0(b,_);const z=[];for(const F of b)z.push(E0(y,u,F));w={arrayValue:{values:z}}}else w=E0(y,u,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||S0(b,_),w=bI(g,d,b,_==="in"||_==="not-in");return Ot.create(p,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Qe(s,e,t){const i=e,o=md("where",s);return pd._create(o,i,t)}class fg extends dg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:gs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let d=o;const g=u.getFlattenedFilters();for(const y of g)ab(d,y),d=ep(d,y)})(e._query,t),new Ni(e.firestore,e.converter,ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mg extends ib{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mg(e,t)}_apply(e){const t=(function(o,u,d){if(o.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(u,d)})(e._query,this._field,this._direction);return new Ni(e.firestore,e.converter,(function(o,u){const d=o.explicitOrderBy.concat([u]);return new Ho(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function da(s,e="asc"){const t=e,i=md("orderBy",s);return mg._create(i,t)}function E0(s,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iS(e)&&t.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(lt.fromString(t));if(!be.isDocumentKey(i))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kE(s,new be(i))}if(t instanceof bt)return kE(s,t._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function S0(s,e){if(!Array.isArray(s)||s.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ab(s,e){const t=(function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wI{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ti(e,((o,u)=>{i[o]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Ph].arrayValue?.values?.map((i=>Ct(i.doubleValue)));return new Us(t)}convertGeoPoint(e){return new Ls(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Jh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=vi(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Ye(AS(i),9688,{name:e});const o=new _c(i.get(1),i.get(3)),u=new be(i.popFirst(5));return o.isEqual(t)||yr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class ac{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends sb{constructor(e,t,i,o,u,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(md("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:Mt("string",fa._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Sh extends fa{data(e={}){return super.data(e)}}class ma{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ac(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Sh(this._firestore,this._userDataWriter,i.key,i,new ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const y=new Sh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ac(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new Sh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ac(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),_=d.indexOf(g.doc.key)),{type:NI(g.type),doc:y,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(s){s=Cn(s,bt);const e=Cn(s.firestore,_r);return dI(ud(e),s._key).then((t=>cb(e,s,t)))}ma._jsonSchemaVersion="firestore/querySnapshot/1.0",ma._jsonSchema={type:Mt("string",ma._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class pg extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function st(s){s=Cn(s,Ni);const e=Cn(s.firestore,_r),t=ud(e),i=new pg(e);return rb(s._query),fI(t,s._query).then((o=>new ma(e,i,s,o)))}function AI(s,e,t){s=Cn(s,bt);const i=Cn(s.firestore,_r),o=ob(s.converter,e);return gd(i,[JS(dd(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,es.none())])}function Un(s,e,t,...i){s=Cn(s,bt);const o=Cn(s.firestore,_r),u=dd(o);let d;return d=typeof(e=kt(e))=="string"||e instanceof hd?SI(u,"updateDoc",s._key,e,t,i):EI(u,"updateDoc",s._key,e),gd(o,[d.toMutation(s._key,es.exists(!0))])}function ur(s){return gd(Cn(s.firestore,_r),[new zp(s._key,es.none())])}function Er(s,e){const t=Cn(s.firestore,_r),i=ot(s),o=ob(s.converter,e);return gd(t,[JS(dd(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,es.exists(!1))]).then((()=>i))}function lb(s,...e){s=kt(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||_0(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(_0(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,d,g;if(s instanceof bt)d=Cn(s.firestore,_r),g=ed(s._key.path),u={next:y=>{e[i]&&e[i](cb(d,s,y))},error:e[i+1],complete:e[i+2]};else{const y=Cn(s,Ni);d=Cn(y.firestore,_r),g=y._query;const p=new pg(d);u={next:_=>{e[i]&&e[i](new ma(d,p,y,_))},error:e[i+1],complete:e[i+2]},rb(s._query)}return(function(p,_,b,w){const C=new og(w),z=new rg(_,C,b);return p.asyncQueue.enqueueAndForget((async()=>tg(await zh(p),z))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>ng(await zh(p),z)))}})(ud(d),g,o,u)}function gd(s,e){return(function(i,o){const u=new fr;return i.asyncQueue.enqueueAndForget((async()=>eI(await hI(i),o,u))),u.promise})(ud(s),e)}function cb(s,e,t){const i=t.docs.get(e._key),o=new pg(s);return new fa(s,o,e._key,i,new ac(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){zo=o})(Uo),Ao(new ga("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),g=new _r(new SR(i.getProvider("auth-internal")),new TR(d,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(p.options.projectId,_)})(d,o),d);return u={useFetchStreams:t,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),mi(xE,TE,e),mi(xE,TE,"esm2020")})();const So={FIREBASE:{API_KEY:"AIzaSyBnil9YV9LpAVA4GLUjoPoq7PSgq3DYYgk",AUTH_DOMAIN:"animals-adoption-app-v2.firebaseapp.com",PROJECT_ID:"animals-adoption-app-v2",MESSAGING_SENDER_ID:"702758490735",APP_ID:"1:702758490735:web:animals-adoption-app-v2"},APP:{NAME:"Expo2025 - Adopción de Mascotas",VERSION:"1.0.0",ENVIRONMENT:"development"},SECURITY:{MAX_SHELTERS_PER_USER:parseInt("3")||3,MAX_PETS_PER_USER:parseInt("10")||10,MAX_DAILY_CREATIONS:parseInt("5")||5,REQUEST_TIMEOUT:parseInt("10000")||1e4},FEATURES:{ENABLE_STORAGE:!1,ENABLE_ANALYTICS:!1,ENABLE_MESSAGING:!1}},RI=()=>{const s=["FIREBASE.API_KEY","FIREBASE.AUTH_DOMAIN","FIREBASE.PROJECT_ID","FIREBASE.MESSAGING_SENDER_ID","FIREBASE.APP_ID"],e=[];return s.forEach(t=>{const i=t.split(".");let o=So;for(const u of i)o=o?.[u];o||e.push(t)}),e.length>0&&(console.warn("⚠️ Variables de entorno faltantes:",e),console.warn("💡 Usando valores por defecto. En producción, configura las variables de entorno.")),e.length===0};RI();const CI={apiKey:So.FIREBASE.API_KEY,authDomain:So.FIREBASE.AUTH_DOMAIN,projectId:So.FIREBASE.PROJECT_ID,messagingSenderId:So.FIREBASE.MESSAGING_SENDER_ID,appId:So.FIREBASE.APP_ID},gg=Y0(CI),ve=pI(gg),oc=pR(gg);console.log("Firebase initialized:",gg);console.log("Firestore database:",ve);console.log("Firebase auth:",oc);const gt={NETWORK:"NETWORK_ERROR",AUTH:"AUTH_ERROR",VALIDATION:"VALIDATION_ERROR",PERMISSION:"PERMISSION_ERROR",NOT_FOUND:"NOT_FOUND_ERROR",RATE_LIMIT:"RATE_LIMIT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},b0={"auth/user-not-found":gt.AUTH,"auth/wrong-password":gt.AUTH,"auth/email-already-in-use":gt.AUTH,"auth/weak-password":gt.VALIDATION,"auth/invalid-email":gt.VALIDATION,"permission-denied":gt.PERMISSION,"not-found":gt.NOT_FOUND,unavailable:gt.NETWORK,"deadline-exceeded":gt.NETWORK,"resource-exhausted":gt.RATE_LIMIT},jI={[gt.NETWORK]:{title:"Error de Conexión",message:"No se pudo conectar al servidor. Verifica tu conexión a internet.",action:"Reintentar"},[gt.AUTH]:{title:"Error de Autenticación",message:"Credenciales incorrectas o sesión expirada.",action:"Iniciar Sesión"},[gt.VALIDATION]:{title:"Datos Inválidos",message:"Por favor, verifica que todos los campos estén correctamente completados.",action:"Corregir"},[gt.PERMISSION]:{title:"Sin Permisos",message:"No tienes permisos para realizar esta acción.",action:"Volver"},[gt.NOT_FOUND]:{title:"No Encontrado",message:"El recurso solicitado no existe.",action:"Volver"},[gt.RATE_LIMIT]:{title:"Demasiadas Solicitudes",message:"Has realizado demasiadas solicitudes. Espera un momento antes de intentar nuevamente.",action:"Esperar"},[gt.UNKNOWN]:{title:"Error Inesperado",message:"Ocurrió un error inesperado. Por favor, intenta nuevamente.",action:"Reintentar"}};class II{constructor(){this.errorLog=[],this.maxLogSize=100}processError(e){console.error("ErrorHandler: Processing error:",e);let t=gt.UNKNOWN,i=e.message||"Error desconocido";e.code&&b0[e.code]?t=b0[e.code]:e.name==="FirebaseError"?t=gt.NETWORK:e.message?.includes("permission")?t=gt.PERMISSION:e.message?.includes("not found")?t=gt.NOT_FOUND:e.message?.includes("validation")&&(t=gt.VALIDATION);const o={id:Date.now().toString(),type:t,originalError:e,message:i,timestamp:new Date().toISOString(),userFriendly:jI[t],stack:e.stack};return this.addToLog(o),o}addToLog(e){this.errorLog.unshift(e),this.errorLog.length>this.maxLogSize&&(this.errorLog=this.errorLog.slice(0,this.maxLogSize))}getUserFriendlyMessage(e){return this.processError(e).userFriendly}showErrorNotification(e,t={}){const i=this.processError(e),{title:o,message:u,action:d}=i.userFriendly,g={id:i.id,type:"error",title:o,message:u,action:d,timestamp:i.timestamp,...t};return console.error("Error Notification:",g),window.dispatchEvent(new CustomEvent("error-notification",{detail:g})),g}async retryWithBackoff(e,t=3,i=1e3){let o;for(let u=1;u<=t;u++)try{return await e()}catch(d){if(o=d,u===t)throw d;const g=i*Math.pow(2,u-1);console.log(`Retry attempt ${u}/${t} in ${g}ms`),await new Promise(y=>setTimeout(y,g))}throw o}getErrorStats(){const e={total:this.errorLog.length,byType:{},recent:this.errorLog.slice(0,10)};return this.errorLog.forEach(t=>{e.byType[t.type]=(e.byType[t.type]||0)+1}),e}clearLog(){this.errorLog=[]}}const x0=new II,ub=(s,e="")=>{console.error(`Firebase Error in ${e}:`,s);const t=x0.processError(s);return x0.showErrorNotification(t,{context:e,showRetry:t.type===gt.NETWORK})},Bt={name:{required:!0,minLength:2,maxLength:100,pattern:/^[a-zA-ZáéíóúÁÉÍÓÚñÑ0-9\s\-\.\(\)]+$/,message:"El nombre debe tener entre 2 y 100 caracteres y contener solo letras, números, espacios, guiones, puntos y paréntesis"},email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Ingresa un email válido"},phone:{required:!1,pattern:/^[\+]?[1-9][\d]{0,15}$/,message:"Ingresa un número de teléfono válido"},password:{required:!0,minLength:6,maxLength:128,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"La contraseña debe tener al menos 6 caracteres, una mayúscula, una minúscula y un número"},imageUrl:{required:!0,pattern:/^https?:\/\/.+/,message:"Ingresa una URL válida de imagen"},description:{required:!1,maxLength:1e3,message:"La descripción no puede exceder 1000 caracteres"},location:{required:!0,minLength:3,maxLength:200,message:"La ubicación debe tener entre 3 y 200 caracteres"},age:{required:!0,pattern:/^\d+(\s*(años?|meses?|semanas?))?$/i,message:"Ingresa una edad válida (ej: 2 años, 6 meses)"},breed:{required:!1,maxLength:100,message:"La raza no puede exceder 100 caracteres"}};class DI{constructor(){this.errors={}}validateField(e,t,i=null){const o=i||Bt[e];return o?o.required&&(!t||t.trim()==="")?{isValid:!1,message:`${e} es requerido`}:!o.required&&(!t||t.trim()==="")?{isValid:!0,message:""}:o.minLength&&t.length<o.minLength?{isValid:!1,message:`${e} debe tener al menos ${o.minLength} caracteres`}:o.maxLength&&t.length>o.maxLength?{isValid:!1,message:`${e} no puede exceder ${o.maxLength} caracteres`}:o.pattern&&!o.pattern.test(t)?{isValid:!1,message:o.message||`${e} tiene un formato inválido`}:{isValid:!0,message:""}:{isValid:!0,message:""}}validateForm(e,t={}){this.errors={};let i=!0;return Object.keys(e).forEach(o=>{const u=t[o]||Bt[o];if(u){const d=this.validateField(o,e[o],u);d.isValid||(this.errors[o]=d.message,i=!1)}}),{isValid:i,errors:this.errors}}validatePetData(e){const t={name:Bt.name,type:{required:!0,pattern:/^(Perro|Gato|Conejo|Hamster)$/,message:"El tipo debe ser Perro, Gato, Conejo o Hamster"},age:Bt.age,gender:{required:!0,pattern:/^(macho|hembra)$/i,message:"El género debe ser macho o hembra"},location:Bt.location,img:Bt.imageUrl,description:Bt.description,breed:Bt.breed};return this.validateForm(e,t)}validateUserData(e){const t={name:Bt.name,email:Bt.email,phone:Bt.phone,address:{required:!1,maxLength:200,message:"La dirección no puede exceder 200 caracteres"}};return this.validateForm(e,t)}validateShelterData(e){const t={name:Bt.name,location:Bt.location,description:Bt.description,phone:Bt.phone,email:Bt.email};return this.validateForm(e,t)}validateAdoptionRequestData(e){const t={adopterName:Bt.name,adopterEmail:Bt.email,adopterPhone:Bt.phone,message:{required:!1,maxLength:500,message:"El mensaje no puede exceder 500 caracteres"}};return this.validateForm(e,t)}getFieldError(e){return this.errors[e]||""}clearErrors(){this.errors={}}hasErrors(){return Object.keys(this.errors).length>0}}const yg=new DI,dp={getNotifications:async s=>{try{const e=ht(Ve(ve,"notifications"),Qe("userId","==",s),da("timestamp","desc"));return(await st(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting notifications:",e),[]}},createNotification:async s=>{try{console.log("notificationService.createNotification called with:",s);const e={...s,timestamp:new Date().toISOString(),read:!1};console.log("Creating notification document:",e);const t=await Er(Ve(ve,"notifications"),e);return console.log("✅ Notification created with ID:",t.id),t.id}catch(e){throw console.error("❌ Error creating notification:",e),e}},markAsRead:async s=>{try{await Un(ot(ve,"notifications",s),{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),e}},subscribeToNotifications:(s,e)=>{const t=ht(Ve(ve,"notifications"),Qe("userId","==",s),da("timestamp","desc"));return lb(t,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})},getAllNotifications:async()=>{try{return(await st(Ve(ve,"notifications"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting all notifications:",s),[]}}},fn={getConversations:async s=>{try{const e=ht(Ve(ve,"conversations"),Qe("participants","array-contains",s),da("lastMessageTime","desc"));return(await st(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting conversations:",e),[]}},createConversation:async(s,e=null)=>{try{const t={participants:s,petId:e,lastMessage:"",lastMessageTime:new Date().toISOString(),createdAt:new Date().toISOString()};return(await Er(Ve(ve,"conversations"),t)).id}catch(t){throw console.error("Error creating conversation:",t),t}},getMessages:async s=>{try{const e=ht(Ve(ve,"messages"),Qe("conversationId","==",s),da("timestamp","asc"));return(await st(e)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Error getting messages:",e),[]}},subscribeToMessages:(s,e)=>{console.log("chatService.subscribeToMessages called for:",s);const t=ht(Ve(ve,"messages"),Qe("conversationId","==",s),da("timestamp","asc"));return lb(t,i=>{console.log("chatService.subscribeToMessages: received snapshot with",i.docs.length,"messages");const o=i.docs.map(u=>({id:u.id,...u.data()}));console.log("chatService.subscribeToMessages: processed messages:",o),e(o)},i=>{console.error("chatService.subscribeToMessages error:",i)})},sendMessage:async(s,e,t)=>{try{console.log("chatService.sendMessage called:",{conversationId:s,senderId:e,messageText:t});const i=await Mo(ot(ve,"conversations",s));if(!i.exists())throw new Error("Conversación no encontrada");const o=i.data();if(!o.participants.includes(e))throw new Error("Usuario no autorizado para enviar mensajes en esta conversación");const d=(await bn.getUserProfile(e))?.name||"Usuario",g={conversationId:s,senderId:e,senderName:d,message:t,timestamp:new Date().toISOString(),read:!1,participants:o.participants},y=await Er(Ve(ve,"messages"),g);return console.log("✅ Message sent with ID:",y.id),await Un(ot(ve,"conversations",s),{lastMessage:t,lastMessageTime:new Date().toISOString()}),y.id}catch(i){throw console.error("Error sending message:",i),i}},getOrCreateConversation:async(s,e,t=null)=>{try{console.log("chatService.getOrCreateConversation called:",{userId1:s,userId2:e,petId:t});const i=ht(Ve(ve,"conversations"),Qe("participants","array-contains",s)),u=(await st(i)).docs.find(g=>{const y=g.data();return y.participants.includes(e)&&y.participants.includes(s)});if(u)return console.log("✅ Found existing conversation:",u.id),t&&u.data().petId!==t&&(console.log("Updating conversation with new petId:",t),await Un(ot(ve,"conversations",u.id),{petId:t,lastMessageTime:new Date().toISOString()})),u.id;const d=await fn.createConversation([s,e],t);return console.log("✅ Created new conversation:",d),d}catch(i){throw console.error("Error getting or creating conversation:",i),i}},markMessagesAsRead:async(s,e)=>{try{const t=ht(Ve(ve,"messages"),Qe("conversationId","==",s),Qe("senderId","!=",e),Qe("read","==",!1)),o=(await st(t)).docs.map(u=>Un(u.ref,{read:!0}));await Promise.all(o),console.log(`✅ Marked ${o.length} messages as read`)}catch(t){console.error("Error marking messages as read:",t)}},deleteConversation:async s=>{try{console.log("chatService.deleteConversation called for:",s);const e=ht(Ve(ve,"messages"),Qe("conversationId","==",s)),t=await st(e);console.log(`Found ${t.size} messages to delete`);const i=t.docs.map(o=>(console.log("Deleting message:",o.id),ur(o.ref)));return i.length>0&&(await Promise.all(i),console.log("✅ Deleted all messages")),console.log("Deleting conversation:",s),await ur(ot(ve,"conversations",s)),console.log("✅ Conversation deleted successfully"),{success:!0,deletedMessages:t.size}}catch(e){throw console.error("Error deleting conversation:",e),e}}},jt={getPets:async()=>{try{return(await st(Ve(ve,"pets"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error getting pets:",s),[]}},getPetsByOwner:async s=>{try{console.log("petService.getPetsByOwner called for ownerId:",s);const e=ht(Ve(ve,"pets"),Qe("ownerId","==",s)),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for owner:",i),i}catch(e){return console.error("Error getting pets by owner:",e),[]}},getPetsByShelter:async s=>{try{console.log("petService.getPetsByShelter called for shelterId:",s);const e=ht(Ve(ve,"pets"),Qe("shelterId","==",s)),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Pets found for shelter:",i),i}catch(e){return console.error("Error getting pets by shelter:",e),[]}},getPetById:async s=>{try{const e=ot(ve,"pets",s),t=await Mo(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){return console.error("Error getting pet:",e),null}},createPet:async s=>{try{if(console.log("petService.createPet called with data:",s),!s.ownerId)throw new Error("Usuario no autenticado");const e=yg.validatePetData(s);if(!e.isValid){const i=Object.values(e.errors).join(", ");throw new Error(`Datos inválidos: ${i}`)}const t=await Er(Ve(ve,"pets"),{...s,createdAt:new Date().toISOString(),status:"available",adoptionRequests:0,ownerId:s.ownerId||"",ownerName:s.ownerName||"",shelterId:s.shelterId||null,shelterName:s.shelterName||null});return console.log("✅ Pet created successfully with ID:",t.id),s.shelterId&&await sn.simulateShelterReview(s.shelterId),t.id}catch(e){throw console.error("❌ Error creating pet:",e),console.error("Error details:",{code:e.code,message:e.message,petData:s}),ub(e,"createPet"),e}},updatePet:async(s,e)=>{try{await Un(ot(ve,"pets",s),{...e,updatedAt:new Date().toISOString()})}catch(t){throw console.error("Error updating pet:",t),t}},updatePetStatus:async(s,e)=>{try{console.log("petService.updatePetStatus called for petId:",s,"status:",e),await Un(ot(ve,"pets",s),{status:e,updatedAt:new Date().toISOString()}),console.log("✅ Pet status updated successfully")}catch(t){throw console.error("Error updating pet status:",t),t}},associatePetsWithPremiumShelter:async(s,e)=>{try{console.log("petService.associatePetsWithPremiumShelter called for userId:",s,"shelterId:",e);const t=await jt.getPetsByOwner(s);console.log("Mascotas del usuario encontradas:",t.length),console.log("Detalles de las mascotas:",t.map(u=>({id:u.id,name:u.name,shelterId:u.shelterId,shelterName:u.shelterName})));const i=await sn.getShelterById(e);if(!i)throw new Error("Refugio no encontrado");console.log("Refugio encontrado:",i.name,"isPremium:",i.isPremium),console.log("Actualizando TODAS las mascotas del usuario con el refugio premium");const o=t.map(async u=>{console.log("Actualizando mascota:",u.name,"con refugio:",i.name);try{await jt.updatePet(u.id,{shelterId:e,shelterName:i.name}),console.log("✅ Mascota actualizada exitosamente:",u.name)}catch(d){console.error("❌ Error actualizando mascota:",u.name,d)}});return await Promise.all(o),console.log("✅ Mascotas asociadas con refugio premium exitosamente"),{updated:t.length}}catch(t){throw console.error("Error associating pets with premium shelter:",t),t}},deletePet:async s=>{try{console.log("petService.deletePet called for petId:",s);const e=await Mo(ot(ve,"pets",s));if(!e.exists())throw new Error("Mascota no encontrada");const i=e.data().name;console.log("Deleting pet:",i),console.log("Deleting adoption requests for pet:",s);const o=ht(Ve(ve,"adoptionRequests"),Qe("petId","==",s)),d=(await st(o)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${d.length} adoption requests to delete`);const g=d.map(H=>(console.log("Deleting adoption request:",H.id),ur(ot(ve,"adoptionRequests",H.id))));g.length>0&&(await Promise.all(g),console.log("✅ Deleted all adoption requests")),console.log("Deleting notifications for pet:",s);const y=ht(Ve(ve,"notifications"),Qe("petId","==",s)),_=(await st(y)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${_.length} notifications to delete`);const b=_.map(H=>(console.log("Deleting notification:",H.id),ur(ot(ve,"notifications",H.id))));b.length>0&&(await Promise.all(b),console.log("✅ Deleted all notifications")),console.log("Updating conversations for pet:",s);const w=ht(Ve(ve,"conversations"),Qe("petId","==",s)),z=(await st(w)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${z.length} conversations to update`);const F=z.map(H=>(console.log("Updating conversation:",H.id),Er(Ve(ve,"messages"),{conversationId:H.id,senderId:"system",message:`⚠️ ${i} ya no está disponible para adopción.`,timestamp:new Date().toISOString(),read:!1,isSystemMessage:!0})));F.length>0&&(await Promise.all(F),console.log("✅ Added system messages to conversations")),console.log("Deleting favorites for pet:",s);const L=ht(Ve(ve,"favorites"),Qe("petId","==",s)),ae=(await st(L)).docs.map(H=>({id:H.id,...H.data()}));console.log(`Found ${ae.length} favorites to delete`);const $=ae.map(H=>(console.log("Deleting favorite:",H.id),ur(ot(ve,"favorites",H.id))));return $.length>0&&(await Promise.all($),console.log("✅ Deleted all favorites")),console.log("Deleting pet document:",s),await ur(ot(ve,"pets",s)),console.log("✅ Pet deleted successfully"),{success:!0,deleted:{adoptionRequests:d.length,notifications:_.length,conversations:z.length,favorites:ae.length}}}catch(e){throw console.error("Error deleting pet:",e),e}}},PI={getCategories:async()=>{try{console.log("categoryService.getCategories called");const e=(await st(Ve(ve,"categories"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("Categories loaded from Firestore:",e),e}catch(s){return console.error("Error getting categories:",s),[]}},createCategory:async s=>{try{return(await Er(Ve(ve,"categories"),{...s,createdAt:new Date().toISOString()})).id}catch(e){throw console.error("Error creating category:",e),e}},updateCategory:async(s,e)=>{try{await Un(ot(ve,"categories",s),{...e,updatedAt:new Date().toISOString()})}catch(t){throw console.error("Error updating category:",t),t}}},ms={getFavorites:async s=>{try{console.log("favoriteService.getFavorites called for userId:",s);const e=ht(Ve(ve,"favorites"),Qe("userId","==",s)),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Favorites loaded from Firestore:",i),i}catch(e){return console.error("Error getting favorites:",e),[]}},addFavorite:async(s,e)=>{try{if(console.log("favoriteService.addFavorite called for userId:",s,"petId:",e),!s)throw new Error("Usuario no autenticado");const t=await Er(Ve(ve,"favorites"),{userId:s,petId:e,createdAt:new Date().toISOString()});return console.log("✅ Favorite added with ID:",t.id),t.id}catch(t){throw console.error("❌ Error adding favorite:",t),console.error("Error details:",{code:t.code,message:t.message,userId:s,petId:e}),t}},removeFavorite:async(s,e)=>{try{console.log("favoriteService.removeFavorite called for userId:",s,"petId:",e);const t=ht(Ve(ve,"favorites"),Qe("userId","==",s),Qe("petId","==",e)),i=await st(t);if(i.empty)return console.log("No favorite found to remove"),!1;const o=i.docs.map(u=>ur(u.ref));return await Promise.all(o),console.log("Favorite removed successfully"),!0}catch(t){throw console.error("Error removing favorite:",t),t}},isFavorite:async(s,e)=>{try{const t=ht(Ve(ve,"favorites"),Qe("userId","==",s),Qe("petId","==",e));return!(await st(t)).empty}catch(t){return console.error("Error checking favorite status:",t),!1}}},mn={createAdoptionRequest:async s=>{try{console.log("adoptionRequestService.createAdoptionRequest called:",s);const e=yg.validateAdoptionRequestData(s);if(!e.isValid){const i=Object.values(e.errors).join(", ");throw new Error(`Datos inválidos: ${i}`)}const t=await Er(Ve(ve,"adoptionRequests"),{...s,status:"pending",createdAt:new Date().toISOString()});if(console.log("Adoption request created with ID:",t.id),s.userId&&s.ownerId)try{console.log("Creating conversation between:",s.userId,"and",s.ownerId);const i=await fn.getOrCreateConversation(s.userId,s.ownerId,s.petId);console.log("✅ Conversation created with ID:",i),await fn.sendMessage(i,s.userId,`Solicitud de adopción para ${s.pet?.name||"la mascota"} creada. Pueden comunicarse aquí.`)}catch(i){console.error("Error creating conversation:",i)}return t.id}catch(e){throw console.error("Error creating adoption request:",e),e}},getAdoptionRequests:async s=>{try{console.log("adoptionRequestService.getAdoptionRequests called for userId:",s);const e=ht(Ve(ve,"adoptionRequests"),Qe("userId","==",s)),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests loaded from Firestore:",i),i}catch(e){return console.error("Error getting adoption requests:",e),[]}},getAdoptionRequestsForOwner:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestsForOwner called for ownerId:",s);const e=ht(Ve(ve,"adoptionRequests"),Qe("ownerId","==",s),da("createdAt","desc")),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log("Adoption requests for owner loaded from Firestore:",i),console.log("Number of requests found:",i.length),i}catch(e){return console.error("Error getting adoption requests for owner:",e),[]}},getAdoptionRequestById:async s=>{try{console.log("adoptionRequestService.getAdoptionRequestById called for requestId:",s);const e=ot(ve,"adoptionRequests",s),t=await Mo(e);if(t.exists()){const i={id:t.id,...t.data()};return console.log("Adoption request loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting adoption request:",e),null}},updateAdoptionRequestStatus:async(s,e,t="")=>{try{console.log("adoptionRequestService.updateAdoptionRequestStatus called for requestId:",s,"status:",e);const i={status:e,updatedAt:new Date().toISOString()};t&&(i.ownerNotes=t),await Un(ot(ve,"adoptionRequests",s),i),console.log("Adoption request status updated successfully")}catch(i){throw console.error("Error updating adoption request status:",i),i}},approveAdoptionRequest:async(s,e="")=>{try{console.log("adoptionRequestService.approveAdoptionRequest called for requestId:",s);const t=await mn.getAdoptionRequestById(s);if(!t)throw new Error("Solicitud no encontrada");const i=t.petId;console.log("Approving request for petId:",i),await mn.updateAdoptionRequestStatus(s,"approved",e),console.log("✅ Request approved:",s);const o=ht(Ve(ve,"adoptionRequests"),Qe("petId","==",i),Qe("status","==","pending")),d=(await st(o)).docs.map(y=>({id:y.id,...y.data()}));console.log(`Found ${d.length} pending requests for the same pet`);const g=d.filter(y=>y.id!==s).map(y=>(console.log("Auto-rejecting request:",y.id),mn.updateAdoptionRequestStatus(y.id,"rejected","Esta solicitud fue rechazada automáticamente porque se aprobó otra solicitud para la misma mascota.")));return g.length>0&&(await Promise.all(g),console.log(`✅ Auto-rejected ${g.length} other requests`)),await jt.updatePetStatus(i,"adopted"),console.log("✅ Pet status updated to adopted"),{approved:s,rejected:d.filter(y=>y.id!==s).map(y=>y.id)}}catch(t){throw console.error("Error approving adoption request:",t),t}},getPendingRequestsForPet:async s=>{try{console.log("adoptionRequestService.getPendingRequestsForPet called for petId:",s);const e=ht(Ve(ve,"adoptionRequests"),Qe("petId","==",s),Qe("status","==","pending"),da("createdAt","desc")),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return console.log(`Found ${i.length} pending requests for pet ${s}`),i}catch(e){return console.error("Error getting pending requests for pet:",e),[]}},rejectAdoptionRequest:async(s,e="")=>{try{await mn.updateAdoptionRequestStatus(s,"rejected",e)}catch(t){throw console.error("Error rejecting adoption request:",t),t}}},sn={getShelters:async()=>{try{console.log("shelterService.getShelters called");const e=(await st(Ve(ve,"shelters"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("Shelters loaded from Firestore:",e),e}catch(s){return console.error("Error getting shelters:",s),[]}},getShelterById:async s=>{try{console.log("shelterService.getShelterById called for shelterId:",s);const e=ot(ve,"shelters",s),t=await Mo(e);if(t.exists()){const i={id:t.id,...t.data()};return console.log("Shelter loaded from Firestore:",i),i}return null}catch(e){return console.error("Error getting shelter:",e),null}},getSheltersByOwner:async s=>{try{console.log("shelterService.getSheltersByOwner called for ownerId:",s);const e=ht(Ve(ve,"shelters"),Qe("ownerId","==",s)),i=(await st(e)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,u)=>{const d=new Date(o.createdAt||0);return new Date(u.createdAt||0)-d}),console.log("Shelters for owner loaded from Firestore:",i),i}catch(e){return console.error("Error getting shelters by owner:",e),[]}},createShelter:async s=>{try{if(console.log("shelterService.createShelter called:",s),!s.ownerId)throw new Error("❌ Error: ownerId es requerido para crear un refugio");const e=yg.validateShelterData(s);if(!e.isValid){const u=Object.values(e.errors).join(", ");throw new Error(`Datos inválidos: ${u}`)}const t=[/<script/i,/javascript:/i,/on\w+\s*=/i,/eval\(/i],i=JSON.stringify(s);for(const u of t)if(u.test(i))throw new Error("❌ Error: Datos contienen contenido sospechoso");const o=await Er(Ve(ve,"shelters"),{...s,createdAt:new Date().toISOString(),verified:!1,rating:0,petsCount:0,isPremium:!1,premiumExpiry:null,status:"pending"});return console.log("✅ Shelter created with ID:",o.id),o.id}catch(e){throw console.error("❌ Error creating shelter:",e),console.error("Error details:",{code:e.code,message:e.message,shelterData:s}),ub(e,"createShelter"),e}},updateShelter:async(s,e)=>{try{console.log("shelterService.updateShelter called for shelterId:",s,"updateData:",e),await Un(ot(ve,"shelters",s),{...e,updatedAt:new Date().toISOString()}),console.log("Shelter updated successfully")}catch(t){throw console.error("Error updating shelter:",t),t}},updateShelterStatus:async(s,e)=>{try{console.log("shelterService.updateShelterStatus called for shelterId:",s,"status:",e),await Un(ot(ve,"shelters",s),{status:e,updatedAt:new Date().toISOString()}),console.log("Shelter status updated successfully")}catch(t){throw console.error("Error updating shelter status:",t),t}},activatePremium:async(s,e=1)=>{try{console.log("shelterService.activatePremium called for shelterId:",s,"months:",e);const t=new Date;t.setMonth(t.getMonth()+e),await Un(ot(ve,"shelters",s),{isPremium:!0,premiumExpiry:t.toISOString(),updatedAt:new Date().toISOString()}),console.log("Premium subscription activated successfully")}catch(t){throw console.error("Error activating premium subscription:",t),t}},deactivatePremium:async s=>{try{console.log("shelterService.deactivatePremium called for shelterId:",s),await Un(ot(ve,"shelters",s),{isPremium:!1,premiumExpiry:null,updatedAt:new Date().toISOString()}),console.log("Premium subscription deactivated successfully")}catch(e){throw console.error("Error deactivating premium subscription:",e),e}},isPremiumActive:async s=>{try{const e=await sn.getShelterById(s);return!e||!e.isPremium?!1:e.premiumExpiry?new Date(e.premiumExpiry)>new Date:e.isPremium}catch(e){return console.error("Error checking premium status:",e),!1}},getPremiumShelters:async()=>{try{console.log("shelterService.getPremiumShelters called");const s=ht(Ve(ve,"shelters"),Qe("isPremium","==",!0)),t=(await st(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved"||i.status==="active"||i.status==="pending").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Premium shelters loaded from Firestore:",t),t}catch(s){return console.error("Error getting premium shelters:",s),[]}},getRegularShelters:async()=>{try{console.log("shelterService.getRegularShelters called");const s=ht(Ve(ve,"shelters"),Qe("isPremium","==",!1)),t=(await st(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="approved"||i.status==="active"||i.status==="pending").sort((i,o)=>new Date(o.createdAt||0)-new Date(i.createdAt||0));return console.log("Regular shelters loaded from Firestore:",t),t}catch(s){return console.error("Error getting regular shelters:",s),[]}},deleteShelter:async s=>{try{if(console.log("shelterService.deleteShelter called for shelterId:",s),!await sn.getShelterById(s))throw new Error("Refugio no encontrado");const t=ht(Ve(ve,"pets"),Qe("shelterId","==",s)),i=await st(t);console.log(`Found ${i.size} pets to delete for shelter`);const o=i.docs.map(u=>(console.log("Deleting pet:",u.id),ur(u.ref)));return o.length>0&&(await Promise.all(o),console.log("✅ Deleted all shelter pets")),await ur(ot(ve,"shelters",s)),console.log("✅ Shelter deleted successfully"),{success:!0,deletedPets:i.size}}catch(e){throw console.error("Error deleting shelter:",e),e}},simulateShelterReview:async s=>{try{console.log("🔍 Simulando revisión del refugio:",s);const e=await sn.getShelterById(s);if(!e){console.log("❌ Refugio no encontrado para revisión");return}const t=Math.random()*3e3+2e3;await new Promise(d=>setTimeout(d,t));const i=Math.random()>.1,o=i?"active":"pending";await sn.updateShelterStatus(s,o);const u={userId:e.ownerId,type:"shelter_review",title:i?"✅ Refugio Aprobado":"⏳ Refugio en Revisión",message:i?`¡Felicidades! Tu refugio "${e.name}" ha sido aprobado y está activo.`:`Tu refugio "${e.name}" está siendo revisado. Te notificaremos cuando esté listo.`,shelterId:s,shelterName:e.name};await dp.createNotification(u),console.log(`✅ Simulación de revisión completada: ${o}`)}catch(e){console.error("❌ Error en simulación de revisión:",e)}}},bn={createUserProfile:async(s,e)=>{try{await AI(ot(ve,"users",s),{...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()})}catch(t){throw console.error("Error creating user profile:",t),t}},getUserProfile:async s=>{try{console.log("getUserProfile called with userId:",s);const e=ot(ve,"users",s);console.log("Document reference created:",e.path);const t=await Mo(e);if(console.log("Document snapshot:",t.exists()?"exists":"does not exist"),t.exists()){const i={id:t.id,...t.data()};return console.log("User profile data:",i),i}return console.log("No user profile found"),null}catch(e){return console.error("Error getting user profile:",e),null}},getAllUsers:async()=>{try{console.log("getAllUsers called");const e=(await st(Ve(ve,"users"))).docs.map(t=>({uid:t.id,...t.data()}));return console.log(`Found ${e.length} users`),e}catch(s){return console.error("Error getting all users:",s),[]}},updateUserProfile:async(s,e)=>{try{await Un(ot(ve,"users",s),{...e,updatedAt:new Date().toISOString()})}catch(t){throw console.error("Error updating user profile:",t),t}}},hb=j.createContext(),Vt=()=>{const s=j.useContext(hb);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},OI=({children:s})=>{const[e,t]=j.useState(null),[i,o]=j.useState(!0);j.useEffect(()=>{console.log("AuthProvider: Setting up auth listener");const p=s2(oc,_=>{console.log("AuthProvider: Auth state changed:",_),_?console.log("AuthProvider: User authenticated:",{uid:_.uid,email:_.email,displayName:_.displayName,emailVerified:_.emailVerified}):console.log("AuthProvider: No user authenticated"),t(_),o(!1)},_=>{console.error("AuthProvider: Auth state error:",_),o(!1)});return()=>{console.log("AuthProvider: Cleaning up auth listener"),p()}},[]);const y={user:e,loading:i,register:async(p,_,b)=>{try{const C=(await WA(oc,p,_)).user;return await e2(C,{displayName:b.name}),console.log("Creating user profile with data:",{name:b.name,email:C.email,phone:b.phone||"",address:b.address||"",isShelter:b.isShelter||!1,shelterInfo:b.shelterInfo||null}),await bn.createUserProfile(C.uid,{name:b.name,email:C.email,phone:b.phone||"",address:b.address||"",isShelter:b.isShelter||!1,shelterInfo:b.shelterInfo||null}),console.log("User profile created successfully"),C}catch(w){throw console.error("Error registering user:",w),w}},login:async(p,_)=>{try{return(await ZA(oc,p,_)).user}catch(b){throw console.error("Error logging in:",b),b}},logout:async()=>{try{await r2(oc)}catch(p){throw console.error("Error logging out:",p),p}}};return l.jsx(hb.Provider,{value:y,children:s})},MI=({error:s,onClose:e,onRetry:t,autoClose:i=!0,duration:o=5e3})=>{const[u,d]=j.useState(!1),[g,y]=j.useState(!1);j.useEffect(()=>{if(s&&(d(!0),y(!1),i)){const F=setTimeout(()=>{p()},o);return()=>clearTimeout(F)}},[s,i,o]);const p=()=>{y(!0),setTimeout(()=>{d(!1),e?.()},300)},_=()=>{t?.(),p()};if(!u||!s)return null;const{title:b,message:w,action:C,type:z="error"}=s;return l.jsxs("div",{className:`error-notification ${g?"closing":""} ${z}`,children:[l.jsxs("div",{className:"error-notification-content",children:[l.jsxs("div",{className:"error-notification-icon",children:[z==="error"&&"⚠️",z==="warning"&&"⚠️",z==="success"&&"✅",z==="info"&&"ℹ️"]}),l.jsxs("div",{className:"error-notification-text",children:[l.jsx("h4",{className:"error-notification-title",children:b}),l.jsx("p",{className:"error-notification-message",children:w})]}),l.jsxs("div",{className:"error-notification-actions",children:[C==="Reintentar"&&t&&l.jsx("button",{className:"error-notification-retry-btn",onClick:_,children:"Reintentar"}),l.jsx("button",{className:"error-notification-close-btn",onClick:p,"aria-label":"Cerrar notificación",children:"✕"})]})]}),l.jsx("div",{className:"error-notification-progress",children:l.jsx("div",{className:"error-notification-progress-bar",style:{animationDuration:`${o}ms`,animationPlayState:i?"running":"paused"}})})]})},kI=()=>{const[s,e]=j.useState("dark");return j.useEffect(()=>{const o=localStorage.getItem("theme")||"dark",u="dark";e(u),document.documentElement.setAttribute("data-theme",u),document.body.setAttribute("data-theme",u)},[]),{currentTheme:s,toggleTheme:()=>{const o=s==="dark"?"light":"dark";e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o)},setTheme:o=>{(o==="dark"||o==="light")&&(e(o),localStorage.setItem("theme",o),document.documentElement.setAttribute("data-theme",o),document.body.setAttribute("data-theme",o))},isDark:s==="dark",isLight:s==="light"}};function Oe(){const s=vt(),e=ns(),{logout:t}=Vt(),i=()=>{s("/")},o=()=>{s("/profile")};return l.jsxs("nav",{className:"navbar",children:[l.jsx("div",{className:`nav-icon ${e.pathname==="/"?"active":""}`,title:"Inicio",onClick:i,children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:l.jsx("path",{d:"M12 3.172l8 7.2V20a1 1 0 01-1 1h-5v-6H10v6H5a1 1 0 01-1-1v-9.628l8-7.2z"})})}),l.jsx("div",{className:`nav-icon ${e.pathname==="/upload"?"active":""}`,title:"Subir Mascota",onClick:()=>s("/upload"),children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),l.jsx("div",{className:`nav-icon ${e.pathname==="/profile"?"active":""}`,title:"Perfil",onClick:o,children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:l.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]})}function VI(){const{user:s}=Vt(),e=vt(),t=ns(),[i,o]=j.useState([]),[u,d]=j.useState({name:"",address:""}),[g,y]=j.useState(""),[p,_]=j.useState(!0),[b,w]=j.useState([]),[C,z]=j.useState(["all"]),[F,L]=j.useState(!1),[Q,ae]=j.useState([]),[$,H]=j.useState([]),[M,V]=j.useState("user"),{currentTheme:R,toggleTheme:T}=kI(),A=t.state?.category||"";j.useEffect(()=>{const te=pe=>{F&&!pe.target.closest(".filter-dropdown")&&L(!1)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[F]);const I=async()=>{if(s?.uid)try{console.log("Loading favorites for user:",s.uid);const te=await ms.getFavorites(s.uid),pe=await Promise.all(te.map(async ce=>{const Me=await jt.getPetById(ce.petId);return{...ce,pet:Me}}));w(pe.filter(ce=>ce.pet)),console.log("Favorites loaded:",pe)}catch(te){console.error("Error loading favorites:",te)}},O=async()=>{try{console.log("Loading shelters...");const[te,pe]=await Promise.all([sn.getPremiumShelters(),sn.getRegularShelters()]),ce=[...te,...pe];ae(ce),console.log("🏠 Refugios cargados:",ce.length,"total")}catch(te){console.error("Error loading shelters:",te)}},U=async()=>{if(s?.uid)try{console.log("Loading user shelters...");const te=await sn.getSheltersByOwner(s.uid);if(H(te),te.length>0){const pe=te.some(ce=>ce.isPremium);V(pe?"premium":"shelter"),console.log("User type determined:",pe?"premium":"shelter")}else V("user"),console.log("User type determined: user");console.log("User shelters loaded:",te)}catch(te){console.error("Error loading user shelters:",te)}},D=async()=>{console.log("🔄 Recargando todos los datos..."),await O(),await U();const te=await jt.getPets();o(te),console.log("✅ Datos recargados")};j.useEffect(()=>{const te=()=>{console.log("🔄 Página enfocada, recargando datos..."),D()};return window.addEventListener("focus",te),()=>window.removeEventListener("focus",te)},[]),j.useEffect(()=>{(async()=>{if(console.log("Home useEffect - user:",s),console.log("Home useEffect - loading:",p),s)try{console.log("User UID:",s.uid),console.log("User displayName:",s.displayName),console.log("User email:",s.email),console.log("Loading profile for user:",s.uid);const pe=await bn.getUserProfile(s.uid);console.log("Profile loaded:",pe),pe?d({name:pe.name||"",address:pe.address||""}):(console.log("No profile found, using display name:",s.displayName),d({name:s.displayName||"",address:""})),await I(),await O(),await U(),await new Promise(Me=>setTimeout(Me,100));const ce=await jt.getPets();if(ce.length===0){const Me=[{name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro",status:"available",ownerId:"admin",description:"Bobby es un perro muy cariñoso y juguetón. Le encanta jugar con niños y es muy obediente."},{name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato",status:"available",ownerId:"admin",description:"Luna es una gata muy independiente pero cariñosa. Es perfecta para una familia tranquila."}];for(const Pe of Me)await jt.createPet(Pe);o(Me)}else o(ce)}catch(pe){console.error("Error loading data:",pe)}finally{_(!1)}else try{const pe=await jt.getPets();o(pe),await O()}catch(pe){console.error("Error loading pets:",pe),o([{id:1,name:"Bobby",breed:"Mestizo",gender:"Macho",age:"2 años",location:"San José",img:"https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=800&auto=format&fit=crop",type:"Perro"},{id:2,name:"Luna",breed:"Siames",gender:"Hembra",age:"1 año",location:"Cartago",img:"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=800&auto=format&fit=crop",type:"Gato"}])}finally{_(!1)}})()},[s,p]);const ue=j.useMemo(()=>{const te=g.trim().toLowerCase();let pe=i;return C.length===0||C.includes("all")?A&&(pe=i.filter(ce=>ce.type.toLowerCase()===A.toLowerCase())):pe=i.filter(ce=>C.some(Me=>{switch(Me){case"favorites":return s?.uid?b.map(gn=>gn.petId).includes(ce.id):!1;case"shelters":return ce.shelterId&&ce.shelterName;case"dogs":return ce.type.toLowerCase()==="perro";case"cats":return ce.type.toLowerCase()==="gato";case"others":return ce.type.toLowerCase()!=="perro"&&ce.type.toLowerCase()!=="gato";default:return!1}})),pe.filter(ce=>!te||[ce.name,ce.breed,ce.gender,ce.age,ce.location,ce.shelterName].filter(Boolean).some(Pe=>String(Pe).toLowerCase().includes(te)))},[i,g,C,A,b,s]),De=()=>{e("/categories")},ee=async(te,pe)=>{if(pe.stopPropagation(),!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{b.some(Me=>Me.petId===te.id)?(await ms.removeFavorite(s.uid,te.id),w(Me=>Me.filter(Pe=>Pe.petId!==te.id)),console.log("Pet removed from favorites")):(await ms.addFavorite(s.uid,te.id),w(Me=>[...Me,{petId:te.id,userId:s.uid,createdAt:new Date().toISOString()}]),console.log("Pet added to favorites"))}catch(ce){console.error("Error updating favorites:",ce),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},de=te=>b.some(pe=>pe.petId===te.id),X=te=>{z(pe=>{if(te==="all")return["all"];if(pe.includes(te)){const ce=pe.filter(Me=>Me!==te);return ce.length===0?["all"]:ce}else return[...pe.filter(Me=>Me!=="all"),te]})},Ee=()=>C.includes("all")||C.length===0?"Todos los filtros":C.length===1?{favorites:"Favoritas",shelters:"Refugios",dogs:"Perros",cats:"Gatos",others:"Otros"}[C[0]]||"Filtros":`${C.length} filtros`,k=te=>{e("/adopt",{state:{pet:te}})},ie=()=>{e("/tracking")},fe=()=>{e("/shelters")},me=()=>{e("/users")};return p?l.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"18px"},children:"Cargando..."}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",style:{paddingBottom:"90px"},children:[l.jsxs("header",{className:"modern-header",children:[l.jsxs("div",{className:"header-top",children:[l.jsxs("div",{className:"greeting-section",children:[l.jsxs("h1",{className:"greeting-title",children:["Hola, ",u.name||"Amigo"," 👋"]}),l.jsx("p",{className:"greeting-subtitle",children:"Encuentra tu compañero perfecto"})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx("button",{className:"conversations-button",onClick:()=>e("/conversations"),title:"Conversaciones",children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})}),l.jsx("div",{className:"user-avatar",onClick:()=>e("/profile"),children:l.jsx("div",{className:"avatar-circle",children:l.jsx("span",{className:"avatar-text",children:(u.name||"A").charAt(0).toUpperCase()})})})]})]}),l.jsxs("div",{className:"search-container",children:[l.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("input",{type:"text",placeholder:"Buscar mascotas...",value:g,onChange:te=>y(te.target.value),className:"search-input"}),l.jsx("button",{onClick:T,className:"theme-toggle-btn",title:R==="dark"?"Cambiar a modo claro":"Cambiar a modo oscuro",children:R==="dark"?l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5M17.6859 17.69L18.5 18.5M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsxs("button",{className:"quick-action-btn",onClick:ie,children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("span",{children:"Seguimiento"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:me,children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("span",{children:"Usuarios"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:fe,children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("span",{children:"Refugios"})]})]})]}),l.jsxs("main",{className:"main-content",children:[l.jsx("div",{className:"filter-container",children:l.jsxs("div",{className:"filter-dropdown",children:[l.jsxs("button",{className:"filter-trigger",onClick:()=>L(!F),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"})}),l.jsx("span",{className:"filter-label",children:Ee()}),l.jsx("svg",{className:`filter-arrow ${F?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),F&&l.jsxs("div",{className:"filter-options",children:[l.jsx("div",{className:"filter-option",children:l.jsxs("label",{className:"filter-checkbox",children:[l.jsx("input",{type:"checkbox",checked:C.includes("all"),onChange:()=>X("all")}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"option-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Todas las mascotas"]})]})}),s?.uid&&b.length>0&&l.jsx("div",{className:"filter-option",children:l.jsxs("label",{className:"filter-checkbox",children:[l.jsx("input",{type:"checkbox",checked:C.includes("favorites"),onChange:()=>X("favorites")}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"option-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"Favoritas (",b.length,")"]})]})}),l.jsx("div",{className:"filter-option",children:l.jsxs("label",{className:"filter-checkbox",children:[l.jsx("input",{type:"checkbox",checked:C.includes("shelters"),onChange:()=>X("shelters")}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"option-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),"De refugios"]})]})}),l.jsx("div",{className:"filter-option",children:l.jsxs("label",{className:"filter-checkbox",children:[l.jsx("input",{type:"checkbox",checked:C.includes("dogs"),onChange:()=>X("dogs")}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"option-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M18.5 2h-13C4.67 2 4 2.67 4 3.5v17c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5zM12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 14H8v-1.5c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2V20z"})}),"Perros"]})]})}),l.jsx("div",{className:"filter-option",children:l.jsxs("label",{className:"filter-checkbox",children:[l.jsx("input",{type:"checkbox",checked:C.includes("cats"),onChange:()=>X("cats")}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"option-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Gatos"]})]})}),l.jsx("div",{className:"filter-option",children:l.jsxs("label",{className:"filter-checkbox",children:[l.jsx("input",{type:"checkbox",checked:C.includes("others"),onChange:()=>X("others")}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"option-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Otras mascotas"]})]})})]})]})}),l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"section-title-row",children:[l.jsx("h2",{className:"section-title",children:C.includes("all")||C.length===0?"Mascotas disponibles":C.length===1?C.includes("favorites")?"Tus favoritas":C.includes("shelters")?"Mascotas de refugios":C.includes("dogs")?"Perros disponibles":C.includes("cats")?"Gatos disponibles":C.includes("others")?"Otras mascotas":"Mascotas disponibles":"Mascotas filtradas"}),l.jsxs("span",{className:"pets-count",children:[ue.length," mascotas"]})]})}),l.jsx("div",{className:`pets-grid ${M==="user"?"single-column":M==="shelter"?"two-columns":"premium-layout"}`,children:ue.map((te,pe)=>{let ce=!1;if(te.shelterId){const Pe=Q.find(gn=>gn.id===te.shelterId);ce=Pe&&Pe.isPremium,console.log(`✅ ${te.name} es premium:`,ce)}const Me=ce;return l.jsxs("div",{className:`pet-card ${Me?"featured":""}`,onClick:()=>k(te),children:[l.jsxs("div",{className:"pet-image-wrapper",children:[l.jsx("img",{src:te.img,alt:te.name,className:"pet-image"}),l.jsx("button",{className:`favorite-btn ${de(te)?"favorited":""}`,onClick:Pe=>ee(te,Pe),children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),l.jsx("div",{className:"pet-type-badge",children:te.type})]}),l.jsxs("div",{className:"pet-content",children:[l.jsx("h3",{className:"pet-name",children:te.name}),l.jsxs("p",{className:"pet-details",children:[te.breed," • ",te.gender]}),l.jsxs("div",{className:"pet-meta",children:[l.jsx("span",{className:"pet-age",children:te.age}),l.jsxs("span",{className:"pet-location",children:["📍 ",te.location]})]}),te.ownerName&&l.jsxs("div",{className:"pet-owner",children:[l.jsx("span",{className:"owner-label",children:"Dueño:"}),l.jsx("span",{className:"owner-name",children:te.ownerName})]})]})]},pe)})}),ue.length===0&&l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🐾"}),l.jsx("h3",{children:"No se encontraron mascotas"}),l.jsx("p",{children:"Intenta ajustar tu búsqueda o explorar todas las categorías"}),l.jsx("button",{className:"explore-btn",onClick:De,children:"Explorar categorías"})]}),Q.length>0&&l.jsxs("section",{className:"shelters-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"section-title-row",children:[l.jsx("h2",{className:"section-title",children:"Refugios"}),l.jsxs("span",{className:"pets-count",children:[Q.length," refugios"]})]}),l.jsx("div",{className:"shelters-controls",children:l.jsx("button",{className:"view-all-shelters",onClick:()=>e("/shelters"),children:"Ver todos"})})]}),l.jsx("div",{className:"shelters-grid",children:Q.slice(0,4).map((te,pe)=>l.jsxs("div",{className:`shelter-card ${te.isPremium?"premium":""}`,onClick:()=>e("/shelters"),children:[l.jsxs("div",{className:"shelter-image-wrapper",children:[l.jsx("img",{src:te.image||"https://images.unsplash.com/photo-1601758228041-f3b2795255f1?w=400&h=225&fit=crop&crop=center",alt:te.name,className:"shelter-image",onError:ce=>{ce.target.src="https://images.unsplash.com/photo-1601758228041-f3b2795255f1?w=400&h=225&fit=crop&crop=center"}}),l.jsx("div",{className:"shelter-image-overlay"}),te.isPremium&&l.jsx("div",{className:"premium-badge",children:"Premium"})]}),l.jsxs("div",{className:"shelter-content",children:[l.jsx("h3",{className:"shelter-name",children:te.name}),l.jsxs("div",{className:"shelter-location",children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),te.location]}),l.jsxs("div",{className:"shelter-stats",children:[l.jsxs("div",{className:"shelter-stat",children:[l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),te.rating||"N/A"]}),l.jsxs("div",{className:"shelter-stat",children:[l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M4.5 12.75a6 6 0 0 1 6-6h3a6 6 0 0 1 6 6v7.5a.75.75 0 0 1-.75.75h-13.5a.75.75 0 0 1-.75-.75v-7.5Z"})}),te.petsCount||0," mascotas"]})]})]})]},te.id||pe))})]})]}),l.jsx(Oe,{})]})}function LI(){const s=vt(),[e,t]=j.useState([]),[i,o]=j.useState(!0),[u,d]=j.useState(null);j.useEffect(()=>{g()},[]);const g=async()=>{try{console.log("Loading categories from Firebase..."),o(!0);const p=await PI.getCategories();p.length===0?(console.log("No categories found in Firebase, using default categories"),t([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])):(console.log("Categories loaded from Firebase:",p),t(p)),d(null)}catch(p){console.error("Error loading categories:",p),d("Error al cargar las categorías"),t([{name:"PERRITOS",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop&crop=center",bgColor:"#1e3a8a",type:"Perro"},{name:"ERIZOS",image:"https://www3.gobiernodecanarias.org/medusa/wiki/images/0/0c/Erizo-moruno.png",bgColor:"#0d9488",type:"Erizo"},{name:"CONEJITOS",image:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Conejo"},{name:"LORITOS",image:"https://i.pinimg.com/736x/e4/27/f4/e427f43daeda0e4cc69cfe265d6885da.jpg",bgColor:"#1e3a8a",type:"Loro"},{name:"HAMSTERS",image:"https://static.vecteezy.com/system/resources/previews/026/748/785/non_2x/cute-little-hamster-png.png",bgColor:"#0d9488",type:"Hamster"},{name:"GATITOS",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop&crop=center",bgColor:"#fbbf24",type:"Gato"}])}finally{o(!1)}},y=p=>{s("/",{state:{category:p}})};return i?l.jsxs("div",{className:"container",children:[l.jsx("header",{children:l.jsxs("div",{className:"header-content",children:[l.jsx("span",{className:"bone-icon",children:"🦴"}),l.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),l.jsx("main",{children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando categorías..."})]})}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsx("header",{children:l.jsxs("div",{className:"header-content",children:[l.jsx("span",{className:"bone-icon",children:"🦴"}),l.jsx("h2",{className:"logo-text",children:"ANIMALS"})]})}),l.jsxs("main",{children:[u&&l.jsxs("div",{className:"error-message",children:[l.jsx("p",{children:u}),l.jsx("button",{onClick:g,children:"Reintentar"})]}),l.jsx("div",{className:"category-cards",children:e.map((p,_)=>l.jsxs("div",{className:"category-card",style:{backgroundColor:p.bgColor,cursor:"pointer"},onClick:()=>y(p.type),children:[l.jsx("img",{src:p.image,alt:p.name}),l.jsx("div",{className:"category-name",children:p.name})]},p.id||_))})]}),l.jsx(Oe,{})]})}function UI(){const{user:s}=Vt(),e=vt(),[t,i]=j.useState(""),[o,u]=j.useState({name:"",location:"",breed:"",gender:"",age:"",type:"",description:"",size:"",vaccinated:!1,sterilized:!1,specialNeeds:"",shelterId:"",shelterName:""}),[d,g]=j.useState({name:"",address:""}),[y,p]=j.useState([]),[_,b]=j.useState(!1),[w,C]=j.useState(!1);j.useEffect(()=>{(async()=>{if(s)try{const H=await bn.getUserProfile(s.uid);H&&(g({name:H.name||"",address:H.address||""}),u(V=>({...V,location:H.address||""})));const M=await sn.getSheltersByOwner(s.uid);if(p(M),M.length>0&&(C(!0),M.length===1)){const V=M[0];u(R=>({...R,shelterId:V.id,shelterName:V.name}))}}catch(H){console.error("Error loading data:",H)}})()},[s]);const z=$=>{i($)},F=($,H)=>{u(M=>({...M,[$]:H}))},L=$=>{C($),$||u(H=>({...H,shelterId:"",shelterName:""}))},Q=$=>{const H=y.find(M=>M.id===$);u(M=>({...M,shelterId:$,shelterName:H?H.name:""}))},ae=async()=>{if(!o.name.trim()){alert("❌ El nombre de la mascota es obligatorio");return}if(!o.type){alert("❌ Debes seleccionar el tipo de mascota (Perro, Gato, Conejo o Hamster)");return}if(!o.location.trim()){alert("❌ La ubicación es obligatoria");return}if(!t.trim()){alert("❌ Debes proporcionar un enlace de imagen válido");return}b(!0);try{console.log("Starting pet creation process...");const $={...o,img:t.trim(),status:"available",ownerId:s.uid,ownerName:d.name||s.displayName||"Usuario"};w&&o.shelterId&&($.shelterId=o.shelterId,$.shelterName=o.shelterName),console.log("Pet data prepared:",$),console.log("Image URL:",t.trim());const H=await jt.createPet($);console.log("Pet created successfully with ID:",H),alert("✅ Mascota subida correctamente"),e("/")}catch($){console.error("Error saving pet:",$),alert("❌ Error al subir la mascota: "+$.message)}finally{b(!1)}};return l.jsxs("div",{className:"upload-container",children:[l.jsxs("div",{className:"upload-header",children:[l.jsxs("h1",{className:"upload-title",children:[l.jsx("span",{className:"upload-icon",children:"🐾"}),"Subir Mascota"]}),l.jsx("p",{className:"upload-subtitle",children:"Comparte los detalles de tu mascota para encontrarle un hogar"})]}),l.jsxs("div",{className:"upload-content",children:[l.jsx("div",{className:"image-upload-section",children:l.jsxs("div",{className:"url-input-section",children:[l.jsxs("div",{className:"input-with-icon",children:[l.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24zm2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.42l-.47.48a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24z"})}),l.jsx("input",{type:"url",placeholder:"Pega un enlace de imagen (URL)",value:t,onChange:$=>z($.target.value),className:"url-input",required:!0})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=400&fit=crop&crop=center"),className:"quick-btn",children:"🐕 Perro"}),l.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1518791841217-8f162f1e1131?w=400&h=400&fit=crop&crop=center"),className:"quick-btn",children:"🐱 Gato"}),l.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=400&h=400&fit=crop&crop=center"),className:"quick-btn",children:"🐰 Conejo"}),l.jsx("button",{type:"button",onClick:()=>i("https://images.unsplash.com/photo-1517849845537-4d257902454a?w=400&h=400&fit=crop&crop=center"),className:"quick-btn",children:"🐹 Hamster"})]})]})}),l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Nombre *"}),l.jsx("input",{type:"text",value:o.name,onChange:$=>F("name",$.target.value),placeholder:"Nombre de la mascota",className:"field-input",required:!0})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Tipo *"}),l.jsxs("select",{value:o.type,onChange:$=>F("type",$.target.value),className:"field-select",required:!0,children:[l.jsx("option",{value:"",children:"Selecciona tipo"}),l.jsx("option",{value:"Perro",children:"🐕 Perro"}),l.jsx("option",{value:"Gato",children:"🐱 Gato"}),l.jsx("option",{value:"Conejo",children:"🐰 Conejo"}),l.jsx("option",{value:"Hamster",children:"🐹 Hamster"})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Ubicación *"}),l.jsx("input",{type:"text",value:o.location,onChange:$=>F("location",$.target.value),placeholder:"Ciudad, Estado",className:"field-input",required:!0})]}),y.length>0&&l.jsxs("div",{className:"form-field full-width",children:[l.jsx("div",{className:"shelter-toggle",children:l.jsxs("label",{className:"toggle-label",children:[l.jsx("input",{type:"checkbox",checked:w,onChange:$=>L($.target.checked),className:"toggle-checkbox"}),l.jsx("span",{className:"toggle-text",children:"🏠 Esta mascota pertenece a uno de mis refugios"})]})}),w&&l.jsxs("div",{className:"shelter-select",children:[l.jsx("label",{className:"field-label",children:"Seleccionar Refugio *"}),l.jsxs("select",{value:o.shelterId,onChange:$=>Q($.target.value),className:"field-select",required:!0,children:[l.jsx("option",{value:"",children:"Selecciona un refugio"}),y.map($=>l.jsxs("option",{value:$.id,children:[$.name," - ",$.location]},$.id))]}),o.shelterName&&l.jsxs("p",{className:"shelter-info",children:["✅ Mascota será asociada a: ",l.jsx("strong",{children:o.shelterName})]})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Raza"}),l.jsx("input",{type:"text",value:o.breed,onChange:$=>F("breed",$.target.value),placeholder:"Raza o mezcla",className:"field-input"})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Género"}),l.jsxs("select",{value:o.gender,onChange:$=>F("gender",$.target.value),className:"field-select",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"Macho",children:"♂️ Macho"}),l.jsx("option",{value:"Hembra",children:"♀️ Hembra"})]})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Edad"}),l.jsx("input",{type:"text",value:o.age,onChange:$=>F("age",$.target.value),placeholder:"Ej: 2 años",className:"field-input"})]}),l.jsxs("div",{className:"form-field",children:[l.jsx("label",{className:"field-label",children:"Tamaño"}),l.jsxs("select",{value:o.size,onChange:$=>F("size",$.target.value),className:"field-select",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"Pequeño",children:"S Pequeño"}),l.jsx("option",{value:"Mediano",children:"M Mediano"}),l.jsx("option",{value:"Grande",children:"L Grande"})]})]})]}),l.jsxs("div",{className:"form-field full-width",children:[l.jsx("label",{className:"field-label",children:"Descripción"}),l.jsx("textarea",{value:o.description,onChange:$=>F("description",$.target.value),placeholder:"Cuéntanos sobre su personalidad y comportamiento...",className:"field-textarea",rows:"3"})]}),l.jsxs("div",{className:"form-field full-width",children:[l.jsx("label",{className:"field-label",children:"Necesidades especiales"}),l.jsx("textarea",{value:o.specialNeeds,onChange:$=>F("specialNeeds",$.target.value),placeholder:"Medicamentos, cuidados especiales, etc.",className:"field-textarea",rows:"2"})]}),l.jsxs("div",{className:"checkbox-section",children:[l.jsxs("label",{className:"checkbox-item",children:[l.jsx("input",{type:"checkbox",checked:o.vaccinated,onChange:$=>F("vaccinated",$.target.checked),className:"checkbox-input"}),l.jsx("span",{className:"checkbox-custom"}),l.jsx("span",{className:"checkbox-text",children:"Está vacunado"})]}),l.jsxs("label",{className:"checkbox-item",children:[l.jsx("input",{type:"checkbox",checked:o.sterilized,onChange:$=>F("sterilized",$.target.checked),className:"checkbox-input"}),l.jsx("span",{className:"checkbox-custom"}),l.jsx("span",{className:"checkbox-text",children:"Está esterilizado"})]})]}),l.jsx("button",{className:"submit-button",onClick:ae,disabled:_,children:_?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"loading-spinner"}),"Guardando..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"💾"}),"Guardar mascota"]})})]})]}),l.jsx(Oe,{})]})}function qI(){const s=vt(),{user:e,logout:t}=Vt(),[i,o]=j.useState("my-pets"),[u,d]=j.useState({name:"",address:"",phone:"",email:""}),[g,y]=j.useState([]),[p,_]=j.useState([]),[b,w]=j.useState([]),[C,z]=j.useState(!0),[F,L]=j.useState(!1),[Q,ae]=j.useState(null),[$,H]=j.useState({name:"",address:"",phone:"",email:""}),[M,V]=j.useState({name:"",breed:"",age:"",gender:"",location:"",description:""});j.useEffect(()=>{e?R():z(!1)},[e]);const R=async()=>{try{console.log("Profile: Starting to load user data for user:",e.uid),z(!0),console.log("Profile: Loading user profile...");const X=await bn.getUserProfile(e.uid);if(X)console.log("Profile: User profile found:",X),d(X),H(X);else{console.log("Profile: No user profile found, using basic profile");const fe={name:e.displayName||"Usuario",address:"",phone:"",email:e.email||""};d(fe),H(fe)}console.log("Profile: Loading pets for owner:",e.uid);const Ee=await jt.getPetsByOwner(e.uid);console.log("Profile: Pets data received:",Ee),y(Ee),console.log("Profile: Loading favorites...");const k=await ms.getFavorites(e.uid);console.log("Profile: Favorites data received:",k),_(k),console.log("Profile: Loading shelters...");const ie=await sn.getSheltersByOwner(e.uid);console.log("Profile: Shelters data received:",ie),w(ie)}catch(X){console.error("Profile: Error loading user data:",X)}finally{z(!1)}},T=(X,Ee)=>{H(k=>({...k,[X]:Ee}))},A=async()=>{try{await bn.updateUserProfile(e.uid,$),d($),L(!1),alert("Perfil actualizado correctamente")}catch(X){console.error("Error updating profile:",X),alert("Error al actualizar el perfil")}},I=()=>{H(u),L(!1)},O=X=>{X.ownerId===e.uid?(ae(X),V({name:X.name||"",breed:X.breed||"",age:X.age||"",gender:X.gender||"",location:X.location||"",description:X.description||""})):s("/adopt",{state:{pet:X}})},U=async(X,Ee)=>{if(Ee.stopPropagation(),!!e?.uid)try{p.some(ie=>ie.petId===X.id)?(await ms.removeFavorite(e.uid,X.id),_(ie=>ie.filter(fe=>fe.petId!==X.id))):(await ms.addFavorite(e.uid,X.id),_(ie=>[...ie,{petId:X.id,userId:e.uid,createdAt:new Date().toISOString()}]))}catch(k){console.error("Error updating favorites:",k)}},D=async()=>{try{await t(),s("/login")}catch(X){console.error("Error logging out:",X),alert("Error al cerrar sesión")}},ue=(X,Ee)=>{V(k=>({...k,[X]:Ee}))},De=async()=>{if(Q)try{await jt.updatePet(Q.id,M),alert("Mascota actualizada correctamente"),ae(null),await R()}catch(X){console.error("Error updating pet:",X),alert("Error al actualizar la mascota")}},ee=()=>{ae(null),V({name:"",breed:"",age:"",gender:"",location:"",description:""})},de=async()=>{if(!Q)return;const X=`¿Estás seguro de que quieres eliminar a ${Q.name}?

Esto también eliminará:
• Todas las solicitudes de adopción
• Todas las notificaciones relacionadas
• Mensajes en chats (se notificará a los usuarios)
• Favoritos de otros usuarios

Esta acción no se puede deshacer.`;if(window.confirm(X))try{const Ee=await jt.deletePet(Q.id);let k=`✅ ${Q.name} eliminado correctamente`;Ee.deleted&&(k+=`

Eliminado:
`,Ee.deleted.adoptionRequests>0&&(k+=`• ${Ee.deleted.adoptionRequests} solicitudes de adopción
`),Ee.deleted.notifications>0&&(k+=`• ${Ee.deleted.notifications} notificaciones
`),Ee.deleted.conversations>0&&(k+=`• Mensajes en ${Ee.deleted.conversations} conversaciones
`),Ee.deleted.favorites>0&&(k+=`• ${Ee.deleted.favorites} favoritos
`)),alert(k),ae(null),await R()}catch(Ee){console.error("Error deleting pet:",Ee),alert("Error al eliminar la mascota: "+Ee.message)}};return C?l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando perfil..."})]}),l.jsx(Oe,{})]}):e?l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"profile-header",children:[l.jsxs("div",{className:"profile-info",children:[l.jsx("div",{className:"profile-avatar",children:l.jsx("div",{className:"avatar-circle",children:l.jsx("span",{className:"avatar-text",children:(u.name||"U").charAt(0).toUpperCase()})})}),l.jsxs("div",{className:"profile-details",children:[l.jsx("h2",{className:"profile-name",children:u.name||"Usuario"}),l.jsx("p",{className:"profile-email",children:u.email||e.email})]})]}),l.jsx("button",{className:"settings-button",onClick:()=>s("/settings"),children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})})})]}),l.jsxs("main",{className:"profile-main",children:[l.jsxs("div",{className:"profile-tabs",children:[l.jsx("button",{className:`tab-button ${i==="my-pets"?"active":""}`,onClick:()=>o("my-pets"),children:"Tus mascotas"}),l.jsx("button",{className:`tab-button ${i==="favorites"?"active":""}`,onClick:()=>o("favorites"),children:"Favoritas"}),l.jsx("button",{className:`tab-button ${i==="shelters"?"active":""}`,onClick:()=>o("shelters"),children:"Mis Refugios"})]}),l.jsxs("div",{className:"tab-content",children:[i==="my-pets"&&l.jsxs("div",{className:"pets-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("h3",{children:["Mis Mascotas (",g.length,")"]}),l.jsx("div",{className:"section-actions",children:l.jsxs("button",{className:"refresh-button",onClick:R,disabled:C,children:[C?"🔄":"↻"," Recargar"]})})]}),g.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🐾"}),l.jsx("h3",{children:"No tienes mascotas registradas"}),l.jsx("p",{children:"Agrega tu primera mascota para comenzar"}),l.jsx("button",{className:"browse-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):l.jsx("div",{className:"pets-grid",children:g.map(X=>l.jsxs("div",{className:"pet-card",onClick:()=>O(X),children:[l.jsxs("div",{className:"pet-image-wrapper",children:[l.jsx("img",{src:X.img,alt:X.name,className:"pet-image"}),l.jsx("div",{className:"pet-type-badge",children:X.type})]}),l.jsxs("div",{className:"pet-content",children:[l.jsx("h3",{className:"pet-name",children:X.name}),l.jsxs("p",{className:"pet-details",children:[X.breed," • ",X.gender]}),l.jsxs("div",{className:"pet-meta",children:[l.jsx("span",{className:"pet-age",children:X.age}),l.jsxs("span",{className:"pet-location",children:["📍 ",X.location]})]})]})]},X.id))})]}),i==="favorites"&&l.jsx("div",{className:"favorites-section",children:p.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"❤️"}),l.jsx("h3",{children:"No tienes favoritos"}),l.jsx("p",{children:"Las mascotas que marques como favoritas aparecerán aquí"})]}):l.jsx("div",{className:"pets-grid",children:p.map(X=>l.jsxs("div",{className:"pet-card",onClick:()=>O(X.pet),children:[l.jsxs("div",{className:"pet-image-wrapper",children:[l.jsx("img",{src:X.pet?.img,alt:X.pet?.name,className:"pet-image"}),l.jsx("button",{className:"favorite-btn favorited",onClick:Ee=>U(X.pet,Ee),children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),l.jsx("div",{className:"pet-type-badge",children:X.pet?.type})]}),l.jsxs("div",{className:"pet-content",children:[l.jsx("h3",{className:"pet-name",children:X.pet?.name}),l.jsxs("p",{className:"pet-details",children:[X.pet?.breed," • ",X.pet?.gender]}),l.jsxs("div",{className:"pet-meta",children:[l.jsx("span",{className:"pet-age",children:X.pet?.age}),l.jsxs("span",{className:"pet-location",children:["📍 ",X.pet?.location]})]})]})]},X.id))})}),i==="shelters"&&l.jsxs("div",{className:"shelters-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("h3",{children:["Mis Refugios (",b.length,")"]}),l.jsxs("div",{className:"section-actions",children:[l.jsx("button",{className:"refresh-button",onClick:R,disabled:C,children:"🔄 Actualizar"}),l.jsx("button",{className:"add-button",onClick:()=>s("/shelter-register"),children:"➕ Registrar Refugio"})]})]}),b.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🏠"}),l.jsx("h3",{children:"No tienes refugios registrados"}),l.jsx("p",{children:"Registra tu refugio para comenzar a gestionar mascotas"}),l.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):l.jsx("div",{className:"shelters-grid",children:b.map(X=>l.jsxs("div",{className:"shelter-card",children:[l.jsxs("div",{className:"shelter-image-wrapper",children:[l.jsx("img",{src:X.image||"/default-shelter.jpg",alt:X.name,className:"shelter-image"}),X.isPremium&&l.jsx("div",{className:"premium-badge",children:"⭐ Premium"}),l.jsx("div",{className:"status-badge status-{shelter.status}",children:X.status==="active"?"Activo":X.status==="pending"?"Pendiente":"Inactivo"})]}),l.jsxs("div",{className:"shelter-content",children:[l.jsx("h3",{className:"shelter-name",children:X.name}),l.jsxs("p",{className:"shelter-location",children:["📍 ",X.location]}),l.jsx("p",{className:"shelter-description",children:X.description}),l.jsxs("div",{className:"shelter-meta",children:[l.jsxs("span",{className:"rating",children:["⭐ ",X.rating||"N/A"]}),l.jsxs("span",{className:"pets-count",children:["🐾 ",X.petsCount||0," mascotas"]})]}),l.jsxs("div",{className:"shelter-actions",children:[l.jsx("button",{className:"manage-button",onClick:()=>s("/shelter-admin"),children:"Gestionar"}),!X.isPremium&&l.jsx("button",{className:"upgrade-button",onClick:()=>s("/shelters"),children:"Actualizar a Premium"})]})]})]},X.id))})]})]}),F&&l.jsx("div",{className:"modal-overlay",onClick:()=>L(!1),children:l.jsxs("div",{className:"settings-modal",onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{className:"settings-header",children:[l.jsxs("div",{className:"settings-title",children:[l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"})}),l.jsx("h3",{children:"Configuración"})]}),l.jsx("button",{className:"close-btn",onClick:()=>L(!1),children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),l.jsxs("div",{className:"settings-content",children:[l.jsxs("div",{className:"settings-section",children:[l.jsx("h4",{className:"section-title",children:"Información Personal"}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Nombre completo"]}),l.jsx("input",{type:"text",value:$.name,onChange:X=>T("name",X.target.value),placeholder:"Tu nombre completo",className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Dirección"]}),l.jsx("input",{type:"text",value:$.address,onChange:X=>T("address",X.target.value),placeholder:"Tu dirección",className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),"Teléfono"]}),l.jsx("input",{type:"tel",value:$.phone,onChange:X=>T("phone",X.target.value),placeholder:"Tu número de teléfono",className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Email"]}),l.jsx("input",{type:"email",value:$.email,onChange:X=>T("email",X.target.value),placeholder:"Tu email",className:"form-input"})]})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h4",{className:"section-title",children:"Preferencias de Visualización"}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Mostrar mascotas"]}),l.jsxs("div",{className:"select-wrapper",children:[l.jsxs("select",{value:i,onChange:X=>o(X.target.value),className:"form-select",children:[l.jsx("option",{value:"my-pets",children:"Mis mascotas"}),l.jsx("option",{value:"favorites",children:"Favoritas"}),l.jsx("option",{value:"shelters",children:"Mis refugios"})]}),l.jsx("svg",{className:"select-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M7 10l5 5 5-5z"})})]})]})]})]}),l.jsxs("div",{className:"settings-footer",children:[l.jsxs("button",{className:"logout-btn",onClick:D,children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Cerrar Sesión"]}),l.jsxs("div",{className:"settings-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:I,children:"Cancelar"}),l.jsxs("button",{className:"save-btn",onClick:A,children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Guardar"]})]})]})]})}),Q&&l.jsx("div",{className:"modal-overlay",onClick:ee,children:l.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Editar Mascota"}),l.jsx("button",{className:"close-btn",onClick:ee,children:"×"})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Nombre"}),l.jsx("input",{type:"text",value:M.name,onChange:X=>ue("name",X.target.value),placeholder:"Nombre de la mascota"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Raza"}),l.jsx("input",{type:"text",value:M.breed,onChange:X=>ue("breed",X.target.value),placeholder:"Raza de la mascota"})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Edad"}),l.jsx("input",{type:"text",value:M.age,onChange:X=>ue("age",X.target.value),placeholder:"Edad"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Género"}),l.jsxs("select",{value:M.gender,onChange:X=>ue("gender",X.target.value),children:[l.jsx("option",{value:"",children:"Seleccionar"}),l.jsx("option",{value:"Macho",children:"Macho"}),l.jsx("option",{value:"Hembra",children:"Hembra"})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Ubicación"}),l.jsx("input",{type:"text",value:M.location,onChange:X=>ue("location",X.target.value),placeholder:"Ubicación"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Descripción"}),l.jsx("textarea",{value:M.description,onChange:X=>ue("description",X.target.value),placeholder:"Descripción de la mascota",rows:"3"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"delete-button",onClick:de,children:"Eliminar Mascota"}),l.jsxs("div",{className:"modal-actions-right",children:[l.jsx("button",{className:"cancel-button",onClick:ee,children:"Cancelar"}),l.jsx("button",{className:"save-button",onClick:De,children:"Guardar"})]})]})]})})]}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🔒"}),l.jsx("h3",{children:"Inicia sesión para ver tu perfil"}),l.jsx("p",{children:"Necesitas iniciar sesión para acceder a tu perfil"}),l.jsx("button",{className:"browse-button",onClick:()=>s("/login"),children:"Iniciar sesión"})]}),l.jsx(Oe,{})]})}function zI(){const s=vt(),{login:e}=Vt(),[t,i]=j.useState(""),[o,u]=j.useState(""),[d,g]=j.useState(""),[y,p]=j.useState(!1),_=async b=>{b.preventDefault(),p(!0),g("");try{await e(t,o),s("/")}catch(w){g("Error al iniciar sesión. Verifica tus credenciales."),console.error("Login error:",w)}finally{p(!1)}};return l.jsxs("div",{className:"auth-container",children:[l.jsxs("header",{className:"auth-header",children:[l.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),l.jsx("h1",{className:"auth-title",children:"¡Bienvenido de vuelta!"}),l.jsx("p",{className:"auth-subtitle",children:"Inicia sesión para continuar"})]}),l.jsx("div",{className:"auth-form-container",children:l.jsxs("form",{onSubmit:_,className:"auth-form",children:[d&&l.jsx("div",{className:"error-message",children:d}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Correo electrónico"}),l.jsx("input",{type:"email",className:"form-input",value:t,onChange:b=>i(b.target.value),placeholder:"tu@correo.com",required:!0,disabled:y})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Contraseña"}),l.jsx("input",{type:"password",className:"form-input",value:o,onChange:b=>u(b.target.value),placeholder:"••••••••",required:!0,disabled:y})]}),l.jsx("button",{className:`auth-button ${y?"loading":""}`,type:"submit",disabled:y,children:y?"Iniciando sesión...":"Iniciar sesión"}),l.jsxs("div",{className:"auth-link",children:["¿No tienes cuenta? ",l.jsx(Gh,{to:"/register",children:"Crear cuenta"})]})]})}),l.jsx(Oe,{})]})}function BI(){const s=vt(),{register:e}=Vt(),[t,i]=j.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",isShelter:!1}),[o,u]=j.useState(""),[d,g]=j.useState(!1),y=(_,b)=>i(w=>({...w,[_]:b})),p=async _=>{if(_.preventDefault(),g(!0),u(""),t.password!==t.confirmPassword){u("Las contraseñas no coinciden"),g(!1);return}if(t.password.length<6){u("La contraseña debe tener al menos 6 caracteres"),g(!1);return}try{await e(t.email,t.password,{name:t.name,phone:t.phone,address:t.address,isShelter:t.isShelter}),s("/")}catch(b){u("Error al crear la cuenta. Intenta de nuevo."),console.error("Register error:",b)}finally{g(!1)}};return l.jsxs("div",{className:"auth-container",children:[l.jsxs("header",{className:"auth-header",children:[l.jsx("h2",{className:"auth-logo",children:"ANIMALS"}),l.jsx("h1",{className:"auth-title",children:"¡Únete a nosotros!"}),l.jsx("p",{className:"auth-subtitle",children:"Crea tu cuenta para comenzar"})]}),l.jsx("div",{className:"auth-form-container",children:l.jsxs("form",{onSubmit:p,className:"auth-form",children:[o&&l.jsx("div",{className:"error-message",children:o}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Nombre completo"}),l.jsx("input",{type:"text",className:"form-input",value:t.name,onChange:_=>y("name",_.target.value),placeholder:"Tu nombre completo",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Correo electrónico"}),l.jsx("input",{type:"email",className:"form-input",value:t.email,onChange:_=>y("email",_.target.value),placeholder:"tu@correo.com",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Contraseña"}),l.jsx("input",{type:"password",className:"form-input",value:t.password,onChange:_=>y("password",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Confirmar contraseña"}),l.jsx("input",{type:"password",className:"form-input",value:t.confirmPassword,onChange:_=>y("confirmPassword",_.target.value),placeholder:"••••••••",required:!0,disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Teléfono (opcional)"}),l.jsx("input",{type:"tel",className:"form-input",value:t.phone,onChange:_=>y("phone",_.target.value),placeholder:"+506 0000-0000",disabled:d})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Dirección (opcional)"}),l.jsx("input",{type:"text",className:"form-input",value:t.address,onChange:_=>y("address",_.target.value),placeholder:"Tu dirección",disabled:d})]}),l.jsxs("div",{className:"checkbox-group",children:[l.jsx("input",{type:"checkbox",className:"checkbox-input",id:"isShelter",checked:t.isShelter,onChange:_=>y("isShelter",_.target.checked),disabled:d}),l.jsx("label",{className:"checkbox-label",htmlFor:"isShelter",children:"¿Eres un refugio de animales?"})]}),l.jsx("button",{className:`auth-button ${d?"loading":""}`,type:"submit",disabled:d,children:d?"Creando cuenta...":"Crear cuenta"}),l.jsxs("div",{className:"auth-link",children:["¿Ya tienes cuenta? ",l.jsx(Gh,{to:"/login",children:"Iniciar sesión"})]})]})}),l.jsx(Oe,{})]})}function FI(){const{user:s}=Vt(),e=ns(),t=vt(),{petId:i}=yp(),o=e.state?.pet,[u,d]=j.useState(o),[g,y]=j.useState(!o),[p,_]=j.useState({name:s?.displayName||"",email:s?.email||"",message:""}),[b,w]=j.useState(!1),[C,z]=j.useState(!1),[F,L]=j.useState(!1),[Q,ae]=j.useState(!1);j.useEffect(()=>{if(o){if(d(o),y(!1),H(o.id),M(o.id),s?.uid&&o.ownerId===s.uid){t("/profile");return}}else if(i)$(i);else{t("/");return}},[o,i,t,s]);const $=async A=>{try{console.log("Loading pet from Firebase with ID:",A),y(!0);const I=await jt.getPetById(A);if(I){if(console.log("Pet loaded from Firebase:",I),s?.uid&&I.ownerId===s.uid){t("/profile");return}d(I),H(I.id),M(I.id)}else console.log("Pet not found in Firebase"),t("/")}catch(I){console.error("Error loading pet from Firebase:",I),t("/")}finally{y(!1)}},H=async A=>{if(s?.uid)try{const O=(await mn.getAdoptionRequests(s.uid)).find(U=>U.petId===A&&(U.status==="pending"||U.status==="approved"));L(!!O)}catch(I){console.error("Error checking existing request:",I)}},M=async A=>{if(s?.uid)try{const I=await ms.isFavorite(s.uid,A);ae(I)}catch(I){console.error("Error checking favorite status:",I)}},V=async()=>{if(!s?.uid){alert("Debes iniciar sesión para agregar favoritos");return}try{Q?(await ms.removeFavorite(s.uid,u.id),ae(!1),console.log("Pet removed from favorites")):(await ms.addFavorite(s.uid,u.id),ae(!0),console.log("Pet added to favorites"))}catch(A){console.error("Error updating favorites:",A),alert("Error al actualizar favoritos. Inténtalo de nuevo.")}},R=A=>{_(I=>({...I,[A.target.name]:A.target.value}))},T=async A=>{if(A.preventDefault(),!s?.uid){alert("Debes iniciar sesión para solicitar adopción");return}try{z(!0),console.log("=== STARTING ADOPTION REQUEST ==="),console.log("Pet data:",u),console.log("Form data:",p),console.log("User data:",s),console.log("Pet ownerId:",u.ownerId);const I={userId:s.uid,petId:u.id,ownerId:u.ownerId,pet:u,adopterName:p.name,adopterEmail:p.email,message:p.message||""};console.log("Creating adoption request with data:",I);const O=await mn.createAdoptionRequest(I);if(console.log("✅ Adoption request created with ID:",O),await dp.createNotification({userId:s.uid,type:"adoption",title:"Solicitud de adopción enviada",message:`Tu solicitud para adoptar a ${u.name} ha sido enviada y está siendo revisada.`,adoptionRequestId:O}),u.ownerId){console.log("=== CREATING NOTIFICATION FOR OWNER ==="),console.log("Pet owner ID:",u.ownerId),console.log("Adopter ID:",s.uid),console.log("Pet name:",u.name),console.log("Adopter name:",p.name);try{const U=await dp.createNotification({userId:u.ownerId,type:"adoption_request",title:"Nueva solicitud de adopción",message:`${p.name} quiere adoptar a ${u.name}. Revisa la solicitud en tu perfil.`,adoptionRequestId:O,petId:u.id,adopterId:s.uid});console.log("✅ Notification created successfully for pet owner:",u.ownerId),console.log("Notification ID:",U)}catch(U){console.error("❌ Error creating notification for owner:",U)}}else console.log("❌ No ownerId found for pet:",u);console.log("Notifications created successfully"),w(!0)}catch(I){console.error("Error creating adoption request:",I),alert("Error al procesar la solicitud. Inténtalo de nuevo.")}finally{z(!1)}};return g?l.jsxs("div",{className:"container",children:[l.jsx("header",{children:l.jsx("h2",{className:"logo-text",children:"Adoptar"})}),l.jsx("main",{children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando mascota..."})]})}),l.jsx(Oe,{})]}):u?l.jsxs("div",{className:"container",children:[l.jsx("header",{children:l.jsx("h2",{className:"logo-text",children:"Adoptar"})}),l.jsx("main",{children:l.jsxs("div",{className:"adopt-container",children:[l.jsxs("div",{className:"pet-header",children:[l.jsxs("div",{className:"pet-image-container",children:[l.jsx("img",{src:u.img,alt:u.name,className:"pet-img"}),l.jsx("button",{className:`favorite-button ${Q?"active":""}`,onClick:V,title:Q?"Quitar de favoritos":"Agregar a favoritos",disabled:!s?.uid,children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),l.jsxs("div",{className:"pet-info",children:[l.jsx("h1",{children:u.name}),l.jsxs("p",{className:"pet-details",children:[u.breed," • ",u.gender," • ",u.age," • ",u.location]}),u.description&&l.jsxs("div",{className:"pet-description",children:[l.jsx("h3",{children:"Descripción"}),l.jsx("p",{children:u.description})]}),l.jsxs("div",{className:"pet-attributes",children:[l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Tipo"}),l.jsx("div",{className:"attribute-value",children:u.type||"Mascota"})]}),l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Raza"}),l.jsx("div",{className:"attribute-value",children:u.breed})]}),l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Edad"}),l.jsx("div",{className:"attribute-value",children:u.age})]}),l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Género"}),l.jsx("div",{className:"attribute-value",children:u.gender})]}),l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Ubicación"}),l.jsxs("div",{className:"attribute-value",children:["📍 ",u.location]})]}),u.vaccinated!==void 0&&l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Vacunado"}),l.jsx("div",{className:"attribute-value",children:u.vaccinated?"Sí":"No"})]}),u.sterilized!==void 0&&l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Esterilizado"}),l.jsx("div",{className:"attribute-value",children:u.sterilized?"Sí":"No"})]}),u.specialNeeds&&l.jsxs("div",{className:"attribute-item",children:[l.jsx("div",{className:"attribute-label",children:"Necesidades especiales"}),l.jsx("div",{className:"attribute-value",children:u.specialNeeds})]})]})]})]}),b?l.jsxs("div",{className:"adoption-completed",children:[l.jsx("div",{className:"success-icon",children:"✅"}),l.jsx("h2",{children:"¡Solicitud enviada!"}),l.jsx("p",{children:"Tu solicitud de adopción ha sido enviada y está siendo revisada."}),l.jsxs("div",{className:"completion-actions",children:[l.jsx("button",{className:"tracking-button",onClick:()=>t("/tracking"),children:"Ver seguimiento"}),l.jsx("button",{className:"home-button",onClick:()=>t("/"),children:"Volver al inicio"})]})]}):l.jsxs(l.Fragment,{children:[F&&l.jsxs("div",{className:"existing-request-warning",children:[l.jsxs("p",{children:["⚠️ Ya tienes una solicitud pendiente para adoptar a ",u.name]}),l.jsx("p",{children:"Puedes revisar el estado de tu solicitud en tu perfil."})]}),l.jsxs("form",{className:"adopt-form",onSubmit:T,children:[!s?.uid&&l.jsxs("div",{className:"login-required",children:[l.jsx("p",{children:"Debes iniciar sesión para solicitar adopción"}),l.jsx("button",{type:"button",onClick:()=>t("/login"),children:"Iniciar sesión"})]}),l.jsx("label",{children:"Nombre"}),l.jsx("input",{name:"name",value:p.name,onChange:R,placeholder:"Tu nombre",required:!0,disabled:!s?.uid}),l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",name:"email",value:p.email,onChange:R,placeholder:"Tu email",required:!0,disabled:!s?.uid}),l.jsx("label",{children:"Mensaje (opcional)"}),l.jsx("textarea",{name:"message",value:p.message,onChange:R,placeholder:"Cuéntanos por qué quieres adoptar esta mascota...",rows:"3",disabled:!s?.uid}),l.jsx("button",{type:"submit",disabled:!s?.uid||C||F,children:C?"Enviando...":F?"Solicitud ya enviada":"Adoptar"})]})]})]})}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsx("header",{children:l.jsx("h2",{className:"logo-text",children:"Adoptar"})}),l.jsx("main",{children:l.jsxs("div",{className:"error-message",children:[l.jsx("p",{children:"No se encontró la mascota."}),l.jsx("button",{onClick:()=>t("/"),children:"Volver al inicio"})]})}),l.jsx(Oe,{})]})}function HI(){const{user:s}=Vt(),e=vt(),[t,i]=j.useState("sent"),[o,u]=j.useState([]),[d,g]=j.useState([]),[y,p]=j.useState(!0),[_,b]=j.useState(null),[w,C]=j.useState(!1);j.useEffect(()=>{s?.uid?z():p(!1)},[s]);const z=async()=>{try{p(!0),b(null);const M=await mn.getAdoptionRequests(s.uid);console.log("Sent requests loaded:",M);const V=await mn.getAdoptionRequestsForOwner(s.uid);console.log("Received requests loaded:",V);const R=await Promise.all(M.map(async A=>{const I=await jt.getPetById(A.petId),O=await bn.getUserProfile(A.ownerId);return{...A,pet:I,owner:O}})),T=await Promise.all(V.map(async A=>{const I=await jt.getPetById(A.petId),O=await bn.getUserProfile(A.userId);return{...A,pet:I,requester:O}}));u(R),g(T)}catch(M){console.error("Error loading requests:",M),b("Error al cargar solicitudes de adopción")}finally{p(!1)}},F=async M=>{try{C(!0),await mn.approveAdoptionRequest(M),await z(),alert("Solicitud aprobada exitosamente")}catch(V){console.error("Error approving request:",V),alert("Error al aprobar la solicitud")}finally{C(!1)}},L=async M=>{try{C(!0),await mn.rejectAdoptionRequest(M),await z(),alert("Solicitud rechazada")}catch(V){console.error("Error rejecting request:",V),alert("Error al rechazar la solicitud")}finally{C(!1)}},Q=M=>{switch(M){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},ae=M=>{switch(M){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}},$=M=>{e("/adoption-details",{state:{adoption:M}})};if(y)return l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Seguimiento"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),l.jsx("main",{className:"main-content",children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando solicitudes..."})]})}),l.jsx(Oe,{})]});if(!s?.uid)return l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Seguimiento"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),l.jsx("main",{className:"main-content",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🔒"}),l.jsx("h3",{children:"Inicia sesión para ver tu seguimiento"}),l.jsx("p",{children:"Necesitas iniciar sesión para gestionar tus solicitudes de adopción"}),l.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),l.jsx(Oe,{})]});const H=t==="sent"?o:d;return l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Seguimiento"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus solicitudes de adopción"})]}),l.jsxs("main",{className:"main-content",children:[_&&l.jsxs("div",{className:"error-message",children:[l.jsx("p",{children:_}),l.jsx("button",{onClick:z,children:"Reintentar"})]}),l.jsxs("div",{className:"tracking-tabs",children:[l.jsxs("button",{className:`tracking-tab ${t==="sent"?"active":""}`,onClick:()=>i("sent"),children:["Mis solicitudes (",o.length,")"]}),l.jsxs("button",{className:`tracking-tab ${t==="received"?"active":""}`,onClick:()=>i("received"),children:["Solicitudes recibidas (",d.length,")"]})]}),l.jsx("div",{className:"tracking-content",children:H.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:t==="sent"?"📤":"📥"}),l.jsx("h3",{children:t==="sent"?"No has enviado solicitudes":"No tienes solicitudes recibidas"}),l.jsx("p",{children:t==="sent"?"Cuando envíes solicitudes de adopción, aparecerán aquí":"Las solicitudes para tus mascotas aparecerán aquí"}),t==="sent"&&l.jsx("button",{className:"browse-button",onClick:()=>e("/"),children:"Ver mascotas disponibles"})]}):l.jsx("div",{className:"requests-list",children:H.map(M=>l.jsxs("div",{className:"request-card",children:[l.jsx("div",{className:"request-image",children:l.jsx("img",{src:M.pet?.img||"/placeholder-pet.jpg",alt:M.pet?.name})}),l.jsxs("div",{className:"request-info",children:[l.jsx("h3",{children:M.pet?.name}),l.jsxs("p",{className:"pet-details",children:[M.pet?.breed," • ",M.pet?.age," • ",M.pet?.location]}),t==="sent"?l.jsxs("div",{className:"request-meta",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Dueño:"})," ",M.owner?.name||"No disponible"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",M.owner?.email||"No disponible"]})]}):l.jsxs("div",{className:"request-meta",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Solicitante:"})," ",M.requester?.name||"No disponible"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",M.requester?.email||"No disponible"]}),M.message&&l.jsxs("p",{children:[l.jsx("strong",{children:"Mensaje:"}),' "',M.message,'"']})]}),l.jsxs("div",{className:"request-status",children:[l.jsx("span",{className:"status-badge",style:{backgroundColor:Q(M.status)},children:ae(M.status)}),l.jsx("span",{className:"date",children:new Date(M.createdAt).toLocaleDateString()})]})]}),l.jsxs("div",{className:"request-actions",children:[t==="received"&&M.status==="pending"&&l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{className:"approve-btn",onClick:V=>{V.stopPropagation(),F(M.id)},disabled:w,children:"Aprobar"}),l.jsx("button",{className:"reject-btn",onClick:V=>{V.stopPropagation(),L(M.id)},disabled:w,children:"Rechazar"})]}),l.jsx("button",{className:"view-btn",onClick:()=>$(M),children:"Ver detalles"})]})]},M.id))})})]}),l.jsx(Oe,{})]})}function GI(){const{user:s}=Vt(),e=ns(),t=vt(),{requestId:i}=yp(),o=e.state?.adoption,[u,d]=j.useState(o),[g,y]=j.useState(!o),[p,_]=j.useState([]),[b,w]=j.useState(""),[C,z]=j.useState(null);j.useEffect(()=>{if(o)d(o),y(!1),L(o.id);else if(i)F(i);else{t("/tracking");return}},[o,i,t,s]);const F=async V=>{try{console.log("Loading adoption request from Firebase with ID:",V),y(!0);const R=await mn.getAdoptionRequestById(V);R?(console.log("Adoption request loaded from Firebase:",R),d(R),L(R.id)):(console.log("Adoption request not found in Firebase"),t("/tracking"))}catch(R){console.error("Error loading adoption request from Firebase:",R),t("/tracking")}finally{y(!1)}},L=async V=>{try{const T=(await fn.getConversations(s?.uid)).find(A=>A.petId===u.petId||A.adoptionRequestId===V);if(T){z(T.id);const A=await fn.getMessages(T.id);_(A)}else{const A=await fn.createConversation([s.uid,u.pet.ownerId||"admin"],u.petId,V);z(A),_([])}}catch(R){console.error("Error loading messages:",R);try{const T=JSON.parse(localStorage.getItem(`messages_${V}`)||"[]");_(T)}catch(T){console.error("Error loading messages from localStorage:",T)}}},Q=V=>{switch(V){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},ae=V=>{switch(V){case"pending":return"Pendiente de revisión";case"approved":return"Aprobada - Contacta al dueño";case"rejected":return"Rechazada";case"completed":return"Adopción completada";default:return"Desconocido"}},$=async()=>{try{if(!u||!s?.uid)return;const V=u.userId===s.uid?u.pet.ownerId:u.userId;if(!V){alert("No se pudo identificar al otro usuario");return}const R=await fn.getOrCreateConversation(s.uid,V,u.pet.id);t(`/chat/${R}`)}catch(V){console.error("Error starting chat:",V),alert("Error al iniciar el chat")}},H=async V=>{if(V.preventDefault(),!(!b.trim()||!C))try{const R={content:b,senderId:s.uid,senderName:s.displayName||"Usuario",type:"text"};await fn.sendMessage(C,R),w("");const T=await fn.getMessages(C);_(T)}catch(R){console.error("Error sending message:",R);const T={id:Date.now(),content:b,sender:"user",timestamp:new Date().toISOString()},A=[...p,T];_(A),w("");try{localStorage.setItem(`messages_${u.id}`,JSON.stringify(A))}catch(I){console.error("Error saving message to localStorage",I)}}},M=async V=>{if(u.pet.ownerId!==s?.uid){alert("Solo el dueño de la mascota puede aprobar o rechazar solicitudes de adopción");return}if(window.confirm(`¿Cambiar estado a ${V}?`))try{await mn.updateAdoptionRequestStatus(u.id,V),d(R=>({...R,status:V})),alert("Estado actualizado correctamente")}catch(R){console.error("Error updating status:",R),alert("Error al actualizar el estado")}};return g?l.jsxs("div",{className:"container",children:[l.jsxs("header",{children:[l.jsxs("button",{className:"back-button",onClick:()=>t("/tracking"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),l.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),l.jsx("main",{children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando detalles de adopción..."})]})}),l.jsx(Oe,{})]}):u?l.jsxs("div",{className:"container",children:[l.jsxs("header",{children:[l.jsxs("button",{className:"back-button",onClick:()=>t("/tracking"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),l.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),l.jsxs("main",{className:"adoption-details-main",children:[l.jsxs("div",{className:"pet-section",children:[l.jsx("div",{className:"pet-image-container",children:l.jsx("img",{src:u.pet.img,alt:u.pet.name,className:"pet-detail-image"})}),l.jsxs("div",{className:"pet-info",children:[l.jsx("h1",{children:u.pet.name}),l.jsx("p",{className:"pet-breed",children:u.pet.breed}),l.jsxs("div",{className:"pet-details",children:[l.jsxs("span",{children:["🐾 ",u.pet.age]}),l.jsxs("span",{children:["⚥ ",u.pet.gender]}),l.jsxs("span",{children:["📍 ",u.pet.location]})]})]})]}),l.jsxs("div",{className:"status-section",children:[l.jsxs("div",{className:"status-header",children:[l.jsx("h3",{children:"Estado de la Adopción"}),l.jsx("span",{className:"status-badge",style:{backgroundColor:Q(u.status)},children:ae(u.status)})]}),u.status==="pending"&&u.pet.ownerId===s?.uid&&l.jsxs("div",{className:"status-actions",children:[l.jsx("button",{className:"action-button approve",onClick:()=>M("approved"),children:"Aprobar Adopción"}),l.jsx("button",{className:"action-button reject",onClick:()=>M("rejected"),children:"Rechazar"})]}),u&&s?.uid&&l.jsx("div",{className:"chat-actions",children:l.jsx("button",{className:"action-button chat",onClick:$,children:"💬 Iniciar Chat"})}),u.status==="approved"&&u.pet.ownerId===s?.uid&&l.jsx("div",{className:"status-actions",children:l.jsx("button",{className:"action-button complete",onClick:()=>M("completed"),children:"Marcar como Completada"})}),u.pet.ownerId!==s?.uid&&l.jsx("div",{className:"status-info",children:l.jsx("p",{children:"Esta solicitud está siendo revisada por el dueño de la mascota."})})]}),l.jsxs("div",{className:"adopter-section",children:[l.jsx("h3",{children:"Información del Adoptante"}),l.jsxs("div",{className:"adopter-info",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Nombre:"}),l.jsx("span",{children:u.adopterName})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Email:"}),l.jsx("span",{children:u.adopterEmail})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Teléfono:"}),l.jsx("span",{children:u.adopterPhone})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Fecha de solicitud:"}),l.jsx("span",{children:new Date(u.createdAt).toLocaleDateString()})]})]})]}),l.jsxs("div",{className:"messages-section",children:[l.jsx("h3",{children:"Conversación"}),l.jsx("div",{className:"messages-container",children:p.length===0?l.jsx("div",{className:"no-messages",children:l.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):p.map(V=>l.jsxs("div",{className:`message ${V.sender==="user"?"user-message":"other-message"}`,children:[l.jsx("div",{className:"message-content",children:V.content}),l.jsx("div",{className:"message-time",children:new Date(V.timestamp).toLocaleTimeString()})]},V.id))}),l.jsxs("form",{onSubmit:H,className:"message-form",children:[l.jsx("input",{type:"text",value:b,onChange:V=>w(V.target.value),placeholder:"Escribe un mensaje...",className:"message-input"}),l.jsx("button",{type:"submit",className:"send-button",children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})]}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("header",{children:[l.jsxs("button",{className:"back-button",onClick:()=>t("/tracking"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),l.jsx("h2",{className:"logo-text",children:"Detalles de Adopción"})]}),l.jsx("main",{children:l.jsxs("div",{className:"error-message",children:[l.jsx("p",{children:"No se encontró la solicitud de adopción."}),l.jsx("button",{onClick:()=>t("/tracking"),children:"Volver al seguimiento"})]})}),l.jsx(Oe,{})]})}function $I(){const{user:s}=Vt(),{conversationId:e}=yp(),t=vt(),[i,o]=j.useState([]),[u,d]=j.useState(""),[g,y]=j.useState(!0),[p,_]=j.useState(!1),[b,w]=j.useState(null),C=j.useRef(null),z=j.useRef(null);j.useEffect(()=>{if(!s?.uid){t("/login");return}return e&&(F(),L()),()=>{z.current&&z.current()}},[e,s]),j.useEffect(()=>{i.length>0&&setTimeout(()=>{ae()},100)},[i]);const F=async()=>{try{y(!0),console.log("Chat: Loading messages for conversation:",e),z.current=fn.subscribeToMessages(e,M=>{console.log("Chat: Received messages:",M),o(M),setTimeout(()=>{ae()},100),fn.markMessagesAsRead(e,s.uid)})}catch(M){console.error("Error loading messages:",M)}finally{y(!1)}},L=async()=>{try{const V=(await fn.getConversations(s.uid)).find(R=>R.id===e);if(V){const R=V.participants.find(T=>T!==s.uid);if(R)try{const T=await bn.getUserProfile(R);console.log("Chat: Other user loaded:",T),T?T.name=T.name||T.displayName||T.email?.split("@")[0]||"Usuario Anónimo":T={uid:R,name:"Usuario Anónimo"},w(T)}catch(T){console.error("Error loading other user profile:",T),w({uid:R,name:"Usuario Anónimo"})}}}catch(M){console.error("Error loading other user:",M)}},Q=async M=>{if(M.preventDefault(),!(!u.trim()||p))try{_(!0),console.log("Chat: Sending message:",{conversationId:e,message:u.trim()}),await fn.sendMessage(e,s.uid,u.trim()),console.log("Chat: Message sent successfully"),d(""),setTimeout(()=>{ae()},200)}catch(V){console.error("Error sending message:",V),alert("Error al enviar el mensaje")}finally{_(!1)}},ae=()=>{C.current&&C.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},$=M=>new Date(M).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),H=M=>{const V=new Date(M),R=new Date,T=new Date(R);return T.setDate(T.getDate()-1),V.toDateString()===R.toDateString()?"Hoy":V.toDateString()===T.toDateString()?"Ayer":V.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})};return g?l.jsxs("div",{className:"chat-container",children:[l.jsx(Oe,{}),l.jsxs("div",{className:"chat-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando conversación..."})]})]}):l.jsxs("div",{className:"chat-container",children:[l.jsx(Oe,{}),l.jsxs("div",{className:"chat-header",children:[l.jsx("button",{className:"back-button",onClick:()=>t("/conversations"),children:"← Volver"}),l.jsxs("div",{className:"chat-user-info",children:[l.jsx("div",{className:"user-avatar",children:b?.name?b.name.charAt(0).toUpperCase():"U"}),l.jsxs("div",{className:"user-details",children:[l.jsx("h3",{children:b?.name||"Usuario Anónimo"}),l.jsx("p",{children:"En línea"})]})]})]}),l.jsxs("div",{className:"chat-messages",children:[i.length===0?l.jsx("div",{className:"no-messages",children:l.jsx("p",{children:"No hay mensajes aún. ¡Envía el primero!"})}):i.map((M,V)=>{const R=M.senderId===s.uid,T=M.senderId==="system"||M.isSystemMessage,A=V===0||H(M.timestamp)!==H(i[V-1].timestamp);return T?l.jsxs("div",{children:[A&&l.jsx("div",{className:"message-date",children:H(M.timestamp)}),l.jsx("div",{className:"message system",children:l.jsxs("div",{className:"message-content",children:[l.jsx("p",{children:M.message}),l.jsx("span",{className:"message-time",children:$(M.timestamp)})]})})]},M.id):l.jsxs("div",{children:[A&&l.jsx("div",{className:"message-date",children:H(M.timestamp)}),l.jsxs("div",{className:`message-bubble ${R?"own":"other"}`,children:[!R&&l.jsx("div",{className:"message-sender",children:M.senderName||b?.name||"Usuario Anónimo"}),l.jsxs("div",{className:"bubble-content",children:[l.jsx("p",{children:M.message}),l.jsx("span",{className:"bubble-time",children:$(M.timestamp)})]})]})]},M.id)}),l.jsx("div",{ref:C})]}),l.jsxs("form",{className:"chat-input",onSubmit:Q,children:[l.jsx("input",{type:"text",value:u,onChange:M=>d(M.target.value),placeholder:"Escribe un mensaje...",disabled:p,maxLength:500}),l.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"send-button",children:p?"⏳":"📤"})]})]})}function KI(){const{user:s}=Vt(),e=vt(),[t,i]=j.useState([]),[o,u]=j.useState(!0),[d,g]=j.useState(null),[y,p]=j.useState(!1),[_,b]=j.useState(null),w=j.useRef(0),C=j.useRef(0),z=j.useRef(!1);j.useEffect(()=>{if(!s?.uid){e("/login");return}F()},[s]);const F=async()=>{try{u(!0);const T=await fn.getConversations(s.uid),A=await Promise.all(T.map(async I=>{const O=I.participants.find(ue=>ue!==s.uid);let U=null;if(O)try{if(U=await bn.getUserProfile(O),console.log("Other user loaded:",U),U)U.name=U.name||U.displayName||U.email?.split("@")[0]||"Usuario Anónimo";else try{U={uid:O,name:"Usuario Anónimo"}}catch(ue){console.error("Error loading basic user info:",ue),U={uid:O,name:"Usuario Anónimo"}}}catch(ue){console.error("Error loading other user:",ue),U={uid:O,name:"Usuario Anónimo"}}const D=I.petId?await jt.getPetById(I.petId):null;return{...I,otherUser:U||{uid:O,name:"Usuario Anónimo"},pet:D}}));i(A)}catch(T){console.error("Error loading conversations:",T)}finally{u(!1)}},L=T=>{const A=new Date(T),O=(new Date-A)/(1e3*60*60);return O<24?A.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):O<168?A.toLocaleDateString("es-ES",{weekday:"short"}):A.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})},Q=T=>{e(`/chat/${T}`)},ae=(T,A)=>{d&&d!==A&&g(null),w.current=T.touches[0].clientX,C.current=T.touches[0].clientX,z.current=!1},$=(T,A)=>{if(!w.current)return;C.current=T.touches[0].clientX;const I=w.current-C.current;Math.abs(I)>10&&(z.current=!0,T.preventDefault())},H=(T,A)=>{if(!z.current)return;w.current-C.current>80?g(A):g(null),w.current=0,C.current=0,z.current=!1},M=(T,A)=>{T.stopPropagation(),b(A),p(!0)},V=async()=>{if(_)try{const T=await fn.deleteConversation(_);i(A=>A.filter(I=>I.id!==_)),p(!1),b(null),g(null),console.log("Conversación eliminada:",_,"Mensajes eliminados:",T.deletedMessages)}catch(T){console.error("Error al eliminar conversación:",T),i(A=>A.filter(I=>I.id!==_)),p(!1),b(null),g(null)}},R=()=>{p(!1),b(null),g(null)};return o?l.jsxs("div",{className:"conversations-container",children:[l.jsx(Oe,{}),l.jsxs("div",{className:"conversations-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando conversaciones..."})]})]}):l.jsxs("div",{className:"conversations-container",children:[l.jsx(Oe,{}),l.jsxs("div",{className:"conversations-header",children:[l.jsx("h1",{children:"Conversaciones"}),l.jsx("p",{children:"Gestiona tus mensajes con otros usuarios"})]}),l.jsx("div",{className:"conversations-list",children:t.length===0?l.jsxs("div",{className:"no-conversations",children:[l.jsx("div",{className:"no-conversations-icon",children:"💬"}),l.jsx("h3",{children:"No tienes conversaciones"}),l.jsx("p",{children:"Las conversaciones aparecerán aquí cuando alguien te envíe un mensaje"})]}):t.map(T=>l.jsxs("div",{className:`conversation-item ${d===T.id?"swiped":""}`,onClick:()=>!z.current&&Q(T.id),onTouchStart:A=>ae(A,T.id),onTouchMove:A=>$(A,T.id),onTouchEnd:A=>H(A,T.id),children:[l.jsx("div",{className:"conversation-avatar",children:T.otherUser.name.charAt(0).toUpperCase()}),l.jsxs("div",{className:"conversation-content",children:[l.jsxs("div",{className:"conversation-header",children:[l.jsx("h3",{children:T.otherUser.name}),l.jsx("span",{className:"conversation-time",children:L(T.lastMessageTime)})]}),T.pet&&l.jsxs("div",{className:"conversation-pet",children:[l.jsx("span",{className:"pet-label",children:"Sobre:"}),l.jsx("span",{className:"pet-name",children:T.pet.name})]}),l.jsx("p",{className:"conversation-preview",children:T.lastMessage||"Sin mensajes"})]}),d===T.id&&l.jsx("div",{className:"conversation-actions",children:l.jsx("button",{className:"delete-button",onClick:A=>M(A,T.id),children:"🗑️"})})]},T.id))}),y&&l.jsx("div",{className:"delete-modal-overlay",children:l.jsxs("div",{className:"delete-modal",children:[l.jsx("div",{className:"delete-modal-header",children:l.jsx("h3",{children:"¿Eliminar conversación?"})}),l.jsx("div",{className:"delete-modal-content",children:l.jsx("p",{children:"Esta acción no se puede deshacer. Se eliminarán todos los mensajes de esta conversación."})}),l.jsxs("div",{className:"delete-modal-actions",children:[l.jsx("button",{className:"cancel-button",onClick:R,children:"Cancelar"}),l.jsx("button",{className:"confirm-delete-button",onClick:V,children:"Eliminar"})]})]})})]})}function QI(){const{user:s}=Vt(),e=vt(),[t,i]=j.useState([]),[o,u]=j.useState([]),[d,g]=j.useState(""),[y,p]=j.useState(!0),[_,b]=j.useState(null),[w,C]=j.useState([]),[z,F]=j.useState(!1);j.useEffect(()=>{if(!s?.uid){e("/login");return}L()},[s]),j.useEffect(()=>{if(d.trim()==="")u(t);else{const H=t.filter(M=>M.name?.toLowerCase().includes(d.toLowerCase())||M.email?.toLowerCase().includes(d.toLowerCase()));u(H)}},[d,t]);const L=async()=>{try{p(!0);const M=(await bn.getAllUsers()).filter(V=>V.uid!==s.uid);i(M),u(M)}catch(H){console.error("Error loading users:",H)}finally{p(!1)}},Q=async H=>{try{b(H),F(!0);const M=await jt.getPetsByOwner(H.uid);C(M)}catch(M){console.error("Error loading user pets:",M)}finally{F(!1)}},ae=async H=>{try{const M=await fn.getOrCreateConversation(s.uid,H.uid);e(`/chat/${M}`)}catch(M){console.error("Error creating conversation:",M),alert("Error al iniciar conversación")}},$=()=>{b(null),C([])};return y?l.jsxs("div",{className:"users-container",children:[l.jsx(Oe,{}),l.jsxs("div",{className:"users-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando usuarios..."})]})]}):l.jsxs("div",{className:"users-container",children:[l.jsx(Oe,{}),l.jsxs("div",{className:"users-header",children:[l.jsx("h1",{children:"Usuarios"}),l.jsx("p",{children:"Conecta con otros amantes de las mascotas"})]}),l.jsx("div",{className:"search-container",children:l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:d,onChange:H=>g(H.target.value),className:"search-input"})]})}),l.jsx("div",{className:"users-list",children:o.length===0?l.jsxs("div",{className:"no-users",children:[l.jsx("div",{className:"no-users-icon",children:"👥"}),l.jsx("h3",{children:"No se encontraron usuarios"}),l.jsx("p",{children:"Intenta con un término de búsqueda diferente"})]}):o.map(H=>l.jsxs("div",{className:"user-item",onClick:()=>Q(H),children:[l.jsx("div",{className:"user-avatar",children:H.name?H.name.charAt(0).toUpperCase():"U"}),l.jsxs("div",{className:"user-content",children:[l.jsx("h3",{children:H.name||"Usuario"}),l.jsx("p",{children:H.email})]}),l.jsx("div",{className:"user-actions",children:l.jsx("button",{className:"message-button",onClick:M=>{M.stopPropagation(),ae(H)},children:"💬"})})]},H.uid))}),_&&l.jsx("div",{className:"user-profile-modal-overlay",children:l.jsxs("div",{className:"user-profile-modal",children:[l.jsxs("div",{className:"user-profile-header",children:[l.jsx("button",{className:"close-button",onClick:$,children:"✕"}),l.jsxs("div",{className:"user-profile-info",children:[l.jsx("div",{className:"user-profile-avatar",children:_.name?_.name.charAt(0).toUpperCase():"U"}),l.jsxs("div",{className:"user-profile-details",children:[l.jsx("h2",{children:_.name||"Usuario"}),l.jsx("p",{children:_.email})]})]}),l.jsx("button",{className:"send-message-button",onClick:()=>ae(_),children:"💬 Enviar Mensaje"})]}),l.jsxs("div",{className:"user-profile-content",children:[l.jsxs("h3",{children:["Mascotas de ",_.name]}),z?l.jsxs("div",{className:"pets-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando mascotas..."})]}):w.length===0?l.jsxs("div",{className:"no-pets",children:[l.jsx("div",{className:"no-pets-icon",children:"🐾"}),l.jsx("p",{children:"Este usuario no tiene mascotas publicadas"})]}):l.jsx("div",{className:"user-pets-grid",children:w.map(H=>l.jsxs("div",{className:"user-pet-card",children:[l.jsx("div",{className:"pet-image-wrapper",children:l.jsx("img",{src:H.img||"/placeholder-pet.jpg",alt:H.name,className:"pet-image"})}),l.jsxs("div",{className:"pet-info",children:[l.jsx("h4",{children:H.name}),l.jsxs("p",{children:[H.breed," • ",H.age," años"]}),l.jsxs("p",{className:"pet-location",children:["📍 ",H.location]})]})]},H.id))})]})]})})]})}function YI(){const{user:s}=Vt(),e=vt(),[t,i]=j.useState([]),[o,u]=j.useState(!0);j.useEffect(()=>{s?d():e("/login")},[s,e]);const d=async()=>{try{u(!0);const p=await ms.getFavorites(s.uid),_=await Promise.all(p.map(async b=>{const w=await jt.getPetById(b.petId);return{...b,pet:w}}));i(_.filter(b=>b.pet)),console.log("Favorites loaded:",_)}catch(p){console.error("Error loading favorites:",p)}finally{u(!1)}},g=async p=>{try{await ms.removeFavorite(s.uid,p),i(_=>_.filter(b=>b.petId!==p)),console.log("Favorite removed")}catch(_){console.error("Error removing favorite:",_),alert("Error al quitar de favoritos")}},y=p=>{e("/adopt",{state:{pet:p}})};return o?l.jsxs("div",{className:"container",children:[l.jsx("header",{className:"modern-header",children:l.jsx("h2",{className:"section-title",children:"Mis Favoritos"})}),l.jsx("main",{className:"main-content",children:l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando favoritos..."})]})}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Mis Favoritos"}),l.jsx("p",{className:"page-subtitle",children:"Mascotas que te han gustado"})]}),l.jsx("main",{className:"main-content",children:t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"💔"}),l.jsx("h3",{children:"No tienes favoritos"}),l.jsx("p",{children:"Explora las mascotas disponibles y agrega las que te gusten a tus favoritos"}),l.jsx("button",{className:"primary-button",onClick:()=>e("/"),children:"Explorar Mascotas"})]}):l.jsx("div",{className:"favorites-grid",children:t.map(p=>l.jsxs("div",{className:"favorite-card",children:[l.jsxs("div",{className:"pet-image-container",children:[l.jsx("img",{src:p.pet.img,alt:p.pet.name,onClick:()=>y(p.pet)}),l.jsx("button",{className:"remove-favorite-btn",onClick:()=>g(p.petId),title:"Quitar de favoritos",children:"❌"})]}),l.jsxs("div",{className:"pet-info",children:[l.jsx("h3",{onClick:()=>y(p.pet),children:p.pet.name}),l.jsxs("p",{className:"pet-details",children:[p.pet.breed," • ",p.pet.gender," • ",p.pet.age]}),l.jsxs("p",{className:"pet-location",children:["📍 ",p.pet.location]}),l.jsx("div",{className:"pet-actions",children:l.jsx("button",{className:"view-details-btn",onClick:()=>y(p.pet),children:"Ver Detalles"})})]})]},p.id))})}),l.jsx(Oe,{})]})}function XI(){const{user:s}=Vt(),e=vt(),[t,i]=j.useState([]),[o,u]=j.useState([]),[d,g]=j.useState(!0),[y,p]=j.useState(null);j.useEffect(()=>{s?.uid?(_(),b()):g(!1)},[s]);const _=async()=>{try{console.log("Loading pets for owner:",s.uid),g(!0),p(null);const Q=(await jt.getPets()).filter(ae=>ae.ownerId===s.uid);console.log("My pets loaded:",Q),i(Q)}catch(L){console.error("Error loading my pets:",L),p("Error al cargar tus mascotas")}finally{g(!1)}},b=async()=>{try{const L=await mn.getAdoptionRequests(s.uid),Q=t.map($=>$.id),ae=L.filter($=>Q.includes($.petId));console.log("Adoption requests for my pets:",ae),u(ae)}catch(L){console.error("Error loading adoption requests:",L)}},w=L=>{e("/adopt",{state:{pet:L}})},C=L=>{e("/adoption-details",{state:{adoption:L}})},z=L=>{switch(L){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";case"completed":return"#3b82f6";default:return"#6b7280"}},F=L=>{switch(L){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";case"completed":return"Completada";default:return"Desconocido"}};return d?l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),l.jsx("main",{className:"main-content",children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando tus mascotas..."})]})}),l.jsx(Oe,{})]}):s?.uid?l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),l.jsxs("main",{className:"main-content",children:[y&&l.jsxs("div",{className:"error-message",children:[l.jsx("p",{children:y}),l.jsx("button",{onClick:_,children:"Reintentar"})]}),l.jsxs("div",{className:"action-buttons-section",children:[l.jsxs("button",{className:"add-pet-button",onClick:()=>e("/upload"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 5v14m-7-7h14"})}),"Agregar Nueva Mascota"]}),l.jsxs("button",{className:"requests-button",onClick:()=>e("/adoption-requests"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Gestionar Solicitudes"]})]}),l.jsxs("div",{className:"pets-section",children:[l.jsxs("h3",{children:["Mis Mascotas (",t.length,")"]}),t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🐾"}),l.jsx("h3",{children:"No tienes mascotas registradas"}),l.jsx("p",{children:"Agrega tu primera mascota para comenzar a recibir solicitudes de adopción"}),l.jsx("button",{className:"browse-button",onClick:()=>e("/upload"),children:"Agregar Mascota"})]}):l.jsx("div",{className:"pets-grid",children:t.map(L=>l.jsxs("div",{className:"pet-card",children:[l.jsxs("div",{className:"pet-image",onClick:()=>w(L),children:[l.jsx("img",{src:L.img,alt:L.name}),l.jsx("div",{className:"pet-status",children:l.jsx("span",{className:`status-badge ${L.status}`,children:L.status==="available"?"Disponible":"Adoptado"})})]}),l.jsxs("div",{className:"pet-info",children:[l.jsx("h3",{onClick:()=>w(L),children:L.name}),l.jsxs("p",{className:"pet-details",children:[L.breed," • ",L.gender," • ",L.age]}),l.jsxs("p",{className:"pet-location",children:["📍 ",L.location]}),l.jsx("div",{className:"pet-actions",children:l.jsx("button",{className:"view-button",onClick:()=>w(L),children:"Ver Detalles"})})]})]},L.id))})]}),l.jsxs("div",{className:"requests-section",children:[l.jsxs("h3",{children:["Solicitudes de Adopción (",o.length,")"]}),o.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"📋"}),l.jsx("h3",{children:"No hay solicitudes de adopción"}),l.jsx("p",{children:"Las solicitudes de adopción para tus mascotas aparecerán aquí"})]}):l.jsx("div",{className:"requests-list",children:o.map(L=>l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsx("h4",{children:L.pet.name}),l.jsx("span",{className:"status-badge",style:{backgroundColor:z(L.status)},children:F(L.status)})]}),l.jsxs("div",{className:"request-info",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Solicitante:"})," ",L.adopterName]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",L.adopterEmail]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Teléfono:"})," ",L.adopterPhone]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(L.createdAt).toLocaleDateString()]})]}),l.jsx("div",{className:"request-actions",children:l.jsx("button",{className:"view-button",onClick:()=>C(L),children:"Ver Detalles"})})]},L.id))})]})]}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Mis Mascotas"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus mascotas en adopción"})]}),l.jsx("main",{className:"main-content",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🔒"}),l.jsx("h3",{children:"Inicia sesión para gestionar tus mascotas"}),l.jsx("p",{children:"Necesitas iniciar sesión para ver y gestionar tus mascotas"}),l.jsx("button",{className:"browse-button",onClick:()=>e("/login"),children:"Iniciar sesión"})]})}),l.jsx(Oe,{})]})}function vg({isOpen:s,onClose:e,shelterId:t,shelterName:i,onSuccess:o}){const[u,d]=j.useState(!1),g={name:"Premium",price:"$9.99",duration:"mensual",features:["Mascotas en dos columnas","Mascotas destacadas al inicio","Badge premium visible","Mayor visibilidad en búsquedas"]},y=async()=>{d(!0);try{await new Promise(p=>setTimeout(p,2e3)),await sn.activatePremium(t,1),alert(`¡Felicidades! ${i} ahora tiene suscripción premium.`),o(),e()}catch(p){console.error("Error activating premium:",p),alert("Error al procesar el pago. Inténtalo de nuevo.")}finally{d(!1)}};return s?l.jsx("div",{className:"premium-modal-overlay",children:l.jsxs("div",{className:"premium-modal",children:[l.jsxs("div",{className:"premium-modal-header",children:[l.jsx("h2",{children:"⭐ Actualizar a Premium"}),l.jsx("button",{className:"close-button",onClick:e,children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),l.jsxs("div",{className:"premium-modal-content",children:[l.jsxs("div",{className:"shelter-info",children:[l.jsx("h3",{children:i}),l.jsx("p",{children:"Mejora la visibilidad de tus mascotas"})]}),l.jsxs("div",{className:"plan-card selected",children:[l.jsx("div",{className:"plan-header",children:l.jsx("h4",{children:g.name})}),l.jsxs("div",{className:"plan-price",children:[l.jsx("span",{className:"price",children:g.price}),l.jsxs("span",{className:"duration",children:["/",g.duration]})]}),l.jsx("ul",{className:"plan-features",children:g.features.map((p,_)=>l.jsxs("li",{children:[l.jsx("span",{className:"feature-icon",children:"✓"}),p]},_))})]}),l.jsx("div",{className:"payment-info",children:l.jsx("p",{className:"payment-note",children:"💳 Simulación de pago - Sin cargo real"})})]}),l.jsxs("div",{className:"premium-modal-footer",children:[l.jsx("button",{className:"cancel-button",onClick:e,disabled:u,children:"Cancelar"}),l.jsx("button",{className:"purchase-button",onClick:y,disabled:u,children:u?"Procesando...":"Activar Premium"})]})]})}):null}function WI(){const s=vt(),{user:e}=Vt(),[t,i]=j.useState([]),[o,u]=j.useState([]),[d,g]=j.useState([]),[y,p]=j.useState(""),[_,b]=j.useState(null),[w,C]=j.useState(!1),[z,F]=j.useState(null),[L,Q]=j.useState(!0);j.useEffect(()=>{ae()},[]);const ae=async()=>{try{Q(!0),console.log("Loading shelters from Firebase...");const ue=new Promise((X,Ee)=>setTimeout(()=>Ee(new Error("Timeout loading shelters")),1e4)),De=Promise.all([sn.getPremiumShelters(),sn.getRegularShelters()]),[ee,de]=await Promise.race([De,ue]);console.log("Premium shelters:",ee),console.log("Regular shelters:",de),u(ee),g(de),i([...ee,...de]),console.log("No se crean refugios de ejemplo automáticamente")}catch(ue){console.error("Error loading shelters:",ue),$()}finally{Q(!1)}},$=()=>{try{const ue=JSON.parse(localStorage.getItem("shelters")||"[]");i(ue),u(ue.filter(De=>De.isPremium)),g(ue.filter(De=>!De.isPremium))}catch(ue){console.error("Error loading from localStorage",ue)}},H=t.filter(ue=>ue.name.toLowerCase().includes(y.toLowerCase())||ue.location.toLowerCase().includes(y.toLowerCase())||ue.description.toLowerCase().includes(y.toLowerCase())),M=o.filter(ue=>ue.name.toLowerCase().includes(y.toLowerCase())||ue.location.toLowerCase().includes(y.toLowerCase())||ue.description.toLowerCase().includes(y.toLowerCase())),V=d.filter(ue=>ue.name.toLowerCase().includes(y.toLowerCase())||ue.location.toLowerCase().includes(y.toLowerCase())||ue.description.toLowerCase().includes(y.toLowerCase())),R=ue=>{b(ue)},T=ue=>{alert(`Contactando con ${ue.name}...
Teléfono: ${ue.phone}
Email: ${ue.email}`)},A=()=>{b(null)},I=()=>{s("/shelter-register")},O=ue=>{F(ue),C(!0)},U=()=>{ae()},D=(ue,De=!1)=>l.jsxs("div",{className:`shelter-card ${De?"premium":""}`,onClick:()=>R(ue),children:[De&&l.jsx("div",{className:"premium-badge",children:l.jsx("span",{children:"⭐ Premium"})}),l.jsx("div",{className:"shelter-image",children:l.jsx("img",{src:ue.image,alt:ue.name})}),l.jsxs("div",{className:"shelter-content",children:[l.jsxs("div",{className:"shelter-header",children:[l.jsx("h3",{children:ue.name}),ue.verified&&l.jsx("div",{className:"verified-badge",children:l.jsx("span",{children:"✓"})})]}),l.jsxs("p",{className:"shelter-location",children:["📍 ",ue.location]}),l.jsx("p",{className:"shelter-description",children:ue.description}),l.jsxs("div",{className:"shelter-meta",children:[l.jsx("div",{className:"rating",children:l.jsxs("span",{children:["⭐ ",ue.rating]})}),l.jsx("div",{className:"pets-count",children:l.jsxs("span",{children:["🐾 ",ue.petsCount," mascotas"]})})]}),!De&&e&&ue.ownerId===e.uid&&l.jsx("button",{className:"upgrade-button",onClick:ee=>{ee.stopPropagation(),O(ue)},children:"🚀 Actualizar a Premium"})]}),l.jsx("div",{className:"shelter-arrow",children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})})]},ue.id);return _?l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsxs("button",{className:"back-button",onClick:A,children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),l.jsx("h2",{className:"section-title",children:"Detalles del Refugio"})]}),l.jsxs("main",{className:"shelter-details-main",children:[l.jsxs("div",{className:"shelter-header",children:[l.jsx("div",{className:"shelter-image",children:l.jsx("img",{src:_.image,alt:_.name})}),l.jsxs("div",{className:"shelter-info",children:[l.jsx("h1",{children:_.name}),l.jsxs("div",{className:"shelter-meta",children:[l.jsxs("div",{className:"rating",children:[l.jsx("span",{className:"stars",children:"⭐"}),l.jsx("span",{children:_.rating})]}),l.jsxs("div",{className:"pets-count",children:[l.jsx("span",{children:"🐾"}),l.jsxs("span",{children:[_.petsCount," mascotas"]})]}),_.verified&&l.jsxs("div",{className:"verified-badge",children:[l.jsx("span",{children:"✓"}),l.jsx("span",{children:"Verificado"})]})]}),l.jsx("p",{className:"shelter-description",children:_.description})]})]}),l.jsxs("div",{className:"shelter-sections",children:[l.jsxs("div",{className:"info-section",children:[l.jsx("h3",{children:"Información de Contacto"}),l.jsxs("div",{className:"contact-info",children:[l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-icon",children:"📍"}),l.jsx("span",{children:_.address})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-icon",children:"📞"}),l.jsx("span",{children:_.phone})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-icon",children:"✉️"}),l.jsx("span",{children:_.email})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-icon",children:"🌐"}),l.jsx("span",{children:_.website})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-icon",children:"🕒"}),l.jsx("span",{children:_.hours})]})]})]}),l.jsxs("div",{className:"services-section",children:[l.jsx("h3",{children:"Servicios Ofrecidos"}),l.jsx("div",{className:"services-list",children:_.services.map((ue,De)=>l.jsxs("div",{className:"service-item",children:[l.jsx("span",{children:"✓"}),l.jsx("span",{children:ue})]},De))})]}),l.jsxs("div",{className:"actions-section",children:[l.jsx("button",{className:"contact-button",onClick:()=>T(_),children:"Contactar Refugio"}),l.jsx("button",{className:"visit-button",onClick:()=>s("/",{state:{shelter:_}}),children:"Ver Mascotas Disponibles"})]})]})]}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsx("header",{className:"modern-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"section-title",children:"Refugios"}),l.jsx("p",{className:"page-subtitle",children:"Conecta con organizaciones de rescate animal"})]}),l.jsx("div",{className:"header-actions"})]})}),l.jsxs("main",{className:"main-content",children:[l.jsxs("div",{className:"search-section",children:[l.jsxs("div",{className:"search-box",children:[l.jsx("span",{className:"search-icon",children:"🔍"}),l.jsx("input",{type:"text",placeholder:"Buscar refugios...",value:y,onChange:ue=>p(ue.target.value)})]}),l.jsx("button",{className:"register-shelter-button",onClick:I,children:"Registrar Refugio"})]}),L?l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando refugios..."})]}):l.jsxs("div",{className:"shelters-container",children:[M.length>0&&l.jsxs("div",{className:"shelters-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"⭐ Refugios Premium"}),l.jsx("p",{children:"Refugios destacados con mayor visibilidad"})]}),l.jsx("div",{className:"shelters-list premium-grid",children:M.map(ue=>D(ue,!0))})]}),V.length>0&&l.jsxs("div",{className:"shelters-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"🏠 Refugios"}),l.jsx("p",{children:"Conecta con organizaciones de rescate animal"})]}),l.jsx("div",{className:"shelters-list regular-grid",children:V.map(ue=>D(ue,!1))})]}),H.length===0&&l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🏠"}),l.jsx("h3",{children:"No se encontraron refugios"}),l.jsx("p",{children:"Intenta con otros términos de búsqueda"})]})]})]}),l.jsx(Oe,{}),w&&z&&l.jsx(vg,{isOpen:w,onClose:()=>C(!1),shelterId:z.id,shelterName:z.name,onSuccess:U})]})}function ZI(){const s=vt(),{user:e}=Vt(),[t,i]=j.useState({name:"",description:"",location:"",address:"",phone:"",email:"",website:"",hours:"",services:[],image:""}),[o,u]=j.useState([]),[d,g]=j.useState(!1),[y,p]=j.useState(""),[_,b]=j.useState(!1),[w,C]=j.useState(null);j.useEffect(()=>{e?z():s("/login")},[e,s]);const z=async()=>{try{const M=await bn.getUserProfile(e.uid);i(M?V=>({...V,name:M.name?`${M.name} - Refugio`:"Mi Refugio",email:M.email||e.email||"",phone:M.phone||"",address:M.address||"",location:M.address||"Costa Rica"}):V=>({...V,name:e.displayName?`${e.displayName} - Refugio`:"Mi Refugio",email:e.email||"",location:"Costa Rica"}))}catch(M){console.error("Error loading user data:",M)}},F=["Adopción","Esterilización","Vacunación","Atención médica","Rescate","Rehabilitación","Entrenamiento","Hospedaje temporal","Donaciones","Voluntariado"],L=(M,V)=>{i(R=>({...R,[M]:V}))},Q=M=>{u(V=>V.includes(M)?V.filter(R=>R!==M):[...V,M])},ae=async M=>{M.preventDefault(),g(!0),p("");try{const V={...t,services:o,ownerId:e?.uid||"anonymous",ownerName:e?.displayName||e?.email||"Usuario Anónimo",rating:0,petsCount:0,verified:!0,isPremium:!1,status:"active"};console.log("Creating shelter with data:",V);const R=await sn.createShelter(V);console.log("Shelter created with ID:",R),b(!0),C(R)}catch(V){console.error("Error creating shelter",V),p("❌ Error al registrar el refugio: "+V.message)}finally{g(!1)}},$=()=>{b(!1),C(null),alert(`¡Refugio registrado exitosamente! Ahora tienes acceso premium.

¿Te gustaría subir tu primera mascota?`),s("/upload")},H=()=>{b(!1),C(null),alert(`Refugio registrado exitosamente. Puedes actualizar a premium más tarde desde la página de refugios.

¿Te gustaría subir tu primera mascota?`),s("/upload")};return l.jsxs("div",{className:"container",children:[l.jsxs("header",{children:[l.jsxs("button",{className:"back-button",onClick:()=>s("/shelters"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),l.jsx("h2",{className:"logo-text",children:"Registrar Refugio"}),l.jsx("p",{className:"page-subtitle",children:"Únete a nuestra red de organizaciones de rescate"})]}),l.jsxs("main",{className:"shelter-register-main",children:[!e&&l.jsxs("div",{className:"info-message",children:[l.jsx("span",{children:"ℹ️"}),l.jsx("span",{children:"Puedes registrar un refugio sin iniciar sesión. Si tienes cuenta, inicia sesión para gestionar mejor tu refugio."})]}),y&&l.jsxs("div",{className:"error-message",children:[l.jsx("span",{children:"⚠️"}),l.jsx("span",{children:y})]}),l.jsxs("form",{onSubmit:ae,className:"shelter-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:"Información Básica"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Nombre del Refugio *"}),l.jsx("input",{type:"text",value:t.name,onChange:M=>L("name",M.target.value),placeholder:"Ej: Refugio Animal San José",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Descripción *"}),l.jsx("textarea",{value:t.description,onChange:M=>L("description",M.target.value),placeholder:"Describe tu organización, misión y objetivos...",rows:"4",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Imagen del Refugio"}),l.jsx("input",{type:"url",value:t.image,onChange:M=>L("image",M.target.value),placeholder:"https://ejemplo.com/imagen.jpg"}),t.image&&l.jsx("div",{className:"image-preview",children:l.jsx("img",{src:t.image,alt:"Preview"})})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:"Información de Contacto"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Ubicación *"}),l.jsx("input",{type:"text",value:t.location,onChange:M=>L("location",M.target.value),placeholder:"Ej: San José, Costa Rica",required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Teléfono"}),l.jsx("input",{type:"tel",value:t.phone,onChange:M=>L("phone",M.target.value),placeholder:"+506 2222-3333"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:t.email,onChange:M=>L("email",M.target.value),placeholder:"contacto@refugio.com"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Sitio Web"}),l.jsx("input",{type:"url",value:t.website,onChange:M=>L("website",M.target.value),placeholder:"www.refugio.com"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Horarios de Atención *"}),l.jsx("input",{type:"text",value:t.hours,onChange:M=>L("hours",M.target.value),placeholder:"Lunes a Viernes: 8:00 AM - 6:00 PM",required:!0})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:"Servicios Ofrecidos"}),l.jsx("p",{className:"section-description",children:"Selecciona todos los servicios que ofrece tu refugio:"}),l.jsx("div",{className:"services-grid",children:F.map(M=>l.jsxs("label",{className:"service-checkbox",children:[l.jsx("input",{type:"checkbox",checked:o.includes(M),onChange:()=>Q(M)}),l.jsx("span",{className:"checkmark"}),l.jsx("span",{className:"service-label",children:M})]},M))})]}),l.jsx("div",{className:"form-section",children:l.jsx("div",{className:"terms-section",children:l.jsxs("label",{className:"terms-checkbox",children:[l.jsx("input",{type:"checkbox",required:!0}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{children:["Acepto los ",l.jsx("a",{href:"#",className:"terms-link",children:"términos y condiciones"})," y la ",l.jsx("a",{href:"#",className:"terms-link",children:"política de privacidad"})]})]})})}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"cancel-button",onClick:()=>s("/shelters"),children:"Cancelar"}),l.jsx("button",{type:"submit",className:"submit-button",disabled:d,children:d?"Registrando...":"Registrar Refugio"})]})]})]}),l.jsx(Oe,{}),l.jsx(vg,{isOpen:_,onClose:H,shelterId:w,shelterName:t.name,onSuccess:$})]})}function JI(){const s=vt(),{user:e}=Vt(),[t,i]=j.useState([]),[o,u]=j.useState(null),[d,g]=j.useState([]),[y,p]=j.useState(!0),[_,b]=j.useState(!1),[w,C]=j.useState(null);j.useEffect(()=>{e?z():s("/login")},[e,s]);const z=async()=>{try{p(!0);const V=await sn.getSheltersByOwner(e.uid);i(V),console.log("User shelters loaded:",V)}catch(V){console.error("Error loading shelters:",V)}finally{p(!1)}},F=async V=>{try{const R=await jt.getPetsByShelter(V);g(R),console.log("Shelter pets loaded:",R)}catch(R){console.error("Error loading shelter pets:",R)}},L=V=>{u(V),F(V.id)},Q=V=>{C(V),b(!0)},ae=()=>{z(),b(!1)},$=async V=>{if(window.confirm("¿Estás seguro de que quieres eliminar este refugio? Esta acción no se puede deshacer."))try{await sn.deleteShelter(V),alert("Refugio eliminado exitosamente"),z(),o&&o.id===V&&(u(null),g([]))}catch(R){console.error("Error deleting shelter:",R),alert("Error al eliminar el refugio")}},H=V=>{const R={pending:{text:"Pendiente",class:"status-pending"},approved:{text:"Aprobado",class:"status-approved"},rejected:{text:"Rechazado",class:"status-rejected"}},T=R[V]||R.pending;return l.jsx("span",{className:`status-badge ${T.class}`,children:T.text})},M=(V,R)=>{if(!V)return null;const T=R&&new Date(R)<new Date;return l.jsx("span",{className:`premium-badge ${T?"expired":"active"}`,children:T?"⚠️ Premium Expirado":"⭐ Premium"})};return y?l.jsxs("div",{className:"container",children:[l.jsx("header",{className:"modern-header",children:l.jsx("h2",{className:"section-title",children:"Administrar Refugios"})}),l.jsx("main",{className:"admin-main",children:l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando refugios..."})]})}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"modern-header",children:[l.jsx("h2",{className:"section-title",children:"Administrar Refugios"}),l.jsx("p",{className:"page-subtitle",children:"Gestiona tus refugios y suscripciones premium"})]}),l.jsx("main",{className:"admin-main",children:l.jsxs("div",{className:"admin-layout",children:[l.jsxs("div",{className:"shelters-panel",children:[l.jsxs("div",{className:"panel-header",children:[l.jsxs("h3",{children:["Mis Refugios (",t.length,")"]}),l.jsx("button",{className:"add-shelter-btn",onClick:()=>s("/shelter-register"),children:"+ Nuevo Refugio"})]}),l.jsx("div",{className:"shelters-list",children:t.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🏠"}),l.jsx("h4",{children:"No tienes refugios registrados"}),l.jsx("p",{children:"Registra tu primer refugio para comenzar"}),l.jsx("button",{className:"primary-button",onClick:()=>s("/shelter-register"),children:"Registrar Refugio"})]}):t.map(V=>l.jsxs("div",{className:`shelter-item ${o?.id===V.id?"selected":""}`,onClick:()=>L(V),children:[l.jsxs("div",{className:"shelter-header",children:[l.jsx("h4",{children:V.name}),l.jsxs("div",{className:"shelter-badges",children:[H(V.status),M(V.isPremium,V.premiumExpiry)]})]}),l.jsxs("p",{className:"shelter-location",children:["📍 ",V.location]}),l.jsx("p",{className:"shelter-description",children:V.description}),l.jsxs("div",{className:"shelter-stats",children:[l.jsxs("span",{children:["🐾 ",V.petsCount||0," mascotas"]}),l.jsxs("span",{children:["⭐ ",V.rating||0," rating"]})]}),l.jsxs("div",{className:"shelter-actions",children:[!V.isPremium&&l.jsx("button",{className:"upgrade-btn",onClick:R=>{R.stopPropagation(),Q(V)},children:"🚀 Premium"}),l.jsx("button",{className:"delete-btn",onClick:R=>{R.stopPropagation(),$(V.id)},children:"🗑️"})]})]},V.id))})]}),l.jsx("div",{className:"details-panel",children:o?l.jsxs("div",{className:"shelter-details",children:[l.jsxs("div",{className:"details-header",children:[l.jsx("h3",{children:o.name}),l.jsxs("div",{className:"details-badges",children:[H(o.status),M(o.isPremium,o.premiumExpiry)]})]}),l.jsxs("div",{className:"details-content",children:[l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{children:"Información General"}),l.jsxs("div",{className:"info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Ubicación:"}),l.jsx("span",{children:o.location})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Dirección:"}),l.jsx("span",{children:o.address})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Teléfono:"}),l.jsx("span",{children:o.phone})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Email:"}),l.jsx("span",{children:o.email})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Sitio Web:"}),l.jsx("span",{children:o.website||"No especificado"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Horarios:"}),l.jsx("span",{children:o.hours})]})]})]}),l.jsxs("div",{className:"services-section",children:[l.jsx("h4",{children:"Servicios Ofrecidos"}),l.jsx("div",{className:"services-list",children:o.services?.map((V,R)=>l.jsx("span",{className:"service-tag",children:V},R))})]}),l.jsxs("div",{className:"pets-section",children:[l.jsxs("h4",{children:["Mascotas del Refugio (",d.length,")"]}),d.length===0?l.jsxs("div",{className:"no-pets",children:[l.jsx("p",{children:"No hay mascotas registradas en este refugio"}),l.jsx("button",{className:"primary-button",onClick:()=>s("/upload"),children:"Agregar Mascota"})]}):l.jsx("div",{className:"pets-grid",children:d.map(V=>l.jsxs("div",{className:"pet-card",children:[l.jsx("img",{src:V.img,alt:V.name}),l.jsxs("div",{className:"pet-info",children:[l.jsx("h5",{children:V.name}),l.jsxs("p",{children:[V.type," • ",V.breed]}),l.jsx("span",{className:`pet-status ${V.status}`,children:V.status==="available"?"Disponible":V.status==="adopted"?"Adoptado":"Reservado"})]})]},V.id))})]})]})]}):l.jsxs("div",{className:"no-selection",children:[l.jsx("div",{className:"no-selection-icon",children:"🏠"}),l.jsx("h3",{children:"Selecciona un refugio"}),l.jsx("p",{children:"Elige un refugio de la lista para ver sus detalles y gestionar sus mascotas"})]})})]})}),l.jsx(Oe,{}),_&&w&&l.jsx(vg,{isOpen:_,onClose:()=>b(!1),shelterId:w.id,shelterName:w.name,onSuccess:ae})]})}function e4(){const s=vt(),[e,t]=j.useState([]),[i,o]=j.useState("all");j.useEffect(()=>{try{const C=JSON.parse(localStorage.getItem("notifications")||"[]");t(C)}catch(C){console.error("Error loading notifications",C)}},[]);const u=C=>{switch(C){case"adoption":return"🐾";case"message":return"💬";case"system":return"🔔";case"approval":return"✅";case"rejection":return"❌";default:return"🔔"}},d=C=>{switch(C){case"adoption":return"#3b82f6";case"message":return"#10b981";case"system":return"#f59e0b";case"approval":return"#10b981";case"rejection":return"#ef4444";default:return"#6b7280"}},g=C=>{const z=e.map(F=>F.id===C?{...F,read:!0}:F);t(z);try{localStorage.setItem("notifications",JSON.stringify(z))}catch(F){console.error("Error updating notification",F)}},y=()=>{const C=e.map(z=>({...z,read:!0}));t(C);try{localStorage.setItem("notifications",JSON.stringify(C))}catch(z){console.error("Error updating notifications",z)}},p=C=>{const z=e.filter(F=>F.id!==C);t(z);try{localStorage.setItem("notifications",JSON.stringify(z))}catch(F){console.error("Error deleting notification",F)}},_=C=>{switch(g(C.id),C.type){case"adoption":s("/tracking");break;case"message":s("/chat");break;case"approval":case"rejection":s("/tracking");break}},b=e.filter(C=>i==="all"?!0:i==="unread"?!C.read:C.type===i),w=e.filter(C=>!C.read).length;return l.jsxs("div",{className:"container",children:[l.jsxs("header",{children:[l.jsx("h2",{className:"logo-text",children:"Notificaciones"}),l.jsx("div",{className:"header-actions",children:w>0&&l.jsx("button",{className:"mark-all-read",onClick:y,children:"Marcar todas como leídas"})})]}),l.jsxs("main",{className:"notifications-main",children:[l.jsxs("div",{className:"filter-tabs",children:[l.jsxs("button",{className:`filter-tab ${i==="all"?"active":""}`,onClick:()=>o("all"),children:["Todas (",e.length,")"]}),l.jsxs("button",{className:`filter-tab ${i==="unread"?"active":""}`,onClick:()=>o("unread"),children:["No leídas (",w,")"]}),l.jsx("button",{className:`filter-tab ${i==="adoption"?"active":""}`,onClick:()=>o("adoption"),children:"Adopciones"}),l.jsx("button",{className:`filter-tab ${i==="message"?"active":""}`,onClick:()=>o("message"),children:"Mensajes"})]}),l.jsx("div",{className:"notifications-list",children:b.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"🔔"}),l.jsx("h3",{children:"No hay notificaciones"}),l.jsx("p",{children:"Cuando tengas notificaciones, aparecerán aquí"})]}):b.map(C=>l.jsxs("div",{className:`notification-item ${C.read?"":"unread"}`,onClick:()=>_(C),children:[l.jsx("div",{className:"notification-icon",children:l.jsx("span",{style:{color:d(C.type)},children:u(C.type)})}),l.jsxs("div",{className:"notification-content",children:[l.jsx("div",{className:"notification-title",children:C.title}),l.jsx("div",{className:"notification-message",children:C.message}),l.jsxs("div",{className:"notification-time",children:[new Date(C.timestamp).toLocaleDateString()," a las"," ",new Date(C.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),l.jsxs("div",{className:"notification-actions",children:[!C.read&&l.jsx("div",{className:"unread-dot"}),l.jsx("button",{className:"delete-button",onClick:z=>{z.stopPropagation(),p(C.id)},children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})]},C.id))})]}),l.jsx(Oe,{})]})}function t4(){const{user:s}=Vt();vt();const[e,t]=j.useState([]),[i,o]=j.useState(!0),[u,d]=j.useState(null),[g,y]=j.useState(!1),[p,_]=j.useState(""),[b,w]=j.useState(!1);j.useEffect(()=>{s&&C()},[s]);const C=async()=>{try{o(!0);const H=await mn.getAdoptionRequestsForOwner(s.uid),M=await Promise.all(H.map(async V=>{const R=await jt.getPetById(V.petId),T=await bn.getUserProfile(V.userId);return{...V,pet:R,requester:T}}));t(M)}catch(H){console.error("Error loading adoption requests:",H)}finally{o(!1)}},z=async H=>{try{w(!0),await mn.approveAdoptionRequest(H,p),y(!1),_(""),await C(),alert("Solicitud aprobada exitosamente")}catch(M){console.error("Error approving request:",M),alert("Error al aprobar la solicitud")}finally{w(!1)}},F=async H=>{try{w(!0),await mn.rejectAdoptionRequest(H,p),y(!1),_(""),await C(),alert("Solicitud rechazada")}catch(M){console.error("Error rejecting request:",M),alert("Error al rechazar la solicitud")}finally{w(!1)}},L=H=>{d(H),y(!0)},Q=()=>{y(!1),d(null),_("")},ae=H=>{switch(H){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}},$=H=>{switch(H){case"pending":return"Pendiente";case"approved":return"Aprobada";case"rejected":return"Rechazada";default:return"Desconocido"}};return i?l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando solicitudes..."})]}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("header",{children:[l.jsxs("div",{className:"header-content",children:[l.jsx("span",{className:"bone-icon",children:"🦴"}),l.jsx("h2",{className:"logo-text",children:"ANIMALS"})]}),l.jsx("h1",{className:"page-title",children:"Solicitudes de Adopción"}),l.jsx("p",{className:"page-description",children:"Gestiona las solicitudes de adopción para tus mascotas"})]}),l.jsx("main",{className:"adoption-requests-main",children:e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"📋"}),l.jsx("h3",{children:"No hay solicitudes"}),l.jsx("p",{children:"No tienes solicitudes de adopción pendientes"})]}):l.jsx("div",{className:"requests-list",children:e.map(H=>l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsxs("div",{className:"pet-info",children:[l.jsx("img",{src:H.pet?.img||"/placeholder-pet.jpg",alt:H.pet?.name,className:"pet-image"}),l.jsxs("div",{className:"pet-details",children:[l.jsx("h3",{children:H.pet?.name}),l.jsxs("p",{children:[H.pet?.type," • ",H.pet?.breed]})]})]}),l.jsx("div",{className:"status-badge",style:{backgroundColor:ae(H.status)},children:$(H.status)})]}),l.jsxs("div",{className:"requester-info",children:[l.jsx("h4",{children:"Solicitante:"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nombre:"})," ",H.requester?.name||"No disponible"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",H.requester?.email||"No disponible"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Teléfono:"})," ",H.requester?.phone||"No disponible"]})]}),H.message&&l.jsxs("div",{className:"request-message",children:[l.jsx("h4",{children:"Mensaje del solicitante:"}),l.jsxs("p",{children:['"',H.message,'"']})]}),l.jsxs("div",{className:"request-actions",children:[l.jsx("span",{className:"request-date",children:new Date(H.createdAt).toLocaleDateString()}),H.status==="pending"&&l.jsx("div",{className:"action-buttons",children:l.jsx("button",{className:"approve-btn",onClick:()=>L(H),children:"Revisar"})})]})]},H.id))})}),g&&u&&l.jsx("div",{className:"modal-overlay",onClick:Q,children:l.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Gestionar Solicitud"}),l.jsx("button",{className:"close-btn",onClick:Q,children:"×"})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"request-details",children:[l.jsxs("h4",{children:["Mascota: ",u.pet?.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Solicitante:"})," ",u.requester?.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",u.requester?.email]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Teléfono:"})," ",u.requester?.phone]}),u.message&&l.jsxs("div",{className:"message-section",children:[l.jsx("h5",{children:"Mensaje:"}),l.jsxs("p",{children:['"',u.message,'"']})]})]}),l.jsxs("div",{className:"notes-section",children:[l.jsx("label",{children:"Notas adicionales (opcional):"}),l.jsx("textarea",{value:p,onChange:H=>_(H.target.value),placeholder:"Agrega cualquier comentario adicional...",rows:"3"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"reject-btn",onClick:()=>F(u.id),disabled:b,children:b?"Procesando...":"Rechazar"}),l.jsx("button",{className:"approve-btn",onClick:()=>z(u.id),disabled:b,children:b?"Procesando...":"Aprobar"})]})]})}),l.jsx(Oe,{})]})}function n4(){const s=vt(),{user:e,logout:t}=Vt(),[i,o]=j.useState({name:"",address:"",phone:"",email:""}),[u,d]=j.useState({name:"",address:"",phone:"",email:""}),[g,y]=j.useState(!0),[p,_]=j.useState(!1),[b,w]=j.useState("profile");j.useEffect(()=>{e?C():s("/login")},[e,s]);const C=async()=>{try{y(!0);const V=await bn.getUserProfile(e.uid);if(V)o(V),d(V);else{const R={name:e.displayName||"Usuario",address:"",phone:"",email:e.email||""};o(R),d(R)}}catch(V){console.error("Error loading user data:",V)}finally{y(!1)}},z=(V,R)=>{d(T=>({...T,[V]:R}))},F=async()=>{try{_(!0),await bn.updateUserProfile(e.uid,u),o(u),alert("Perfil actualizado correctamente")}catch(V){console.error("Error updating profile:",V),alert("Error al actualizar el perfil")}finally{_(!1)}},L=(V,R)=>{console.log(`Privacy setting ${V} changed to:`,R),alert(`Configuración de privacidad actualizada: ${V} = ${R}`)},Q=(V,R)=>{console.log(`Notification setting ${V} changed to:`,R),alert(`Configuración de notificaciones actualizada: ${V} = ${R}`)},ae=()=>{alert("Función de cambio de contraseña en desarrollo")},$=()=>{alert("Función de exportación de datos en desarrollo")},H=()=>{window.confirm("¿Estás seguro de que quieres eliminar tu cuenta? Esta acción no se puede deshacer y eliminará todos tus datos permanentemente.")&&alert("Función de eliminación de cuenta en desarrollo")},M=async()=>{try{await t(),s("/login")}catch(V){console.error("Error logging out:",V),alert("Error al cerrar sesión")}};return g?l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Cargando configuración..."})]}),l.jsx(Oe,{})]}):l.jsxs("div",{className:"container",children:[l.jsxs("header",{className:"settings-header",children:[l.jsxs("button",{className:"back-button",onClick:()=>s("/profile"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Volver"]}),l.jsx("h1",{className:"settings-title",children:"Configuración"}),l.jsx("div",{className:"settings-actions",children:l.jsx("button",{className:"save-button",onClick:F,disabled:p,children:p?"Guardando...":"Guardar"})})]}),l.jsxs("main",{className:"settings-main",children:[l.jsx("div",{className:"settings-sidebar",children:l.jsxs("nav",{className:"settings-nav",children:[l.jsxs("button",{className:`nav-item ${b==="profile"?"active":""}`,onClick:()=>w("profile"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Perfil"]}),l.jsxs("button",{className:`nav-item ${b==="privacy"?"active":""}`,onClick:()=>w("privacy"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),"Privacidad"]}),l.jsxs("button",{className:`nav-item ${b==="notifications"?"active":""}`,onClick:()=>w("notifications"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})}),"Notificaciones"]}),l.jsxs("button",{className:`nav-item ${b==="account"?"active":""}`,onClick:()=>w("account"),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Cuenta"]})]})}),l.jsxs("div",{className:"settings-content",children:[b==="profile"&&l.jsxs("div",{className:"settings-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Información Personal"}),l.jsx("p",{children:"Actualiza tu información personal y de contacto"})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Nombre completo"]}),l.jsx("input",{type:"text",value:u.name,onChange:V=>z("name",V.target.value),placeholder:"Tu nombre completo",className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Dirección"]}),l.jsx("input",{type:"text",value:u.address,onChange:V=>z("address",V.target.value),placeholder:"Tu dirección",className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),"Teléfono"]}),l.jsx("input",{type:"tel",value:u.phone,onChange:V=>z("phone",V.target.value),placeholder:"Tu número de teléfono",className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),"Email"]}),l.jsx("input",{type:"email",value:u.email,onChange:V=>z("email",V.target.value),placeholder:"Tu email",className:"form-input"})]})]})]}),b==="privacy"&&l.jsxs("div",{className:"settings-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Privacidad y Seguridad"}),l.jsx("p",{children:"Controla quién puede ver tu información"})]}),l.jsxs("div",{className:"privacy-options",children:[l.jsxs("div",{className:"privacy-item",children:[l.jsxs("div",{className:"privacy-info",children:[l.jsx("h3",{children:"Perfil Público"}),l.jsx("p",{children:"Permite que otros usuarios vean tu información básica"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:V=>L("publicProfile",V.target.checked)}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"privacy-item",children:[l.jsxs("div",{className:"privacy-info",children:[l.jsx("h3",{children:"Mostrar Contacto"}),l.jsx("p",{children:"Permite que otros usuarios vean tu información de contacto"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:V=>L("showContact",V.target.checked)}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"privacy-item",children:[l.jsxs("div",{className:"privacy-info",children:[l.jsx("h3",{children:"Notificaciones por Email"}),l.jsx("p",{children:"Recibe notificaciones importantes por correo electrónico"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:V=>L("emailNotifications",V.target.checked)}),l.jsx("span",{className:"slider"})]})]})]})]}),b==="notifications"&&l.jsxs("div",{className:"settings-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Notificaciones"}),l.jsx("p",{children:"Configura cómo y cuándo recibir notificaciones"})]}),l.jsxs("div",{className:"notification-options",children:[l.jsxs("div",{className:"notification-item",children:[l.jsxs("div",{className:"notification-info",children:[l.jsx("h3",{children:"Nuevas Solicitudes"}),l.jsx("p",{children:"Recibe notificaciones cuando alguien solicite adoptar tus mascotas"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:V=>Q("newRequests",V.target.checked)}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"notification-item",children:[l.jsxs("div",{className:"notification-info",children:[l.jsx("h3",{children:"Mensajes"}),l.jsx("p",{children:"Recibe notificaciones de nuevos mensajes en el chat"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:V=>Q("messages",V.target.checked)}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"notification-item",children:[l.jsxs("div",{className:"notification-info",children:[l.jsx("h3",{children:"Actualizaciones de Estado"}),l.jsx("p",{children:"Recibe notificaciones sobre cambios en el estado de tus solicitudes"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:V=>Q("statusUpdates",V.target.checked)}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"notification-item",children:[l.jsxs("div",{className:"notification-info",children:[l.jsx("h3",{children:"Recordatorios"}),l.jsx("p",{children:"Recibe recordatorios sobre citas y eventos importantes"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",onChange:V=>Q("reminders",V.target.checked)}),l.jsx("span",{className:"slider"})]})]})]})]}),b==="account"&&l.jsxs("div",{className:"settings-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Cuenta"}),l.jsx("p",{children:"Gestiona tu cuenta y datos"})]}),l.jsxs("div",{className:"account-actions",children:[l.jsxs("div",{className:"account-item",children:[l.jsxs("div",{className:"account-info",children:[l.jsx("h3",{children:"Cambiar Contraseña"}),l.jsx("p",{children:"Actualiza tu contraseña para mayor seguridad"})]}),l.jsx("button",{className:"action-button secondary",onClick:ae,children:"Cambiar"})]}),l.jsxs("div",{className:"account-item",children:[l.jsxs("div",{className:"account-info",children:[l.jsx("h3",{children:"Exportar Datos"}),l.jsx("p",{children:"Descarga una copia de todos tus datos"})]}),l.jsx("button",{className:"action-button secondary",onClick:$,children:"Exportar"})]}),l.jsxs("div",{className:"account-item danger",children:[l.jsxs("div",{className:"account-info",children:[l.jsx("h3",{children:"Eliminar Cuenta"}),l.jsx("p",{children:"Elimina permanentemente tu cuenta y todos los datos asociados"})]}),l.jsx("button",{className:"action-button danger",onClick:H,children:"Eliminar"})]}),l.jsxs("div",{className:"account-item",children:[l.jsxs("div",{className:"account-info",children:[l.jsx("h3",{children:"Cerrar Sesión"}),l.jsx("p",{children:"Cierra sesión en todos los dispositivos"})]}),l.jsx("button",{className:"action-button primary",onClick:M,children:"Cerrar Sesión"})]})]})]})]})]}),l.jsx(Oe,{})]})}const Yt=({element:s,user:e,loading:t})=>t?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"Cargando..."}):e?s:l.jsx(P0,{to:"/login",replace:!0});function s4(){const{user:s,loading:e}=Vt(),[t,i]=j.useState(null);j.useEffect(()=>{const u=d=>{i(d.detail)};return window.addEventListener("error-notification",u),()=>window.removeEventListener("error-notification",u)},[]);const o=()=>{i(null)};return e?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"Cargando..."}):(console.log("App render - user:",s),console.log("App render - loading:",e),l.jsxs(l.Fragment,{children:[l.jsxs(LT,{children:[l.jsx(St,{path:"/login",element:l.jsx(zI,{})}),l.jsx(St,{path:"/register",element:l.jsx(BI,{})}),l.jsx(St,{path:"/",element:l.jsx(Yt,{element:l.jsx(VI,{}),user:s,loading:e})}),l.jsx(St,{path:"/categories",element:l.jsx(Yt,{element:l.jsx(LI,{}),user:s,loading:e})}),l.jsx(St,{path:"/upload",element:l.jsx(Yt,{element:l.jsx(UI,{}),user:s,loading:e})}),l.jsx(St,{path:"/profile",element:l.jsx(Yt,{element:l.jsx(qI,{}),user:s,loading:e})}),l.jsx(St,{path:"/adopt",element:l.jsx(Yt,{element:l.jsx(FI,{}),user:s,loading:e})}),l.jsx(St,{path:"/tracking",element:l.jsx(Yt,{element:l.jsx(HI,{}),user:s,loading:e})}),l.jsx(St,{path:"/adoption-details",element:l.jsx(Yt,{element:l.jsx(GI,{}),user:s,loading:e})}),l.jsx(St,{path:"/chat/:conversationId",element:l.jsx(Yt,{element:l.jsx($I,{}),user:s,loading:e})}),l.jsx(St,{path:"/conversations",element:l.jsx(Yt,{element:l.jsx(KI,{}),user:s,loading:e})}),l.jsx(St,{path:"/users",element:l.jsx(Yt,{element:l.jsx(QI,{}),user:s,loading:e})}),l.jsx(St,{path:"/favorites",element:l.jsx(Yt,{element:l.jsx(YI,{}),user:s,loading:e})}),l.jsx(St,{path:"/my-pets",element:l.jsx(Yt,{element:l.jsx(XI,{}),user:s,loading:e})}),l.jsx(St,{path:"/shelters",element:l.jsx(Yt,{element:l.jsx(WI,{}),user:s,loading:e})}),l.jsx(St,{path:"/shelter-register",element:l.jsx(Yt,{element:l.jsx(ZI,{}),user:s,loading:e})}),l.jsx(St,{path:"/shelter-admin",element:l.jsx(Yt,{element:l.jsx(JI,{}),user:s,loading:e})}),l.jsx(St,{path:"/notifications",element:l.jsx(Yt,{element:l.jsx(e4,{}),user:s,loading:e})}),l.jsx(St,{path:"/adoption-requests",element:l.jsx(Yt,{element:l.jsx(t4,{}),user:s,loading:e})}),l.jsx(St,{path:"/settings",element:l.jsx(Yt,{element:l.jsx(n4,{}),user:s,loading:e})}),l.jsx(St,{path:"*",element:l.jsx(P0,{to:"/",replace:!0})})]}),l.jsx(MI,{error:t,onClose:o})]}))}const r4=localStorage.getItem("theme")||"dark";document.body.setAttribute("data-theme",r4);Qx.createRoot(document.getElementById("root")).render(l.jsx(j.StrictMode,{children:l.jsx(ow,{children:l.jsx(OI,{children:l.jsx(s4,{})})})}));
